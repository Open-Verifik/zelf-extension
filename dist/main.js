(self.webpackChunkverifik_wallet_extension=self.webpackChunkverifik_wallet_extension||[]).push([[179],{586:(yu,Ts,is)=>{"use strict";function _t(e){return"function"==typeof e}function vp(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Ln=vp(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function rr(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class ln{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const a of t)a.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(_t(r))try{r()}catch(a){n=a instanceof Ln?a.errors:[a]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const a of i)try{zl(a)}catch(s){n=n??[],s instanceof Ln?n=[...n,...s.errors]:n.push(s)}}if(n)throw new Ln(n)}}add(n){var t;if(n&&n!==this)if(this.closed)zl(n);else{if(n instanceof ln){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&rr(t,n)}remove(n){const{_finalizers:t}=this;t&&rr(t,n),n instanceof ln&&n._removeParent(this)}}ln.EMPTY=(()=>{const e=new ln;return e.closed=!0,e})();const Vl=ln.EMPTY;function bu(e){return e instanceof ln||e&&"closed"in e&&_t(e.remove)&&_t(e.add)&&_t(e.unsubscribe)}function zl(e){_t(e)?e():e.unsubscribe()}const Ns={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},as={setTimeout(e,n,...t){const{delegate:r}=as;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=as;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function _u(e){as.setTimeout(()=>{const{onUnhandledError:n}=Ns;if(!n)throw e;n(e)})}function Os(){}const Qn=wi("C",void 0,void 0);function wi(e,n,t){return{kind:e,value:n,error:t}}let Ir=null;function jo(e){if(Ns.useDeprecatedSynchronousErrorHandling){const n=!Ir;if(n&&(Ir={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:r}=Ir;if(Ir=null,t)throw r}}else e()}class TS extends ln{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,bu(n)&&n.add(this)):this.destination=$ie}static create(n,t,r){return new Xg(n,t,r)}next(n){this.isStopped?OS(function Sr(e){return wi("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?OS(function cn(e){return wi("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?OS(Qn,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Rie=Function.prototype.bind;function NS(e,n){return Rie.call(e,n)}class Pie{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){Jv(r)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){Jv(r)}else Jv(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){Jv(t)}}}class Xg extends TS{constructor(n,t,r){let i;if(super(),_t(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let a;this&&Ns.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&NS(n.next,a),error:n.error&&NS(n.error,a),complete:n.complete&&NS(n.complete,a)}):i=n}this.destination=new Pie(i)}}function Jv(e){Ns.useDeprecatedSynchronousErrorHandling?function vu(e){Ns.useDeprecatedSynchronousErrorHandling&&Ir&&(Ir.errorThrown=!0,Ir.error=e)}(e):_u(e)}function OS(e,n){const{onStoppedNotification:t}=Ns;t&&as.setTimeout(()=>t(e,n))}const $ie={closed:!0,next:Os,error:function Lie(e){throw e},complete:Os},FS="function"==typeof Symbol&&Symbol.observable||"@@observable";function Go(e){return e}function Q$(e){return 0===e.length?Go:1===e.length?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}let Sn=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){const a=function zie(e){return e&&e instanceof TS||function Vie(e){return e&&_t(e.next)&&_t(e.error)&&_t(e.complete)}(e)&&bu(e)}(t)?t:new Xg(t,r,i);return jo(()=>{const{operator:s,source:o}=this;a.add(s?s.call(a,o):o?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=J$(r))((i,a)=>{const s=new Xg({next:o=>{try{t(o)}catch(l){a(l),s.unsubscribe()}},error:a,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[FS](){return this}pipe(...t){return Q$(t)(this)}toPromise(t){return new(t=J$(t))((r,i)=>{let a;this.subscribe(s=>a=s,s=>i(s),()=>r(a))})}}return e.create=n=>new e(n),e})();function J$(e){var n;return null!==(n=e??Ns.Promise)&&void 0!==n?n:Promise}const Uie=vp(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let je=(()=>{class e extends Sn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new e5(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Uie}next(t){jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:a}=this;return r||i?Vl:(this.currentObservers=null,a.push(t),new ln(()=>{this.currentObservers=null,rr(a,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:a}=this;r?t.error(i):a&&t.complete()}asObservable(){const t=new Sn;return t.source=this,t}}return e.create=(n,t)=>new e5(n,t),e})();class e5 extends je{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,n)}error(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==r?r:Vl}}function t5(e){return _t(e?.lift)}function jn(e){return n=>{if(t5(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function In(e,n,t,r,i){return new Hie(e,n,t,r,i)}class Hie extends TS{constructor(n,t,r,i,a,s){super(n),this.onFinalize=a,this.shouldUnsubscribe=s,this._next=t?function(o){try{t(o)}catch(l){n.error(l)}}:super._next,this._error=i?function(o){try{i(o)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(o){n.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function tt(e,n){return jn((t,r)=>{let i=0;t.subscribe(In(r,a=>{r.next(e.call(n,a,i++))}))})}function Ul(e){return this instanceof Ul?(this.v=e,this):new Ul(e)}function a5(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function $S(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=e[a]&&function(s){return new Promise(function(o,l){!function i(a,s,o,l){Promise.resolve(l).then(function(c){a({value:c,done:o})},s)}(o,l,(s=e[a](s)).done,s.value)})}}}const BS=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function s5(e){return _t(e?.then)}function o5(e){return _t(e[FS])}function l5(e){return Symbol.asyncIterator&&_t(e?.[Symbol.asyncIterator])}function c5(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const u5=function lae(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function d5(e){return _t(e?.[u5])}function h5(e){return function i5(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),a=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(d){r[d]&&(i[d]=function(p){return new Promise(function(f,m){a.push([d,p,f,m])>1||o(d,p)})})}function o(d,p){try{!function l(d){d.value instanceof Ul?Promise.resolve(d.value.v).then(c,u):h(a[0][2],d)}(r[d](p))}catch(f){h(a[0][3],f)}}function c(d){o("next",d)}function u(d){o("throw",d)}function h(d,p){d(p),a.shift(),a.length&&o(a[0][0],a[0][1])}}(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:i}=yield Ul(t.read());if(i)return yield Ul(void 0);yield yield Ul(r)}}finally{t.releaseLock()}})}function p5(e){return _t(e?.getReader)}function di(e){if(e instanceof Sn)return e;if(null!=e){if(o5(e))return function cae(e){return new Sn(n=>{const t=e[FS]();if(_t(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(BS(e))return function uae(e){return new Sn(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(s5(e))return function dae(e){return new Sn(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,_u)})}(e);if(l5(e))return f5(e);if(d5(e))return function hae(e){return new Sn(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(p5(e))return function pae(e){return f5(h5(e))}(e)}throw c5(e)}function f5(e){return new Sn(n=>{(function fae(e,n){var t,r,i,a;return function n5(e,n,t,r){return new(t||(t=Promise))(function(a,s){function o(u){try{c(r.next(u))}catch(h){s(h)}}function l(u){try{c(r.throw(u))}catch(h){s(h)}}function c(u){u.done?a(u.value):function i(a){return a instanceof t?a:new t(function(s){s(a)})}(u.value).then(o,l)}c((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=a5(e);!(r=yield t.next()).done;)if(n.next(r.value),n.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(a=t.return)&&(yield a.call(t))}finally{if(i)throw i.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function qo(e,n,t,r=0,i=!1){const a=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(a),!i)return a}function Lr(e,n,t=1/0){return _t(n)?Lr((r,i)=>tt((a,s)=>n(r,a,i,s))(di(e(r,i))),t):("number"==typeof n&&(t=n),jn((r,i)=>function mae(e,n,t,r,i,a,s,o){const l=[];let c=0,u=0,h=!1;const d=()=>{h&&!l.length&&!c&&n.complete()},p=m=>c<r?f(m):l.push(m),f=m=>{a&&n.next(m),c++;let g=!1;di(t(m,u++)).subscribe(In(n,y=>{i?.(y),a?p(y):n.next(y)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<r;){const y=l.shift();s?qo(n,s,()=>f(y)):f(y)}d()}catch(y){n.error(y)}}))};return e.subscribe(In(n,p,()=>{h=!0,d()})),()=>{o?.()}}(r,i,e,t)))}function xp(e=1/0){return Lr(Go,e)}const ss=new Sn(e=>e.complete());function m5(e){return e&&_t(e.schedule)}function VS(e){return e[e.length-1]}function g5(e){return _t(VS(e))?e.pop():void 0}function Yg(e){return m5(VS(e))?e.pop():void 0}function y5(e,n=0){return jn((t,r)=>{t.subscribe(In(r,i=>qo(r,e,()=>r.next(i),n),()=>qo(r,e,()=>r.complete(),n),i=>qo(r,e,()=>r.error(i),n)))})}function b5(e,n=0){return jn((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function _5(e,n){if(!e)throw new Error("Iterable cannot be null");return new Sn(t=>{qo(t,n,()=>{const r=e[Symbol.asyncIterator]();qo(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ur(e,n){return n?function Cae(e,n){if(null!=e){if(o5(e))return function bae(e,n){return di(e).pipe(b5(n),y5(n))}(e,n);if(BS(e))return function vae(e,n){return new Sn(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,n);if(s5(e))return function _ae(e,n){return di(e).pipe(b5(n),y5(n))}(e,n);if(l5(e))return _5(e,n);if(d5(e))return function xae(e,n){return new Sn(t=>{let r;return qo(t,n,()=>{r=e[u5](),qo(t,n,()=>{let i,a;try{({value:i,done:a}=r.next())}catch(s){return void t.error(s)}a?t.complete():t.next(i)},0,!0)}),()=>_t(r?.return)&&r.return()})}(e,n);if(p5(e))return function wae(e,n){return _5(h5(e),n)}(e,n)}throw c5(e)}(e,n):di(e)}function os(...e){const n=Yg(e),t=function yae(e,n){return"number"==typeof VS(e)?e.pop():n}(e,1/0),r=e;return r.length?1===r.length?di(r[0]):xp(t)(ur(r,n)):ss}function zS(e={}){const{connector:n=(()=>new je),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return a=>{let s,o,l,c=0,u=!1,h=!1;const d=()=>{o?.unsubscribe(),o=void 0},p=()=>{d(),s=l=void 0,u=h=!1},f=()=>{const m=s;p(),m?.unsubscribe()};return jn((m,g)=>{c++,!h&&!u&&d();const y=l=l??n();g.add(()=>{c--,0===c&&!h&&!u&&(o=US(f,i))}),y.subscribe(g),!s&&c>0&&(s=new Xg({next:b=>y.next(b),error:b=>{h=!0,d(),o=US(p,t,b),y.error(b)},complete:()=>{u=!0,d(),o=US(p,r),y.complete()}}),di(m).subscribe(s))})(a)}}function US(e,n,...t){if(!0===n)return void e();if(!1===n)return;const r=new Xg({next:()=>{r.unsubscribe(),e()}});return di(n(...t)).subscribe(r)}function un(e){for(let n in e)if(e[n]===un)return n;throw Error("Could not find renamed property on target object.")}function HS(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function $r(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map($r).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const t=n.indexOf("\n");return-1===t?n:n.substring(0,t)}function WS(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const kae=un({__forward_ref__:un});function xn(e){return e.__forward_ref__=xn,e.toString=function(){return $r(this())},e}function nt(e){return jS(e)?e():e}function jS(e){return"function"==typeof e&&e.hasOwnProperty(kae)&&e.__forward_ref__===xn}function GS(e){return e&&!!e.\u0275providers}const v5="https://g.co/ng/security#xss";class oe extends Error{constructor(n,t){super(function ex(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}(n,t)),this.code=n}}function ot(e){return"string"==typeof e?e:null==e?"":String(e)}function tx(e,n){throw new oe(-201,!1)}function ls(e,n){null==e&&function nn(e,n,t,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${t} ${r} ${n} <=Actual]`))}(n,e,null,"!=")}function de(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ye(e){return{providers:e.providers||[],imports:e.imports||[]}}function nx(e){return x5(e,rx)||x5(e,C5)}function x5(e,n){return e.hasOwnProperty(n)?e[n]:null}function w5(e){return e&&(e.hasOwnProperty(qS)||e.hasOwnProperty(Nae))?e[qS]:null}const rx=un({\u0275prov:un}),qS=un({\u0275inj:un}),C5=un({ngInjectableDef:un}),Nae=un({ngInjectorDef:un});var Dt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Dt||{});let KS;function oa(e){const n=KS;return KS=e,n}function S5(e,n,t){const r=nx(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Dt.Optional?null:void 0!==n?n:void tx($r(e))}const Nn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Zg={},XS="__NG_DI_FLAG__",ix="ngTempTokenPath",Fae=/\n/gm,I5="__source";let wp;function Wl(e){const n=wp;return wp=e,n}function Lae(e,n=Dt.Default){if(void 0===wp)throw new oe(-203,!1);return null===wp?S5(e,void 0,n):wp.get(e,n&Dt.Optional?null:void 0,n)}function Y(e,n=Dt.Default){return(function k5(){return KS}()||Lae)(nt(e),n)}function Se(e,n=Dt.Default){return Y(e,ax(n))}function ax(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function YS(e){const n=[];for(let t=0;t<e.length;t++){const r=nt(e[t]);if(Array.isArray(r)){if(0===r.length)throw new oe(900,!1);let i,a=Dt.Default;for(let s=0;s<r.length;s++){const o=r[s],l=$ae(o);"number"==typeof l?-1===l?i=o.token:a|=l:i=o}n.push(Y(i,a))}else n.push(Y(r))}return n}function Qg(e,n){return e[XS]=n,e.prototype[XS]=n,e}function $ae(e){return e[XS]}function Ko(e){return{toString:e}.toString()}var sx=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(sx||{}),cs=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(cs||{});const Xo={},Ht=[],ox=un({\u0275cmp:un}),ZS=un({\u0275dir:un}),QS=un({\u0275pipe:un}),E5=un({\u0275mod:un}),Yo=un({\u0275fac:un}),Jg=un({__NG_ELEMENT_ID__:un}),D5=un({__NG_ENV_ID__:un});function A5(e,n,t){let r=e.length;for(;;){const i=e.indexOf(n,t);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const a=n.length;if(i+a===r||e.charCodeAt(i+a)<=32)return i}t=i+1}}function JS(e,n,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const a=t[r++],s=t[r++],o=t[r++];e.setAttribute(n,s,o,a)}else{const a=i,s=t[++r];N5(a)?e.setProperty(n,a,s):e.setAttribute(n,a,s),r++}}return r}function T5(e){return 3===e||4===e||6===e}function N5(e){return 64===e.charCodeAt(0)}function ey(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?t=i:0===t||O5(e,t,i,null,-1===t||2===t?n[++r]:null)}}return e}function O5(e,n,t,r,i){let a=0,s=e.length;if(-1===n)s=-1;else for(;a<e.length;){const o=e[a++];if("number"==typeof o){if(o===n){s=-1;break}if(o>n){s=a-1;break}}}for(;a<e.length;){const o=e[a];if("number"==typeof o)break;if(o===t){if(null===r)return void(null!==i&&(e[a+1]=i));if(r===e[a+1])return void(e[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==s&&(e.splice(s,0,n),a=s+1),e.splice(a++,0,t),null!==r&&e.splice(a++,0,r),null!==i&&e.splice(a++,0,i)}const F5="ng-template";function zae(e,n,t){let r=0,i=!0;for(;r<e.length;){let a=e[r++];if("string"==typeof a&&i){const s=e[r++];if(t&&"class"===a&&-1!==A5(s.toLowerCase(),n,0))return!0}else{if(1===a){for(;r<e.length&&"string"==typeof(a=e[r++]);)if(a.toLowerCase()===n)return!0;return!1}"number"==typeof a&&(i=!1)}}return!1}function R5(e){return 4===e.type&&e.value!==F5}function Uae(e,n,t){return n===(4!==e.type||t?e.value:F5)}function Hae(e,n,t){let r=4;const i=e.attrs||[],a=function Gae(e){for(let n=0;n<e.length;n++)if(T5(e[n]))return n;return e.length}(i);let s=!1;for(let o=0;o<n.length;o++){const l=n[o];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!Uae(e,l,t)||""===l&&1===n.length){if(Fs(r))return!1;s=!0}}else{const c=8&r?l:n[++o];if(8&r&&null!==e.attrs){if(!zae(e.attrs,c,t)){if(Fs(r))return!1;s=!0}continue}const h=Wae(8&r?"class":l,i,R5(e),t);if(-1===h){if(Fs(r))return!1;s=!0;continue}if(""!==c){let d;d=h>a?"":i[h+1].toLowerCase();const p=8&r?d:null;if(p&&-1!==A5(p,c,0)||2&r&&c!==d){if(Fs(r))return!1;s=!0}}}}else{if(!s&&!Fs(r)&&!Fs(l))return!1;if(s&&Fs(l))continue;s=!1,r=l|1&r}}return Fs(r)||s}function Fs(e){return 0==(1&e)}function Wae(e,n,t,r){if(null===n)return-1;let i=0;if(r||!t){let a=!1;for(;i<n.length;){const s=n[i];if(s===e)return i;if(3===s||6===s)a=!0;else{if(1===s||2===s){let o=n[++i];for(;"string"==typeof o;)o=n[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=a?1:2}return-1}return function qae(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function P5(e,n,t=!1){for(let r=0;r<n.length;r++)if(Hae(e,n[r],t))return!0;return!1}function Kae(e,n){e:for(let t=0;t<n.length;t++){const r=n[t];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function L5(e,n){return e?":not("+n.trim()+")":n}function Xae(e){let n=e[0],t=1,r=2,i="",a=!1;for(;t<e.length;){let s=e[t];if("string"==typeof s)if(2&r){const o=e[++t];i+="["+s+(o.length>0?'="'+o+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Fs(s)&&(n+=L5(a,i),i=""),r=s,a=a||!Fs(r);t++}return""!==i&&(n+=L5(a,i)),n}function Ut(e){return Ko(()=>{const n=B5(e),t={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===sx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,data:e.data||{},encapsulation:e.encapsulation||cs.Emulated,styles:e.styles||Ht,_:null,schemas:e.schemas||null,tView:null,id:""};V5(t);const r=e.dependencies;return t.directiveDefs=lx(r,!1),t.pipeDefs=lx(r,!0),t.id=function rse(e){let n=0;const t=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const i of t)n=Math.imul(31,n)+i.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(t),t})}function Jae(e){return Kt(e)||Ci(e)}function ese(e){return null!==e}function Ze(e){return Ko(()=>({type:e.type,bootstrap:e.bootstrap||Ht,declarations:e.declarations||Ht,imports:e.imports||Ht,exports:e.exports||Ht,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function $5(e,n){if(null==e)return Xo;const t={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),t[i]=r,n&&(n[i]=a)}return t}function ce(e){return Ko(()=>{const n=B5(e);return V5(n),n})}function Vi(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function Kt(e){return e[ox]||null}function Ci(e){return e[ZS]||null}function la(e){return e[QS]||null}function Na(e,n){const t=e[E5]||null;if(!t&&!0===n)throw new Error(`Type ${$r(e)} does not have '\u0275mod' property.`);return t}function B5(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,exportAs:e.exportAs||null,standalone:!0===e.standalone,selectors:e.selectors||Ht,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$5(e.inputs,n),outputs:$5(e.outputs)}}function V5(e){e.features?.forEach(n=>n(e))}function lx(e,n){if(!e)return null;const t=n?la:Jae;return()=>("function"==typeof e?e():e).map(r=>t(r)).filter(ese)}const Br=0,De=1,vt=2,Jn=3,Rs=4,xu=5,ki=6,kp=7,ir=8,Sp=9,wu=10,ht=11,ty=12,z5=13,Ip=14,Mr=15,ny=16,Mp=17,io=18,ry=19,U5=20,jl=21,Zo=22,cx=23,ux=24,Rt=25,eI=1,H5=2,ao=7,Ep=9,hi=11;function Oa(e){return Array.isArray(e)&&"object"==typeof e[eI]}function ca(e){return Array.isArray(e)&&!0===e[eI]}function tI(e){return 0!=(4&e.flags)}function Cu(e){return e.componentOffset>-1}function hx(e){return 1==(1&e.flags)}function Ps(e){return!!e.template}function nI(e){return 0!=(512&e[vt])}function ku(e,n){return e.hasOwnProperty(Yo)?e[Yo]:null}let lse=Nn.WeakRef??class ose{constructor(n){this.ref=n}deref(){return this.ref}},use=0,so=null,px=!1;function Qr(e){const n=so;return so=e,n}class K5{constructor(){this.id=use++,this.ref=function cse(e){return new lse(e)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[n,t]of this.producers){const r=t.producerNode.deref();if(void 0!==r&&t.atTrackingVersion===this.trackingVersion){if(r.producerPollStatus(t.seenValueVersion))return!0}else this.producers.delete(n),r?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const n=px;px=!0;try{for(const[t,r]of this.consumers){const i=r.consumerNode.deref();void 0!==i&&i.trackingVersion===r.atTrackingVersion?i.onConsumerDependencyMayHaveChanged():(this.consumers.delete(t),i?.producers.delete(this.id))}}finally{px=n}}producerAccessed(){if(px)throw new Error("");if(null===so)return;let n=so.producers.get(this.id);void 0===n?(n={consumerNode:so.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:so.trackingVersion},so.producers.set(this.id,n),this.consumers.set(so.id,n)):(n.seenValueVersion=this.valueVersion,n.atTrackingVersion=so.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==so?.consumerAllowSignalWrites}producerPollStatus(n){return this.valueVersion!==n||(this.onProducerUpdateValueVersion(),this.valueVersion!==n)}}let X5=null;const Y5=()=>{};class fse extends K5{constructor(n,t,r){super(),this.watch=n,this.schedule=t,this.dirty=!1,this.cleanupFn=Y5,this.registerOnCleanup=i=>{this.cleanupFn=i},this.consumerAllowSignalWrites=r}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const n=Qr(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Y5,this.watch(this.registerOnCleanup)}finally{Qr(n)}}cleanup(){this.cleanupFn()}}class mse{constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Jr(){return Z5}function Z5(e){return e.type.prototype.ngOnChanges&&(e.setInput=yse),gse}function gse(){const e=J5(this),n=e?.current;if(n){const t=e.previous;if(t===Xo)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function yse(e,n,t,r){const i=this.declaredInputs[t],a=J5(e)||function bse(e,n){return e[Q5]=n}(e,{previous:Xo,current:null}),s=a.current||(a.current={}),o=a.previous,l=o[i];s[i]=new mse(l&&l.currentValue,n,o===Xo),e[r]=n}Jr.ngInherit=!0;const Q5="__ngSimpleChanges__";function J5(e){return e[Q5]||null}const oo=function(e,n,t){},e4="svg";function $n(e){for(;Array.isArray(e);)e=e[Br];return e}function gx(e,n){return $n(n[e])}function ua(e,n){return $n(n[e.index])}function n4(e,n){return e.data[n]}function Dp(e,n){return e[n]}function da(e,n){const t=n[e];return Oa(t)?t:t[Br]}function yx(e){return 128==(128&e[vt])}function Gl(e,n){return null==n?null:e[n]}function r4(e){e[Mp]=0}function kse(e){1024&e[vt]||(e[vt]|=1024,s4(e,1))}function a4(e){1024&e[vt]&&(e[vt]&=-1025,s4(e,-1))}function s4(e,n){let t=e[Jn];if(null===t)return;t[xu]+=n;let r=t;for(t=t[Jn];null!==t&&(1===n&&1===r[xu]||-1===n&&0===r[xu]);)t[xu]+=n,r=t,t=t[Jn]}const et={lFrame:y4(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function c4(){return et.bindingsEnabled}function Ap(){return null!==et.skipHydrationRootTNode}function ge(){return et.lFrame.lView}function Bt(){return et.lFrame.tView}function ei(e){return et.lFrame.contextLView=e,e[ir]}function ti(e){return et.lFrame.contextLView=null,e}function pi(){let e=u4();for(;null!==e&&64===e.type;)e=e.parent;return e}function u4(){return et.lFrame.currentTNode}function lo(e,n){const t=et.lFrame;t.currentTNode=e,t.isParent=n}function lI(){return et.lFrame.isParent}function cI(){et.lFrame.isParent=!1}function zi(){const e=et.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function Tp(){return et.lFrame.bindingIndex++}function Jo(e){const n=et.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function Pse(e,n){const t=et.lFrame;t.bindingIndex=t.bindingRootIndex=e,uI(n)}function uI(e){et.lFrame.currentDirectiveIndex=e}function dI(e){const n=et.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}function f4(){return et.lFrame.currentQueryIndex}function hI(e){et.lFrame.currentQueryIndex=e}function $se(e){const n=e[De];return 2===n.type?n.declTNode:1===n.type?e[ki]:null}function m4(e,n,t){if(t&Dt.SkipSelf){let i=n,a=e;for(;!(i=i.parent,null!==i||t&Dt.Host||(i=$se(a),null===i||(a=a[Ip],10&i.type))););if(null===i)return!1;n=i,e=a}const r=et.lFrame=g4();return r.currentTNode=n,r.lView=e,!0}function pI(e){const n=g4(),t=e[De];et.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function g4(){const e=et.lFrame,n=null===e?null:e.child;return null===n?y4(e):n}function y4(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function b4(){const e=et.lFrame;return et.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const _4=b4;function fI(){const e=b4();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Ui(){return et.lFrame.selectedIndex}function Su(e){et.lFrame.selectedIndex=e}function er(){const e=et.lFrame;return n4(e.tView,e.selectedIndex)}function ar(){et.lFrame.currentNamespace=e4}function Er(){!function Use(){et.lFrame.currentNamespace=null}()}let x4=!0;function bx(){return x4}function ql(e){x4=e}function _x(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const a=e.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:o,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=a;s&&(e.contentHooks??=[]).push(-t,s),o&&((e.contentHooks??=[]).push(t,o),(e.contentCheckHooks??=[]).push(t,o)),l&&(e.viewHooks??=[]).push(-t,l),c&&((e.viewHooks??=[]).push(t,c),(e.viewCheckHooks??=[]).push(t,c)),null!=u&&(e.destroyHooks??=[]).push(t,u)}}function vx(e,n,t){w4(e,n,3,t)}function xx(e,n,t,r){(3&e[vt])===t&&w4(e,n,t,r)}function mI(e,n){let t=e[vt];(3&t)===n&&(t&=4095,t+=1,e[vt]=t)}function w4(e,n,t,r){const a=r??-1,s=n.length-1;let o=0;for(let l=void 0!==r?65535&e[Mp]:0;l<s;l++)if("number"==typeof n[l+1]){if(o=n[l],null!=r&&o>=r)break}else n[l]<0&&(e[Mp]+=65536),(o<a||-1==a)&&(Wse(e,t,n,l),e[Mp]=(4294901760&e[Mp])+l+2),l++}function C4(e,n){oo(4,e,n);const t=Qr(null);try{n.call(e)}finally{Qr(t),oo(5,e,n)}}function Wse(e,n,t,r){const i=t[r]<0,a=t[r+1],o=e[i?-t[r]:t[r]];i?e[vt]>>12<e[Mp]>>16&&(3&e[vt])===n&&(e[vt]+=4096,C4(o,a)):C4(o,a)}const Np=-1;class sy{constructor(n,t,r){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function k4(e){return e!==Np}function wx(e){return 32767&e}function Cx(e,n){let t=function Kse(e){return e>>16}(e),r=n;for(;t>0;)r=r[Ip],t--;return r}let yI=!0;function kx(e){const n=yI;return yI=e,n}const S4=255,I4=5;let Xse=0;const co={};function Sx(e,n){const t=M4(e,n);if(-1!==t)return t;const r=n[De];r.firstCreatePass&&(e.injectorIndex=n.length,bI(r.data,e),bI(n,null),bI(r.blueprint,null));const i=_I(e,n),a=e.injectorIndex;if(k4(i)){const s=wx(i),o=Cx(i,n),l=o[De].data;for(let c=0;c<8;c++)n[a+c]=o[s+c]|l[s+c]}return n[a+8]=i,a}function bI(e,n){e.push(0,0,0,0,0,0,0,0,n)}function M4(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function _I(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;null!==i;){if(r=F4(i),null===r)return Np;if(t++,i=i[Ip],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Np}function vI(e,n,t){!function Yse(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Jg)&&(r=t[Jg]),null==r&&(r=t[Jg]=Xse++);const i=r&S4;n.data[e+(i>>I4)]|=1<<i}(e,n,t)}function E4(e,n,t){if(t&Dt.Optional||void 0!==e)return e;tx()}function D4(e,n,t,r){if(t&Dt.Optional&&void 0===r&&(r=null),!(t&(Dt.Self|Dt.Host))){const i=e[Sp],a=oa(void 0);try{return i?i.get(n,r,t&Dt.Optional):S5(n,r,t&Dt.Optional)}finally{oa(a)}}return E4(r,0,t)}function A4(e,n,t,r=Dt.Default,i){if(null!==e){if(2048&n[vt]&&!(r&Dt.Self)){const s=function toe(e,n,t,r,i){let a=e,s=n;for(;null!==a&&null!==s&&2048&s[vt]&&!(512&s[vt]);){const o=T4(a,s,t,r|Dt.Self,co);if(o!==co)return o;let l=a.parent;if(!l){const c=s[U5];if(c){const u=c.get(t,co,r);if(u!==co)return u}l=F4(s),s=s[Ip]}a=l}return i}(e,n,t,r,co);if(s!==co)return s}const a=T4(e,n,t,r,co);if(a!==co)return a}return D4(n,t,r,i)}function T4(e,n,t,r,i){const a=function Jse(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Jg)?e[Jg]:void 0;return"number"==typeof n?n>=0?n&S4:eoe:n}(t);if("function"==typeof a){if(!m4(n,e,r))return r&Dt.Host?E4(i,0,r):D4(n,t,r,i);try{const s=a(r);if(null!=s||r&Dt.Optional)return s;tx()}finally{_4()}}else if("number"==typeof a){let s=null,o=M4(e,n),l=Np,c=r&Dt.Host?n[Mr][ki]:null;for((-1===o||r&Dt.SkipSelf)&&(l=-1===o?_I(e,n):n[o+8],l!==Np&&O4(r,!1)?(s=n[De],o=wx(l),n=Cx(l,n)):o=-1);-1!==o;){const u=n[De];if(N4(a,o,u.data)){const h=Qse(o,n,t,s,r,c);if(h!==co)return h}l=n[o+8],l!==Np&&O4(r,n[De].data[o+8]===c)&&N4(a,o,n)?(s=u,o=wx(l),n=Cx(l,n)):o=-1}}return i}function Qse(e,n,t,r,i,a){const s=n[De],o=s.data[e+8],u=Ix(o,s,t,null==r?Cu(o)&&yI:r!=s&&0!=(3&o.type),i&Dt.Host&&a===o);return null!==u?Iu(n,s,u,o):co}function Ix(e,n,t,r,i){const a=e.providerIndexes,s=n.data,o=1048575&a,l=e.directiveStart,u=a>>20,d=i?o+u:e.directiveEnd;for(let p=r?o:o+u;p<d;p++){const f=s[p];if(p<l&&t===f||p>=l&&f.type===t)return p}if(i){const p=s[l];if(p&&Ps(p)&&p.type===t)return l}return null}function Iu(e,n,t,r){let i=e[t];const a=n.data;if(function jse(e){return e instanceof sy}(i)){const s=i;s.resolving&&function Sae(e,n){const t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new oe(-200,`Circular dependency in DI detected for ${e}${t}`)}(function tn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():ot(e)}(a[t]));const o=kx(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?oa(s.injectImpl):null;m4(e,r,Dt.Default);try{i=e[t]=s.factory(void 0,a,e,r),n.firstCreatePass&&t>=r.directiveStart&&function Hse(e,n,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:a}=n.type.prototype;if(r){const s=Z5(n);(t.preOrderHooks??=[]).push(e,s),(t.preOrderCheckHooks??=[]).push(e,s)}i&&(t.preOrderHooks??=[]).push(0-e,i),a&&((t.preOrderHooks??=[]).push(e,a),(t.preOrderCheckHooks??=[]).push(e,a))}(t,a[t],n)}finally{null!==l&&oa(l),kx(o),s.resolving=!1,_4()}}return i}function N4(e,n,t){return!!(t[n+(e>>I4)]&1<<e)}function O4(e,n){return!(e&Dt.Self||e&Dt.Host&&n)}class Op{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return A4(this._tNode,this._lView,n,ax(r),t)}}function eoe(){return new Op(pi(),ge())}function Ve(e){return Ko(()=>{const n=e.prototype.constructor,t=n[Yo]||xI(n),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const a=i[Yo]||xI(i);if(a&&a!==t)return a;i=Object.getPrototypeOf(i)}return a=>new a})}function xI(e){return jS(e)?()=>{const n=xI(nt(e));return n&&n()}:ku(e)}function F4(e){const n=e[De],t=n.type;return 2===t?n.declTNode:1===t?e[ki]:null}function Mu(e){return function Zse(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const a=t[i];if(T5(a))break;if(0===a)i+=2;else if("number"==typeof a)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(a===n)return t[i+1];i+=2}}}return null}(pi(),e)}const Rp="__parameters__";function Lp(e,n,t){return Ko(()=>{const r=function wI(e){return function(...t){if(e){const r=e(...t);for(const i in r)this[i]=r[i]}}}(n);function i(...a){if(this instanceof i)return r.apply(this,a),this;const s=new i(...a);return o.annotation=s,o;function o(l,c,u){const h=l.hasOwnProperty(Rp)?l[Rp]:Object.defineProperty(l,Rp,{value:[]})[Rp];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(s),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function ly(e,n){e.forEach(t=>Array.isArray(t)?ly(t,n):n(t))}function P4(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Mx(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function cy(e,n){const t=[];for(let r=0;r<e;r++)t.push(n);return t}function Fa(e,n,t){let r=Bp(e,n);return r>=0?e[1|r]=t:(r=~r,function loe(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(1===i)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;)e[i]=e[i-2],i--;e[n]=t,e[n+1]=r}}(e,r,n,t)),r}function CI(e,n){const t=Bp(e,n);if(t>=0)return e[1|t]}function Bp(e,n){return function L4(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){const a=r+(i-r>>1),s=e[a<<t];if(n===s)return a<<t;s>n?i=a:r=a+1}return~(i<<t)}(e,n,1)}const Kl=Qg(Lp("Optional"),8),Vp=Qg(Lp("SkipSelf"),4);function Nx(e){return 128==(128&e.flags)}var Xl=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Xl||{});const Doe=/^>|^->|<!--|-->|--!>|<!-$/g,Aoe=/(<|>)/,Toe="\u200b$1\u200b";const DI=new Map;let Noe=0;const TI="__ngContext__";function Si(e,n){Oa(n)?(e[TI]=n[ry],function Foe(e){DI.set(e[ry],e)}(n)):e[TI]=n}let NI;function OI(e,n){return NI(e,n)}function hy(e){const n=e[Jn];return ca(n)?n[Jn]:n}function FI(e){return nB(e[ty])}function RI(e){return nB(e[Rs])}function nB(e){for(;null!==e&&!ca(e);)e=e[Rs];return e}function Hp(e,n,t,r,i){if(null!=r){let a,s=!1;ca(r)?a=r:Oa(r)&&(s=!0,r=r[Br]);const o=$n(r);0===e&&null!==t?null==i?oB(n,t,o):Eu(n,t,o,i||null,!0):1===e&&null!==t?Eu(n,t,o,i||null,!0):2===e?function $x(e,n,t){const r=Px(e,n);r&&function Joe(e,n,t,r){e.removeChild(n,t,r)}(e,r,n,t)}(n,o,s):3===e&&n.destroyNode(o),null!=a&&function nle(e,n,t,r,i){const a=t[ao];a!==$n(t)&&Hp(n,e,r,a,i);for(let o=hi;o<t.length;o++){const l=t[o];fy(l[De],l,e,n,r,a)}}(n,e,a,t,i)}}function PI(e,n){return e.createComment(function K4(e){return e.replace(Doe,n=>n.replace(Aoe,Toe))}(n))}function Rx(e,n,t){return e.createElement(n,t)}function iB(e,n){const t=e[Ep],r=t.indexOf(n);a4(n),t.splice(r,1)}function LI(e,n){if(e.length<=hi)return;const t=hi+n,r=e[t];if(r){const i=r[ny];null!==i&&i!==e&&iB(i,r),n>0&&(e[t-1][Rs]=r[Rs]);const a=Mx(e,hi+n);!function joe(e,n){fy(e,n,n[ht],2,null,null),n[Br]=null,n[ki]=null}(r[De],r);const s=a[io];null!==s&&s.detachView(a[De]),r[Jn]=null,r[Rs]=null,r[vt]&=-129}return r}function aB(e,n){if(!(256&n[vt])){const t=n[ht];n[cx]?.destroy(),n[ux]?.destroy(),t.destroyNode&&fy(e,n,t,3,null,null),function Koe(e){let n=e[ty];if(!n)return $I(e[De],e);for(;n;){let t=null;if(Oa(n))t=n[ty];else{const r=n[hi];r&&(t=r)}if(!t){for(;n&&!n[Rs]&&n!==e;)Oa(n)&&$I(n[De],n),n=n[Jn];null===n&&(n=e),Oa(n)&&$I(n[De],n),t=n&&n[Rs]}n=t}}(n)}}function $I(e,n){if(!(256&n[vt])){n[vt]&=-129,n[vt]|=256,function Qoe(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const i=n[t[r]];if(!(i instanceof sy)){const a=t[r+1];if(Array.isArray(a))for(let s=0;s<a.length;s+=2){const o=i[a[s]],l=a[s+1];oo(4,o,l);try{l.call(o)}finally{oo(5,o,l)}}else{oo(4,i,a);try{a.call(i)}finally{oo(5,i,a)}}}}}(e,n),function Zoe(e,n){const t=e.cleanup,r=n[kp];if(null!==t)for(let a=0;a<t.length-1;a+=2)if("string"==typeof t[a]){const s=t[a+3];s>=0?r[s]():r[-s].unsubscribe(),a+=2}else t[a].call(r[t[a+1]]);null!==r&&(n[kp]=null);const i=n[jl];if(null!==i){n[jl]=null;for(let a=0;a<i.length;a++)(0,i[a])()}}(e,n),1===n[De].type&&n[ht].destroy();const t=n[ny];if(null!==t&&ca(n[Jn])){t!==n[Jn]&&iB(t,n);const r=n[io];null!==r&&r.detachView(e)}!function Roe(e){DI.delete(e[ry])}(n)}}function BI(e,n,t){return function sB(e,n,t){let r=n;for(;null!==r&&40&r.type;)r=(n=r).parent;if(null===r)return t[Br];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:a}=e.data[r.directiveStart+i];if(a===cs.None||a===cs.Emulated)return null}return ua(r,t)}}(e,n.parent,t)}function Eu(e,n,t,r,i){e.insertBefore(n,t,r,i)}function oB(e,n,t){e.appendChild(n,t)}function lB(e,n,t,r,i){null!==r?Eu(e,n,t,r,i):oB(e,n,t)}function Px(e,n){return e.parentNode(n)}function cB(e,n,t){return dB(e,n,t)}let VI,WI,dB=function uB(e,n,t){return 40&e.type?ua(e,t):null};function Lx(e,n,t,r){const i=BI(e,r,n),a=n[ht],o=cB(r.parent||n[ki],r,n);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)lB(a,i,t[l],o,!1);else lB(a,i,t,o,!1);void 0!==VI&&VI(a,r,n,t,i)}function py(e,n){if(null!==n){const t=n.type;if(3&t)return ua(n,e);if(4&t)return zI(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return py(e,r);{const i=e[n.index];return ca(i)?zI(-1,i):$n(i)}}if(32&t)return OI(n,e)()||$n(e[n.index]);{const r=pB(e,n);return null!==r?Array.isArray(r)?r[0]:py(hy(e[Mr]),r):py(e,n.next)}}return null}function pB(e,n){return null!==n?e[Mr][ki].projection[n.projection]:null}function zI(e,n){const t=hi+e+1;if(t<n.length){const r=n[t],i=r[De].firstChild;if(null!==i)return py(r,i)}return n[ao]}function UI(e,n,t,r,i,a,s){for(;null!=t;){const o=r[t.index],l=t.type;if(s&&0===n&&(o&&Si($n(o),r),t.flags|=2),32!=(32&t.flags))if(8&l)UI(e,n,t.child,r,i,a,!1),Hp(n,e,i,o,a);else if(32&l){const c=OI(t,r);let u;for(;u=c();)Hp(n,e,i,u,a);Hp(n,e,i,o,a)}else 16&l?mB(e,n,r,t,i,a):Hp(n,e,i,o,a);t=s?t.projectionNext:t.next}}function fy(e,n,t,r,i,a){UI(t,r,e.firstChild,n,i,a,!1)}function mB(e,n,t,r,i,a){const s=t[Mr],l=s[ki].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Hp(n,e,i,l[c],a);else{let c=l;const u=s[Jn];Nx(r)&&(c.flags|=128),UI(e,n,c,u,i,a,!0)}}function gB(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function yB(e,n,t){const{mergedAttrs:r,classes:i,styles:a}=t;null!==r&&JS(e,n,r),null!==i&&gB(e,n,i),null!==a&&function ile(e,n,t){e.setAttribute(n,"style",t)}(e,n,a)}class Du{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${v5})`}}function Ra(e){return e instanceof Du?e.changingThisBreaksApplicationSecurity:e}const Cle=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ni=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(ni||{});function jp(e){const n=function yy(){const e=ge();return e&&e[wu].sanitizer}();return n?n.sanitize(ni.URL,e)||"":function uo(e,n){const t=function fle(e){return e instanceof Du&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${v5})`)}return t===n}(e,"URL")?Ra(e):function zx(e){return(e=String(e)).match(Cle)?e:"unsafe:"+e}(ot(e))}class ue{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=de({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const by=new ue("ENVIRONMENT_INITIALIZER"),AB=new ue("INJECTOR",-1),TB=new ue("INJECTOR_DEF_TYPES");class NB{get(n,t=Zg){if(t===Zg){const r=new Error(`NullInjectorError: No provider for ${$r(n)}!`);throw r.name="NullInjectorError",r}return t}}function Rle(...e){return{\u0275providers:OB(0,e),\u0275fromNgModule:!0}}function OB(e,...n){const t=[],r=new Set;let i;return ly(n,a=>{const s=a;YI(s,t,[],r)&&(i||=[],i.push(s))}),void 0!==i&&FB(i,t),t}function FB(e,n){for(let t=0;t<e.length;t++){const{providers:i}=e[t];ZI(i,a=>{n.push(a)})}}function YI(e,n,t,r){if(!(e=nt(e)))return!1;let i=null,a=w5(e);const s=!a&&Kt(e);if(a||s){if(s&&!s.standalone)return!1;i=e}else{const l=e.ngModule;if(a=w5(l),!a)return!1;i=l}const o=r.has(i);if(s){if(o)return!1;if(r.add(i),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)YI(c,n,t,r)}}else{if(!a)return!1;{if(null!=a.imports&&!o){let c;r.add(i);try{ly(a.imports,u=>{YI(u,n,t,r)&&(c||=[],c.push(u))})}finally{}void 0!==c&&FB(c,n)}if(!o){const c=ku(i)||(()=>new i);n.push({provide:i,useFactory:c,deps:Ht},{provide:TB,useValue:i,multi:!0},{provide:by,useValue:()=>Y(i),multi:!0})}const l=a.providers;null==l||o||ZI(l,u=>{n.push(u)})}}return i!==e&&void 0!==e.providers}function ZI(e,n){for(let t of e)GS(t)&&(t=t.\u0275providers),Array.isArray(t)?ZI(t,n):n(t)}const Ple=un({provide:String,useValue:un});function QI(e){return null!==e&&"object"==typeof e&&Ple in e}function Au(e){return"function"==typeof e}const JI=new ue("Set Injector scope."),Hx={},$le={};let eM;function Wx(){return void 0===eM&&(eM=new NB),eM}class ho{}class tM extends ho{get destroyed(){return this._destroyed}constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rM(n,s=>this.processProvider(s)),this.records.set(AB,Gp(void 0,this)),i.has("environment")&&this.records.set(ho,Gp(void 0,this));const a=this.records.get(JI);null!=a&&"string"==typeof a.value&&this.scopes.add(a.value),this.injectorDefTypes=new Set(this.get(TB.multi,Ht,Dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of n)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const t=Wl(this),r=oa(void 0);try{return n()}finally{Wl(t),oa(r)}}get(n,t=Zg,r=Dt.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(D5))return n[D5](this);r=ax(r);const i=Wl(this),a=oa(void 0);try{if(!(r&Dt.SkipSelf)){let o=this.records.get(n);if(void 0===o){const l=function Hle(e){return"function"==typeof e||"object"==typeof e&&e instanceof ue}(n)&&nx(n);o=l&&this.injectableDefInScope(l)?Gp(nM(n),Hx):null,this.records.set(n,o)}if(null!=o)return this.hydrate(n,o)}return(r&Dt.Self?Wx():this.parent).get(n,t=r&Dt.Optional&&t===Zg?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[ix]=s[ix]||[]).unshift($r(n)),i)throw s;return function Bae(e,n,t,r){const i=e[ix];throw n[I5]&&i.unshift(n[I5]),e.message=function Vae(e,n,t,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=$r(n);if(Array.isArray(n))i=n.map($r).join(" -> ");else if("object"==typeof n){let a=[];for(let s in n)if(n.hasOwnProperty(s)){let o=n[s];a.push(s+":"+("string"==typeof o?JSON.stringify(o):$r(o)))}i=`{${a.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${e.replace(Fae,"\n  ")}`}("\n"+e.message,i,t,r),e.ngTokenPath=i,e[ix]=null,e}(s,n,"R3InjectorError",this.source)}throw s}finally{oa(a),Wl(i)}}resolveInjectorInitializers(){const n=Wl(this),t=oa(void 0);try{const r=this.get(by.multi,Ht,Dt.Self);for(const i of r)i()}finally{Wl(n),oa(t)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push($r(r));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(n){let t=Au(n=nt(n))?n:nt(n&&n.provide);const r=function Vle(e){return QI(e)?Gp(void 0,e.useValue):Gp(LB(e),Hx)}(n);if(Au(n)||!0!==n.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Gp(void 0,Hx,!0),i.factory=()=>YS(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t){return t.value===Hx&&(t.value=$le,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Ule(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(n){if(!n.providedIn)return!1;const t=nt(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){const t=this._onDestroyHooks.indexOf(n);-1!==t&&this._onDestroyHooks.splice(t,1)}}function nM(e){const n=nx(e),t=null!==n?n.factory:ku(e);if(null!==t)return t;if(e instanceof ue)throw new oe(204,!1);if(e instanceof Function)return function Ble(e){const n=e.length;if(n>0)throw cy(n,"?"),new oe(204,!1);const t=function Tae(e){return e&&(e[rx]||e[C5])||null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new oe(204,!1)}function LB(e,n,t){let r;if(Au(e)){const i=nt(e);return ku(i)||nM(i)}if(QI(e))r=()=>nt(e.useValue);else if(function PB(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...YS(e.deps||[]));else if(function RB(e){return!(!e||!e.useExisting)}(e))r=()=>Y(nt(e.useExisting));else{const i=nt(e&&(e.useClass||e.provide));if(!function zle(e){return!!e.deps}(e))return ku(i)||nM(i);r=()=>new i(...YS(e.deps))}return r}function Gp(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function rM(e,n){for(const t of e)Array.isArray(t)?rM(t,n):t&&GS(t)?rM(t.\u0275providers,n):n(t)}const jx=new ue("AppId",{providedIn:"root",factory:()=>Wle}),Wle="ng",$B=new ue("Platform Initializer"),Ii=new ue("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ds=new ue("AnimationModuleType"),iM=new ue("CSP nonce",{providedIn:"root",factory:()=>function my(){if(void 0!==WI)return WI;if(typeof document<"u")return document;throw new oe(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let VB=(e,n)=>null;function zB(e,n){return VB(e,n)}class Jle{}class WB{}class tce{resolveComponentFactory(n){throw function ece(e){const n=Error(`No component factory found for ${$r(e)}.`);return n.ngComponent=e,n}(n)}}let Kp=(()=>{class e{static#e=this.NULL=new tce}return e})();function nce(){return Xp(pi(),ge())}function Xp(e,n){return new Le(ua(e,n))}let Le=(()=>{class e{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=nce}return e})();function rce(e){return e instanceof Le?e.nativeElement:e}class xy{}let Pa=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=()=>function ice(){const e=ge(),t=da(pi().index,e);return(Oa(t)?t:e)[ht]}()}return e})(),ace=(()=>{class e{static#e=this.\u0275prov=de({token:e,providedIn:"root",factory:()=>null})}return e})();class Yl{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const sce=new Yl("16.0.3"),mM={};function wy(e){for(;e;){e[vt]|=64;const n=hy(e);if(nI(e)&&!n)return e;e=n}return null}function gM(e){return e.ngOriginalError}class tl{constructor(){this._console=console}handleError(n){const t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&gM(n);for(;t&&gM(t);)t=gM(t);return t||null}}const KB=new ue("",{providedIn:"root",factory:()=>!1});function nl(e){return e instanceof Function?e():e}class JB extends K5{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(n){this._lView=n}onConsumerDependencyMayHaveChanged(){wy(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(n,t,r){const i=Qr(this);this.trackingVersion++;try{n(t,r)}finally{Qr(i)}}destroy(){this.trackingVersion++}}let Zx=null;function eV(){return Zx??=new JB,Zx}function tV(e,n){return e[n]??eV()}function nV(e,n){const t=eV();t.hasReadASignal&&(e[n]=Zx,t.lView=e,Zx=new JB)}const pt={};function ne(e){rV(Bt(),ge(),Ui()+e,!1)}function rV(e,n,t,r){if(!r)if(3==(3&n[vt])){const a=e.preOrderCheckHooks;null!==a&&vx(n,a,t)}else{const a=e.preOrderHooks;null!==a&&xx(n,a,0,t)}Su(t)}function oV(e,n=null,t=null,r){const i=lV(e,n,t,r);return i.resolveInjectorInitializers(),i}function lV(e,n=null,t=null,r,i=new Set){const a=[t||Ht,Rle(e)];return r=r||("object"==typeof e?void 0:$r(e)),new tM(a,n||Wx(),r||null,i)}let dr=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=Zg;static#t=this.NULL=new NB;static create(t,r){if(Array.isArray(t))return oV({name:""},r,t,"");{const i=t.name??"";return oV({name:i},t.parent,t.providers,i)}}static#n=this.\u0275prov=de({token:e,providedIn:"any",factory:()=>Y(AB)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function E(e,n=Dt.Default){const t=ge();return null===t?Y(e,n):A4(pi(),t,nt(e),n)}function Zp(){throw new Error("invalid")}function Qx(e,n,t,r,i,a,s,o,l,c,u){const h=n.blueprint.slice();return h[Br]=i,h[vt]=140|r,(null!==c||e&&2048&e[vt])&&(h[vt]|=2048),r4(h),h[Jn]=h[Ip]=e,h[ir]=t,h[wu]=s||e&&e[wu],h[ht]=o||e&&e[ht],h[Sp]=l||e&&e[Sp]||null,h[ki]=a,h[ry]=function Ooe(){return Noe++}(),h[Zo]=u,h[U5]=c,h[Mr]=2==n.type?e[Mr]:h,h}function Qp(e,n,t,r,i){let a=e.data[n];if(null===a)a=function yM(e,n,t,r,i){const a=u4(),s=lI(),l=e.data[n]=function Mce(e,n,t,r,i,a){let s=n?n.injectorIndex:-1,o=0;return Ap()&&(o|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:o,providerIndexes:0,value:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?a:a&&a.parent,t,n,r,i);return null===e.firstChild&&(e.firstChild=l),null!==a&&(s?null==a.child&&null!==l.parent&&(a.child=l):null===a.next&&(a.next=l,l.prev=a)),l}(e,n,t,r,i),function Rse(){return et.lFrame.inI18n}()&&(a.flags|=32);else if(64&a.type){a.type=t,a.value=r,a.attrs=i;const s=function ay(){const e=et.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();a.injectorIndex=null===s?-1:s.injectorIndex}return lo(a,!0),a}function Cy(e,n,t,r){if(0===t)return-1;const i=n.length;for(let a=0;a<t;a++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function cV(e,n,t,r,i){const a=tV(n,cx),s=Ui(),o=2&r;try{if(Su(-1),o&&n.length>Rt&&rV(e,n,Rt,!1),oo(o?2:0,i),o)a.runInContext(t,r,i);else{const c=Qr(null);try{t(r,i)}finally{Qr(c)}}}finally{o&&null===n[cx]&&nV(n,cx),Su(s),oo(o?3:1,i)}}function bM(e,n,t){if(tI(n)){const r=Qr(null);try{const a=n.directiveEnd;for(let s=n.directiveStart;s<a;s++){const o=e.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}finally{Qr(r)}}}function _M(e,n,t){c4()&&(function Fce(e,n,t,r){const i=t.directiveStart,a=t.directiveEnd;Cu(t)&&function zce(e,n,t){const r=ua(n,e),s=Jx(e,Qx(e,uV(t),null,t.onPush?64:16,r,n,null,e[wu].rendererFactory.createRenderer(r,t),null,null,null));e[n.index]=s}(n,t,e.data[i+t.componentOffset]),e.firstCreatePass||Sx(t,n),Si(r,n);const s=t.initialInputs;for(let o=i;o<a;o++){const l=e.data[o],c=Iu(n,e,o,t);Si(c,n),null!==s&&Uce(0,o-i,c,l,0,s),Ps(l)&&(da(t.index,n)[ir]=Iu(n,e,o,t))}}(e,n,t,ua(t,n)),64==(64&t.flags)&&mV(e,n,t))}function vM(e,n,t=ua){const r=n.localNames;if(null!==r){let i=n.index+1;for(let a=0;a<r.length;a+=2){const s=r[a+1],o=-1===s?t(n,e):e[s];e[i++]=o}}}function uV(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=xM(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function xM(e,n,t,r,i,a,s,o,l,c,u){const h=Rt+r,d=h+i,p=function xce(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:pt);return t}(h,d),f="function"==typeof c?c():c;return p[De]={type:e,blueprint:p,template:t,queries:null,viewQuery:o,declTNode:n,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1,ssrId:u}}let dV=e=>null;function hV(e,n,t,r){for(let i in e)if(e.hasOwnProperty(i)){t=null===t?{}:t;const a=e[i];null===r?pV(t,n,i,a):r.hasOwnProperty(i)&&pV(t,n,r[i],a)}return t}function pV(e,n,t,r){e.hasOwnProperty(t)?e[t].push(n,r):e[t]=[n,r]}function La(e,n,t,r,i,a,s,o){const l=ua(n,t);let u,c=n.inputs;!o&&null!=c&&(u=c[r])?(IM(e,t,u,r,i),Cu(n)&&function Ace(e,n){const t=da(n,e);16&t[vt]||(t[vt]|=64)}(t,n.index)):3&n.type&&(r=function Dce(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,n.value||"",r):i,a.setProperty(l,r,i))}function wM(e,n,t,r){if(c4()){const i=null===r?null:{"":-1},a=function Pce(e,n){const t=e.directiveRegistry;let r=null,i=null;if(t)for(let a=0;a<t.length;a++){const s=t[a];if(P5(n,s.selectors,!1))if(r||(r=[]),Ps(s))if(null!==s.findHostDirectiveDefs){const o=[];i=i||new Map,s.findHostDirectiveDefs(s,o,i),r.unshift(...o,s),CM(e,n,o.length)}else r.unshift(s),CM(e,n,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(e,t);let s,o;null===a?s=o=null:[s,o]=a,null!==s&&fV(e,n,t,s,i,o),i&&function Lce(e,n,t){if(n){const r=e.localNames=[];for(let i=0;i<n.length;i+=2){const a=t[n[i+1]];if(null==a)throw new oe(-301,!1);r.push(n[i],a)}}}(t,r,i)}t.mergedAttrs=ey(t.mergedAttrs,t.attrs)}function fV(e,n,t,r,i,a){for(let c=0;c<r.length;c++)vI(Sx(t,n),e,r[c].type);!function Bce(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,o=!1,l=Cy(e,n,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];t.mergedAttrs=ey(t.mergedAttrs,u.hostAttrs),Vce(e,t,n,l,u),$ce(l,u,i),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const h=u.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),s=!0),!o&&(h.ngOnChanges||h.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),o=!0),l++}!function Ece(e,n,t){const i=n.directiveEnd,a=e.data,s=n.attrs,o=[];let l=null,c=null;for(let u=n.directiveStart;u<i;u++){const h=a[u],d=t?t.get(h):null,f=d?d.outputs:null;l=hV(h.inputs,u,l,d?d.inputs:null),c=hV(h.outputs,u,c,f);const m=null===l||null===s||R5(n)?null:Hce(l,u,s);o.push(m)}null!==l&&(l.hasOwnProperty("class")&&(n.flags|=8),l.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=o,n.inputs=l,n.outputs=c}(e,t,a)}function mV(e,n,t){const r=t.directiveStart,i=t.directiveEnd,a=t.index,s=function Lse(){return et.lFrame.currentDirectiveIndex}();try{Su(a);for(let o=r;o<i;o++){const l=e.data[o],c=n[o];uI(o),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Rce(l,c)}}finally{Su(-1),uI(s)}}function Rce(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function CM(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function $ce(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;Ps(n)&&(t[""]=e)}}function Vce(e,n,t,r,i){e.data[r]=i;const a=i.factory||(i.factory=ku(i.type)),s=new sy(a,Ps(i),E);e.blueprint[r]=s,t[r]=s,function Nce(e,n,t,r,i){const a=i.hostBindings;if(a){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const o=~n.index;(function Oce(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(s)!=o&&s.push(o),s.push(t,r,a)}}(e,n,r,Cy(e,t,i.hostVars,pt),i)}function po(e,n,t,r,i,a){const s=ua(e,n);!function kM(e,n,t,r,i,a,s){if(null==a)e.removeAttribute(n,i,t);else{const o=null==s?ot(a):s(a,r||"",i);e.setAttribute(n,i,o,t)}}(n[ht],s,a,e.value,t,r,i)}function Uce(e,n,t,r,i,a){const s=a[n];if(null!==s)for(let o=0;o<s.length;)gV(r,t,s[o++],s[o++],s[o++])}function gV(e,n,t,r,i){const a=Qr(null);try{null!==e.setInput?e.setInput(n,i,t,r):n[r]=i}finally{Qr(a)}}function Hce(e,n,t){let r=null,i=0;for(;i<t.length;){const a=t[i];if(0!==a)if(5!==a){if("number"==typeof a)break;if(e.hasOwnProperty(a)){null===r&&(r=[]);const s=e[a];for(let o=0;o<s.length;o+=2)if(s[o]===n){r.push(a,s[o+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function yV(e,n,t,r){return[e,!0,!1,n,null,0,r,t,null,null,null]}function bV(e,n){const t=e.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const a=t[r+1];if(-1!==a){const s=e.data[a];hI(t[r]),s.contentQueries(2,n[a],a)}}}function Jx(e,n){return e[ty]?e[z5][Rs]=n:e[ty]=n,e[z5]=n,n}function SM(e,n,t){hI(0);const r=Qr(null);try{n(e,t)}finally{Qr(r)}}function _V(e){return e[kp]||(e[kp]=[])}function vV(e){return e.cleanup||(e.cleanup=[])}function xV(e,n,t){return(null===e||Ps(e))&&(t=function vse(e){for(;Array.isArray(e);){if("object"==typeof e[eI])return e;e=e[Br]}return null}(t[n.index])),t[ht]}function wV(e,n){const t=e[Sp],r=t?t.get(tl,null):null;r&&r.handleError(n)}function IM(e,n,t,r,i){for(let a=0;a<t.length;){const s=t[a++],o=t[a++];gV(e.data[s],n[s],r,o,i)}}function rl(e,n,t){const r=gx(n,e);!function rB(e,n,t){e.setValue(n,t)}(e[ht],r,t)}function Wce(e,n){const t=da(n,e),r=t[De];!function jce(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}(r,t);const i=t[Br];null!==i&&null===t[Zo]&&(t[Zo]=zB(i,t[Sp])),MM(r,t,t[ir])}function MM(e,n,t){pI(n);try{const r=e.viewQuery;null!==r&&SM(1,r,t);const i=e.template;null!==i&&cV(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&bV(e,n),e.staticViewQueries&&SM(2,e.viewQuery,t);const a=e.components;null!==a&&function Gce(e,n){for(let t=0;t<n.length;t++)Wce(e,n[t])}(n,a)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[vt]&=-5,fI()}}let CV=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const a=typeof Zone>"u"?null:Zone.current,s=new fse(t,c=>{this.all.has(c)&&this.queue.set(c,a)},i);let o;this.all.add(s),s.notify();const l=()=>{s.cleanup(),o?.(),this.all.delete(s),this.queue.delete(s)};return o=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=de({token:e,providedIn:"root",factory:()=>new e})}return e})();function e0(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,a=0;if(null!==n)for(let s=0;s<n.length;s++){const o=n[s];"number"==typeof o?a=o:1==a?i=WS(i,o):2==a&&(r=WS(r,o+": "+n[++s]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}function ky(e,n,t,r,i=!1){for(;null!==t;){const a=n[t.index];if(null!==a&&r.push($n(a)),ca(a)){for(let o=hi;o<a.length;o++){const l=a[o],c=l[De].firstChild;null!==c&&ky(l[De],l,c,r)}a[ao]!==a[Br]&&r.push(a[ao])}const s=t.type;if(8&s)ky(e,n,t.child,r);else if(32&s){const o=OI(t,n);let l;for(;l=o();)r.push(l)}else if(16&s){const o=pB(n,t);if(Array.isArray(o))r.push(...o);else{const l=hy(n[Mr]);ky(l[De],l,o,r,!0)}}t=i?t.projectionNext:t.next}return r}function t0(e,n,t,r=!0){const i=n[wu].rendererFactory;i.begin&&i.begin();try{n0(e,n,e.template,t)}catch(s){throw r&&wV(n,s),s}finally{i.end&&i.end(),n[wu].effectManager?.flush()}}function n0(e,n,t,r){const i=n[vt];if(256!=(256&i)){n[wu].effectManager?.flush(),pI(n);try{r4(n),function h4(e){return et.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&cV(e,n,t,2,r);const s=3==(3&i);if(s){const c=e.preOrderCheckHooks;null!==c&&vx(n,c,null)}else{const c=e.preOrderHooks;null!==c&&xx(n,c,0,null),mI(n,0)}if(function Qce(e){for(let n=FI(e);null!==n;n=RI(n)){if(!n[H5])continue;const t=n[Ep];for(let r=0;r<t.length;r++){kse(t[r])}}}(n),function Zce(e){for(let n=FI(e);null!==n;n=RI(n))for(let t=hi;t<n.length;t++){const r=n[t],i=r[De];yx(r)&&n0(i,r,i.template,r[ir])}}(n),null!==e.contentQueries&&bV(e,n),s){const c=e.contentCheckHooks;null!==c&&vx(n,c)}else{const c=e.contentHooks;null!==c&&xx(n,c,1),mI(n,1)}!function vce(e,n){const t=e.hostBindingOpCodes;if(null===t)return;const r=tV(n,ux);try{for(let i=0;i<t.length;i++){const a=t[i];if(a<0)Su(~a);else{const s=a,o=t[++i],l=t[++i];Pse(o,s),r.runInContext(l,2,n[s])}}}finally{null===n[ux]&&nV(n,ux),Su(-1)}}(e,n);const o=e.components;null!==o&&function eue(e,n){for(let t=0;t<n.length;t++)Jce(e,n[t])}(n,o);const l=e.viewQuery;if(null!==l&&SM(2,l,r),s){const c=e.viewCheckHooks;null!==c&&vx(n,c)}else{const c=e.viewHooks;null!==c&&xx(n,c,2),mI(n,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[vt]&=-73,a4(n)}finally{fI()}}}function Jce(e,n){const t=da(n,e);if(yx(t)){const r=t[De];80&t[vt]?n0(r,t,r.template,t[ir]):t[xu]>0&&EM(t)}}function EM(e){for(let r=FI(e);null!==r;r=RI(r))for(let i=hi;i<r.length;i++){const a=r[i];if(yx(a))if(1024&a[vt]){const s=a[De];n0(s,a,s.template,a[ir])}else a[xu]>0&&EM(a)}const t=e[De].components;if(null!==t)for(let r=0;r<t.length;r++){const i=da(t[r],e);yx(i)&&i[xu]>0&&EM(i)}}class Sy{get rootNodes(){const n=this._lView,t=n[De];return ky(t,n,t.firstChild,[])}constructor(n,t){this._lView=n,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ir]}set context(n){this._lView[ir]=n}get destroyed(){return 256==(256&this._lView[vt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Jn];if(ca(n)){const t=n[8],r=t?t.indexOf(this):-1;r>-1&&(LI(n,r),Mx(t,r))}this._attachedToViewContainer=!1}aB(this._lView[De],this._lView)}onDestroy(n){!function o4(e,n){if(256==(256&e[vt]))throw new oe(911,!1);null===e[jl]&&(e[jl]=[]),e[jl].push(n)}(this._lView,n)}markForCheck(){wy(this._cdRefInjectingView||this._lView)}detach(){this._lView[vt]&=-129}reattach(){this._lView[vt]|=128}detectChanges(){t0(this._lView[De],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function qoe(e,n){fy(e,n,n[ht],2,null,null)}(this._lView[De],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=n}}class tue extends Sy{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;t0(n[De],n,n[ir],!1)}checkNoChanges(){}get context(){return null}}class kV extends Kp{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=Kt(n);return new Iy(t,this.ngModule)}}function SV(e){const n=[];for(let t in e)e.hasOwnProperty(t)&&n.push({propName:e[t],templateName:t});return n}class rue{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){r=ax(r);const i=this.injector.get(n,mM,r);return i!==mM||t===mM?i:this.parentInjector.get(n,t,r)}}class Iy extends WB{get inputs(){return SV(this.componentDef.inputs)}get outputs(){return SV(this.componentDef.outputs)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function Yae(e){return e.map(Xae).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,r,i){let a=(i=i||this.ngModule)instanceof ho?i:i?.injector;a&&null!==this.componentDef.getStandaloneInjector&&(a=this.componentDef.getStandaloneInjector(a)||a);const s=a?new rue(n,a):n,o=s.get(xy,null);if(null===o)throw new oe(407,!1);const u={rendererFactory:o,sanitizer:s.get(ace,null),effectManager:s.get(CV,null)},h=o.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",p=r?function wce(e,n,t,r){const a=r.get(KB,!1)||t===cs.ShadowDom,s=e.selectRootElement(n,a);return function Cce(e){dV(e)}(s),s}(h,r,this.componentDef.encapsulation,s):Rx(h,d,function nue(e){const n=e.toLowerCase();return"svg"===n?e4:"math"===n?"math":null}(d)),f=this.componentDef.onPush?576:528,m=xM(0,null,null,1,0,null,null,null,null,null,null),g=Qx(null,m,null,f,null,null,u,h,s,null,null);let y,b;pI(g);try{const _=this.componentDef;let v,x=null;_.findHostDirectiveDefs?(v=[],x=new Map,_.findHostDirectiveDefs(_,v,x),v.push(_)):v=[_];const S=function aue(e,n){const t=e[De],r=Rt;return e[r]=n,Qp(t,r,2,"#host",null)}(g,p),M=function sue(e,n,t,r,i,a,s){const o=i[De];!function oue(e,n,t,r){for(const i of e)n.mergedAttrs=ey(n.mergedAttrs,i.hostAttrs);null!==n.mergedAttrs&&(e0(n,n.mergedAttrs,!0),null!==t&&yB(r,t,n))}(r,e,n,s);let l=null;null!==n&&(l=zB(n,i[Sp]));const c=a.rendererFactory.createRenderer(n,t),u=Qx(i,uV(t),null,t.onPush?64:16,i[e.index],e,a,c,null,null,l);return o.firstCreatePass&&CM(o,e,r.length-1),Jx(i,u),i[e.index]=u}(S,p,_,v,g,u,h);b=n4(m,Rt),p&&function cue(e,n,t,r){if(r)JS(e,t,["ng-version",sce.full]);else{const{attrs:i,classes:a}=function Zae(e){const n=[],t=[];let r=1,i=2;for(;r<e.length;){let a=e[r];if("string"==typeof a)2===i?""!==a&&n.push(a,e[++r]):8===i&&t.push(a);else{if(!Fs(i))break;i=a}r++}return{attrs:n,classes:t}}(n.selectors[0]);i&&JS(e,t,i),a&&a.length>0&&gB(e,t,a.join(" "))}}(h,_,p,r),void 0!==t&&function uue(e,n,t){const r=e.projection=[];for(let i=0;i<n.length;i++){const a=t[i];r.push(null!=a?Array.from(a):null)}}(b,this.ngContentSelectors,t),y=function lue(e,n,t,r,i,a){const s=pi(),o=i[De],l=ua(s,i);fV(o,i,s,t,null,r);for(let u=0;u<t.length;u++)Si(Iu(i,o,s.directiveStart+u,s),i);mV(o,i,s),l&&Si(l,i);const c=Iu(i,o,s.directiveStart+s.componentOffset,s);if(e[ir]=i[ir]=c,null!==a)for(const u of a)u(c,n);return bM(o,s,e),c}(M,_,v,x,g,[due]),MM(m,g,null)}finally{fI()}return new iue(this.componentType,y,Xp(b,g),g,b)}}class iue extends Jle{constructor(n,t,r,i,a){super(),this.location=r,this._rootLView=i,this._tNode=a,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new tue(i),this.componentType=n}setInput(n,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;const a=this._rootLView;IM(a[De],a,i,n,t),this.previousInputValues.set(n,t),wy(da(this._tNode.index,a))}}get injector(){return new Op(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function due(){const e=pi();_x(ge()[De],e)}function Ce(e){let n=function IV(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const r=[e];for(;n;){let i;if(Ps(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new oe(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);const s=e;s.inputs=DM(e.inputs),s.declaredInputs=DM(e.declaredInputs),s.outputs=DM(e.outputs);const o=i.hostBindings;o&&mue(e,o);const l=i.viewQuery,c=i.contentQueries;if(l&&pue(e,l),c&&fue(e,c),HS(e.inputs,i.inputs),HS(e.declaredInputs,i.declaredInputs),HS(e.outputs,i.outputs),Ps(i)&&i.data.animation){const u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const a=i.features;if(a)for(let s=0;s<a.length;s++){const o=a[s];o&&o.ngInherit&&o(e),o===Ce&&(t=!1)}}n=Object.getPrototypeOf(n)}!function hue(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=ey(i.hostAttrs,t=ey(t,i.hostAttrs))}}(r)}function DM(e){return e===Xo?{}:e===Ht?[]:e}function pue(e,n){const t=e.viewQuery;e.viewQuery=t?(r,i)=>{n(r,i),t(r,i)}:n}function fue(e,n){const t=e.contentQueries;e.contentQueries=t?(r,i,a)=>{n(r,i,a),t(r,i,a)}:n}function mue(e,n){const t=e.hostBindings;e.hostBindings=t?(r,i)=>{n(r,i),t(r,i)}:n}function r0(e){return!!AM(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function AM(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function fo(e,n,t){return e[n]=t}function Mi(e,n,t){return!Object.is(e[n],t)&&(e[n]=t,!0)}function Tu(e,n,t,r){const i=Mi(e,n,t);return Mi(e,n+1,r)||i}function dn(e,n,t,r){const i=ge();return Mi(i,Tp(),n)&&(Bt(),po(er(),i,e,n,t,r)),dn}function ef(e,n,t,r){return Mi(e,Tp(),t)?n+ot(t)+r:pt}function tf(e,n,t,r,i,a){const o=Tu(e,function Qo(){return et.lFrame.bindingIndex}(),t,i);return Jo(2),o?n+ot(t)+r+ot(i)+a:pt}function Ae(e,n,t,r,i,a,s,o){const l=ge(),c=Bt(),u=e+Rt,h=c.firstCreatePass?function Vue(e,n,t,r,i,a,s,o,l){const c=n.consts,u=Qp(n,e,4,s||null,Gl(c,o));wM(n,t,u,Gl(c,l)),_x(n,u);const h=u.tView=xM(2,u,r,i,a,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c,null);return null!==n.queries&&(n.queries.template(n,u),h.queries=n.queries.embeddedTView(u)),u}(u,c,l,n,t,r,i,a,s):c.data[u];lo(h,!1);const d=UV(c,l,h,e);bx()&&Lx(c,l,d,h),Si(d,l),Jx(l,l[u]=yV(d,l,d,h)),hx(h)&&_M(c,l,h),null!=s&&vM(l,h,o)}let UV=function HV(e,n,t,r){return ql(!0),n[ht].createComment("")};function Zl(e){return Dp(function Fse(){return et.lFrame.contextLView}(),Rt+e)}function me(e,n,t){const r=ge();return Mi(r,Tp(),n)&&La(Bt(),er(),r,e,n,r[ht],t,!1),me}function PM(e,n,t,r,i){const s=i?"class":"style";IM(e,t,n.inputs[s],s,r)}function B(e,n,t,r){const i=ge(),a=Bt(),s=Rt+e,o=i[ht],l=a.firstCreatePass?function Wue(e,n,t,r,i,a){const s=n.consts,l=Qp(n,e,2,r,Gl(s,i));return wM(n,t,l,Gl(s,a)),null!==l.attrs&&e0(l,l.attrs,!1),null!==l.mergedAttrs&&e0(l,l.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,l),l}(s,a,i,n,t,r):a.data[s],c=WV(a,i,l,o,n,e);i[s]=c;const u=hx(l);return lo(l,!0),yB(o,c,l),32!=(32&l.flags)&&bx()&&Lx(a,i,c,l),0===function Ise(){return et.lFrame.elementDepthCount}()&&Si(c,i),function Mse(){et.lFrame.elementDepthCount++}(),u&&(_M(a,i,l),bM(a,l,i)),null!==r&&vM(i,l),B}function K(){let e=pi();lI()?cI():(e=e.parent,lo(e,!1));const n=e;(function Dse(e){return et.skipHydrationRootTNode===e})(n)&&function Ose(){et.skipHydrationRootTNode=null}(),function Ese(){et.lFrame.elementDepthCount--}();const t=Bt();return t.firstCreatePass&&(_x(t,e),tI(e)&&t.queries.elementEnd(e)),null!=n.classesWithoutHost&&function Gse(e){return 0!=(8&e.flags)}(n)&&PM(t,n,ge(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function qse(e){return 0!=(16&e.flags)}(n)&&PM(t,n,ge(),n.stylesWithoutHost,!1),K}function we(e,n,t,r){return B(e,n,t,r),K(),we}let WV=(e,n,t,r,i,a)=>(ql(!0),Rx(r,i,function v4(){return et.lFrame.currentNamespace}()));function Ql(e,n,t){const r=ge(),i=Bt(),a=e+Rt,s=i.firstCreatePass?function que(e,n,t,r,i){const a=n.consts,s=Gl(a,r),o=Qp(n,e,8,"ng-container",s);return null!==s&&e0(o,s,!0),wM(n,t,o,Gl(a,i)),null!==n.queries&&n.queries.elementStart(n,o),o}(a,i,r,n,t):i.data[a];lo(s,!0);const o=jV(i,r,s,e);return r[a]=o,bx()&&Lx(i,r,o,s),Si(o,r),hx(s)&&(_M(i,r,s),bM(i,s,r)),null!=t&&vM(r,s),Ql}function Jl(){let e=pi();const n=Bt();return lI()?cI():(e=e.parent,lo(e,!1)),n.firstCreatePass&&(_x(n,e),tI(e)&&n.queries.elementEnd(e)),Jl}function c0(e,n,t){return Ql(e,n,t),Jl(),c0}let jV=(e,n,t,r)=>(ql(!0),PI(n[ht],""));function ps(){return ge()}function Ty(e){return!!e&&"function"==typeof e.then}function GV(e){return!!e&&"function"==typeof e.subscribe}function xt(e,n,t,r){const i=ge(),a=Bt(),s=pi();return qV(a,i,i[ht],s,e,n,r),xt}function LM(e,n){const t=pi(),r=ge(),i=Bt();return qV(i,r,xV(dI(i.data),t,r),t,e,n),LM}function qV(e,n,t,r,i,a,s){const o=hx(r),c=e.firstCreatePass&&vV(e),u=n[ir],h=_V(n);let d=!0;if(3&r.type||s){const m=ua(r,n),g=s?s(m):m,y=h.length,b=s?v=>s($n(v[r.index])):r.index;let _=null;if(!s&&o&&(_=function Yue(e,n,t,r){const i=e.cleanup;if(null!=i)for(let a=0;a<i.length-1;a+=2){const s=i[a];if(s===t&&i[a+1]===r){const o=n[kp],l=i[a+2];return o.length>l?o[l]:null}"string"==typeof s&&(a+=2)}return null}(e,n,i,r.index)),null!==_)(_.__ngLastListenerFn__||_).__ngNextListenerFn__=a,_.__ngLastListenerFn__=a,d=!1;else{a=XV(r,n,u,a,!1);const v=t.listen(g,i,a);h.push(a,v),c&&c.push(i,b,y,y+1)}}else a=XV(r,n,u,a,!1);const p=r.outputs;let f;if(d&&null!==p&&(f=p[i])){const m=f.length;if(m)for(let g=0;g<m;g+=2){const x=n[f[g]][f[g+1]].subscribe(a),S=h.length;h.push(a,x),c&&c.push(i,r.index,S,-(S+1))}}}function KV(e,n,t,r){try{return oo(6,n,t),!1!==t(r)}catch(i){return wV(e,i),!1}finally{oo(7,n,t)}}function XV(e,n,t,r,i){return function a(s){if(s===Function)return r;wy(e.componentOffset>-1?da(e.index,n):n);let l=KV(n,t,r,s),c=a.__ngNextListenerFn__;for(;c;)l=KV(n,t,c,s)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&s.preventDefault(),l}}function ze(e=1){return function Bse(e){return(et.lFrame.contextLView=function Vse(e,n){for(;e>0;)n=n[Ip],e--;return n}(e,et.lFrame.contextLView))[ir]}(e)}function Zue(e,n){let t=null;const r=function jae(e){const n=e.attrs;if(null!=n){const t=n.indexOf(5);if(!(1&t))return n[t+1]}return null}(e);for(let i=0;i<n.length;i++){const a=n[i];if("*"!==a){if(null===r?P5(e,a,!0):Kae(r,a))return i}else t=i}return t}function Hi(e){const n=ge()[Mr][ki];if(!n.projection){const r=n.projection=cy(e?e.length:1,null),i=r.slice();let a=n.child;for(;null!==a;){const s=e?Zue(a,e):0;null!==s&&(i[s]?i[s].projectionNext=a:r[s]=a,i[s]=a),a=a.next}}}function Wt(e,n=0,t){const r=ge(),i=Bt(),a=Qp(i,Rt+e,16,null,t||null);null===a.projection&&(a.projection=n),cI(),(!r[Zo]||Ap())&&32!=(32&a.flags)&&function tle(e,n,t){mB(n[ht],0,n,t,BI(e,t,n),cB(t.parent||n[ki],t,n))}(i,r,a)}function u0(e,n){return e<<17|n<<2}function ec(e){return e>>17&32767}function BM(e){return 2|e}function Nu(e){return(131068&e)>>2}function VM(e,n){return-131069&e|n<<2}function zM(e){return 1|e}function az(e,n,t,r,i){const a=e[t+1],s=null===n;let o=r?ec(a):Nu(a),l=!1;for(;0!==o&&(!1===l||s);){const u=e[o+1];rde(e[o],n)&&(l=!0,e[o+1]=r?zM(u):BM(u)),o=r?ec(u):Nu(u)}l&&(e[t+1]=r?BM(a):zM(a))}function rde(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&Bp(e,n)>=0}const zr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function sz(e){return e.substring(zr.key,zr.keyEnd)}function oz(e,n){const t=zr.textEnd;return t===n?-1:(n=zr.keyEnd=function ode(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}(e,zr.key=n,t),uf(e,n,t))}function uf(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function tc(e,n,t){return Ls(e,n,t,!1),tc}function Xt(e,n){return Ls(e,n,null,!0),Xt}function go(e,n){for(let t=function ade(e){return function cz(e){zr.key=0,zr.keyEnd=0,zr.value=0,zr.valueEnd=0,zr.textEnd=e.length}(e),oz(e,uf(e,0,zr.textEnd))}(n);t>=0;t=oz(n,t))Fa(e,sz(n),!0)}function Ls(e,n,t,r){const i=ge(),a=Bt(),s=Jo(2);a.firstUpdatePass&&fz(a,e,s,r),n!==pt&&Mi(i,s,n)&&gz(a,a.data[Ui()],i,i[ht],e,i[s+1]=function bde(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=$r(Ra(e)))),e}(n,t),r,s)}function $s(e,n,t,r){const i=Bt(),a=Jo(2);i.firstUpdatePass&&fz(i,null,a,r);const s=ge();if(t!==pt&&Mi(s,a,t)){const o=i.data[Ui()];if(bz(o,r)&&!pz(i,a)){let l=r?o.classesWithoutHost:o.stylesWithoutHost;null!==l&&(t=WS(l,t||"")),PM(i,o,s,t,r)}else!function yde(e,n,t,r,i,a,s,o){i===pt&&(i=Ht);let l=0,c=0,u=0<i.length?i[0]:null,h=0<a.length?a[0]:null;for(;null!==u||null!==h;){const d=l<i.length?i[l+1]:void 0,p=c<a.length?a[c+1]:void 0;let m,f=null;u===h?(l+=2,c+=2,d!==p&&(f=h,m=p)):null===h||null!==u&&u<h?(l+=2,f=u):(c+=2,f=h,m=p),null!==f&&gz(e,n,t,r,f,m,s,o),u=l<i.length?i[l]:null,h=c<a.length?a[c]:null}}(i,o,s,s[ht],s[a+1],s[a+1]=function mde(e,n,t){if(null==t||""===t)return Ht;const r=[],i=Ra(t);if(Array.isArray(i))for(let a=0;a<i.length;a++)e(r,i[a],!0);else if("object"==typeof i)for(const a in i)i.hasOwnProperty(a)&&e(r,a,i[a]);else"string"==typeof i&&n(r,i);return r}(e,n,t),r,a)}}function pz(e,n){return n>=e.expandoStartIndex}function fz(e,n,t,r){const i=e.data;if(null===i[t+1]){const a=i[Ui()],s=pz(e,t);bz(a,r)&&null===n&&!s&&(n=!1),n=function dde(e,n,t,r){const i=dI(e);let a=r?n.residualClasses:n.residualStyles;if(null===i)0===(r?n.classBindings:n.styleBindings)&&(t=Ny(t=UM(null,e,n,t,r),n.attrs,r),a=null);else{const s=n.directiveStylingLast;if(-1===s||e[s]!==i)if(t=UM(i,e,n,t,r),null===a){let l=function hde(e,n,t){const r=t?n.classBindings:n.styleBindings;if(0!==Nu(r))return e[ec(r)]}(e,n,r);void 0!==l&&Array.isArray(l)&&(l=UM(null,e,n,l[1],r),l=Ny(l,n.attrs,r),function pde(e,n,t,r){e[ec(t?n.classBindings:n.styleBindings)]=r}(e,n,r,l))}else a=function fde(e,n,t){let r;const i=n.directiveEnd;for(let a=1+n.directiveStylingLast;a<i;a++)r=Ny(r,e[a].hostAttrs,t);return Ny(r,n.attrs,t)}(e,n,r)}return void 0!==a&&(r?n.residualClasses=a:n.residualStyles=a),t}(i,a,n,r),function tde(e,n,t,r,i,a){let s=a?n.classBindings:n.styleBindings,o=ec(s),l=Nu(s);e[r]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||Bp(t,u)>0)&&(c=!0)):u=t,i)if(0!==l){const d=ec(e[o+1]);e[r+1]=u0(d,o),0!==d&&(e[d+1]=VM(e[d+1],r)),e[o+1]=function Jue(e,n){return 131071&e|n<<17}(e[o+1],r)}else e[r+1]=u0(o,0),0!==o&&(e[o+1]=VM(e[o+1],r)),o=r;else e[r+1]=u0(l,0),0===o?o=r:e[l+1]=VM(e[l+1],r),l=r;c&&(e[r+1]=BM(e[r+1])),az(e,u,r,!0),az(e,u,r,!1),function nde(e,n,t,r,i){const a=i?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof n&&Bp(a,n)>=0&&(t[r+1]=zM(t[r+1]))}(n,u,e,r,a),s=u0(o,l),a?n.classBindings=s:n.styleBindings=s}(i,a,n,t,s,r)}}function UM(e,n,t,r,i){let a=null;const s=t.directiveEnd;let o=t.directiveStylingLast;for(-1===o?o=t.directiveStart:o++;o<s&&(a=n[o],r=Ny(r,a.hostAttrs,i),a!==e);)o++;return null!==e&&(t.directiveStylingLast=o),r}function Ny(e,n,t){const r=t?1:2;let i=-1;if(null!==n)for(let a=0;a<n.length;a++){const s=n[a];"number"==typeof s?i=s:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Fa(e,s,!!t||n[++a]))}return void 0===e?null:e}function gde(e,n,t){const r=String(n);""!==r&&!r.includes(" ")&&Fa(e,r,t)}function gz(e,n,t,r,i,a,s,o){if(!(3&n.type))return;const l=e.data,c=l[o+1],u=function ede(e){return 1==(1&e)}(c)?yz(l,n,t,i,Nu(c),s):void 0;d0(u)||(d0(a)||function Que(e){return 2==(2&e)}(c)&&(a=yz(l,null,t,i,o,s)),function rle(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let a=-1===r.indexOf("-")?void 0:Xl.DashCase;null==i?e.removeStyle(t,r,a):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),a|=Xl.Important),e.setStyle(t,r,i,a))}}(r,s,gx(Ui(),t),i,a))}function yz(e,n,t,r,i,a){const s=null===n;let o;for(;i>0;){const l=e[i],c=Array.isArray(l),u=c?l[1]:l,h=null===u;let d=t[i+1];d===pt&&(d=h?Ht:void 0);let p=h?CI(d,r):u===r?d:void 0;if(c&&!d0(p)&&(p=CI(l,r)),d0(p)&&(o=p,s))return o;const f=e[i+1];i=s?ec(f):Nu(f)}if(null!==n){let l=a?n.residualClasses:n.residualStyles;null!=l&&(o=CI(l,r))}return o}function d0(e){return void 0!==e}function bz(e,n){return 0!=(e.flags&(n?8:16))}function ye(e,n=""){const t=ge(),r=Bt(),i=e+Rt,a=r.firstCreatePass?Qp(r,i,1,n,null):r.data[i],s=_z(r,t,a,n,e);t[i]=s,bx()&&Lx(r,t,s,a),lo(a,!1)}let _z=(e,n,t,r,i)=>(ql(!0),function Fx(e,n){return e.createText(n)}(n[ht],r));function On(e){return Ot("",e,""),On}function Ot(e,n,t){const r=ge(),i=ef(r,e,n,t);return i!==pt&&rl(r,Ui(),i),Ot}function h0(e,n,t,r,i){const a=ge(),s=tf(a,e,n,t,r,i);return s!==pt&&rl(a,Ui(),s),h0}function nc(e,n,t){const r=ge();return Mi(r,Tp(),n)&&La(Bt(),er(),r,e,n,r[ht],t,!0),nc}function HM(e,n,t){const r=ge();if(Mi(r,Tp(),n)){const a=Bt(),s=er();La(a,s,r,e,n,xV(dI(a.data),s,r),t,!0)}return HM}const hf="en-US";let Bz=hf;function GM(e,n,t,r,i){if(e=nt(e),Array.isArray(e))for(let a=0;a<e.length;a++)GM(e[a],n,t,r,i);else{const a=Bt(),s=ge();let o=Au(e)?e:nt(e.provide),l=LB(e);const c=pi(),u=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Au(e)||!e.multi){const p=new sy(l,i,E),f=KM(o,n,i?u:u+d,h);-1===f?(vI(Sx(c,s),a,o),qM(a,e,n.length),n.push(o),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(p),s.push(p)):(t[f]=p,s[f]=p)}else{const p=KM(o,n,u+d,h),f=KM(o,n,u,u+d),g=f>=0&&t[f];if(i&&!g||!i&&!(p>=0&&t[p])){vI(Sx(c,s),a,o);const y=function Lhe(e,n,t,r,i){const a=new sy(e,t,E);return a.multi=[],a.index=n,a.componentProviders=0,u6(a,i,r&&!t),a}(i?Phe:Rhe,t.length,i,r,l);!i&&g&&(t[f].providerFactory=y),qM(a,e,n.length,0),n.push(o),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(y),s.push(y)}else qM(a,e,p>-1?p:f,u6(t[i?f:p],l,!i&&r));!i&&r&&g&&t[f].componentProviders++}}}function qM(e,n,t,r){const i=Au(n),a=function Lle(e){return!!e.useClass}(n);if(i||a){const l=(a?nt(n.useClass):n).prototype.ngOnDestroy;if(l){const c=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){const u=c.indexOf(t);-1===u?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function u6(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function KM(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function Rhe(e,n,t,r){return XM(this.multi,[])}function Phe(e,n,t,r){const i=this.multi;let a;if(this.providerFactory){const s=this.providerFactory.componentProviders,o=Iu(t,t[De],this.providerFactory.index,r);a=o.slice(0,s),XM(i,a);for(let l=s;l<o.length;l++)a.push(o[l])}else a=[],XM(i,a);return a}function XM(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function jt(e,n=[]){return t=>{t.providersResolver=(r,i)=>function Fhe(e,n,t){const r=Bt();if(r.firstCreatePass){const i=Ps(e);GM(t,r.data,r.blueprint,i,!0),GM(n,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,n)}}class pf{}class d6{}class YM extends pf{constructor(n,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kV(this);const i=Na(n);this._bootstrapComponents=nl(i.bootstrap),this._r3Injector=lV(n,t,[{provide:pf,useValue:this},{provide:Kp,useValue:this.componentFactoryResolver},...r],$r(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class ZM extends d6{constructor(n){super(),this.moduleType=n}create(n){return new YM(this.moduleType,n,[])}}class h6 extends pf{constructor(n){super(),this.componentFactoryResolver=new kV(this),this.instance=null;const t=new tM([...n.providers,{provide:pf,useValue:this},{provide:Kp,useValue:this.componentFactoryResolver}],n.parent||Wx(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function QM(e,n,t=null){return new h6({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}let Vhe=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=OB(0,t.type),i=r.length>0?QM([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=de({token:e,providedIn:"environment",factory:()=>new e(Y(ho))})}return e})();function y0(e){e.getStandaloneInjector=n=>n.get(Vhe).getOrCreateStandaloneInjector(e)}function eE(e,n,t){const r=zi()+e,i=ge();return i[r]===pt?fo(i,r,t?n.call(t):n()):function My(e,n){return e[n]}(i,r)}function $y(e,n,t,r){return v6(ge(),zi(),e,n,t,r)}function _6(e,n,t,r,i){return function x6(e,n,t,r,i,a,s){const o=n+t;return Tu(e,o,i,a)?fo(e,o+2,s?r.call(s,i,a):r(i,a)):By(e,o+2)}(ge(),zi(),e,n,t,r,i)}function By(e,n){const t=e[n];return t===pt?void 0:t}function v6(e,n,t,r,i,a){const s=n+t;return Mi(e,s,i)?fo(e,s+1,a?r.call(a,i):r(i)):By(e,s+1)}function w6(e,n,t,r,i,a,s,o){const l=n+t;return function a0(e,n,t,r,i){const a=Tu(e,n,t,r);return Mi(e,n+2,i)||a}(e,l,i,a,s)?fo(e,l+3,o?r.call(o,i,a,s):r(i,a,s)):By(e,l+3)}function rt(e,n){const t=Bt();let r;const i=e+Rt;t.firstCreatePass?(r=function npe(e,n){if(n)for(let t=n.length-1;t>=0;t--){const r=n[t];if(e===r.name)return r}}(n,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const a=r.factory||(r.factory=ku(r.type)),s=oa(E);try{const o=kx(!1),l=a();return kx(o),function Hue(e,n,t,r){t>=e.data.length&&(e.data[t]=null,e.blueprint[t]=null),n[t]=r}(t,ge(),i,l),l}finally{oa(s)}}function lt(e,n,t){const r=e+Rt,i=ge(),a=Dp(i,r);return Vy(i,r)?v6(i,zi(),n,a.transform,t,a):a.transform(t)}function Vy(e,n){return e[De].data[n].pure}function tE(e){return n=>{setTimeout(e,void 0,n)}}const ct=class spe extends je{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,t,r){let i=n,a=t||(()=>null),s=r;if(n&&"object"==typeof n){const l=n;i=l.next?.bind(l),a=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(a=tE(a),i&&(i=tE(i)),s&&(s=tE(s)));const o=super.subscribe({next:i,error:a,complete:s});return n instanceof ln&&n.add(o),o}};function ope(){return this._results[Symbol.iterator]()}class ff{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new ct)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=ff.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=ope)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){const r=this;r.dirty=!1;const i=function us(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function soe(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],a=n[r];if(t&&(i=t(i),a=t(a)),a!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let $a=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=upe}return e})();const lpe=$a,cpe=class extends lpe{constructor(n,t,r){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t,null)}createEmbeddedViewImpl(n,t,r){const i=this._declarationTContainer.tView,a=Qx(this._declarationLView,i,n,16,null,i.declTNode,null,null,null,t||null,r||null);a[ny]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[io];return null!==o&&(a[io]=o.createEmbeddedView(i)),MM(i,a,n),new Sy(a)}};function upe(){return b0(pi(),ge())}function b0(e,n){return 4&e.type?new cpe(n,e,Xp(e,n)):null}let fa=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=ype}return e})();function ype(){return T6(pi(),ge())}const bpe=fa,D6=class extends bpe{constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return Xp(this._hostTNode,this._hostLView)}get injector(){return new Op(this._hostTNode,this._hostLView)}get parentInjector(){const n=_I(this._hostTNode,this._hostLView);if(k4(n)){const t=Cx(n,this._hostLView),r=wx(n);return new Op(t[De].data[r+8],t)}return new Op(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=A6(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-hi}createEmbeddedView(n,t,r){let i,a;"number"==typeof r?i=r:null!=r&&(i=r.index,a=r.injector);const o=n.createEmbeddedViewImpl(t||{},a,null);return this.insertImpl(o,i,false),o}createComponent(n,t,r,i,a){const s=n&&!function oy(e){return"function"==typeof e}(n);let o;if(s)o=t;else{const m=t||{};o=m.index,r=m.injector,i=m.projectableNodes,a=m.environmentInjector||m.ngModuleRef}const l=s?n:new Iy(Kt(n)),c=r||this.parentInjector;if(!a&&null==l.ngModule){const g=(s?c:this.parentInjector).get(ho,null);g&&(a=g)}Kt(l.componentType??{});const p=l.create(c,i,null,a);return this.insertImpl(p.hostView,o,false),p}insert(n,t){return this.insertImpl(n,t,!1)}insertImpl(n,t,r){const i=n._lView,a=i[De];if(function Cse(e){return ca(e[Jn])}(i)){const l=this.indexOf(n);if(-1!==l)this.detach(l);else{const c=i[Jn],u=new D6(c,c[ki],c[Jn]);u.detach(u.indexOf(n))}}const s=this._adjustIndex(t),o=this._lContainer;if(function Xoe(e,n,t,r){const i=hi+r,a=t.length;r>0&&(t[i-1][Rs]=n),r<a-hi?(n[Rs]=t[i],P4(t,hi+r,n)):(t.push(n),n[Rs]=null),n[Jn]=t;const s=n[ny];null!==s&&t!==s&&function Yoe(e,n){const t=e[Ep];n[Mr]!==n[Jn][Jn][Mr]&&(e[H5]=!0),null===t?e[Ep]=[n]:t.push(n)}(s,n);const o=n[io];null!==o&&o.insertView(e),n[vt]|=128}(a,i,o,s),!r){const l=zI(s,o),c=i[ht],u=Px(c,o[ao]);null!==u&&function Goe(e,n,t,r,i,a){r[Br]=i,r[ki]=n,fy(e,r,t,1,i,a)}(a,o[ki],c,i,u,l)}return n.attachToViewContainerRef(),P4(rE(o),s,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=A6(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=LI(this._lContainer,t);r&&(Mx(rE(this._lContainer),t),aB(r[De],r))}detach(n){const t=this._adjustIndex(n,-1),r=LI(this._lContainer,t);return r&&null!=Mx(rE(this._lContainer),t)?new Sy(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function A6(e){return e[8]}function rE(e){return e[8]||(e[8]=[])}function T6(e,n){let t;const r=n[e.index];return ca(r)?t=r:(t=yV(r,n,null,e),n[e.index]=t,Jx(n,t)),N6(t,n,e,r),new D6(t,e,n)}let N6=function O6(e,n,t,r){if(e[ao])return;let i;i=8&t.type?$n(r):function _pe(e,n){const t=e[ht],r=t.createComment(""),i=ua(n,e);return Eu(t,Px(t,i),r,function ele(e,n){return e.nextSibling(n)}(t,i),!1),r}(n,t),e[ao]=i};class iE{constructor(n){this.queryList=n,this.matches=null}clone(){return new iE(this.queryList)}setDirty(){this.queryList.setDirty()}}class aE{constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const r=null!==n.contentQueries?n.contentQueries[0]:t.length,i=[];for(let a=0;a<r;a++){const s=t.getByIndex(a);i.push(this.queries[s.indexInDeclarationView].clone())}return new aE(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==$6(n,t).matches&&this.queries[t].setDirty()}}class F6{constructor(n,t,r=null){this.predicate=n,this.flags=t,this.read=r}}class sE{constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,a=this.getByIndex(r).embeddedTView(n,i);a&&(a.indexInDeclarationView=r,null!==t?t.push(a):t=[a])}return null!==t?new sE(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class oE{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new oE(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const a=r[i];this.matchTNodeWithReadOption(n,t,wpe(t,a)),this.matchTNodeWithReadOption(n,t,Ix(t,n,a,!1,!1))}else r===$a?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,Ix(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Le||i===fa||i===$a&&4&t.type)this.addMatch(t.index,-2);else{const a=Ix(t,n,i,!1,!1);null!==a&&this.addMatch(t.index,a)}else this.addMatch(t.index,r)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function wpe(e,n){const t=e.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1];return null}function kpe(e,n,t,r){return-1===t?function Cpe(e,n){return 11&e.type?Xp(e,n):4&e.type?b0(e,n):null}(n,e):-2===t?function Spe(e,n,t){return t===Le?Xp(n,e):t===$a?b0(n,e):t===fa?T6(n,e):void 0}(e,n,r):Iu(e,e[De],t,n)}function R6(e,n,t,r){const i=n[io].queries[r];if(null===i.matches){const a=e.data,s=t.matches,o=[];for(let l=0;l<s.length;l+=2){const c=s[l];o.push(c<0?null:kpe(n,a[c],s[l+1],t.metadata.read))}i.matches=o}return i.matches}function lE(e,n,t,r){const i=e.queries.getByIndex(t),a=i.matches;if(null!==a){const s=R6(e,n,i,t);for(let o=0;o<a.length;o+=2){const l=a[o];if(l>0)r.push(s[o/2]);else{const c=a[o+1],u=n[-l];for(let h=hi;h<u.length;h++){const d=u[h];d[ny]===d[Jn]&&lE(d[De],d,c,r)}if(null!==u[Ep]){const h=u[Ep];for(let d=0;d<h.length;d++){const p=h[d];lE(p[De],p,c,r)}}}}}return r}function ft(e){const n=ge(),t=Bt(),r=f4();hI(r+1);const i=$6(t,r);if(e.dirty&&function wse(e){return 4==(4&e[vt])}(n)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const a=i.crossesNgTemplate?lE(t,n,r,[]):R6(t,n,i,r);e.reset(a,rce),e.notifyOnChanges()}return!0}return!1}function hn(e,n,t){const r=Bt();r.firstCreatePass&&(L6(r,new F6(e,n,t),-1),2==(2&n)&&(r.staticViewQueries=!0)),P6(r,ge(),n)}function Ei(e,n,t,r){const i=Bt();if(i.firstCreatePass){const a=pi();L6(i,new F6(n,t,r),a.index),function Mpe(e,n){const t=e.contentQueries||(e.contentQueries=[]);n!==(t.length?t[t.length-1]:-1)&&t.push(e.queries.length-1,n)}(i,e),2==(2&t)&&(i.staticContentQueries=!0)}P6(i,ge(),t)}function mt(){return function Ipe(e,n){return e[io].queries[n].queryList}(ge(),f4())}function P6(e,n,t){const r=new ff(4==(4&t));(function Ice(e,n,t,r){const i=_V(n);i.push(t),e.firstCreatePass&&vV(e).push(r,i.length-1)})(e,n,r,r.destroy),null===n[io]&&(n[io]=new aE),n[io].queries.push(new iE(r))}function L6(e,n,t){null===e.queries&&(e.queries=new sE),e.queries.track(new oE(n,t))}function $6(e,n){return e.queries.getByIndex(n)}function cE(e,n){return b0(e,n)}const v0=new ue("Application Initializer");let mE=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Se(v0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const a=i();if(Ty(a))t.push(a);else if(GV(a)){const s=new Promise((o,l)=>{a.subscribe({complete:o,error:l})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),tU=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const yo=new ue("LocaleId",{providedIn:"root",factory:()=>Se(yo,Dt.Optional|Dt.SkipSelf)||function Kpe(){return typeof $localize<"u"&&$localize.locale||hf}()});class Zpe{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let nU=(()=>{class e{compileModuleSync(t){return new ZM(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),a=nl(Na(t).declarations).reduce((s,o)=>{const l=Kt(o);return l&&s.push(new Iy(l)),s},[]);return new Zpe(r,a)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const efe=(()=>Promise.resolve(0))();function gE(e){typeof Zone>"u"?efe.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}function aU(...e){}class We{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ct(!1),this.onMicrotaskEmpty=new ct(!1),this.onStable=new ct(!1),this.onError=new ct(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function tfe(){let e=Nn.requestAnimationFrame,n=Nn.cancelAnimationFrame;if(typeof Zone<"u"&&e&&n){const t=e[Zone.__symbol__("OriginalDelegate")];t&&(e=t);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function ife(e){const n=()=>{!function rfe(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Nn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,bE(e),e.isCheckStableRunning=!0,yE(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),bE(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,a,s,o)=>{try{return sU(e),t.invokeTask(i,a,s,o)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===a.type||e.shouldCoalesceRunChangeDetection)&&n(),oU(e)}},onInvoke:(t,r,i,a,s,o,l)=>{try{return sU(e),t.invoke(i,a,s,o,l)}finally{e.shouldCoalesceRunChangeDetection&&n(),oU(e)}},onHasTask:(t,r,i,a)=>{t.hasTask(i,a),r===i&&("microTask"==a.change?(e._hasPendingMicrotasks=a.microTask,bE(e),yE(e)):"macroTask"==a.change&&(e.hasPendingMacrotasks=a.macroTask))},onHandleError:(t,r,i,a)=>(t.handleError(i,a),e.runOutsideAngular(()=>e.onError.emit(a)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!We.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(We.isInAngularZone())throw new oe(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){const a=this._inner,s=a.scheduleEventTask("NgZoneEvent: "+i,n,nfe,aU,aU);try{return a.runTask(s,t,r)}finally{a.cancelTask(s)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const nfe={};function yE(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function bE(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function sU(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function oU(e){e._nesting--,yE(e)}class afe{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ct,this.onMicrotaskEmpty=new ct,this.onStable=new ct,this.onError=new ct}run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}}const lU=new ue("",{providedIn:"root",factory:cU});function cU(){const e=Se(We);let n=!0;return os(new Sn(i=>{n=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(n),i.complete()})}),new Sn(i=>{let a;e.runOutsideAngular(()=>{a=e.onStable.subscribe(()=>{We.assertNotInAngularZone(),gE(()=>{!n&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(n=!0,i.next(!0))})})});const s=e.onUnstable.subscribe(()=>{We.assertInAngularZone(),n&&(n=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{a.unsubscribe(),s.unsubscribe()}}).pipe(zS()))}const uU=new ue(""),x0=new ue("");let xE,_E=(()=>{class e{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,xE||(function sfe(e){xE=e}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{We.assertNotInAngularZone(),gE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gE(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let a=-1;r&&r>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==a),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:a,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||e)(Y(We),Y(vE),Y(x0))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})(),vE=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return xE?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),rc=null;const dU=new ue("AllowMultipleToken"),wE=new ue("PlatformDestroyListeners"),w0=new ue("appBootstrapListener");class pU{constructor(n,t){this.name=n,this.token=t}}function mU(e,n,t=[]){const r=`Platform: ${n}`,i=new ue(r);return(a=[])=>{let s=CE();if(!s||s.injector.get(dU,!1)){const o=[...t,...a,{provide:i,useValue:!0}];e?e(o):function cfe(e){if(rc&&!rc.get(dU,!1))throw new oe(400,!1);(function hU(){!function hse(e){X5=e}(()=>{throw new oe(600,!1)})})(),rc=e;const n=e.get(yU);(function fU(e){e.get($B,null)?.forEach(t=>t())})(e)}(function gU(e=[],n){return dr.create({name:n,providers:[{provide:JI,useValue:"platform"},{provide:wE,useValue:new Set([()=>rc=null])},...e]})}(o,r))}return function dfe(e){const n=CE();if(!n)throw new oe(401,!1);return n}()}}function CE(){return rc?.get(yU)??null}let yU=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function hfe(e="zone.js",n){return"noop"===e?new afe:"zone.js"===e?new We(n):e}(r?.ngZone,function bU(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const a=function Bhe(e,n,t){return new YM(e,n,t)}(t.moduleType,this.injector,function CU(e){return[{provide:We,useFactory:e},{provide:by,multi:!0,useFactory:()=>{const n=Se(ffe,{optional:!0});return()=>n.initialize()}},{provide:wU,useFactory:pfe},{provide:lU,useFactory:cU}]}(()=>i)),s=a.injector.get(tl,null);return i.runOutsideAngular(()=>{const o=i.onError.subscribe({next:l=>{s.handleError(l)}});a.onDestroy(()=>{C0(this._modules,a),o.unsubscribe()})}),function _U(e,n,t){try{const r=t();return Ty(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e.handleError(r)),r}}(s,i,()=>{const o=a.injector.get(mE);return o.runInitializers(),o.donePromise.then(()=>(function Vz(e){ls(e,"Expected localeId to be defined"),"string"==typeof e&&(Bz=e.toLowerCase().replace(/_/g,"-"))}(a.injector.get(yo,hf)||hf),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=vU({},r);return function ofe(e,n,t){const r=new ZM(t);return Promise.resolve(r)}(0,0,t).then(a=>this.bootstrapModuleFactory(a,i))}_moduleDoBootstrap(t){const r=t.injector.get(ic);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new oe(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new oe(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(wE,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||e)(Y(dr))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function vU(e,n){return Array.isArray(n)?n.reduce(vU,e):{...e,...n}}let ic=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Se(wU),this.componentTypes=[],this.components=[],this.isStable=Se(lU),this._injector=Se(ho)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof WB;if(!this._injector.get(mE).done)throw!i&&function Cp(e){const n=Kt(e)||Ci(e)||la(e);return null!==n&&n.standalone}(t),new oe(405,!1);let s;s=i?t:this._injector.get(Kp).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const o=function lfe(e){return e.isBoundToModule}(s)?void 0:this._injector.get(pf),c=s.create(dr.NULL,[],r||s.selector,o),u=c.location.nativeElement,h=c.injector.get(uU,null);return h?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),C0(this.components,c),h?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new oe(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;C0(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(w0,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>C0(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new oe(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function C0(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}const wU=new ue("",{providedIn:"root",factory:()=>Se(tl).handleError.bind(void 0)});function pfe(){const e=Se(We),n=Se(tl);return t=>e.runOutsideAngular(()=>n.handleError(t))}let ffe=(()=>{class e{constructor(){this.zone=Se(We),this.applicationRef=Se(ic)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();let fi=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=gfe}return e})();function gfe(e){return function yfe(e,n,t){if(Cu(e)&&!t){const r=da(e.index,n);return new Sy(r,r)}return 47&e.type?new Sy(n[Mr],n):null}(pi(),ge(),16==(16&e))}class MU{constructor(){}supports(n){return r0(n)}create(n){return new Cfe(n)}}const wfe=(e,n)=>n;class Cfe{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||wfe}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,i=0,a=null;for(;t||r;){const s=!r||t&&t.currentIndex<DU(r,i,a)?t:r,o=DU(s,i,a),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{a||(a=[]);const c=o-i,u=l-i;if(c!=u){for(let d=0;d<c;d++){const p=d<a.length?a[d]:a[d]=0,f=p+d;u<=f&&f<c&&(a[d]=p+1)}a[s.previousIndex]=u-c}}o!==l&&n(s,o,l)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!r0(n))throw new oe(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i,a,s,t=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let o=0;o<this.length;o++)a=n[o],s=this._trackByFn(o,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,o)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,o),r=!0),t=t._next}else i=0,function wue(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Symbol.iterator]();let r;for(;!(r=t.next()).done;)n(r.value)}}(n,o=>{s=this._trackByFn(i,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,i)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,i){let a;return null===n?a=this._itTail:(a=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,a,i)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,a,i)):n=this._addAfter(new kfe(t,r),a,i),n}_verifyReinsertion(n,t,r,i){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==a?n=this._reinsertAfter(a,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const i=n._prevRemoved,a=n._nextRemoved;return null===i?this._removalsHead=a:i._nextRemoved=a,null===a?this._removalsTail=i:a._prevRemoved=i,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){const i=null===t?this._itHead:t._next;return n._next=i,n._prev=t,null===i?this._itTail=n:i._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new EU),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,r=n._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new EU),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class kfe{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Sfe{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const t=n._prevDup,r=n._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class EU{constructor(){this.map=new Map}put(n){const t=n.trackById;let r=this.map.get(t);r||(r=new Sfe,this.map.set(t,r)),r.add(n)}get(n,t){const i=this.map.get(n);return i?i.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function DU(e,n,t){const r=e.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+n+i}class AU{constructor(){}supports(n){return n instanceof Map||AM(n)}create(){return new Ife}}class Ife{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let t;for(t=this._mapHead;null!==t;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}diff(n){if(n){if(!(n instanceof Map||AM(n)))throw new oe(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const a=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,a)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){const r=n._prev;return t._next=n,t._prev=r,n._prev=t,r&&(r._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){const i=this._records.get(n);this._maybeAddToChanges(i,t);const a=i._prev,s=i._next;return a&&(a._next=s),s&&(s._prev=a),i._next=null,i._prev=null,i}const r=new Mfe(n);return this._records.set(n,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(r=>t(n[r],r))}}class Mfe{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function TU(){return new Uy([new MU])}let Uy=(()=>{class e{static#e=this.\u0275prov=de({token:e,providedIn:"root",factory:TU});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||TU()),deps:[[e,new Vp,new Kl]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new oe(901,!1)}}return e})();function NU(){return new Ru([new AU])}let Ru=(()=>{class e{static#e=this.\u0275prov=de({token:e,providedIn:"root",factory:NU});constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||NU()),deps:[[e,new Vp,new Kl]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new oe(901,!1)}}return e})();const Afe=mU(null,"core",[]);let Tfe=(()=>{class e{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||e)(Y(ic))};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({})}return e})(),$U=(()=>{class e{get whenAllTasksComplete(){return 0===this.collection.size&&this.complete(),this.promise}constructor(){this.taskId=0,this.collection=new Set,this.ngZone=Se(We),this.completed=!1,this.ngZone.runOutsideAngular(()=>{this.promise=new Promise(t=>{this.resolve=t})})}add(){if(this.completed)return-1;const t=this.taskId++;return this.collection.add(t),t}remove(t){this.completed||(this.collection.delete(t),0===this.collection.size&&this.complete())}ngOnDestroy(){this.complete(),this.collection.clear()}complete(){this.completed=!0,this.resolve()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),AE=null;function ac(){return AE}class Hfe{}const Je=new ue("DocumentToken");let TE=(()=>{class e{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:function(){return Se(jfe)},providedIn:"platform"})}return e})();const Wfe=new ue("Location Initialized");let jfe=(()=>{class e extends TE{constructor(){super(),this._doc=Se(Je),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ac().getBaseHref(this._doc)}onPopState(t){const r=ac().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=ac().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:function(){return new e},providedIn:"platform"})}return e})();function NE(e,n){if(0==e.length)return n;if(0==n.length)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,2==t?e+n.substring(1):1==t?e+n:e+"/"+n}function VU(e){const n=e.match(/#|\?|$/),t=n&&n.index||e.length;return e.slice(0,t-("/"===e[t-1]?1:0))+e.slice(t)}function il(e){return e&&"?"!==e[0]?"?"+e:e}let Pu=(()=>{class e{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:function(){return Se(UU)},providedIn:"root"})}return e})();const zU=new ue("appBaseHref");let UU=(()=>{class e extends Pu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Se(Je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return NE(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+il(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const s=this.prepareExternalUrl(i+il(a));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,a){const s=this.prepareExternalUrl(i+il(a));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(TE),Y(zU,8))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Gfe=(()=>{class e extends Pu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=NE(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let s=this.prepareExternalUrl(i+il(a));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,a){let s=this.prepareExternalUrl(i+il(a));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(TE),Y(zU,8))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})(),Hy=(()=>{class e{constructor(t){this._subject=new ct,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Xfe(e){if(new RegExp("^(https?:)?//").test(e)){const[,t]=e.split(/\/\/[^\/]+/);return t}return e}(VU(HU(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+il(r))}normalize(t){return e.stripTrailingSlash(function Kfe(e,n){if(!e||!n.startsWith(e))return n;const t=n.substring(e.length);return""===t||["/",";","?","#"].includes(t[0])?t:n}(this._basePath,HU(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+il(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+il(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=il;static#t=this.joinWithSlash=NE;static#n=this.stripTrailingSlash=VU;static#r=this.\u0275fac=function(r){return new(r||e)(Y(Pu))};static#i=this.\u0275prov=de({token:e,factory:function(){return function qfe(){return new Hy(Y(Pu))}()},providedIn:"root"})}return e})();function HU(e){return e.replace(/\/index.html$/,"")}function QU(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(a)}return null}const UE=/\s+/,JU=[];let Lu=(()=>{class e{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this.initialClasses=JU,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(UE):JU}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(UE):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(UE).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||e)(E(Uy),E(Ru),E(Le),E(Pa))};static#t=this.\u0275dir=ce({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return e})();class Fme{constructor(n,t,r,i){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gy=(()=>{class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Fme(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===a?void 0:a);else if(null!==a){const o=r.get(a);r.move(o,s),tH(o,i)}});for(let i=0,a=r.length;i<a;i++){const o=r.get(i).context;o.index=i,o.count=a,o.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{tH(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(E(fa),E($a),E(Uy))};static#t=this.\u0275dir=ce({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return e})();function tH(e,n){e.context.$implicit=n.item}let ma=(()=>{class e{constructor(t,r){this._viewContainer=t,this._context=new Rme,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nH("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nH("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(E(fa),E($a))};static#t=this.\u0275dir=ce({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return e})();class Rme{constructor(){this.$implicit=null,this.ngIf=null}}function nH(e,n){if(n&&!n.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${$r(n)}'.`)}class HE{constructor(n,t){this._viewContainerRef=n,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(n){n&&!this._created?this.create():!n&&this._created&&this.destroy()}}let qy=(()=>{class e{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const r of this._defaultViews)r.enforceState(t)}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=ce({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return e})(),WE=(()=>{class e{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new HE(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(r){return new(r||e)(E(fa),E($a),E(qy,9))};static#t=this.\u0275dir=ce({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return e})(),rH=(()=>{class e{constructor(t,r,i){i._addDefault(new HE(t,r))}static#e=this.\u0275fac=function(r){return new(r||e)(E(fa),E($a),E(qy,9))};static#t=this.\u0275dir=ce({type:e,selectors:[["","ngSwitchDefault",""]],standalone:!0})}return e})(),GE=(()=>{class e{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:a,ngTemplateOutletInjector:s}=this;this._viewRef=r.createEmbeddedView(i,a,s?{injector:s}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(r){return new(r||e)(E(fa))};static#t=this.\u0275dir=ce({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Jr]})}return e})();let sH=(()=>{class e{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw function zs(e,n){return new oe(2100,!1)}();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275pipe=Vi({name:"slice",type:e,pure:!1,standalone:!0})}return e})(),Va=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({})}return e})();const oH="browser";function $u(e){return e===oH}function sc(e){return"server"===e}let lge=(()=>{class e{static#e=this.\u0275prov=de({token:e,providedIn:"root",factory:()=>new cge(Y(Je),window)})}return e})();class cge{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const t=function uge(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const s=a.getElementById(n)||a.querySelector(`[name="${n}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=n)}}scrollToElement(n){const t=n.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=lH(this.window.history)||lH(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function lH(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class cH{}class Oge extends Hfe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ZE extends Oge{static makeCurrent(){!function Ufe(e){AE||(AE=e)}(new ZE)}onAndCancel(n,t,r){return n.addEventListener(t,r),()=>{n.removeEventListener(t,r)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function Fge(){return Xy=Xy||document.querySelector("base"),Xy?Xy.getAttribute("href"):null}();return null==t?null:function Rge(e){B0=B0||document.createElement("a"),B0.setAttribute("href",e);const n=B0.pathname;return"/"===n.charAt(0)?n:`/${n}`}(t)}resetBaseElement(){Xy=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return QU(document.cookie,n)}}let B0,Xy=null,Lge=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();const QE=new ue("EventManagerPlugins");let fH=(()=>{class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new oe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||e)(Y(QE),Y(We))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();class mH{constructor(n){this._doc=n}}const JE="ng-app-id";let gH=(()=>{class e{constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=sc(a),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${JE}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const a=i.get(t);return a.usage+=r,a.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,a=i?.get(r);if(a?.parentNode===t)return i.delete(r),a.removeAttribute(JE),a;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(JE,this.appId),s}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const a=this.styleRef,s=a.get(r)?.elements;s?s.push(i):a.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Je),Y(jx),Y(iM,8),Y(Ii))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();const e2={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},t2=/%COMP%/g,zge=new ue("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function bH(e,n){return n.map(t=>t.replace(t2,e))}let n2=(()=>{class e{constructor(t,r,i,a,s,o,l,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=a,this.doc=s,this.platformId=o,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=sc(o),this.defaultRenderer=new r2(t,s,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===cs.ShadowDom&&(r={...r,encapsulation:cs.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof vH?i.applyToHost(t):i instanceof a2&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const s=this.doc,o=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestory,h=this.platformIsServer;switch(r.encapsulation){case cs.Emulated:a=new vH(l,c,r,this.appId,u,s,o,h);break;case cs.ShadowDom:return new jge(l,c,t,r,s,o,this.nonce,h);default:a=new a2(l,c,r,u,s,o,h)}a.onDestroy=()=>i.delete(r.id),i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||e)(Y(fH),Y(gH),Y(jx),Y(zge),Y(Je),Y(Ii),Y(We),Y(iM))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();class r2{constructor(n,t,r,i){this.eventManager=n,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,t){return t?this.doc.createElementNS(e2[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(_H(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(_H(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){n&&n.removeChild(t)}selectRootElement(n,t){let r="string"==typeof n?this.doc.querySelector(n):n;if(!r)throw new oe(5104,!1);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;const a=e2[i];a?n.setAttributeNS(a,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const i=e2[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(Xl.DashCase|Xl.Important)?n.style.setProperty(t,r,i&Xl.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&Xl.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){n[t]=r}setValue(n,t){n.nodeValue=t}listen(n,t,r){if("string"==typeof n&&!(n=ac().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(r))}decoratePreventDefault(n){return t=>{if("__ngUnwrap__"===t)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))&&t.preventDefault()}}}function _H(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class jge extends r2{constructor(n,t,r,i,a,s,o,l){super(n,a,s,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=bH(i.id,i.styles);for(const u of c){const h=document.createElement("style");o&&h.setAttribute("nonce",o),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(this.nodeOrShadowRoot(n),t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class a2 extends r2{constructor(n,t,r,i,a,s,o,l){super(n,a,s,o),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=l?bH(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class vH extends a2{constructor(n,t,r,i,a,s,o,l){const c=i+"-"+r.id;super(n,t,r,a,s,o,l,c),this.contentAttr=function Uge(e){return"_ngcontent-%COMP%".replace(t2,e)}(c),this.hostAttr=function Hge(e){return"_nghost-%COMP%".replace(t2,e)}(c)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}let Gge=(()=>{class e extends mH{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Je))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();const xH=["alt","control","meta","shift"],qge={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kge={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let Xge=(()=>{class e extends mH{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,i){const a=e.parseEventName(r),s=e.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ac().onAndCancel(t,a.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=e._normalizeKey(r.pop());let s="",o=r.indexOf("code");if(o>-1&&(r.splice(o,1),s="code."),xH.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=a,0!=r.length||0===a.length)return null;const l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=qge[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),xH.forEach(s=>{s!==i&&(0,Kge[s])(t)&&(a+=s+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{e.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Je))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();const CH=[{provide:Ii,useValue:oH},{provide:$B,useValue:function Yge(){ZE.makeCurrent()},multi:!0},{provide:Je,useFactory:function Qge(){return function lle(e){WI=e}(document),document},deps:[]}],Jge=mU(Afe,"browser",CH),eye=new ue(""),kH=[{provide:x0,useClass:class Pge{addToWindow(n){Nn.getAngularTestability=(r,i=!0)=>{const a=n.findTestabilityInTree(r,i);if(null==a)throw new oe(5103,!1);return a},Nn.getAllAngularTestabilities=()=>n.getAllTestabilities(),Nn.getAllAngularRootElements=()=>n.getAllRootElements(),Nn.frameworkStabilizers||(Nn.frameworkStabilizers=[]),Nn.frameworkStabilizers.push(r=>{const i=Nn.getAllAngularTestabilities();let a=i.length,s=!1;const o=function(l){s=s||l,a--,0==a&&r(s)};i.forEach(function(l){l.whenStable(o)})})}findTestabilityInTree(n,t,r){return null==t?null:n.getTestability(t)??(r?ac().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},deps:[]},{provide:uU,useClass:_E,deps:[We,vE,x0]},{provide:_E,useClass:_E,deps:[We,vE,x0]}],SH=[{provide:JI,useValue:"root"},{provide:tl,useFactory:function Zge(){return new tl},deps:[]},{provide:QE,useClass:Gge,multi:!0,deps:[Je,We,Ii]},{provide:QE,useClass:Xge,multi:!0,deps:[Je]},n2,gH,fH,{provide:xy,useExisting:n2},{provide:cH,useClass:Lge,deps:[]},[]];let s2=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:jx,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||e)(Y(eye,12))};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({providers:[...SH,...kH],imports:[Va,Tfe]})}return e})(),IH=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Je))};static#t=this.\u0275prov=de({token:e,factory:function(r){let i=null;return i=r?new r:function nye(){return new IH(Y(Je))}(),i},providedIn:"root"})}return e})();function Ue(...e){return ur(e,Yg(e))}typeof window<"u"&&window;class qi extends je{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}const{isArray:lye}=Array,{getPrototypeOf:cye,prototype:uye,keys:dye}=Object;function TH(e){if(1===e.length){const n=e[0];if(lye(n))return{args:n,keys:null};if(function hye(e){return e&&"object"==typeof e&&cye(e)===uye}(n)){const t=dye(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}const{isArray:pye}=Array;function l2(e){return tt(n=>function fye(e,n){return pye(n)?e(...n):e(n)}(e,n))}function NH(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}function Yy(...e){const n=Yg(e),t=g5(e),{args:r,keys:i}=TH(e);if(0===r.length)return ur([],n);const a=new Sn(function mye(e,n,t=Go){return r=>{OH(n,()=>{const{length:i}=e,a=new Array(i);let s=i,o=i;for(let l=0;l<i;l++)OH(n,()=>{const c=ur(e[l],n);let u=!1;c.subscribe(In(r,h=>{a[l]=h,u||(u=!0,o--),o||r.next(t(a.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,n,i?s=>NH(i,s):Go));return t?a.pipe(l2(t)):a}function OH(e,n,t){e?qo(t,e,n):n()}const z0=vp(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Zy(...e){return function gye(){return xp(1)}()(ur(e,Yg(e)))}function Qy(e){return new Sn(n=>{di(e()).subscribe(n)})}function _f(e,n){const t=_t(e)?e:()=>e,r=i=>i.error(t());return new Sn(n?i=>n.schedule(r,0,i):r)}function c2(){return jn((e,n)=>{let t=null;e._refCount++;const r=In(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const i=e._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}class FH extends Sn{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,t5(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new ln;const t=this.getSubject();n.add(this.source.subscribe(In(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=ln.EMPTY)}return n}refCount(){return c2()(this)}}function ri(e,n){return jn((t,r)=>{let i=null,a=0,s=!1;const o=()=>s&&!i&&r.complete();t.subscribe(In(r,l=>{i?.unsubscribe();let c=0;const u=a++;di(e(l,u)).subscribe(i=In(r,h=>r.next(n?n(l,h,u,c++):h),()=>{i=null,o()}))},()=>{s=!0,o()}))})}function fr(e){return e<=0?()=>ss:jn((n,t)=>{let r=0;n.subscribe(In(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function ol(...e){const n=Yg(e);return jn((t,r)=>{(n?Zy(e,t,n):Zy(e,t)).subscribe(r)})}function Pn(e,n){return jn((t,r)=>{let i=0;t.subscribe(In(r,a=>e.call(n,a,i++)&&r.next(a)))})}function U0(e){return jn((n,t)=>{let r=!1;n.subscribe(In(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function RH(e=yye){return jn((n,t)=>{let r=!1;n.subscribe(In(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function yye(){return new z0}function Bu(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Pn((i,a)=>e(i,a,r)):Go,fr(1),t?U0(n):RH(()=>new z0))}function vf(e,n){return _t(n)?Lr(e,n,1):Lr(e,1)}function mr(e,n,t){const r=_t(e)||n||t?{next:e,error:n,complete:t}:e;return r?jn((i,a)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let o=!0;i.subscribe(In(a,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),a.next(l)},()=>{var l;o=!1,null===(l=r.complete)||void 0===l||l.call(r),a.complete()},l=>{var c;o=!1,null===(c=r.error)||void 0===c||c.call(r,l),a.error(l)},()=>{var l,c;o&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Go}function ll(e){return jn((n,t)=>{let a,r=null,i=!1;r=n.subscribe(In(t,void 0,void 0,s=>{a=di(e(s,ll(e)(n))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function u2(e){return e<=0?()=>ss:jn((n,t)=>{let r=[];n.subscribe(In(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function PH(e){return tt(()=>e)}function Jy(e){return jn((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}const St="primary",eb=Symbol("RouteTitle");class xye{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function xf(e){return new xye(e)}function wye(e,n,t){const r=t.path.split("/");if(r.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;const i={};for(let a=0;a<r.length;a++){const s=r[a],o=e[a];if(s.startsWith(":"))i[s.substring(1)]=o;else if(s!==o.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function bo(e,n){const t=e?Object.keys(e):void 0,r=n?Object.keys(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!LH(e[i],n[i]))return!1;return!0}function LH(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),r=[...n].sort();return t.every((i,a)=>r[a]===i)}return e===n}function $H(e){return e.length>0?e[e.length-1]:null}function lc(e){return function oye(e){return!!e&&(e instanceof Sn||_t(e.lift)&&_t(e.subscribe))}(e)?e:Ty(e)?ur(Promise.resolve(e)):Ue(e)}const kye={exact:function zH(e,n,t){if(!Vu(e.segments,n.segments)||!H0(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!zH(e.children[r],n.children[r],t))return!1;return!0},subset:UH},BH={exact:function Sye(e,n){return bo(e,n)},subset:function Iye(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>LH(e[t],n[t]))},ignored:()=>!0};function VH(e,n,t){return kye[t.paths](e.root,n.root,t.matrixParams)&&BH[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function UH(e,n,t){return HH(e,n,n.segments,t)}function HH(e,n,t,r){if(e.segments.length>t.length){const i=e.segments.slice(0,t.length);return!(!Vu(i,t)||n.hasChildren()||!H0(i,t,r))}if(e.segments.length===t.length){if(!Vu(e.segments,t)||!H0(e.segments,t,r))return!1;for(const i in n.children)if(!e.children[i]||!UH(e.children[i],n.children[i],r))return!1;return!0}{const i=t.slice(0,e.segments.length),a=t.slice(e.segments.length);return!!(Vu(e.segments,i)&&H0(e.segments,i,r)&&e.children[St])&&HH(e.children[St],n,a,r)}}function H0(e,n,t){return n.every((r,i)=>BH[t](e[i].parameters,r.parameters))}class wf{constructor(n=new pn([],{}),t={},r=null){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xf(this.queryParams)),this._queryParamMap}toString(){return Dye.serialize(this)}}class pn{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return W0(this)}}class tb{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=xf(this.parameters)),this._parameterMap}toString(){return GH(this)}}function Vu(e,n){return e.length===n.length&&e.every((t,r)=>t.path===n[r].path)}let nb=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:function(){return new d2},providedIn:"root"})}return e})();class d2{parse(n){const t=new Vye(n);return new wf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${rb(n.root,!0)}`,r=function Nye(e){const n=Object.keys(e).map(t=>{const r=e[t];return Array.isArray(r)?r.map(i=>`${j0(t)}=${j0(i)}`).join("&"):`${j0(t)}=${j0(r)}`}).filter(t=>!!t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${r}${"string"==typeof n.fragment?`#${function Aye(e){return encodeURI(e)}(n.fragment)}`:""}`}}const Dye=new d2;function W0(e){return e.segments.map(n=>GH(n)).join("/")}function rb(e,n){if(!e.hasChildren())return W0(e);if(n){const t=e.children[St]?rb(e.children[St],!1):"",r=[];return Object.entries(e.children).forEach(([i,a])=>{i!==St&&r.push(`${i}:${rb(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Eye(e,n){let t=[];return Object.entries(e.children).forEach(([r,i])=>{r===St&&(t=t.concat(n(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==St&&(t=t.concat(n(i,r)))}),t}(e,(r,i)=>i===St?[rb(e.children[St],!1)]:[`${i}:${rb(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[St]?`${W0(e)}/${t[0]}`:`${W0(e)}/(${t.join("//")})`}}function WH(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function j0(e){return WH(e).replace(/%3B/gi,";")}function h2(e){return WH(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function G0(e){return decodeURIComponent(e)}function jH(e){return G0(e.replace(/\+/g,"%20"))}function GH(e){return`${h2(e.path)}${function Tye(e){return Object.keys(e).map(n=>`;${h2(n)}=${h2(e[n])}`).join("")}(e.parameters)}`}const Oye=/^[^\/()?;#]+/;function p2(e){const n=e.match(Oye);return n?n[0]:""}const Fye=/^[^\/()?;=#]+/,Pye=/^[^=?&#]+/,$ye=/^[^&#]+/;class Vye{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pn([],{}):new pn([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[St]=new pn(n,t)),r}parseSegment(){const n=p2(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new oe(4009,!1);return this.capture(n),new tb(G0(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=function Rye(e){const n=e.match(Fye);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=p2(this.remaining);i&&(r=i,this.capture(r))}n[G0(t)]=G0(r)}parseQueryParam(n){const t=function Lye(e){const n=e.match(Pye);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function Bye(e){const n=e.match($ye);return n?n[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=jH(t),a=jH(r);if(n.hasOwnProperty(i)){let s=n[i];Array.isArray(s)||(s=[s],n[i]=s),s.push(a)}else n[i]=a}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=p2(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new oe(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):n&&(a=St);const s=this.parseChildren();t[a]=1===Object.keys(s).length?s[St]:new pn([],s),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new oe(4011,!1)}}function qH(e){return e.segments.length>0?new pn([],{[St]:e}):e}function KH(e){const n={};for(const r of Object.keys(e.children)){const a=KH(e.children[r]);if(r===St&&0===a.segments.length&&a.hasChildren())for(const[s,o]of Object.entries(a.children))n[s]=o;else(a.segments.length>0||a.hasChildren())&&(n[r]=a)}return function zye(e){if(1===e.numberOfChildren&&e.children[St]){const n=e.children[St];return new pn(e.segments.concat(n.segments),n.children)}return e}(new pn(e.segments,n))}function zu(e){return e instanceof wf}function XH(e){let n;const i=qH(function t(a){const s={};for(const l of a.children){const c=t(l);s[l.outlet]=c}const o=new pn(a.url,s);return a===e&&(n=o),o}(e.root));return n??i}function YH(e,n,t,r){let i=e;for(;i.parent;)i=i.parent;if(0===n.length)return f2(i,i,i,t,r);const a=function Hye(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new QH(!0,0,e);let n=0,t=!1;const r=e.reduce((i,a,s)=>{if("object"==typeof a&&null!=a){if(a.outlets){const o={};return Object.entries(a.outlets).forEach(([l,c])=>{o[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:o}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===s?(a.split("/").forEach((o,l)=>{0==l&&"."===o||(0==l&&""===o?t=!0:".."===o?n++:""!=o&&i.push(o))}),i):[...i,a]},[]);return new QH(t,n,r)}(n);if(a.toRoot())return f2(i,i,new pn([],{}),t,r);const s=function Wye(e,n,t){if(e.isAbsolute)return new K0(n,!0,0);if(!t)return new K0(n,!1,NaN);if(null===t.parent)return new K0(t,!0,0);const r=q0(e.commands[0])?0:1;return function jye(e,n,t){let r=e,i=n,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new oe(4005,!1);i=r.segments.length}return new K0(r,!1,i-a)}(t,t.segments.length-1+r,e.numberOfDoubleDots)}(a,i,e),o=s.processChildren?ab(s.segmentGroup,s.index,a.commands):JH(s.segmentGroup,s.index,a.commands);return f2(i,s.segmentGroup,o,t,r)}function q0(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function ib(e){return"object"==typeof e&&null!=e&&e.outlets}function f2(e,n,t,r,i){let s,a={};r&&Object.entries(r).forEach(([l,c])=>{a[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),s=e===n?t:ZH(e,n,t);const o=qH(KH(s));return new wf(o,a,i)}function ZH(e,n,t){const r={};return Object.entries(e.children).forEach(([i,a])=>{r[i]=a===n?t:ZH(a,n,t)}),new pn(e.segments,r)}class QH{constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&q0(r[0]))throw new oe(4003,!1);const i=r.find(ib);if(i&&i!==$H(r))throw new oe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class K0{constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}}function JH(e,n,t){if(e||(e=new pn([],{})),0===e.segments.length&&e.hasChildren())return ab(e,n,t);const r=function qye(e,n,t){let r=0,i=n;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return a;const s=e.segments[i],o=t[r];if(ib(o))break;const l=`${o}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!tW(l,c,s))return a;r+=2}else{if(!tW(l,{},s))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const a=new pn(e.segments.slice(0,r.pathIndex),{});return a.children[St]=new pn(e.segments.slice(r.pathIndex),e.children),ab(a,0,i)}return r.match&&0===i.length?new pn(e.segments,{}):r.match&&!e.hasChildren()?m2(e,n,t):r.match?ab(e,0,i):m2(e,n,t)}function ab(e,n,t){if(0===t.length)return new pn(e.segments,{});{const r=function Gye(e){return ib(e[0])?e[0].outlets:{[St]:e}}(t),i={};if(!r[St]&&e.children[St]&&1===e.numberOfChildren&&0===e.children[St].segments.length){const a=ab(e.children[St],n,t);return new pn(e.segments,a.children)}return Object.entries(r).forEach(([a,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[a]=JH(e.children[a],n,s))}),Object.entries(e.children).forEach(([a,s])=>{void 0===r[a]&&(i[a]=s)}),new pn(e.segments,i)}}function m2(e,n,t){const r=e.segments.slice(0,n);let i=0;for(;i<t.length;){const a=t[i];if(ib(a)){const l=Kye(a.outlets);return new pn(r,l)}if(0===i&&q0(t[0])){r.push(new tb(e.segments[n].path,eW(t[0]))),i++;continue}const s=ib(a)?a.outlets[St]:`${a}`,o=i<t.length-1?t[i+1]:null;s&&o&&q0(o)?(r.push(new tb(s,eW(o))),i+=2):(r.push(new tb(s,{})),i++)}return new pn(r,{})}function Kye(e){const n={};return Object.entries(e).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(n[t]=m2(new pn([],{}),0,r))}),n}function eW(e){const n={};return Object.entries(e).forEach(([t,r])=>n[t]=`${r}`),n}function tW(e,n,t){return e==t.path&&bo(n,t.parameters)}const sb="imperative";class _o{constructor(n,t){this.id=n,this.url=t}}class g2 extends _o{constructor(n,t,r="imperative",i=null){super(n,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Uu extends _o{constructor(n,t,r){super(n,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class X0 extends _o{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ob extends _o{constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i,this.type=16}}class y2 extends _o{constructor(n,t,r,i){super(n,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Xye extends _o{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yye extends _o{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zye extends _o{constructor(n,t,r,i,a){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qye extends _o{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jye extends _o{constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ebe{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class tbe{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nbe{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rbe{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ibe{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class abe{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nW{constructor(n,t,r){this.routerEvent=n,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class sbe{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new lb,this.attachRef=null}}let lb=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new sbe,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class rW{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=b2(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){const t=b2(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=_2(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return _2(n,this._root).map(t=>t.value)}}function b2(e,n){if(e===n.value)return n;for(const t of n.children){const r=b2(e,t);if(r)return r}return null}function _2(e,n){if(e===n.value)return[n];for(const t of n.children){const r=_2(e,t);if(r.length)return r.unshift(n),r}return[]}class cl{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function Cf(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class iW extends rW{constructor(n,t){super(n),this.snapshot=t,v2(this,n)}toString(){return this.snapshot.toString()}}function aW(e,n){const t=function obe(e,n){const s=new Y0([],{},{},"",{},St,n,null,{});return new oW("",new cl(s,[]))}(0,n),r=new qi([new tb("",{})]),i=new qi({}),a=new qi({}),s=new qi({}),o=new qi(""),l=new kf(r,i,s,o,a,St,n,t.root);return l.snapshot=t.root,new iW(new cl(l,[]),t)}class kf{constructor(n,t,r,i,a,s,o,l){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=s,this.component=o,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(tt(c=>c[eb]))??Ue(void 0),this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(tt(n=>xf(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(tt(n=>xf(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sW(e,n="emptyOnly"){const t=e.pathFromRoot;let r=0;if("always"!==n)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function lbe(e){return e.reduce((n,t)=>({params:{...n.params,...t.params},data:{...n.data,...t.data},resolve:{...t.data,...n.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Y0{get title(){return this.data?.[eb]}constructor(n,t,r,i,a,s,o,l,c){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=s,this.component=o,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=xf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=xf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class oW extends rW{constructor(n,t){super(t),this.url=n,v2(this,t)}toString(){return lW(this._root)}}function v2(e,n){n.value._routerState=e,n.children.forEach(t=>v2(e,t))}function lW(e){const n=e.children.length>0?` { ${e.children.map(lW).join(", ")} } `:"";return`${e.value}${n}`}function x2(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,bo(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),bo(n.params,t.params)||e.paramsSubject.next(t.params),function Cye(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!bo(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.urlSubject.next(t.url),bo(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function w2(e,n){const t=bo(e.params,n.params)&&function Mye(e,n){return Vu(e,n)&&e.every((t,r)=>bo(t.parameters,n[r].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||w2(e.parent,n.parent))}let C2=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=St,this.activateEvents=new ct,this.deactivateEvents=new ct,this.attachEvents=new ct,this.detachEvents=new ct,this.parentContexts=Se(lb),this.location=Se(fa),this.changeDetector=Se(fi),this.environmentInjector=Se(ho),this.inputBinder=Se(Z0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new oe(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new oe(4013,!1);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,o=this.parentContexts.getOrCreateContext(this.name).children,l=new cbe(t,o,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=ce({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Jr]})}return e})();class cbe{constructor(n,t,r){this.route=n,this.childContexts=t,this.parent=r}get(n,t){return n===kf?this.route:n===lb?this.childContexts:this.parent.get(n,t)}}const Z0=new ue("");let cW=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=Yy([r.queryParams,r.params,r.data]).pipe(ri(([a,s,o],l)=>(o={...a,...s,...o},0===l?Ue(o):Promise.resolve(o)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function zfe(e){const n=Kt(e);if(!n)return null;const t=new Iy(n);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return n.standalone}}}(r.component);if(s)for(const{templateName:o}of s.inputs)t.activatedComponentRef.setInput(o,a[o]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();function cb(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=n.value;const i=function dbe(e,n,t){return n.children.map(r=>{for(const i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return cb(e,r,i);return cb(e,r)})}(e,n,t);return new cl(r,i)}{if(e.shouldAttach(n.value)){const a=e.retrieve(n.value);if(null!==a){const s=a.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(o=>cb(e,o)),s}}const r=function hbe(e){return new kf(new qi(e.url),new qi(e.params),new qi(e.queryParams),new qi(e.fragment),new qi(e.data),e.outlet,e.component,e)}(n.value),i=n.children.map(a=>cb(e,a));return new cl(r,i)}}const k2="ngNavigationCancelingError";function uW(e,n){const{redirectTo:t,navigationBehaviorOptions:r}=zu(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=dW(!1,0,n);return i.url=t,i.navigationBehaviorOptions=r,i}function dW(e,n,t){const r=new Error("NavigationCancelingError: "+(e||""));return r[k2]=!0,r.cancellationCode=n,t&&(r.url=t),r}function hW(e){return pW(e)&&zu(e.url)}function pW(e){return e&&e[k2]}let fW=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=Ut({type:e,selectors:[["ng-component"]],standalone:!0,features:[y0],decls:1,vars:0,template:function(r,i){1&r&&we(0,"router-outlet")},dependencies:[C2],encapsulation:2})}return e})();function S2(e){const n=e.children&&e.children.map(S2),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==St&&(t.component=fW),t}function Us(e){return e.outlet||St}function ub(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class _be{constructor(n,t,r,i,a){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(n){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),x2(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){const i=Cf(t);n.children.forEach(a=>{const s=a.value.outlet;this.deactivateRoutes(a,i[s],r),delete i[s]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(n,t,r){const i=n.value,a=t?t.value:null;if(i===a)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(n,t,s.children)}else this.deactivateChildRoutes(n,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,a=Cf(n);for(const s of Object.keys(a))this.deactivateRouteAndItsChildren(a[s],i);if(r&&r.outlet){const s=r.outlet.detach(),o=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:o})}}deactivateRouteAndOutlet(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,a=Cf(n);for(const s of Object.keys(a))this.deactivateRouteAndItsChildren(a[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,t,r){const i=Cf(t);n.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new abe(a.value.snapshot))}),n.children.length&&this.forwardEvent(new rbe(n.value.snapshot))}activateRoutes(n,t,r){const i=n.value,a=t?t.value:null;if(x2(i),i===a)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,s.children)}else this.activateChildRoutes(n,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const o=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(o.contexts),s.attachRef=o.componentRef,s.route=o.route.value,s.outlet&&s.outlet.attach(o.componentRef,o.route.value),x2(o.route.value),this.activateChildRoutes(n,null,s.children)}else{const o=ub(i.snapshot);s.attachRef=null,s.route=i,s.injector=o,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(n,null,s.children)}}else this.activateChildRoutes(n,null,r)}}class mW{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class Q0{constructor(n,t){this.component=n,this.route=t}}function vbe(e,n,t){const r=e._root;return db(r,n?n._root:null,t,[r.value])}function Sf(e,n){const t=Symbol(),r=n.get(e,t);return r===t?"function"!=typeof e||function Aae(e){return null!==nx(e)}(e)?n.get(e):e:r}function db(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Cf(n);return e.children.forEach(s=>{(function wbe(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=e.value,s=n?n.value:null,o=t?t.getContext(e.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){const l=function Cbe(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!Vu(e.url,n.url);case"pathParamsOrQueryParamsChange":return!Vu(e.url,n.url)||!bo(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!w2(e,n)||!bo(e.queryParams,n.queryParams);default:return!w2(e,n)}}(s,a,a.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new mW(r)):(a.data=s.data,a._resolvedData=s._resolvedData),db(e,n,a.component?o?o.children:null:t,r,i),l&&o&&o.outlet&&o.outlet.isActivated&&i.canDeactivateChecks.push(new Q0(o.outlet.component,s))}else s&&hb(n,o,i),i.canActivateChecks.push(new mW(r)),db(e,null,a.component?o?o.children:null:t,r,i)})(s,a[s.value.outlet],t,r.concat([s.value]),i),delete a[s.value.outlet]}),Object.entries(a).forEach(([s,o])=>hb(o,t.getContext(s),i)),i}function hb(e,n,t){const r=Cf(e),i=e.value;Object.entries(r).forEach(([a,s])=>{hb(s,i.component?n?n.children.getContext(a):null:n,t)}),t.canDeactivateChecks.push(new Q0(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}function pb(e){return"function"==typeof e}function gW(e){return e instanceof z0||"EmptyError"===e?.name}const J0=Symbol("INITIAL_VALUE");function If(){return ri(e=>Yy(e.map(n=>n.pipe(fr(1),ol(J0)))).pipe(tt(n=>{for(const t of n)if(!0!==t){if(t===J0)return J0;if(!1===t||t instanceof wf)return t}return!0}),Pn(n=>n!==J0),fr(1)))}function yW(e){return function Bie(...e){return Q$(e)}(mr(n=>{if(zu(n))throw uW(0,n)}),tt(n=>!0===n))}class ew{constructor(n){this.segmentGroup=n||null}}class bW{constructor(n){this.urlTree=n}}function Mf(e){return _f(new ew(e))}function _W(e){return _f(new bW(e))}class Hbe{constructor(n,t){this.urlSerializer=n,this.urlTree=t}noMatchError(n){return new oe(4002,!1)}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ue(r);if(i.numberOfChildren>1||!i.children[St])return _f(new oe(4e3,!1));i=i.children[St]}}applyRedirectCommands(n,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,r)}applyRedirectCreateUrlTree(n,t,r,i){const a=this.createSegmentGroup(n,t.root,r,i);return new wf(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const r={};return Object.entries(n).forEach(([i,a])=>{if("string"==typeof a&&a.startsWith(":")){const o=a.substring(1);r[i]=t[o]}else r[i]=a}),r}createSegmentGroup(n,t,r,i){const a=this.createSegments(n,t.segments,r,i);let s={};return Object.entries(t.children).forEach(([o,l])=>{s[o]=this.createSegmentGroup(n,l,r,i)}),new pn(a,s)}createSegments(n,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(n,a,i):this.findOrReturn(a,r))}findPosParam(n,t,r){const i=r[t.path.substring(1)];if(!i)throw new oe(4001,!1);return i}findOrReturn(n,t){let r=0;for(const i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}}const I2={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Wbe(e,n,t,r,i){const a=M2(e,n,t);return a.matched?(r=function pbe(e,n){return e.providers&&!e._injector&&(e._injector=QM(e.providers,n,`Route: ${e.path}`)),e._injector??n}(n,r),function Vbe(e,n,t,r){const i=n.canMatch;return i&&0!==i.length?Ue(i.map(s=>{const o=Sf(s,e);return lc(function Dbe(e){return e&&pb(e.canMatch)}(o)?o.canMatch(n,t):e.runInContext(()=>o(n,t)))})).pipe(If(),yW()):Ue(!0)}(r,n,t).pipe(tt(s=>!0===s?a:{...I2}))):Ue(a)}function M2(e,n,t){if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...I2}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(n.matcher||wye)(t,e,n);if(!i)return{...I2};const a={};Object.entries(i.posParams??{}).forEach(([o,l])=>{a[o]=l.path});const s=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function vW(e,n,t,r){return t.length>0&&function qbe(e,n,t){return t.some(r=>tw(e,n,r)&&Us(r)!==St)}(e,t,r)?{segmentGroup:new pn(n,Gbe(r,new pn(t,e.children))),slicedSegments:[]}:0===t.length&&function Kbe(e,n,t){return t.some(r=>tw(e,n,r))}(e,t,r)?{segmentGroup:new pn(e.segments,jbe(e,0,t,r,e.children)),slicedSegments:t}:{segmentGroup:new pn(e.segments,e.children),slicedSegments:t}}function jbe(e,n,t,r,i){const a={};for(const s of r)if(tw(e,t,s)&&!i[Us(s)]){const o=new pn([],{});a[Us(s)]=o}return{...i,...a}}function Gbe(e,n){const t={};t[St]=n;for(const r of e)if(""===r.path&&Us(r)!==St){const i=new pn([],{});t[Us(r)]=i}return t}function tw(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}class Qbe{constructor(n,t,r,i,a,s,o){this.injector=n,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=s,this.urlSerializer=o,this.allowRedirects=!0,this.applyRedirects=new Hbe(this.urlSerializer,this.urlTree)}noMatchError(n){return new oe(4002,!1)}recognize(){const n=vW(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,St).pipe(ll(t=>{if(t instanceof bW)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof ew?this.noMatchError(t):t}),tt(t=>{const r=new Y0([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},St,this.rootComponentType,null,{}),i=new cl(r,t),a=new oW("",i),s=function Uye(e,n,t=null,r=null){return YH(XH(e),n,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(a._root),{state:a,tree:s}}))}match(n){return this.processSegmentGroup(this.injector,this.config,n.root,St).pipe(ll(r=>{throw r instanceof ew?this.noMatchError(r):r}))}inheritParamsAndData(n){const t=n.value,r=sW(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),n.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(n,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,t,r):this.processSegment(n,t,r,r.segments,i,!0)}processChildren(n,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return ur(i).pipe(vf(a=>{const s=r.children[a],o=function ybe(e,n){const t=e.filter(r=>Us(r)===n);return t.push(...e.filter(r=>Us(r)!==n)),t}(t,a);return this.processSegmentGroup(n,o,s,a)}),function _ye(e,n){return jn(function bye(e,n,t,r,i){return(a,s)=>{let o=t,l=n,c=0;a.subscribe(In(s,u=>{const h=c++;l=o?e(l,u,h):(o=!0,u),r&&s.next(l)},i&&(()=>{o&&s.next(l),s.complete()})))}}(e,n,arguments.length>=2,!0))}((a,s)=>(a.push(...s),a)),U0(null),function vye(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Pn((i,a)=>e(i,a,r)):Go,u2(1),t?U0(n):RH(()=>new z0))}(),Lr(a=>{if(null===a)return Mf(r);const s=xW(a);return function Jbe(e){e.sort((n,t)=>n.value.outlet===St?-1:t.value.outlet===St?1:n.value.outlet.localeCompare(t.value.outlet))}(s),Ue(s)}))}processSegment(n,t,r,i,a,s){return ur(t).pipe(vf(o=>this.processSegmentAgainstRoute(o._injector??n,t,o,r,i,a,s).pipe(ll(l=>{if(l instanceof ew)return Ue(null);throw l}))),Bu(o=>!!o),ll(o=>{if(gW(o))return function Ybe(e,n,t){return 0===n.length&&!e.children[t]}(r,i,a)?Ue([]):Mf(r);throw o}))}processSegmentAgainstRoute(n,t,r,i,a,s,o){return function Xbe(e,n,t,r){return!!(Us(e)===r||r!==St&&tw(n,t,e))&&("**"===e.path||M2(n,e,t).matched)}(r,i,a,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,i,r,a,s,o):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,i,t,r,a,s):Mf(i):Mf(i)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,a,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,a,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,t,r,i){const a=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?_W(a):this.applyRedirects.lineralizeSegments(r,a).pipe(Lr(s=>{const o=new pn(s,{});return this.processSegment(n,t,o,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,t,r,i,a,s){const{matched:o,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=M2(t,i,a);if(!o)return Mf(t);const h=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,u);return i.redirectTo.startsWith("/")?_W(h):this.applyRedirects.lineralizeSegments(i,h).pipe(Lr(d=>this.processSegment(n,r,t,d.concat(c),s,!1)))}matchSegmentAgainstRoute(n,t,r,i,a,s){let o;if("**"===r.path){const l=i.length>0?$H(i).parameters:{};o=Ue({snapshot:new Y0(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wW(r),Us(r),r.component??r._loadedComponent??null,r,CW(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else o=Wbe(t,r,i,n).pipe(tt(({matched:l,consumedSegments:c,remainingSegments:u,parameters:h})=>l?{snapshot:new Y0(c,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wW(r),Us(r),r.component??r._loadedComponent??null,r,CW(r)),consumedSegments:c,remainingSegments:u}:null));return o.pipe(ri(l=>null===l?Mf(t):this.getChildConfig(n=r._injector??n,r,i).pipe(ri(({routes:c})=>{const u=r._loadedInjector??n,{snapshot:h,consumedSegments:d,remainingSegments:p}=l,{segmentGroup:f,slicedSegments:m}=vW(t,d,p,c);if(0===m.length&&f.hasChildren())return this.processChildren(u,c,f).pipe(tt(y=>null===y?null:[new cl(h,y)]));if(0===c.length&&0===m.length)return Ue([new cl(h,[])]);const g=Us(r)===a;return this.processSegment(u,c,f,m,g?St:a,!0).pipe(tt(y=>[new cl(h,y)]))}))))}getChildConfig(n,t,r){return t.children?Ue({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?Ue({routes:t._loadedRoutes,injector:t._loadedInjector}):function Bbe(e,n,t,r){const i=n.canLoad;return void 0===i||0===i.length?Ue(!0):Ue(i.map(s=>{const o=Sf(s,e);return lc(function Sbe(e){return e&&pb(e.canLoad)}(o)?o.canLoad(n,t):e.runInContext(()=>o(n,t)))})).pipe(If(),yW())}(n,t,r).pipe(Lr(i=>i?this.configLoader.loadChildren(n,t).pipe(mr(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function Ube(e){return _f(dW(!1,3))}())):Ue({routes:[],injector:n})}}function e_e(e){const n=e.value.routeConfig;return n&&""===n.path}function xW(e){const n=[],t=new Set;for(const r of e){if(!e_e(r)){n.push(r);continue}const i=n.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):n.push(r)}for(const r of t){const i=xW(r.children);n.push(new cl(r.value,i))}return n.filter(r=>!t.has(r))}function wW(e){return e.data||{}}function CW(e){return e.resolve||{}}function kW(e){return"string"==typeof e.title||null===e.title}function E2(e){return ri(n=>{const t=e(n);return t?ur(t).pipe(tt(()=>n)):Ue(n)})}const Ef=new ue("ROUTES");let D2=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Se(nU)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ue(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=lc(t.loadComponent()).pipe(tt(SW),mr(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Jy(()=>{this.componentLoaders.delete(t)})),i=new FH(r,()=>new je).pipe(c2());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ue({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(tt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,c;return Array.isArray(o)?c=o:(l=o.create(t).injector,c=l.get(Ef,[],Dt.Self|Dt.Optional).flat()),{routes:c.map(S2),injector:l}}),Jy(()=>{this.childrenLoaders.delete(r)})),s=new FH(a,()=>new je).pipe(c2());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(t){return lc(t()).pipe(tt(SW),Lr(r=>r instanceof d6||Array.isArray(r)?Ue(r):ur(this.compiler.compileModuleAsync(r))))}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function SW(e){return function o_e(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let nw=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new je,this.configLoader=Se(D2),this.environmentInjector=Se(ho),this.urlSerializer=Se(nb),this.rootContexts=Se(lb),this.inputBindingEnabled=null!==Se(Z0,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ue(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new tbe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new ebe(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new qi({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:sb,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Pn(r=>0!==r.id),tt(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),ri(r=>{let i=!1,a=!1;return Ue(r).pipe(mr(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ri(s=>{const o=t.browserUrlTree.toString(),l=!t.navigated||s.extractedUrl.toString()!==o||o!==t.currentUrlTree.toString();if(!l&&"reload"!==(s.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const u="";return this.events.next(new ob(s.id,t.serializeUrl(r.rawUrl),u,0)),t.rawUrlTree=s.rawUrl,s.resolve(null),ss}if(t.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return IW(s.source)&&(t.browserUrlTree=s.extractedUrl),Ue(s).pipe(ri(u=>{const h=this.transitions?.getValue();return this.events.next(new g2(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),h!==this.transitions?.getValue()?ss:Promise.resolve(u)}),function t_e(e,n,t,r,i,a){return Lr(s=>function Zbe(e,n,t,r,i,a,s="emptyOnly"){return new Qbe(e,n,t,r,i,s,a).recognize()}(e,n,t,r,s.extractedUrl,i,a).pipe(tt(({state:o,tree:l})=>({...s,targetSnapshot:o,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),mr(u=>{if(r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!u.extras.skipLocationChange){const d=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);t.setBrowserUrl(d,u)}t.browserUrlTree=u.urlAfterRedirects}const h=new Xye(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(l&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:u,extractedUrl:h,source:d,restoredState:p,extras:f}=s,m=new g2(u,this.urlSerializer.serialize(h),d,p);this.events.next(m);const g=aW(0,this.rootComponentType).snapshot;return Ue(r={...s,targetSnapshot:g,urlAfterRedirects:h,extras:{...f,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new ob(s.id,t.serializeUrl(r.extractedUrl),u,1)),t.rawUrlTree=s.rawUrl,s.resolve(null),ss}}),mr(s=>{const o=new Yye(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(o)}),tt(s=>r={...s,guards:vbe(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function Tbe(e,n){return Lr(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:s}}=t;return 0===s.length&&0===a.length?Ue({...t,guardsResult:!0}):function Nbe(e,n,t,r){return ur(e).pipe(Lr(i=>function $be(e,n,t,r,i){const a=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return a&&0!==a.length?Ue(a.map(o=>{const l=ub(n)??i,c=Sf(o,l);return lc(function Ebe(e){return e&&pb(e.canDeactivate)}(c)?c.canDeactivate(e,n,t,r):l.runInContext(()=>c(e,n,t,r))).pipe(Bu())})).pipe(If()):Ue(!0)}(i.component,i.route,t,n,r)),Bu(i=>!0!==i,!0))}(s,r,i,e).pipe(Lr(o=>o&&function kbe(e){return"boolean"==typeof e}(o)?function Obe(e,n,t,r){return ur(n).pipe(vf(i=>Zy(function Rbe(e,n){return null!==e&&n&&n(new nbe(e)),Ue(!0)}(i.route.parent,r),function Fbe(e,n){return null!==e&&n&&n(new ibe(e)),Ue(!0)}(i.route,r),function Lbe(e,n,t){const r=n[n.length-1],a=n.slice(0,n.length-1).reverse().map(s=>function xbe(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(s)).filter(s=>null!==s).map(s=>Qy(()=>Ue(s.guards.map(l=>{const c=ub(s.node)??t,u=Sf(l,c);return lc(function Mbe(e){return e&&pb(e.canActivateChild)}(u)?u.canActivateChild(r,e):c.runInContext(()=>u(r,e))).pipe(Bu())})).pipe(If())));return Ue(a).pipe(If())}(e,i.path,t),function Pbe(e,n,t){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return Ue(!0);const i=r.map(a=>Qy(()=>{const s=ub(n)??t,o=Sf(a,s);return lc(function Ibe(e){return e&&pb(e.canActivate)}(o)?o.canActivate(n,e):s.runInContext(()=>o(n,e))).pipe(Bu())}));return Ue(i).pipe(If())}(e,i.route,t))),Bu(i=>!0!==i,!0))}(r,a,e,n):Ue(o)),tt(o=>({...t,guardsResult:o})))})}(this.environmentInjector,s=>this.events.next(s)),mr(s=>{if(r.guardsResult=s.guardsResult,zu(s.guardsResult))throw uW(0,s.guardsResult);const o=new Zye(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(o)}),Pn(s=>!!s.guardsResult||(t.restoreHistory(s),this.cancelNavigationTransition(s,"",3),!1)),E2(s=>{if(s.guards.canActivateChecks.length)return Ue(s).pipe(mr(o=>{const l=new Qye(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(l)}),ri(o=>{let l=!1;return Ue(o).pipe(function n_e(e,n){return Lr(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ue(t);let a=0;return ur(i).pipe(vf(s=>function r_e(e,n,t,r){const i=e.routeConfig,a=e._resolve;return void 0!==i?.title&&!kW(i)&&(a[eb]=i.title),function i_e(e,n,t,r){const i=function a_e(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return Ue({});const a={};return ur(i).pipe(Lr(s=>function s_e(e,n,t,r){const i=ub(n)??r,a=Sf(e,i);return lc(a.resolve?a.resolve(n,t):i.runInContext(()=>a(n,t)))}(e[s],n,t,r).pipe(Bu(),mr(o=>{a[s]=o}))),u2(1),PH(a),ll(s=>gW(s)?ss:_f(s)))}(a,e,n,r).pipe(tt(s=>(e._resolvedData=s,e.data=sW(e,t).resolve,i&&kW(i)&&(e.data[eb]=i.title),null)))}(s.route,r,e,n)),mr(()=>a++),u2(1),Lr(s=>a===i.length?Ue(t):ss))})}(t.paramsInheritanceStrategy,this.environmentInjector),mr({next:()=>l=!0,complete:()=>{l||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",2))}}))}),mr(o=>{const l=new Jye(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(l)}))}),E2(s=>{const o=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(mr(u=>{l.component=u}),tt(()=>{})));for(const u of l.children)c.push(...o(u));return c};return Yy(o(s.targetSnapshot.root)).pipe(U0(),fr(1))}),E2(()=>this.afterPreactivation()),tt(s=>{const o=function ube(e,n,t){const r=cb(e,n._root,t?t._root:void 0);return new iW(r,n)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:o}}),mr(s=>{t.currentUrlTree=s.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),t.routerState=s.targetRouterState,"deferred"===t.urlUpdateStrategy&&(s.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,s),t.browserUrlTree=s.urlAfterRedirects)}),((e,n,t,r)=>tt(i=>(new _be(n,i.targetRouterState,i.currentRouterState,t,r).activate(e),i)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),fr(1),mr({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Uu(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Jy(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ll(s=>{if(a=!0,pW(s)){hW(s)||(t.navigated=!0,t.restoreHistory(r,!0));const o=new X0(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(o),hW(s)){const l=t.urlHandlingStrategy.merge(s.url,t.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||IW(r.source)};t.scheduleNavigation(l,sb,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const o=new y2(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(o);try{r.resolve(t.errorHandler(s))}catch(l){r.reject(l)}}return ss}))}))}cancelNavigationTransition(t,r,i){const a=new X0(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function IW(e){return e!==sb}let MW=(()=>{class e{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===St);return r}getResolvedTitleForRoute(t){return t.data[eb]}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:function(){return Se(l_e)},providedIn:"root"})}return e})(),l_e=(()=>{class e extends MW{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(IH))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),c_e=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:function(){return Se(d_e)},providedIn:"root"})}return e})();class u_e{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}let d_e=(()=>{class e extends u_e{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Ve(e)))(i||e)}}();static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const rw=new ue("",{providedIn:"root",factory:()=>({})});let h_e=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:function(){return Se(p_e)},providedIn:"root"})}return e})(),p_e=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var fb=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(fb||{});function EW(e,n){e.events.pipe(Pn(t=>t instanceof Uu||t instanceof X0||t instanceof y2||t instanceof ob),tt(t=>t instanceof Uu||t instanceof ob?fb.COMPLETE:t instanceof X0&&(0===t.code||1===t.code)?fb.REDIRECTING:fb.FAILED),Pn(t=>t!==fb.REDIRECTING),fr(1)).subscribe(()=>{n()})}function f_e(e){throw e}function m_e(e,n,t){return n.parse("/")}const g_e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},y_e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mi=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Se(tU),this.isNgZoneEnabled=!1,this.options=Se(rw,{optional:!0})||{},this.pendingTasks=Se($U),this.errorHandler=this.options.errorHandler||f_e,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||m_e,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Se(h_e),this.routeReuseStrategy=Se(c_e),this.titleStrategy=Se(MW),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Se(Ef,{optional:!0})?.flat()??[],this.navigationTransitions=Se(nw),this.urlSerializer=Se(nb),this.location=Se(Hy),this.componentInputBindingEnabled=!!Se(Z0,{optional:!0}),this.isNgZoneEnabled=Se(We)instanceof We&&We.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new wf,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=aW(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),sb,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(a.state=l)}const o=this.parseUrl(t);this.scheduleNavigation(o,r,s,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(S2),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:s,queryParamsHandling:o,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s;let h,u=null;switch(o){case"merge":u={...this.currentUrlTree.queryParams,...a};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=a||null}null!==u&&(u=this.removeEmptyProps(u));try{h=XH(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),h=this.currentUrlTree.root}return YH(h,t,u,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=zu(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,sb,null,r)}navigate(t,r={skipLocationChange:!1}){return function b_e(e){for(let n=0;n<e.length;n++)if(null==e[n])throw new oe(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...g_e}:!1===r?{...y_e}:r,zu(t))return VH(this.currentUrlTree,t,i);const a=this.parseUrl(t);return VH(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,s){if(this.disposed)return Promise.resolve(!1);let o,l,c;s?(o=s.resolve,l=s.reject,c=s.promise):c=new Promise((h,d)=>{o=h,l=d});const u=this.pendingTasks.add();return EW(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:o,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",a)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-(this.browserPageId??this.currentPageId);0!==a?this.location.historyGo(a):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===a&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class DW{}let x_e=(()=>{class e{constructor(t,r,i,a,s){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Pn(t=>t instanceof Uu),vf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=QM(a.providers,t,`Route: ${a.path}`));const s=a._injector??t,o=a._loadedInjector??s;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(s,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(o,a.children??a._loadedRoutes))}return ur(i).pipe(xp())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ue(null);const a=i.pipe(Lr(s=>null===s?Ue(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?ur([a,this.loader.loadComponent(r)]).pipe(xp()):a})}static#e=this.\u0275fac=function(r){return new(r||e)(Y(mi),Y(nU),Y(ho),Y(DW),Y(D2))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const T2=new ue("");let AW=(()=>{class e{constructor(t,r,i,a,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof g2?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Uu?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ob&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof nW&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new nW(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){Zp()};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();function ul(e,n){return{\u0275kind:e,\u0275providers:n}}function NW(){const e=Se(dr);return n=>{const t=e.get(ic);if(n!==t.components[0])return;const r=e.get(mi),i=e.get(OW);1===e.get(N2)&&r.initialNavigation(),e.get(FW,null,Dt.Optional)?.setUpPreloading(),e.get(T2,null,Dt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const OW=new ue("",{factory:()=>new je}),N2=new ue("",{providedIn:"root",factory:()=>1}),FW=new ue("");function S_e(e){return ul(0,[{provide:FW,useExisting:x_e},{provide:DW,useExisting:e}])}const RW=new ue("ROUTER_FORROOT_GUARD"),M_e=[Hy,{provide:nb,useClass:d2},mi,lb,{provide:kf,useFactory:function TW(e){return e.routerState.root},deps:[mi]},D2,[]];function E_e(){return new pU("Router",mi)}let PW=(()=>{class e{constructor(t){}static forRoot(t,r){return{ngModule:e,providers:[M_e,[],{provide:Ef,multi:!0,useValue:t},{provide:RW,useFactory:N_e,deps:[[mi,new Kl,new Vp]]},{provide:rw,useValue:r||{}},r?.useHash?{provide:Pu,useClass:Gfe}:{provide:Pu,useClass:UU},{provide:T2,useFactory:()=>{const e=Se(lge),n=Se(We),t=Se(rw),r=Se(nw),i=Se(nb);return t.scrollOffset&&e.setOffset(t.scrollOffset),new AW(i,r,e,n,t)}},r?.preloadingStrategy?S_e(r.preloadingStrategy).\u0275providers:[],{provide:pU,multi:!0,useFactory:E_e},r?.initialNavigation?O_e(r):[],r?.bindToComponentInputs?ul(8,[cW,{provide:Z0,useExisting:cW}]).\u0275providers:[],[{provide:LW,useFactory:NW},{provide:w0,multi:!0,useExisting:LW}]]}}static forChild(t){return{ngModule:e,providers:[{provide:Ef,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||e)(Y(RW,8))};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({})}return e})();function N_e(e){return"guarded"}function O_e(e){return["disabled"===e.initialNavigation?ul(3,[{provide:v0,multi:!0,useFactory:()=>{const n=Se(mi);return()=>{n.setUpLocationChangeListener()}}},{provide:N2,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?ul(2,[{provide:N2,useValue:0},{provide:v0,multi:!0,deps:[dr],useFactory:n=>{const t=n.get(Wfe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=n.get(mi),a=n.get(OW);EW(i,()=>{r(!0)}),n.get(nw).afterPreactivation=()=>(r(!0),a.closed?Ue(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const LW=new ue("");function $W(e,n,t,r,i,a,s){try{var o=e[a](s),l=o.value}catch(c){return void t(c)}o.done?n(l):Promise.resolve(l).then(r,i)}function R(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var a=e.apply(n,t);function s(l){$W(a,r,i,s,o,"next",l)}function o(l){$W(a,r,i,s,o,"throw",l)}s(void 0)})}}var R_e=Object.defineProperty,P_e=is(741),O2=(e,n)=>{for(var t in n)R_e(e,t,{get:n[t],enumerable:!0})};O2({},{Abs:()=>Nf,Acos:()=>Wu,Acosh:()=>ju,AdadeltaOptimizer:()=>$A,AdagradOptimizer:()=>BA,AdamOptimizer:()=>VA,AdamaxOptimizer:()=>zA,Add:()=>hc,AddN:()=>Gu,All:()=>Of,Any:()=>Ff,ArgMax:()=>Rf,ArgMin:()=>Pf,Asin:()=>qu,Asinh:()=>Ku,Atan:()=>Xu,Atan2:()=>Zu,Atanh:()=>Yu,AvgPool:()=>Qu,AvgPool3D:()=>Lf,AvgPool3DGrad:()=>xb,AvgPoolGrad:()=>vb,BackendWasm:()=>lQ,BatchMatMul:()=>Ju,BatchToSpaceND:()=>$f,Bincount:()=>Bf,BitwiseAnd:()=>Vf,BroadcastArgs:()=>wb,BroadcastTo:()=>e8,Callback:()=>v9,CallbackList:()=>u7,Cast:()=>ed,Ceil:()=>td,ClipByValue:()=>pc,Complex:()=>dw,ComplexAbs:()=>Cb,Concat:()=>zf,Conv2D:()=>nd,Conv2DBackpropFilter:()=>hw,Conv2DBackpropInput:()=>rd,Conv3D:()=>id,Conv3DBackpropFilterV2:()=>Uf,Conv3DBackpropInputV2:()=>Hf,Cos:()=>ad,Cosh:()=>sd,CropAndResize:()=>jf,Cumprod:()=>Wf,Cumsum:()=>od,CustomCallback:()=>h7,DataStorage:()=>aw,DenseBincount:()=>kb,DepthToSpace:()=>Gf,DepthwiseConv2dNative:()=>ld,DepthwiseConv2dNativeBackpropFilter:()=>pw,DepthwiseConv2dNativeBackpropInput:()=>fw,Diag:()=>Sb,Dilation2D:()=>cd,Dilation2DBackpropFilter:()=>Kf,Dilation2DBackpropInput:()=>qf,Draw:()=>mw,ENV:()=>$2,EarlyStopping:()=>w9,Einsum:()=>gw,Elu:()=>dd,EluGrad:()=>Xf,Environment:()=>QW,Equal:()=>Yf,Erf:()=>hd,Exp:()=>pd,ExpandDims:()=>Zf,Expm1:()=>fd,FFT:()=>yw,Fill:()=>Ib,FlipLeftRight:()=>Qf,Floor:()=>md,FloorDiv:()=>gd,FromPixels:()=>kw,FusedBatchNorm:()=>yd,FusedConv2D:()=>ch,FusedDepthwiseConv2D:()=>uh,GPGPUContext:()=>_C,GatherNd:()=>em,GatherV2:()=>Jf,GraphModel:()=>mO,Greater:()=>tm,GreaterEqual:()=>bd,History:()=>d7,IFFT:()=>bw,Identity:()=>_d,Imag:()=>_w,InputSpec:()=>xr,IsFinite:()=>vd,IsInf:()=>xd,IsNan:()=>wd,KernelBackend:()=>gb,LRN:()=>Id,LRNGrad:()=>lm,LayerVariable:()=>JG,LayersModel:()=>Cl,LeakyRelu:()=>Cd,Less:()=>nm,LessEqual:()=>rm,LinSpace:()=>im,Log:()=>kd,Log1p:()=>Sd,LogSoftmax:()=>n8,LogicalAnd:()=>am,LogicalNot:()=>sm,LogicalOr:()=>om,LogicalXor:()=>t8,LowerBound:()=>Eve,MathBackendCPU:()=>kO,MathBackendWebGL:()=>aF,MatrixBandPart:()=>Dve,Max:()=>Md,MaxPool:()=>Dd,MaxPool3D:()=>cm,MaxPool3DGrad:()=>Eb,MaxPoolGrad:()=>Mb,MaxPoolWithArgmax:()=>Db,Maximum:()=>Ed,Mean:()=>Ad,Min:()=>Td,Minimum:()=>Nd,MirrorPad:()=>Od,Mod:()=>Fd,MomentumOptimizer:()=>UA,Multinomial:()=>um,Multiply:()=>Rd,Neg:()=>dm,NonMaxSuppressionV3:()=>pm,NonMaxSuppressionV4:()=>fm,NonMaxSuppressionV5:()=>mm,NotEqual:()=>hm,OP_SCOPE_SUFFIX:()=>eD,OneHot:()=>Pd,OnesLike:()=>gm,Optimizer:()=>vl,OptimizerConstructors:()=>CG,Pack:()=>ym,PadV2:()=>Ld,Pool:()=>Ave,Pow:()=>$d,Prelu:()=>Bd,Prod:()=>Vd,RMSPropOptimizer:()=>HA,RNN:()=>kl,RaggedGather:()=>vw,RaggedRange:()=>xw,RaggedTensorToTensor:()=>ww,Range:()=>Ab,Rank:()=>j2,Real:()=>Cw,RealDiv:()=>ud,Reciprocal:()=>zd,Reduction:()=>Ri,Relu:()=>Ud,Relu6:()=>jd,Reshape:()=>bm,ResizeBilinear:()=>Wd,ResizeBilinearGrad:()=>vm,ResizeNearestNeighbor:()=>Hd,ResizeNearestNeighborGrad:()=>_m,Reverse:()=>Gd,RotateWithOffset:()=>Rm,Round:()=>qd,Rsqrt:()=>Kd,SGDOptimizer:()=>f1,ScatterNd:()=>xm,SearchSorted:()=>Cm,Select:()=>km,Selu:()=>Xd,Sequential:()=>z1,Sigmoid:()=>Jd,Sign:()=>Qd,Sin:()=>Yd,Sinh:()=>Zd,Slice:()=>Sm,Softmax:()=>rh,Softplus:()=>eh,SpaceToBatchND:()=>Im,SparseFillEmptyRows:()=>Tb,SparseReshape:()=>Em,SparseSegmentMean:()=>Nb,SparseSegmentSum:()=>Ob,SparseToDense:()=>Dm,SplitV:()=>Mm,Sqrt:()=>th,Square:()=>Fb,SquaredDifference:()=>ih,StaticRegexReplace:()=>Rb,Step:()=>mc,StridedSlice:()=>Am,StringNGrams:()=>Pb,StringSplit:()=>Lb,StringToHashBucketFast:()=>$b,Sub:()=>ah,Sum:()=>nh,SymbolicTensor:()=>Xs,Tan:()=>sh,Tanh:()=>oh,Tensor:()=>gt,TensorBuffer:()=>yr,TensorScatterUpdate:()=>wm,Tile:()=>fc,TopK:()=>Tm,Transform:()=>Nm,Transpose:()=>hl,Unique:()=>Bb,Unpack:()=>Om,UnsortedSegmentSum:()=>Vb,UpperBound:()=>Tve,Variable:()=>ph,ZerosLike:()=>Fm,_FusedMatMul:()=>lh,abs:()=>br,acos:()=>xD,acosh:()=>wD,add:()=>se,addN:()=>P8,all:()=>Rw,any:()=>Jb,argMax:()=>bh,argMin:()=>CD,asin:()=>kD,asinh:()=>SD,atan:()=>ID,atan2:()=>MD,atanh:()=>ED,avgPool:()=>gl,avgPool3d:()=>TD,backend:()=>nD,backend_util:()=>I,basicLSTMCell:()=>V8,batchNorm:()=>xh,batchNorm2d:()=>ND,batchNorm3d:()=>OD,batchNorm4d:()=>FD,batchToSpaceND:()=>r_,bincount:()=>RD,bitwiseAnd:()=>z8,booleanMaskAsync:()=>Aj,broadcastArgs:()=>U8,broadcastTo:()=>wh,broadcast_util:()=>zm,browser:()=>y_,buffer:()=>wt,callbacks:()=>INe,cast:()=>xe,ceil:()=>PD,clipByValue:()=>gi,clone:()=>xo,complex:()=>pl,concat:()=>fn,concat1d:()=>LD,concat2d:()=>$D,concat3d:()=>BD,concat4d:()=>VD,constraints:()=>r7,conv1d:()=>Pw,conv2d:()=>Oi,conv2dTranspose:()=>Lw,conv3d:()=>UD,conv3dTranspose:()=>HD,copyRegisteredKernels:()=>Rve,cos:()=>i_,cosh:()=>$w,cosineWindow:()=>c1,cumprod:()=>a_,cumsum:()=>Bw,customGrad:()=>Co,data:()=>tq,denseBincount:()=>Vw,deprecationWarn:()=>tD,depthToSpace:()=>WD,depthwiseConv2d:()=>Ch,deregisterOp:()=>DNe,device_util:()=>Yb,diag:()=>W8,dilation2d:()=>jD,disableDeprecationWarnings:()=>pxe,dispose:()=>at,disposeVariables:()=>fxe,div:()=>Te,divNoNan:()=>GD,dot:()=>qD,dropout:()=>EA,einsum:()=>kh,elu:()=>Um,enableDebugMode:()=>hxe,enableProdMode:()=>dxe,enclosingPowerOfTwo:()=>DA,engine:()=>ys,ensureShape:()=>G8,env:()=>Q,equal:()=>_a,erf:()=>KD,euclideanNorm:()=>ZD,exp:()=>yi,expandDims:()=>jr,expm1:()=>QD,eye:()=>zw,fft:()=>m_,fill:()=>ba,findBackend:()=>vxe,findBackendFactory:()=>xxe,floor:()=>jm,floorDiv:()=>Fw,forceHalfFloat:()=>RX,fused:()=>eg,gather:()=>Gm,gatherND:()=>Fj,gather_util:()=>QA,getBackend:()=>v8,getGradient:()=>z2,getKernel:()=>Ub,getKernelsForBackend:()=>Sw,getThreadsCount:()=>HZe,gpgpu_util:()=>cX,grad:()=>Jwe,grads:()=>e1e,greater:()=>Fi,greaterEqual:()=>bl,ifft:()=>Jm,imag:()=>s_,image:()=>ja,inTopKAsync:()=>Rj,initializers:()=>s7,input:()=>N7,io:()=>ai,irfft:()=>t1,isFinite:()=>JD,isInf:()=>eA,isNaN:()=>tA,keep:()=>Ar,kernel_impls:()=>Mo,layers:()=>o7,leakyRelu:()=>o_,less:()=>qm,lessEqual:()=>kc,linalg:()=>PA,linspace:()=>Z8,loadGraphModel:()=>ROe,loadGraphModelSync:()=>POe,loadLayersModel:()=>wAe,localResponseNormalization:()=>nA,log:()=>xa,log1p:()=>l_,logSigmoid:()=>rA,logSoftmax:()=>Hw,logSumExp:()=>c_,logicalAnd:()=>_s,logicalNot:()=>u_,logicalOr:()=>Ww,logicalXor:()=>iA,losses:()=>Xj,lowerBound:()=>J8,matMul:()=>Ct,math:()=>lG,max:()=>Ha,maxPool:()=>Gr,maxPool3d:()=>aA,maxPoolWithArgmax:()=>ej,maximum:()=>ko,mean:()=>qn,memory:()=>Tw,meshgrid:()=>tj,metrics:()=>y9,min:()=>Hm,minimum:()=>Sc,mirrorPad:()=>sA,mod:()=>oA,model:()=>SAe,models:()=>b9,moments:()=>d_,movingAverage:()=>Tj,mul:()=>U,multiRNNCell:()=>nj,multinomial:()=>rj,neg:()=>Dn,nextFrame:()=>eT,norm:()=>Wm,notEqual:()=>Mh,oneHot:()=>Km,ones:()=>Xi,onesLike:()=>wa,op:()=>V,outerProduct:()=>ij,pad:()=>js,pad1d:()=>aj,pad2d:()=>sj,pad3d:()=>oj,pad4d:()=>lj,pool:()=>lA,pow:()=>yl,prelu:()=>p_,print:()=>vD,prod:()=>cA,profile:()=>mxe,raggedGather:()=>cj,raggedRange:()=>uj,raggedTensorToTensor:()=>dj,rand:()=>hj,randomGamma:()=>gj,randomNormal:()=>qw,randomStandardNormal:()=>yj,randomUniform:()=>Ic,randomUniformInt:()=>bj,range:()=>Eh,ready:()=>bxe,real:()=>Xm,reciprocal:()=>gA,registerBackend:()=>Nw,registerCallbackConstructor:()=>MAe,registerGradient:()=>r8,registerKernel:()=>Hb,registerOp:()=>ENe,regularizers:()=>_9,relu:()=>an,relu6:()=>Kw,removeBackend:()=>_xe,reshape:()=>H,reverse:()=>Wa,reverse1d:()=>_j,reverse2d:()=>vj,reverse3d:()=>xj,reverse4d:()=>wj,rfft:()=>g_,round:()=>Xw,rsqrt:()=>Yw,scalar:()=>He,scatterND:()=>Nj,scatter_util:()=>a1,searchSorted:()=>Gw,selu:()=>Zw,separableConv2d:()=>Ym,sequential:()=>IAe,serialization:()=>fe,setBackend:()=>yxe,setPlatform:()=>wxe,setThreadsCount:()=>UZe,setWasmPath:()=>VZe,setWasmPaths:()=>zZe,setWebGLContext:()=>TK,setdiff1dAsync:()=>Cj,shared:()=>SO,sigmoid:()=>bs,sign:()=>bA,signal:()=>Kj,sin:()=>Qw,sinh:()=>Jw,slice:()=>At,slice1d:()=>f_,slice2d:()=>e1,slice3d:()=>Zm,slice4d:()=>Qm,slice_util:()=>Tr,softmax:()=>Mc,softplus:()=>Ih,spaceToBatchND:()=>h_,sparse:()=>Yj,sparseToDense:()=>Oj,spectral:()=>qj,split:()=>Yi,sqrt:()=>ii,square:()=>gn,squaredDifference:()=>n1,squeeze:()=>Ec,stack:()=>vr,step:()=>Dh,stridedSlice:()=>_A,string:()=>Zj,sub:()=>Ee,sum:()=>Re,sumOutType:()=>Aw,tan:()=>vA,tanh:()=>vh,tensor:()=>Ti,tensor1d:()=>Qt,tensor2d:()=>So,tensor3d:()=>r1,tensor4d:()=>Dc,tensor5d:()=>kj,tensor6d:()=>Sj,tensorScatterUpdate:()=>Mj,tensor_util:()=>Ws,test_util:()=>pj,tidy:()=>G,tile:()=>va,time:()=>gxe,topk:()=>wA,train:()=>Th,transpose:()=>kt,truncatedNormal:()=>o1,unique:()=>CA,unregisterGradient:()=>Fve,unregisterKernel:()=>Ove,unsortedSegmentSum:()=>l1,unstack:()=>tr,upcastType:()=>za,upperBound:()=>Ej,util:()=>w,valueAndGrad:()=>t1e,valueAndGrads:()=>n1e,variable:()=>kA,variableGrads:()=>Q8,version:()=>YZe,version_converter:()=>$Oe,version_core:()=>IIe,version_cpu:()=>BRe,version_layers:()=>RT,version_wasm:()=>WZe,version_webgl:()=>EVe,webgl:()=>DVe,webgl_util:()=>AK,where:()=>Wr,whereAsync:()=>IA,zeros:()=>Kn,zerosLike:()=>Ft});var $_e=Object.create,F2=Object.defineProperty,B_e=Object.getOwnPropertyDescriptor,V_e=Object.getOwnPropertyNames,z_e=Object.getPrototypeOf,U_e=Object.prototype.hasOwnProperty,gr=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),it=(e,n)=>{for(var t in n)F2(e,t,{get:n[t],enumerable:!0})},cc=(e,n,t)=>(t=null!=e?$_e(z_e(e)):{},((e,n,t,r)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let i of V_e(n))!U_e.call(e,i)&&undefined!==i&&F2(e,i,{get:()=>n[i],enumerable:!(r=B_e(n,i))||r.enumerable});return e})(!n&&e&&e.__esModule?t:F2(t,"default",{value:e,enumerable:!0}),e)),W_e=gr((e,n)=>{n.exports=r;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function r(k,P,j){this.low=0|k,this.high=0|P,this.unsigned=!!j}function i(k){return!0===(k&&k.__isLong__)}Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=i;var a={},s={};function o(k,P){var j,Z,z;return P?(z=0<=(k>>>=0)&&k<256)&&(Z=s[k])?Z:(j=c(k,(0|k)<0?-1:0,!0),z&&(s[k]=j),j):(z=-128<=(k|=0)&&k<128)&&(Z=a[k])?Z:(j=c(k,k<0?-1:0,!1),z&&(a[k]=j),j)}function l(k,P){if(isNaN(k))return P?v:_;if(P){if(k<0)return v;if(k>=g)return N}else{if(k<=-y)return F;if(k+1>=y)return D}return k<0?l(-k,P).neg():c(k%m|0,k/m|0,P)}function c(k,P,j){return new r(k,P,j)}r.fromInt=o,r.fromNumber=l,r.fromBits=c;var u=Math.pow;function h(k,P,j){if(0===k.length)throw Error("empty string");if("NaN"===k||"Infinity"===k||"+Infinity"===k||"-Infinity"===k)return _;if("number"==typeof P?(j=P,P=!1):P=!!P,(j=j||10)<2||36<j)throw RangeError("radix");var Z;if((Z=k.indexOf("-"))>0)throw Error("interior hyphen");if(0===Z)return h(k.substring(1),P,j).neg();for(var z=l(u(j,8)),W=_,q=0;q<k.length;q+=8){var J=Math.min(8,k.length-q),te=parseInt(k.substring(q,q+J),j);if(J<8){var ie=l(u(j,J));W=W.mul(ie).add(l(te))}else W=(W=W.mul(z)).add(l(te))}return W.unsigned=P,W}function d(k,P){return"number"==typeof k?l(k,P):"string"==typeof k?h(k,P):c(k.low,k.high,"boolean"==typeof P?P:k.unsigned)}r.fromString=h,r.fromValue=d;var m=4294967296,g=m*m,y=g/2,b=o(1<<24),_=o(0);r.ZERO=_;var v=o(0,!0);r.UZERO=v;var x=o(1);r.ONE=x;var S=o(1,!0);r.UONE=S;var M=o(-1);r.NEG_ONE=M;var D=c(-1,2147483647,!1);r.MAX_VALUE=D;var N=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=N;var F=c(0,-2147483648,!1);r.MIN_VALUE=F;var O=r.prototype;O.toInt=function(){return this.unsigned?this.low>>>0:this.low},O.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},O.toString=function(k){if((k=k||10)<2||36<k)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(F)){var P=l(k),j=this.div(P),Z=j.mul(P).sub(this);return j.toString(k)+Z.toInt().toString(k)}return"-"+this.neg().toString(k)}for(var z=l(u(k,6),this.unsigned),W=this,q="";;){var J=W.div(z),ie=(W.sub(J.mul(z)).toInt()>>>0).toString(k);if((W=J).isZero())return ie+q;for(;ie.length<6;)ie="0"+ie;q=""+ie+q}},O.getHighBits=function(){return this.high},O.getHighBitsUnsigned=function(){return this.high>>>0},O.getLowBits=function(){return this.low},O.getLowBitsUnsigned=function(){return this.low>>>0},O.getNumBitsAbs=function(){if(this.isNegative())return this.eq(F)?64:this.neg().getNumBitsAbs();for(var k=0!=this.high?this.high:this.low,P=31;P>0&&!(k&1<<P);P--);return 0!=this.high?P+33:P+1},O.isZero=function(){return 0===this.high&&0===this.low},O.eqz=O.isZero,O.isNegative=function(){return!this.unsigned&&this.high<0},O.isPositive=function(){return this.unsigned||this.high>=0},O.isOdd=function(){return 1==(1&this.low)},O.isEven=function(){return 0==(1&this.low)},O.equals=function(k){return i(k)||(k=d(k)),(this.unsigned===k.unsigned||this.high>>>31!=1||k.high>>>31!=1)&&this.high===k.high&&this.low===k.low},O.eq=O.equals,O.notEquals=function(k){return!this.eq(k)},O.neq=O.notEquals,O.ne=O.notEquals,O.lessThan=function(k){return this.comp(k)<0},O.lt=O.lessThan,O.lessThanOrEqual=function(k){return this.comp(k)<=0},O.lte=O.lessThanOrEqual,O.le=O.lessThanOrEqual,O.greaterThan=function(k){return this.comp(k)>0},O.gt=O.greaterThan,O.greaterThanOrEqual=function(k){return this.comp(k)>=0},O.gte=O.greaterThanOrEqual,O.ge=O.greaterThanOrEqual,O.compare=function(k){if(i(k)||(k=d(k)),this.eq(k))return 0;var P=this.isNegative(),j=k.isNegative();return P&&!j?-1:!P&&j?1:this.unsigned?k.high>>>0>this.high>>>0||k.high===this.high&&k.low>>>0>this.low>>>0?-1:1:this.sub(k).isNegative()?-1:1},O.comp=O.compare,O.negate=function(){return!this.unsigned&&this.eq(F)?F:this.not().add(x)},O.neg=O.negate,O.add=function(k){i(k)||(k=d(k));var ie=0,pe=0,le=0,he=0;return le+=(he+=(65535&this.low)+(65535&k.low))>>>16,pe+=(le+=(this.low>>>16)+(k.low>>>16))>>>16,ie+=(pe+=(65535&this.high)+(65535&k.high))>>>16,ie+=(this.high>>>16)+(k.high>>>16),c((le&=65535)<<16|(he&=65535),(ie&=65535)<<16|(pe&=65535),this.unsigned)},O.subtract=function(k){return i(k)||(k=d(k)),this.add(k.neg())},O.sub=O.subtract,O.multiply=function(k){if(this.isZero())return _;if(i(k)||(k=d(k)),t)return c(t.mul(this.low,this.high,k.low,k.high),t.get_high(),this.unsigned);if(k.isZero())return _;if(this.eq(F))return k.isOdd()?F:_;if(k.eq(F))return this.isOdd()?F:_;if(this.isNegative())return k.isNegative()?this.neg().mul(k.neg()):this.neg().mul(k).neg();if(k.isNegative())return this.mul(k.neg()).neg();if(this.lt(b)&&k.lt(b))return l(this.toNumber()*k.toNumber(),this.unsigned);var Z=65535&this.high,z=this.low>>>16,W=65535&this.low,J=65535&k.high,te=k.low>>>16,ie=65535&k.low,pe=0,le=0,he=0,_e=0;return he+=(_e+=W*ie)>>>16,le+=(he+=z*ie)>>>16,he&=65535,le+=(he+=W*te)>>>16,pe+=(le+=Z*ie)>>>16,le&=65535,pe+=(le+=z*te)>>>16,le&=65535,pe+=(le+=W*J)>>>16,pe+=(this.high>>>16)*ie+Z*te+z*J+W*(k.high>>>16),c((he&=65535)<<16|(_e&=65535),(pe&=65535)<<16|(le&=65535),this.unsigned)},O.mul=O.multiply,O.divide=function(k){if(i(k)||(k=d(k)),k.isZero())throw Error("division by zero");var j,Z,z;if(t)return this.unsigned||-2147483648!==this.high||-1!==k.low||-1!==k.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,k.low,k.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:_;if(this.unsigned){if(k.unsigned||(k=k.toUnsigned()),k.gt(this))return v;if(k.gt(this.shru(1)))return S;z=v}else{if(this.eq(F))return k.eq(x)||k.eq(M)?F:k.eq(F)?x:(j=this.shr(1).div(k).shl(1)).eq(_)?k.isNegative()?x:M:(Z=this.sub(k.mul(j)),z=j.add(Z.div(k)));if(k.eq(F))return this.unsigned?v:_;if(this.isNegative())return k.isNegative()?this.neg().div(k.neg()):this.neg().div(k).neg();if(k.isNegative())return this.div(k.neg()).neg();z=_}for(Z=this;Z.gte(k);){j=Math.max(1,Math.floor(Z.toNumber()/k.toNumber()));for(var q=Math.ceil(Math.log(j)/Math.LN2),J=q<=48?1:u(2,q-48),te=l(j),ie=te.mul(k);ie.isNegative()||ie.gt(Z);)ie=(te=l(j-=J,this.unsigned)).mul(k);te.isZero()&&(te=x),z=z.add(te),Z=Z.sub(ie)}return z},O.div=O.divide,O.modulo=function(k){return i(k)||(k=d(k)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,k.low,k.high),t.get_high(),this.unsigned):this.sub(this.div(k).mul(k))},O.mod=O.modulo,O.rem=O.modulo,O.not=function(){return c(~this.low,~this.high,this.unsigned)},O.and=function(k){return i(k)||(k=d(k)),c(this.low&k.low,this.high&k.high,this.unsigned)},O.or=function(k){return i(k)||(k=d(k)),c(this.low|k.low,this.high|k.high,this.unsigned)},O.xor=function(k){return i(k)||(k=d(k)),c(this.low^k.low,this.high^k.high,this.unsigned)},O.shiftLeft=function(k){return i(k)&&(k=k.toInt()),0==(k&=63)?this:k<32?c(this.low<<k,this.high<<k|this.low>>>32-k,this.unsigned):c(0,this.low<<k-32,this.unsigned)},O.shl=O.shiftLeft,O.shiftRight=function(k){return i(k)&&(k=k.toInt()),0==(k&=63)?this:k<32?c(this.low>>>k|this.high<<32-k,this.high>>k,this.unsigned):c(this.high>>k-32,this.high>=0?0:-1,this.unsigned)},O.shr=O.shiftRight,O.shiftRightUnsigned=function(k){if(i(k)&&(k=k.toInt()),0==(k&=63))return this;var P=this.high;return k<32?c(this.low>>>k|P<<32-k,P>>>k,this.unsigned):c(32===k?P:P>>>k-32,0,this.unsigned)},O.shru=O.shiftRightUnsigned,O.shr_u=O.shiftRightUnsigned,O.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},O.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},O.toBytes=function(k){return k?this.toBytesLE():this.toBytesBE()},O.toBytesLE=function(){var k=this.high,P=this.low;return[255&P,P>>>8&255,P>>>16&255,P>>>24,255&k,k>>>8&255,k>>>16&255,k>>>24]},O.toBytesBE=function(){var k=this.high,P=this.low;return[k>>>24,k>>>16&255,k>>>8&255,255&k,P>>>24,P>>>16&255,P>>>8&255,255&P]},r.fromBytes=function(k,P,j){return j?r.fromBytesLE(k,P):r.fromBytesBE(k,P)},r.fromBytesLE=function(k,P){return new r(k[0]|k[1]<<8|k[2]<<16|k[3]<<24,k[4]|k[5]<<8|k[6]<<16|k[7]<<24,P)},r.fromBytesBE=function(k,P){return new r(k[4]<<24|k[5]<<16|k[6]<<8|k[7],k[0]<<24|k[1]<<16|k[2]<<8|k[3],P)}}),j_e=gr(()=>{}),G_e=gr(()=>{}),q_e=gr((e,n)=>{!function(t,r,i){function a(c){var u=this,h=function l(){var c=4022871197;return function(h){h=String(h);for(var d=0;d<h.length;d++){var p=.02519603282416938*(c+=h.charCodeAt(d));p-=c=p>>>0,c=(p*=c)>>>0,c+=4294967296*(p-=c)}return 2.3283064365386963e-10*(c>>>0)}}();u.next=function(){var d=2091639*u.s0+2.3283064365386963e-10*u.c;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=0|d)},u.c=1,u.s0=h(" "),u.s1=h(" "),u.s2=h(" "),u.s0-=h(c),u.s0<0&&(u.s0+=1),u.s1-=h(c),u.s1<0&&(u.s1+=1),u.s2-=h(c),u.s2<0&&(u.s2+=1),h=null}function s(c,u){return u.c=c.c,u.s0=c.s0,u.s1=c.s1,u.s2=c.s2,u}function o(c,u){var h=new a(c),d=u&&u.state,p=h.next;return p.int32=function(){return 4294967296*h.next()|0},p.double=function(){return p()+11102230246251565e-32*(2097152*p()|0)},p.quick=p,d&&("object"==typeof d&&s(d,h),p.state=function(){return s(h,{})}),p}r&&r.exports?r.exports=o:i&&i.amd?i(function(){return o}):this.alea=o}(0,"object"==typeof n&&n,"function"==typeof define&&define)}),K_e=gr((e,n)=>{!function(t,r,i){function a(l){var c=this,u="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var d=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^d^d>>>8},l===(0|l)?c.x=l:u+=l;for(var h=0;h<u.length+64;h++)c.x^=0|u.charCodeAt(h),c.next()}function s(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c}function o(l,c){var u=new a(l),h=c&&c.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do{var m=((u.next()>>>11)+(u.next()>>>0)/4294967296)/(1<<21)}while(0===m);return m},d.int32=u.next,d.quick=d,h&&("object"==typeof h&&s(h,u),d.state=function(){return s(u,{})}),d}r&&r.exports?r.exports=o:i&&i.amd?i(function(){return o}):this.xor128=o}(0,"object"==typeof n&&n,"function"==typeof define&&define)}),X_e=gr((e,n)=>{!function(t,r,i){function a(l){var c=this,u="";c.next=function(){var d=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^d^d<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,l===(0|l)?c.x=l:u+=l;for(var h=0;h<u.length+64;h++)c.x^=0|u.charCodeAt(h),h==u.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function s(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c.v=l.v,c.d=l.d,c}function o(l,c){var u=new a(l),h=c&&c.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do{var m=((u.next()>>>11)+(u.next()>>>0)/4294967296)/(1<<21)}while(0===m);return m},d.int32=u.next,d.quick=d,h&&("object"==typeof h&&s(h,u),d.state=function(){return s(u,{})}),d}r&&r.exports?r.exports=o:i&&i.amd?i(function(){return o}):this.xorwow=o}(0,"object"==typeof n&&n,"function"==typeof define&&define)}),Y_e=gr((e,n)=>{!function(t,r,i){function a(l){var c=this;c.next=function(){var p,f,h=c.x,d=c.i;return p=h[d],f=(p^=p>>>7)^p<<24,f^=(p=h[d+1&7])^p>>>10,f^=(p=h[d+3&7])^p>>>3,f^=(p=h[d+4&7])^p<<7,p=h[d+7&7],h[d]=f^=(p^=p<<13)^p<<9,c.i=d+1&7,f},function u(h,d){var p,m=[];if(d===(0|d))m[0]=d;else for(d=""+d,p=0;p<d.length;++p)m[7&p]=m[7&p]<<15^d.charCodeAt(p)+m[p+1&7]<<13;for(;m.length<8;)m.push(0);for(p=0;p<8&&0===m[p];++p);for(8==p&&(m[7]=-1),h.x=m,h.i=0,p=256;p>0;--p)h.next()}(c,l)}function s(l,c){return c.x=l.x.slice(),c.i=l.i,c}function o(l,c){null==l&&(l=+new Date);var u=new a(l),h=c&&c.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do{var m=((u.next()>>>11)+(u.next()>>>0)/4294967296)/(1<<21)}while(0===m);return m},d.int32=u.next,d.quick=d,h&&(h.x&&s(h,u),d.state=function(){return s(u,{})}),d}r&&r.exports?r.exports=o:i&&i.amd?i(function(){return o}):this.xorshift7=o}(0,"object"==typeof n&&n,"function"==typeof define&&define)}),Z_e=gr((e,n)=>{!function(t,r,i){function a(l){var c=this;c.next=function(){var f,m,h=c.w,d=c.X,p=c.i;return c.w=h=h+1640531527|0,m=d[p+34&127],f=d[p=p+1&127],m^=m<<13,f^=f<<17,m=d[p]=(m^=m>>>15)^(f^=f>>>12),c.i=p,m+(h^h>>>16)|0},function u(h,d){var p,f,m,g,y,b=[],_=128;for(d===(0|d)?(f=d,d=null):(d+="\0",f=0,_=Math.max(_,d.length)),m=0,g=-32;g<_;++g)d&&(f^=d.charCodeAt((g+32)%d.length)),0===g&&(y=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,g>=0&&(m=0==(p=b[127&g]^=f+(y=y+1640531527|0))?m+1:0);for(m>=128&&(b[127&(d&&d.length||0)]=-1),m=127,g=512;g>0;--g)f=b[m+34&127],p=b[m=m+1&127],f^=f<<13,p^=p<<17,b[m]=(f^=f>>>15)^(p^=p>>>12);h.w=y,h.X=b,h.i=m}(c,l)}function s(l,c){return c.i=l.i,c.w=l.w,c.X=l.X.slice(),c}function o(l,c){null==l&&(l=+new Date);var u=new a(l),h=c&&c.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do{var m=((u.next()>>>11)+(u.next()>>>0)/4294967296)/(1<<21)}while(0===m);return m},d.int32=u.next,d.quick=d,h&&(h.X&&s(h,u),d.state=function(){return s(u,{})}),d}r&&r.exports?r.exports=o:i&&i.amd?i(function(){return o}):this.xor4096=o}(0,"object"==typeof n&&n,"function"==typeof define&&define)}),Q_e=gr((e,n)=>{!function(t,r,i){function a(l){var c=this,u="";c.next=function(){var d=c.b,p=c.c,f=c.d,m=c.a;return d=d<<25^d>>>7^p,p=p-f|0,f=f<<24^f>>>8^m,m=m-d|0,c.b=d=d<<20^d>>>12^p,c.c=p=p-f|0,c.d=f<<16^p>>>16^m,c.a=m-d|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,l===Math.floor(l)?(c.a=l/4294967296|0,c.b=0|l):u+=l;for(var h=0;h<u.length+20;h++)c.b^=0|u.charCodeAt(h),c.next()}function s(l,c){return c.a=l.a,c.b=l.b,c.c=l.c,c.d=l.d,c}function o(l,c){var u=new a(l),h=c&&c.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do{var m=((u.next()>>>11)+(u.next()>>>0)/4294967296)/(1<<21)}while(0===m);return m},d.int32=u.next,d.quick=d,h&&("object"==typeof h&&s(h,u),d.state=function(){return s(u,{})}),d}r&&r.exports?r.exports=o:i&&i.amd?i(function(){return o}):this.tychei=o}(0,"object"==typeof n&&n,"function"==typeof define&&define)}),J_e=gr(()=>{}),eve=gr((e,n)=>{!function(t,r,i){var p,a=256,l="random",c=i.pow(a,6),u=i.pow(2,52),h=2*u,d=a-1;function f(x,S,M){var D=[],N=b(y((S=1==S?{entropy:!0}:S||{}).entropy?[x,v(r)]:x??function _(){try{var x;return p&&(x=p.randomBytes)?x=x(a):(x=new Uint8Array(a),(t.crypto||t.msCrypto).getRandomValues(x)),v(x)}catch{var S=t.navigator,M=S&&S.plugins;return[+new Date,t,M,t.screen,v(r)]}}(),3),D),F=new m(D),O=function(){for(var k=F.g(6),P=c,j=0;k<u;)k=(k+j)*a,P*=a,j=F.g(1);for(;k>=h;)k/=2,P/=2,j>>>=1;return(k+j)/P};return O.int32=function(){return 0|F.g(4)},O.quick=function(){return F.g(4)/4294967296},O.double=O,b(v(F.S),r),(S.pass||M||function(k,P,j,Z){return Z&&(Z.S&&g(Z,F),k.state=function(){return g(F,{})}),j?(i[l]=k,P):k})(O,N,"global"in S?S.global:this==i,S.state)}function m(x){var S,M=x.length,D=this,N=0,F=D.i=D.j=0,O=D.S=[];for(M||(x=[M++]);N<a;)O[N]=N++;for(N=0;N<a;N++)O[N]=O[F=d&F+x[N%M]+(S=O[N])],O[F]=S;(D.g=function(k){for(var P,j=0,Z=D.i,z=D.j,W=D.S;k--;)P=W[Z=d&Z+1],j=j*a+W[d&(W[Z]=W[z=d&z+P])+(W[z]=P)];return D.i=Z,D.j=z,j})(a)}function g(x,S){return S.i=x.i,S.j=x.j,S.S=x.S.slice(),S}function y(x,S){var N,M=[],D=typeof x;if(S&&"object"==D)for(N in x)try{M.push(y(x[N],S-1))}catch{}return M.length?M:"string"==D?x:x+"\0"}function b(x,S){for(var D,M=x+"",N=0;N<M.length;)S[d&N]=d&(D^=19*S[d&N])+M.charCodeAt(N++);return v(S)}function v(x){return String.fromCharCode.apply(0,x)}if(b(i.random(),r),"object"==typeof n&&n.exports){n.exports=f;try{p=J_e()}catch{}}else"function"==typeof define&&is.amdO?define(function(){return f}):i["seed"+l]=f}(typeof self<"u"?self:e,[],Math)}),iw=gr((e,n)=>{var t=q_e(),r=K_e(),i=X_e(),a=Y_e(),s=Z_e(),o=Q_e(),l=eve();l.alea=t,l.xor128=r,l.xorwow=i,l.xorshift7=a,l.xor4096=s,l.tychei=o,n.exports=l}),BW=gr(()=>{}),R2=gr(()=>{}),VW=gr(()=>{}),tve=gr(()=>{}),nve=gr(()=>{}),rve=gr(()=>{}),ive=gr((e,n)=>{var r,t=(r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(r=r||__filename),function(i){function s(){return be.buffer!=yt&&vn(be.buffer),Da}function l(){return be.buffer!=yt&&vn(be.buffer),ui}function c(){return be.buffer!=yt&&vn(be.buffer),ra}function h(){return be.buffer!=yt&&vn(be.buffer),ia}var p,f,m,d=typeof(i=i||{})<"u"?i:{};d.ready=new Promise(function(L,ee){p=L,f=ee}),typeof process<"u"&&process.listeners&&(m={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var F,O,k,g=Object.assign({},d),y=[],_=(L,ee)=>{throw ee},v="object"==typeof window,x="function"==typeof importScripts,S="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,M=d.ENVIRONMENT_IS_PTHREAD||!1,D="";function N(L){return d.locateFile?d.locateFile(L,D):D+L}if(S){var Z=R2(),z=VW();let L;D=x?z.dirname(D)+"/":__dirname+"/",F=(ee,ke)=>(ee=Ug(ee)?new URL(ee):z.normalize(ee),Z.readFileSync(ee,ke?void 0:"utf8")),k=ee=>{var ke=F(ee,!0);return ke.buffer||(ke=new Uint8Array(ke)),ke},O=(ee,ke,Xe)=>{ee=Ug(ee)?new URL(ee):z.normalize(ee),Z.readFile(ee,function(bt,dt){bt?Xe(bt):ke(dt.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),y=process.argv.slice(2),process.on("uncaughtException",function(ee){if(!(ee instanceof yp))throw ee}),process.on("unhandledRejection",function(ee){throw ee}),_=(ee,ke)=>{if(As())throw process.exitCode=ee,ke;(function j(L){L instanceof yp||te("exiting due to exception: "+L)})(ke),process.exit(ee)},d.inspect=function(){return"[Emscripten Module object]"};try{L=tve()}catch(ee){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),ee}global.Worker=L.Worker}else(v||x)&&(x?D=self.location.href:typeof document<"u"&&document.currentScript&&(D=document.currentScript.src),typeof r<"u"&&r&&(D=r),D=0!==D.indexOf("blob:")?D.substr(0,D.replace(/[?#].*/,"").lastIndexOf("/")+1):"",S||(F=L=>{var ee=new XMLHttpRequest;return ee.open("GET",L,!1),ee.send(null),ee.responseText},x&&(k=L=>{var ee=new XMLHttpRequest;return ee.open("GET",L,!1),ee.responseType="arraybuffer",ee.send(null),new Uint8Array(ee.response)}),O=(L,ee,ke)=>{var Xe=new XMLHttpRequest;Xe.open("GET",L,!0),Xe.responseType="arraybuffer",Xe.onload=()=>{200==Xe.status||0==Xe.status&&Xe.response?ee(Xe.response):ke()},Xe.onerror=ke,Xe.send(null)}));S&&typeof performance>"u"&&(global.performance=nve().performance);var W=console.log.bind(console),q=console.warn.bind(console);S&&(W=L=>Z.writeSync(1,L+"\n"),q=L=>Z.writeSync(2,L+"\n"));var _e,J=d.print||W,te=d.printErr||q;Object.assign(d,g),g=null,d.arguments&&(y=d.arguments),d.quit&&(_=d.quit),Atomics,Atomics,Atomics,d.wasmBinary&&(_e=d.wasmBinary);var Be=d.noExitRuntime||!0;"object"!=typeof WebAssembly&&gp("no native wasm support detected");var be,Ne,Ge,yt,Tn,Da,ui,ra,ia,Fe=!1,Tt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function kn(L,ee,ke){for(var Xe=(ee>>>=0)+ke,bt=ee;L[bt]&&!(bt>=Xe);)++bt;if(bt-ee>16&&L.buffer&&Tt)return Tt.decode(L.buffer instanceof SharedArrayBuffer?L.slice(ee,bt):L.subarray(ee,bt));for(var dt="";ee<bt;){var Oe=L[ee++];if(128&Oe){var qe=63&L[ee++];if(192!=(224&Oe)){var Zn=63&L[ee++];if((Oe=224==(240&Oe)?(15&Oe)<<12|qe<<6|Zn:(7&Oe)<<18|qe<<12|Zn<<6|63&L[ee++])<65536)dt+=String.fromCharCode(Oe);else{var ns=Oe-65536;dt+=String.fromCharCode(55296|ns>>10,56320|1023&ns)}}else dt+=String.fromCharCode((31&Oe)<<6|qe)}else dt+=String.fromCharCode(Oe)}return dt}function vn(L){yt=L,d.HEAP8=Tn=new Int8Array(L),d.HEAP16=new Int16Array(L),d.HEAP32=ui=new Int32Array(L),d.HEAPU8=Da=new Uint8Array(L),d.HEAPU16=new Uint16Array(L),d.HEAPU32=ra=new Uint32Array(L),d.HEAPF32=new Float32Array(L),d.HEAPF64=ia=new Float64Array(L)}M&&(yt=d.buffer);var aa=d.INITIAL_MEMORY||16777216;if(M)be=d.wasmMemory,yt=d.buffer;else if(d.wasmMemory)be=d.wasmMemory;else if(!((be=new WebAssembly.Memory({initial:aa/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw te("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),S&&te("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");be&&(yt=be.buffer),aa=yt.byteLength,vn(yt);var Aa,Pl=[],Vg=[],Uo=[];function As(){return Be}function Zr(){!M&&qv(Vg)}var pu=0,zg=null,Ll=null;function gp(L){d.onAbort&&d.onAbort(L),te(L="Aborted("+L+")"),Fe=!0,Ge=1,L+=". Build with -sASSERTIONS for more info.";var ee=new WebAssembly.RuntimeError(L);throw f(ee),ee}var xi;function aS(L){return L.startsWith("data:application/octet-stream;base64,")}function Ug(L){return L.startsWith("file://")}function sS(L){try{if(L==xi&&_e)return new Uint8Array(_e);if(k)return k(L);throw"both async and sync fetching of the wasm failed"}catch(ee){gp(ee)}}aS(xi="tfjs-backend-wasm-threaded-simd.wasm")||(xi=N(xi));var oS={};function yp(L){this.name="ExitStatus",this.message="Program terminated with exit("+L+")",this.status=L}function Gv(L){var ee=ut.pthreads[L];(function st(L,ee){L||gp(ee)})(ee),ut.returnWorkerToPool(ee)}function xL(L){var ee=ut.getNewWorker();if(!ee)return 6;ut.runningWorkers.push(ee),ut.pthreads[L.pthread_ptr]=ee,ee.pthread_ptr=L.pthread_ptr;var ke={cmd:"run",start_routine:L.startRoutine,arg:L.arg,pthread_ptr:L.pthread_ptr};return ee.runPthread=()=>{S&&ee.ref(),ee.postMessage(ke,L.transferList),delete ee.runPthread},ee.loaded&&ee.runPthread(),0}function cS(L){if(M)return fu(1,1,L);Ge=L,As()||(ut.terminateAllThreads(),d.onExit&&d.onExit(L),Fe=!0),_(L,new yp(L))}var uS=function wL(L,ee){if(Ge=L,!ee&&M)throw dS(L),"unwind";cS(L)},ut={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){M?ut.initWorker():ut.initMainThread()},initMainThread:function(){for(var L=8;L--;)ut.allocateUnusedWorker()},initWorker:function(){Be=!1},setExitStatus:function(L){Ge=L},terminateAllThreads:function(){for(var L of Object.values(ut.pthreads))ut.returnWorkerToPool(L);for(var L of ut.unusedWorkers)L.terminate();ut.unusedWorkers=[]},returnWorkerToPool:function(L){var ee=L.pthread_ptr;delete ut.pthreads[ee],ut.unusedWorkers.push(L),ut.runningWorkers.splice(ut.runningWorkers.indexOf(L),1),L.pthread_ptr=0,S&&L.unref(),W$(ee)},receiveObjectTransfer:function(L){},threadInitTLS:function(){ut.tlsInitFunctions.forEach(L=>L())},loadWasmModuleToWorker:function(L,ee){L.onmessage=dt=>{var Oe=dt.data,qe=Oe.cmd;if(L.pthread_ptr&&(ut.currentProxiedOperationCallerThread=L.pthread_ptr),Oe.targetThread&&Oe.targetThread!=SS()){var Zn=ut.pthreads[Oe.targetThread];return Zn?Zn.postMessage(Oe,Oe.transferList):te('Internal error! Worker sent a message "'+qe+'" to target pthread '+Oe.targetThread+", but that thread no longer exists!"),void(ut.currentProxiedOperationCallerThread=void 0)}"processProxyingQueue"===qe?Kv(Oe.queue):"spawnThread"===qe?xL(Oe):"cleanupThread"===qe?Gv(Oe.thread):"killThread"===qe?function _L(L){var ee=ut.pthreads[L];delete ut.pthreads[L],ee.terminate(),W$(L),ut.runningWorkers.splice(ut.runningWorkers.indexOf(ee),1),ee.pthread_ptr=0}(Oe.thread):"cancelThread"===qe?function vL(L){ut.pthreads[L].postMessage({cmd:"cancel"})}(Oe.thread):"loaded"===qe?(L.loaded=!0,S&&L.unref(),ee&&ee(L),L.runPthread&&L.runPthread()):"print"===qe?J("Thread "+Oe.threadId+": "+Oe.text):"printErr"===qe?te("Thread "+Oe.threadId+": "+Oe.text):"alert"===qe?alert("Thread "+Oe.threadId+": "+Oe.text):"setimmediate"===Oe.target?L.postMessage(Oe):"callHandler"===qe?d[Oe.handler](...Oe.args):qe&&te("worker sent an unknown command "+qe),ut.currentProxiedOperationCallerThread=void 0},L.onerror=dt=>{throw te("worker sent an error! "+dt.filename+":"+dt.lineno+": "+dt.message),dt},S&&(L.on("message",function(dt){L.onmessage({data:dt})}),L.on("error",function(dt){L.onerror(dt)}),L.on("detachedExit",function(){}));var ke=[];for(var bt of["onExit","onAbort","print","printErr"])d.hasOwnProperty(bt)&&ke.push(bt);L.postMessage({cmd:"load",handlers:ke,urlOrBlob:d.mainScriptUrlOrBlob||r,wasmMemory:be,wasmModule:Ne})},allocateUnusedWorker:function(){var L,ee=N("tfjs-backend-wasm-threaded-simd.worker.js");L=new Worker(ee),ut.unusedWorkers.push(L)},getNewWorker:function(){return 0==ut.unusedWorkers.length&&(ut.allocateUnusedWorker(),ut.loadWasmModuleToWorker(ut.unusedWorkers[0])),ut.unusedWorkers.pop()}};function qv(L){for(;L.length>0;)L.shift()(d)}function dS(L){if(M)return fu(2,0,L);try{uS(L)}catch(ee){!function CL(L){if(L instanceof yp||"unwind"==L)return Ge;_(1,L)}(ee)}}d.PThread=ut,d.establishStackSpace=function kL(){var L=SS(),ee=l()[L+52>>>2],ke=l()[L+56>>>2];aie(ee,ee-ke),IS(ee)};var Xv,Hg=[];function hS(L,ee,ke,Xe){return M?fu(3,1,L,ee,ke,Xe):pS(L,ee,ke,Xe)}function pS(L,ee,ke,Xe){if(typeof SharedArrayBuffer>"u")return te("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var bt=[];if(M&&0===bt.length)return hS(L,ee,ke,Xe);var Oe={startRoutine:ke,pthread_ptr:L,arg:Xe,transferList:bt};return M?(Oe.cmd="spawnThread",postMessage(Oe,bt),0):xL(Oe)}function Kv(L){Atomics.store(l(),L>>2,1),SS()&&rie(L),Atomics.compareExchange(l(),L>>2,1,0)}function bp(L){bp.shown||(bp.shown={}),bp.shown[L]||(bp.shown[L]=1,S&&(L="warning: "+L),te(L))}function fu(L,ee){var ke=arguments.length-2,Xe=arguments;return function zL(L){var ee=j$(),ke=L();return IS(ee),ke}(()=>{for(var bt=ke,dt=MS(8*bt),Oe=dt>>3,qe=0;qe<ke;qe++){var Zn=Xe[2+qe];h()[Oe+qe>>>0]=Zn}return nie(L,bt,dt,ee)})}d.invokeEntryPoint=function IL(L,ee){var ke=function SL(L){var ee=Hg[L];return ee||(L>=Hg.length&&(Hg.length=L+1),Hg[L]=ee=Aa.get(L)),ee}(L)(ee);As()?ut.setExitStatus(ke):iie(ke)},d.executeNotifiedProxyingQueue=Kv,Xv=S?()=>{var L=process.hrtime();return 1e3*L[0]+L[1]/1e6}:()=>performance.timeOrigin+performance.now();var Yv=[];function HL(L){try{return be.grow(L-yt.byteLength+65535>>>16),vn(be.buffer),1}catch{}}function mS(L){return M?fu(4,1,L):52}function gS(L,ee,ke,Xe,bt){return M?fu(5,1,L,ee,ke,Xe,bt):70}var GL=[null,[],[]];function qL(L,ee){var ke=GL[L];0===ee||10===ee?((1===L?J:te)(kn(ke,0)),ke.length=0):ke.push(ee)}function yS(L,ee,ke,Xe){if(M)return fu(6,1,L,ee,ke,Xe);for(var bt=0,dt=0;dt<ke;dt++){var Oe=c()[ee>>>2],qe=c()[ee+4>>>2];ee+=8;for(var Zn=0;Zn<qe;Zn++)qL(L,s()[Oe+Zn>>>0]);bt+=qe}return c()[Xe>>>2]=bt,0}function bS(L){return d["_"+L]}function XL(L,ee,ke,Xe,bt){var dt={string:rs=>{var qg=0;if(null!=rs&&0!==rs){var lie=1+(rs.length<<2);!function qt(L,ee,ke){(function Gt(L,ee,ke,Xe){if(!(Xe>0))return 0;for(var bt=ke>>>=0,dt=ke+Xe-1,Oe=0;Oe<L.length;++Oe){var qe=L.charCodeAt(Oe);if(qe>=55296&&qe<=57343&&(qe=65536+((1023&qe)<<10)|1023&L.charCodeAt(++Oe)),qe<=127){if(ke>=dt)break;ee[ke++>>>0]=qe}else if(qe<=2047){if(ke+1>=dt)break;ee[ke++>>>0]=192|qe>>6,ee[ke++>>>0]=128|63&qe}else if(qe<=65535){if(ke+2>=dt)break;ee[ke++>>>0]=224|qe>>12,ee[ke++>>>0]=128|qe>>6&63,ee[ke++>>>0]=128|63&qe}else{if(ke+3>=dt)break;ee[ke++>>>0]=240|qe>>18,ee[ke++>>>0]=128|qe>>12&63,ee[ke++>>>0]=128|qe>>6&63,ee[ke++>>>0]=128|63&qe}}ee[ke>>>0]=0})(L,s(),ee,ke)}(rs,qg=MS(lie),lie)}return qg},array:rs=>{var qg=MS(rs.length);return function KL(L,ee){(function a(){return be.buffer!=yt&&vn(be.buffer),Tn})().set(L,ee>>>0)}(rs,qg),qg}},qe=bS(L),Zn=[],ns=0;if(Xe)for(var Bl=0;Bl<Xe.length;Bl++){var oie=dt[ke[Bl]];oie?(0===ns&&(ns=j$()),Zn[Bl]=oie(Xe[Bl])):Zn[Bl]=Xe[Bl]}var G$=qe.apply(null,Zn);return function Gpt(rs){return 0!==ns&&IS(ns),function Oe(rs){return"string"===ee?function en(L,ee){return(L>>>=0)?kn(s(),L,ee):""}(rs):"boolean"===ee?!!rs:rs}(rs)}(G$)}ut.init();var ES,DS,AS,ZL=[null,cS,dS,hS,mS,gS,yS],_S={__emscripten_init_main_thread_js:function EL(L){tie(L,!x,1,!v),ut.threadInitTLS()},__emscripten_thread_cleanup:function DL(L){M?postMessage({cmd:"cleanupThread",thread:L}):Gv(L)},__pthread_create_js:pS,_emscripten_default_pthread_stack_size:function AL(){return 65536},_emscripten_get_now_is_monotonic:function NL(){return!0},_emscripten_notify_task_queue:function OL(L,ee,ke,Xe){if(L==ee)setTimeout(()=>Kv(Xe));else if(M)postMessage({targetThread:L,cmd:"processProxyingQueue",queue:Xe});else{var bt=ut.pthreads[L];if(!bt)return;bt.postMessage({cmd:"processProxyingQueue",queue:Xe})}return 1},_emscripten_set_offscreencanvas_size:function FL(L,ee,ke){return-1},abort:function RL(){gp("")},emscripten_check_blocking_allowed:function PL(){S||x||bp("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_date_now:function LL(){return Date.now()},emscripten_get_heap_max:function $L(){return 4294901760},emscripten_get_now:Xv,emscripten_memcpy_big:function BL(L,ee,ke){s().copyWithin(L>>>0,ee>>>0,ee+ke>>>0)},emscripten_num_logical_cores:function VL(){return S?rve().cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function UL(L,ee,ke){Yv.length=ee;for(var Xe=ke>>3,bt=0;bt<ee;bt++)Yv[bt]=h()[Xe+bt>>>0];return(L<0?oS[-L-1]:ZL[L]).apply(null,Yv)},emscripten_resize_heap:function WL(L){var ee=s().length;if((L>>>=0)<=ee)return!1;var Zn,ke=4294901760;if(L>ke)return!1;for(var bt=1;bt<=4;bt*=2){var dt=ee*(1+.2/bt);if(dt=Math.min(dt,L+100663296),HL(Math.min(ke,(Zn=Math.max(L,dt))+(65536-Zn%65536)%65536)))return!0}return!1},emscripten_unwind_to_js_event_loop:function jL(){throw"unwind"},exit:uS,fd_close:mS,fd_seek:gS,fd_write:yS,memory:be||d.wasmMemory},SS=(function bL(){var L={env:_S,wasi_snapshot_preview1:_S};function ee(Oe,qe){if(d.asm=Oe.exports,function ML(L){ut.tlsInitFunctions.push(L)}(d.asm._emscripten_tls_init),Aa=d.asm.__indirect_function_table,function fL(L){Vg.unshift(L)}(d.asm.__wasm_call_ctors),Ne=qe,!M){var ns=ut.unusedWorkers.length;ut.unusedWorkers.forEach(function(Bl){ut.loadWasmModuleToWorker(Bl,function(){--ns||function iS(L){if(pu--,d.monitorRunDependencies&&d.monitorRunDependencies(pu),0==pu&&(null!==zg&&(clearInterval(zg),zg=null),Ll)){var ee=Ll;Ll=null,ee()}}()})})}}function ke(Oe){ee(Oe.instance,Oe.module)}function Xe(Oe){return function yL(){if(!_e&&(v||x)){if("function"==typeof fetch&&!Ug(xi))return fetch(xi,{credentials:"same-origin"}).then(function(L){if(!L.ok)throw"failed to load wasm binary file at '"+xi+"'";return L.arrayBuffer()}).catch(function(){return sS(xi)});if(O)return new Promise(function(L,ee){O(xi,function(ke){L(new Uint8Array(ke))},ee)})}return Promise.resolve().then(function(){return sS(xi)})}().then(function(qe){return WebAssembly.instantiate(qe,L)}).then(function(qe){return qe}).then(Oe,function(qe){te("failed to asynchronously prepare wasm: "+qe),gp(qe)})}if(M||function mL(L){pu++,d.monitorRunDependencies&&d.monitorRunDependencies(pu)}(),d.instantiateWasm)try{return d.instantiateWasm(L,ee)}catch(Oe){te("Module.instantiateWasm callback failed with error: "+Oe),f(Oe)}(function bt(){return _e||"function"!=typeof WebAssembly.instantiateStreaming||aS(xi)||Ug(xi)||S||"function"!=typeof fetch?Xe(ke):fetch(xi,{credentials:"same-origin"}).then(function(Oe){return WebAssembly.instantiateStreaming(Oe,L).then(ke,function(Zn){return te("wasm streaming compile failed: "+Zn),te("falling back to ArrayBuffer instantiation"),Xe(ke)})})})().catch(f)}(),d.___wasm_call_ctors=function(){return(d.___wasm_call_ctors=d.asm.__wasm_call_ctors).apply(null,arguments)},d._init=function(){return(d._init=d.asm.init).apply(null,arguments)},d._init_with_threads_count=function(){return(d._init_with_threads_count=d.asm.init_with_threads_count).apply(null,arguments)},d._get_threads_count=function(){return(d._get_threads_count=d.asm.get_threads_count).apply(null,arguments)},d._register_tensor=function(){return(d._register_tensor=d.asm.register_tensor).apply(null,arguments)},d._dispose_data=function(){return(d._dispose_data=d.asm.dispose_data).apply(null,arguments)},d._dispose=function(){return(d._dispose=d.asm.dispose).apply(null,arguments)},d._Abs=function(){return(d._Abs=d.asm.Abs).apply(null,arguments)},d._Acos=function(){return(d._Acos=d.asm.Acos).apply(null,arguments)},d._Acosh=function(){return(d._Acosh=d.asm.Acosh).apply(null,arguments)},d._Add=function(){return(d._Add=d.asm.Add).apply(null,arguments)},d._AddN=function(){return(d._AddN=d.asm.AddN).apply(null,arguments)},d._All=function(){return(d._All=d.asm.All).apply(null,arguments)},d._Any=function(){return(d._Any=d.asm.Any).apply(null,arguments)},d._ArgMax=function(){return(d._ArgMax=d.asm.ArgMax).apply(null,arguments)},d._ArgMin=function(){return(d._ArgMin=d.asm.ArgMin).apply(null,arguments)},d._Asin=function(){return(d._Asin=d.asm.Asin).apply(null,arguments)},d._Asinh=function(){return(d._Asinh=d.asm.Asinh).apply(null,arguments)},d._Atan=function(){return(d._Atan=d.asm.Atan).apply(null,arguments)},d._Atan2=function(){return(d._Atan2=d.asm.Atan2).apply(null,arguments)},d._Atanh=function(){return(d._Atanh=d.asm.Atanh).apply(null,arguments)},d._AvgPool=function(){return(d._AvgPool=d.asm.AvgPool).apply(null,arguments)},d._AvgPool3D=function(){return(d._AvgPool3D=d.asm.AvgPool3D).apply(null,arguments)},d._AvgPool3DGrad=function(){return(d._AvgPool3DGrad=d.asm.AvgPool3DGrad).apply(null,arguments)},d._AvgPoolGrad=function(){return(d._AvgPoolGrad=d.asm.AvgPoolGrad).apply(null,arguments)},d._BatchMatMul=function(){return(d._BatchMatMul=d.asm.BatchMatMul).apply(null,arguments)},d._Bincount=function(){return(d._Bincount=d.asm.Bincount).apply(null,arguments)},d._BitwiseAnd=function(){return(d._BitwiseAnd=d.asm.BitwiseAnd).apply(null,arguments)},d._Ceil=function(){return(d._Ceil=d.asm.Ceil).apply(null,arguments)},d._ClipByValue=function(){return(d._ClipByValue=d.asm.ClipByValue).apply(null,arguments)},d._Conv2D=function(){return(d._Conv2D=d.asm.Conv2D).apply(null,arguments)},d._Conv2DBackpropInput=function(){return(d._Conv2DBackpropInput=d.asm.Conv2DBackpropInput).apply(null,arguments)},d._Conv3D=function(){return(d._Conv3D=d.asm.Conv3D).apply(null,arguments)},d._Conv3DBackpropFilterV2=function(){return(d._Conv3DBackpropFilterV2=d.asm.Conv3DBackpropFilterV2).apply(null,arguments)},d._Conv3DBackpropInputV2=function(){return(d._Conv3DBackpropInputV2=d.asm.Conv3DBackpropInputV2).apply(null,arguments)},d._Cos=function(){return(d._Cos=d.asm.Cos).apply(null,arguments)},d._Cosh=function(){return(d._Cosh=d.asm.Cosh).apply(null,arguments)},d._CropAndResize=function(){return(d._CropAndResize=d.asm.CropAndResize).apply(null,arguments)},d._Cumprod=function(){return(d._Cumprod=d.asm.Cumprod).apply(null,arguments)},d._Cumsum=function(){return(d._Cumsum=d.asm.Cumsum).apply(null,arguments)},d._DenseBincount=function(){return(d._DenseBincount=d.asm.DenseBincount).apply(null,arguments)},d._DepthToSpace=function(){return(d._DepthToSpace=d.asm.DepthToSpace).apply(null,arguments)},d._DepthwiseConv2dNative=function(){return(d._DepthwiseConv2dNative=d.asm.DepthwiseConv2dNative).apply(null,arguments)},d._Diag=function(){return(d._Diag=d.asm.Diag).apply(null,arguments)},d._Dilation2D=function(){return(d._Dilation2D=d.asm.Dilation2D).apply(null,arguments)},d._Dilation2DBackpropFilter=function(){return(d._Dilation2DBackpropFilter=d.asm.Dilation2DBackpropFilter).apply(null,arguments)},d._Dilation2DBackpropInput=function(){return(d._Dilation2DBackpropInput=d.asm.Dilation2DBackpropInput).apply(null,arguments)},d._Elu=function(){return(d._Elu=d.asm.Elu).apply(null,arguments)},d._EluGrad=function(){return(d._EluGrad=d.asm.EluGrad).apply(null,arguments)},d._Equal=function(){return(d._Equal=d.asm.Equal).apply(null,arguments)},d._Erf=function(){return(d._Erf=d.asm.Erf).apply(null,arguments)},d._Exp=function(){return(d._Exp=d.asm.Exp).apply(null,arguments)},d._Expm1=function(){return(d._Expm1=d.asm.Expm1).apply(null,arguments)},d._FlipLeftRight=function(){return(d._FlipLeftRight=d.asm.FlipLeftRight).apply(null,arguments)},d._Floor=function(){return(d._Floor=d.asm.Floor).apply(null,arguments)},d._FloorDiv=function(){return(d._FloorDiv=d.asm.FloorDiv).apply(null,arguments)},d._FusedBatchNorm=function(){return(d._FusedBatchNorm=d.asm.FusedBatchNorm).apply(null,arguments)},d._FusedConv2D=function(){return(d._FusedConv2D=d.asm.FusedConv2D).apply(null,arguments)},d._FusedDepthwiseConv2D=function(){return(d._FusedDepthwiseConv2D=d.asm.FusedDepthwiseConv2D).apply(null,arguments)},d._Gather=function(){return(d._Gather=d.asm.Gather).apply(null,arguments)},d._GatherNd=function(){return(d._GatherNd=d.asm.GatherNd).apply(null,arguments)},d._Greater=function(){return(d._Greater=d.asm.Greater).apply(null,arguments)},d._GreaterEqual=function(){return(d._GreaterEqual=d.asm.GreaterEqual).apply(null,arguments)},d._IsFinite=function(){return(d._IsFinite=d.asm.IsFinite).apply(null,arguments)},d._IsInf=function(){return(d._IsInf=d.asm.IsInf).apply(null,arguments)},d._IsNan=function(){return(d._IsNan=d.asm.IsNan).apply(null,arguments)},d._LRN=function(){return(d._LRN=d.asm.LRN).apply(null,arguments)},d._LRNGrad=function(){return(d._LRNGrad=d.asm.LRNGrad).apply(null,arguments)},d._LeakyRelu=function(){return(d._LeakyRelu=d.asm.LeakyRelu).apply(null,arguments)},d._Less=function(){return(d._Less=d.asm.Less).apply(null,arguments)},d._LessEqual=function(){return(d._LessEqual=d.asm.LessEqual).apply(null,arguments)},d._LinSpace=function(){return(d._LinSpace=d.asm.LinSpace).apply(null,arguments)},d._Log=function(){return(d._Log=d.asm.Log).apply(null,arguments)},d._Log1p=function(){return(d._Log1p=d.asm.Log1p).apply(null,arguments)},d._LogicalAnd=function(){return(d._LogicalAnd=d.asm.LogicalAnd).apply(null,arguments)},d._LogicalNot=function(){return(d._LogicalNot=d.asm.LogicalNot).apply(null,arguments)},d._LogicalOr=function(){return(d._LogicalOr=d.asm.LogicalOr).apply(null,arguments)},d._LogicalXor=function(){return(d._LogicalXor=d.asm.LogicalXor).apply(null,arguments)},d._Max=function(){return(d._Max=d.asm.Max).apply(null,arguments)},d._MaxPool=function(){return(d._MaxPool=d.asm.MaxPool).apply(null,arguments)},d._MaxPool3D=function(){return(d._MaxPool3D=d.asm.MaxPool3D).apply(null,arguments)},d._MaxPool3DGrad=function(){return(d._MaxPool3DGrad=d.asm.MaxPool3DGrad).apply(null,arguments)},d._MaxPoolGrad=function(){return(d._MaxPoolGrad=d.asm.MaxPoolGrad).apply(null,arguments)},d._MaxPoolWithArgmax=function(){return(d._MaxPoolWithArgmax=d.asm.MaxPoolWithArgmax).apply(null,arguments)},d._Maximum=function(){return(d._Maximum=d.asm.Maximum).apply(null,arguments)},d._Mean=function(){return(d._Mean=d.asm.Mean).apply(null,arguments)},d._Min=function(){return(d._Min=d.asm.Min).apply(null,arguments)},d._Minimum=function(){return(d._Minimum=d.asm.Minimum).apply(null,arguments)},d._MirrorPad=function(){return(d._MirrorPad=d.asm.MirrorPad).apply(null,arguments)},d._Mod=function(){return(d._Mod=d.asm.Mod).apply(null,arguments)},d._Multinomial=function(){return(d._Multinomial=d.asm.Multinomial).apply(null,arguments)},d._Multiply=function(){return(d._Multiply=d.asm.Multiply).apply(null,arguments)},d._Neg=function(){return(d._Neg=d.asm.Neg).apply(null,arguments)},d._NonMaxSuppressionV3=function(){return(d._NonMaxSuppressionV3=d.asm.NonMaxSuppressionV3).apply(null,arguments)},d._NonMaxSuppressionV4=function(){return(d._NonMaxSuppressionV4=d.asm.NonMaxSuppressionV4).apply(null,arguments)},d._NonMaxSuppressionV5=function(){return(d._NonMaxSuppressionV5=d.asm.NonMaxSuppressionV5).apply(null,arguments)},d._NotEqual=function(){return(d._NotEqual=d.asm.NotEqual).apply(null,arguments)},d._OneHot=function(){return(d._OneHot=d.asm.OneHot).apply(null,arguments)},d._PadV2=function(){return(d._PadV2=d.asm.PadV2).apply(null,arguments)},d._Pow=function(){return(d._Pow=d.asm.Pow).apply(null,arguments)},d._Prelu=function(){return(d._Prelu=d.asm.Prelu).apply(null,arguments)},d._Prod=function(){return(d._Prod=d.asm.Prod).apply(null,arguments)},d._RealDiv=function(){return(d._RealDiv=d.asm.RealDiv).apply(null,arguments)},d._Reciprocal=function(){return(d._Reciprocal=d.asm.Reciprocal).apply(null,arguments)},d._Relu=function(){return(d._Relu=d.asm.Relu).apply(null,arguments)},d._Relu6=function(){return(d._Relu6=d.asm.Relu6).apply(null,arguments)},d._ResizeBilinear=function(){return(d._ResizeBilinear=d.asm.ResizeBilinear).apply(null,arguments)},d._ResizeBilinearGrad=function(){return(d._ResizeBilinearGrad=d.asm.ResizeBilinearGrad).apply(null,arguments)},d._ResizeNearestNeighbor=function(){return(d._ResizeNearestNeighbor=d.asm.ResizeNearestNeighbor).apply(null,arguments)},d._ResizeNearestNeighborGrad=function(){return(d._ResizeNearestNeighborGrad=d.asm.ResizeNearestNeighborGrad).apply(null,arguments)},d._Reverse=function(){return(d._Reverse=d.asm.Reverse).apply(null,arguments)},d._RotateWithOffset=function(){return(d._RotateWithOffset=d.asm.RotateWithOffset).apply(null,arguments)},d._Round=function(){return(d._Round=d.asm.Round).apply(null,arguments)},d._Rsqrt=function(){return(d._Rsqrt=d.asm.Rsqrt).apply(null,arguments)},d._ScatterNd=function(){return(d._ScatterNd=d.asm.ScatterNd).apply(null,arguments)},d._SearchSorted=function(){return(d._SearchSorted=d.asm.SearchSorted).apply(null,arguments)},d._SelectV2=function(){return(d._SelectV2=d.asm.SelectV2).apply(null,arguments)},d._Selu=function(){return(d._Selu=d.asm.Selu).apply(null,arguments)},d._Sigmoid=function(){return(d._Sigmoid=d.asm.Sigmoid).apply(null,arguments)},d._Sign=function(){return(d._Sign=d.asm.Sign).apply(null,arguments)},d._Sin=function(){return(d._Sin=d.asm.Sin).apply(null,arguments)},d._Sinh=function(){return(d._Sinh=d.asm.Sinh).apply(null,arguments)},d._Softmax=function(){return(d._Softmax=d.asm.Softmax).apply(null,arguments)},d._Softplus=function(){return(d._Softplus=d.asm.Softplus).apply(null,arguments)},d._SparseFillEmptyRows=function(){return(d._SparseFillEmptyRows=d.asm.SparseFillEmptyRows).apply(null,arguments)},d._SparseReshape=function(){return(d._SparseReshape=d.asm.SparseReshape).apply(null,arguments)},d._SparseSegmentReduction=function(){return(d._SparseSegmentReduction=d.asm.SparseSegmentReduction).apply(null,arguments)},d._SparseToDense=function(){return(d._SparseToDense=d.asm.SparseToDense).apply(null,arguments)},d._Sqrt=function(){return(d._Sqrt=d.asm.Sqrt).apply(null,arguments)},d._Square=function(){return(d._Square=d.asm.Square).apply(null,arguments)},d._SquaredDifference=function(){return(d._SquaredDifference=d.asm.SquaredDifference).apply(null,arguments)},d._Step=function(){return(d._Step=d.asm.Step).apply(null,arguments)},d._StridedSlice=function(){return(d._StridedSlice=d.asm.StridedSlice).apply(null,arguments)},d._Sub=function(){return(d._Sub=d.asm.Sub).apply(null,arguments)},d._Sum=function(){return(d._Sum=d.asm.Sum).apply(null,arguments)},d._Tan=function(){return(d._Tan=d.asm.Tan).apply(null,arguments)},d._Tanh=function(){return(d._Tanh=d.asm.Tanh).apply(null,arguments)},d._TensorScatterUpdate=function(){return(d._TensorScatterUpdate=d.asm.TensorScatterUpdate).apply(null,arguments)},d._Tile=function(){return(d._Tile=d.asm.Tile).apply(null,arguments)},d._TopK=function(){return(d._TopK=d.asm.TopK).apply(null,arguments)},d._Transform=function(){return(d._Transform=d.asm.Transform).apply(null,arguments)},d._Transpose=function(){return(d._Transpose=d.asm.Transpose).apply(null,arguments)},d.__FusedMatMul=function(){return(d.__FusedMatMul=d.asm._FusedMatMul).apply(null,arguments)},d._malloc=function(){return(d._malloc=d.asm.malloc).apply(null,arguments)},d._free=function(){return(d._free=d.asm.free).apply(null,arguments)},d.__emscripten_tls_init=function(){return(d.__emscripten_tls_init=d.asm._emscripten_tls_init).apply(null,arguments)},d._pthread_self=function(){return(SS=d._pthread_self=d.asm.pthread_self).apply(null,arguments)}),tie=(d.___errno_location=function(){return(d.___errno_location=d.asm.__errno_location).apply(null,arguments)},d.__emscripten_thread_init=function(){return(tie=d.__emscripten_thread_init=d.asm._emscripten_thread_init).apply(null,arguments)}),nie=(d.__emscripten_thread_crashed=function(){return(d.__emscripten_thread_crashed=d.asm._emscripten_thread_crashed).apply(null,arguments)},d._emscripten_main_thread_process_queued_calls=function(){return(d._emscripten_main_thread_process_queued_calls=d.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},d._emscripten_main_browser_thread_id=function(){return(d._emscripten_main_browser_thread_id=d.asm.emscripten_main_browser_thread_id).apply(null,arguments)},d._emscripten_run_in_main_runtime_thread_js=function(){return(nie=d._emscripten_run_in_main_runtime_thread_js=d.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)}),rie=(d._emscripten_dispatch_to_thread_=function(){return(d._emscripten_dispatch_to_thread_=d.asm.emscripten_dispatch_to_thread_).apply(null,arguments)},d.__emscripten_proxy_execute_task_queue=function(){return(rie=d.__emscripten_proxy_execute_task_queue=d.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)}),W$=d.__emscripten_thread_free_data=function(){return(W$=d.__emscripten_thread_free_data=d.asm._emscripten_thread_free_data).apply(null,arguments)},iie=d.__emscripten_thread_exit=function(){return(iie=d.__emscripten_thread_exit=d.asm._emscripten_thread_exit).apply(null,arguments)},aie=d._emscripten_stack_set_limits=function(){return(aie=d._emscripten_stack_set_limits=d.asm.emscripten_stack_set_limits).apply(null,arguments)},j$=d.stackSave=function(){return(j$=d.stackSave=d.asm.stackSave).apply(null,arguments)},IS=d.stackRestore=function(){return(IS=d.stackRestore=d.asm.stackRestore).apply(null,arguments)},MS=d.stackAlloc=function(){return(MS=d.stackAlloc=d.asm.stackAlloc).apply(null,arguments)};function sie(L){if(L=L||y,!(pu>0)){if(M)return p(d),Zr(),void startWorker(d);(function hu(){if(d.preRun)for("function"==typeof d.preRun&&(d.preRun=[d.preRun]);d.preRun.length;)L=d.preRun.shift(),Pl.unshift(L);var L;qv(Pl)})(),pu>0||(d.setStatus?(d.setStatus("Running..."),setTimeout(function(){setTimeout(function(){d.setStatus("")},1),ee()},1)):ee())}function ee(){ES||(ES=!0,d.calledRun=!0,!Fe&&(Zr(),p(d),d.onRuntimeInitialized&&d.onRuntimeInitialized(),function rS(){if(!M){if(d.postRun)for("function"==typeof d.postRun&&(d.postRun=[d.postRun]);d.postRun.length;)L=d.postRun.shift(),Uo.unshift(L);qv(Uo)}var L}()))}}if(d.dynCall_iijjiiii=function(){return(d.dynCall_iijjiiii=d.asm.dynCall_iijjiiii).apply(null,arguments)},d.dynCall_jiji=function(){return(d.dynCall_jiji=d.asm.dynCall_jiji).apply(null,arguments)},d.keepRuntimeAlive=As,d.wasmMemory=be,d.cwrap=function YL(L,ee,ke,Xe){var bt=(ke=ke||[]).every(Oe=>"number"===Oe||"boolean"===Oe);return"string"!==ee&&bt&&!Xe?bS(L):function(){return XL(L,ee,ke,arguments)}},d.ExitStatus=yp,d.PThread=ut,Ll=function L(){ES||sie(),ES||(Ll=L)},d.preInit)for("function"==typeof d.preInit&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.pop()();if(sie(),m&&(DS={uncaughtException:process.listeners("uncaughtException").filter(function(L){return!m.uncaughtException.indexOf(L)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(L){return!m.unhandledRejection.indexOf(L)>-1})}),typeof WasmBackendModule<"u")AS=WasmBackendModule;else{if(!(typeof i<"u"))throw new Error("Could not find wasm module in post.js");AS=i}if(DS){var jpt=AS._dispose;AS._dispose=function(){jpt(),DS.uncaughtException.forEach(function(L){process.removeListener("uncaughtException",L)}),DS.unhandledRejection.forEach(function(L){process.removeListener("unhandledRejection",L)})}}return i.ready});"object"==typeof e&&"object"==typeof n?n.exports=t:"function"==typeof define&&is.amdO?define([],function(){return t}):"object"==typeof e&&(e.WasmBackendModuleThreadedSimd=t)}),ave=gr((e,n)=>{n.exports.wasmWorkerContents='"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};'}),sve=gr((e,n)=>{var r,t=(r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(r=r||__filename),function(i){var s,o,l,a=typeof(i=i||{})<"u"?i:{};a.ready=new Promise(function(re,ve){s=re,o=ve}),typeof process<"u"&&process.listeners&&(l={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var b,_,v,c=Object.assign({},a),u=[],p="object"==typeof window,f="function"==typeof importScripts,m="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,g="";if(m){var M=R2(),D=VW();g=f?D.dirname(g)+"/":__dirname+"/",b=(re,ve)=>(re=hu(re)?new URL(re):D.normalize(re),M.readFileSync(re,ve?void 0:"utf8")),v=re=>{var ve=b(re,!0);return ve.buffer||(ve=new Uint8Array(ve)),ve},_=(re,ve,Ke)=>{re=hu(re)?new URL(re):D.normalize(re),M.readFile(re,function($t,Hn){$t?Ke($t):ve(Hn.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),u=process.argv.slice(2),process.on("uncaughtException",function(re){if(!(re instanceof zg))throw re}),process.on("unhandledRejection",function(re){throw re}),a.inspect=function(){return"[Emscripten Module object]"}}else(p||f)&&(f?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),r&&(g=r),g=0!==g.indexOf("blob:")?g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):"",b=re=>{var ve=new XMLHttpRequest;return ve.open("GET",re,!1),ve.send(null),ve.responseText},f&&(v=re=>{var ve=new XMLHttpRequest;return ve.open("GET",re,!1),ve.responseType="arraybuffer",ve.send(null),new Uint8Array(ve.response)}),_=(re,ve,Ke)=>{var $t=new XMLHttpRequest;$t.open("GET",re,!0),$t.responseType="arraybuffer",$t.onload=()=>{200==$t.status||0==$t.status&&$t.response?ve($t.response):Ke()},$t.onerror=Ke,$t.send(null)});var k,N=a.print||console.log.bind(console),F=a.printErr||console.warn.bind(console);Object.assign(a,c),c=null,a.arguments&&(u=a.arguments),a.wasmBinary&&(k=a.wasmBinary),"object"!=typeof WebAssembly&&Uo("no native wasm support detected");var j,le,he,_e,Fe,Z=!1,q=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function J(re,ve,Ke){for(var $t=(ve>>>=0)+Ke,Hn=ve;re[Hn]&&!(Hn>=$t);)++Hn;if(Hn-ve>16&&re.buffer&&q)return q.decode(re.subarray(ve,Hn));for(var Wn="";ve<Hn;){var Nt=re[ve++];if(128&Nt){var Et=63&re[ve++];if(192!=(224&Nt)){var kr=63&re[ve++];if((Nt=224==(240&Nt)?(15&Nt)<<12|Et<<6|kr:(7&Nt)<<18|Et<<12|kr<<6|63&re[ve++])<65536)Wn+=String.fromCharCode(Nt);else{var ts=Nt-65536;Wn+=String.fromCharCode(55296|ts>>10,56320|1023&ts)}}else Wn+=String.fromCharCode((31&Nt)<<6|Et)}else Wn+=String.fromCharCode(Nt)}return Wn}function Tt(re){le=re,a.HEAP8=he=new Int8Array(re),a.HEAP16=new Int16Array(re),a.HEAP32=new Int32Array(re),a.HEAPU8=_e=new Uint8Array(re),a.HEAPU16=new Uint16Array(re),a.HEAPU32=Fe=new Uint32Array(re),a.HEAPF32=new Float32Array(re),a.HEAPF64=new Float64Array(re)}var Gt=[],qt=[],yt=[],vn=0,aa=null,Aa=null;function Uo(re){a.onAbort&&a.onAbort(re),F(re="Aborted("+re+")"),Z=!0,re+=". Build with -sASSERTIONS for more info.";var ve=new WebAssembly.RuntimeError(re);throw o(ve),ve}var Zr;function As(re){return re.startsWith("data:application/octet-stream;base64,")}function hu(re){return re.startsWith("file://")}function rS(re){try{if(re==Zr&&k)return new Uint8Array(k);if(v)return v(re);throw"both async and sync fetching of the wasm failed"}catch(ve){Uo(ve)}}function zg(re){this.name="ExitStatus",this.message="Program terminated with exit("+re+")",this.status=re}function Ll(re){for(;re.length>0;)re.shift()(a)}function aS(re){try{return j.grow(re-le.byteLength+65535>>>16),Tt(j.buffer),1}catch{}}As(Zr="tfjs-backend-wasm.wasm")||(Zr=function y(re){return a.locateFile?a.locateFile(re,g):g+re}(Zr));var bL=[null,[],[]];function Qre(re,ve){var Ke=bL[re];0===ve||10===ve?((1===re?N:F)(J(Ke,0)),Ke.length=0):Ke.push(ve)}function oS(re){return a["_"+re]}function _L(re,ve,Ke,$t,Hn){var Wn={string:sa=>{var mu=0;if(null!=sa&&0!==sa){var kS=1+(sa.length<<2);!function pe(re,ve,Ke){(function ie(re,ve,Ke,$t){if(!($t>0))return 0;for(var Hn=Ke>>>=0,Wn=Ke+$t-1,Nt=0;Nt<re.length;++Nt){var Et=re.charCodeAt(Nt);if(Et>=55296&&Et<=57343&&(Et=65536+((1023&Et)<<10)|1023&re.charCodeAt(++Nt)),Et<=127){if(Ke>=Wn)break;ve[Ke++>>>0]=Et}else if(Et<=2047){if(Ke+1>=Wn)break;ve[Ke++>>>0]=192|Et>>6,ve[Ke++>>>0]=128|63&Et}else if(Et<=65535){if(Ke+2>=Wn)break;ve[Ke++>>>0]=224|Et>>12,ve[Ke++>>>0]=128|Et>>6&63,ve[Ke++>>>0]=128|63&Et}else{if(Ke+3>=Wn)break;ve[Ke++>>>0]=240|Et>>18,ve[Ke++>>>0]=128|Et>>12&63,ve[Ke++>>>0]=128|Et>>6&63,ve[Ke++>>>0]=128|63&Et}}ve[Ke>>>0]=0})(re,_e,ve,Ke)}(sa,mu=Zv(kS),kS)}return mu},array:sa=>{var mu=Zv(sa.length);return function yp(re,ve){he.set(re,ve>>>0)}(sa,mu),mu}},Et=oS(re),kr=[],ts=0;if($t)for(var $l=0;$l<$t.length;$l++){var CS=Wn[Ke[$l]];CS?(0===ts&&(ts=vS()),kr[$l]=CS($t[$l])):kr[$l]=$t[$l]}var Qv=Et.apply(null,kr);return function H$(sa){return 0!==ts&&xS(ts),function Nt(sa){return"string"===ve?function te(re,ve){return(re>>>=0)?J(_e,re,ve):""}(sa):"boolean"===ve?!!sa:sa}(sa)}(Qv)}var Wg,jg,Gg,Gv={abort:function mL(){Uo("")},emscripten_get_heap_max:function gp(){return 4294901760},emscripten_memcpy_big:function gL(re,ve,Ke){_e.copyWithin(re>>>0,ve>>>0,ve+Ke>>>0)},emscripten_resize_heap:function Ug(re){var kr,ve=_e.length,Ke=4294901760;if((re>>>=0)>Ke)return!1;for(var Hn=1;Hn<=4;Hn*=2){var Wn=ve*(1+.2/Hn);if(Wn=Math.min(Wn,re+100663296),aS(Math.min(Ke,(kr=Math.max(re,Wn))+(65536-kr%65536)%65536)))return!0}return!1},fd_close:function sS(re){return 52},fd_seek:function yL(re,ve,Ke,$t,Hn){return 70},fd_write:function Jre(re,ve,Ke,$t){for(var Hn=0,Wn=0;Wn<Ke;Wn++){var Nt=Fe[ve>>>2],Et=Fe[ve+4>>>2];ve+=8;for(var kr=0;kr<Et;kr++)Qre(re,_e[Nt+kr>>>0]);Hn+=Et}return Fe[$t>>>2]=Hn,0}},vS=(function fL(){var re={env:Gv,wasi_snapshot_preview1:Gv};function ve(Nt,Et){a.asm=Nt.exports,Tt((j=a.asm.memory).buffer),function es(re){qt.unshift(re)}(a.asm.__wasm_call_ctors),function Vg(re){if(vn--,a.monitorRunDependencies&&a.monitorRunDependencies(vn),0==vn&&(null!==aa&&(clearInterval(aa),aa=null),Aa)){var ve=Aa;Aa=null,ve()}}()}function Ke(Nt){ve(Nt.instance)}function $t(Nt){return function pL(){if(!k&&(p||f)){if("function"==typeof fetch&&!hu(Zr))return fetch(Zr,{credentials:"same-origin"}).then(function(re){if(!re.ok)throw"failed to load wasm binary file at '"+Zr+"'";return re.arrayBuffer()}).catch(function(){return rS(Zr)});if(_)return new Promise(function(re,ve){_(Zr,function(Ke){re(new Uint8Array(Ke))},ve)})}return Promise.resolve().then(function(){return rS(Zr)})}().then(function(Et){return WebAssembly.instantiate(Et,re)}).then(function(Et){return Et}).then(Nt,function(Et){F("failed to asynchronously prepare wasm: "+Et),Uo(Et)})}if(function Pl(re){vn++,a.monitorRunDependencies&&a.monitorRunDependencies(vn)}(),a.instantiateWasm)try{return a.instantiateWasm(re,ve)}catch(Nt){F("Module.instantiateWasm callback failed with error: "+Nt),o(Nt)}(function Hn(){return k||"function"!=typeof WebAssembly.instantiateStreaming||As(Zr)||hu(Zr)||m||"function"!=typeof fetch?$t(Ke):fetch(Zr,{credentials:"same-origin"}).then(function(Nt){return WebAssembly.instantiateStreaming(Nt,re).then(Ke,function(kr){return F("wasm streaming compile failed: "+kr),F("falling back to ArrayBuffer instantiation"),$t(Ke)})})})().catch(o)}(),a.___wasm_call_ctors=function(){return(a.___wasm_call_ctors=a.asm.__wasm_call_ctors).apply(null,arguments)},a._init=function(){return(a._init=a.asm.init).apply(null,arguments)},a._init_with_threads_count=function(){return(a._init_with_threads_count=a.asm.init_with_threads_count).apply(null,arguments)},a._get_threads_count=function(){return(a._get_threads_count=a.asm.get_threads_count).apply(null,arguments)},a._register_tensor=function(){return(a._register_tensor=a.asm.register_tensor).apply(null,arguments)},a._dispose_data=function(){return(a._dispose_data=a.asm.dispose_data).apply(null,arguments)},a._dispose=function(){return(a._dispose=a.asm.dispose).apply(null,arguments)},a._Abs=function(){return(a._Abs=a.asm.Abs).apply(null,arguments)},a._Acos=function(){return(a._Acos=a.asm.Acos).apply(null,arguments)},a._Acosh=function(){return(a._Acosh=a.asm.Acosh).apply(null,arguments)},a._Add=function(){return(a._Add=a.asm.Add).apply(null,arguments)},a._AddN=function(){return(a._AddN=a.asm.AddN).apply(null,arguments)},a._All=function(){return(a._All=a.asm.All).apply(null,arguments)},a._Any=function(){return(a._Any=a.asm.Any).apply(null,arguments)},a._ArgMax=function(){return(a._ArgMax=a.asm.ArgMax).apply(null,arguments)},a._ArgMin=function(){return(a._ArgMin=a.asm.ArgMin).apply(null,arguments)},a._Asin=function(){return(a._Asin=a.asm.Asin).apply(null,arguments)},a._Asinh=function(){return(a._Asinh=a.asm.Asinh).apply(null,arguments)},a._Atan=function(){return(a._Atan=a.asm.Atan).apply(null,arguments)},a._Atan2=function(){return(a._Atan2=a.asm.Atan2).apply(null,arguments)},a._Atanh=function(){return(a._Atanh=a.asm.Atanh).apply(null,arguments)},a._AvgPool=function(){return(a._AvgPool=a.asm.AvgPool).apply(null,arguments)},a._AvgPool3D=function(){return(a._AvgPool3D=a.asm.AvgPool3D).apply(null,arguments)},a._AvgPool3DGrad=function(){return(a._AvgPool3DGrad=a.asm.AvgPool3DGrad).apply(null,arguments)},a._AvgPoolGrad=function(){return(a._AvgPoolGrad=a.asm.AvgPoolGrad).apply(null,arguments)},a._BatchMatMul=function(){return(a._BatchMatMul=a.asm.BatchMatMul).apply(null,arguments)},a._Bincount=function(){return(a._Bincount=a.asm.Bincount).apply(null,arguments)},a._BitwiseAnd=function(){return(a._BitwiseAnd=a.asm.BitwiseAnd).apply(null,arguments)},a._Ceil=function(){return(a._Ceil=a.asm.Ceil).apply(null,arguments)},a._ClipByValue=function(){return(a._ClipByValue=a.asm.ClipByValue).apply(null,arguments)},a._Conv2D=function(){return(a._Conv2D=a.asm.Conv2D).apply(null,arguments)},a._Conv2DBackpropInput=function(){return(a._Conv2DBackpropInput=a.asm.Conv2DBackpropInput).apply(null,arguments)},a._Conv3D=function(){return(a._Conv3D=a.asm.Conv3D).apply(null,arguments)},a._Conv3DBackpropFilterV2=function(){return(a._Conv3DBackpropFilterV2=a.asm.Conv3DBackpropFilterV2).apply(null,arguments)},a._Conv3DBackpropInputV2=function(){return(a._Conv3DBackpropInputV2=a.asm.Conv3DBackpropInputV2).apply(null,arguments)},a._Cos=function(){return(a._Cos=a.asm.Cos).apply(null,arguments)},a._Cosh=function(){return(a._Cosh=a.asm.Cosh).apply(null,arguments)},a._CropAndResize=function(){return(a._CropAndResize=a.asm.CropAndResize).apply(null,arguments)},a._Cumprod=function(){return(a._Cumprod=a.asm.Cumprod).apply(null,arguments)},a._Cumsum=function(){return(a._Cumsum=a.asm.Cumsum).apply(null,arguments)},a._DenseBincount=function(){return(a._DenseBincount=a.asm.DenseBincount).apply(null,arguments)},a._DepthToSpace=function(){return(a._DepthToSpace=a.asm.DepthToSpace).apply(null,arguments)},a._DepthwiseConv2dNative=function(){return(a._DepthwiseConv2dNative=a.asm.DepthwiseConv2dNative).apply(null,arguments)},a._Diag=function(){return(a._Diag=a.asm.Diag).apply(null,arguments)},a._Dilation2D=function(){return(a._Dilation2D=a.asm.Dilation2D).apply(null,arguments)},a._Dilation2DBackpropFilter=function(){return(a._Dilation2DBackpropFilter=a.asm.Dilation2DBackpropFilter).apply(null,arguments)},a._Dilation2DBackpropInput=function(){return(a._Dilation2DBackpropInput=a.asm.Dilation2DBackpropInput).apply(null,arguments)},a._Elu=function(){return(a._Elu=a.asm.Elu).apply(null,arguments)},a._EluGrad=function(){return(a._EluGrad=a.asm.EluGrad).apply(null,arguments)},a._Equal=function(){return(a._Equal=a.asm.Equal).apply(null,arguments)},a._Erf=function(){return(a._Erf=a.asm.Erf).apply(null,arguments)},a._Exp=function(){return(a._Exp=a.asm.Exp).apply(null,arguments)},a._Expm1=function(){return(a._Expm1=a.asm.Expm1).apply(null,arguments)},a._FlipLeftRight=function(){return(a._FlipLeftRight=a.asm.FlipLeftRight).apply(null,arguments)},a._Floor=function(){return(a._Floor=a.asm.Floor).apply(null,arguments)},a._FloorDiv=function(){return(a._FloorDiv=a.asm.FloorDiv).apply(null,arguments)},a._FusedBatchNorm=function(){return(a._FusedBatchNorm=a.asm.FusedBatchNorm).apply(null,arguments)},a._FusedConv2D=function(){return(a._FusedConv2D=a.asm.FusedConv2D).apply(null,arguments)},a._FusedDepthwiseConv2D=function(){return(a._FusedDepthwiseConv2D=a.asm.FusedDepthwiseConv2D).apply(null,arguments)},a._Gather=function(){return(a._Gather=a.asm.Gather).apply(null,arguments)},a._GatherNd=function(){return(a._GatherNd=a.asm.GatherNd).apply(null,arguments)},a._Greater=function(){return(a._Greater=a.asm.Greater).apply(null,arguments)},a._GreaterEqual=function(){return(a._GreaterEqual=a.asm.GreaterEqual).apply(null,arguments)},a._IsFinite=function(){return(a._IsFinite=a.asm.IsFinite).apply(null,arguments)},a._IsInf=function(){return(a._IsInf=a.asm.IsInf).apply(null,arguments)},a._IsNan=function(){return(a._IsNan=a.asm.IsNan).apply(null,arguments)},a._LRN=function(){return(a._LRN=a.asm.LRN).apply(null,arguments)},a._LRNGrad=function(){return(a._LRNGrad=a.asm.LRNGrad).apply(null,arguments)},a._LeakyRelu=function(){return(a._LeakyRelu=a.asm.LeakyRelu).apply(null,arguments)},a._Less=function(){return(a._Less=a.asm.Less).apply(null,arguments)},a._LessEqual=function(){return(a._LessEqual=a.asm.LessEqual).apply(null,arguments)},a._LinSpace=function(){return(a._LinSpace=a.asm.LinSpace).apply(null,arguments)},a._Log=function(){return(a._Log=a.asm.Log).apply(null,arguments)},a._Log1p=function(){return(a._Log1p=a.asm.Log1p).apply(null,arguments)},a._LogicalAnd=function(){return(a._LogicalAnd=a.asm.LogicalAnd).apply(null,arguments)},a._LogicalNot=function(){return(a._LogicalNot=a.asm.LogicalNot).apply(null,arguments)},a._LogicalOr=function(){return(a._LogicalOr=a.asm.LogicalOr).apply(null,arguments)},a._LogicalXor=function(){return(a._LogicalXor=a.asm.LogicalXor).apply(null,arguments)},a._Max=function(){return(a._Max=a.asm.Max).apply(null,arguments)},a._MaxPool=function(){return(a._MaxPool=a.asm.MaxPool).apply(null,arguments)},a._MaxPool3D=function(){return(a._MaxPool3D=a.asm.MaxPool3D).apply(null,arguments)},a._MaxPool3DGrad=function(){return(a._MaxPool3DGrad=a.asm.MaxPool3DGrad).apply(null,arguments)},a._MaxPoolGrad=function(){return(a._MaxPoolGrad=a.asm.MaxPoolGrad).apply(null,arguments)},a._MaxPoolWithArgmax=function(){return(a._MaxPoolWithArgmax=a.asm.MaxPoolWithArgmax).apply(null,arguments)},a._Maximum=function(){return(a._Maximum=a.asm.Maximum).apply(null,arguments)},a._Mean=function(){return(a._Mean=a.asm.Mean).apply(null,arguments)},a._Min=function(){return(a._Min=a.asm.Min).apply(null,arguments)},a._Minimum=function(){return(a._Minimum=a.asm.Minimum).apply(null,arguments)},a._MirrorPad=function(){return(a._MirrorPad=a.asm.MirrorPad).apply(null,arguments)},a._Mod=function(){return(a._Mod=a.asm.Mod).apply(null,arguments)},a._Multinomial=function(){return(a._Multinomial=a.asm.Multinomial).apply(null,arguments)},a._Multiply=function(){return(a._Multiply=a.asm.Multiply).apply(null,arguments)},a._Neg=function(){return(a._Neg=a.asm.Neg).apply(null,arguments)},a._NonMaxSuppressionV3=function(){return(a._NonMaxSuppressionV3=a.asm.NonMaxSuppressionV3).apply(null,arguments)},a._NonMaxSuppressionV4=function(){return(a._NonMaxSuppressionV4=a.asm.NonMaxSuppressionV4).apply(null,arguments)},a._NonMaxSuppressionV5=function(){return(a._NonMaxSuppressionV5=a.asm.NonMaxSuppressionV5).apply(null,arguments)},a._NotEqual=function(){return(a._NotEqual=a.asm.NotEqual).apply(null,arguments)},a._OneHot=function(){return(a._OneHot=a.asm.OneHot).apply(null,arguments)},a._PadV2=function(){return(a._PadV2=a.asm.PadV2).apply(null,arguments)},a._Pow=function(){return(a._Pow=a.asm.Pow).apply(null,arguments)},a._Prelu=function(){return(a._Prelu=a.asm.Prelu).apply(null,arguments)},a._Prod=function(){return(a._Prod=a.asm.Prod).apply(null,arguments)},a._RealDiv=function(){return(a._RealDiv=a.asm.RealDiv).apply(null,arguments)},a._Reciprocal=function(){return(a._Reciprocal=a.asm.Reciprocal).apply(null,arguments)},a._Relu=function(){return(a._Relu=a.asm.Relu).apply(null,arguments)},a._Relu6=function(){return(a._Relu6=a.asm.Relu6).apply(null,arguments)},a._ResizeBilinear=function(){return(a._ResizeBilinear=a.asm.ResizeBilinear).apply(null,arguments)},a._ResizeBilinearGrad=function(){return(a._ResizeBilinearGrad=a.asm.ResizeBilinearGrad).apply(null,arguments)},a._ResizeNearestNeighbor=function(){return(a._ResizeNearestNeighbor=a.asm.ResizeNearestNeighbor).apply(null,arguments)},a._ResizeNearestNeighborGrad=function(){return(a._ResizeNearestNeighborGrad=a.asm.ResizeNearestNeighborGrad).apply(null,arguments)},a._Reverse=function(){return(a._Reverse=a.asm.Reverse).apply(null,arguments)},a._RotateWithOffset=function(){return(a._RotateWithOffset=a.asm.RotateWithOffset).apply(null,arguments)},a._Round=function(){return(a._Round=a.asm.Round).apply(null,arguments)},a._Rsqrt=function(){return(a._Rsqrt=a.asm.Rsqrt).apply(null,arguments)},a._ScatterNd=function(){return(a._ScatterNd=a.asm.ScatterNd).apply(null,arguments)},a._SearchSorted=function(){return(a._SearchSorted=a.asm.SearchSorted).apply(null,arguments)},a._SelectV2=function(){return(a._SelectV2=a.asm.SelectV2).apply(null,arguments)},a._Selu=function(){return(a._Selu=a.asm.Selu).apply(null,arguments)},a._Sigmoid=function(){return(a._Sigmoid=a.asm.Sigmoid).apply(null,arguments)},a._Sign=function(){return(a._Sign=a.asm.Sign).apply(null,arguments)},a._Sin=function(){return(a._Sin=a.asm.Sin).apply(null,arguments)},a._Sinh=function(){return(a._Sinh=a.asm.Sinh).apply(null,arguments)},a._Softmax=function(){return(a._Softmax=a.asm.Softmax).apply(null,arguments)},a._Softplus=function(){return(a._Softplus=a.asm.Softplus).apply(null,arguments)},a._SparseFillEmptyRows=function(){return(a._SparseFillEmptyRows=a.asm.SparseFillEmptyRows).apply(null,arguments)},a._SparseReshape=function(){return(a._SparseReshape=a.asm.SparseReshape).apply(null,arguments)},a._SparseSegmentReduction=function(){return(a._SparseSegmentReduction=a.asm.SparseSegmentReduction).apply(null,arguments)},a._SparseToDense=function(){return(a._SparseToDense=a.asm.SparseToDense).apply(null,arguments)},a._Sqrt=function(){return(a._Sqrt=a.asm.Sqrt).apply(null,arguments)},a._Square=function(){return(a._Square=a.asm.Square).apply(null,arguments)},a._SquaredDifference=function(){return(a._SquaredDifference=a.asm.SquaredDifference).apply(null,arguments)},a._Step=function(){return(a._Step=a.asm.Step).apply(null,arguments)},a._StridedSlice=function(){return(a._StridedSlice=a.asm.StridedSlice).apply(null,arguments)},a._Sub=function(){return(a._Sub=a.asm.Sub).apply(null,arguments)},a._Sum=function(){return(a._Sum=a.asm.Sum).apply(null,arguments)},a._Tan=function(){return(a._Tan=a.asm.Tan).apply(null,arguments)},a._Tanh=function(){return(a._Tanh=a.asm.Tanh).apply(null,arguments)},a._TensorScatterUpdate=function(){return(a._TensorScatterUpdate=a.asm.TensorScatterUpdate).apply(null,arguments)},a._Tile=function(){return(a._Tile=a.asm.Tile).apply(null,arguments)},a._TopK=function(){return(a._TopK=a.asm.TopK).apply(null,arguments)},a._Transform=function(){return(a._Transform=a.asm.Transform).apply(null,arguments)},a._Transpose=function(){return(a._Transpose=a.asm.Transpose).apply(null,arguments)},a.__FusedMatMul=function(){return(a.__FusedMatMul=a.asm._FusedMatMul).apply(null,arguments)},a._malloc=function(){return(a._malloc=a.asm.malloc).apply(null,arguments)},a._free=function(){return(a._free=a.asm.free).apply(null,arguments)},a.___errno_location=function(){return(a.___errno_location=a.asm.__errno_location).apply(null,arguments)},a.stackSave=function(){return(vS=a.stackSave=a.asm.stackSave).apply(null,arguments)}),xS=a.stackRestore=function(){return(xS=a.stackRestore=a.asm.stackRestore).apply(null,arguments)},Zv=a.stackAlloc=function(){return(Zv=a.stackAlloc=a.asm.stackAlloc).apply(null,arguments)};function wS(re){function ve(){Wg||(Wg=!0,a.calledRun=!0,!Z&&(function Ja(){Ll(qt)}(),s(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function ui(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)re=a.postRun.shift(),yt.unshift(re);var re;Ll(yt)}()))}re=re||u,vn>0||(function Cr(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)re=a.preRun.shift(),Gt.unshift(re);var re;Ll(Gt)}(),vn>0)||(a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),ve()},1)):ve())}if(a.dynCall_iijjiiii=function(){return(a.dynCall_iijjiiii=a.asm.dynCall_iijjiiii).apply(null,arguments)},a.dynCall_jiji=function(){return(a.dynCall_jiji=a.asm.dynCall_jiji).apply(null,arguments)},a.cwrap=function vL(re,ve,Ke,$t){var Hn=(Ke=Ke||[]).every(Nt=>"number"===Nt||"boolean"===Nt);return"string"!==ve&&Hn&&!$t?oS(re):function(){return _L(re,ve,Ke,arguments)}},Aa=function re(){Wg||wS(),Wg||(Aa=re)},a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();if(wS(),l&&(jg={uncaughtException:process.listeners("uncaughtException").filter(function(re){return!l.uncaughtException.indexOf(re)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(re){return!l.unhandledRejection.indexOf(re)>-1})}),typeof i<"u")Gg=i;else{if(!(typeof WasmBackendModuleThreadedSimd<"u"))throw new Error("Could not find wasm module in post.js");Gg=WasmBackendModuleThreadedSimd}if(jg){var U$=Gg._dispose;Gg._dispose=function(){U$(),jg.uncaughtException.forEach(function(re){process.removeListener("uncaughtException",re)}),jg.unhandledRejection.forEach(function(re){process.removeListener("unhandledRejection",re)})}}return i.ready});"object"==typeof e&&"object"==typeof n?n.exports=t:"function"==typeof define&&is.amdO?define([],function(){return t}):"object"==typeof e&&(e.WasmBackendModule=t)}),aw=class{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},gb=class{refCount(e){return ga("refCount")}incRef(e){return ga("incRef")}timerAvailable(){return!0}time(e){return ga("time")}read(e){return ga("read")}readSync(e){return ga("readSync")}readToGPU(e,n){return ga("readToGPU")}numDataIds(){return ga("numDataIds")}disposeData(e,n){return ga("disposeData")}write(e,n,t){return ga("write")}move(e,n,t,r,i){return ga("move")}createTensorFromGPUData(e,n,t){return ga("createTensorFromGPUData")}memory(){return ga("memory")}floatPrecision(){return ga("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return ga("dispose")}};function ga(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function zW(e){let n=e.length,t=0;for(;n>0;)t=Math.random()*n|0,n--,sw(e,n,t)}function ove(e,n){if(e.length!==n.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${n.length}`);let t=e.length,r=0;for(;t>0;)r=Math.random()*t|0,t--,sw(e,t,r),sw(n,t,r)}function yb(e,n,t){return Math.max(e,Math.min(n,t))}function lve(e){return e%2==0?e:e+1}function sw(e,n,t){let r=e[n];e[n]=e[t],e[t]=r}function cve(e){let n=0;for(let t=0;t<e.length;t++)n+=e[t];return n}function uve(e,n){let t=Math.random();return n*t+(1-t)*e}function dve(e,n){let t=0;for(let r=0;r<e.length;r++){let i=Number(e[r])-Number(n[r]);t+=i*i}return t}function T(e,n){if(!e)throw new Error("string"==typeof n?n:n())}function Di(e,n,t=""){T(dl(e,n),()=>t+` Shapes ${e} and ${n} must match`)}function Hu(e){T(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function rn(e){if(0===e.length)return 1;let n=e[0];for(let t=1;t<e.length;t++)n*=e[t];return n}function hve(e){return 0===e.length}function UW(e,n){if(e===n)return!0;if(null==e||null==n||e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(null!==e[t]&&null!==n[t]&&e[t]!==n[t])return!1;return!0}function dl(e,n){if(e===n)return!0;if(null==e||null==n||e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function Df(e){return e%1==0}function pve(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{let n=Math.exp(2*e);return(n-1)/(n+1)}}function fve(e){let n=Math.ceil(Math.sqrt(e));return[n,Math.ceil(e/n)]}function mve(e){let n=new Uint32Array(e);for(let t=0;t<e;++t)n[t]=t;return zW(n),n}function bb(e,n){return n<=e.length?e:e+" ".repeat(n-e.length)}function gve(e,n=(i=>0),t,r){return new Promise((i,a)=>{let s=0,o=()=>{if(e())return void i();s++;let l=n(s);null!=t&&s>=t?a():null!=r?r(o,l):setTimeout(o,l)};o()})}function yve(e,n){let t=1,r=-1;for(let a=0;a<e.length;++a)if(e[a]>=0)t*=e[a];else if(-1===e[a]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(e[a]<0)throw Error(`Shapes can not be < 0. Found ${e[a]} at dim ${a}`);if(-1===r){if(n>0&&n!==t)throw Error(`Size(${n}) must match the product of shape ${e}`);return e}if(0===t)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(n%t!=0)throw Error(`The implicit shape can't be a fractional number. Got ${n} / ${t}`);let i=e.slice();return i[r]=n/t,i}function gs(e,n){let t=n.length;return T((e=null==e?n.map((r,i)=>i):[].concat(e)).every(r=>r>=-t&&r<t),()=>`All values in axis param must be in range [-${t}, ${t}) but got axis ${e}`),T(e.every(r=>Df(r)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(r=>r<0?t+r:r)}function HW(e,n){let t=[],r=[],i=null!=n&&Array.isArray(n)&&0===n.length,a=null==n||i?null:gs(n,e).sort(),s=0;for(let o=0;o<e.length;++o){if(null!=a){if(a[s]===o&&1!==e[o])throw new Error(`Can't squeeze axis ${o} since its dim '${e[o]}' is not 1`);(null==a[s]||a[s]>o)&&1===e[o]&&(t.push(e[o]),r.push(o)),a[s]<=o&&s++}1!==e[o]&&(t.push(e[o]),r.push(o))}return{newShape:t,keptDims:r}}function WW(e,n){return P2(e,n)}function P2(e,n){let t=null;if(null==e||"float32"===e)t=new Float32Array(n);else if("int32"===e)t=new Int32Array(n);else if("bool"===e)t=new Uint8Array(n);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);t=new Array(n)}return t}function jW(e,n){for(let t=0;t<e.length;t++){let r=e[t];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${n} being uploaded contains ${r}.`)}}function GW(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function bve(e,n){return!("complex64"===n||"float32"===n&&"complex64"!==e||"int32"===n&&"float32"!==e&&"complex64"!==e||"bool"===n&&"bool"===e)}function ow(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function qW(e){if(null==e)return 0;let n=0;return e.forEach(t=>n+=t.length),n}function uc(e){return"string"==typeof e||e instanceof String}function KW(e){return"boolean"==typeof e}function XW(e){return"number"==typeof e}function _b(e){return Array.isArray(e)?_b(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":XW(e)?"float32":uc(e)?"string":KW(e)?"bool":"float32"}function dc(e){return!!(e&&e.constructor&&e.call&&e.apply)}function lw(e,n){for(let t=n;t<e;++t)if(e%t==0)return t;return e}function Af(e){let n=e.length;if(n<2)return[];let t=new Array(n-1);t[n-2]=e[n-1];for(let r=n-3;r>=0;--r)t[r]=t[r+1]*e[r+1];return t}function YW(e,n,t,r=!1){let i=new Array;if(1===n.length){let a=n[0]*(r?2:1);for(let s=0;s<a;s++)i[s]=t[e+s]}else{let a=n[0],s=n.slice(1),o=s.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<a;l++)i[l]=YW(e+l*o,s,t,r)}return i}function Tf(e,n,t=!1){if(0===e.length)return n[0];let r=e.reduce((i,a)=>i*a)*(t?2:1);if(0===r)return[];if(r!==n.length)throw new Error(`[${e}] does not match the input size ${n.length}${t?" for a complex tensor":""}.`);return YW(0,e,n,t)}function _ve(e,n){if(Array.isArray(e))return e;if("float32"===n)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===n)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===n||"string"===n)return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${n}`)}function L2(e,n){let t=cw(e,n);for(let r=0;r<t.length;r++)t[r]=1;return t}function cw(e,n){if(null==n||"float32"===n||"complex64"===n)return new Float32Array(e);if("int32"===n)return new Int32Array(e);if("bool"===n)return new Uint8Array(e);throw new Error(`Unknown data type ${n}`)}function vve(e,n){let t=e.reduce((r,i)=>r*i,1);if(null==n||"float32"===n)return Tf(e,new Float32Array(t));if("int32"===n)return Tf(e,new Int32Array(t));if("bool"===n)return Tf(e,new Uint8Array(t));throw new Error(`Unknown data type ${n}`)}function ya(e){e.forEach(n=>{T(Number.isInteger(n)&&n>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function xve(e,n,t){if(0===n)return 0;if(1===n)return e[0];let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=t[i]*e[i];return r}function wve(e,n,t){if(0===n)return[];if(1===n)return[e];let r=new Array(n);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(e/t[i]),e-=r[i]*t[i];return r[r.length-1]=e,r}function uw(e){return e&&e.then&&"function"==typeof e.then}var ZW="tfjsflags",QW=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Cve,this.populateURLFlags()}setPlatform(e,n){null!=this.platform&&(Q().getBool("IS_TEST")||Q().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,t){if(this.flagRegistry[e]={evaluationFn:n,setHook:t},null!=this.urlFlags[e]){let r=this.urlFlags[e];Q().getBool("IS_TEST")||Q().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${r}.`),this.set(e,r)}}getAsync(e){var n=this;return R(function*(){return e in n.flags||(n.flags[e]=yield n.evaluateFlag(e)),n.flags[e]})()}get(e){if(e in this.flags)return this.flags[e];let n=this.evaluateFlag(e);if(uw(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let e=this.getQueryParams(this.global.location.search);ZW in e&&e[ZW].split(",").forEach(n=>{let[t,r]=n.split(":");this.urlFlags[t]=function Sve(e,n){let t=n.toLowerCase();return"true"===t||"false"===t?"true"===t:""+ +t===t?+t:n}(0,r)})}};function Cve(e){let n={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...r)=>(function kve(e,n,t){e[decodeURIComponent(n)]=decodeURIComponent(t||"")}(n,r[0],r[1]),r.join("="))),n}function Q(){return $2}var B2,$2=null;function JW(){if(null==B2){let e;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else{if(!(typeof self<"u"))throw new Error("Could not find a global object");e=self}B2=e}return B2}function V2(e,n){let t=function Mve(){let e=JW();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(t.has(e))return t.get(e);{let r=n();return t.set(e,r),t.get(e)}}var Nf="Abs",Wu="Acos",ju="Acosh",hc="Add",Gu="AddN",Of="All",Ff="Any",Rf="ArgMax",Pf="ArgMin",qu="Asin",Ku="Asinh",Xu="Atan",Yu="Atanh",Zu="Atan2",Qu="AvgPool",vb="AvgPoolGrad",Lf="AvgPool3D",xb="AvgPool3DGrad",Ju="BatchMatMul",$f="BatchToSpaceND",Bf="Bincount",Vf="BitwiseAnd",e8="BroadcastTo",wb="BroadcastArgs",ed="Cast",td="Ceil",pc="ClipByValue",dw="Complex",Cb="ComplexAbs",zf="Concat",nd="Conv2D",hw="Conv2DBackpropFilter",rd="Conv2DBackpropInput",id="Conv3D",Uf="Conv3DBackpropFilterV2",Hf="Conv3DBackpropInputV2",ad="Cos",sd="Cosh",Wf="Cumprod",od="Cumsum",jf="CropAndResize",kb="DenseBincount",Gf="DepthToSpace",ld="DepthwiseConv2dNative",pw="DepthwiseConv2dNativeBackpropFilter",fw="DepthwiseConv2dNativeBackpropInput",Sb="Diag",cd="Dilation2D",qf="Dilation2DBackpropInput",Kf="Dilation2DBackpropFilter",mw="Draw",ud="RealDiv",gw="Einsum",dd="Elu",Xf="EluGrad",hd="Erf",Yf="Equal",pd="Exp",Zf="ExpandDims",fd="Expm1",yw="FFT",Ib="Fill",Qf="FlipLeftRight",md="Floor",gd="FloorDiv",yd="FusedBatchNorm",Jf="GatherV2",em="GatherNd",tm="Greater",bd="GreaterEqual",_d="Identity",bw="IFFT",_w="Imag",vd="IsFinite",xd="IsInf",wd="IsNan",Cd="LeakyRelu",nm="Less",rm="LessEqual",im="LinSpace",kd="Log",Sd="Log1p",am="LogicalAnd",sm="LogicalNot",om="LogicalOr",t8="LogicalXor",n8="LogSoftmax",Eve="LowerBound",Id="LRN",lm="LRNGrad",Dve="MatrixBandPart",Md="Max",Ed="Maximum",Dd="MaxPool",Mb="MaxPoolGrad",cm="MaxPool3D",Eb="MaxPool3DGrad",Db="MaxPoolWithArgmax",Ad="Mean",Td="Min",Nd="Minimum",Od="MirrorPad",Fd="Mod",um="Multinomial",Rd="Multiply",dm="Neg",hm="NotEqual",pm="NonMaxSuppressionV3",fm="NonMaxSuppressionV4",mm="NonMaxSuppressionV5",gm="OnesLike",Pd="OneHot",ym="Pack",Ld="PadV2",Ave="Pool",$d="Pow",Bd="Prelu",Vd="Prod",vw="RaggedGather",xw="RaggedRange",ww="RaggedTensorToTensor",Ab="Range",Cw="Real",zd="Reciprocal",Ud="Relu",bm="Reshape",Hd="ResizeNearestNeighbor",_m="ResizeNearestNeighborGrad",Wd="ResizeBilinear",vm="ResizeBilinearGrad",jd="Relu6",Gd="Reverse",qd="Round",Kd="Rsqrt",xm="ScatterNd",wm="TensorScatterUpdate",Cm="SearchSorted",km="Select",Xd="Selu",Sm="Slice",Yd="Sin",Zd="Sinh",Qd="Sign",Jd="Sigmoid",eh="Softplus",th="Sqrt",nh="Sum",Im="SpaceToBatchND",Mm="SplitV",rh="Softmax",Tb="SparseFillEmptyRows",Em="SparseReshape",Nb="SparseSegmentMean",Ob="SparseSegmentSum",Dm="SparseToDense",ih="SquaredDifference",Fb="Square",Rb="StaticRegexReplace",Am="StridedSlice",Pb="StringNGrams",Lb="StringSplit",$b="StringToHashBucketFast",ah="Sub",sh="Tan",oh="Tanh",fc="Tile",Tm="TopK",Nm="Transform",hl="Transpose",Bb="Unique",Om="Unpack",Vb="UnsortedSegmentSum",Tve="UpperBound",Fm="ZerosLike",mc="Step",kw="FromPixels",Rm="RotateWithOffset",lh="_FusedMatMul",ch="FusedConv2D",uh="FusedDepthwiseConv2D";function gc(...e){Q().getBool("IS_TEST")||Q().getBool("PROD")||console.warn(...e)}function Nve(...e){Q().getBool("IS_TEST")||Q().getBool("PROD")||console.log(...e)}var Pm=V2("kernelRegistry",()=>new Map),zb=V2("gradRegistry",()=>new Map);function Ub(e,n){let t=U2(e,n);return Pm.get(t)}function z2(e){return zb.get(e)}function Sw(e){let n=Pm.entries(),t=[];for(;;){let{done:r,value:i}=n.next();if(r)break;let[a,s]=i,[o]=a.split("_");o===e&&t.push(s)}return t}function Hb(e){let{kernelName:n,backendName:t}=e,r=U2(n,t);Pm.has(r)&&gc(`The kernel '${n}' for backend '${t}' is already registered`),Pm.set(r,e)}function r8(e){let{kernelName:n}=e;zb.has(n)&&Q().getBool("DEBUG")&&gc(`Overriding the gradient for '${n}'`),zb.set(n,e)}function Ove(e,n){let t=U2(e,n);if(!Pm.has(t))throw new Error(`The kernel '${e}' for backend '${n}' is not registered`);Pm.delete(t)}function Fve(e){if(!zb.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);zb.delete(e)}function Rve(e,n){Sw(e).forEach(t=>{Hb(Object.assign({},t,{backendName:n}))})}function U2(e,n){return`${n}_${e}`}var w={};function i8(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}it(w,{arraysEqual:()=>dl,arraysEqualWithNull:()=>UW,assert:()=>T,assertNonNegativeIntegerDimensions:()=>ya,assertNonNull:()=>Hu,assertShapesMatch:()=>Di,bytesFromStringArray:()=>qW,bytesPerElement:()=>ow,checkConversionForErrors:()=>jW,clamp:()=>yb,computeStrides:()=>Af,convertBackendValuesAndArrayBuffer:()=>_ve,createScalarValue:()=>zve,createShuffledIndices:()=>mve,decodeString:()=>Ew,distSquared:()=>dve,encodeString:()=>Gb,fetch:()=>Hve,fingerPrint64:()=>Vve,flatten:()=>bc,getArrayFromDType:()=>P2,getTypedArrayFromDType:()=>WW,hasEncodingLoss:()=>bve,hexToLong:()=>Wb,indexToLoc:()=>wve,inferDtype:()=>_b,inferFromImplicitShape:()=>yve,isBoolean:()=>KW,isFunction:()=>dc,isInt:()=>Df,isNumber:()=>XW,isPromise:()=>uw,isScalarShape:()=>hve,isString:()=>uc,isTypedArray:()=>Hr,isValidDtype:()=>GW,locToIndex:()=>xve,makeOnesTypedArray:()=>L2,makeZerosNestedTypedArray:()=>vve,makeZerosTypedArray:()=>cw,nearestDivisor:()=>lw,nearestLargerEven:()=>lve,now:()=>jb,parseAxisParam:()=>gs,randUniform:()=>uve,repeatedTry:()=>gve,rightPad:()=>bb,shuffle:()=>zW,shuffleCombo:()=>ove,sizeFromShape:()=>rn,sizeToSquarishShape:()=>fve,squeezeShape:()=>HW,sum:()=>cve,swap:()=>sw,tanh:()=>pve,toNestedArray:()=>Tf,toTypedArray:()=>Mw});var a8=cc(W_e()),dh=a8.default||a8;function Wb(e){return dh.fromString(e,!0,16)}var s8=Wb("c3a5c85c97cb3127"),hh=Wb("b492b66fbe98f273"),Ai=Wb("9ae16a3b2f90404f");function H2(e){return e.xor(e.shru(47))}function o8(e,n,t){let r=e.slice(n,n+t);return dh.fromBytes(Array.from(r),!0,!0)}function En(e,n){return o8(e,n,8)}function l8(e,n){return o8(e,n,4)}function Ur(e,n){return 0===n?e:e.shru(n).or(e.shl(64-n))}function yc(e,n,t=Wb("9ddfea08eb382d69")){let r=e.xor(n).mul(t);r=r.xor(r.shru(47));let i=n.xor(r).mul(t);return i=i.xor(i.shru(47)),i=i.mul(t),i}function Iw(e,n,t,r){return function Pve(e,n,t,r,i,a){i=i.add(e),a=Ur(a.add(i).add(r),21);let s=i;return i=(i=i.add(n)).add(t),a=a.add(Ur(i,44)),[i.add(r),a.add(s)]}(En(e,n),En(e,n+8),En(e,n+16),En(e,n+24),t,r)}function Vve(e,n=e.length){let t=dh.fromNumber(81,!0);if(n<=32)return n<=16?function Lve(e,n=e.length){if(n>=8){let t=Ai.add(2*n),r=En(e,0).add(Ai),i=En(e,n-8);return yc(Ur(i,37).mul(t).add(r),Ur(r,25).add(i).mul(t),t)}if(n>=4){let t=Ai.add(2*n);return yc(l8(e,0).shl(3).add(n),l8(e,n-4),t)}if(n>0){let s=n+(e[n-1]<<2);return H2(Ai.mul(e[0]+(e[n>>1]<<8)).xor(s8.mul(s))).mul(Ai)}return Ai}(e,n):function $ve(e,n=e.length){let t=Ai.add(2*n),r=En(e,0).mul(hh),i=En(e,8),a=En(e,n-8).mul(t),s=En(e,n-16).mul(Ai);return yc(Ur(r.add(i),43).add(Ur(a,30)).add(s),r.add(Ur(i.add(Ai),18)).add(a),t)}(e,n);if(n<=64)return function Bve(e,n=e.length){let t=Ai.add(2*n),r=En(e,0).mul(Ai),i=En(e,8),a=En(e,n-8).mul(t),s=En(e,n-16).mul(Ai),o=Ur(r.add(i),43).add(Ur(a,30)).add(s),l=yc(o,r.add(Ur(i.add(Ai),18)).add(a),t),c=En(e,16).mul(t),u=En(e,24),h=o.add(En(e,n-32)).mul(t),d=l.add(En(e,n-24)).mul(t);return yc(Ur(c.add(u),43).add(Ur(h,30)).add(d),c.add(Ur(u.add(r),18)).add(h),t)}(e,n);let r=t,i=t.mul(hh).add(113),a=H2(i.mul(Ai).add(113)).mul(Ai),s=[dh.UZERO,dh.UZERO],o=[dh.UZERO,dh.UZERO];r=r.mul(Ai).add(En(e,0));let l=0,c=64*(n-1>>6),u=c+(n-1&63)-63;do{r=Ur(r.add(i).add(s[0]).add(En(e,l+8)),37).mul(hh),i=Ur(i.add(s[1]).add(En(e,l+48)),42).mul(hh),r=r.xor(o[1]),i=i.add(s[0]).add(En(e,l+40)),a=Ur(a.add(o[0]),33).mul(hh),s=Iw(e,l,s[1].mul(hh),r.add(o[0])),o=Iw(e,l+32,a.add(o[1]),i.add(En(e,l+16))),[a,r]=[r,a],l+=64}while(l!==c);let h=hh.add(a.and(255).shl(1));return l=u,o[0]=o[0].add(n-1&63),s[0]=s[0].add(o[0]),o[0]=o[0].add(s[0]),r=Ur(r.add(i).add(s[0]).add(En(e,l+8)),37).mul(h),i=Ur(i.add(s[1]).add(En(e,l+48)),42).mul(h),r=r.xor(o[1].mul(9)),i=i.add(s[0].mul(9).add(En(e,l+40))),a=Ur(a.add(o[0]),33).mul(h),s=Iw(e,l,s[1].mul(h),r.add(o[0])),o=Iw(e,l+32,a.add(o[1]),i.add(En(e,l+16))),[a,r]=[r,a],yc(yc(s[0],o[0],h).add(H2(i).mul(s8)).add(a),yc(s[1],o[1],h).add(r),h)}function zve(e,n){return"string"===n?Gb(e):Mw([e],n)}function Mw(e,n){if("string"===n)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=bc(e)),Q().getBool("DEBUG")&&jW(e,n),function Uve(e,n){return e instanceof Float32Array&&"float32"===n||e instanceof Int32Array&&"int32"===n||e instanceof Uint8Array&&"bool"===n}(e,n))return e;if(null==n||"float32"===n||"complex64"===n)return new Float32Array(e);if("int32"===n)return new Int32Array(e);if("bool"===n){let t=new Uint8Array(e.length);for(let r=0;r<t.length;++r)0!==Math.round(e[r])&&(t[r]=1);return t}throw new Error(`Unknown data type ${n}`)}function jb(){return Q().platform.now()}function Hve(e,n){return Q().platform.fetch(e,n)}function Gb(e,n="utf-8"){return n=n||"utf-8",Q().platform.encode(e,n)}function Ew(e,n="utf-8"){return n=n||"utf-8",Q().platform.decode(e,n)}function Hr(e){return null!=Q().platform.isTypedArray?Q().platform.isTypedArray(e):i8(e)}function bc(e,n=[],t=!1){if(null==n&&(n=[]),"boolean"==typeof e||"number"==typeof e||"string"==typeof e||uw(e)||null==e||Hr(e)&&t)n.push(e);else if(Array.isArray(e)||Hr(e))for(let r=0;r<e.length;++r)bc(e[r],n,t);else{let r=-1;for(let i of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)bc(e[i],n,t)}return n}function jve(e,n,t){if("float32"!==n)return!1;for(let r=0;r<e.length;r++){let i=e[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${t}'`),!0}return!1}var c8=20,qb=3,W2=7;function Xve(e,n,t,r){let i=Af(n),a=function Yve(e,n,t,r){let i=rn(n),a=r[r.length-1],s=new Array(a).fill(0),o=n.length,l="complex64"===t?Xb(e):e;if(o>1)for(let c=0;c<i/a;c++){let u=c*a;for(let h=0;h<a;h++)s[h]=Math.max(s[h],Kb(l[u+h],0,t).length)}return s}(e,n,t,i),s=n.length,o=Dw(e,n,t,i,a),l=["Tensor"];return r&&(l.push(`  dtype: ${t}`),l.push(`  rank: ${s}`),l.push(`  shape: [${n}]`),l.push("  values:")),l.push(o.map(c=>"    "+c).join("\n")),l.join("\n")}function Kb(e,n,t){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(W2))} + ${parseFloat(e[1].toFixed(W2))}j`:uc(e)?`'${e}'`:"bool"===t?u8(e):parseFloat(e.toFixed(W2)).toString(),bb(r,n)}function u8(e){return 0===e?"false":"true"}function Dw(e,n,t,r,i,a=!0){let s="complex64"===t?2:1,o=n[0],l=n.length;if(0===l)return"complex64"===t?[Kb(Xb(e)[0],0,t)]:"bool"===t?[u8(e[0])]:[e[0].toString()];if(1===l){if(o>c8){let g=Array.from(e.slice(0,qb*s)),y=Array.from(e.slice((o-qb)*s,o*s));return"complex64"===t&&(g=Xb(g),y=Xb(y)),["["+g.map((b,_)=>Kb(b,i[_],t)).join(", ")+", ..., "+y.map((b,_)=>Kb(b,i[o-qb+_],t)).join(", ")+"]"]}return["["+("complex64"===t?Xb(e):Array.from(e)).map((m,g)=>Kb(m,i[g],t)).join(", ")+"]"]}let c=n.slice(1),u=r.slice(1),h=r[0]*s,d=[];if(o>c8){for(let m=0;m<qb;m++){let g=m*h;d.push(...Dw(e.slice(g,g+h),c,t,u,i,!1))}d.push("...");for(let m=o-qb;m<o;m++){let g=m*h;d.push(...Dw(e.slice(g,g+h),c,t,u,i,m===o-1))}}else for(let m=0;m<o;m++){let g=m*h;d.push(...Dw(e.slice(g,g+h),c,t,u,i,m===o-1))}let p=2===l?",":"";d[0]="["+(o>0?d[0]+p:"");for(let m=1;m<d.length-1;m++)d[m]=" "+d[m]+p;let f=",\n";for(let m=2;m<l;m++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(a?"":f),d}function Xb(e){let n=[];for(let t=0;t<e.length;t+=2)n.push([e[t],e[t+1]]);return n}var yr=class{constructor(e,n,t){if(this.dtype=n,this.shape=e.slice(),this.size=rn(e),null!=t){let r=t.length;T(r===this.size,()=>`Length of values '${r}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=t||P2(n,this.size),this.strides=Af(e)}set(e,...n){0===n.length&&(n=[0]),T(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);let t=this.locToIndex(n);this.values[t]=e}get(...e){0===e.length&&(e=[0]);let n=0;for(let r of e){if(r<0||r>=this.shape[n])throw new Error(`Requested out of range element at ${e}.   Buffer shape=${this.shape}`);n++}let t=e[e.length-1];for(let r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return this.values[t]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let n=e[e.length-1];for(let t=0;t<e.length-1;++t)n+=this.strides[t]*e[t];return n}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];let n=new Array(this.shape.length);for(let t=0;t<n.length-1;++t)n[t]=Math.floor(e/this.strides[t]),e-=n[t]*this.strides[t];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Hs().makeTensor(this.values,this.shape,this.dtype)}},Hs=null,Lm=null,gt=class{constructor(e,n,t,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=rn(e),this.strides=Af(e),this.dataId=t,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){var e=this;return R(function*(){let n=yield e.data();return Lm.buffer(e.shape,e.dtype,n)})()}bufferSync(){return Lm.buffer(this.shape,this.dtype,this.dataSync())}array(){var e=this;return R(function*(){let n=yield e.data();return Tf(e.shape,n,"complex64"===e.dtype)})()}arraySync(){return Tf(this.shape,this.dataSync(),"complex64"===this.dtype)}data(){var e=this;return R(function*(){e.throwIfDisposed();let n=Hs().read(e.dataId);if("string"===e.dtype){let t=yield n;try{return t.map(r=>Ew(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return n})()}dataToGPU(e){return this.throwIfDisposed(),Hs().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=Hs().readSync(this.dataId);if("string"===this.dtype)try{return e.map(n=>Ew(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}bytes(){var e=this;return R(function*(){e.throwIfDisposed();let n=yield Hs().read(e.dataId);return"string"===e.dtype?n:new Uint8Array(n.buffer)})()}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Hs().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Lm.print(this,e)}clone(){return this.throwIfDisposed(),Lm.clone(this)}toString(e=!1){return Xve(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Lm.cast(this,e)}variable(e=!0,n,t){return this.throwIfDisposed(),Hs().makeVariable(this,e,n,t)}};function ae(){return V2("Tensor",()=>gt)}Object.defineProperty(gt,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),ae();var ph=class extends gt{constructor(e,n,t,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=n,this.name=t}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!dl(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Hs().disposeTensor(this),this.dataId=e.dataId,Hs().incRef(this,null)}dispose(){Hs().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(ph,Symbol.hasInstance,{value:e=>e instanceof gt&&null!=e.assign&&e.assign instanceof Function});var j2,e,G2,q2,K2,X2,Ws={};it(Ws,{assertTypesMatch:()=>p8,getTensorsInContainer:()=>Y2,isTensorInList:()=>nxe,makeTypesMatch:()=>Gn}),(e=j2||(j2={})).R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6",function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(G2||(G2={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(q2||(q2={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(K2||(K2={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(X2||(X2={}));var txe={float32:K2,int32:G2,bool:q2,complex64:X2};function za(e,n){if("string"===e||"string"===n){if("string"===e&&"string"===n)return"string";throw new Error(`Can not upcast ${e} with ${n}`)}return txe[e][n]}function Aw(e){return za(e,"int32")}function d8(e){return null!=e&&"object"==typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function h8(e){return typeof GPUBuffer<"u"&&null!=e&&"object"==typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function Gn(e,n){if(e.dtype===n.dtype)return[e,n];let t=za(e.dtype,n.dtype);return[e.cast(t),n.cast(t)]}function p8(e,n){T(e.dtype===n.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${n.dtype}) input must match`)}function nxe(e,n){return n.some(t=>t.id===e.id)}function Y2(e){let n=[];return f8(e,n,new Set),n}function f8(e,n,t){if(null==e)return;if(e instanceof gt)return void n.push(e);if(!function rxe(e){return Array.isArray(e)||"object"==typeof e}(e))return;let r=e;for(let i in r){let a=r[i];t.has(a)||(t.add(a),f8(a,n,t))}}function Z2(e){return null!=e.kernelName}var m8=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},Q2=class q${constructor(n){this.ENV=n,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new m8}ready(){var n=this;return R(function*(){if(null!=n.pendingBackendInit)return n.pendingBackendInit.then(()=>{});if(null!=n.backendInstance)return;let t=n.getSortedBackends();for(let r=0;r<t.length;r++){let i=t[r];if(yield n.initializeBackend(i).success)return void(yield n.setBackend(i))}throw new Error("Could not initialize any backends, all backend initializations failed.")})()}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){let{name:n,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${n}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(n)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(n){if(!(n in this.registry)){if(!(n in this.registryFactory))return null;{let{asyncInit:t}=this.initializeBackend(n);if(t)return null}}return this.registry[n]}findBackendFactory(n){return n in this.registryFactory?this.registryFactory[n].factory:null}registerBackend(n,t,r=1){return n in this.registryFactory?(gc(`${n} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[n]={factory:t,priority:r},!0)}setBackend(n){var t=this;return R(function*(){if(null==t.registryFactory[n])throw new Error(`Backend name '${n}' not found in registry`);if(t.backendName=n,null==t.registry[n]){t.backendInstance=null;let{success:r,asyncInit:i}=t.initializeBackend(n);if(!(i?yield r:r))return!1}return t.backendInstance=t.registry[n],t.setupRegisteredKernels(),t.profiler=new class{constructor(e,n){this.backendTimer=e,this.logger=n,null==n&&(this.logger=new class{logKernelProfile(e,n,t,r,i,a){let s="number"==typeof r?bb(`${r}ms`,9):r.error,o=bb(e,25),l=n.rank,c=n.size,u=bb(n.shape.toString(),14),h="";for(let d in i){let p=i[d];if(null!=p){let f=p.shape||n.shape,m=f.length;h+=`${d}: ${m}D ${m>0?f:""} `}}console.log(`%c${o}\t%c${s}\t%c${l}D ${u}\t%c${c}\t%c${h}\t%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}})}profileKernel(e,n,t){let r,a,i=()=>{r=t()},s=jb();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();for(let o of r)o.dataSync();a=Promise.resolve({kernelMs:jb()-s})}if(Q().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let o=0;o<r.length;o++){let l=r[o];l.data().then(c=>{jve(c,l.dtype,e)})}return{kernelName:e,outputs:r,inputs:n,timeMs:a.then(o=>o.kernelMs),extraInfo:a.then(o=>null!=o.getExtraProfileInfo?o.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:n,outputs:t,timeMs:r,inputs:i,extraInfo:a}=e;t.forEach(s=>{Promise.all([s.data(),r,a]).then(o=>{this.logger.logKernelProfile(n,s,o[0],o[1],i,o[2])})})}}(t.backendInstance),!0})()}setupRegisteredKernels(){Sw(this.backendName).forEach(n=>{null!=n.setupFunc&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(n){Sw(n).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[n])})}initializeBackend(n){let t=this.registryFactory[n];if(null==t)throw new Error(`Cannot initialize backend ${n}, no registration found.`);try{let r=t.factory();if(!r||r instanceof gb||"function"!=typeof r.then)return this.registry[n]=r,{success:!0,asyncInit:!1};{let i=++this.pendingBackendInitId,a=r.then(s=>!(i<this.pendingBackendInitId||(this.registry[n]=s,this.pendingBackendInit=null,0))).catch(s=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,gc(`Initialization of backend ${n} failed`),gc(s.stack||s.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}}catch(r){return gc(`Initialization of backend ${n} failed`),gc(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(n){if(!(n in this.registryFactory))throw new Error(`${n} backend not found in registry`);this.backendName===n&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,n in this.registry&&(this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n]),delete this.registryFactory[n],this.backendName===n&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((n,t)=>this.registryFactory[t].priority-this.registryFactory[n].priority)}initializeBackendsAndReturnBest(){let n=this.getSortedBackends();for(let t=0;t<n.length;t++){let r=n[t],{success:i,asyncInit:a}=this.initializeBackend(r);if(a||i)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(n,t){let r=this.state.tensorInfo.get(t),i=r.backend,a=this.readSync(t),s=i.refCount(t);i.disposeData(t,!0),r.backend=n,n.move(t,a,r.shape,r.dtype,s),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(n,t){let i,r=null;if(null==t){if("function"!=typeof n)throw new Error("Please provide a function to tidy()");t=n}else{if("string"!=typeof n&&!(n instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=n}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=t(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(n,t,r){n();try{let i=r();return t(),i}catch(i){throw t(),i}}nextTensorId(){return q$.nextTensorId++}nextVariableId(){return q$.nextVariableId++}clone(n){let t=$.runKernel(_d,{x:n});return this.addTapeNode(this.state.activeScope.name,{x:n},[t],s=>({x:()=>$.runKernel(ed,{x:s},{dtype:"float32"})}),[],{}),t}runKernel(n,t,r){if(null==Ub(n,this.backendName))throw new Error(`Kernel '${n}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:n,inputs:t,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(n,t,r){let i=this.backend.numDataIds(),a=0;r.forEach(l=>{a+="complex64"===l.dtype?3:1});let o=i-t-a-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${n}'`)}runKernelFunc(n){let t,o,r=[],i=this.isTapeOn(),a=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let l,c=Z2(n)?n.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Z2(n)){let{kernelName:f,inputs:m,attrs:g}=n,y=Ub(f,this.backendName);T(null!=y,()=>`Cannot find registered kernel '${f}' for backend '${this.backendName}'`),o=()=>{let b=this.backend.numDataIds();l=y.kernelFunc({inputs:m,attrs:g,backend:this.backend});let _=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(f,b,_);let v=_.map(x=>null!=x.rank?x:this.makeTensorFromTensorInfo(x));if(i){let x=this.getTensorsForGradient(f,m,v);r=this.saveTensorsForBackwardMode(x)}return v}}else{let{forwardFunc:f}=n,m=g=>{i&&(r=g.map(y=>this.keep(this.clone(y))))};o=()=>{let g=this.backend.numDataIds();l=this.tidy(()=>f(this.backend,m));let y=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,g,y),y}}let p,{inputs:u,attrs:h}=n,d=Z2(n)?null:n.backwardsFunc;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(p=this.profiler.profileKernel(c,u,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),t=p.outputs):t=o()}),i&&this.addTapeNode(c,u,t,d,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(f=>null!=u[f]?u[f].shape:null),outputShapes:t.map(f=>f.shape),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(l)?t:t[0]}saveTensorsForBackwardMode(n){return n.map(t=>this.keep(this.clone(t)))}getTensorsForGradient(n,t,r){let i=z2(n);if(null!=i){let o,a=i.inputsToSave||[],s=i.outputsToSave||[];i.saveAllInputs?(T(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(t).map(c=>t[c])):o=a.map(c=>t[c]);let l=r.filter((c,u)=>s[u]);return o.concat(l)}return[]}makeTensor(n,t,r,i){if(null==n)throw new Error("Values passed to engine.makeTensor() are null");i=i||this.backend;let a=n;"string"===(r=r||"float32")&&uc(n[0])&&(a=n.map(l=>Gb(l)));let s=i.write(a,t,r),o=new gt(t,r,s,this.nextTensorId());if(this.trackTensor(o,i),"string"===r){let l=this.state.tensorInfo.get(s),c=qW(a);this.state.numBytes+=c-l.bytes,l.bytes=c}return o}makeTensorFromDataId(n,t,r,i){return this.makeTensorFromTensorInfo({dataId:n,shape:t,dtype:r=r||"float32"},i)}makeTensorFromTensorInfo(n,t){let{dataId:r,shape:i,dtype:a}=n,s=new gt(i,a,r,this.nextTensorId());return this.trackTensor(s,t),s}makeVariable(n,t=!0,r,i){r=r||this.nextVariableId().toString(),null!=i&&i!==n.dtype&&(n=n.cast(i));let a=new ph(n,t,r,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(n,t){this.state.numTensors++,"string"===n.dtype&&this.state.numStringTensors++;let r=0;"complex64"!==n.dtype&&"string"!==n.dtype&&(r=n.size*ow(n.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(n.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(n.dataId,{backend:t||this.backend,dtype:n.dtype,shape:n.shape,bytes:r})),n instanceof ph||this.track(n)}incRef(n,t){this.trackTensor(n,t),this.backend.incRef(n.dataId)}removeDataId(n,t){this.state.tensorInfo.has(n)&&this.state.tensorInfo.get(n).backend===t&&(this.state.tensorInfo.delete(n),this.state.numDataBuffers--)}disposeTensor(n){if(!this.state.tensorInfo.has(n.dataId))return;let t=this.state.tensorInfo.get(n.dataId);if(this.state.numTensors--,"string"===n.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==n.dtype&&"string"!==n.dtype){let r=n.size*ow(n.dtype);this.state.numBytes-=r}t.backend.disposeData(n.dataId)&&this.removeDataId(n.dataId,t.backend)}disposeVariables(){for(let n in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[n])}disposeVariable(n){this.disposeTensor(n),null!=this.state.registeredVariables[n.name]&&delete this.state.registeredVariables[n.name]}memory(){let n=this.backend.memory();return n.numTensors=this.state.numTensors,n.numDataBuffers=this.state.numDataBuffers,n.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(n.unreliable=!0,null==n.reasons&&(n.reasons=[]),n.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),n}profile(n){var t=this;return R(function*(){t.state.profiling=!0;let r=t.state.numBytes,i=t.state.numTensors;t.state.activeProfile.kernels=[],t.state.activeProfile.result=yield n(),t.state.profiling=!1,t.state.activeProfile.peakBytes=Math.max(...t.state.activeProfile.kernels.map(a=>a.totalBytesSnapshot)),t.state.activeProfile.newBytes=t.state.numBytes-r,t.state.activeProfile.newTensors=t.state.numTensors-i;for(let a of t.state.activeProfile.kernels)a.kernelTimeMs=yield a.kernelTimeMs,a.extraInfo=yield a.extraInfo;return t.state.activeProfile})()}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(n,t,r,i,a,s){let o={id:this.state.nextTapeNodeId++,kernelName:n,inputs:t,outputs:r,saved:a},l=z2(n);null!=l&&(i=l.gradFunc),null!=i&&(o.gradient=c=>(c=c.map((u,h)=>{if(null==u){let d=r[h],p=cw(d.size,d.dtype);return this.makeTensor(p,d.shape,d.dtype)}return u}),i(c.length>1?c:c[0],a,s))),this.state.activeTape.push(o)}keep(n){return n.kept=!0,n}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(n){let t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};n&&(t.name=n),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(n){let t=Y2(n),r=new Set(t.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){let s=this.state.activeScope.track[a];!s.kept&&!r.has(s.id)&&s.dispose()}let i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(a=>{!a.kept&&a.scopeId===i.id&&this.track(a)})}gradients(n,t,r,i=!1){if(T(t.length>0,()=>"gradients() received an empty list of xs."),null!=r&&"float32"!==r.dtype)throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);let a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",n));T(a instanceof gt,()=>"The result y returned by f() must be a tensor.");let s=function qve(e,n,t){let r={},i={};for(let l=0;l<n.length;l++)r[n[l].id]=!0;for(let l=0;l<e.length;l++){let c=e[l],u=c.inputs;for(let h in u){let d=u[h],p=!1;for(let f=0;f<n.length;f++)if(r[d.id]){c.outputs.forEach(m=>r[m.id]=!0),p=!0,i[c.id]=!0;break}if(p)break}}let a={};a[t.id]=!0;let s={};for(let l=e.length-1;l>=0;l--){let c=e[l],u=c.inputs;for(let h=0;h<c.outputs.length;h++)if(a[c.outputs[h].id]){for(let d in u)a[u[d].id]=!0,s[c.id]=!0;break}}let o=[];for(let l=0;l<e.length;l++){let c=e[l];if(i[c.id]&&s[c.id]){let u={};for(let d in c.inputs){let p=c.inputs[d];r[p.id]&&(u[d]=p)}let h=Object.assign({},c);h.inputs=u,h.outputs=c.outputs,o.push(h)}}return o}(this.state.activeTape,t,a);if(!i&&0===s.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let o={};o[a.id]=r??function ixe(e){let n=L2(rn(e),"float32");return $.makeTensor(n,e,"float32")}(a.shape),function Kve(e,n,t,r){for(let i=n.length-1;i>=0;i--){let a=n[i],s=[];if(a.outputs.forEach(l=>{let c=e[l.id];s.push(null!=c?c:null)}),null==a.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);let o=a.gradient(s);for(let l in a.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);let c=t(()=>o[l]());if("float32"!==c.dtype)throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);let u=a.inputs[l];if(!dl(c.shape,u.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(null==e[u.id])e[u.id]=c;else{let h=e[u.id];e[u.id]=r(h,c),h.dispose()}}}}(o,s,c=>this.tidy(c),axe);let l=t.map(c=>o[c.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(c=>{for(let u of c.saved)u.dispose()}),this.state.activeTape=null),{value:a,grads:l}})}customGrad(n){return T(dc(n),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{T(t.every(o=>o instanceof gt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r,i={};return t.forEach((o,l)=>{i[l]=o}),this.runKernelFunc({forwardFunc:(o,l)=>(r=n(...t,l),T(r.value instanceof gt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),T(dc(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),backwardsFunc:(o,l)=>{let c=r.gradFunc(o,l),u=Array.isArray(c)?c:[c];T(u.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),T(u.every(d=>d instanceof gt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let h={};return u.forEach((d,p)=>{h[p]=()=>d}),h},inputs:i})}}readSync(n){return this.state.tensorInfo.get(n).backend.readSync(n)}read(n){return this.state.tensorInfo.get(n).backend.read(n)}readToGPU(n,t){return this.state.tensorInfo.get(n).backend.readToGPU(n,t)}time(n){var t=this;return R(function*(){let r=jb(),i=yield t.backend.time(n);return i.wallMs=jb()-r,i})()}track(n){return null!=this.state.activeScope&&(n.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(n)),n}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new m8;for(let n in this.registry)this.disposeRegisteredKernels(n),this.registry[n].dispose(),delete this.registry[n];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};function g8(){let e=JW();if(null==e._tfengine){let n=new QW(e);e._tfengine=new Q2(n)}return function Ive(e){$2=e}(e._tfengine.ENV),function Qve(e){Hs=e}(()=>e._tfengine),e._tfengine}Q2.nextTensorId=0,Q2.nextVariableId=0;var $=g8();function axe(e,n){return $.runKernel(hc,{a:e,b:n})}var J2,Yb={};function oxe(e){J2=e}function lxe(e){if(void 0!==J2)return J2;if(e||function sxe(){return typeof navigator<"u"&&null!=navigator}()){if(e||(e=navigator),"ReactNative"===e.product)return!0;let n=e.userAgent||e.vendor||(typeof window<"u"?window.opera:"");return n?/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)):e.userAgentData&&e.userAgentData.mobile}return!1}function y8(){return typeof window<"u"&&null!=window.document||typeof WorkerGlobalScope<"u"}it(Yb,{isBrowser:()=>y8,isMobile:()=>lxe,mockIsMobile:()=>oxe});var Ki=Q();function vo(e,n){let t=e;if(Hr(e))return"string"===n?[]:[e.length];if(d8(e))return[e.height,e.width*(e.channels||"RGBA").length];if(h8(e))return[e.buffer.size/(null==n?4:ow(n))];if(!Array.isArray(e))return[];let r=[];for(;Array.isArray(t)||Hr(t)&&"string"!==n;)r.push(t.length),t=t[0];return Array.isArray(e)&&Q().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&b8(e,r,[]),r}function b8(e,n,t){if(t=t||[],!Array.isArray(e)&&!Hr(e))return void T(0===n.length,()=>`Element arr[${t.join("][")}] is a primitive, but should be an array/TypedArray of ${n[0]} elements`);T(n.length>0,()=>`Element arr[${t.join("][")}] should be a primitive, but is an array of ${e.length} elements`),T(e.length===n[0],()=>`Element arr[${t.join("][")}] should have ${n[0]} elements, but has ${e.length} elements`);let r=n.slice(1);for(let i=0;i<e.length;++i)b8(e[i],r,t.concat(i))}function _8(e,n,t,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==n||"numeric"===e&&"string"===n)throw new Error(`Argument '${t}' passed to '${r}' must be ${e} tensor, but got ${n} tensor`)}}function A(e,n,t,r="numeric"){if(e instanceof ae())return _8(r,e.dtype,n,t),e;let i=_b(e);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),_8(r,i,n,t),null==e||!Hr(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error(`Argument '${n}' passed to '${t}' must be a Tensor or TensorLike, but got '${null==e?"null":e.constructor.name}'`);let a=vo(e,i);!Hr(e)&&!Array.isArray(e)&&(e=[e]);let s="string"!==i?Mw(e,i):bc(e,[],!0);return $.makeTensor(s,a,i)}function Zb(e,n,t,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${n} passed to ${t} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((i,a)=>A(i,`${n}[${a}]`,t,r))}Ki.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Ki.registerFlag("IS_BROWSER",()=>y8()),Ki.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"),Ki.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),Ki.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),Ki.registerFlag("PROD",()=>!1),Ki.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Ki.getBool("DEBUG")),Ki.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),Ki.registerFlag("IS_TEST",()=>!1),Ki.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Ki.getBool("DEBUG")),Ki.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),Ki.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),Ki.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);var eD="__op";function V(e){let n=Object.keys(e);if(1!==n.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${n.length} keys.`);let t=n[0],r=e[t];t.endsWith("_")&&(t=t.substring(0,t.length-1)),t+=eD;let i=(...a)=>{$.startScope(t);try{let s=r(...a);return uw(s)&&console.error("Cannot return a Promise inside of tidy."),$.endScope(s),s}catch(s){throw $.endScope(null),s}};return Object.defineProperty(i,"name",{value:t,configurable:!0}),i}var pl=V({complex_:function cxe(e,n){let t=A(e,"real","complex"),r=A(n,"imag","complex");return Di(t.shape,r.shape,`real and imag shapes, ${t.shape} and ${r.shape}, must match in call to tf.complex().`),$.runKernel(dw,{real:t,imag:r})}});function _c(e,n,t,r){if(null==r)r=_b(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(h8(e)||d8(e)){if("float32"!==r&&"int32"!==r)throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return $.backend.createTensorFromGPUData(e,n||t,r)}if(!Hr(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=n){ya(n);let i=rn(n),a=rn(t);T(i===a,()=>`Based on the provided shape, [${n}], the tensor should have ${i} values but has ${a}`);for(let s=0;s<t.length;++s){let l=s!==t.length-1||t[s]!==rn(n.slice(s));T(t[s]===n[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${t}) does not match the provided shape (${n}). `)}}return!Hr(e)&&!Array.isArray(e)&&(e=[e]),n=n||t,e="string"!==r?Mw(e,r):bc(e,[],!0),$.makeTensor(e,n,r)}function Ti(e,n,t){return _c(e,n,vo(e,t),t)}var fh={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},fl=class cie{static join(n){return new cie(n).slice()}constructor(n){if(this.shards=[],this.previousShardIndex=0,null==n||(n instanceof Array||(n=[n]),0===(n=n.map(r=>Hr(r)?r.buffer:r)).length))return;this.bufferUniformSize=n[0].byteLength;let t=0;for(let r=0;r<n.length;r++){let i=n[r];r!==n.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let a=t+i.byteLength;this.shards.push({buffer:i,start:t,end:a}),t=a}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(n=0,t=this.byteLength){if(0===this.shards.length)return new ArrayBuffer(0);if(n=isNaN(Number(n))?0:n,t=isNaN(Number(t))?0:t,n=Math.max(0,n),(t=Math.min(this.byteLength,t))<=n)return new ArrayBuffer(0);let r=this.findShardForByte(n);if(-1===r)throw new Error(`Could not find start shard for byte ${n}`);let a=new ArrayBuffer(t-n),s=new Uint8Array(a),o=0;for(let l=r;l<this.shards.length;l++){let c=this.shards[l],u=n+o-c.start,h=o,d=Math.min(t,c.end)-c.start,p=new Uint8Array(c.buffer,u,d-u);if(s.set(p,h),o+=p.length,t<c.end)break}return a}findShardForByte(n){if(0===this.shards.length||n<0||n>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(n/this.bufferUniformSize),this.previousShardIndex;function t(i){return n<i.start?-1:n>=i.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;let r=function uxe(e,n){let t=0,r=e.length;for(;t<=r;){let i=Math.floor((r-t)/2)+t,a=n(e[i]);if(0===a)return i;a<0?r=i:t=i+1}return-1}(this.shards,t);return-1===r?-1:(this.previousShardIndex=r,this.previousShardIndex)}};function dxe(){Q().set("PROD",!0)}function hxe(){Q().set("DEBUG",!0)}function pxe(){Q().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function tD(e){Q().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function fxe(){$.disposeVariables()}function ys(){return $}function Tw(){return $.memory()}function mxe(e){return $.profile(e)}function G(e,n){return $.tidy(e,n)}function at(e){Y2(e).forEach(n=>n.dispose())}function Ar(e){return $.keep(e)}function gxe(e){return $.time(e)}function yxe(e){return $.setBackend(e)}function bxe(){return $.ready()}function v8(){return $.backendName}function _xe(e){$.removeBackend(e)}function vxe(e){return $.findBackend(e)}function xxe(e){return $.findBackendFactory(e)}function Nw(e,n,t=1){return $.registerBackend(e,n,t)}function nD(){return $.backend}function wxe(e,n){Q().setPlatform(e,n)}var vc=4;function Cxe(e,n){return rD.apply(this,arguments)}function rD(){return rD=R(function*(e,n){let t=[],r=[],i=Array.isArray(e)?e.map(s=>s.name):Object.keys(e);for(let s=0;s<i.length;++s){let o=i[s],l=Array.isArray(e)?e[s].tensor:e[o];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype&&"complex64"!==l.dtype)throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);let c={name:o,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){let u=new Promise(function(){var h=R(function*(d){let p=yield l.bytes(),f=p.reduce((y,b)=>y+b.length,0)+vc*p.length,m=new Uint8Array(f),g=0;for(let y=0;y<p.length;y++){let b=p[y],_=new Uint8Array(new Uint32Array([b.length]).buffer);m.set(_,g),g+=vc,m.set(b,g),g+=b.length}d(m)});return function(d){return h.apply(this,arguments)}}());r.push(u)}else r.push(l.data());null!=n&&(c.group=n),t.push(c)}return{data:Ixe(yield Promise.all(r)),specs:t}}),rD.apply(this,arguments)}function x8(e,n){let t=new fl(e),r={},i=0;for(let a of n){let s=kxe(a,(o,l)=>t.slice(i+o,i+l));r[a.name]=w8(a,t.slice(i,i+s)),i+=s}return r}function kxe(e,n){let r,t=rn(e.shape);if("quantization"in e)r=fh[e.quantization.dtype];else{if("string"===e.dtype){let i=0;for(let a=0;a<t;a++)i+=vc+new Uint32Array(n(i,i+vc))[0];return i}r=fh[e.dtype]}return t*r}function Sxe(e,n){return iD.apply(this,arguments)}function iD(){return iD=R(function*(e,n){let r,t=rn(e.shape);if("quantization"in e)r=fh[e.quantization.dtype];else{if("string"===e.dtype){let i=0;for(let a=0;a<t;a++)i+=vc+new Uint32Array(yield n(i,i+vc))[0];return i}r=fh[e.dtype]}return t*r}),iD.apply(this,arguments)}function w8(e,n){let s,t=e.name,r=e.dtype,i=e.shape,a=rn(i),o=0;if("quantization"in e){let l=e.quantization;if("uint8"===l.dtype||"uint16"===l.dtype){if(!("min"in l)||!("scale"in l))throw new Error(`Weight ${e.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==l.dtype)throw new Error(`Weight ${e.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==r)throw new Error(`Weight ${e.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}let c=fh[l.dtype],u="uint8"===l.dtype?new Uint8Array(n):new Uint16Array(n);if("float32"===r)if("uint8"===l.dtype||"uint16"===l.dtype){s=new Float32Array(u.length);for(let h=0;h<u.length;h++)s[h]=u[h]*l.scale+l.min}else{if("float16"!==l.dtype)throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);s=function Oxe(){let e=function Axe(){let e=t=>{let r=t<<13,i=0;for(;!(8388608&r);)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},n=new Uint32Array(2048);n[0]=0;for(let t=1;t<1024;t++)n[t]=e(t);for(let t=1024;t<2048;t++)n[t]=939524096+(t-1024<<13);return n}(),n=function Txe(){let e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let n=1;n<31;n++)e[n]=n<<23;for(let n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),t=function Nxe(){let e=new Uint32Array(64);for(let n=0;n<64;n++)e[n]=1024;return e[0]=e[32]=0,e}();return r=>{let i=new ArrayBuffer(4*r.length),a=new Uint32Array(i);for(let s=0;s<r.length;s++){let o=r[s];a[s]=e[t[o>>10]+(1023&o)]+n[o>>10]}return new Float32Array(i)}}()(u)}else{if("int32"!==r)throw new Error(`Unsupported dtype in weight '${t}': ${r}`);if("uint8"!==l.dtype&&"uint16"!==l.dtype)throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);s=new Int32Array(u.length);for(let h=0;h<u.length;h++)s[h]=Math.round(u[h]*l.scale+l.min)}o+=a*c}else if("string"===r){let l=rn(e.shape);s=[];for(let c=0;c<l;c++){let u=new Uint32Array(n.slice(o,o+vc))[0];o+=vc;let h=new Uint8Array(n.slice(o,o+u));s.push(h),o+=u}}else{let l=fh[r];if("float32"===r)s=new Float32Array(n);else if("int32"===r)s=new Int32Array(n);else{if("bool"!==r){if("complex64"===r){s=new Float32Array(n);let c=new Float32Array(s.length/2),u=new Float32Array(s.length/2);for(let f=0;f<c.length;f++)c[f]=s[2*f],u[f]=s[2*f+1];let h=Ti(c,i,"float32"),d=Ti(u,i,"float32"),p=pl(h,d);return h.dispose(),d.dispose(),p}throw new Error(`Unsupported dtype in weight '${t}': ${r}`)}s=new Uint8Array(n)}o+=a*l}return Ti(s,i,r)}function C8(e,n,t){return aD.apply(this,arguments)}function aD(){return aD=R(function*(e,n,t){let r=new Uint8Array(n);for(;r.byteLength<t;){let{done:i,value:a}=yield e.read();if(i&&null==a)throw new Error(`Reader is done but ${t-r.byteLength} bytes are still expected`);let s=new Uint8Array(r.length+a.byteLength);s.set(r,0),s.set(new Uint8Array(a),r.length),r=s}return r.buffer}),aD.apply(this,arguments)}function k8(e,n){return sD.apply(this,arguments)}function sD(){return sD=R(function*(e,n){let t={},r=e.getReader(),i=new ArrayBuffer(0);for(let a of n){let s=yield Sxe(a,function(){var c=R(function*(u,h){return i=yield C8(r,i,h),i.slice(u,h)});return function(u,h){return c.apply(this,arguments)}}());i=yield C8(r,i,s);let o=i.slice(0,s);i=i.slice(s);let l=w8(a,o);if(t[a.name]=l,"webgpu"===v8()){let c=nD();"uploadToGPU"in c&&rn(l.shape)>=Q().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return t}),sD.apply(this,arguments)}function Ixe(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let n=0,t=[];e.forEach(a=>{if(n+=a.byteLength,t.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${a.constructor.name}`)});let r=new Uint8Array(n),i=0;return t.forEach(a=>{r.set(new Uint8Array(a.buffer),i),i+=a.byteLength}),r.buffer}var oD=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function S8(e){return oD?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function Dxe(e){return fl.join(e)}function I8(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);let t=e.split("/");return t[t.length-1]}function M8(e,n){let t={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n};return null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig),t}function E8(e,n,t){let r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!n)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!t)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=n,r.weightData=t}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}function lD(e,n){return cD.apply(this,arguments)}function cD(){return cD=R(function*(e,n){let t,r;return null!=e.weightsManifest&&([t,r]=yield n(e.weightsManifest)),E8(e,t,r)}),cD.apply(this,arguments)}function Qb(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:S8(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:S8(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new fl(e.weightData).byteLength}}function uD(e){let n=[];for(let t of e)n.push(...t.weights);return n}var Ua=class no{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==no.instance&&(no.instance=new no),no.instance}static registerSaveRouter(n){no.getInstance().saveRouters.push(n)}static registerLoadRouter(n){no.getInstance().loadRouters.push(n)}static getSaveHandlers(n){return no.getHandlers(n,"save")}static getLoadHandlers(n,t){return no.getHandlers(n,"load",t)}static getHandlers(n,t,r){let i=[];return("load"===t?no.getInstance().loadRouters:no.getInstance().saveRouters).forEach(a=>{let s=a(n,r);null!==s&&i.push(s)}),i}},Fxe=e=>Ua.registerSaveRouter(e),Rxe=e=>Ua.registerLoadRouter(e),Pxe=e=>Ua.getSaveHandlers(e),Lxe=(e,n)=>Ua.getLoadHandlers(e,n),dD="tensorflowjs",mh="models_store",xc="model_info_store";function D8(){if(!Q().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e=typeof window>"u"?self:window,n=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==n)throw new Error("The current browser does not appear to support IndexedDB.");return n}function pD(e){let n=e.result;n.createObjectStore(mh,{keyPath:"modelPath"}),n.createObjectStore(xc,{keyPath:"modelPath"})}var gh=class{constructor(e){if(this.indexedDB=D8(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}save(e){var n=this;return R(function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return n.databaseAction(n.modelPath,e)})()}load(){var e=this;return R(function*(){return e.databaseAction(e.modelPath)})()}databaseAction(e,n){return new Promise((t,r)=>{let i=this.indexedDB.open(dD,1);i.onupgradeneeded=()=>pD(i),i.onsuccess=()=>{let a=i.result;if(null==n){let s=a.transaction(mh,"readonly"),o=s.objectStore(mh).get(this.modelPath);o.onsuccess=()=>{if(null==o.result)return a.close(),r(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));t(o.result.modelArtifacts)},o.onerror=l=>(a.close(),r(o.error)),s.oncomplete=()=>a.close()}else{n.weightData=fl.join(n.weightData);let c,u,s=Qb(n),o=a.transaction(xc,"readwrite"),l=o.objectStore(xc);try{c=l.put({modelPath:this.modelPath,modelArtifactsInfo:s})}catch(h){return r(h)}c.onsuccess=()=>{u=a.transaction(mh,"readwrite");let d,h=u.objectStore(mh);try{d=h.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:s})}catch(p){return r(p)}d.onsuccess=()=>t({modelArtifactsInfo:s}),d.onerror=p=>{l=o.objectStore(xc);let f=l.delete(this.modelPath);f.onsuccess=()=>(a.close(),r(d.error)),f.onerror=m=>(a.close(),r(d.error))}},c.onerror=h=>(a.close(),r(c.error)),o.oncomplete=()=>{null==u?a.close():u.oncomplete=()=>a.close()}}},i.onerror=a=>r(i.error)})}};gh.URL_SCHEME="indexeddb://";var A8=e=>Q().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(gh.URL_SCHEME)?function $xe(e){return new gh(e)}(e.slice(gh.URL_SCHEME.length)):null;Ua.registerSaveRouter(A8),Ua.registerLoadRouter(A8);var ml="/",$m="tensorflowjs_models",T8="info",zxe="model_topology",Uxe="weight_specs",Hxe="weight_data",Wxe="model_metadata";function N8(e){return{info:[$m,e,T8].join(ml),topology:[$m,e,zxe].join(ml),weightSpecs:[$m,e,Uxe].join(ml),weightData:[$m,e,Hxe].join(ml),modelMetadata:[$m,e,Wxe].join(ml)}}function O8(e){for(let n of Object.values(e))window.localStorage.removeItem(n)}function jxe(e){let n=e.split(ml);if(n.length<3)throw new Error(`Invalid key format: ${e}`);return n.slice(1,n.length-1).join(ml)}var yh=class{constructor(e){if(!Q().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=N8(this.modelPath)}save(e){var n=this;return R(function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=Qb(e),a=fl.join(e.weightData);try{return n.LS.setItem(n.keys.info,JSON.stringify(i)),n.LS.setItem(n.keys.topology,t),n.LS.setItem(n.keys.weightSpecs,r),n.LS.setItem(n.keys.weightData,function Mxe(e){if(oD)return Buffer.from(e).toString("base64");let n=new Uint8Array(e),t="";for(let r=0,i=n.length;r<i;r++)t+=String.fromCharCode(n[r]);return btoa(t)}(a)),n.LS.setItem(n.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0})),{modelArtifactsInfo:i}}catch{throw O8(n.keys),new Error(`Failed to save model '${n.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}})()}load(){var e=this;return R(function*(){let n=JSON.parse(e.LS.getItem(e.keys.info));if(null==n)throw new Error(`In local storage, there is no model with name '${e.modelPath}'`);if("JSON"!==n.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let t={},r=JSON.parse(e.LS.getItem(e.keys.topology));if(null==r)throw new Error(`In local storage, the topology of model '${e.modelPath}' is missing.`);t.modelTopology=r;let i=JSON.parse(e.LS.getItem(e.keys.weightSpecs));if(null==i)throw new Error(`In local storage, the weight specs of model '${e.modelPath}' are missing.`);t.weightSpecs=i;let a=e.LS.getItem(e.keys.modelMetadata);if(null!=a){let o=JSON.parse(a);t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy,null!=o.signature&&(t.signature=o.signature),null!=o.userDefinedMetadata&&(t.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(t.modelInitializer=o.modelInitializer),null!=o.initializerSignature&&(t.initializerSignature=o.initializerSignature),null!=o.trainingConfig&&(t.trainingConfig=o.trainingConfig)}let s=e.LS.getItem(e.keys.weightData);if(null==s)throw new Error(`In local storage, the binary weight values of model '${e.modelPath}' are missing.`);return t.weightData=function Exe(e){if(oD){let r=Buffer.from(e,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}let n=atob(e),t=new Uint8Array(n.length);for(let r=0;r<n.length;++r)t.set([n.charCodeAt(r)],r);return t.buffer}(s),t})()}};yh.URL_SCHEME="localstorage://";var F8=e=>Q().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(yh.URL_SCHEME)?function qxe(e){return new yh(e)}(e.slice(yh.URL_SCHEME.length)):null;Ua.registerSaveRouter(F8),Ua.registerLoadRouter(F8);var Bm="://",wc=class gu{constructor(){this.managers={}}static getInstance(){return null==gu.instance&&(gu.instance=new gu),gu.instance}static registerManager(n,t){T(null!=n,()=>"scheme must not be undefined or null."),n.endsWith(Bm)&&(n=n.slice(0,n.indexOf(Bm))),T(n.length>0,()=>"scheme must not be an empty string.");let r=gu.getInstance();T(null==r.managers[n],()=>`A model store manager is already registered for scheme '${n}'.`),r.managers[n]=t}static getManager(n){let t=gu.getInstance().managers[n];if(null==t)throw new Error(`Cannot find model manager for scheme '${n}'`);return t}static getSchemes(){return Object.keys(gu.getInstance().managers)}};function Ow(e){if(-1===e.indexOf(Bm))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${wc.getSchemes().join(",")}`);return{scheme:e.split(Bm)[0],path:e.split(Bm)[1]}}function R8(e,n){return fD.apply(this,arguments)}function fD(){return fD=R(function*(e,n,t=!1){T(e!==n,()=>`Old path and new path are the same: '${e}'`);let r=Ua.getLoadHandlers(e);T(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),T(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);let i=r[0],a=Ua.getSaveHandlers(n);T(a.length>0,()=>`Copying failed because no save handler is found for destination URL ${n}.`),T(a.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${n}.`);let s=a[0],o=Ow(e).scheme,l=Ow(e).path,c=o===Ow(e).scheme,u=yield i.load();t&&c&&(yield wc.getManager(o).removeModel(l));let h=yield s.save(u);return t&&!c&&(yield wc.getManager(o).removeModel(l)),h.modelArtifactsInfo}),fD.apply(this,arguments)}function Xxe(){return mD.apply(this,arguments)}function mD(){return mD=R(function*(){let e=wc.getSchemes(),n={};for(let t of e){let r=yield wc.getManager(t).listModels();for(let i in r)n[t+Bm+i]=r[i]}return n}),mD.apply(this,arguments)}function Yxe(e){return gD.apply(this,arguments)}function gD(){return gD=R(function*(e){let n=Ow(e);return wc.getManager(n.scheme).removeModel(n.path)}),gD.apply(this,arguments)}function Zxe(e,n){return yD.apply(this,arguments)}function yD(){return yD=R(function*(e,n){return R8(e,n,!1)}),yD.apply(this,arguments)}function Qxe(e,n){return bD.apply(this,arguments)}function bD(){return bD=R(function*(e,n){return R8(e,n,!0)}),bD.apply(this,arguments)}if(Q().get("IS_BROWSER")){Q().setPlatform("browser",new class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if("utf-8"!==n&&"utf8"!==n)throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){typeof window>"u"||!Q().getBool("USE_SETTIMEOUTCUSTOM")?setTimeout(e,n):(this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",t=>{t.source===window&&t.data.name===this.messageName&&(t.stopPropagation(),(0,this.functionRefs[t.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0))},!0)))}isTypedArray(e){return i8(e)}});try{wc.registerManager(yh.URL_SCHEME,new class{constructor(){T(Q().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),T(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){var e=this;return R(function*(){let n={},t=$m+ml,r=ml+T8;for(let i=0;i<e.LS.length;++i){let a=e.LS.key(i);a.startsWith(t)&&a.endsWith(r)&&(n[jxe(a)]=JSON.parse(e.LS.getItem(a)))}return n})()}removeModel(e){var n=this;return R(function*(){let t=N8(e=function Gxe(e){return e.startsWith(yh.URL_SCHEME)?e.slice(yh.URL_SCHEME.length):e}(e));if(null==n.LS.getItem(t.info))throw new Error(`Cannot find model at path '${e}'`);let r=JSON.parse(n.LS.getItem(t.info));return O8(t),r})()}})}catch{}try{wc.registerManager(gh.URL_SCHEME,new class{constructor(){this.indexedDB=D8()}listModels(){var e=this;return R(function*(){return new Promise((n,t)=>{let r=e.indexedDB.open(dD,1);r.onupgradeneeded=()=>pD(r),r.onsuccess=()=>{let i=r.result,a=i.transaction(xc,"readonly"),s=a.objectStore(xc).getAll();s.onsuccess=()=>{let o={};for(let l of s.result)o[l.modelPath]=l.modelArtifactsInfo;n(o)},s.onerror=o=>(i.close(),t(s.error)),a.oncomplete=()=>i.close()},r.onerror=i=>t(r.error)})})()}removeModel(e){var n=this;return R(function*(){return e=function Bxe(e){return e.startsWith(gh.URL_SCHEME)?e.slice(gh.URL_SCHEME.length):e}(e),new Promise((t,r)=>{let i=n.indexedDB.open(dD,1);i.onupgradeneeded=()=>pD(i),i.onsuccess=()=>{let c,a=i.result,s=a.transaction(xc,"readwrite"),o=s.objectStore(xc),l=o.get(e);l.onsuccess=()=>{if(null==l.result)return a.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{let u=o.delete(e),h=()=>{c=a.transaction(mh,"readwrite");let d=c.objectStore(mh).delete(e);d.onsuccess=()=>t(l.result.modelArtifactsInfo),d.onerror=p=>r(l.error)};u.onsuccess=h,u.onerror=d=>(h(),a.close(),r(l.error))}},l.onerror=u=>(a.close(),r(l.error)),s.oncomplete=()=>{null==c?a.close():c.oncomplete=()=>a.close()}},i.onerror=a=>r(i.error)})})()}})}catch{}}var _D;function wt(e,n="float32",t){return n=n||"float32",ya(e),new yr(e,n,t)}Q().get("IS_NODE")&&!Q().get("IS_BROWSER")&&Q().setPlatform("node",new class{constructor(){this.util=G_e(),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return null!=Q().global.fetch?Q().global.fetch(e,n):(null==_D&&(_D=j_e()),_D(e,n))}now(){let e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,n){if("utf-8"!==n&&"utf8"!==n)throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return 0===e.length?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}});var xe=V({cast_:function n0e(e,n){let t=A(e,"x","cast");if(!GW(n))throw new Error(`Failed to cast to unknown dtype ${n}`);if("string"===n&&"string"!==t.dtype||"string"!==n&&"string"===t.dtype)throw new Error("Only strings can be casted to strings");return $.runKernel(ed,{x:t},{dtype:n})}}),xo=V({clone_:function r0e(e){let n={x:A(e,"x","clone","string_or_numeric")};return $.runKernel(_d,n)}});function vD(e,n=!1){console.log(e.toString(n))}g8(),function Jve(e){Lm=e}({buffer:wt,cast:xe,clone:xo,print:vD});var se=V({add_:function a0e(e,n){let t=A(e,"a","add"),r=A(n,"b","add");return[t,r]=Gn(t,r),$.runKernel(hc,{a:t,b:r})}}),Fw=V({floorDiv_:function s0e(e,n){let t=A(e,"a","floorDiv"),r=A(n,"b","floorDiv");return[t,r]=Gn(t,r),$.runKernel(gd,{a:t,b:r})}}),Te=V({div_:function o0e(e,n){let t=A(e,"a","div"),r=A(n,"b","div");return[t,r]=Gn(t,r),"int32"===t.dtype&&"int32"===r.dtype?Fw(t,r):$.runKernel(ud,{a:t,b:r},{})}}),U=V({mul_:function l0e(e,n){let t=A(e,"a","mul"),r=A(n,"b","mul");return[t,r]=Gn(t,r),$.runKernel(Rd,{a:t,b:r})}}),br=V({abs_:function c0e(e){let n=A(e,"x","abs");return $.runKernel("complex64"===n.dtype?Cb:Nf,{x:n})}}),xD=V({acos_:function u0e(e){let n={x:A(e,"x","acos")};return $.runKernel(Wu,n)}}),wD=V({acosh_:function d0e(e){let n={x:A(e,"x","acosh")};return $.runKernel(ju,n)}}),P8=V({addN_:function h0e(e){T(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),T(e.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`);let n=e.map((i,a)=>A(i,`tensors${a}`,"addN")),t=n[0];return n.forEach(i=>{if(i.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),n.forEach(i=>{if(!dl(i.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),$.runKernel(Gu,n)}}),Rw=V({all_:function p0e(e,n=null,t=!1){let r={x:A(e,"x","all","bool")};return $.runKernel(Of,r,{axis:n,keepDims:t})}}),Jb=V({any_:function f0e(e,n=null,t=!1){let r={x:A(e,"x","any","bool")};return $.runKernel(Ff,r,{axis:n,keepDims:t})}}),bh=V({argMax_:function m0e(e,n=0){let t={x:A(e,"x","argMax")};return $.runKernel(Rf,t,{axis:n})}}),CD=V({argMin_:function g0e(e,n=0){let t={x:A(e,"x","argMin")};return $.runKernel(Pf,t,{axis:n})}}),kD=V({asin_:function y0e(e){let n={x:A(e,"x","asin")};return $.runKernel(qu,n)}}),SD=V({asinh_:function b0e(e){let n={x:A(e,"x","asinh")};return $.runKernel(Ku,n)}}),ID=V({atan_:function _0e(e){let n={x:A(e,"x","atan")};return $.runKernel(Xu,n)}}),MD=V({atan2_:function v0e(e,n){let t=A(e,"a","atan2"),r=A(n,"b","atan2");return[t,r]=Gn(t,r),$.runKernel(Zu,{a:t,b:r})}}),ED=V({atanh_:function x0e(e){let n={x:A(e,"x","atanh")};return $.runKernel(Yu,n)}});function w0e(e,n,t,r,i="NHWC",a){return e_(e,[...n,e[3]],t,a,r,null,null,B8(i))}function L8(e,n,t,r,i,a,s="channelsLast"){let c,[o,l]=t_(n);if("channelsLast"===s)c=[o,l,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);c=[o,l,e[1],e[1]]}return e_(e,c,t,r,i,a,!1,s)}function C0e(e,n,t,r,i,a,s="NDHWC"){let u,h,[o,l,c]=AD(n);if("NDHWC"===s)h="channelsLast",u=[o,l,c,e[4],e[4]];else{if("NCDHW"!==s)throw new Error(`Unknown dataFormat ${s}`);h="channelsFirst",u=[o,l,c,e[1],e[1]]}return $8(e,u,t,r,i,!1,h,a)}function e_(e,n,t,r,i,a,s=!1,o="channelsLast"){let[l,c,u,h]=[-1,-1,-1,-1];if("channelsLast"===o)[l,c,u,h]=e;else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);[l,h,c,u]=e}let N,[d,p,,f]=n,[m,g]=t_(t),[y,b]=t_(r),_=Vm(d,y),v=Vm(p,b),{padInfo:x,outHeight:S,outWidth:M}=function I0e(e,n,t,r,i,a,s,o,l){let c,u,h;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};let d=function k0e(e,n,t,r,i){null==r&&(r=DD(e,n,t));let s=e[1];return[n_((e[0]-n+2*r)/t+1,i),n_((s-n+2*r)/t+1,i)]}([n,t],a,r,e,o);u=d[0],h=d[1]}else if("same"===e){u=Math.ceil(n/r),h=Math.ceil(t/i);let d=Math.max(0,(u-1)*r+a-n),p=Math.max(0,(h-1)*i+s-t),f=Math.floor(d/2),m=d-f,g=Math.floor(p/2);c={top:f,bottom:m,left:g,right:p-g,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((n-a+1)/r),h=Math.ceil((t-s+1)/i);else{if("object"!=typeof e)throw Error(`Unknown padding parameter: ${e}`);{let d="channelsLast"===l?e[1][0]:e[2][0],p="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];c={top:d,bottom:p,left:f,right:m,type:0===d&&0===p&&0===f&&0===m?"VALID":"EXPLICIT"},u=n_((n-a+d+p)/r+1,o),h=n_((t-s+f+m)/i+1,o)}}return{padInfo:c,outHeight:u,outWidth:h}}(i,c,u,m,g,_,v,a,o),D=s?f*h:f;return"channelsFirst"===o?N=[l,D,S,M]:"channelsLast"===o&&(N=[l,S,M,D]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:u,inChannels:h,outHeight:S,outWidth:M,outChannels:D,padInfo:x,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:p,effectiveFilterHeight:_,effectiveFilterWidth:v,dilationHeight:y,dilationWidth:b,inShape:e,outShape:N,filterShape:n}}function $8(e,n,t,r,i,a=!1,s="channelsLast",o){let[l,c,u,h,d]=[-1,-1,-1,-1,-1];if("channelsLast"===s)[l,c,u,h,d]=e;else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);[l,d,c,u,h]=e}let Z,[p,f,m,,g]=n,[y,b,_]=AD(t),[v,x,S]=AD(r),M=Vm(p,v),D=Vm(f,x),N=Vm(m,S),{padInfo:F,outDepth:O,outHeight:k,outWidth:P}=function M0e(e,n,t,r,i,a,s,o,l,c,u){let h,d,p,f;if("valid"===e&&(e=0),"number"==typeof e){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};let m=function S0e(e,n,t,r,i,a){null==i&&(i=DD(e,n[0],r[0]));let s=[0,0,0,t];for(let o=0;o<3;o++)e[o]+2*i>=n[o]&&(s[o]=n_((e[o]-n[o]+2*i)/r[o]+1,a));return s}([n,t,r,1],[o,l,c],1,[i,a,s],e,u);d=m[0],p=m[1],f=m[2]}else{if("same"!==e)throw Error(`Unknown padding parameter: ${e}`);{d=Math.ceil(n/i),p=Math.ceil(t/a),f=Math.ceil(r/s);let m=(d-1)*i+o-n,g=(p-1)*a+l-t,y=(f-1)*s+c-r,b=Math.floor(m/2),_=m-b,v=Math.floor(g/2),x=g-v,S=Math.floor(y/2);h={top:v,bottom:x,left:S,right:y-S,front:b,back:_,type:"SAME"}}}return{padInfo:h,outDepth:d,outHeight:p,outWidth:f}}(i,c,u,h,y,b,_,M,D,N,o),j=a?g*d:g;return"channelsFirst"===s?Z=[l,j,O,k,P]:"channelsLast"===s&&(Z=[l,O,k,P,j]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:u,inWidth:h,inChannels:d,outDepth:O,outHeight:k,outWidth:P,outChannels:j,padInfo:F,strideDepth:y,strideHeight:b,strideWidth:_,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:M,effectiveFilterHeight:D,effectiveFilterWidth:N,dilationDepth:v,dilationHeight:x,dilationWidth:S,inShape:e,outShape:Z,filterShape:n}}function DD(e,n,t,r=1){let i=Vm(n,r);return Math.floor((e[0]*(t-1)-t+i)/2)}function t_(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function AD(e){return"number"==typeof e?[e,e,e]:e}function Vm(e,n){return n<=1?e:e+(e-1)*(n-1)}function n_(e,n){if(!n)return Math.trunc(e);switch(n){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${n}`)}}function Cc(e){let[n,t,r]=t_(e);return 1===n&&1===t&&1===r}function wo(e,n){return Cc(e)||Cc(n)}function _h(e){return t_(e).every(n=>n>0)}function B8(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function Ni(e,n,t){if(null!=t){if("string"==typeof n)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${t} but got pad ${n}.`);if("number"==typeof n)T(Df(n),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${t} but got pad ${n}.`);else{if("object"!=typeof n)throw Error(`Error in ${e}: Unknown padding parameter: ${n}`);n.forEach(r=>{r.forEach(i=>{T(Df(i),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${t} but got pad ${i}.`)})})}}}var H=V({reshape_:function E0e(e,n){let t={x:A(e,"x","reshape","string_or_numeric")};return $.runKernel(bm,t,{shape:n})}}),gl=V({avgPool_:function D0e(e,n,t,r,i){let a=A(e,"x","avgPool","float32");T(wo(t,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${t} and dilations '1'`);let o=a,l=!1;3===a.rank&&(l=!0,o=H(a,[1,a.shape[0],a.shape[1],a.shape[2]])),T(4===o.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),Ni("avgPool",r,i);let h=$.runKernel(Qu,{x:o},{filterSize:n,strides:t,pad:r,dimRoundingMode:i});return h=xe(h,a.dtype),l?H(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),TD=V({avgPool3d_:function A0e(e,n,t,r,i,a="NDHWC"){let s=A(e,"x","avgPool3d","float32"),o=s,l=!1;4===s.rank&&(l=!0,o=H(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),T(5===o.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),T("NDHWC"===a,()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),T("number"==typeof t&&t>0||Array.isArray(t)&&t[0]>0&&t[1]>0&&t[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${t}'`),Ni("avgPool3d",r,i);let h=$.runKernel(Lf,{x:o},{filterSize:n,strides:t,pad:r,dimRoundingMode:i,dataFormat:a});return h=xe(h,o.dtype),l?H(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),fn=V({concat_:function T0e(e,n=0){T(e.length>=1,()=>"Pass at least one tensor to concat");let t=Zb(e,"tensors","concat","string_or_numeric");return"complex64"===t[0].dtype&&t.forEach(a=>{if("complex64"!==a.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${a.dtype}. `)}),1===t.length?xo(t[0]):$.runKernel(zf,t,{axis:n})}}),Ct=V({matMul_:function N0e(e,n,t=!1,r=!1){let i=A(e,"a","matMul"),a=A(n,"b","matMul");return[i,a]=Gn(i,a),$.runKernel(Ju,{a:i,b:a},{transposeA:t,transposeB:r})}}),bs=V({sigmoid_:function O0e(e){let n={x:A(e,"x","sigmoid","float32")};return $.runKernel(Jd,n)}}),At=V({slice_:function F0e(e,n,t){let r=A(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");return $.runKernel(Sm,{x:r},{begin:n,size:t})}}),vh=V({tanh_:function R0e(e){let n={x:A(e,"x","tanh","float32")};return $.runKernel(oh,n)}}),V8=V({basicLSTMCell_:function P0e(e,n,t,r,i,a){let s=A(e,"forgetBias","basicLSTMCell"),o=A(n,"lstmKernel","basicLSTMCell"),l=A(t,"lstmBias","basicLSTMCell"),c=A(r,"data","basicLSTMCell"),u=A(i,"c","basicLSTMCell"),h=A(a,"h","basicLSTMCell"),d=fn([c,h],1),p=Ct(d,o),f=se(p,l),g=f.shape[1]/4,y=[f.shape[0],g],b=At(f,[0,0],y),_=At(f,[0,g],y),v=At(f,[0,2*g],y),x=At(f,[0,3*g],y),S=se(U(bs(b),vh(_)),U(u,bs(se(s,v))));return[S,U(vh(S),bs(x))]}}),r_=V({batchToSpaceND_:function L0e(e,n,t){let r=A(e,"x","batchToSpaceND"),i=n.reduce((o,l)=>o*l);return T(r.rank>=1+n.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${n.length}`),T(t.length===n.length,()=>`crops.length is ${t.length} but should be equal to blockShape.length  ${n.length}`),T(r.shape[0]%i==0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${n.join(" * ")} === ${i}`),$.runKernel($f,{x:r},{blockShape:n,crops:t})}});function $0e(e){let n;return n=0===e.rank||1===e.rank?H(e,[1,1,1,e.size]):2===e.rank?H(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?H(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,n}var xh=V({batchNorm_:function B0e(e,n,t,r,i,a){null==a&&(a=.001);let c,u,s=A(e,"x","batchNorm"),o=A(n,"mean","batchNorm"),l=A(t,"variance","batchNorm");null!=i&&(c=A(i,"scale","batchNorm")),null!=r&&(u=A(r,"offset","batchNorm")),T(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),T(null==u||o.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),T(null==c||o.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let h={x:$0e(s),scale:c,offset:u,mean:o,variance:l},p=$.runKernel(yd,h,{varianceEpsilon:a});return H(p,s.shape)}}),ND=V({batchNorm2d_:function V0e(e,n,t,r,i,a){let c,u,s=A(e,"x","batchNorm"),o=A(n,"mean","batchNorm"),l=A(t,"variance","batchNorm");return null!=i&&(c=A(i,"scale","batchNorm")),null!=r&&(u=A(r,"offset","batchNorm")),T(2===s.rank,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),T(2===o.rank||1===o.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),T(2===l.rank||1===l.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),null!=c&&T(2===c.rank||1===c.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),null!=u&&T(2===u.rank||1===u.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),xh(s,o,l,u,c,a)}}),OD=V({batchNorm3d_:function z0e(e,n,t,r,i,a){let c,u,s=A(e,"x","batchNorm"),o=A(n,"mean","batchNorm"),l=A(t,"variance","batchNorm");return null!=i&&(c=A(i,"scale","batchNorm")),null!=r&&(u=A(r,"offset","batchNorm")),T(3===s.rank,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),T(3===o.rank||1===o.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),T(3===l.rank||1===l.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),null!=c&&T(3===c.rank||1===c.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),null!=u&&T(3===u.rank||1===u.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),xh(s,o,l,u,c,a)}}),FD=V({batchNorm4d_:function U0e(e,n,t,r,i,a){let c,u,s=A(e,"x","batchNorm"),o=A(n,"mean","batchNorm"),l=A(t,"variance","batchNorm");return null!=i&&(c=A(i,"scale","batchNorm")),null!=r&&(u=A(r,"offset","batchNorm")),T(4===s.rank,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),T(4===o.rank||1===o.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),T(4===l.rank||1===l.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),null!=c&&T(4===c.rank||1===c.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),null!=u&&T(4===u.rank||1===u.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),xh(s,o,l,u,c,a)}}),RD=V({bincount_:function H0e(e,n,t){let r=A(e,"x","bincount"),i=A(n,"weights","bincount");return T("int32"===r.dtype,()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),T(t>=0,()=>`size must be non-negative, but got ${t}.`),T(i.size===r.size||0===i.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`),$.runKernel(Bf,{x:r,weights:i},{size:t})}}),z8=V({bitwiseAnd_:function W0e(e,n){let t=A(e,"x","bitwiseAnd"),r=A(n,"y","bitwiseAnd");if(!dl(t.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${t.shape}, y: ${r.shape}`);if("int32"!==t.dtype||"int32"!==r.dtype)throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${t.dtype} and type of y: ${r.dtype}`);return $.runKernel(Vf,{a:t,b:r})}}),U8=V({broadcastArgs_:function j0e(e,n){let t=A(e,"s0","broadcastArgs","int32"),r=A(n,"s1","broadcastArgs","int32");if(1!==t.rank)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${t.rank}`);if(1!==r.rank)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);return $.runKernel(wb,{s0:t,s1:r})}}),wh=V({broadcastTo_:function G0e(e,n){let t=A(e,"broadcastTo","x"),r=t.shape;if(ya(n),n.length<t.rank)throw new Error(`broadcastTo(): shape.length=${n.length} < input.rank=${t.rank}.`);if(n.length>t.rank){let l=t.shape.slice();for(;l.length<n.length;)l.unshift(1);t=H(t,l)}let i=t.shape,a=Array.from(n);for(let l=n.length-1;l>=0;l--)if(i[l]===n[l])a[l]=1;else if(1!==t.shape[l])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${n}].`);return 0===a.map((l,c)=>l>1?c:-1).filter(l=>l>=0).length?xo(t):$.runKernel(fc,{x:t},{reps:a})}}),PD=V({ceil_:function q0e(e){let n={x:A(e,"x","ceil","float32")};return $.runKernel(td,n)}});function ba(e,n,t){return ya(e),t=t||_b(n),$.runKernel(Ib,{},{shape:e,value:n,dtype:t})}var gi=V({clipByValue_:function K0e(e,n,t){let r=A(e,"x","clipByValue");return T(n<=t,()=>`Error in clip: min (${n}) must be less than or equal to max (${t}).`),n===t?ba(r.shape,n,r.dtype):$.runKernel(pc,{x:r},{clipValueMin:n,clipValueMax:t})}}),LD=V({concat1d_:function X0e(e){return fn(e,0)}}),$D=V({concat2d_:function Y0e(e,n){return fn(e,n)}}),BD=V({concat3d_:function Z0e(e,n){return fn(e,n)}}),VD=V({concat4d_:function Q0e(e,n){return fn(e,n)}}),Oi=V({conv2d_:function J0e(e,n,t,r,i="NHWC",a=[1,1],s){let o=A(e,"x","conv2d","float32"),l=A(n,"filter","conv2d","float32"),c=o,u=!1;3===o.rank&&(u=!0,c=H(o,[1,o.shape[0],o.shape[1],o.shape[2]])),T(4===c.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),T(4===l.rank,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Ni("conv2d",r,s);let h="NHWC"===i?c.shape[3]:c.shape[1];T(h===l.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`),T(wo(t,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),T(_h(a),()=>"Error in conv2D: Dilated rates should be larger than 0."),T(_h(t),()=>"Error in conv2D: Strides should be larger than 0.");let f=$.runKernel(nd,{x:c,filter:l},{strides:t,pad:r,dataFormat:i,dilations:a,dimRoundingMode:s});return u?H(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),Pw=V({conv1d_:function ewe(e,n,t,r,i="NWC",a=1,s){let o=A(e,"x","conv1d"),l=A(n,"filter","conv1d"),c=o,u=!1;2===o.rank&&(u=!0,c=H(o,[1,o.shape[0],o.shape[1]])),T(3===c.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),T(3===l.rank,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Ni("conv1d",r,s),T(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),T(wo(t,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${t} and dilation '${a}'`),T(_h(a),()=>"Error in conv1D: Dilated rates should be larger than 0."),T(_h(t),()=>"Error in conv1D: Stride should be larger than 0."),T("NWC"===i,()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);let h=H(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=H(c,[c.shape[0],1,c.shape[1],c.shape[2]]),p=Oi(d,h,[1,t],r,"NHWC",[1,a],s);return H(p,u?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}}),zD=V({conv2DBackpropInput_:function twe(e,n,t,r,i,a="NHWC",s){T(e.length===n.rank,()=>`Length of inShape (${e.length}) and rank of dy (${n.rank}) must match`);let o=e,l=n,c=!1;3===n.rank&&(c=!0,l=H(n,[1,n.shape[0],n.shape[1],n.shape[2]]),o=[1,e[0],e[1],e[2]]),T(4===o.length,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),T(4===l.rank,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),T(4===t.rank,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${t.rank}`);let u="NHWC"===a?o[3]:o[1],h="NHWC"===a?l.shape[3]:l.shape[1];T(u===t.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${t.shape[2]}.`),T(h===t.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${t.shape[3]}.`),Ni("conv2dDerInput",i,s);let f=$.runKernel(rd,{dy:l,filter:t},{strides:r,pad:i,dataFormat:a,dimRoundingMode:s,inputShape:o});return c?H(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),Lw=V({conv2dTranspose_:function nwe(e,n,t,r,i,a){let s=A(e,"x","conv2dTranspose"),o=A(n,"filter","conv2dTranspose");return zD(t,s,o,r,i,"NHWC",a)}}),UD=V({conv3d_:function rwe(e,n,t,r,i="NDHWC",a=[1,1,1]){let s=A(e,"x","conv3d"),o=A(n,"filter","conv3d"),l=s,c=!1;4===s.rank&&(c=!0,l=H(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),T(5===l.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),T(5===o.rank,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),T(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),T(wo(t,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),T("NDHWC"===i,()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),T(_h(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),T(_h(t),()=>"Error in conv3D: Strides should be larger than 0.");let d=$.runKernel(id,{x:l,filter:o},{strides:t,pad:r,dataFormat:i,dilations:a});return c?H(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),H8=V({conv3DBackpropInput_:function iwe(e,n,t,r,i){T(e.length===n.rank,()=>`Length of inShape (${e.length}) and rank of dy (${n.rank}) must match`);let a=e,s=n,o=!1;4===n.rank&&(o=!0,s=H(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]),a=[1,e[0],e[1],e[2],e[3]]);let l=a[4],c=s.shape[4];T(5===a.length,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),T(5===s.rank,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),T(5===t.rank,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${t.rank}`),T(l===t.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${t.shape[3]}.`),T(c===t.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${t.shape[4]}.`);let d=$.runKernel(Hf,{dy:s,filter:t},{pad:i,strides:r,inputShape:a});return o?H(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),HD=V({conv3dTranspose_:function awe(e,n,t,r,i){let a=A(e,"x","conv3dTranspose"),s=A(n,"filter","conv3dTranspose");return H8(t,a,s,r,i)}}),i_=V({cos_:function swe(e){let n={x:A(e,"x","cos","float32")};return $.runKernel(ad,n)}}),$w=V({cosh_:function owe(e){let n={x:A(e,"x","cosh","float32")};return $.runKernel(sd,n)}}),a_=V({cumprod_:function lwe(e,n=0,t=!1,r=!1){let i={x:A(e,"x","cumprod")};return $.runKernel(Wf,i,{axis:n,exclusive:t,reverse:r})}}),Bw=V({cumsum_:function cwe(e,n=0,t=!1,r=!1){let i={x:A(e,"x","cumsum")};return $.runKernel(od,i,{axis:n,exclusive:t,reverse:r})}}),Vw=V({denseBincount_:function uwe(e,n,t,r=!1){let i=A(e,"x","denseBincount"),a=A(n,"weights","denseBincount");return T("int32"===i.dtype,()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),T(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),T(t>=0,()=>`size must be non-negative, but got ${t}.`),T(a.size===i.size||0===a.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${a.shape}.`),$.runKernel(kb,{x:i,weights:a},{size:t,binaryOutput:r})}}),WD=V({depthToSpace_:function dwe(e,n,t="NHWC"){let r=A(e,"x","depthToSpace","float32"),i="NHWC"===t?r.shape[1]:r.shape[2],a="NHWC"===t?r.shape[2]:r.shape[3],s="NHWC"===t?r.shape[3]:r.shape[1];return T(n>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${n}`),T(i*n>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${i} and ${n}  for depthToSpace with input shape\n    ${r.shape}`),T(a*n>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${a} and ${n} for depthToSpace with input shape\n        ${r.shape}`),T(s%(n*n)==0,()=>`Dimension size must be evenly divisible by ${n*n} but is ${s} for depthToSpace with input shape ${r.shape}`),$.runKernel(Gf,{x:r},{blockSize:n,dataFormat:t})}}),Ch=V({depthwiseConv2d_:function hwe(e,n,t,r,i="NHWC",a=[1,1],s){let o=A(e,"x","depthwiseConv2d","float32"),l=A(n,"filter","depthwiseConv2d","float32"),c=o,u=!1;3===o.rank&&(u=!0,c=H(o,[1,o.shape[0],o.shape[1],o.shape[2]])),T(4===c.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),T(4===l.rank,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);let h="NHWC"===i?c.shape[3]:c.shape[1];T(h===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${l.shape[2]}.`),Ni("depthwiseConv2d",r,s);let f=$.runKernel(ld,{x:c,filter:l},{strides:t,pad:r,dataFormat:i,dilations:a,dimRoundingMode:s});return u?H(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),W8=V({diag_:function pwe(e){let n={x:A(e,"x","diag")};return $.runKernel(Sb,n)}}),jD=V({dilation2d_:function fwe(e,n,t,r,i=[1,1],a="NHWC"){let s=A(e,"x","dilation2d"),o=A(n,"filter","dilation2d");T(3===s.rank||4===s.rank,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),T(3===o.rank,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),T("NHWC"===a,()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let l=s,c=!1;3===s.rank&&(l=H(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),T(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);let d=$.runKernel(cd,{x:l,filter:o},{strides:t,pad:r,dilations:i});return c?H(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),zm={};function j8(e,n){let t=e.length,r=[];for(let i=0;i<t;i++){let a=t-1-i;(n[n.length-1-i]||1)>1&&1===(e[a]||1)&&r.unshift(a)}return r}function _r(e,n){let t=[];for(let r=0;r<n.length;r++){let i=e[e.length-r-1],a=n.length-r-1;(null==i||1===i&&n[a]>1)&&t.unshift(a)}return t}function mn(e,n){let t=Math.max(e.length,n.length),r=new Array(t);for(let i=0;i<t;i++){let a=e[e.length-i-1];null==a&&(a=1);let s=n[n.length-i-1];if(null==s&&(s=1),1===a)r[t-i-1]=s;else if(1===s)r[t-i-1]=a;else{if(a!==s)throw Error(`Operands could not be broadcast together with shapes ${e} and ${n}.`);r[t-i-1]=a}}return r}it(zm,{assertAndGetBroadcastShape:()=>mn,getBroadcastDims:()=>j8,getReductionAxes:()=>_r});var _a=V({equal_:function mwe(e,n){let t=A(e,"a","equal","string_or_numeric"),r=A(n,"b","equal","string_or_numeric");return[t,r]=Gn(t,r),mn(t.shape,r.shape),$.runKernel(Yf,{a:t,b:r})}}),Wr=V({where_:function gwe(e,n,t){let r=A(n,"a","where"),i=A(t,"b","where"),a=A(e,"condition","where","bool"),s=mn(mn(a.shape,r.shape),i.shape),o=wh(a,s),l=wh(r,s),c=wh(i,s);return $.runKernel(km,{condition:o,t:l,e:c})}}),Ft=V({zerosLike_:function ywe(e){let n={x:A(e,"x","zerosLike")};return $.runKernel(Fm,n)}}),GD=V({divNoNan_:function bwe(e,n){let t=A(e,"a","div"),r=A(n,"b","div");[t,r]=Gn(t,r);let i=Te(t,r),a=Ft(i),s=_a(r,a);return Wr(s,a,i)}}),qD=V({dot_:function _we(e,n){let t=A(e,"t1","dot"),r=A(n,"t2","dot");T(!(1!==t.rank&&2!==t.rank||1!==r.rank&&2!==r.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${t.rank} and ${r.rank}.`);let i=1===t.rank?t.size:t.shape[1],a=1===r.rank?r.size:r.shape[0];if(T(i===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${a}.`),1===t.rank&&1===r.rank){let s=H(t,[1,-1]),o=H(r,[-1,1]),l=Ct(s,o);return H(l,[])}if(1===t.rank&&2===r.rank){let s=H(t,[1,-1]),o=H(r,[r.shape[0],r.shape[1]]),l=Ct(s,o);return H(l,[l.size])}if(2===t.rank&&1===r.rank){let s=H(r,[-1,1]),o=Ct(t,s);return H(o,[o.size])}{let s=H(r,[r.shape[0],r.shape[1]]);return Ct(t,s)}}}),kh=V({einsum_:function vwe(e,...n){let t=n.map((i,a)=>A(i,`tensors${a}`,"einsum"));return $.runKernel(gw,t,{equation:e})}}),Um=V({elu_:function xwe(e){let n={x:A(e,"x","elu","float32")};return $.runKernel(dd,n)}}),G8=V({ensureShape_:function wwe(e,n){let t=A(e,"x","ensureShape","string_or_numeric");if(!UW(t.shape,n))throw new Error(`EnsureShape: Shape of tensor ${t.shape} is not compatible with expected shape ${n}`);return e}}),KD=V({erf_:function Cwe(e){let n=A(e,"x","erf");return T("int32"===n.dtype||"float32"===n.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===n.dtype&&(n=xe(n,"float32")),$.runKernel(hd,{x:n})}});function XD(e,n){for(let t=0;t<e.length;++t)if(e[e.length-t-1]!==n-1-t)return!1;return!0}function q8(e,n,t){let r=e.length+n.length,i=[],a=0,s=0;for(let o=0;o<r;o++)-1===t.indexOf(o)?i.push(e[a++]):i.push(n[s++]);return i}function K8(e,n){let t=[],r=e.length;for(let a=0;a<r;a++)-1===n.indexOf(a)&&t.push(e[a]);return[t,n.map(a=>e[a])]}function Sh(e,n){return q8(e,n.map(r=>1),n)}function kwe(e,n,t){T(XD(n,t),()=>`${e} supports only inner-most axes for now. Got axes ${n} and rank-${t} input.`)}function X8(e,n){if(XD(e,n))return null;let t=[];for(let r=0;r<n;++r)-1===e.indexOf(r)&&t.push(r);return e.forEach(r=>t.push(r)),t}function YD(e){return e.map((n,t)=>[t,n]).sort((n,t)=>n[1]-t[1]).map(n=>n[0])}function Swe(e,n){let t=[];for(let r=n-e;r<n;++r)t.push(r);return t}var Ha=V({max_:function Iwe(e,n=null,t=!1){let r={x:A(e,"x","max")};return $.runKernel(Md,r,{reductionIndices:n,keepDims:t})}}),Hm=V({min_:function Mwe(e,n=null,t=!1){let r={x:A(e,"x","min")};return $.runKernel(Td,r,{axis:n,keepDims:t})}}),yl=V({pow_:function Ewe(e,n){let t=A(e,"base","pow"),r=A(n,"exp","pow");return[t,r]=Gn(t,r),$.runKernel($d,{a:t,b:r})}});function He(e,n){if((Hr(e)&&"string"!==n||Array.isArray(e))&&"complex64"!==n)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===n&&Hr(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return _c(e,[],[],n)}var ii=V({sqrt_:function Dwe(e){let n={x:A(e,"x","sqrt","float32")};return $.runKernel(th,n)}}),gn=V({square_:function Awe(e){let n=A(e,"x","square");return $.runKernel("Square",{x:n},{})}}),Re=V({sum_:function Twe(e,n=null,t=!1){let r=A(e,"x","sum");return"bool"===r.dtype&&(r=xe(r,"int32")),$.runKernel(nh,{x:r},{axis:n,keepDims:t})}});function Y8(e,n,t=null){if(0===e.rank)return br(e);if(1!==e.rank&&null===t)return Y8(H(e,[-1]),n,t);if(1===e.rank||"number"==typeof t||Array.isArray(t)&&1===t.length){if(1===n)return Re(br(e),t);if(n===1/0)return Ha(br(e),t);if(n===-1/0)return Hm(br(e),t);if("euclidean"===n||2===n)return ii(Re(yl(br(e),He(2,"int32")),t));throw new Error(`Error in norm: invalid ord value: ${n}`)}if(Array.isArray(t)&&2===t.length){if(1===n)return Ha(Re(br(e),t[0]),t[1]-1);if(n===1/0)return Ha(Re(br(e),t[1]),t[0]);if(n===-1/0)return Hm(Re(br(e),t[1]),t[0]);if("fro"===n||"euclidean"===n)return ii(Re(gn(e),t));throw new Error(`Error in norm: invalid ord value: ${n}`)}throw new Error(`Error in norm: invalid axis: ${t}`)}var Wm=V({norm_:function Nwe(e,n="euclidean",t=null,r=!1){let i=Y8(e=A(e,"x","norm"),n,t),a=i.shape;if(r){let s=gs(t,e.shape);a=Sh(i.shape,s)}return H(i,a)}}),ZD=V({euclideanNorm_:function Owe(e,n=null,t=!1){return Wm(e,"euclidean",n,t)}}),yi=V({exp_:function Fwe(e){let n={x:A(e,"x","exp")};return $.runKernel(pd,n)}}),jr=V({expandDims_:function Rwe(e,n=0){let t=A(e,"x","expandDims","string_or_numeric");return T(n<=t.rank,()=>"Axis must be <= rank of the tensor"),$.runKernel(Zf,{input:t},{dim:n})}}),QD=V({expm1_:function Pwe(e){let n={x:A(e,"x","expm1")};return $.runKernel(fd,n)}}),va=V({tile_:function Lwe(e,n){let t=A(e,"x","tile","string_or_numeric");return T(t.rank===n.length,()=>`Error in transpose: rank of input ${t.rank} must match length of reps ${n}.`),$.runKernel(fc,{x:t},{reps:n})}}),zw=V({eye_:function $we(e,n,t,r="float32"){null==n&&(n=e);let i=wt([e,n],r),a=e<=n?e:n;for(let o=0;o<a;++o)i.set(1,o,o);let s=H(i.toTensor(),[e,n]);if(null==t)return s;if(1===t.length)return va(jr(s,0),[t[0],1,1]);if(2===t.length)return va(jr(jr(s,0),0),[t[0],t[1],1,1]);if(3===t.length)return va(jr(jr(jr(s,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${t.length}D.`)}}),jm=V({floor_:function Bwe(e){let n={x:A(e,"x","floor","float32")};return $.runKernel(md,n)}}),Gm=V({gather_:function Vwe(e,n,t=0,r=0){let i=A(e,"x","gather"),a=A(n,"indices","gather","int32");return $.runKernel(Jf,{x:i,indices:a},{axis:t,batchDims:r})}}),Fi=V({greater_:function zwe(e,n){let t=A(e,"a","greater","string_or_numeric"),r=A(n,"b","greater","string_or_numeric");return[t,r]=Gn(t,r),mn(t.shape,r.shape),$.runKernel(tm,{a:t,b:r})}}),bl=V({greaterEqual_:function Uwe(e,n){let t=A(e,"a","greaterEqual","string_or_numeric"),r=A(n,"b","greaterEqual","string_or_numeric");return[t,r]=Gn(t,r),mn(t.shape,r.shape),$.runKernel(bd,{a:t,b:r})}}),s_=V({imag_:function Hwe(e){let n={input:A(e,"input","imag")};return $.runKernel(_w,n)}}),JD=V({isFinite_:function Wwe(e){let n={x:A(e,"x","isFinite")};return $.runKernel(vd,n)}}),eA=V({isInf_:function jwe(e){let n={x:A(e,"x","isInf")};return $.runKernel(xd,n)}}),tA=V({isNaN_:function Gwe(e){let n={x:A(e,"x","isNaN")};return $.runKernel(wd,n)}}),o_=V({leakyRelu_:function qwe(e,n=.2){let t={x:A(e,"x","leakyRelu")};return $.runKernel(Cd,t,{alpha:n})}}),qm=V({less_:function Kwe(e,n){let t=A(e,"a","less","string_or_numeric"),r=A(n,"b","less","string_or_numeric");return[t,r]=Gn(t,r),mn(t.shape,r.shape),$.runKernel(nm,{a:t,b:r})}}),kc=V({lessEqual_:function Xwe(e,n){let t=A(e,"a","lessEqual","string_or_numeric"),r=A(n,"b","lessEqual","string_or_numeric");return[t,r]=Gn(t,r),mn(t.shape,r.shape),$.runKernel(rm,{a:t,b:r})}});function Z8(e,n,t){if(t<=0)throw new Error("The number of values should be positive.");return $.runKernel(im,{},{start:e,stop:n,num:t})}var nA=V({localResponseNormalization_:function Ywe(e,n=5,t=1,r=1,i=.5){let a=A(e,"x","localResponseNormalization");T(4===a.rank||3===a.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${a.rank}.`),T(Df(n),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${n}.`);let s=a,o=!1;3===a.rank&&(o=!0,s=H(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let u=$.runKernel(Id,{x:s},{depthRadius:n,bias:t,alpha:r,beta:i});return o?H(u,[u.shape[1],u.shape[2],u.shape[3]]):u}}),xa=V({log_:function Zwe(e){let n={x:A(e,"x","log","float32")};return $.runKernel(kd,n)}}),l_=V({log1p_:function Qwe(e){let n={x:A(e,"x","log1p")};return $.runKernel(Sd,n)}});function Jwe(e){return T(dc(e),()=>"The f passed in grad(f) must be a function"),(n,t)=>{let r=A(n,"x","tf.grad","string_or_numeric"),i=null!=t?A(t,"dy","tf.grad"):null;return $.tidy(()=>{let{value:a,grads:s}=$.gradients(()=>e(r),[r],i);return null!=i&&Di(a.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Uw(s),s[0]})}}function e1e(e){return T(dc(e),()=>"The f passed in grads(f) must be a function"),(n,t)=>{T(Array.isArray(n),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=Zb(n,"args","tf.grads","string_or_numeric"),i=null!=t?A(t,"dy","tf.grads"):null;return $.tidy(()=>{let{value:a,grads:s}=$.gradients(()=>e(...r),r,i);return null!=i&&Di(a.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Uw(s),s})}}function t1e(e){return T(dc(e),()=>"The f passed in valueAndGrad(f) must be a function"),(n,t)=>{T(n instanceof gt,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),T(null==t||t instanceof gt,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:i}=$.gradients(()=>e(n),[n],t);return Uw(r),{grad:r[0],value:i}}}function n1e(e){return T(dc(e),()=>"The f passed in valueAndGrads(f) must be a function"),(n,t)=>{T(Array.isArray(n)&&n.every(i=>i instanceof gt),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),T(null==t||t instanceof gt,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=$.gradients(()=>e(...n),n,t);return null!=t&&Di(r.value.shape,t.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Uw(r.grads),r}}function Q8(e,n){T(dc(e),()=>"The f passed in variableGrads(f) must be a function"),T(null==n||Array.isArray(n)&&n.every(c=>c instanceof ph),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let t=null!=n;if(!t){n=[];for(let c in $.registeredVariables)n.push($.registeredVariables[c])}let r=t?n.filter(c=>!c.trainable):null,i=n.length;T((n=n.filter(c=>c.trainable)).length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);let{value:s,grads:o}=$.gradients(e,n,null,!0);T(o.some(c=>null!=c),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),T(0===s.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let l={};return n.forEach((c,u)=>{null!=o[u]&&(l[c.name]=o[u])}),r?.forEach(c=>l[c.name]=null),{value:s,grads:l}}function Co(e){return $.customGrad(e)}function Uw(e){if(e.filter(n=>null==n).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var Dn=V({neg_:function r1e(e){let n={x:A(e,"x","neg")};return $.runKernel(dm,n)}}),Ih=V({softplus_:function i1e(e){let n={x:A(e,"x","softplus")};return $.runKernel(eh,n)}}),rA=V({logSigmoid_:function a1e(e){let n=A(e,"x","logSigmoid");return Co(t=>({value:Dn(Ih(Dn(t))),gradFunc:r=>U(r,bs(Dn(t)))}))(n)}}),Ee=V({sub_:function s1e(e,n){let t=A(e,"a","sub"),r=A(n,"b","sub");return[t,r]=Gn(t,r),$.runKernel(ah,{a:t,b:r})}}),Hw=V({logSoftmax_:function o1e(e,n=-1){let t=A(e,"logits","logSoftmax");if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and axis was ${n}`);return Co((r,i)=>{let a=Ha(r,n,!0),s=Ee(r,a),o=Ee(xe(s,"float32"),xa(Re(yi(s),n,!0)));return i([o]),{value:o,gradFunc:(l,c)=>{let[u]=c,d=yi(u);return Ee(l,U(Re(l,n,!0),d))}}})(t)}}),c_=V({logSumExp_:function l1e(e,n=null,t=!1){let r=A(e,"x","logSumExp"),i=gs(n,r.shape),a=Ha(r,i,!0),s=Ee(r,a),o=yi(s),l=Re(o,i),c=xa(l),u=se(H(a,c.shape),c);if(t){let h=Sh(u.shape,i);return H(u,h)}return u}}),_s=V({logicalAnd_:function c1e(e,n){let t=A(e,"a","logicalAnd","bool"),r=A(n,"b","logicalAnd","bool");return mn(t.shape,r.shape),$.runKernel(am,{a:t,b:r})}}),u_=V({logicalNot_:function u1e(e){let n={x:A(e,"x","logicalNot","bool")};return $.runKernel(sm,n)}}),Ww=V({logicalOr_:function d1e(e,n){let t=A(e,"a","logicalOr","bool"),r=A(n,"b","logicalOr","bool");return mn(t.shape,r.shape),$.runKernel(om,{a:t,b:r})}}),iA=V({logicalXor_:function h1e(e,n){let t=A(e,"a","logicalXor","bool"),r=A(n,"b","logicalXor","bool");return mn(t.shape,r.shape),_s(Ww(e,n),u_(_s(e,n)))}}),jw=2147483648,Gw=V({searchSorted_:function p1e(e,n,t="left"){let r=A(e,"sortedSequence","searchSorted"),i=A(n,"values","searchSorted"),s=i.shape[i.shape.length-1],o=H(r,[-1,r.shape[r.shape.length-1]]),l=H(i,[-1,s]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(rn(l.shape)>=jw)throw new Error(`values tensor size must less than ${jw}`);if(o.shape[1]>=jw)throw new Error(`trailing dim_size must less than ${jw} for int32 output type, was ${o.shape[1]}`);return $.runKernel(Cm,{sortedSequence:o,values:l},{side:t})}});function J8(e,n){return Gw(e,n,"left")}var Gr=V({maxPool_:function f1e(e,n,t,r,i){let a=A(e,"x","maxPool"),o=a,l=!1;3===a.rank&&(l=!0,o=H(a,[1,a.shape[0],a.shape[1],a.shape[2]])),T(4===o.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),T(wo(t,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${t} and dilations '1'`),Ni("maxPool",r,i);let h=$.runKernel(Dd,{x:o},{filterSize:n,strides:t,pad:r,dimRoundingMode:i});return l?H(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),aA=V({maxPool3d_:function m1e(e,n=[1,1,1],t,r,i,a="NDHWC"){let s=A(e,"x","maxPool3d"),o=s,l=!1;4===s.rank&&(l=!0,o=H(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),T(5===o.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),T("NDHWC"===a,()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),Ni("maxPool3d",r,i);let h=$.runKernel(cm,{x:o},{filterSize:n,strides:t,pad:r,dimRoundingMode:i,dataFormat:a});return l?H(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),ej=V({maxPoolWithArgmax_:function g1e(e,n,t,r,i=!1){let a={x:A(e,"x","maxPoolWithArgmax")},o=$.runKernel(Db,a,{filterSize:n,strides:t,pad:r,includeBatchInIndex:i});return{result:o[0],indexes:o[1]}}}),ko=V({maximum_:function y1e(e,n){let t=A(e,"a","maximum"),r=A(n,"b","maximum");return[t,r]=Gn(t,r),"bool"===t.dtype&&(t=xe(t,"int32"),r=xe(r,"int32")),mn(t.shape,r.shape),$.runKernel(Ed,{a:t,b:r})}}),qn=V({mean_:function b1e(e,n=null,t=!1){let r={x:A(e,"x","mean")};return $.runKernel(Ad,r,{axis:n,keepDims:t})}});function Kn(e,n="float32"){if(ya(e),"complex64"===n){let r=Kn(e,"float32"),i=Kn(e,"float32");return pl(r,i)}let t=cw(rn(e),n);return $.makeTensor(t,e,n)}function Xi(e,n="float32"){if(ya(e),"complex64"===n){let r=Xi(e,"float32"),i=Kn(e,"float32");return pl(r,i)}let t=L2(rn(e),n);return $.makeTensor(t,e,n)}function tj(e,n,{indexing:t="xy"}={}){if("xy"!==t&&"ij"!==t)throw new TypeError(`${t} is not a valid third argument to meshgrid`);if(void 0===e)return[];let r=A(e,"x","meshgrid",e instanceof gt?e.dtype:"float32");if(void 0===n)return[r];let i=A(n,"y","meshgrid",n instanceof gt?n.dtype:"float32"),a=rn(r.shape),s=rn(i.shape);return"xy"===t?(r=H(r,[1,-1]),i=H(i,[-1,1]),[Ct(Xi([s,1],r.dtype),r),Ct(i,Xi([1,a],i.dtype))]):(r=H(r,[-1,1]),i=H(i,[1,-1]),[Ct(r,Xi([1,s],r.dtype)),Ct(Xi([a,1],i.dtype),i)])}var Sc=V({minimum_:function _1e(e,n){let t=A(e,"a","minimum"),r=A(n,"b","minimum");return[t,r]=Gn(t,r),"bool"===t.dtype&&(t=xe(t,"int32"),r=xe(r,"int32")),mn(t.shape,r.shape),$.runKernel(Nd,{a:t,b:r})}}),sA=V({mirrorPad_:function v1e(e,n,t){T("reflect"===t||"symmetric"===t,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${t}.`);let r=A(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");T(n.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${n.length}.`);let i="reflect"===t?1:0;for(let o=0;o<r.rank;o++)T(2===n[o].length,()=>"Invalid number of paddings. Must be length of 2 each."),T(n[o][0]>=0&&n[o][0]<=r.shape[o]-i&&n[o][1]>=0&&n[o][1]<=r.shape[o]-i,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-i} or less than 0 for input of shape ${r.shape}`);return $.runKernel(Od,{x:r},{paddings:n,mode:t})}}),oA=V({mod_:function x1e(e,n){let t=A(e,"a","mod"),r=A(n,"b","mod");return[t,r]=Gn(t,r),$.runKernel(Fd,{a:t,b:r})}}),d_=V({moments_:function w1e(e,n=null,t=!1){let r=gs(n,(e=A(e,"x","moments")).shape),i=qn(e,r,t),a=i.shape;t||(a=Sh(i.shape,r));let s=gn(Ee(xe(e,"float32"),H(i,a)));return{mean:i,variance:qn(s,r,t)}}}),nj=V({multiRNNCell_:function C1e(e,n,t,r){let i=A(n,"data","multiRNNCell"),a=Zb(t,"c","multiRNNCell"),s=Zb(r,"h","multiRNNCell"),o=i,l=[];for(let h=0;h<e.length;h++){let d=e[h](o,a[h],s[h]);l.push(d[0]),l.push(d[1]),o=d[1]}let c=[],u=[];for(let h=0;h<l.length;h+=2)c.push(l[h]),u.push(l[h+1]);return[c,u]}}),rj=V({multinomial_:function k1e(e,n,t,r=!1){let i=A(e,"logits","multinomial"),a=i.size,s=i.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);t=t||Math.random();let o={logits:1===s?H(i,[1,-1]):i},c=$.runKernel(um,o,{numSamples:n,seed:t,normalized:r});return 1===s?H(c,[c.size]):c}}),Mh=V({notEqual_:function S1e(e,n){let t=A(e,"a","notEqual","string_or_numeric"),r=A(n,"b","notEqual","string_or_numeric");return[t,r]=Gn(t,r),mn(t.shape,r.shape),$.runKernel(hm,{a:t,b:r})}}),Km=V({oneHot_:function I1e(e,n,t=1,r=0,i="int32"){if(n<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${n}`);let a={indices:A(e,"indices","oneHot","int32")};return $.runKernel(Pd,a,{dtype:i,depth:n,onValue:t,offValue:r})}}),wa=V({onesLike_:function M1e(e){let n={x:A(e,"x","onesLike")};return $.runKernel(gm,n)}}),ij=V({outerProduct_:function E1e(e,n){let t=A(e,"v1","outerProduct"),r=A(n,"v2","outerProduct");T(1===t.rank&&1===r.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${t.rank} and ${r.rank}.`);let i=H(t,[-1,1]),a=H(r,[1,-1]);return Ct(i,a)}}),js=V({pad_:function D1e(e,n,t=0){let r=A(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return $.runKernel(Ld,{x:r},{paddings:n,constantValue:t})}}),aj=V({pad1d_:function A1e(e,n,t=0){return T(2===n.length,()=>"Invalid number of paddings. Must be length of 2."),js(e,[n],t)}}),sj=V({pad2d_:function T1e(e,n,t=0){return T(2===n.length&&2===n[0].length&&2===n[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),js(e,n,t)}}),oj=V({pad3d_:function N1e(e,n,t=0){return T(3===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),js(e,n,t)}}),lj=V({pad4d_:function O1e(e,n,t=0){return T(4===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length&&2===n[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),js(e,n,t)}}),h_=V({spaceToBatchND_:function F1e(e,n,t){let r=A(e,"x","spaceToBatchND");return T(r.rank>=1+n.length,()=>`input rank ${r.rank} should be > than [blockShape] ${n.length}`),T(t.length===n.length,()=>`paddings.shape[0] ${t.length} must be equal to [blockShape] ${n.length}`),T(r.shape.reduce((s,o,l)=>l>0&&l<=n.length?s&&(o+t[l-1][0]+t[l-1][1])%n[l-1]==0:s,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${t.toString()} must be divisible by blockShapes ${n.toString()}`),$.runKernel(Im,{x:r},{blockShape:n,paddings:t})}}),lA=V({pool_:function R1e(e,n,t,r,i,a,s){null==i&&(i=[1,1]),null==a&&(a=1),0===r&&(r="valid");let o=A(e,"x","maxPool"),l=o,c=!1;3===o.rank&&(c=!0,l=H(o,[1,o.shape[0],o.shape[1],o.shape[2]])),T(wo(a,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${i}'`);let d,u=L8(l.shape,n,a,i,r),h=[u.dilationHeight,u.dilationWidth];d="same"===r?function L1e(e,n){let t=e.map((a,s)=>a+(a-1)*(n[s]-1)).map(a=>a-1),r=t.map(a=>Math.floor(a/2)),i=t.map((a,s)=>a-r[s]);return t.map((a,s)=>[r[s],i[s]])}([u.filterHeight,u.filterWidth],h):[[0,0],[0,0]];let p=1===h[0]&&1===h[1],[f,m]=function P1e(e,n,t){let r=t.map(u=>u[0]),i=t.map(u=>u[1]),a=e.concat(r,i),s=n.map((u,h)=>(u-a[h]%u)%u),o=i.map((u,h)=>u+s[h]),l=n.map((u,h)=>[r[h],o[h]]),c=n.map((u,h)=>[0,s[h]]);return[l,c]}([u.inHeight,u.inWidth],h,d),g=p?r:"valid",y=p?l:h_(l,h,f),b=("avg"===t?()=>gl(y,n,a,g,s):()=>Gr(y,n,a,g,s))(),_=p?b:r_(b,h,m);return c?H(_,[_.shape[1],_.shape[2],_.shape[3]]):_}}),p_=V({prelu_:function $1e(e,n){let t=A(e,"x","prelu"),r=A(n,"alpha","prelu");return $.runKernel(Bd,{x:t,alpha:r})}}),cA=V({prod_:function B1e(e,n=null,t=!1){let r=A(e,"x","prod");return"bool"===r.dtype&&(r=xe(r,"int32")),$.runKernel(Vd,{x:r},{axis:n,keepDims:t})}}),cj=V({raggedGather_:function V1e(e,n,t,r){let i=e.map((u,h)=>A(u,`tensors${h}`,"raggedGather","int32")),a=A(n,"paramsDenseValues","raggedGather"),s=A(t,"indices","raggedGather","int32"),c=$.runKernel(vw,{paramsNestedSplits:i,paramsDenseValues:a,indices:s},{outputRaggedRank:r});return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}}),uj=V({raggedRange_:function z1e(e,n,t){let r=A(e,"starts","raggedRange"),i=A(n,"limits","raggedRange",r.dtype),a=A(t,"deltas","raggedRange",r.dtype),o=$.runKernel(xw,{starts:r,limits:i,deltas:a});return{rtNestedSplits:o[0],rtDenseValues:o[1]}}}),dj=V({raggedTensorToTensor_:function U1e(e,n,t,r,i){let a=A(e,"shape","raggedTensorToTensor","int32"),s=A(n,"values","raggedTensorToTensor"),o=A(t,"defaultValue","raggedTensorToTensor",s.dtype),l=r.map((h,d)=>A(h,`tensors${d}`,"raggedTensorToTensor","int32"));return $.runKernel(ww,{shape:a,values:s,defaultValue:o,rowPartitionTensors:l},{rowPartitionTypes:i})}}),hj=V({rand_:function H1e(e,n,t){ya(e);let r=rn(e),i=null;if(null==t||"float32"===t)i=new Float32Array(r);else if("int32"===t)i=new Int32Array(r);else{if("bool"!==t)throw new Error(`Unknown data type ${t}`);i=new Uint8Array(r)}for(let a=0;a<r;a++)i[a]=n();return $.makeTensor(i,e,t)}}),uA=cc(iw()),pj={};it(pj,{TEST_EPSILON_FLOAT16:()=>fj,createVideoElement:()=>Z1e,encodeStrings:()=>mj,expectArrayBuffersEqual:()=>Y1e,expectArraysClose:()=>j1e,expectArraysEqual:()=>q1e,expectNumbersClose:()=>K1e,expectPromiseToFail:()=>G1e,expectValuesInRange:()=>X1e,play:()=>Q1e,testEpsilon:()=>dA});var W1e=.001,fj=.1;function j1e(e,n,t){return null==t&&(t=dA()),hA(e,n,(r,i)=>pA(r,i,t))}function dA(){return 32===$.backend.floatPrecision()?W1e:fj}function hA(e,n,t){let r=!0;if((Hr(e)||Hr(n))&&(r=!1),Hr(e)&&Hr(n)&&(r=!0),r){let s=e.constructor.name,o=n.constructor.name;if(s!==o)throw new Error(`Arrays are of different type. Actual: ${s}. Expected: ${o}`)}if(Array.isArray(e)&&Array.isArray(n)){let s=vo(e),o=vo(n);if(!dl(s,o))throw new Error(`Arrays have different shapes. Actual: [${s}]. Expected: [${o}]`)}let i=Hr(e)?e:bc(e),a=Hr(n)?n:bc(n);if(i.length!==a.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${a.length}.\nActual:   ${i}.\nExpected: ${a}.`);for(let s=0;s<a.length;++s){let o=i[s],l=a[s];if(!t(o,l))throw new Error(`Arrays differ: actual[${s}] = ${o}, expected[${s}] = ${l}.\nActual:   ${i}.\nExpected: ${a}.`)}typeof expect<"u"&&expect().nothing()}function G1e(e,n){e().then(()=>n.fail(),()=>n()),typeof expect<"u"&&expect().nothing()}function q1e(e,n){let t="string"==typeof n||"number"==typeof n||"boolean"==typeof n?[n]:n;return uc(e)||uc(e[0])||uc(n)||uc(n[0])?hA(e,t,(r,i)=>r==i):hA(e,n,(r,i)=>pA(r,i,0))}function K1e(e,n,t){if(null==t&&(t=dA()),!pA(e,n,t))throw new Error(`Numbers differ: actual === ${e}, expected === ${n}`);typeof expect<"u"&&expect().nothing()}function pA(e,n,t){return!isFinite(e)&&!isFinite(n)||!(isNaN(e)||isNaN(n)||Math.abs(e-n)>t)}function X1e(e,n,t){for(let r=0;r<e.length;r++)if(e[r]<n||e[r]>t)throw new Error(`Value out of range:${e[r]} low: ${n}, high: ${t}`)}function Y1e(e,n){let t=new Float32Array(e),r=new Float32Array(n);if(t.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${t.length}`);for(let i=0;i<r.length;i++)if(t[i]!==r[i])throw new Error(`Expected ArrayBuffer value at ${i} to be ${r[i]} but got ${t[i]} instead`)}function mj(e){for(let n=0;n<e.length;n++){let t=e[n];Array.isArray(t)?mj(t):e[n]=Gb(t)}return e}function Z1e(e){let n=document.createElement("video");return"playsInline"in n&&(n.playsInline=!0),n.muted=!0,n.loop=!0,n.style.position="fixed",n.style.left="0px",n.style.top="0px",n.preload="auto",n.appendChild(e),new Promise(t=>{n.addEventListener("loadeddata",r=>t(n)),n.load()})}function Q1e(e){return fA.apply(this,arguments)}function fA(){return fA=R(function*(e){yield e.play(),"requestVideoFrameCallback"in e&&(yield new Promise(n=>{e.requestVideoFrameCallback(n)}))}),fA.apply(this,arguments)}var mA=class{constructor(e,n,t,r,i){this.mean=e,this.stdDev=n,this.dtype=t,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);let a=i||Math.random();this.random=uA.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){let r=this.nextVal;return this.nextVal=NaN,r}let e,n,t=!1;for(;!t;){let r,i,a;do{r=2*this.random()-1,i=2*this.random()-1,a=r*r+i*i}while(a>=1||0===a);let s=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*r*s,n=this.mean+this.stdDev*i*s,(!this.truncated||this.isValidTruncated(e))&&(t=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}},gj=V({randomGamma_:function tCe(e,n,t=1,r="float32",i){if(ya(e),null==t&&(t=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error(`Unsupported data type ${r}`);let a=new class{constructor(e,n,t,r){this.alpha=e,this.beta=1/n,this.dtype=t;let i=r||Math.random();this.randu=uA.alea(i.toString()),this.randn=new mA(0,1,t,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,t,r,i,a;for(;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,e=r*r,n=1-.331*e*e,t=.5*e+this.d*(1-a+Math.log(a)),i=this.randu(),i<n||Math.log(i)<t)break}return a*=1/this.beta*this.d,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}(n,t,r,i),s=wt(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}}),qw=V({randomNormal_:function nCe(e,n=0,t=1,r,i){if(ya(e),null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);let a=new mA(n,t,r,!1,i),s=wt(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}}),yj=V({randomStandardNormal_:function rCe(e,n,t){if(null!=n&&"bool"===n)throw new Error(`Unsupported data type ${n}`);return qw(e,0,1,n,t)}}),Ic=V({randomUniform_:function iCe(e,n=0,t=1,r="float32",i){ya(e);let a=wt(e,r),s=new class{constructor(e=0,n=1,t,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=n-e,this.dtype=t,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=uA.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}(n,t,null,i);for(let o=0;o<a.values.length;o++)a.values[o]=s.nextValue();return a.toTensor()}}),bj=V({randomUniformInt_:function aCe(e,n,t,r){return Ic(e,n,t,"int32",r)}});function Eh(e,n,t=1,r="float32"){if(0===t)throw new Error("Cannot have a step of zero");return $.runKernel(Ab,{},{start:e,stop:n,step:t,dtype:r})}var Xm=V({real_:function sCe(e){let n={input:A(e,"input","real")};return $.runKernel(Cw,n)}}),gA=V({reciprocal_:function oCe(e){let n={x:A(e,"x","reciprocal")};return $.runKernel(zd,n)}}),an=V({relu_:function lCe(e){let n={x:A(e,"x","relu")};return $.runKernel(Ud,n)}}),Kw=V({relu6_:function cCe(e){let n={x:A(e,"x","relu6")};return $.runKernel(jd,n)}}),Wa=V({reverse_:function uCe(e,n){let t={x:A(e,"x","reverse")};return $.runKernel(Gd,t,{dims:n})}}),_j=V({reverse1d_:function dCe(e){let n=A(e,"x","reverse");return T(1===n.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${n.rank}.`),Wa(n,0)}}),vj=V({reverse2d_:function hCe(e,n){let t=A(e,"x","reverse");return T(2===t.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${t.rank}.`),Wa(t,n)}}),xj=V({reverse3d_:function pCe(e,n){let t=A(e,"x","reverse");return T(3===t.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${t.rank}.`),Wa(t,n)}}),wj=V({reverse4d_:function fCe(e,n){let t=A(e,"x","reverse");return T(4===t.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${t.rank}.`),Wa(t,n)}}),Xw=V({round_:function mCe(e){let n={x:A(e,"x","round")};return $.runKernel(qd,n)}}),Yw=V({rsqrt_:function gCe(e){let n={x:A(e,"x","rsqrt","float32")};return $.runKernel(Kd,n)}}),Zw=V({selu_:function yCe(e){let n={x:A(e,"x","selu")};return $.runKernel(Xd,n)}}),Ym=V({separableConv2d_:function bCe(e,n,t,r,i,a=[1,1],s="NHWC"){let o=A(e,"x","separableConv2d"),l=A(n,"depthwiseFilter","separableConv2d"),c=A(t,"pointwiseFilter","separableConv2d"),u=o,h=!1;if(3===o.rank&&(h=!0,u=H(o,[1,o.shape[0],o.shape[1],o.shape[2]])),"NCHW"===s)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");T(4===u.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),T(4===l.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),T(4===c.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),T(1===c.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),T(1===c.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let d=l.shape[2],p=l.shape[3];T(c.shape[2]===d*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*p}, but got ${c.shape[2]}.`);let f=Ch(u,l,r,i,s,a),m=Oi(f,c,1,"valid",s);return h?H(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});function yA(){return yA=R(function*(e,n){let t=A(e,"x","setdiff1d"),r=A(n,"y","setdiff1d");T(t.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${t.dtype}) and y (${r.dtype}).`),T(1===t.rank,()=>`x should be 1D tensor, but got x (${t.shape}).`),T(1===r.rank,()=>`y should be 1D tensor, but got y (${r.shape}).`);let i=yield t.data(),a=yield r.data(),s=new Set(a),o=0;for(let u=0;u<i.length;u++)s.has(i[u])||o++;let l=new yr([o],t.dtype),c=new yr([o],"int32");for(let u=0,h=0;u<i.length;u++)s.has(i[u])||(l.values[h]=i[u],c.values[h]=u,h++);return[l.toTensor(),c.toTensor()]}),yA.apply(this,arguments)}var Cj=function _Ce(e,n){return yA.apply(this,arguments)},bA=V({sign_:function vCe(e){let n={x:A(e,"x","sign")};return $.runKernel(Qd,n)}}),Qw=V({sin_:function xCe(e){let n={x:A(e,"x","sin","float32")};return $.runKernel(Yd,n)}}),Jw=V({sinh_:function wCe(e){let n={x:A(e,"x","sinh")};return $.runKernel(Zd,n)}}),f_=V({slice1d_:function CCe(e,n,t){let r=A(e,"x","slice1d");return T(1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),At(r,[n],[t])}}),e1=V({slice2d_:function kCe(e,n,t){let r=A(e,"x","slice2d");return T(2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),At(r,n,t)}}),Zm=V({slice3d_:function SCe(e,n,t){let r=A(e,"x","slice3d");return T(3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),At(r,n,t)}}),Qm=V({slice4d_:function ICe(e,n,t){let r=A(e,"x","slice4d");return T(4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),At(r,n,t)}}),Mc=V({softmax_:function MCe(e,n=-1){let t=A(e,"logits","softmax","float32");if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${t.rank} and dim was ${n}`);return $.runKernel(rh,{logits:t},{dim:n})}}),m_=V({fft_:function ECe(e){return T("complex64"===e.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`),$.runKernel(yw,{input:e})}}),Jm=V({ifft_:function DCe(e){return T("complex64"===e.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`),$.runKernel(bw,{input:e})}}),t1=V({irfft_:function ACe(e){let r,n=e.shape[e.shape.length-1],t=e.size/n;if(n<=2){let i=H(e,[t,n]);r=Jm(i)}else{let i=[t,2*(n-1)],a=H(Xm(e),[t,n]),s=H(s_(e),[t,n]),o=Wa(At(a,[0,1],[t,n-2]),1),l=U(Wa(At(s,[0,1],[t,n-2]),1),He(-1)),c=fn([a,o],1),u=fn([s,l],1),h=H(pl(c,u),[i[0],i[1]]);r=Jm(h)}if(r=Xm(r),3===e.rank&&0!==e.shape[0]){let i=r,a=e.shape[0];r=H(r,[a,r.shape[0]/a,r.shape[1]]),i.dispose()}return r}}),Yi=V({split_:function TCe(e,n,t=0){let r={x:A(e,"x","split")};return $.runKernel(Mm,r,{numOrSizeSplits:n,axis:t})}}),g_=V({rfft_:function NCe(e,n){T("float32"===e.dtype,()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let i,t=e.shape[e.shape.length-1],r=e.size/t;if(null!=n&&n<t){let f=e.shape.map(g=>0),m=e.shape.map(g=>g);m[e.shape.length-1]=n,i=At(e,f,m),t=n}else if(null!=n&&n>t){let f=e.shape.map(m=>m);f[e.shape.length-1]=n-t,i=fn([e,Kn(f)],e.shape.length-1),t=n}else i=e;let a=Ft(i),s=H(pl(i,a),[r,t]),o=m_(s),l=Math.floor(t/2)+1,c=Xm(o),u=s_(o),h=Yi(c,[l,t-l],c.shape.length-1),d=Yi(u,[l,t-l],u.shape.length-1),p=i.shape.slice();return p[i.shape.length-1]=l,H(pl(h[0],d[0]),p)}}),n1=V({squaredDifference_:function OCe(e,n){let t=A(e,"a","squaredDifference"),r=A(n,"b","squaredDifference");return[t,r]=Gn(t,r),mn(t.shape,r.shape),$.runKernel(ih,{a:t,b:r},{})}}),Ec=V({squeeze_:function FCe(e,n){let t=A(e,"x","squeeze","string_or_numeric");return H(t,HW(t.shape,n).newShape)}}),vr=V({stack_:function RCe(e,n=0){let t=Zb(e,"tensors","stack","string_or_numeric");return T(t.length>=1,()=>"Pass at least one tensor to tf.stack"),t.length>0&&T(n<=t[0].rank,()=>"Axis must be <= rank of the tensor"),$.runKernel(ym,t,{axis:n})}}),Dh=V({step_:function PCe(e,n=0){let t={x:A(e,"x","step")};return $.runKernel(mc,t,{alpha:n})}}),_A=V({stridedSlice_:function LCe(e,n,t,r,i=0,a=0,s=0,o=0,l=0){let c={x:A(e,"x","stridedSlice","string_or_numeric")};return $.runKernel(Am,c,{begin:n,end:t,strides:r,beginMask:i,endMask:a,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l})}}),vA=V({tan_:function $Ce(e){let n={x:A(e,"x","tan","float32")};return $.runKernel(sh,n)}});function Qt(e,n){Hu(e);let t=vo(e,n);if(1!==t.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return _c(e,null,t,n)}function So(e,n,t){if(Hu(e),null!=n&&2!==n.length)throw new Error("tensor2d() requires shape to have two numbers");let r=vo(e,t);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==n)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return _c(e,n,r,t)}function r1(e,n,t){if(Hu(e),null!=n&&3!==n.length)throw new Error("tensor3d() requires shape to have three numbers");let r=vo(e,t);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==n)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return _c(e,n,r,t)}function Dc(e,n,t){if(Hu(e),null!=n&&4!==n.length)throw new Error("tensor4d() requires shape to have four numbers");let r=vo(e,t);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==n)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return _c(e,n,r,t)}function kj(e,n,t){if(Hu(e),null!=n&&5!==n.length)throw new Error("tensor5d() requires shape to have five numbers");let r=vo(e,t);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==n)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return _c(e,n,r,t)}function Sj(e,n,t){if(Hu(e),null!=n&&6!==n.length)throw new Error("tensor6d() requires shape to have six numbers");let r=vo(e,t);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==n)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return _c(e,n=n||r,r,t)}var a1={};function xA(e,n,t){let r=n.rank>1?n.shape[n.rank-1]:1,i=n.rank>1?n.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${t.shape}, indices.shape: ${n.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${i}.`;if(t.rank<i)throw new Error(a+` update.rank < ${i}. `);if(e.length<r+(t.rank-i))throw new Error(a+` Output shape length < ${r+(t.rank-i)}`);if(t.rank!==i+e.length-r)throw new Error(a+" update.rank != "+(i+e.length-r));for(let s=0;s<i;++s)if(t.shape[s]!==n.shape[s])throw new Error(a+` updates.shape[${s}] (${t.shape[s]}) != indices.shape[${s}] (${n.shape[s]}).`);for(let s=0;s<t.rank-i;++s)if(t.shape[s+i]!==e[s+r])throw new Error(a+` updates.shape[${s+i}] (${t.shape[s+i]}) != shape[${s+i}] (${e[s+i]})`)}function s1(e,n,t){if(n.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${n.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==n.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${n.dtype}`);if(t.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${t}`);if(0===t.length){if(0===n.size)throw new Error(`Indices specified for empty output. indices shape: ${n.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}xA(t,n,e)}function Ij(e,n,t){let r=n.shape.length,i=r>1?n.shape[r-1]:1,a=t.length,s=1;for(let h=i;h<a;++h)s*=t[h];let o=i<1?1:i;return{sliceRank:i,numUpdates:rn(n.shape)/o,sliceSize:s,strides:[...Af(t.slice(0,i)),1],outputSize:rn(t)}}it(a1,{calculateShapes:()=>Ij,validateInput:()=>s1,validateUpdateShape:()=>xA});var Mj=V({tensorScatterUpdate_:function BCe(e,n,t){let r=A(e,"tensor","tensorScatterupdate"),i=A(n,"indices","tensorScatterupdate","int32"),a=A(t,"updates","tensorScatterupdate");if(s1(a,i,r.shape),r.dtype!==a.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${a.dtype}.`);return $.runKernel(wm,{tensor:r,indices:i,updates:a},{})}}),wA=V({topk_:function VCe(e,n=1,t=!0){let r=A(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");let i=r.shape[r.shape.length-1];if(n<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${n}`);if(n>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${n}`);let a={x:r},s={k:n,sorted:t},[o,l]=$.runKernel(Tm,a,s);return{values:o,indices:l}}}),o1=V({truncatedNormal_:function zCe(e,n=0,t=1,r,i){if(ya(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");let a=new mA(n,t,r,!0,i),s=wt(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=a.nextValue();return s.toTensor()}}),CA=V({unique_:function UCe(e,n=0){let t=A(e,"x","unique","string_or_numeric");T(t.rank>0,()=>"The input tensor must be at least 1D");let r={x:t},i={axis:n},[a,s]=$.runKernel(Bb,r,i);return{values:a,indices:s}}}),l1=V({unsortedSegmentSum_:function HCe(e,n,t){let r=A(e,"x","unsortedSegmentSum"),i=A(n,"segmentIds","unsortedSegmentSum","int32");return T(Df(t),()=>"numSegments must be of dtype int"),$.runKernel(Vb,{x:r,segmentIds:i},{numSegments:t})}}),tr=V({unstack_:function WCe(e,n=0){let t=A(e,"x","unstack","string_or_numeric");return T(n>=-t.shape.length&&n<t.shape.length,()=>`Axis = ${n} is not in [-${t.shape.length}, ${t.shape.length})`),$.runKernel(Om,{value:t},{axis:n})}});function Ej(e,n){return Gw(e,n,"right")}function kA(e,n=!0,t,r){return $.makeVariable(e,n,t,r)}function Dj(e,n){let t=[];for(let a=0;a<n.length;a++)n[a]&&t.push(a);let r=wt(e,"int32"),i=wt([t.length,e.length],"int32");for(let a=0;a<t.length;a++){let s=r.indexToLoc(t[a]);i.values.set(s,a*e.length)}return i.toTensor()}function SA(){return SA=R(function*(e){let n=A(e,"condition","whereAsync","bool"),t=yield n.data(),r=Dj(n.shape,t);return e!==n&&n.dispose(),r}),SA.apply(this,arguments)}var IA=function jCe(e){return SA.apply(this,arguments)};function MA(){return MA=R(function*(e,n,t){let r=A(e,"tensor","boolMask"),i=A(n,"mask","boolMask","bool"),a=t??0,s=i.rank,o=r.shape;T(s>0,()=>"mask cannot be scalar"),Di(o.slice(a,a+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=a;m<a+s;m++)l*=o[m];let c=o.slice(0,a).concat([l],o.slice(a+s)),u=H(r,c),h=H(i,[-1]),d=yield IA(h),p=Ec(d,[1]),f=Gm(u,p,a);return e!==r&&r.dispose(),n!==i&&i.dispose(),p.dispose(),u.dispose(),h.dispose(),d.dispose(),f}),MA.apply(this,arguments)}var Aj=function GCe(e,n,t){return MA.apply(this,arguments)},kt=V({transpose_:function qCe(e,n,t){let r=A(e,"x","transpose");if(null==n&&(n=r.shape.map((s,o)=>o).reverse()),T(r.rank===n.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${n}.`),n.forEach(s=>{T(s>=0&&s<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${n}`)}),r.rank<=1)return r.clone();let i={x:r},a={perm:n};return"complex64"===r.dtype?G(()=>{let s=Xm(r),o=s_(r);return s=$.runKernel(hl,{x:s},a),o=$.runKernel(hl,{x:o},a),t&&(o=Dn(o)),pl(s,o)}):$.runKernel(hl,i,a)}}),Tj=V({movingAverage_:function KCe(e,n,t,r,i=!0){let a=A(e,"v","movingAverage"),s=A(n,"x","movingAverage"),o=A(t,"decay","movingAverage");p8(a,s),T(dl(a.shape,s.shape),()=>"Shape mismatch in v and x");let l=He(1),c=Ee(l,o),u=U(Ee(s,a),c);if(i){T(null!=r,()=>"When using zeroDebias: true, step is required.");let h=A(r,"step","movingAverage");u=Te(u,Ee(l,yl(o,h)))}return se(a,u)}}),Nj=V({scatterND_:function XCe(e,n,t){ya(t);let r=A(e,"indices","scatterND","int32"),i=A(n,"updates","scatterND");return s1(i,r,t),$.runKernel(xm,{indices:r,updates:i},{shape:t})}}),Oj=V({sparseToDense_:function ZCe(e,n,t,r=0){ya(t);let i=A(e,"sparseIndices","sparseToDense","int32"),a=A(n,"sparseValues","sparseToDense","string_or_numeric"),s=A(r,"defaultValue","sparseToDense",a.dtype);return function YCe(e,n,t,r){if("int32"!==e.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);let i=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(t.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${t.length}, should be: ${a}.`);if(0!==n.rank&&(1!==n.rank||n.size!==i))throw new Error(`sparseValues has incorrect shape ${n.shape}, should be [] or [${i}]`);if(n.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,a,t,s),$.runKernel(Dm,{sparseIndices:i,sparseValues:a,defaultValue:s},{outputShape:t})}}),Fj=V({gatherND_:function QCe(e,n){let t=A(n,"indices","gatherND","int32"),r={params:A(e,"x","gatherND","string_or_numeric"),indices:t};return $.runKernel(em,r)}}),EA=V({dropout_:function eke(e,n,t,r){let i=A(e,"x","dropout");if(T("float32"===i.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),T(n>=0&&n<1,()=>`rate must be a float in the range [0, 1), but got ${n}.`),0===n)return e instanceof gt?i.clone():i;let a=function JCe(e,n){if(null==n)return e.shape.slice();if(dl(e.shape,n))return n;if(e.shape.length===n.length){let t=[];for(let r=0;r<e.shape.length;r++)t.push(null==n[r]&&null!=e.shape[r]?e.shape[r]:n[r]);return t}return n}(i,t),s=1-n,o=Te(jm(se(Ic(a,0,1,"float32",r),s)),s);return U(i,o)}});function DA(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function c1(e,n,t){let r=1-e%2,i=new Float32Array(e);for(let a=0;a<e;++a){let s=2*Math.PI*a/(e+r-1);i[a]=n-t*Math.cos(s)}return Qt(i,"float32")}function AA(){return AA=R(function*(e,n,t=1){let r=A(e,"predictions","inTopK"),i=A(n,"targets","inTopK");T(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),T(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),Di(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let a=r.shape[r.shape.length-1];T(t>0&&t<=a,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${t}`);let s=yield r.data(),o=yield i.data(),[l,c]=[s.length/a,a],u=WW("bool",l);for(let h=0;h<l;h++){let d=h*c,p=s.subarray(d,d+c),f=[];for(let m=0;m<p.length;m++)f.push({value:p[m],index:m});f.sort((m,g)=>g.value-m.value),u[h]=0;for(let m=0;m<t;m++)if(f[m].index===o[h]){u[h]=1;break}}return e!==r&&r.dispose(),n!==i&&i.dispose(),Ti(u,i.shape,"bool")}),AA.apply(this,arguments)}var Rj=function tke(e,n){return AA.apply(this,arguments)},eg={};it(eg,{conv2d:()=>ike,depthwiseConv2d:()=>lke,matMul:()=>uke});var TA=V({conv2DBackpropFilter_:function nke(e,n,t,r,i,a="NHWC",s){let o=e;3===e.rank&&(o=H(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=n;3===l.rank&&(l=H(n,[1,n.shape[0],n.shape[1],n.shape[2]])),T(4===o.rank,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),T(4===l.rank,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),T(4===t.length,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${t}.`);let c="NHWC"===a?o.shape[3]:o.shape[1],u="NHWC"===a?l.shape[3]:l.shape[1];return T(c===t[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${t[2]}.`),T(u===t[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${t[3]}).`),Ni("conv2dDerFilter",i,s),$.runKernel(hw,{x:o,dy:l},{strides:r,pad:i,dataFormat:a,dimRoundingMode:s,filterShape:t})}});function u1(e,n,t){if(null==t||"linear"===t)return e;if("relu"===t)return U(e,Dh(n));throw new Error(`Cannot compute gradient for fused activation ${t}.`)}function d1(e,n){let t=n,r=_r(e.shape,n.shape);return r.length>0&&(t=Re(t,r)),H(t,e.shape)}function h1(e,n,t,r){if("linear"===n)return e;if("relu"===n)return an(e);if("elu"===n)return Um(e);if("relu6"===n)return Kw(e);if("prelu"===n)return p_(e,t);if("leakyrelu"===n)return o_(e,r);if("sigmoid"===n)return bs(e);throw new Error(`Unknown fused activation ${n}.`)}var p1=(e,n)=>!(e>0)||"linear"===n,ike=V({fusedConv2d_:function rke({x:e,filter:n,strides:t,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:s,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(!1===p1($.state.gradientDepth,l=l||"linear")){T("NHWC"===i,()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let S=Oi(e,n,t,r,i,a,s);return null!=o&&(S=se(S,o)),h1(S,l,c,u)}let h=A(e,"x","conv2d","float32"),d=A(n,"filter","conv2d","float32"),p=h,f=!1;3===h.rank&&(f=!0,p=H(h,[1,h.shape[0],h.shape[1],h.shape[2]])),T(4===p.rank,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),T(4===d.rank,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),Ni("fused conv2d",r,s);let m="NHWC"===i?p.shape[3]:p.shape[1];T(d.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${d.shape[2]}.`),T(wo(t,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`);let y,b,g=e_(p.shape,d.shape,t,a,r,s);if(null!=o&&(y=A(o,"bias","fused conv2d"),[y]=Gn(y,h),"NHWC"===i?mn(g.outShape,y.shape):(T(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),T(0===y.shape.length||y.shape[0]===g.outChannels||1===y.shape[0],()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${g.outChannels})`))),null!=c){let S=c.shape;if(T(S.length<=1||3===S.length,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${S.length}.`),1===S.length)T(1===S[0]||S[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the number of output channels (${g.outChannels}).`);else if(3===S.length)try{mn(S,g.outShape)}catch{throw Error(`Error in fused conv2d: PReLU activation weights (${S}) is not compatible with the output shape of the conv2d (${g.outShape}).`)}b=A(c,"prelu weights","fused conv2d")}let _=(S,M)=>{T("NHWC"===i,()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);let[D,N,F,O]=M,k=u1(S,F,l);T(Cc(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);let Z=[zD(N.shape,k,D,t,r),TA(N,k,D.shape,t,r)];if(null!=O){let z=d1(O,k);Z.push(z)}return Z},v={x:p,filter:d,bias:y,preluActivationWeights:b},x={strides:t,pad:r,dataFormat:i,dilations:a,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return null==o?Co((S,M,D)=>{let N=$.runKernel(ch,v,x);return D([M,S,N]),f&&(N=H(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:_}})(p,d):Co((S,M,D,N)=>{let F=$.runKernel(ch,v,x);return N([M,S,F,D]),f&&(F=H(F,[F.shape[1],F.shape[2],F.shape[3]])),{value:F,gradFunc:_}})(p,d,y)}}),Pj=V({depthwiseConv2dNativeBackpropFilter_:function ake(e,n,t,r,i,a=[1,1],s){let o=e;3===e.rank&&(o=H(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=n;return 3===l.rank&&(l=H(n,[1,n.shape[0],n.shape[1],n.shape[2]])),$.runKernel(pw,{x:o,dy:l},{strides:r,pad:i,dimRoundingMode:s,dilations:a,filterShape:t})}}),Lj=V({depthwiseConv2dNativeBackpropInput_:function ske(e,n,t,r,i,a=[1,1],s){let o=n,l=!1;3===n.rank&&(l=!0,o=H(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let h=$.runKernel(fw,{dy:o,filter:t},{strides:r,pad:i,dimRoundingMode:s,dilations:a,inputShape:e});return l?H(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),lke=V({fusedDepthwiseConv2d_:function oke({x:e,filter:n,strides:t,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:s,bias:o,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(!1===p1($.state.gradientDepth,l)){let x=Ch(e,n,t,r,i,a,s);return null!=o&&(x=se(x,o)),h1(x,l,c,u)}let h=A(e,"x","depthwiseConv2d","float32"),d=A(n,"filter","depthwiseConv2d","float32"),p=h,f=!1;3===h.rank&&(f=!0,p=H(h,[1,h.shape[0],h.shape[1],h.shape[2]])),T(4===p.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${p.rank}.`),T(4===d.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),T(p.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${p.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),null==a&&(a=[1,1]),T(wo(t,a),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${t} and dilations '${a}'`),Ni("fused depthwiseConv2d",r,s);let g,y,m=e_(p.shape,d.shape,t,a,r,s,!0);null!=o&&(g=A(o,"bias","fused conv2d"),[g]=Gn(g,h),mn(m.outShape,g.shape)),null!=c&&(y=A(c,"prelu weights","fused depthwiseConv2d"));let b=(x,S)=>{T(Cc(a),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);let[M,D,N,F]=S,O=u1(x,N,l),k=Lj(D.shape,O,M,t,r,a,s),P=Pj(D,O,M.shape,t,r,a,s);return null!=F?[k,P,d1(g,O)]:[k,P]},_={x:p,filter:d,bias:g,preluActivationWeights:y},v={strides:t,pad:r,dataFormat:i,dilations:a,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return null==o?Co((x,S,M)=>{let D=$.runKernel(uh,_,v);return M([S,x,D]),f&&(D=H(D,[D.shape[1],D.shape[2],D.shape[3]])),{value:D,gradFunc:b}})(p,d):Co((x,S,M,D)=>{let N=$.runKernel(uh,_,v);return D([S,x,N,M]),f&&(N=H(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:b}})(p,d,g)}}),uke=V({fusedMatMul_:function cke({a:e,b:n,transposeA:t=!1,transposeB:r=!1,bias:i,activation:a="linear",preluActivationWeights:s,leakyreluAlpha:o=.2}){if(!1===p1($.state.gradientDepth,a)){let F=Ct(e,n,t,r);return null!=i&&(F=se(F,i)),h1(F,a,s,o)}let l=A(e,"a","fused matMul"),c=A(n,"b","fused matMul");[l,c]=Gn(l,c);let u=t?l.shape[l.rank-2]:l.shape[l.rank-1],h=r?c.shape[c.rank-1]:c.shape[c.rank-2],d=t?l.shape[l.rank-1]:l.shape[l.rank-2],p=r?c.shape[c.rank-2]:c.shape[c.rank-1],f=l.shape.slice(0,-2),m=c.shape.slice(0,-2),g=rn(f),y=rn(m);T(u===h,()=>`Error in fused matMul: inner shapes (${u}) and (${h}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${t} and transposeB=${r} must match.`);let x,S,b=mn(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([d,p]),_=H(l,t?[g,u,d]:[g,d,u]),v=H(c,r?[y,p,h]:[y,h,p]);null!=i&&(x=A(i,"bias","fused matMul"),[x]=Gn(x,l),mn(b,x.shape)),null!=s&&(S=A(s,"prelu weights","fused matMul"));let M=(F,O)=>{let W,q,[k,P,j,Z]=O,z=u1(H(F,j.shape),j,a);return t||r?!t&&r?(W=Ct(z,P,!1,!1),q=Ct(z,k,!0,!1)):t&&!r?(W=Ct(P,z,!1,!0),q=Ct(k,z,!1,!1)):(W=Ct(P,z,!0,!0),q=Ct(z,k,!0,!0)):(W=Ct(z,P,!1,!0),q=Ct(k,z,!0,!1)),null!=i?[W,q,d1(Z,z)]:[W,q]},D={a:_,b:v,bias:x,preluActivationWeights:S},N={transposeA:t,transposeB:r,activation:a,leakyreluAlpha:o};return null==i?Co((F,O,k)=>{let P=$.runKernel(lh,D,N);return k([F,O,P]),{value:H(P,b),gradFunc:M}})(_,v):Co((F,O,k,P)=>{let j=$.runKernel(lh,D,N);return P([F,O,j,k]),{value:H(j,b),gradFunc:M}})(_,v,x)}}),hke=V({hammingWindow_:function dke(e){return c1(e,.54,.46)}}),$j=V({hannWindow_:function pke(e){return c1(e,.5,.5)}}),Bj=V({frame_:function fke(e,n,t,r=!1,i=0){let a=0,s=[];for(;a+n<=e.size;)s.push(At(e,a,n)),a+=t;if(r)for(;a<e.size;){let o=a+n-e.size,l=fn([At(e,a,n-o),ba([o],i)]);s.push(l),a+=t}return 0===s.length?So([],[0,n]):H(fn(s),[s.length,n])}}),gke=V({stft_:function mke(e,n,t,r,i=$j){null==r&&(r=DA(n));let a=Bj(e,n,t),s=U(a,i(n));return g_(s,r)}}),bke=V({cropAndResize_:function yke(e,n,t,r,i="bilinear",a=0){let s=A(e,"image","cropAndResize"),o=A(n,"boxes","cropAndResize","float32"),l=A(t,"boxInd","cropAndResize","int32"),c=o.shape[0];return T(4===s.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),T(2===o.rank&&4===o.shape[1],()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${o.shape}.`),T(1===l.rank&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${o.shape}.`),T(2===r.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),T(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),T("bilinear"===i||"nearest"===i,()=>`method must be bilinear or nearest, but was ${i}`),$.runKernel(jf,{image:s,boxes:o,boxInd:l},{method:i,extrapolationValue:a,cropSize:r})}}),vke=V({flipLeftRight_:function _ke(e){let n=A(e,"image","flipLeftRight","float32");return T(4===n.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${n.rank}.`),$.runKernel(Qf,{image:n},{})}}),wke=V({grayscaleToRGB_:function xke(e){let n=A(e,"image","grayscaleToRGB"),t=n.rank-1,r=n.shape[t];T(n.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${n.rank}.`),T(1===r,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let i=new Array(n.rank);return i.fill(1,0,t),i[t]=3,va(n,i)}}),kke=V({rgbToGrayscale_:function Cke(e){let n=A(e,"image","RGBToGrayscale"),r=n.shape[n.rank-1];T(n.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${n.rank}.`),T(3===r,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);let o,i=n.dtype,a=xe(n,"float32"),s=Qt([.2989,.587,.114]);switch(n.rank){case 2:o=kh("ij,j->i",a,s);break;case 3:o=kh("ijk,k->ij",a,s);break;case 4:o=kh("ijkl,l->ijk",a,s);break;case 5:o=kh("ijklm,m->ijkl",a,s);break;case 6:o=kh("ijklmn,n->ijklm",a,s);break;default:throw new Error("Not a valid tensor rank.")}return o=jr(o,-1),xe(o,i)}}),Ike=V({rotateWithOffset_:function Ske(e,n,t=0,r=.5){let i=A(e,"image","rotateWithOffset","float32");return T(4===i.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`),$.runKernel(Rm,{image:i},{radians:n,fillValue:t,center:r})}});function tg(e,n,t,r,i,a){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==a&&(a=0);let s=e.shape[0];return t=Math.min(t,s),T(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),T(2===e.rank,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),T(4===e.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),T(1===n.rank,()=>"scores must be a 1D tensor"),T(n.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${n.shape[0]}`),T(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:t,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}var Eke=V({nonMaxSuppression_:function Mke(e,n,t,r=.5,i=Number.NEGATIVE_INFINITY){let a=A(e,"boxes","nonMaxSuppression","float32"),s=A(n,"scores","nonMaxSuppression","float32"),o=tg(a,s,t,r,i);return $.runKernel(pm,{boxes:a,scores:s},{maxOutputSize:t=o.maxOutputSize,iouThreshold:r=o.iouThreshold,scoreThreshold:i=o.scoreThreshold})}});function Dke(e,n,t){let r=function Ake(e,n,t){return function Nke(e,n,t){let r=0,i=e.length,a=0,s=!1;for(;r<i;){a=r+(i-r>>>1);let o=t(n,e[a]);o>0?r=a+1:(i=a,s=!o)}return s?r:-r-1}(e,n,t||Tke)}(e,n,t);e.splice(r<0?-(r+1):r,0,n)}function Tke(e,n){return e>n?1:e<n?-1:0}function Vj(e,n,t,r,i){return NA(e,n,t,r,i,0)}function zj(e,n,t,r,i,a){return NA(e,n,t,r,i,0,!1,a,!0)}function Uj(e,n,t,r,i,a){return NA(e,n,t,r,i,a,!0)}function NA(e,n,t,r,i,a,s=!1,o=!1,l=!1){let c=[];for(let g=0;g<n.length;g++)n[g]>i&&c.push({score:n[g],boxIndex:g,suppressBeginIndex:0});c.sort(Hj);let u=a>0?-.5/a:0,h=[],d=[];for(;h.length<t&&c.length>0;){let g=c.pop(),{score:y,boxIndex:b,suppressBeginIndex:_}=g;if(y<i)break;let v=!1;for(let x=h.length-1;x>=_;--x){let S=Oke(e,b,h[x]);if(S>=r){v=!0;break}if(g.score=g.score*Fke(r,u,S),g.score<=i)break}g.suppressBeginIndex=h.length,v||(g.score===y?(h.push(b),d.push(g.score)):g.score>i&&Dke(c,g,Hj))}let p=h.length,f=t-p;o&&f>0&&(h.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));let m={selectedIndices:h};return s&&(m.selectedScores=d),l&&(m.validOutputs=p),m}function Oke(e,n,t){let r=e.subarray(4*n,4*n+4),i=e.subarray(4*t,4*t+4),a=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),u=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),p=(o-a)*(l-s),f=(h-c)*(d-u);if(p<=0||f<=0)return 0;let m=Math.max(a,c),g=Math.max(s,u),y=Math.min(o,h),b=Math.min(l,d),_=Math.max(y-m,0)*Math.max(b-g,0);return _/(p+f-_)}function Fke(e,n,t){let r=Math.exp(n*t*t);return t<=e?r:0}function Hj(e,n){return e.score-n.score||e.score===n.score&&n.boxIndex-e.boxIndex}function OA(){return OA=R(function*(e,n,t,r=.5,i=Number.NEGATIVE_INFINITY){let a=A(e,"boxes","nonMaxSuppressionAsync"),s=A(n,"scores","nonMaxSuppressionAsync"),o=tg(a,s,t,r,i);t=o.maxOutputSize,r=o.iouThreshold,i=o.scoreThreshold;let l=yield Promise.all([a.data(),s.data()]),c=l[0],u=l[1],{selectedIndices:h}=Vj(c,u,t,r,i);return a!==e&&a.dispose(),s!==n&&s.dispose(),Qt(h,"int32")}),OA.apply(this,arguments)}var $ke=V({nonMaxSuppressionWithScore_:function Lke(e,n,t,r=.5,i=Number.NEGATIVE_INFINITY,a=0){let s=A(e,"boxes","nonMaxSuppression"),o=A(n,"scores","nonMaxSuppression"),l=tg(s,o,t,r,i,a),h=$.runKernel(mm,{boxes:s,scores:o},{maxOutputSize:t=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:i=l.scoreThreshold,softNmsSigma:a=l.softNmsSigma});return{selectedIndices:h[0],selectedScores:h[1]}}});function FA(){return FA=R(function*(e,n,t,r=.5,i=Number.NEGATIVE_INFINITY,a=0){let s=A(e,"boxes","nonMaxSuppressionAsync"),o=A(n,"scores","nonMaxSuppressionAsync"),l=tg(s,o,t,r,i,a);t=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,a=l.softNmsSigma;let c=yield Promise.all([s.data(),o.data()]),u=c[0],h=c[1],{selectedIndices:d,selectedScores:p}=Uj(u,h,t,r,i,a);return s!==e&&s.dispose(),o!==n&&o.dispose(),{selectedIndices:Qt(d,"int32"),selectedScores:Qt(p)}}),FA.apply(this,arguments)}var Uke=V({nonMaxSuppressionPadded_:function zke(e,n,t,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){let s=A(e,"boxes","nonMaxSuppression"),o=A(n,"scores","nonMaxSuppression"),l=tg(s,o,t,r,i,null),f=$.runKernel(fm,{boxes:s,scores:o},{maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:a});return{selectedIndices:f[0],validOutputs:f[1]}}});function RA(){return RA=R(function*(e,n,t,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){let s=A(e,"boxes","nonMaxSuppressionAsync"),o=A(n,"scores","nonMaxSuppressionAsync"),l=tg(s,o,t,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,h=l.scoreThreshold,[d,p]=yield Promise.all([s.data(),o.data()]),{selectedIndices:f,validOutputs:m}=zj(d,p,c,u,h,a);return s!==e&&s.dispose(),o!==n&&o.dispose(),{selectedIndices:Qt(f,"int32"),validOutputs:He(m,"int32")}}),RA.apply(this,arguments)}var Wj=V({resizeBilinear_:function jke(e,n,t=!1,r=!1){let i=A(e,"images","resizeBilinear");T(3===i.rank||4===i.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),T(2===n.length,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${n}.`),T(!1===r||!1===t,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=i,s=!1;3===i.rank&&(s=!0,a=H(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=n,c=$.runKernel(Wd,{images:a},{alignCorners:t,halfPixelCenters:r,size:n});return s?H(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),jj=V({resizeNearestNeighbor_:function Gke(e,n,t=!1,r=!1){let i=A(e,"images","resizeNearestNeighbor");T(3===i.rank||4===i.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),T(2===n.length,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${n}.`),T("float32"===i.dtype||"int32"===i.dtype,()=>"`images` must have `int32` or `float32` as dtype"),T(!1===r||!1===t,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=i,s=!1;3===i.rank&&(s=!0,a=H(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=n,c=$.runKernel(Hd,{images:a},{alignCorners:t,halfPixelCenters:r,size:n});return s?H(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),Xke=V({threshold_:function qke(e,n="binary",t=!1,r=.5){let u,h,d,p,i=A(e,"image","threshold"),l=i.shape[0]*i.shape[1],c=U(Qt([r]),255);if(T(3===i.rank,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),T(3===i.shape[2]||1===i.shape[2],()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),T("int32"===i.dtype||"float32"===i.dtype,()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),T("otsu"===n||"binary"===n,()=>`Method must be binary or otsu, but was ${n}`),3===i.shape[2]){[u,h,d]=Yi(i,[1,1,1],-1);let m=U(u,.2989),g=U(h,.587),y=U(d,.114);p=se(se(m,g),y)}else p=e;"otsu"===n&&(c=function Kke(e,n){let a,s,o,l,c,u,t=Qt([-1]),r=Qt([0]),i=Qt([0]);for(let h=0;h<e.size-1;h++){a=At(e,0,h+1),s=At(e,h+1),c=Te(Re(a),n),u=Te(Re(s),n);let d=Re(U(a,Eh(0,a.size)));o=Te(d,Re(a));let p=ba(s.shape,a.size),f=se(Eh(0,s.size),p),m=U(s,f);l=Te(Re(m),Re(s));let g=Ee(o,l),y=Ee(o,l),b=U(c,u);i=U(U(b,g),y);let _=Fi(i,r);r=Wr(_,i,r),t=Wr(_,Qt([h]),t)}return t}(RD(xe(Xw(p),"int32"),Ti([]),256),l));let f=t?kc(p,c):Fi(p,c);return xe(U(f,255),"int32")}}),Zke=V({transform_:function Yke(e,n,t="nearest",r="constant",i=0,a){let s=A(e,"image","transform","float32"),o=A(n,"transforms","transform","float32");return T(4===s.rank,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),T(2===o.rank&&(o.shape[0]===s.shape[0]||1===o.shape[0])&&8===o.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),T(null==a||2===a.length,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`),$.runKernel(Nm,{image:s,transforms:o},{interpolation:t,fillMode:r,fillValue:i,outputShape:a})}}),Jke=V({bandPart_:function Qke(e,n,t){let r=A(e,"a","bandPart");T(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let o,l,i=r.shape,[a,s]=r.shape.slice(-2);"number"==typeof n?(T(n%1==0,()=>`bandPart(): numLower must be an integer, got ${n}.`),T(n<=a,()=>`bandPart(): numLower (${n}) must not be greater than the number of rows (${a}).`),o=A(n<0?a:n,"numLower","bandPart")):(T("int32"===n.dtype,()=>"bandPart(): numLower's dtype must be an int32."),o=Wr(qm(n,0),a,Sc(n,a))),"number"==typeof t?(T(t%1==0,()=>`bandPart(): numUpper must be an integer, got ${t}.`),T(t<=s,()=>`bandPart(): numUpper (${t}) must not be greater than the number of columns (${s}).`),l=A(t<0?s:t,"numUpper","bandPart")):(T("int32"===t.dtype,()=>"bandPart(): numUpper's dtype must be an int32."),l=Wr(qm(t,0),s,Sc(t,s)));let c=H(Eh(0,a,1,"int32"),[-1,1]),u=Eh(0,s,1,"int32"),h=Ee(c,u),d=_s(kc(h,o),bl(h,Dn(l))),p=Kn([a,s],r.dtype);return H(vr(tr(H(r,[-1,a,s])).map(f=>Wr(d,f,p))),i)}}),tSe=V({gramSchmidt_:function eSe(e){let n;if(Array.isArray(e)){n=!1,T(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let i=e[0].shape[0];for(let a=1;a<e.length;++a)T(e[a].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[a].shape[0]} vs. ${i})`)}else n=!0,e=Yi(e,e.shape[0],0).map(i=>Ec(i,[0]));T(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);let t=[],r=e;for(let i=0;i<e.length;++i)t.push($.tidy(()=>{let a=r[i];if(i>0)for(let s=0;s<i;++s){let o=U(Re(U(t[s],a)),t[s]);a=Ee(a,o)}return Te(a,Wm(a,"euclidean"))}));return n?vr(t,0):t}});function Gj(e,n=!1){return $.tidy(()=>{T(2===e.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);let t=e.shape[0],r=e.shape[1],i=zw(t),a=xo(e),s=So([[1]],[1,1]),o=xo(s),l=t>=r?r:t;for(let c=0;c<l;++c){let u=a,h=o,d=i;[o,a,i]=$.tidy(()=>{let p=At(a,[c,c],[t-c,1]),f=Wm(p),m=At(a,[c,c],[1,1]),g=Wr(Fi(m,0),So([[-1]]),So([[1]])),y=Ee(m,U(g,f)),b=Te(p,y);o=1===b.shape[0]?xo(s):fn([s,At(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);let _=Dn(Te(Ct(g,y),f)),v=At(a,[c,0],[t-c,r]),x=U(_,o),S=kt(o);if(0===c)a=Ee(v,Ct(x,Ct(S,v)));else{let N=Ee(v,Ct(x,Ct(S,v)));a=fn([At(a,[0,0],[c,r]),N],0)}let M=kt(x),D=At(i,[0,c],[t,i.shape[1]-c]);if(0===c)i=Ee(D,Ct(Ct(D,o),M));else{let N=Ee(D,Ct(Ct(D,o),M));i=fn([At(i,[0,0],[t,c]),N],1)}return[o,a,i]}),at([u,h,d])}return!n&&t>r&&(i=At(i,[0,0],[t,r]),a=At(a,[0,0],[r,r])),[i,a]})}var Ri,rSe=V({qr_:function nSe(e,n=!1){if(T(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),2===e.rank)return Gj(e,n);{let t=e.shape.slice(0,e.shape.length-2).reduce((l,c)=>l*c),r=tr(H(e,[t,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],a=[];return r.forEach(l=>{let[c,u]=Gj(l,n);i.push(c),a.push(u)}),[H(vr(i,0),e.shape),H(vr(a,0),e.shape)]}}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Ri||(Ri={}));var _l=V({computeWeightedLoss_:function iSe(e,n,t=Ri.SUM_BY_NONZERO_WEIGHTS){let r=A(e,"losses","computeWeightedLoss"),i=null;null!=n&&(i=A(n,"weights","computeWeightedLoss"));let a=null==i?r:U(r,i);if(t===Ri.NONE)return a;if(t===Ri.SUM)return Re(a);if(t===Ri.MEAN){if(null==i)return qn(a);{let s=r.size/i.size,o=Te(Re(a),Re(i));return s>1?Te(o,He(s)):o}}if(t===Ri.SUM_BY_NONZERO_WEIGHTS){if(null==i)return Te(Re(a),He(r.size));{let s=U(i,Xi(r.shape)),o=xe(Re(Mh(s,He(0))),"float32");return Te(Re(a),o)}}throw Error(`Unknown reduction: ${t}`)}}),sSe=V({absoluteDifference_:function aSe(e,n,t,r=Ri.SUM_BY_NONZERO_WEIGHTS){let i=A(e,"labels","absoluteDifference"),a=A(n,"predictions","absoluteDifference"),s=null;null!=t&&(s=A(t,"weights","absoluteDifference")),Di(i.shape,a.shape,"Error in absoluteDifference: ");let o=br(Ee(i,a));return _l(o,s,r)}}),lSe=V({cosineDistance_:function oSe(e,n,t,r,i=Ri.SUM_BY_NONZERO_WEIGHTS){let a=A(e,"labels","cosineDistance"),s=A(n,"predictions","cosineDistance"),o=null;null!=r&&(o=A(r,"weights","cosineDistance")),Di(a.shape,s.shape,"Error in cosineDistance: ");let l=He(1),c=Ee(l,Re(U(a,s),t,!0));return _l(c,o,i)}}),uSe=V({hingeLoss_:function cSe(e,n,t,r=Ri.SUM_BY_NONZERO_WEIGHTS){let i=A(e,"labels","hingeLoss"),a=A(n,"predictions","hingeLoss"),s=null;null!=t&&(s=A(t,"weights","hingeLoss")),Di(i.shape,a.shape,"Error in hingeLoss: ");let o=He(1);i=Ee(U(He(2),i),o);let l=an(Ee(o,U(i,a)));return _l(l,s,r)}}),hSe=V({huberLoss_:function dSe(e,n,t,r=1,i=Ri.SUM_BY_NONZERO_WEIGHTS){let a=A(e,"labels","huberLoss"),s=A(n,"predictions","huberLoss"),o=null;null!=t&&(o=A(t,"weights","huberLoss")),Di(a.shape,s.shape,"Error in huberLoss: ");let l=He(r),c=br(Ee(s,a)),u=Sc(c,l),h=Ee(c,u),d=se(U(He(.5),gn(u)),U(l,h));return _l(d,o,i)}}),fSe=V({logLoss_:function pSe(e,n,t,r=1e-7,i=Ri.SUM_BY_NONZERO_WEIGHTS){let a=A(e,"labels","logLoss"),s=A(n,"predictions","logLoss"),o=null;null!=t&&(o=A(t,"weights","logLoss")),Di(a.shape,s.shape,"Error in logLoss: ");let l=He(1),c=He(r),u=Dn(U(a,xa(se(s,c)))),h=U(Ee(l,a),xa(se(Ee(l,s),c))),d=Ee(u,h);return _l(d,o,i)}}),gSe=V({meanSquaredError_:function mSe(e,n,t,r=Ri.SUM_BY_NONZERO_WEIGHTS){let i=A(e,"labels","meanSquaredError"),a=A(n,"predictions","meanSquaredError"),s=null;null!=t&&(s=A(t,"weights","meanSquaredError")),Di(i.shape,a.shape,"Error in meanSquaredError: ");let o=n1(i,a);return _l(o,s,r)}}),_Se=V({sigmoidCrossEntropy_:function bSe(e,n,t,r=0,i=Ri.SUM_BY_NONZERO_WEIGHTS){let a=A(e,"multiClassLabels","sigmoidCrossEntropy"),s=A(n,"logits","sigmoidCrossEntropy"),o=null;if(null!=t&&(o=A(t,"weights","sigmoidCrossEntropy")),Di(a.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){let c=He(r),u=He(1),h=He(.5);a=se(U(a,Ee(u,c)),U(h,c))}let l=function ySe(e,n){let t=A(e,"labels","sigmoidCrossEntropyWithLogits"),r=A(n,"logits","sigmoidCrossEntropyWithLogits");Di(t.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let i=an(r),a=U(r,t),s=l_(yi(Dn(br(r))));return se(Ee(i,a),s)}(a,s);return _l(l,o,i)}}),wSe=V({softmaxCrossEntropy_:function xSe(e,n,t,r=0,i=Ri.SUM_BY_NONZERO_WEIGHTS){let a=A(e,"onehotLabels","softmaxCrossEntropy"),s=A(n,"logits","softmaxCrossEntropy"),o=null;if(null!=t&&(o=A(t,"weights","softmaxCrossEntropy")),Di(a.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){let c=He(r),u=He(1),h=He(a.shape[1]);a=se(U(a,Ee(u,c)),Te(c,h))}let l=function vSe(e,n,t=-1){if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${n.rank} and dim was ${t}`);return Co((r,i,a)=>{let s=c_(i,[t],!0),o=Ee(xe(i,"float32"),s);a([r,o]);let l=Dn(U(o,r));return{value:Re(l,[t]),gradFunc:(c,u)=>{let[h,d]=u,p=Sh(c.shape,[t]);return[U(H(c,p),Ee(xe(h,"float32"),yi(d))),U(H(c,p),Ee(yi(d),xe(h,"float32")))]}}})(e,n)}(a,s);return _l(l,o,i)}}),kSe=V({sparseFillEmptyRows_:function CSe(e,n,t,r){let i=A(e,"indices","sparseFillEmptyRows","int32"),a=A(n,"values","sparseFillEmptyRows"),s=A(t,"denseShape","sparseFillEmptyRows","int32"),o=A(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(2!==i.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${i.shape}`);if(1!==a.rank)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(1!==s.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(0!==o.rank)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);let c=$.runKernel(Tb,{indices:i,values:a,denseShape:s,defaultValue:o});return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}}),ISe=V({sparseReshape_:function SSe(e,n,t){let r=A(e,"inputIndices","sparseReshape","int32"),i=A(n,"inputShape","sparseReshape","int32"),a=A(t,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${r.shape}`);if(1!==i.rank)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(1!==a.rank)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);let o=$.runKernel(Em,{inputIndices:r,inputShape:i,newShape:a});return{outputIndices:o[0],outputShape:o[1]}}}),ESe=V({sparseSegmentMean_:function MSe(e,n,t){let r=A(e,"data","sparseSegmentMean"),i=A(n,"indices","sparseSegmentMean","int32"),a=A(t,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${i.shape}`);if(1!==a.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${a.shape}`);return $.runKernel(Nb,{data:r,indices:i,segmentIds:a})}}),ASe=V({sparseSegmentSum_:function DSe(e,n,t){let r=A(e,"data","sparseSegmentSum"),i=A(n,"indices","sparseSegmentSum","int32"),a=A(t,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${i.shape}`);if(1!==a.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${a.shape}`);return $.runKernel(Ob,{data:r,indices:i,segmentIds:a})}}),NSe=V({stringNGrams_:function TSe(e,n,t,r,i,a,s,o){let l=A(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error(`Data must be a vector, saw: ${l.shape}`);let c=A(n,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");let d=$.runKernel(Pb,{data:l,dataSplits:c},{separator:t,nGramWidths:r,leftPad:i,rightPad:a,padWidth:s,preserveShortSequences:o});return{nGrams:d[0],nGramsSplits:d[1]}}}),FSe=V({stringSplit_:function OSe(e,n,t=!0){let r=A(e,"input","stringSplit","string"),i=A(n,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(0!==i.rank)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);let o=$.runKernel(Lb,{input:r,delimiter:i},{skipEmpty:t});return{indices:o[0],values:o[1],shape:o[2]}}}),PSe=V({stringToHashBucketFast_:function RSe(e,n){let t=A(e,"input","stringToHashBucketFast","string"),r={numBuckets:n};if(n<=0)throw new Error("Number of buckets must be at least 1");return $.runKernel($b,{input:t},r)}}),$Se=V({staticRegexReplace_:function LSe(e,n,t,r=!0){let i=A(e,"input","staticRegexReplace","string");return $.runKernel(Rb,{x:i},{pattern:n,rewrite:t,replaceGlobal:r})}}),qj={fft:m_,ifft:Jm,rfft:g_,irfft:t1},Kj={hammingWindow:hke,hannWindow:$j,frame:Bj,stft:gke},ja={flipLeftRight:vke,grayscaleToRGB:wke,resizeNearestNeighbor:jj,resizeBilinear:Wj,rgbToGrayscale:kke,rotateWithOffset:Ike,cropAndResize:bke,nonMaxSuppression:Eke,nonMaxSuppressionAsync:function Rke(e,n,t){return OA.apply(this,arguments)},nonMaxSuppressionWithScore:$ke,nonMaxSuppressionWithScoreAsync:function Bke(e,n,t){return FA.apply(this,arguments)},nonMaxSuppressionPadded:Uke,nonMaxSuppressionPaddedAsync:function Hke(e,n,t){return RA.apply(this,arguments)},threshold:Xke,transform:Zke},PA={bandPart:Jke,gramSchmidt:tSe,qr:rSe},Xj={absoluteDifference:sSe,computeWeightedLoss:_l,cosineDistance:lSe,hingeLoss:uSe,huberLoss:hSe,logLoss:fSe,meanSquaredError:gSe,sigmoidCrossEntropy:_Se,softmaxCrossEntropy:wSe},Yj={sparseFillEmptyRows:kSe,sparseReshape:ISe,sparseSegmentMean:ESe,sparseSegmentSum:ASe},Zj={stringNGrams:NSe,stringSplit:FSe,stringToHashBucketFast:PSe,staticRegexReplace:$Se},fe={};it(fe,{Serializable:()=>Qj,SerializationMap:()=>Jj,getRegisteredName:()=>VSe,registerClass:()=>eG});var BSe=new Map,LA=new Map,Qj=class{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}},Jj=class Kg{constructor(){this.classNameMap={}}static getMap(){return null==Kg.instance&&(Kg.instance=new Kg),Kg.instance}static register(n){Kg.getMap().classNameMap[n.className]=[n,n.fromConfig]}};function eG(e,n,t){T(null!=e.className,()=>"Class being registered does not have the static className property defined."),T("string"==typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),T(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof n>"u"&&(n="Custom"),typeof t>"u"&&(t=e.className);let i=n+">"+t;return Jj.register(e),BSe.set(i,e),LA.set(e,i),e}function VSe(e){return LA.has(e)?LA.get(e):e.className}var vl=class extends Qj{minimize(e,n=!1,t){let{value:r,grads:i}=this.computeGradients(e,t);if(null!=t){let a=t.map(s=>({name:s.name,tensor:i[s.name]}));this.applyGradients(a)}else this.applyGradients(i);return at(i),n?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return Q8(e,n)}dispose(){null!=this.iterations_&&at(this.iterations_)}saveIterations(){var e=this;return R(function*(){return null==e.iterations_&&(e.iterations_=0),{name:"iter",tensor:He(e.iterations_,"int32")}})()}getWeights(){return R(function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})()}setWeights(e){var n=this;return R(function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${n.getClassName()}`)})()}extractIterations(e){var n=this;return R(function*(){return n.iterations_=(yield e[0].tensor.data())[0],e.slice(1)})()}};Object.defineProperty(vl,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});var $A=class extends vl{static get className(){return"Adadelta"}constructor(e,n,t=null){super(),this.learningRate=e,this.rho=n,this.epsilon=t,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==t&&(this.epsilon=$.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,t)=>{let r=$.registeredVariables[n];null==this.accumulatedGrads[t]&&(this.accumulatedGrads[t]={originalName:`${n}/accum_grad`,variable:G(()=>Ft(r).variable(!1))}),null==this.accumulatedUpdates[t]&&(this.accumulatedUpdates[t]={originalName:`${n}/accum_var`,variable:G(()=>Ft(r).variable(!1))});let a=Array.isArray(e)?e[t].tensor:e[n];if(null==a)return;let s=this.accumulatedGrads[t].variable,o=this.accumulatedUpdates[t].variable;G(()=>{let l=se(U(s,this.rho),U(gn(a),1-this.rho)),c=U(Te(ii(se(o,this.epsilon)),ii(se(s,this.epsilon))),a),u=se(U(o,this.rho),U(gn(c),1-this.rho));s.assign(l),o.assign(u);let h=se(U(c,-this.learningRate),r);r.assign(h)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(at(this.accumulatedGrads.map(e=>e.variable)),at(this.accumulatedUpdates.map(e=>e.variable)))}getWeights(){var e=this;return R(function*(){let n=[...e.accumulatedGrads,...e.accumulatedUpdates];return[yield e.saveIterations()].concat(n.map(t=>({name:t.originalName,tensor:t.variable})))})()}setWeights(e){var n=this;return R(function*(){let t=(e=yield n.extractIterations(e)).length/2;n.accumulatedGrads=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(!1)})),n.accumulatedUpdates=e.slice(t,2*t).map(i=>({originalName:i.name,variable:i.tensor.variable(!1)}))})()}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}},BA=class extends vl{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,t)=>{let r=$.registeredVariables[n];null==this.accumulatedGrads[t]&&(this.accumulatedGrads[t]={originalName:`${n}/accumulator`,variable:G(()=>ba(r.shape,this.initialAccumulatorValue).variable(!1))});let i=Array.isArray(e)?e[t].tensor:e[n];if(null==i)return;let a=this.accumulatedGrads[t].variable;G(()=>{let s=se(a,gn(i));a.assign(s);let o=se(U(Te(i,ii(se(s,$.backend.epsilon()))),-this.learningRate),r);r.assign(o)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&at(this.accumulatedGrads.map(e=>e.variable))}getWeights(){var e=this;return R(function*(){return[yield e.saveIterations()].concat(e.accumulatedGrads.map(n=>({name:n.originalName,tensor:n.variable})))})()}setWeights(e){var n=this;return R(function*(){e=yield n.extractIterations(e),n.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(!1)}))})()}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}},VA=class extends vl{static get className(){return"Adam"}constructor(e,n,t,r=null){super(),this.learningRate=e,this.beta1=n,this.beta2=t,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],G(()=>{this.accBeta1=He(n).variable(),this.accBeta2=He(t).variable()}),null==r&&(this.epsilon=$.backend.epsilon())}applyGradients(e){let n=Array.isArray(e)?e.map(t=>t.name):Object.keys(e);G(()=>{let t=Ee(1,this.accBeta1),r=Ee(1,this.accBeta2);n.forEach((i,a)=>{let s=$.registeredVariables[i];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:G(()=>Ft(s).variable(!1))}),null==this.accumulatedSecondMoment[a]&&(this.accumulatedSecondMoment[a]={originalName:`${i}/v`,variable:G(()=>Ft(s).variable(!1))});let l=Array.isArray(e)?e[a].tensor:e[i];if(null==l)return;let c=this.accumulatedFirstMoment[a].variable,u=this.accumulatedSecondMoment[a].variable,h=se(U(c,this.beta1),U(l,1-this.beta1)),d=se(U(u,this.beta2),U(gn(l),1-this.beta2)),p=Te(h,t),f=Te(d,r);c.assign(h),u.assign(d);let m=se(U(Te(p,se(ii(f),this.epsilon)),-this.learningRate),s);s.assign(m)}),this.accBeta1.assign(U(this.accBeta1,this.beta1)),this.accBeta2.assign(U(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&at(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&at(this.accumulatedSecondMoment.map(e=>e.variable))}getWeights(){var e=this;return R(function*(){let n=[...e.accumulatedFirstMoment,...e.accumulatedSecondMoment];return[yield e.saveIterations()].concat(n.map(t=>({name:t.originalName,tensor:t.variable})))})()}setWeights(e){var n=this;return R(function*(){e=yield n.extractIterations(e),G(()=>{n.accBeta1.assign(yl(n.beta1,n.iterations_+1)),n.accBeta2.assign(yl(n.beta2,n.iterations_+1))});let t=e.length/2;n.accumulatedFirstMoment=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(!1)})),n.accumulatedSecondMoment=e.slice(t,2*t).map(i=>({originalName:i.name,variable:i.tensor.variable(!1)}))})()}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}},zA=class extends vl{static get className(){return"Adamax"}constructor(e,n,t,r=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=t,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],G(()=>{this.iteration=He(0).variable(),this.accBeta1=He(n).variable()}),null==r&&(this.epsilon=$.backend.epsilon())}applyGradients(e){let n=Array.isArray(e)?e.map(t=>t.name):Object.keys(e);G(()=>{let t=Ee(1,this.accBeta1),r=Te(-this.learningRate,se(U(this.iteration,this.decay),1));n.forEach((i,a)=>{let s=$.registeredVariables[i];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:`${i}/m`,variable:Ft(s).variable(!1)}),null==this.accumulatedWeightedInfNorm[a]&&(this.accumulatedWeightedInfNorm[a]={originalName:`${i}/v`,variable:Ft(s).variable(!1)});let l=Array.isArray(e)?e[a].tensor:e[i];if(null==l)return;let c=this.accumulatedFirstMoment[a].variable,u=this.accumulatedWeightedInfNorm[a].variable,h=se(U(c,this.beta1),U(l,1-this.beta1)),d=U(u,this.beta2),p=br(l),f=ko(d,p);c.assign(h),u.assign(f);let m=se(U(Te(r,t),Te(h,se(f,this.epsilon))),s);s.assign(m)}),this.iteration.assign(se(this.iteration,1)),this.accBeta1.assign(U(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&at(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&at(this.accumulatedWeightedInfNorm.map(e=>e.variable))}getWeights(){return R(function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})()}setWeights(e){return R(function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})()}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}},f1=class extends vl{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,t)=>{let r=Array.isArray(e)?e[t].tensor:e[n];if(null==r)return;let i=$.registeredVariables[n];G(()=>{let a=se(U(this.c,r),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Ar(He(-e))}dispose(){this.c.dispose()}getWeights(){var e=this;return R(function*(){return[yield e.saveIterations()]})()}setWeights(e){var n=this;return R(function*(){if(0!==(e=yield n.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")})()}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}},UA=class extends f1{static get className(){return"Momentum"}constructor(e,n,t=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=t,this.accumulations=[],this.m=He(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,t)=>{let r=$.registeredVariables[n];null==this.accumulations[t]&&(this.accumulations[t]={originalName:`${n}/momentum`,variable:G(()=>Ft(r).variable(!1))});let i=this.accumulations[t].variable,a=Array.isArray(e)?e[t].tensor:e[n];null!=a&&G(()=>{let s,o=se(U(this.m,i),a);s=se(U(this.c,this.useNesterov?se(a,U(o,this.m)):o),r),i.assign(o),r.assign(s)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&at(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}getWeights(){var e=this;return R(function*(){return[yield e.saveIterations()].concat(e.accumulations.map(n=>({name:n.originalName,tensor:n.variable})))})()}setWeights(e){var n=this;return R(function*(){e=yield n.extractIterations(e),n.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(!1)}))})()}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}},HA=class extends vl{static get className(){return"RMSProp"}constructor(e,n=.9,t=0,r=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=t,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,null==r&&(this.epsilon=$.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(n=>n.name):Object.keys(e)).forEach((n,t)=>{let r=$.registeredVariables[n],i=!1;null==this.accumulatedMeanSquares[t]&&(this.accumulatedMeanSquares[t]={originalName:`${n}/rms`,variable:G(()=>Ft(r).variable(i))}),null==this.accumulatedMoments[t]&&(this.accumulatedMoments[t]={originalName:`${n}/momentum`,variable:G(()=>Ft(r).variable(i))}),null==this.accumulatedMeanGrads[t]&&this.centered&&(this.accumulatedMeanGrads[t]={originalName:`${n}/mg`,variable:G(()=>Ft(r).variable(i))});let a=Array.isArray(e)?e[t].tensor:e[n];if(null==a)return;let s=this.accumulatedMeanSquares[t].variable,o=this.accumulatedMoments[t].variable;G(()=>{let l=se(U(s,this.decay),U(gn(a),1-this.decay));if(this.centered){let c=this.accumulatedMeanGrads[t].variable,u=se(U(c,this.decay),U(a,1-this.decay)),h=Te(U(a,this.learningRate),ii(Ee(l,se(gn(u),this.epsilon)))),d=se(U(o,this.momentum),h);s.assign(l),c.assign(u),o.assign(d);let p=Ee(r,d);r.assign(p)}else{let c=se(U(s,this.decay),U(gn(a),1-this.decay)),u=se(U(o,this.momentum),Te(U(a,this.learningRate),ii(se(c,this.epsilon))));s.assign(c),o.assign(u);let h=Ee(r,u);r.assign(h)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&at(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&at(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&at(this.accumulatedMoments.map(e=>e.variable))}getWeights(){var e=this;return R(function*(){let n=[...e.accumulatedMeanSquares,...e.accumulatedMoments];return e.centered&&n.push(...e.accumulatedMeanGrads),[yield e.saveIterations()].concat(n.map(t=>({name:t.originalName,tensor:t.variable})))})()}setWeights(e){var n=this;return R(function*(){e=yield n.extractIterations(e);let t=n.centered?e.length/3:e.length/2,r=!1;n.accumulatedMeanSquares=e.slice(0,t).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),n.accumulatedMoments=e.slice(t,2*t).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),n.centered&&(n.accumulatedMeanGrads=e.slice(2*t,3*t).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))})()}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}},zSe=[$A,BA,VA,zA,UA,HA,f1],ai={};function tG(e){return new Promise(n=>setTimeout(n)).then(e)}it(ai,{CompositeArrayBuffer:()=>fl,browserFiles:()=>XSe,browserHTTPRequest:()=>tIe,concatenateArrayBuffers:()=>Dxe,copyModel:()=>Zxe,decodeWeights:()=>x8,decodeWeightsStream:()=>k8,encodeWeights:()=>Cxe,fromMemory:()=>rIe,fromMemorySync:()=>oG,getLoadHandlers:()=>Lxe,getModelArtifactsForJSON:()=>lD,getModelArtifactsForJSONSync:()=>E8,getModelArtifactsInfoForJSON:()=>Qb,getSaveHandlers:()=>Pxe,getWeightSpecs:()=>uD,http:()=>KA,isHTTPScheme:()=>qA,listModels:()=>Xxe,loadWeights:()=>ZSe,moveModel:()=>Qxe,registerLoadRouter:()=>Rxe,registerSaveRouter:()=>Fxe,removeModel:()=>Yxe,weightsLoaderFactory:()=>iG,withSaveHandler:()=>iIe,withSaveHandlerSync:()=>aIe});var m1=class K${constructor(n){if(!Q().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");n.startsWith(K$.URL_SCHEME)&&(n=n.slice(K$.URL_SCHEME.length)),(null==n||0===n.length)&&(n="model"),this.modelJsonFileName=n+".json",this.weightDataFileName=n+".weights.bin"}save(n){var t=this;return R(function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let r=fl.join(n.weightData),i=window.URL.createObjectURL(new Blob([r],{type:"application/octet-stream"}));if(n.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let s=M8(n,[{paths:["./"+t.weightDataFileName],weights:n.weightSpecs}]),o=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),l=null==t.modelJsonAnchor?document.createElement("a"):t.modelJsonAnchor;if(l.download=t.modelJsonFileName,l.href=o,yield tG(()=>l.dispatchEvent(new MouseEvent("click"))),null!=n.weightData){let c=null==t.weightDataAnchor?document.createElement("a"):t.weightDataAnchor;c.download=t.weightDataFileName,c.href=i,yield tG(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Qb(n)}}})()}};m1.URL_SCHEME="downloads://";var GSe=class{constructor(e){if(null==e||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}load(){var e=this;return R(function*(){return new Promise((n,t)=>{let r=new FileReader;r.onload=i=>{let a=JSON.parse(i.target.result),s=a.modelTopology;if(null==s)return void t(new Error(`modelTopology field is missing from file ${e.jsonFile.name}`));if(null==a.weightsManifest)return void t(new Error(`weightManifest field is missing from file ${e.jsonFile.name}`));if(0===e.weightsFiles.length)return void n({modelTopology:s});let o=lD(a,l=>e.loadWeights(l));n(o)},r.onerror=i=>t(`Failed to read model topology and weights manifest JSON from file '${e.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(e.jsonFile)})})()}loadWeights(e){let n=[],t=[];for(let a of e)n.push(...a.weights),t.push(...a.paths);let r=this.checkManifestAndWeightFiles(e),i=t.map(a=>this.loadWeightsFile(a,r[a]));return Promise.all(i).then(a=>[n,a])}loadWeightsFile(e,n){return new Promise((t,r)=>{let i=new FileReader;i.onload=a=>{t(a.target.result)},i.onerror=a=>r(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){let n=[],t=this.weightsFiles.map(i=>I8(i.name)),r={};for(let i of e)i.paths.forEach(a=>{let s=I8(a);if(-1!==n.indexOf(s))throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(n.push(s),-1===t.indexOf(s))throw new Error(`Weight file with basename '${s}' is not provided.`);r[a]=this.weightsFiles[t.indexOf(s)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}};function XSe(e){return new GSe(e)}function nG(e,n,t,r){(function s(l){T(null!=l&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")})(e),function o(l,c){T(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),T(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),T(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}(t=t??0,r=r??1);let i=0;return Promise.all(e.map(l=>(l.then(c=>{let u=t+ ++i/e.length*(r-t);return n(u),c}),l)))}function rG(e,n){return WA.apply(this,arguments)}function WA(){return WA=R(function*(e,n){null==n&&(n={});let t=null==n.fetchFunc?Q().platform.fetch:n.fetchFunc,r=e.map(a=>t(a,n.requestInit,{isBinary:!0})),i=(null==n.onProgress?yield Promise.all(r):yield nG(r,n.onProgress,0,.5)).map(a=>a.arrayBuffer());return null==n.onProgress?yield Promise.all(i):yield nG(i,n.onProgress,.5,1)}),WA.apply(this,arguments)}function ZSe(e){return jA.apply(this,arguments)}function jA(){return jA=R(function*(e,n="",t,r){return iG(i=>rG(i,{requestInit:r}))(e,n,t)}),jA.apply(this,arguments)}function iG(e){return function(){var n=R(function*(t,r="",i){let a=t.map(()=>!1),s={},o=null!=i?i.map(()=>!1):[],l=[];if(t.forEach((f,m)=>{let g=0;f.weights.forEach(y=>{let _=fh["quantization"in y?y.quantization.dtype:y.dtype]*rn(y.shape),v=()=>{a[m]=!0,null==s[m]&&(s[m]=[]),s[m].push({manifestEntry:y,groupOffset:g,sizeBytes:_})};null!=i?i.forEach((x,S)=>{x===y.name&&(v(),o[S]=!0)}):v(),l.push(y.name),g+=_})}),!o.every(f=>f)){let f=i.filter((m,g)=>!o[g]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. \nManifest JSON has weights with names: ${l.join(", ")}.`)}let c=a.reduce((f,m,g)=>(m&&f.push(g),f),[]),u=[];c.forEach(f=>{t[f].paths.forEach(m=>{let g=r+(r.endsWith("/")?"":"/")+m;u.push(g)})});let h=yield e(u),d={},p=0;return c.forEach(f=>{let m=t[f].paths.length,g=new fl(h.slice(p,p+m));s[f].forEach(y=>{let _=x8(g.slice(y.groupOffset,y.groupOffset+y.sizeBytes),[y.manifestEntry]);for(let v in _)d[v]=_[v]}),p+=m}),d});return function(t){return n.apply(this,arguments)}}()}Ua.registerSaveRouter(e=>Q().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(m1.URL_SCHEME)?function KSe(e="model"){return new m1(e)}(e.slice(m1.URL_SCHEME.length)):null);var GA=class{constructor(e,n){if(this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(T("function"==typeof n.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=Q().platform.fetch,T(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&T(2===e.length,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}save(e){var n=this;return R(function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let t=Object.assign({method:n.DEFAULT_METHOD},n.requestInit);t.body=new FormData;let i=M8(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),null!=e.weightData){let s=fl.join(e.weightData);t.body.append("model.weights.bin",new Blob([s],{type:"application/octet-stream"}),"model.weights.bin")}let a=yield n.fetch(n.path,t);if(a.ok)return{modelArtifactsInfo:Qb(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)})()}loadModelJSON(){var e=this;return R(function*(){let t,n=yield e.fetch(e.path,e.requestInit);if(!n.ok)throw new Error(`Request to ${e.path} failed with status code ${n.status}. Please verify this URL points to the model JSON of the model to load.`);try{t=yield n.json()}catch{let s=`Failed to parse model JSON of response from ${e.path}.`;throw e.path.endsWith(".pb")?s+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":s+=" Please make sure the server is serving valid JSON for this request.",new Error(s)}if(null==t.modelTopology&&null==t.weightsManifest)throw new Error(`The JSON from HTTP path ${e.path} contains neither model topology or manifest for weights.`);return t})()}load(){var e=this;return R(function*(){return e.loadOptions.streamWeights?e.loadStream():lD(yield e.loadModelJSON(),t=>e.loadWeights(t))})()}loadStream(){var e=this;return R(function*(){let n=yield e.loadModelJSON(),t=yield e.getWeightUrls(n.weightsManifest),r=uD(n.weightsManifest);return Object.assign(Object.assign({},n),{weightSpecs:r,getWeightStream:()=>function YSe(e,n){var t;let a,r=null==n.fetchFunc?Q().platform.fetch:n.fetchFunc,i=0;return null===(t=n.onProgress)||void 0===t||t.call(n,0),new ReadableStream({pull:(s=R(function*(o){for(var l;i<e.length;){a||(a=(yield r(e[i],n.requestInit,{isBinary:!0})).body.getReader());let{done:c,value:u}=yield a.read();if(!c)return void o.enqueue(u);i++,a=void 0,null===(l=n.onProgress)||void 0===l||l.call(n,i/e.length)}o.close()}),function(l){return s.apply(this,arguments)})});var s}(t,e.loadOptions)})})()}getWeightUrls(e){var n=this;return R(function*(){let t=Array.isArray(n.path)?n.path[1]:n.path,[r,i]=function eIe(e){let n=e.lastIndexOf("/"),t=e.lastIndexOf("?");return[e.substring(0,n)+"/",t>n?e.substring(t):""]}(t),a=n.weightPathPrefix||r,s=[],o=[];for(let l of e)for(let c of l.paths)null!=n.weightUrlConverter?o.push(n.weightUrlConverter(c)):s.push(a+c+i);return n.weightUrlConverter&&s.push(...yield Promise.all(o)),s})()}loadWeights(e){var n=this;return R(function*(){let t=yield n.getWeightUrls(e);return[uD(e),yield rG(t,n.loadOptions)]})()}};function qA(e){return null!=e.match(GA.URL_SCHEME_REGEX)}GA.URL_SCHEME_REGEX=/^https?:\/\//;var aG=(e,n)=>{if(typeof fetch>"u"&&(null==n||null==n.fetchFunc))return null;{let t=!0;if(t=Array.isArray(e)?e.every(r=>qA(r)):qA(e),t)return KA(e,n)}return null};function KA(e,n){return new GA(e,n)}function tIe(e,n){return KA(e,n)}Ua.registerSaveRouter(aG),Ua.registerLoadRouter(aG);var XA=class{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}},sG=class{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}},nIe=class{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}};function rIe(e,n,t,r){return new nIe(oG(...arguments))}function oG(e,n,t,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new XA(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new XA({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new XA({modelTopology:e,weightSpecs:n,weightData:t,trainingConfig:r}))}function iIe(e){return new sG(e)}function aIe(e){return new sG(e)}var lG={};it(lG,{confusionMatrix:()=>oIe});var oIe=V({confusionMatrix_:function sIe(e,n,t){let r=A(e,"labels","confusionMatrix"),i=A(n,"predictions","confusionMatrix");T(null==t||t>0&&Number.isInteger(t),()=>`If provided, numClasses must be a positive integer, but got ${t}`),T(1===r.rank,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),T(1===i.rank,()=>`Expected the rank of predictions to be 1, but got ${i.rank}`),T(r.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),T(t>0&&Number.isInteger(t),()=>`numClasses is required to be a positive integer, but got ${t}`);let a=Km(xe(r,"int32"),t),s=Km(xe(i,"int32"),t),o=kt(a),l=Ct(o,s);return xe(l,"int32")}}),y_={};it(y_,{draw:()=>mIe,fromPixels:()=>gIe,fromPixelsAsync:()=>hIe,toPixels:()=>fIe});var Ah,cG=!1;function uG(e,n=3){if(n>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let t=!1,r=!1,i=!1,a=!1,s=!1,o=!1;if(e.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)a=!0;else if(null!=e.getContext)s=!0;else{if(!(typeof ImageBitmap<"u"&&e instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);o=!0}if(null!=Ub(kw,$.backendName))return $.runKernel(kw,{pixels:e},{numChannels:n});let u,h,[l,c]=i?[e.videoWidth,e.videoHeight]:[e.width,e.height];if(s)u=e.getContext("2d").getImageData(0,0,l,c).data;else if(r||t)u=e.data;else if(a||i||o){if(null==Ah)if(typeof document>"u"){if(!(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u"))throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Ah=new OffscreenCanvas(1,1).getContext("2d")}else Ah=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Ah.canvas.width=l,Ah.canvas.height=c,Ah.drawImage(e,0,0,l,c),u=Ah.getImageData(0,0,l,c).data}if(4===n)h=new Int32Array(u);else{let d=l*c;h=new Int32Array(d*n);for(let p=0;p<d;p++)for(let f=0;f<n;++f)h[p*n+f]=u[4*p+f]}return r1(h,[c,l,n],"int32")}function hIe(e){return YA.apply(this,arguments)}function YA(){return YA=R(function*(e,n=3){let t=null;if(Q().getBool("WRAP_TO_IMAGEBITMAP")&&function dIe(e){return function cIe(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}()&&!(e instanceof ImageBitmap)&&function uIe(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function lIe(e){return null!=e&&e.data instanceof Uint8Array}(e)}(e)){let r;try{r=yield createImageBitmap(e,{premultiplyAlpha:"none"})}catch{r=null}t=null!=r&&r.width===e.width&&r.height===e.height?r:e}else t=e;return uG(t,n)}),YA.apply(this,arguments)}function dG(e){if(2!==e.rank&&3!==e.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${e.rank}.`);let n=2===e.rank?1:e.shape[2];if(n>4||2===n)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${n}`);if("float32"!==e.dtype&&"int32"!==e.dtype)throw new Error(`Unsupported type for toPixels: ${e.dtype}. Please use float32 or int32 tensors.`)}function fIe(e,n){return ZA.apply(this,arguments)}function ZA(){return ZA=R(function*(e,n){let t=A(e,"img","toPixels");if(!(e instanceof gt)){let c=t;t=xe(c,"int32"),c.dispose()}dG(t);let[r,i]=t.shape.slice(0,2),a=2===t.rank?1:t.shape[2],s=yield t.data(),o="float32"===t.dtype?255:1,l=new Uint8ClampedArray(i*r*4);for(let c=0;c<r*i;++c){let u=[0,0,0,255];for(let d=0;d<a;d++){let p=s[c*a+d];if("float32"===t.dtype){if(p<0||p>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${p}.`)}else if("int32"===t.dtype&&(p<0||p>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${p}.`);1===a?(u[0]=p*o,u[1]=p*o,u[2]=p*o):u[d]=p*o}let h=4*c;l[h+0]=Math.round(u[0]),l[h+1]=Math.round(u[1]),l[h+2]=Math.round(u[2]),l[h+3]=Math.round(u[3])}if(null!=n){cG||null!=Ub(mw,$.backendName)&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),cG=!0),n.width=i,n.height=r;let c=n.getContext("2d"),u=new ImageData(l,i,r);c.putImageData(u,0,0)}return t!==e&&t.dispose(),l}),ZA.apply(this,arguments)}function mIe(e,n,t){let r=A(e,"img","draw");if(!(e instanceof gt)){let s=r;r=xe(s,"int32"),s.dispose()}dG(r),function pIe(e){let n=e?.alpha||1;if(n>1||n<0)throw new Error(`Alpha value ${n} is suppoed to be in range [0 - 1].`)}(t?.imageOptions),$.runKernel(mw,{image:r},{canvas:n,options:t})}var gIe=V({fromPixels_:uG}),QA={};function hG(e,n){let t=e.shape.length,r=n.shape.length;if(t<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${t}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==n.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.shape[r-1]>t)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${n.shape[r-1]} vs. ${t}`);if(0===rn(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);let i=n.shape,a=i[i.length-1],s=1;for(let h=0;h<i.length-1;++h)s*=i[h];let o=e.shape,l=i.slice();l.pop();let c=1;for(let h=a;h<t;++h)c*=o[h],l.push(o[h]);let u=[...Af(e.shape).map(h=>h/c),1].slice(0,a);return[l,s,c,u]}it(QA,{prepareAndValidate:()=>hG});var Tr={};it(Tr,{assertParamsValid:()=>bIe,computeFlatOffset:()=>CIe,computeOutShape:()=>vIe,getNormalizedAxes:()=>xIe,isSliceContinous:()=>wIe,maskToAxes:()=>_Ie,parseSliceParams:()=>xG,sliceInfo:()=>kIe,startForAxis:()=>_G,startIndicesWithElidedDims:()=>gG,stopForAxis:()=>vG,stopIndicesWithElidedDims:()=>yG,stridesForAxis:()=>bG,stridesWithElidedDims:()=>pG});var JA=-2,yIe=-1;function bIe(e,n,t){let r=e.shape.length;T(r===n.length,()=>`Error in slice${r}D: Length of begin ${n} must match the rank of the array (${r}).`),T(r===t.length,()=>`Error in slice${r}D: Length of size ${t} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)T(n[i]+t[i]<=e.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${n[i]+t[i]}) would overflow input.shape[${i}] (${e.shape[i]})`)}function _Ie(e){let n=[],t=0;for(;e>0;)1&e&&n.push(t),e/=2,t++;return n}function vIe(e,n,t){let r=[];for(let i=0;i<e.length;i++)r[i]=Math.ceil((n[i]-e[i])/t[i]);return r}function pG(e,n,t,r){let i=[...e];for(let a=i.length;a<r.length;a++)i.push(1);for(let a=0;a<t;a++)0===a?i[n]=1:(i.splice(n,0,1),i.pop());return i}function fG(e,n,t){return t<=e?t:t-(n-1)}function mG(e,n){let t=[];for(let r=0;r<e;r++)t.push(n+r);return t}function xIe(e,n,t,r,i,a,s,o,l){let c=e.length,u=new Array(c),h=new Array(c),d=new Array(c);if(n.length&&t>0){let p=n[0],f=t+1;u=gG(s,p,f,r,e),h=yG(o,p,f,i,e),d=pG(a,p,f,e)}else for(let p=0;p<c;p++)u[p]=_G(s,r,a,e,p,l),h[p]=vG(o,i,a,e,p,l),d[p]=bG(a,p,l);return{begin:u,end:h,strides:d}}function gG(e,n,t,r,i){let a=[...i],s=mG(t,n);for(let o=0;o<a.length;o++)if(s.indexOf(o)>-1)a[o]=0;else{let l=fG(n,t,o),c=r[l];e&1<<l&&(c=0),a[o]=c}return a}function yG(e,n,t,r,i){let a=[...i],s=mG(t,n);for(let o=0;o<a.length;o++)if(s.indexOf(o)>-1)a[o]=Number.MAX_SAFE_INTEGER;else{let l=fG(n,t,o),c=r[l];e&1<<l&&(c=Number.MAX_SAFE_INTEGER),a[o]=c}for(let o=0;o<a.length;o++)a[o]<0&&(a[o]+=i[o]),a[o]=yb(0,a[o],i[o]);return a}function bG(e,n,t){let r=e[n];return(t&1<<n||null==r)&&(r=1),r}function _G(e,n,t,r,i,a){let s=n[i];(e&1<<i||a&1<<i||null==s)&&(s=(t[i]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);let l=r[i];return s<0&&(s+=l),s=yb(0,s,l-1),s}function vG(e,n,t,r,i,a){let s=n[i],o=t[i]||1;(e&1<<i||a&1<<i||null==s)&&(s=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);let l=r[i];return s<0&&(s+=l),s=o>0?yb(0,s,l):yb(-1,s,l-1),s}function wIe(e,n,t){let r=t.length;for(let i=0;i<t.length;i++)if(t[i]>1){r=i;break}for(let i=r+1;i<t.length;i++)if(n[i]>0||t[i]!==e[i])return!1;return!0}function CIe(e,n){let t=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)t+=e[r]*n[r];return t}function xG(e,n,t){let r,a,i=e.shape.length;return r="number"==typeof n?[n,...new Array(i-1).fill(0)]:n.length<i?n.concat(new Array(i-n.length).fill(0)):n.slice(),r.forEach(s=>{T(-1!==s,()=>"slice() does not support negative begin indexing.")}),a=null==t?new Array(i).fill(-1):"number"==typeof t?[t,...new Array(i-1).fill(-1)]:t.length<i?t.concat(new Array(i-t.length).fill(-1)):t,a=a.map((s,o)=>s>=0?s:(T(-1===s,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${o}.`),e.shape[o]-r[o])),[r,a]}function kIe(e,n,t,r,i,a,s,o,l){let c;if(null==r?(c=new Array(n.length),c.fill(1)):c=r,null!=s&&s&s-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1,h={dims:c.length,numAddAxisAfterEllipsis:0,begin:n.slice(),end:t.slice(),strides:c.slice(),beginMask:i,endMask:a,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};for(let b=0;b<h.dims;b++)u&&1<<b&o&&h.numAddAxisAfterEllipsis++,1<<b&s&&(u=!0);u||(h.ellipsisMask|=1<<h.dims,h.dims++);let d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function SIe(e,n){n.beginMask=0,n.endMask=0,n.shrinkAxisMask=0;let t=0;n.beginValid=null!=e.begin,n.endValid=null!=e.end,n.begin=new Array(n.dims),n.end=new Array(n.dims),n.strides=new Array(n.dims),n.finalShapeGatherIndices=[],n.finalShapeGatherIndicesSparse=[],n.inputShapeGatherIndicesSparse=new Array(n.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){let i=Math.min(n.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,n.dims);for(;t<i;t++)n.begin[t]=0,n.end[t]=0,n.strides[t]=1,n.beginMask|=1<<t,n.endMask|=1<<t,n.finalShapeGatherIndices.push(t),n.finalShapeGatherIndicesSparse.push(-1),n.inputShapeGatherIndicesSparse[t]=r}else if(1<<r&e.newAxisMask)n.finalShapeGatherIndices.push(JA),n.finalShapeGatherIndicesSparse.push(-1);else{if(t===n.begin.length)throw Error(`Index out of range using input dim ${t}; input has only ${n.dims} dims, ${n.begin.length}.`);null!=e.begin&&(n.begin[t]=e.begin[r]),null!=e.end&&(n.end[t]=e.end[r]),n.strides[t]=e.strides[r],e.beginMask&1<<r&&(n.beginMask|=1<<t),e.endMask&1<<r&&(n.endMask|=1<<t),e.shrinkAxisMask&1<<r?(n.finalShapeGatherIndices.push(yIe),n.finalShapeGatherIndicesSparse.push(-1),n.shrinkAxisMask|=1<<t):(n.finalShapeGatherIndices.push(t),n.finalShapeGatherIndicesSparse.push(r)),n.inputShapeGatherIndicesSparse[t]=r,t++}}(h,d);let p=!0,f=!0,m=!0,g=[],y=[];for(let b=0;b<e.length;++b){if(0===d.strides[b])throw Error(`strides[${b}] must be non-zero`);let _=!!(d.shrinkAxisMask&1<<b),v=e[b];if(-1===v){g.push(_?1:-1);continue}let x=[d.beginMask&1<<b,d.endMask&1<<b],S=[d.strides[b]>0?0:-1,d.strides[b]>0?v:v-1];if(_&&d.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===d.strides[b];let M=!!(d.beginMask&1<<b&&d.endMask&1<<b);if(d.beginValid&&d.endValid){if(_){let O=d.begin[b]<0?v+d.begin[b]:d.begin[b];if(d.begin[b]=O,d.end[b]=d.begin[b]+1,O<0||O>=v)throw Error(`slice index ${d.begin[b]} of dimension ${b} out of bounds.`)}else d.begin[b]=wG(d.begin[b],0,d.strides[b],v,x,S),d.end[b]=wG(d.end[b],1,d.strides[b],v,x,S);let F=1===d.strides[b]&&0===d.begin[b]&&d.end[b]===v;p=p&&F,f=f&&(0===b&&1===d.strides[b]||F)}else p=p&&1===d.strides[b]&&M,f=f&&(0===b&&1===d.strides[b]||M);let D,N=!1;if(d.beginValid&&d.endValid?(D=d.end[b]-d.begin[b],N=!0):_?(D=1,N=!0):M&&v>=0&&(D=d.strides[b]<0?-v:v,N=!0),N){let F;F=0===D||D<0!=d.strides[b]<0?0:Math.trunc(D/d.strides[b])+(D%d.strides[b]!=0?1:0),g.push(F)}else g.push(-1)}for(let b=0;b<d.finalShapeGatherIndices.length;++b){let _=d.finalShapeGatherIndices[b];_>=0?y.push(g[_]):_===JA&&y.push(1)}return{finalShapeSparse:y.filter((b,_)=>d.finalShapeGatherIndices[_]!==JA),finalShape:y,isIdentity:p,sliceDim0:f,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function wG(e,n,t,r,i,a){if(i[n])return t>0?a[n]:a[n+1&1];{let s=e<0?r+e:e;return s<a[0]?a[0]:s>a[1]?a[1]:s}}var IIe="4.16.0",CG=class{static sgd(e){return new f1(e)}static momentum(e,n,t=!1){return new UA(e,n,t)}static rmsprop(e,n=.9,t=0,r=null,i=!1){return new HA(e,n,t,r,i)}static adam(e=.001,n=.9,t=.999,r=null){return new VA(e,n,t,r)}static adadelta(e=.001,n=.95,t=null){return new $A(e,n,t)}static adamax(e=.002,n=.9,t=.999,r=null,i=0){return new zA(e,n,t,r,i)}static adagrad(e,n=.1){return new BA(e,n)}},Th=CG,MIe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:e=>e();function eT(){return new Promise(e=>MIe(()=>e()))}var Io,I={};function EIe(e,n){let t=e[0].length;e.forEach((i,a)=>{T(i.length===t,()=>`Error in concat${t}D: rank of tensors[${a}] must be the same as the rank of the rest (${t})`)}),T(n>=0&&n<t,()=>`Error in concat${t}D: axis must be between 0 and ${t-1}.`);let r=e[0];e.forEach((i,a)=>{for(let s=0;s<t;s++)T(s===n||i[s]===r[s],()=>`Error in concat${t}D: Shape of tensors[${a}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function DIe(e,n){let t=e[0].slice();for(let r=1;r<e.length;r++)t[n]+=e[r][n];return t}function AIe(e,n,t){let r=new Array;if(null==t&&null==n)return r;if(null==n)for(;r.length<e+t.length;)r.push(-1);else r=n.slice();if(null==t)return r;if(e+t.length!==r.length)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.rank = ${e+t.length}, but shape.rank = ${r.length}`);for(let i=1;i<t.length;++i){let a=t[i],s=r[r.length-t.length+i],o=r[s];if(a>=0)if(o>=0){if(o!==a)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.shape[${i+e}] = ${a} but shape[${i+e}] = ${o}`)}else r[s]=a}return r}function TIe(e){let n={FIRST_DIM_SIZE:Io.FIRST_DIM_SIZE,VALUE_ROWIDS:Io.VALUE_ROWIDS,ROW_LENGTHS:Io.ROW_LENGTHS,ROW_SPLITS:Io.ROW_SPLITS,ROW_LIMITS:Io.ROW_LIMITS,ROW_STARTS:Io.ROW_STARTS},t=[];for(let r of e){if(!(r in n))break;t.push(n[r])}return t}function NIe(e){return 0===e.length?0:e[0]===Io.FIRST_DIM_SIZE?e.length-1:e.length}function OIe(e,n){if(null==e||null==n)return;let t=e.length,r=n.length;if(t>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${n}, are incompatible: defaultValue.rank = ${t} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(t,r-1);++i){let a=e[i],s=n[i+1];if(a>=0&&s>=0&&1!==a&&a!==s)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${n} are incompatible: defaultValue.shape[${i-e.length}] = ${a} but ragged tensor input.flatValues.shape[${i-e.length}] = ${s}`)}}it(I,{ERF_A1:()=>UIe,ERF_A2:()=>HIe,ERF_A3:()=>WIe,ERF_A4:()=>jIe,ERF_A5:()=>GIe,ERF_P:()=>zIe,PARALLELIZE_THRESHOLD:()=>tT,RowPartitionType:()=>Io,SELU_SCALE:()=>SG,SELU_SCALEALPHA:()=>kG,applyActivation:()=>h1,assertAndGetBroadcastShape:()=>mn,assertAxesAreInnerMostDims:()=>kwe,assertParamsConsistent:()=>EIe,assignToTypedArray:()=>QIe,axesAreInnerMostDims:()=>XD,calculateShapes:()=>Ij,checkEinsumDimSizes:()=>iMe,checkPadOnDimRoundingMode:()=>Ni,combineLocations:()=>q8,combineRaggedTensorToTensorShapes:()=>AIe,complexWithEvenIndex:()=>XIe,complexWithOddIndex:()=>YIe,computeConv2DInfo:()=>e_,computeConv3DInfo:()=>$8,computeDefaultPad:()=>DD,computeDilation2DInfo:()=>w0e,computeOptimalWindowSize:()=>FIe,computeOutAndReduceShapes:()=>K8,computeOutShape:()=>DIe,computePool2DInfo:()=>L8,computePool3DInfo:()=>C0e,convertConv2DDataFormat:()=>B8,decodeEinsumEquation:()=>nMe,eitherStridesOrDilationsAreOne:()=>wo,expandShapeToKeepDim:()=>Sh,exponent:()=>eMe,exponents:()=>JIe,fromStringArrayToUint8:()=>SMe,fromUint8ToStringArray:()=>kMe,getAxesPermutation:()=>X8,getBroadcastDims:()=>j8,getComplexWithIndex:()=>ZIe,getEinsumComputePath:()=>aMe,getEinsumPermutation:()=>rMe,getFusedBiasGradient:()=>d1,getFusedDyActivation:()=>u1,getImageCenter:()=>RIe,getInnerMostAxes:()=>Swe,getPermuted:()=>LIe,getRaggedRank:()=>NIe,getReductionAxes:()=>_r,getReshaped:()=>PIe,getReshapedPermuted:()=>$Ie,getRowPartitionTypesHelper:()=>TIe,getSliceBeginCoords:()=>BIe,getSliceSize:()=>VIe,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>cMe,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>uMe,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>dMe,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>fMe,getSparseReshapeInputOutputMismatchErrorMessage:()=>gMe,getSparseReshapeInputOutputMultipleErrorMessage:()=>mMe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>hMe,getSparseReshapeNegativeOutputDimErrorMessage:()=>pMe,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>vMe,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>yMe,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>bMe,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>_Me,getUndoAxesPermutation:()=>YD,isIdentityPermutation:()=>sMe,log:()=>Nve,mergeRealAndImagArrays:()=>qIe,prepareAndValidate:()=>hG,prepareSplitSize:()=>lMe,segment_util:()=>EG,shouldFuse:()=>p1,slice_util:()=>Tr,splitRealAndImagArrays:()=>KIe,stridesOrDilationsArePositive:()=>_h,tupleValuesAreOne:()=>Cc,upcastType:()=>za,validateDefaultValueShape:()=>OIe,validateInput:()=>s1,validateUpdateShape:()=>xA,warn:()=>gc}),function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(Io||(Io={}));var tT=30;function FIe(e){return e<=tT?e:lw(e,Math.floor(Math.sqrt(e)))}function RIe(e,n,t){return[t*("number"==typeof e?e:e[0]),n*("number"==typeof e?e:e[1])]}function PIe(e,n,t,r=!0){let i=[];if(r)i=i.concat(n.slice(0)),i.push(e[0]/t),i=i.concat(e.slice(1));else{i=i.concat(e[0]);let a=n.length;for(let s=0;s<a;++s)i=i.concat([e[s+1]/n[s],n[s]]);i=i.concat(e.slice(a+1))}return i}function LIe(e,n,t=!0){let r=[];if(t){r.push(n);for(let i=n+1;i<e;++i)i<=2*n?(r.push(i),r.push(i-(n+1))):r.push(i)}else{let i=[],a=[];for(let s=1;s<e;++s)s>=2*n+1||s%2==1?a.push(s):i.push(s);r.push(...i),r.push(0),r.push(...a)}return r}function $Ie(e,n,t,r=!0){let i=[];i.push(r?e[0]/t:e[0]*t);for(let a=1;a<e.length;++a)i.push(a<=n.length?r?n[a-1]*e[a]:e[a]/n[a-1]:e[a]);return i}function BIe(e,n){let t=[0];for(let r=0;r<n;++r)t.push(e[r][0]);return t}function VIe(e,n,t){let r=e.slice(0,1);for(let i=0;i<t;++i)r.push(e[i+1]-n[i][0]-n[i][1]);return r}var kG=1.7580993408473768,SG=1.0507009873554805,zIe=.3275911,UIe=.254829592,HIe=-.284496736,WIe=1.421413741,jIe=-1.453152027,GIe=1.061405429;function qIe(e,n){if(e.length!==n.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${n.length}.`);let t=new Float32Array(2*e.length);for(let r=0;r<t.length;r+=2)t[r]=e[r/2],t[r+1]=n[r/2];return t}function KIe(e){let n=new Float32Array(e.length/2),t=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)n[r/2]=e[r],t[r/2]=e[r+1];return{real:n,imag:t}}function XIe(e){let n=Math.ceil(e.length/4),t=new Float32Array(n),r=new Float32Array(n);for(let i=0;i<e.length;i+=4)t[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:t,imag:r}}function YIe(e){let n=Math.floor(e.length/4),t=new Float32Array(n),r=new Float32Array(n);for(let i=2;i<e.length;i+=4)t[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:t,imag:r}}function ZIe(e,n){return{real:e[2*n],imag:e[2*n+1]}}function QIe(e,n,t,r){e[2*r]=n,e[2*r+1]=t}function JIe(e,n){let t=new Float32Array(e/2),r=new Float32Array(e/2);for(let i=0;i<Math.ceil(e/2);i++){let a=(n?2:-2)*Math.PI*(i/e);t[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:t,imag:r}}function eMe(e,n,t){let r=(t?2:-2)*Math.PI*(e/n);return{real:Math.cos(r),imag:Math.sin(r)}}var nT="->",tMe=/->/g,IG=",",MG="...";function nMe(e,n){let t=((e=e.replace(/\s/g,"")).length-e.replace(tMe,"").length)/nT.length;if(t<1)throw new Error("Equations without an arrow are not supported.");if(t>1)throw new Error(`Equation must contain exactly one arrow ("${nT}").`);let[r,i]=e.split(nT);T(-1===r.indexOf(MG),()=>`The ellipsis notation ("${MG}") is not supported yet.`);let a=r.split(IG),s=a.length;if(n!==s)throw new Error(`Expected ${s} input tensors, received ${n}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let o=[];for(let d=0;d<i.length;++d){let p=i[d];if(!a.some(f=>-1!==f.indexOf(p)))throw new Error(`Output subscripts contain the label ${p} not present in the input subscripts.`);-1===o.indexOf(p)&&o.push(p)}for(let d=0;d<r.length;++d){let p=r[d];-1===o.indexOf(p)&&p!==IG&&o.push(p)}let l=new Array(a.length);for(let d=0;d<s;++d){if(new Set(a[d].split("")).size!==a[d].length)throw new Error(`Found duplicate axes in input component ${a[d]}. Support for duplicate axes in input is not implemented yet.`);l[d]=[];for(let p=0;p<a[d].length;++p)l[d].push(o.indexOf(a[d][p]))}let c=o.length,h=[];for(let d=i.length;d<c;++d)h.push(d);return{allDims:o,summedDims:h,idDims:l}}function rMe(e,n){let t=new Array(e);t.fill(-1);for(let i=0;i<n.length;++i)t[n[i]]=i;let r=[];for(let i=0;i<e;++i)-1===t[i]&&r.push(i);return t=t.filter(i=>-1!==i),{permutationIndices:t,expandDims:r}}function iMe(e,n,t){let r=new Array(e);for(let i=0;i<t.length;++i){let a=t[i].shape;for(let s=0;s<n[i].length;++s)void 0===r[n[i][s]]?r[n[i][s]]=a[s]:T(r[n[i][s]]===a[s],()=>`Expected dimension ${r[n[i][s]]} at axis ${s} of input shaped ${JSON.stringify(a)}, but got dimension ${a[s]}`)}}function aMe(e,n){let t=e,r=[],i=0;0===e.length&&t.push(-1),i=e.length+1;for(let s=0;s<i;++s)r.push([]);let a=[];for(let s=0;s<t.length;++s){let l=oMe(n,t[s]);for(let c of l)-1===a.indexOf(c)&&(r[s].push(c),a.push(c))}return{path:t,steps:r}}function sMe(e){return e.every((n,t)=>n===t)}function oMe(e,n){let t=[];for(let r=0;r<e.length;++r)(0===e[r].length||-1!==e[r].indexOf(n)||-1===n)&&t.push(r);return t}function lMe(e,n,t=0){let r=[];if("number"==typeof n)T(e.shape[t]%n==0,()=>"Number of splits must evenly divide the axis."),r=new Array(n).fill(e.shape[t]/n);else{T(n.reduce((s,o)=>(-1===o&&(s+=1),s),0)<=1,()=>"There should be only one negative value in split array.");let a=n.indexOf(-1);if(-1!==a){let s=n.reduce((o,l)=>l>0?o+l:o);n[a]=e.shape[t]-s}T(e.shape[t]===n.reduce((s,o)=>s+o),()=>"The sum of sizes must match the size of the axis dimension."),r=n}return r}function cMe(e){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${e}`}function uMe(e,n){return`indices(${e}, 0) is invalid: ${n} < 0`}function dMe(e,n,t){return`indices(${e}, 0) is invalid: ${n} >= ${t}`}function hMe(e,n){return`only one output dimension may be -1, not both ${e} and ${n}`}function pMe(e,n){return`size ${e} must be non-negative, not ${n}`}function fMe(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function mMe(e,n){return`Input to reshape is a SparseTensor with ${rn(e)}\n  dense values, but the requested shape requires a multiple of ${rn(n)}. inputShape=${e} outputShape= ${n}`}function gMe(e,n){return`Input to reshape is a tensor with ${rn(e)} dense values, but the requested shape has ${rn(n)}. inputShape=${e} outputShape=${n}`}function yMe(){return"segment ids must be >= 0"}function bMe(){return"segment ids are not increasing"}function _Me(e,n){return`Segment id ${e} out of range [0, ${n}), possibly because segmentIds input is not sorted.`}function vMe(e,n,t){return`Bad: indices[${e}] == ${n} out of range [0, ${t})`}var EG={};function xMe(e,n){let r,t=!1;for(e<=tT?(r=e,t=!0):r=lw(e,Math.floor(Math.sqrt(e)));!t;)r>n||r===e?t=!0:r=lw(e,r+1);return r}function wMe(e,n,t){let r=[],i=e.length;for(let a=0;a<i;a++)r.push(a!==n?e[a]:t);return r}function CMe(e,n,t,r){let i=n.shape.length,a=e.shape.length;if(0!==r&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${a}).`);if(t<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${t}).`);for(let h=0;h<r;++h)if(e.shape[h]!==n.shape[h])throw new Error(`x.shape[${h}]: ${e.shape[h]} should be equal to indices.shape[${h}]: ${n.shape[h]}.`);let s=e.shape[t],o=[],l=1,c=1,u=1;for(let h=0;h<r;++h)o.push(e.shape[h]),l*=e.shape[h];for(let h=r;h<t;h++)o.push(e.shape[h]),c*=e.shape[h];for(let h=r;h<i;h++)o.push(n.shape[h]);for(let h=t+1;h<a;h++)o.push(e.shape[h]),u*=e.shape[h];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:s,outputShape:o}}function kMe(e){try{return e.map(n=>Ew(n))}catch(n){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${n}`)}}function SMe(e){return e.map(n=>Gb(n))}it(EG,{collectGatherOpShapeInfo:()=>CMe,computeOutShape:()=>wMe,segOpComputeOptimalWindowSize:()=>xMe});var Mo={};it(Mo,{nonMaxSuppressionV3Impl:()=>Vj,nonMaxSuppressionV4Impl:()=>zj,nonMaxSuppressionV5Impl:()=>Uj,whereImpl:()=>Dj}),function USe(){for(let e of zSe)eG(e)}();var DG={kernelName:Nf,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>U(e,Dh(xe(t,"float32"),-1))}}},IMe={kernelName:Wu,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>{let r=gn(xe(t,"float32")),i=ii(Ee(He(1),r));return Dn(Te(e,i))}}}},MMe={kernelName:ju,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>{let r=ii(Ee(gn(xe(t,"float32")),1));return Te(e,r)}}}},EMe={kernelName:hc,inputsToSave:["a","b"],gradFunc:(e,n)=>{let[t,r]=n,i=mn(t.shape,r.shape);return{a:()=>{let a=e,s=_r(t.shape,i);return s.length>0&&(a=Re(a,s)),H(a,t.shape)},b:()=>{let a=e,s=_r(r.shape,i);return s.length>0&&(a=Re(a,s)),H(a,r.shape)}}}},DMe={kernelName:Gu,saveAllInputs:!0,gradFunc:(e,n)=>{let t={};return n.forEach((r,i)=>{t[i]=()=>e.clone()}),t}},AMe={kernelName:Rf,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>Ft(t)}}},TMe={kernelName:Pf,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>Ft(t)}}},NMe={kernelName:qu,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>Te(e,ii(Ee(He(1),gn(xe(t,"float32")))))}}},OMe={kernelName:Ku,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>{let r=ii(se(He(1),gn(xe(t,"float32"))));return Te(e,r)}}}},FMe={kernelName:Zu,inputsToSave:["a","b"],gradFunc:(e,n)=>{let[t,r]=n,i=mn(t.shape,r.shape);return{a:()=>{let a=se(gn(t),gn(r)),s=U(e,Te(r,a)),o=_r(t.shape,i);return o.length>0&&(s=Re(s,o)),H(s,t.shape)},b:()=>{let a=se(gn(t),gn(r)),s=Dn(U(e,Te(t,a))),o=_r(r.shape,i);return o.length>0&&(s=Re(s,o)),H(s,r.shape)}}}},RMe={kernelName:Xu,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>Te(e,se(gn(xe(t,"float32")),1))}}},PMe={kernelName:Yu,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>Te(e,Ee(He(1),gn(xe(t,"float32"))))}}},$Me=V({avgPool3dGrad_:function LMe(e,n,t,r,i,a){let s=A(e,"dy","avgPool3dGrad"),o=A(n,"input","avgPool3dGrad"),l=s,c=o,u=!1;4===o.rank&&(u=!0,l=H(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=H(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),T(5===l.rank,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),T(5===c.rank,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Ni("avgPool3dGrad",i,a);let p=$.runKernel(xb,{dy:l,input:c},{filterSize:t,strides:r,pad:i,dimRoundingMode:a});return u?H(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),BMe={kernelName:Lf,inputsToSave:["x"],gradFunc:(e,n,t)=>{let[r]=n,{filterSize:i,strides:a,pad:s,dimRoundingMode:o}=t;return{x:()=>$Me(e,r,i,a,s,o)}}},zMe=V({avgPoolGrad_:function VMe(e,n,t,r,i){let a=A(e,"dy","avgPoolGrad"),s=A(n,"input","avgPoolGrad");T(s.rank===a.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${a.rank})`);let o=s,l=a,c=!1;3===s.rank&&(c=!0,o=H(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=H(a,[1,a.shape[0],a.shape[1],a.shape[2]])),T(4===l.rank,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),T(4===o.rank,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);let d=$.runKernel(vb,{dy:l,input:o},{filterSize:t,strides:r,pad:i});return c?H(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),UMe={kernelName:Qu,inputsToSave:["x"],gradFunc:(e,n,t)=>{let[r]=n,{filterSize:i,strides:a,pad:s}=t;return{x:()=>zMe(e,r,i,a,s)}}},HMe={kernelName:Ju,inputsToSave:["a","b"],gradFunc:(e,n,t)=>{let[r,i]=n,{transposeA:a,transposeB:s}=t;return a||s?!a&&s?{a:()=>Ct(e,i,!1,!1),b:()=>Ct(e,r,!0,!1)}:a&&!s?{a:()=>Ct(i,e,!1,!0),b:()=>Ct(r,e,!1,!1)}:{a:()=>Ct(i,e,!0,!0),b:()=>Ct(e,r,!0,!0)}:{a:()=>Ct(e,i,!1,!0),b:()=>Ct(r,e,!0,!1)}}},WMe={kernelName:$f,gradFunc:(e,n,t)=>{let{blockShape:r,crops:i}=t;return{x:()=>h_(e,r,i)}}},jMe={kernelName:e8,gradFunc:(e,n,t)=>{let i=t.inputShape,a=t.shape,s=Array.from(a);for(let l=i.length-1;l>=0;l--)if(i[l]===a[l])s[l]=1;else if(1!==i[l])throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${a}].`);let o=[];for(let l=0;l<s.length;l++)s[l]>1&&o.push(l);return{x:()=>Re(e,o,!0)}}},GMe={kernelName:ed,gradFunc:e=>({x:()=>e.clone()})},qMe={kernelName:td,gradFunc:e=>({x:()=>Ft(e)})},KMe={kernelName:pc,inputsToSave:["x"],gradFunc:(e,n,t)=>{let[r]=n,{clipValueMin:i,clipValueMax:a}=t;return{x:()=>Wr(_s(bl(r,i),kc(r,a)),e,Ft(e))}}},XMe={kernelName:Cb,inputsToSave:["x"],gradFunc:DG.gradFunc},YMe={kernelName:zf,saveAllInputs:!0,gradFunc:(e,n,t)=>{let r=n.map(o=>o.shape),{axis:i}=t,a=gs(i,n[0].shape)[0],s=r.map(o=>o[a]);return Yi(e,s,a).map(o=>()=>o)}},ZMe={kernelName:nd,inputsToSave:["x","filter"],gradFunc:(e,n,t)=>{let[r,i]=n,{dilations:a,strides:s,pad:o,dataFormat:l}=t;return T(Cc(a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>zD(r.shape,e,i,s,o,l),filter:()=>TA(r,e,i.shape,s,o,l)}}},QMe={kernelName:rd,inputsToSave:["dy","filter"],gradFunc:(e,n,t)=>{let[r,i]=n,{strides:a,pad:s,dataFormat:o,dimRoundingMode:l}=t;return{dy:()=>Oi(e,i,a,s,o,1,l),filter:()=>TA(e,r,i.shape,a,s,o,l)}}},eEe=V({conv3DBackpropFilter_:function JMe(e,n,t,r,i){let a=e;4===e.rank&&(a=H(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let s=n;return 4===s.rank&&(s=H(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]])),T(5===a.rank,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`),T(5===s.rank,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`),T(5===t.length,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${t}.`),T(a.shape[4]===t[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${t[3]}.`),T(s.shape[4]===t[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${t[4]}).`),$.runKernel(Uf,{x:a,dy:s},{strides:r,pad:i,filterShape:t})}}),tEe={kernelName:id,inputsToSave:["x","filter"],gradFunc:(e,n,t)=>{let{dilations:r,strides:i,pad:a}=t;T(Cc(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);let[s,o]=n;return{x:()=>H8(s.shape,e,o,i,a),filter:()=>eEe(s,e,o.shape,i,a)}}},nEe={kernelName:ad,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>U(Dn(Qw(xe(t,"float32"))),e)}}},rEe={kernelName:sd,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>U(Jw(xe(t,"float32")),e)}}},iEe={kernelName:od,inputsToSave:["x"],gradFunc:(e,n,t)=>{let[r]=n,{axis:i,exclusive:a,reverse:s}=t;return{x:()=>{let o=X8([i],r.rank),l=Bw(e,i,a,!s);return null!=o&&(l=kt(l,o)),l}}}},aEe={kernelName:ld,inputsToSave:["x","filter"],gradFunc:(e,n,t)=>{let{dilations:r,strides:i,pad:a,dimRoundingMode:s}=t,o=r??[1,1];T(Cc(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);let[l,c]=n;return T(4===l.rank,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),T(4===c.rank,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),T(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),T(wo(i,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${o}'.`),Ni("depthwiseConv2d",a,s),{x:()=>Lj(l.shape,e,c,i,a,o,s),filter:()=>Pj(l,e,c.shape,i,a,o,s)}}},sEe={kernelName:cd,inputsToSave:["x","filter"],gradFunc:(e,n,t)=>{let[r,i]=n,a={x:r,filter:i,dy:e},s={x:r,filter:i,dy:e};return{x:()=>$.runKernel(qf,a,t),filter:()=>$.runKernel(Kf,s,t)}}},oEe={kernelName:dd,outputsToSave:[!0],gradFunc:(e,n)=>{let[t]=n,r={dy:e,y:t};return{x:()=>$.runKernel(Xf,r)}}},lEe={kernelName:hd,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n,r=U(yi(Dn(gn(t))),2/Math.sqrt(Math.PI));return{x:()=>U(e,r)}}},cEe={kernelName:pd,outputsToSave:[!0],gradFunc:(e,n)=>{let[t]=n;return{x:()=>U(e,t)}}},uEe={kernelName:Zf,inputsToSave:["input"],gradFunc:(e,n)=>{let[t]=n;return{input:()=>H(e,t.shape)}}},dEe={kernelName:fd,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>U(e,yi(t))}}},hEe={kernelName:md,gradFunc:e=>({x:()=>Ft(e)})},pEe={kernelName:gd,inputsToSave:["a","b"],gradFunc:(e,n)=>{let[t,r]=n,i=mn(t.shape,r.shape);return{a:()=>{let a=Te(e,xe(r,"float32")),s=_r(t.shape,i);return s.length>0?H(Re(a,s),t.shape):a},b:()=>{let a=U(e,xe(t,"float32")),s=_r(r.shape,i);s.length>0&&(a=H(Re(a,s),r.shape));let o=gn(r);return Dn(Te(a,xe(o,"float32")))}}}},fEe={kernelName:yd,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,n,t)=>{let{varianceEpsilon:r}=t,[i,a,s,o]=n,l=o??He(1),c=_r(a.shape,i.shape),u=[];if(1===a.rank){for(let m=0;m<i.shape.length-1;++m)u.push(i.shape[m]);u.push(1)}let h=Ee(i,a),d=U(e,l),p=Yw(se(s,He(r))),f=U(U(U(p,p),p),He(-.5));return{x:()=>H(U(U(e,1===a.rank?va(H(p,[1,1,1,a.shape[0]]),u):p),l),i.shape),mean:()=>{let m=U(U(p,He(-1)),d);return 1===a.rank&&(m=Re(m,c)),H(m,a.shape)},variance:()=>{let m=U(U(f,h),d);return 1===a.rank&&(m=Re(m,c)),H(m,a.shape)},scale:()=>{let m=U(h,p),g=U(e,m);return 1===a.rank&&(g=Re(g,c)),H(g,a.shape)},offset:()=>{let m=e;return 1===a.rank&&(m=Re(m,c)),H(m,a.shape)}}}},mEe={kernelName:Jf,inputsToSave:["x","indices"],gradFunc:(e,n,t)=>{let[r,i]=n,{axis:a,batchDims:s}=t,o=gs(a,r.shape)[0],l=(c,u,h)=>()=>{let d=c.shape,p=u.size,f=d.slice(0,o),m=f.length,g=d.slice(a,d.length).slice(1),y=g.length,b=AG(0,m),_=AG(m+1,m+1+y),v=TG([f,[p],g]),x=H(h,v),S=H(u,[p]),M=TG([[m],b,_]),D=kt(x,M),N=l1(D,S,c.shape[o]),F=YD(M);return N=kt(N,F),N};if(1===s){let u=r.split(r.shape[0],0);return{x:()=>vr(u.map((h,d)=>l(h,i.slice(d,1),e.slice(d,1))())).reshape(r.shape),indices:()=>i}}return{x:l(r,i,e),indices:()=>i}}};function AG(e,n){let t=[];for(let r=e;r<n;++r)t.push(r);return t}function TG(e){let n=[];for(let t=0;t<e.length;++t)for(let r=0;r<e[t].length;++r)n.push(e[t][r]);return n}var gEe={kernelName:bd,inputsToSave:["a","b"],gradFunc:(e,n)=>{let[t,r]=n;return{a:()=>Ft(t),b:()=>Ft(r)}}},yEe={kernelName:_d,gradFunc:e=>({x:()=>xe(e,"float32")})},bEe={kernelName:vd,gradFunc:e=>({x:()=>Ft(e)})},_Ee={kernelName:xd,gradFunc:e=>({x:()=>Ft(e)})},vEe={kernelName:wd,gradFunc:e=>({x:()=>Ft(e)})},xEe={kernelName:Cd,inputsToSave:["x"],gradFunc:(e,n,t)=>{let[r]=n,{alpha:i}=t,a=Fi(r,0);return{x:()=>Wr(a,e,U(e,i))}}},wEe={kernelName:Sd,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>Te(e,se(t,1))}}},CEe={kernelName:kd,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>Te(e,xe(t,"float32"))}}},kEe={kernelName:n8,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,n,t)=>{let[r]=n,{axis:i}=t;return{logits:()=>{let a=yi(r);return Ee(e,U(Re(e,i,!0),a))}}}},IEe=V({localResponseNormalizationBackprop_:function SEe(e,n,t,r=5,i=1,a=1,s=.5){return $.runKernel(lm,{x:e,y:n,dy:t},{depthRadius:r,bias:i,alpha:a,beta:s})}}),MEe={kernelName:Id,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,n,t)=>{let[r,i]=n,{depthRadius:a,bias:s,alpha:o,beta:l}=t;return{x:()=>IEe(r,i,e,a,s,o,l)}}};function NG(e,n,t,r){return n.rank<t.rank&&(n=H(n,Sh(n.shape,r))),e.rank<t.rank&&(e=H(e,Sh(e.shape,r))),{x:()=>U(e,xe(_a(t,n),e.dtype))}}var OG={kernelName:Md,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,n,t)=>{let r=t,{reductionIndices:i}=r,a=n[0],l=NG(e,n[1],a,gs(i,a.shape));return{x:()=>l.x()}}},EEe={kernelName:Ed,inputsToSave:["a","b"],gradFunc:(e,n)=>{let[t,r]=n;return{a:()=>U(e,xe(bl(t,r),"float32")),b:()=>U(e,xe(qm(t,r),"float32"))}}},AEe=V({maxPool3dGrad_:function DEe(e,n,t,r,i,a,s){let o=A(e,"dy","maxPool3dGrad"),l=A(n,"input","maxPool3dGrad"),c=A(t,"output","maxPool3dGrad"),u=o,h=l,d=c,p=!1;4===l.rank&&(p=!0,u=H(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),h=H(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=H(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),T(5===u.rank,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),T(5===h.rank,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),T(5===d.rank,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),Ni("maxPool3dGrad",a,s);let g=$.runKernel(Eb,{dy:u,input:h,output:d},{filterSize:r,strides:i,pad:a,dimRoundingMode:s});return p?H(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),TEe={kernelName:cm,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,n,t)=>{let[r,i]=n,{filterSize:a,strides:s,pad:o,dimRoundingMode:l}=t;return{x:()=>AEe(e,r,i,a,s,o,l)}}},OEe=V({maxPoolGrad_:function NEe(e,n,t,r,i,a,s){let o=A(e,"dy","maxPoolGrad"),l=A(n,"input","maxPoolGrad"),c=A(t,"output","maxPoolGrad");return T(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),T(4===o.rank,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),T(4===l.rank,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Ni("maxPoolGrad",a,s),$.runKernel(Mb,{dy:o,input:l,output:c},{filterSize:r,strides:i,pad:a,dimRoundingMode:s})}}),FEe={kernelName:Dd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,n,t)=>{let[r,i]=n,{filterSize:a,strides:s,pad:o}=t;return{x:()=>OEe(e,r,i,a,s,o)}}},REe={kernelName:Ad,inputsToSave:["x"],gradFunc:(e,n,t)=>{let[r]=n,{axis:i}=t,a=gs(i,r.shape),o=rn(K8(r.shape,a)[1]);return{x:()=>{let l=r.shape.slice();a.forEach(u=>{l[u]=1});let c=H(e,l);return Te(U(c,Xi(r.shape,"float32")),o)}}}},PEe={kernelName:Td,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,n,t)=>{let r=t,{axis:i}=r,[a,s]=n,l=NG(e,s,a,gs(i,a.shape));return{x:()=>l.x()}}},LEe={kernelName:Nd,inputsToSave:["a","b"],gradFunc:(e,n)=>{let[t,r]=n;return{a:()=>U(e,xe(kc(t,r),"float32")),b:()=>U(e,xe(Fi(t,r),"float32"))}}},$Ee={kernelName:Od,inputsToSave:["x"],gradFunc:(e,n,t)=>{let r=n[0],{paddings:i}=t,a=i.map(s=>s[0]);return{x:()=>At(e,a,r.shape)}}},BEe={kernelName:Fd,inputsToSave:["a","b"],gradFunc:(e,n)=>{let[t,r]=n,i=mn(t.shape,r.shape);return{a:()=>{let a=_r(t.shape,i);return a.length>0?H(Re(e,a),t.shape):e},b:()=>{let a=U(e,Dn(jm(Te(t,r)))),s=_r(r.shape,i);return s.length>0?H(Re(a,s),r.shape):a}}}},VEe={kernelName:Rd,inputsToSave:["a","b"],gradFunc:(e,n)=>{let[t,r]=n,i=mn(t.shape,r.shape);return{a:()=>{let a=U(e,xe(r,"float32")),s=_r(t.shape,i);return s.length>0?H(Re(a,s),t.shape):a},b:()=>{let a=U(e,xe(t,"float32")),s=_r(r.shape,i);return s.length>0?H(Re(a,s),r.shape):a}}}},zEe={kernelName:dm,gradFunc:e=>({x:()=>Dn(e)})},HEe={kernelName:gm,gradFunc:e=>({x:()=>Ft(e)})},WEe={kernelName:ym,saveAllInputs:!0,gradFunc:(e,n,t)=>{let{axis:r}=t;return tr(e,r).map(i=>()=>i)}},FG={kernelName:Ld,inputsToSave:["x"],gradFunc:(e,n,t)=>{let r=n[0],{paddings:i}=t,a=i.map(s=>s[0]);return{x:()=>At(e,a,r.shape)}}},jEe={kernelName:$d,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,n)=>{let[t,r,i]=n,a=t,s=r,o=mn(a.shape,s.shape);return{a:()=>{let l=xe(s,"float32"),c=U(e,U(l,yl(a,Ee(l,He(1))))),u=_r(a.shape,o);return u.length>0&&(c=Re(c,u)),H(c,a.shape)},b:()=>{let l=Fi(a,0),c=Wr(l,xa(a),Ft(a)),u=U(e,U(i,c)),h=_r(s.shape,o);return h.length>0&&(u=Re(u,h)),H(u,s.shape)}}}},GEe={kernelName:Bd,inputsToSave:["x","alpha"],gradFunc:(e,n)=>{let[t,r]=n,i=Fi(t,0);return{x:()=>Wr(i,e,U(e,r)),alpha:()=>{let a=Wr(i,Ft(e),U(e,t)),s=_r(r.shape,e.shape);return s.length>0&&(a=Re(a,s)),H(a,r.shape)}}}};var XEe={kernelName:Vd,inputsToSave:["x"],gradFunc:(e,n,t)=>{let[r]=n,{axis:i}=t,a=[];return a=null==i?r.shape.map((s,o)=>o):"number"==typeof i?[i]:i,{x:()=>function KEe(e,n,t){let r=e.shape.length,i=r-t.length,a=I.getAxesPermutation(t,r),s=e;null!=a&&(s=kt(e,a));let o=s.shape.slice(),l=o.splice(r-t.length,t.length).reduce((h,d)=>h*d,1);o.push(l);let u=function qEe(e,n,t){let r=e.shape.slice();r[t]=1;let i=H(n,r),a=a_(e,t,!0,!1),s=a_(e,t,!0,!0),o=U(a,s);return U(i,o)}(s.reshape(o),n,i);if(u=u.reshape(s.shape),null!=a){let h=I.getUndoAxesPermutation(a);u=kt(u,h)}return u}(r,e,a)}}},YEe={kernelName:ud,inputsToSave:["a","b"],gradFunc:(e,n)=>{let[t,r]=n,i=mn(t.shape,r.shape);return{a:()=>{let a=Te(e,xe(r,"float32")),s=_r(t.shape,i);return s.length>0?H(Re(a,s),t.shape):a},b:()=>{let a=U(e,xe(t,"float32")),s=_r(r.shape,i);s.length>0&&(a=H(Re(a,s),r.shape));let o=gn(r);return Dn(Te(a,xe(o,"float32")))}}}},ZEe={kernelName:zd,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>Te(e,Dn(gn(t)))}}},QEe={kernelName:jd,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n,r=U(kc(t,6),Dh(t));return{x:()=>U(e,xe(r,"float32"))}}},JEe={kernelName:Ud,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>U(e,xe(Dh(t),"float32"))}}},e2e={kernelName:bm,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>H(e,t.shape)}}},t2e={kernelName:Wd,inputsToSave:["images"],gradFunc:(e,n,t)=>{let[r]=n,i={dy:e,images:r};return{images:()=>$.runKernel(vm,i,t)}}},n2e={kernelName:Hd,inputsToSave:["images"],gradFunc:(e,n,t)=>{let[r]=n,i={dy:e,images:r};return{images:()=>$.runKernel(_m,i,t)}}},r2e={kernelName:Gd,gradFunc:(e,n,t)=>{let{dims:r}=t,i=gs(r,e.shape);return{x:()=>Wa(e,i)}}},i2e={kernelName:qd,gradFunc:e=>({x:()=>Ft(e)})},a2e={kernelName:Kd,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>Dn(Te(e,U(yl(t,1.5),2)))}}},s2e={kernelName:km,inputsToSave:["condition"],gradFunc:(e,n)=>{let[t]=n;return{condition:()=>xe(Ft(t),"float32"),t:()=>U(e,xe(t,e.dtype)),e:()=>U(e,xe(u_(t),e.dtype))}}},o2e={kernelName:Xd,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>{let r=Fi(t,He(0)),i=He(kG),a=He(SG),s=U(e,a),o=U(U(e,i),yi(xe(t,"float32")));return Wr(r,s,o)}}}},l2e={kernelName:Jd,outputsToSave:[!0],gradFunc:(e,n)=>{let[t]=n;return{x:()=>U(e,U(t,Ee(He(1),t)))}}},c2e={kernelName:Qd,gradFunc:e=>({x:()=>Ft(e)})},u2e={kernelName:Yd,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>U(i_(xe(t,"float32")),e)}}},d2e={kernelName:Zd,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>U($w(xe(t,"float32")),e)}}},h2e={kernelName:Sm,inputsToSave:["x"],gradFunc:(e,n,t)=>{let[r]=n,{begin:i,size:a}=t,s=r.shape,[o,l]=xG(r,i,a),c=[];for(let u=0;u<e.rank;u++)c.push([o[u],s[u]-o[u]-l[u]]);return{x:()=>js(e,c)}}},p2e={kernelName:rh,outputsToSave:[!0],gradFunc:(e,n,t)=>{let[r]=n,{dim:i}=t,s=U(e,r);return{logits:()=>Ee(s,U(Re(s,[i],!0),r))}}},f2e={kernelName:eh,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>U(e,bs(t))}}},RG={kernelName:Im,gradFunc:(e,n,t)=>{let{blockShape:r,paddings:i}=t;return{x:()=>r_(e,r,i)}}},PG={kernelName:Mm,gradFunc:(e,n,t)=>{let{axis:r}=t;return{x:()=>fn(e,r)}}},m2e={kernelName:th,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>Te(e,U(ii(xe(t,"float32")),2))}}},g2e={kernelName:Fb,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>U(e,U(xe(t,"float32"),2))}}},y2e={kernelName:ih,inputsToSave:["a","b"],gradFunc:(e,n)=>{let[t,r]=n,i=He(2);return{a:()=>U(e,U(i,Ee(t,r))),b:()=>U(e,U(i,Ee(r,t)))}}},b2e={kernelName:mc,gradFunc:e=>({x:()=>Ft(e)})},_2e={kernelName:ah,inputsToSave:["a","b"],gradFunc:(e,n)=>{let[t,r]=n,i=mn(t.shape,r.shape);return{a:()=>{let a=e,s=_r(t.shape,i);return s.length>0&&(a=Re(a,s)),H(a,t.shape)},b:()=>{let a=e,s=_r(r.shape,i);return s.length>0&&(a=Re(a,s)),H(Dn(a),r.shape)}}}},v2e={kernelName:nh,inputsToSave:["x"],gradFunc:(e,n,t)=>{let[r]=n,i=r.shape.slice(),{axis:a}=t;gs(a,r.shape).forEach(l=>{i[l]=1});let s=H(e,i),o=U(s,Xi(r.shape,"float32"));return{x:()=>o}}},x2e={kernelName:sh,inputsToSave:["x"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>Te(e,gn(i_(t)))}}},w2e={kernelName:oh,outputsToSave:[!0],gradFunc:(e,n)=>{let[t]=n;return{x:()=>U(Ee(He(1),gn(t)),e)}}},C2e={kernelName:fc,inputsToSave:["x"],gradFunc:(e,n,t)=>{let[r]=n,{reps:i}=t;return{x:()=>{let a=Ft(r);if(1===r.rank)for(let s=0;s<i[0];++s)a=se(a,At(e,[s*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let s=0;s<i[0];++s)for(let o=0;o<i[1];++o)a=se(a,At(e,[s*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let s=0;s<i[0];++s)for(let o=0;o<i[1];++o)for(let l=0;l<i[2];++l)a=se(a,At(e,[s*r.shape[0],o*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);for(let s=0;s<i[0];++s)for(let o=0;o<i[1];++o)for(let l=0;l<i[2];++l)for(let c=0;c<i[3];++c)a=se(a,At(e,[s*r.shape[0],o*r.shape[1],l*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return a}}}},k2e={kernelName:hl,gradFunc:(e,n,t)=>{let r=t,{perm:i}=r,a=YD(i);return{x:()=>kt(e,a)}}},S2e={kernelName:Om,gradFunc:(e,n,t)=>{let r=t,{axis:i}=r;return{value:()=>vr(e,i)}}},I2e={kernelName:Vb,inputsToSave:["segmentIds"],gradFunc:(e,n)=>{let[t]=n;return{x:()=>function M2e(e,n){let t=ko(n,Ft(n)),r=Gm(e,t),i=bl(n,He(0,"int32")),a=r.rank-i.rank;for(let o=0;o<a;++o)i=jr(i,o+1);i=_s(i,Xi(r.shape,"bool"));let s=Ft(r);return Wr(i,r,s)}(e,t)}}},E2e={kernelName:Fm,gradFunc:e=>({x:()=>Ft(e)})},D2e=[DG,IMe,MMe,EMe,DMe,AMe,TMe,NMe,OMe,FMe,RMe,PMe,BMe,UMe,HMe,WMe,jMe,GMe,qMe,KMe,XMe,YMe,QMe,ZMe,tEe,nEe,rEe,iEe,aEe,sEe,YEe,oEe,lEe,cEe,uEe,dEe,pEe,hEe,fEe,mEe,gEe,yEe,bEe,_Ee,vEe,xEe,wEe,CEe,kEe,MEe,OG,OG,EEe,TEe,FEe,REe,PEe,LEe,$Ee,BEe,VEe,zEe,{kernelName:Pd,inputsToSave:["indices"],gradFunc:(e,n)=>{let t=n[0];return{indices:()=>Kn(t.shape,"float32")}}},HEe,WEe,FG,FG,jEe,GEe,XEe,ZEe,QEe,JEe,e2e,t2e,n2e,r2e,i2e,a2e,s2e,o2e,l2e,c2e,u2e,d2e,h2e,p2e,f2e,RG,RG,PG,PG,m2e,y2e,g2e,b2e,_2e,v2e,x2e,w2e,C2e,k2e,S2e,I2e,E2e];for(let e of D2e)r8(e);ae().prototype.abs=function(){return this.throwIfDisposed(),br(this)},ae().prototype.acos=function(){return this.throwIfDisposed(),xD(this)},ae().prototype.acosh=function(){return this.throwIfDisposed(),wD(this)},ae().prototype.add=function(e){return this.throwIfDisposed(),se(this,e)},ae().prototype.all=function(e,n){return this.throwIfDisposed(),Rw(this,e,n)},ae().prototype.any=function(e,n){return this.throwIfDisposed(),Jb(this,e,n)},ae().prototype.argMax=function(e){return this.throwIfDisposed(),bh(this,e)},ae().prototype.argMin=function(e){return this.throwIfDisposed(),CD(this,e)},ae().prototype.asScalar=function(){return this.throwIfDisposed(),T(1===this.size,()=>"The array must have only 1 element."),H(this,[])},ae().prototype.asType=function(e){return this.throwIfDisposed(),xe(this,e)},ae().prototype.as1D=function(){return this.throwIfDisposed(),H(this,[this.size])},ae().prototype.as2D=function(e,n){return this.throwIfDisposed(),H(this,[e,n])},ae().prototype.as3D=function(e,n,t){return this.throwIfDisposed(),H(this,[e,n,t])},ae().prototype.as4D=function(e,n,t,r){return this.throwIfDisposed(),H(this,[e,n,t,r])},ae().prototype.as5D=function(e,n,t,r,i){return this.throwIfDisposed(),H(this,[e,n,t,r,i])},ae().prototype.asin=function(){return this.throwIfDisposed(),kD(this)},ae().prototype.asinh=function(){return this.throwIfDisposed(),SD(this)},ae().prototype.atan=function(){return this.throwIfDisposed(),ID(this)},ae().prototype.atan2=function(e){return this.throwIfDisposed(),MD(this,e)},ae().prototype.atanh=function(){return this.throwIfDisposed(),ED(this)},ae().prototype.avgPool=function(e,n,t,r){return this.throwIfDisposed(),gl(this,e,n,t,r)},ae().prototype.batchToSpaceND=function(e,n){return this.throwIfDisposed(),r_(this,e,n)},ae().prototype.batchNorm=function(e,n,t,r,i){return this.throwIfDisposed(),xh(this,e,n,t,r,i)},ae().prototype.broadcastTo=function(e){return this.throwIfDisposed(),wh(this,e)},ae().prototype.cast=function(e){return this.throwIfDisposed(),xe(this,e)},ae().prototype.ceil=function(){return this.throwIfDisposed(),PD(this)},ae().prototype.clipByValue=function(e,n){return this.throwIfDisposed(),gi(this,e,n)},ae().prototype.concat=function(e,n){return this.throwIfDisposed(),e instanceof gt&&(e=[e]),fn([this,...e],n)},ae().prototype.conv1d=function(e,n,t,r,i,a){return this.throwIfDisposed(),Pw(this,e,n,t,r,i,a)},ae().prototype.conv2dTranspose=function(e,n,t,r,i){return this.throwIfDisposed(),Lw(this,e,n,t,r,i)},ae().prototype.conv2d=function(e,n,t,r,i,a){return this.throwIfDisposed(),Oi(this,e,n,t,r,i,a)},ae().prototype.cos=function(){return this.throwIfDisposed(),i_(this)},ae().prototype.cosh=function(){return this.throwIfDisposed(),$w(this)},ae().prototype.cumprod=function(e,n,t){return this.throwIfDisposed(),a_(this,e,n,t)},ae().prototype.cumsum=function(e,n,t){return this.throwIfDisposed(),Bw(this,e,n,t)},ae().prototype.depthToSpace=function(e,n){return this.throwIfDisposed(),WD(this,e,n)},ae().prototype.depthwiseConv2d=function(e,n,t,r,i,a){return this.throwIfDisposed(),Ch(this,e,n,t,r,i,a)},ae().prototype.dilation2d=function(e,n,t,r,i){return this.throwIfDisposed(),jD(this,e,n,t,r,i)},ae().prototype.divNoNan=function(e){return this.throwIfDisposed(),GD(this,e)},ae().prototype.div=function(e){return this.throwIfDisposed(),Te(this,e)},ae().prototype.dot=function(e){return this.throwIfDisposed(),qD(this,e)},ae().prototype.elu=function(){return this.throwIfDisposed(),Um(this)},ae().prototype.equal=function(e){return this.throwIfDisposed(),_a(this,e)},ae().prototype.erf=function(){return this.throwIfDisposed(),KD(this)},ae().prototype.euclideanNorm=function(e,n){return this.throwIfDisposed(),ZD(this,e,n)},ae().prototype.exp=function(){return this.throwIfDisposed(),yi(this)},ae().prototype.expandDims=function(e){return this.throwIfDisposed(),jr(this,e)},ae().prototype.expm1=function(){return this.throwIfDisposed(),QD(this)},ae().prototype.fft=function(){return this.throwIfDisposed(),m_(this)},ae().prototype.flatten=function(){return this.throwIfDisposed(),H(this,[this.size])},ae().prototype.floor=function(){return this.throwIfDisposed(),jm(this)},ae().prototype.floorDiv=function(e){return this.throwIfDisposed(),Fw(this,e)},ae().prototype.gather=function(e,n,t){return this.throwIfDisposed(),Gm(this,e,n,t)},ae().prototype.greaterEqual=function(e){return this.throwIfDisposed(),bl(this,e)},ae().prototype.greater=function(e){return this.throwIfDisposed(),Fi(this,e)},ae().prototype.ifft=function(){return this.throwIfDisposed(),Jm(this)},ae().prototype.irfft=function(){return this.throwIfDisposed(),t1(this)},ae().prototype.isFinite=function(){return this.throwIfDisposed(),JD(this)},ae().prototype.isInf=function(){return this.throwIfDisposed(),eA(this)},ae().prototype.isNaN=function(){return this.throwIfDisposed(),tA(this)},ae().prototype.leakyRelu=function(e){return this.throwIfDisposed(),o_(this,e)},ae().prototype.lessEqual=function(e){return this.throwIfDisposed(),kc(this,e)},ae().prototype.less=function(e){return this.throwIfDisposed(),qm(this,e)},ae().prototype.localResponseNormalization=function(e,n,t,r){return this.throwIfDisposed(),nA(this,e,n,t,r)},ae().prototype.logSigmoid=function(){return this.throwIfDisposed(),rA(this)},ae().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Hw(this,e)},ae().prototype.logSumExp=function(e,n){return this.throwIfDisposed(),c_(this,e,n)},ae().prototype.log=function(){return this.throwIfDisposed(),xa(this)},ae().prototype.log1p=function(){return this.throwIfDisposed(),l_(this)},ae().prototype.logicalAnd=function(e){return this.throwIfDisposed(),_s(this,e)},ae().prototype.logicalNot=function(){return this.throwIfDisposed(),u_(this)},ae().prototype.logicalOr=function(e){return this.throwIfDisposed(),Ww(this,e)},ae().prototype.logicalXor=function(e){return this.throwIfDisposed(),iA(this,e)},ae().prototype.matMul=function(e,n,t){return this.throwIfDisposed(),Ct(this,e,n,t)},ae().prototype.maxPool=function(e,n,t,r){return this.throwIfDisposed(),Gr(this,e,n,t,r)},ae().prototype.max=function(e,n){return this.throwIfDisposed(),Ha(this,e,n)},ae().prototype.maximum=function(e){return this.throwIfDisposed(),ko(this,e)},ae().prototype.mean=function(e,n){return this.throwIfDisposed(),qn(this,e,n)},ae().prototype.min=function(e,n){return this.throwIfDisposed(),Hm(this,e,n)},ae().prototype.minimum=function(e){return this.throwIfDisposed(),Sc(this,e)},ae().prototype.mirrorPad=function(e,n){return this.throwIfDisposed(),sA(this,e,n)},ae().prototype.mod=function(e){return this.throwIfDisposed(),oA(this,e)},ae().prototype.mul=function(e){return this.throwIfDisposed(),U(this,e)},ae().prototype.neg=function(){return this.throwIfDisposed(),Dn(this)},ae().prototype.norm=function(e,n,t){return this.throwIfDisposed(),Wm(this,e,n,t)},ae().prototype.notEqual=function(e){return this.throwIfDisposed(),Mh(this,e)},ae().prototype.oneHot=function(e,n=1,t=0){return this.throwIfDisposed(),Km(this,e,n,t)},ae().prototype.onesLike=function(){return this.throwIfDisposed(),wa(this)},ae().prototype.pad=function(e,n){return this.throwIfDisposed(),js(this,e,n)},ae().prototype.pool=function(e,n,t,r,i,a){return this.throwIfDisposed(),lA(this,e,n,t,r,i,a)},ae().prototype.pow=function(e){return this.throwIfDisposed(),yl(this,e)},ae().prototype.prelu=function(e){return this.throwIfDisposed(),p_(this,e)},ae().prototype.prod=function(e,n){return this.throwIfDisposed(),cA(this,e,n)},ae().prototype.reciprocal=function(){return this.throwIfDisposed(),gA(this)},ae().prototype.relu=function(){return this.throwIfDisposed(),an(this)},ae().prototype.relu6=function(){return this.throwIfDisposed(),Kw(this)},ae().prototype.reshapeAs=function(e){return this.throwIfDisposed(),H(this,e.shape)},ae().prototype.reshape=function(e){return this.throwIfDisposed(),H(this,e)},ae().prototype.resizeBilinear=function(e,n,t){return this.throwIfDisposed(),Wj(this,e,n,t)},ae().prototype.resizeNearestNeighbor=function(e,n,t){return this.throwIfDisposed(),jj(this,e,n,t)},ae().prototype.reverse=function(e){return this.throwIfDisposed(),Wa(this,e)},ae().prototype.rfft=function(){return this.throwIfDisposed(),g_(this)},ae().prototype.round=function(){return this.throwIfDisposed(),Xw(this)},ae().prototype.rsqrt=function(){return this.throwIfDisposed(),Yw(this)},ae().prototype.selu=function(){return this.throwIfDisposed(),Zw(this)},ae().prototype.separableConv2d=function(e,n,t,r,i,a){return this.throwIfDisposed(),Ym(this,e,n,t,r,i,a)},ae().prototype.sigmoid=function(){return this.throwIfDisposed(),bs(this)},ae().prototype.sign=function(){return this.throwIfDisposed(),bA(this)},ae().prototype.sin=function(){return this.throwIfDisposed(),Qw(this)},ae().prototype.sinh=function(){return this.throwIfDisposed(),Jw(this)},ae().prototype.slice=function(e,n){return this.throwIfDisposed(),At(this,e,n)},ae().prototype.softmax=function(e){return this.throwIfDisposed(),Mc(this,e)},ae().prototype.softplus=function(){return this.throwIfDisposed(),Ih(this)},ae().prototype.spaceToBatchND=function(e,n){return this.throwIfDisposed(),h_(this,e,n)},ae().prototype.split=function(e,n){return this.throwIfDisposed(),Yi(this,e,n)},ae().prototype.sqrt=function(){return this.throwIfDisposed(),ii(this)},ae().prototype.square=function(){return this.throwIfDisposed(),gn(this)},ae().prototype.squaredDifference=function(e){return this.throwIfDisposed(),n1(this,e)},ae().prototype.squeeze=function(e){return this.throwIfDisposed(),Ec(this,e)},ae().prototype.stack=function(e,n){this.throwIfDisposed();let t=e instanceof gt?[this,e]:[this,...e];return vr(t,n)},ae().prototype.step=function(e){return this.throwIfDisposed(),Dh(this,e)},ae().prototype.stridedSlice=function(e,n,t,r,i,a,s,o){return this.throwIfDisposed(),_A(this,e,n,t,r,i,a,s,o)},ae().prototype.sub=function(e){return this.throwIfDisposed(),Ee(this,e)},ae().prototype.sum=function(e,n){return this.throwIfDisposed(),Re(this,e,n)},ae().prototype.tan=function(){return this.throwIfDisposed(),vA(this)},ae().prototype.tanh=function(){return this.throwIfDisposed(),vh(this)},ae().prototype.tile=function(e){return this.throwIfDisposed(),va(this,e)},ae().prototype.toBool=function(){return this.throwIfDisposed(),xe(this,"bool")},ae().prototype.toFloat=function(){return this.throwIfDisposed(),xe(this,"float32")},ae().prototype.toInt=function(){return this.throwIfDisposed(),xe(this,"int32")},ae().prototype.topk=function(e,n){return this.throwIfDisposed(),wA(this,e,n)},ae().prototype.transpose=function(e){return this.throwIfDisposed(),kt(this,e)},ae().prototype.unique=function(e){return this.throwIfDisposed(),CA(this,e)},ae().prototype.unsortedSegmentSum=function(e,n){return this.throwIfDisposed(),l1(this,e,n)},ae().prototype.unstack=function(e){return this.throwIfDisposed(),tr(this,e)},ae().prototype.where=function(e,n){return this.throwIfDisposed(),Wr(e,this,n)},ae().prototype.zerosLike=function(){return this.throwIfDisposed(),Ft(this)};var Ac=class uie extends Error{constructor(n){super(n),Object.setPrototypeOf(this,uie.prototype)}},Eo=class die extends Error{constructor(n){super(n),Object.setPrototypeOf(this,die.prototype)}},X=class hie extends Error{constructor(n){super(n),Object.setPrototypeOf(this,hie.prototype)}},It=class pie extends Error{constructor(n){super(n),Object.setPrototypeOf(this,pie.prototype)}},A2e=class fie extends Error{constructor(n){super(n),Object.setPrototypeOf(this,fie.prototype)}},LG=class{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){let t=this.cache.keys().next().value;this.cache.delete(t)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){let t=this.cache.keys().next().value;this.cache.delete(t)}this.maxEntries=e}};function Nh(e,n){if(Array.isArray(e)){let t=[];for(let r=0;r<n;r++)t=t.concat(e);return t}{let t=new Array(n);return t.fill(e),t}}function Do(e,n){if(!e)throw new A2e(n)}function $G(e,n){let t=0;for(let r of e)r===n&&t++;return t}function Zi(e){return 1===e.length?e[0]:e}function sn(e){return Array.isArray(e)?e:[e]}function xl(e){let n=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==n[0]?n:"private"+n}function Oh(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(n,t)=>t.toUpperCase())}var vs={};function rT(e){if(null==e)return null;let n={};return n.className=e.getClassName(),n.config=e.getConfig(),n}function iT(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach(n=>iT(n));else{let n=Object.keys(e);for(let t of n){let r=e[t];null!=r&&"object"==typeof r&&(Array.isArray(r)||"ndarray"!==r.type||"number"!=typeof r.value?iT(r):e[t]=r.value)}}}function b_(e,n={},t={},r="object",i=!1){if("string"==typeof e){let s;if(e in t)s=t[e];else if(e in vs)s=vs[e];else if(s=n[e],null==s)throw new X(`Unknown ${r}: ${e}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}{let a=e;if(null==a.className||null==a.config)throw new X(`${r}: Improper config format: ${JSON.stringify(a)}.\n'className' and 'config' must set.`);let o,l,s=a.className;if(s in t?[o,l]=t[s]:s in vs?[o,l]=vs.className:s in n&&([o,l]=n[s]),null==o)throw new X(`Unknown ${r}: ${s}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=l){let c={};for(let p of Object.keys(vs))c[p]=vs[p];for(let p of Object.keys(t))c[p]=t[p];a.config.customObjects=c;let h=Object.assign({},vs);for(let p of Object.keys(t))vs[p]=t[p];iT(a.config);let d=l(o,a.config,t,i);return vs=Object.assign({},h),d}{let c=Object.assign({},vs);for(let h of Object.keys(t))vs[h]=t[h];let u=new o(a.config);return vs=Object.assign({},c),u}}}function g1(e,n){return-1*function T2e(e,n){return e<n?-1:e>n?1:0}(e,n)}function Tc(e){if(null==e)return e;let n=[];for(let t of e)-1===n.indexOf(t)&&n.push(t);return n}function N2e(e){if(null==e)throw new X(`Invalid value in obj: ${JSON.stringify(e)}`);for(let n in e)if(e.hasOwnProperty(n))return!1;return!0}function Fh(e,n,t){if(null!=t&&e.indexOf(t)<0)throw new X(`${t} is not a valid ${n}.  Valid values are ${e} or null/undefined.`)}function aT(e,n,t=0,r=1/0){return Do(t>=0),Do(r>=t),Array.isArray(e)&&e.length>=t&&e.length<=r&&e.every(i=>typeof i===n)}function qr(e,n){Array.isArray(e)?(w.assert(e.length>0,()=>`${n} is unexpectedly an empty array.`),e.forEach((t,r)=>qr(t,`element ${r+1} of ${n}`))):w.assert(Number.isInteger(e)&&e>0,()=>`Expected ${n} to be a positive integer, but got ${BG(e)}.`)}function BG(e){return null===e?"null":Array.isArray(e)?"["+e.map(n=>BG(n)).join(",")+"]":"string"==typeof e?`"${e}"`:`${e}`}function VG(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var F2e=0;function zG(){return F2e++}var y1={};function b1(e=""){return e in y1||(y1[e]=0),y1[e]+=1,e+y1[e].toString()}var R2e=["channelsFirst","channelsLast"],P2e=["nearest","bilinear"],L2e=["valid","same","causal"],$2e=["max","avg"],B2e=["sum","mul","concat","ave"],ng=new Map;function sr(e){Fh(R2e,"DataFormat",e)}function Ga(e){Fh(L2e,"PaddingMode",e)}function UG(e){Fh($2e,"PoolMode",e)}var __=[];function Rh(e,n){__.push(e);try{let t=n();return __.pop(),t}catch(t){throw __.pop(),t}}function WG(e){if(!GG(e))throw new Error("Not a valid tensor name: '"+e+"'");return function z2e(){return 0===__.length?"":__.join("/")+"/"}()+e}function jG(e){if(!GG(e))throw new Error("Not a valid tensor name: '"+e+"'");ng.has(e)||ng.set(e,0);let n=ng.get(e);if(ng.set(e,ng.get(e)+1),n>0){let t=`${e}_${n}`;return ng.set(t,1),t}return e}var sT,U2e=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function GG(e){return!!e.match(U2e)}function H2e(e){return e===parseInt(e.toString(),10)}function Nc(e,n,t){null==n&&(n=0),null==t&&(t=e.length);let r=1;for(let i=n;i<t;++i)r*=e[i];return r}function rg(e){if(0===e.length)return Number.NaN;let n=Number.POSITIVE_INFINITY;for(let t=0;t<e.length;t++){let r=e[t];r<n&&(n=r)}return n}function Oc(e){if(0===e.length)return Number.NaN;let n=Number.NEGATIVE_INFINITY;for(let t=0;t<e.length;t++){let r=e[t];r>n&&(n=r)}return n}function Gs(e,n){if(n<e)throw new X(`end (${n}) < begin (${e}) is forbidden.`);let t=[];for(let r=e;r<n;++r)t.push(r);return t}function Nr(){return null==sT&&(sT=nD().epsilon()),sT}function wl(e,n){return xe(e,n)}function v_(e,n=-1){let t=e.shape.slice();return n<0&&(n=t.length+n+1),t.splice(n,0,1),H(e,t)}function Ph(e,n,t){return G(()=>{switch(e.rank){case 1:return f_(e,n,t);case 2:return e1(e,[n,0],[t,e.shape[1]]);case 3:return Zm(e,[n,0,0],[t,e.shape[1],e.shape[2]]);case 4:return Qm(e,[n,0,0,0],[t,e.shape[1],e.shape[2],e.shape[3]]);case 5:return At(e,[n,0,0,0,0],[t,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return At(e,[n,0,0,0,0,0],[t,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new X(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}})}function oT(e,n,t){return G(()=>{switch(e.rank){case 1:return f_(e,n,t);case 2:return e1(e,[0,n],[e.shape[0],t]);case 3:return Zm(e,[0,0,n],[e.shape[0],e.shape[1],t]);case 4:return Qm(e,[0,0,0,n],[e.shape[0],e.shape[1],e.shape[2],t]);default:throw new X(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function _1(e,n,t,r){return G(()=>{switch(e.rank){case 1:return f_(e,n,t);case 2:switch(r){case 1:return Ph(e,n,t);case 2:return oT(e,n,t);default:throw new X(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Ph(e,n,t);case 2:return Zm(e,[0,n,0],[e.shape[0],t,e.shape[2]]);case 3:return oT(e,n,t);default:throw new X(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Ph(e,n,t);case 2:return Qm(e,[0,n,0,0],[e.shape[0],t,e.shape[2],e.shape[3]]);case 3:return Qm(e,[0,0,n,0],[e.shape[0],e.shape[1],t,e.shape[3]]);case 4:return oT(e,n,t);default:throw new X(`The axis is not within the rank of the tensor ${r}`)}default:throw new X(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function lT(e,n=-1){let t;return n<0&&(t=e[0].rank,n=0!==t?t:0),n===e[0].rank&&(n=-1),fn(e,n)}function qG(e,n){switch(e.rank){case 1:return LD([e,n]);case 2:return $D([e,n],0);case 3:return BD([e,n],0);case 4:return VD([e,n],0);default:throw new X(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function cT(e,n){if(Array.isArray(n)||(n=[n]),e.rank!==n.length)throw new X(`The length of input n (${n.length}) does not match the number of dimensions in input x (${e.rank})`);return va(e,n)}function v1(e,n=0,t=1,r,i){return qw(e,n,t,r,i)}function Ao(e,n,t,r){if(e.rank<2||n.rank<2)throw new It(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${n.shape}`);if(n.rank>=3&&e.shape.slice(-1)[0]!==n.shape.slice(-2)[0])throw new It(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${n.shape}`);if(2===e.rank&&2===n.rank)return eg.matMul({a:e,b:n,transposeA:!1,transposeB:!1,bias:r?uT(e.rank,r,"channelsLast"):null,activation:t});{let i=e.shape.slice(),a=i.pop();e=H(e,[-1,a]);let s=n.shape.slice(),o=s.pop(),l=s.pop(),c=[...s,o],u=Array.from({length:n.rank},(d,p)=>0===p?n.rank-2:p<=n.rank-2?p-1:p);n=H(kt(n,u),[l,-1]);let h=[...i,...c];return H(eg.matMul({a:e,b:n,transposeA:!1,transposeB:!1,bias:r?uT(e.rank,r,"channelsLast"):null,activation:t}),h)}}function KG(e,n,t){return G(()=>(n=Array.isArray(n)?Qt(n,"int32"):xe(n,"int32"),Gm(e,n,t)))}function x_(e){return U(e,e)}function uT(e,n,t){let r=n.shape;if(1!==n.rank&&n.rank!==e)throw new X(`Unexpected bias dimensions: ${n.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===t)return H(n,1===r.length?[1,r[0],1,1,1]:[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===t)return H(n,1===r.length?[1,1,1,1,r[0]]:[1].concat(r))}else if(4===e){if("channelsFirst"===t)return H(n,1===r.length?[1,r[0],1,1]:[1,r[2],r[0],r[1]]);if("channelsLast"===t)return H(n,1===r.length?[1,1,1,r[0]]:[1].concat(r))}else if(3===e){if("channelsFirst"===t)return H(n,1===r.length?[1,r[0],1]:[1,r[1],r[0]]);if("channelsLast"===t)return H(n,1===r.length?[1,1,r[0]]:[1].concat(r))}else if(e<3)return n;throw new X(`Unsupported input rank by biasAdd: ${n.rank}`)}function Ks(e,n,t){return G(()=>(null==t&&(t="channelsLast"),sr(t),se(e,uT(e.rank,n,t))))}function XG(e,n,t,r){return G(()=>EA(e,n,t,r))}function w_(e,n,t=!1){return t?e():n()}var Y2e=["fanIn","fanOut","fanAvg"],Z2e=["normal","uniform","truncatedNormal"],xs=class extends fe.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},dT=class extends xs{apply(e,n){return Kn(e,n)}};dT.className="Zeros",fe.registerClass(dT);var x1=class extends xs{apply(e,n){return Xi(e,n)}};x1.className="Ones",fe.registerClass(x1);var hT=class extends xs{constructor(e){if(super(),"object"!=typeof e)throw new X(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new X(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return G(()=>U(He(this.value),Xi(e,n)))}getConfig(){return{value:this.value}}};hT.className="Constant",fe.registerClass(hT);var pT=class extends xs{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Ic(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}};pT.className="RandomUniform",fe.registerClass(pT);var fT=class extends xs{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if("float32"!==(n=n||"float32")&&"int32"!==n)throw new It(`randomNormal does not support dType ${n}.`);return v1(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};fT.className="RandomNormal",fe.registerClass(fT);var mT=class extends xs{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if("float32"!==(n=n||"float32")&&"int32"!==n)throw new It(`truncatedNormal does not support dType ${n}.`);return o1(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};mT.className="TruncatedNormal",fe.registerClass(mT);var gT=class extends xs{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,n){return G(()=>{if(2!==e.length||e[0]!==e[1])throw new X("Identity matrix initializer can only be used for 2D square matrices.");return U(this.gain,zw(e[0]))})}getConfig(){return{gain:this.gain}}};gT.className="Identity",fe.registerClass(gT);var Qi=class extends xs{constructor(e){if(super(),e.scale<0)throw new X(`scale must be a positive float. Got: ${e.scale}`);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,function Q2e(e){Fh(Y2e,"FanMode",e)}(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,function J2e(e){Fh(Z2e,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,n){let t=function eDe(e,n="channelsLast"){let t,r;if(sr(n),2===e.length)t=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===n){let i=Nc(e,2);t=e[1]*i,r=e[0]*i}else if("channelsLast"===n){let i=Nc(e,0,e.length-2);t=e[e.length-2]*i,r=e[e.length-1]*i}}else{let i=Nc(e);t=Math.sqrt(i),r=Math.sqrt(i)}return[t,r]}(e),r=t[0],i=t[1],a=this.scale;if(a/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,i):Math.max(1,(r+i)/2),"normal"===this.distribution){let s=Math.sqrt(a);if("float32"!==(n=n||"float32")&&"int32"!==n)throw new It(`${this.getClassName()} does not support dType ${n}.`);return o1(e,0,s,n,this.seed)}{let s=Math.sqrt(3*a);return Ic(e,-s,s,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}};Qi.className="VarianceScaling",fe.registerClass(Qi);var w1=class extends Qi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Qi.className}};w1.className="GlorotUniform",fe.registerClass(w1);var C1=class extends Qi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Qi.className}};C1.className="GlorotNormal",fe.registerClass(C1);var k1=class extends Qi{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Qi.className}};k1.className="HeNormal",fe.registerClass(k1);var S1=class extends Qi{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Qi.className}};S1.className="HeUniform",fe.registerClass(S1);var I1=class extends Qi{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return Qi.className}};I1.className="LeCunNormal",fe.registerClass(I1);var M1=class extends Qi{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return Qi.className}};M1.className="LeCunUniform",fe.registerClass(M1);var yT=class extends xs{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return G(()=>{if(e.length<2)throw new It("Shape must be at least 2D.");if("int32"!==n&&"float32"!==n&&void 0!==n)throw new TypeError(`Unsupported data type ${n}.`);let t=w.sizeFromShape(e.slice(0,-1)),r=e[e.length-1],i=t*r;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);let s=v1([Math.max(r,t),Math.min(r,t)],0,1,n,this.seed),o=PA.qr(s,!1),l=o[0],c=o[1].flatten().stridedSlice([0],[Math.min(r,t)*Math.min(r,t)],[Math.min(r,t)+1]);return l=U(l,c.sign()),t<r&&(l=l.transpose()),U(He(this.gain),l.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}};yT.className="Orthogonal",fe.registerClass(yT);var YG={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function ZG(e,n={}){return b_(e,fe.SerializationMap.getMap().classNameMap,n,"initializer")}function Xn(e){return rT(e)}function Bn(e){if("string"==typeof e){let n=e in YG?YG[e]:e;if("GlorotNormal"===n)return new C1;if("GlorotUniform"===n)return new w1;if("HeNormal"===n)return new k1;if("HeUniform"===n)return new S1;if("LeCunNormal"===n)return new I1;if("LeCunUniform"===n)return new M1;{let t={};return t.className=n,t.config={},ZG(t)}}return e instanceof xs?e:ZG(e)}function bT(e){return Array.isArray(e)&&Array.isArray(e[0])}function E1(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function Qe(e){let n;if(Array.isArray(e)){if(1!==e.length)throw new X(`Expected Tensor length to be 1; got ${e.length}`);n=e[0]}else n=e;return n}function Vt(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new X(`Expected exactly 1 Shape; got ${e.length}`)}return e}function D1(e){let n=0;for(let t of e)n+=0===t.shape.length?1:t.shape.reduce((r,i)=>r*i);return n}var QG="Variable",JG=class{constructor(e,n="float32",t=QG,r=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=zG(),this.originalName=WG(t=t??QG),this.name=jG(this.originalName),this.trainable_=r,this.constraint=i,this.val=kA(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function tDe(e,n){if(e.shape.toString()!==n.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(n.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}};function _T(e){return e.map(n=>n.read())}function vT(e){e.forEach(n=>{n[0].write(n[1])})}var xr=class{constructor(e){this.dtype=e.dtype,this.shape=e.shape,this.ndim=null!=e.shape?e.shape.length:e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}},Xs=class{constructor(e,n,t,r,i,a,s){this.dtype=e,this.shape=n,this.sourceLayer=t,this.inputs=r,this.callArgs=i,this.outputTensorIndex=s,this.id=zG(),null!=a&&(this.originalName=WG(a),this.name=jG(this.originalName)),this.rank=n.length}},nDe=0,A1=class{constructor(e,n){this.callArgs=n,this.id=nDe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(let t of e.inboundLayers)t?.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){let e=[];for(let n of this.inboundLayers)e.push(null!=n?n.name:null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},rDe=0,Mt=class extends fe.Serializable{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=rDe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){let t=this.getClassName();n=xl(t)+"_"+b1(t)}if(this.name=n,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let i=null;null!=e.batchSize&&(i=e.batchSize),t=[i].concat(e.inputShape)}this.batchInputShape=t;let r=e.dtype;null==r&&(r=e.inputDType),null==r&&(r="float32"),this.dtype=r}this.initialWeights=null!=e.weights?e.weights:null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(0===this.inboundNodes.length)throw new Eo(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new X(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Zi(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Zi(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Ac(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new Ac(`Layer ${this.name} is not connected, no input to return.`);return Zi(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new Ac(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Ac(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Zi(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){let n=sn(e);if(null==this.inputSpec||0===this.inputSpec.length)return;let t=sn(this.inputSpec);if(n.length!==t.length)throw new X(`Layer ${this.name} expects ${t.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let r=0;r<n.length;r++){let i=n[r],a=t[r];if(null==a)continue;let s=i.rank;if(null!=a.ndim&&s!==a.ndim)throw new X(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${s}`);if(null!=a.maxNDim&&s>a.maxNDim)throw new X(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${s}`);if(null!=a.minNDim&&s<a.minNDim)throw new X(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${s}.`);if(null!=a.dtype&&i.dtype!==a.dtype)throw new X(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${i.dtype}.`);if(a.axes){let o=i.shape;for(let l in a.axes){let c=Number(l),u=a.axes[l];if(null!=u&&-1===[u,null].indexOf(c>=0?o[c]:o[o.length+c]))throw new X(`Input ${r} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${u} but got shape ${o}.`)}}if(null!=a.shape)for(let o=0;o<a.shape.length;++o){let l=a.shape[o],c=i.shape[o];if(null!=l&&null!=c&&l!==c)throw new X(`Input ${r} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){null!=this._callHook&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();let t=sn(e),r=function sDe(e){let n=!0;for(let t of sn(e))if(!(t instanceof Xs)){n=!1;break}return n}(e),i=function oDe(e){let n=!0;for(let t of sn(e))if(t instanceof Xs){n=!1;break}return n}(e);if(r===i)throw new X("Arguments to apply() must be all SymbolicTensors or all Tensors");return Rh(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);let a=[];for(let s of sn(e))a.push(s.shape);this.build(Zi(a)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let a=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,a);let s=sn(a),o=[];for(let l of s)-1!==t.indexOf(l)&&(l=l.clone()),o.push(l);if(a=Zi(o),null!=this.activityRegularizer)throw new It("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}{let o,a=function iDe(e){e=sn(e);let n=[];for(let t of e)n.push(t.shape);return Zi(n)}(e),s=this.computeOutputShape(a),l="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?a[0]:a),o=null!=s&&s.length>0&&Array.isArray(s[0])?s.map((c,u)=>new Xs(l,c,this,sn(e),n,this.name,u)):new Xs(l,s,this,sn(e),n,this.name),this.addInboundNode(e,o,null,null,a,s,n),this._refCount++,null!=this.activityRegularizer)throw new It("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}})}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((t,r)=>{null!=t&&null!=e[r]&&e[r]!==t&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Ac(`The layer ${this.name} has never been called and thus has no defined output shape.`);let e=[];for(let n of this.inboundNodes){let t=JSON.stringify(n.outputShapes);-1===e.indexOf(t)&&e.push(t)}if(1===e.length){let n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&1===n.length?n[0]:n}throw new Ac(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Eo(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return D1(this.weights)}build(e){this.built=!0}getWeights(e=!1){return _T(e?this.trainableWeights:this.weights)}setWeights(e){G(()=>{let n=this.weights;if(n.length!==e.length)throw new X(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(0===n.length)return;let t=[],r=_T(n);for(let i=0;i<r.length;++i){let a=r[i],s=n[i],o=e[i];if(!w.arraysEqual(a.shape,o.shape))throw new X(`Layer weight shape ${a.shape} not compatible with provided weight shape ${o.shape}`);t.push([s,o])}vT(t)})}addWeight(e,n,t,r,i,a,s,o){if(-1!==this._addedWeightNames.indexOf(e))throw new X(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==t&&(t="float32"),this.fastWeightInitDuringBuild&&(r=null!=o?o():Bn("zeros"));let l=r.apply(n,t),c=new JG(l,t,e,a,s);return l.dispose(),null!=i&&this.addLoss(()=>i.apply(c.read())),null==a&&(a=!0),a?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=sn(e),null!=this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(null!=n){if(!Array.isArray(n))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);n.forEach(t=>{if(null!=t)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)})}return null}return n}setMaskMetadata(e,n,t){if(!this.supportsMasking)return;let r=this.computeMask(e,t),i=sn(n),a=sn(r);if(i.length!==a.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let s=0;s<i.length;s++)i[s].kerasMask=a[s]}addInboundNode(e,n,t,r,i,a,s=null){let o=sn(e);n=sn(n),t=sn(t),r=sn(r),i=E1(i),a=E1(a);let l=[],c=[],u=[];for(let h of o)l.push(h.sourceLayer),c.push(h.nodeIndex),u.push(h.tensorIndex);new A1({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:u,inputTensors:o,outputTensors:n,inputMasks:t,outputMasks:r,inputShapes:i,outputShapes:a},s);for(let h=0;h<n.length;h++)n[h].sourceLayer=this,n[h].nodeIndex=this.inboundNodes.length-1,n[h].tensorIndex=h}getConfig(){let e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function e7(e,n,t){if((null==n||null!=t&&t>0)&&(n=e.sourceLayer,t=e.nodeIndex),0===n.inboundNodes.length)return[e];{let r=n.inboundNodes[t];if(0===r.inboundLayers.length)return r.inputTensors;{let i=[];for(let a=0;a<r.inboundLayers.length;a++){let c=e7(r.inputTensors[a],r.inboundLayers[a],r.nodeIndices[a]);for(let u of c)-1===i.indexOf(u)&&i.push(u)}return i}}}var ig=class extends Mt{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:b1("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new X("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(null==n){if(null==e.inputShape)throw new X("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new X("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let t=e.dtype||"float32";this.batchInputShape=n,this.dtype=t,this.inputSpec=[{shape:n}];let r=new Xs(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new A1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new X(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}};function t7(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new X("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let n=e.batchShape;null!=e.shape&&null==n&&(n=[null].concat(e.shape));let t=e.dtype;return null==t&&(t="float32"),new ig({batchInputShape:n,name:e.name,dtype:t,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}ig.className="InputLayer",fe.registerClass(ig);var ag=class mie{constructor(n){if(this.id2Value={},this.id2Mask={},this.name2Id={},n instanceof mie)for(let t in n.id2Value)this.id2Value[t]=n.id2Value[t],t in n.id2Mask&&(this.id2Mask[t]=n.id2Mask[t]);else{if(null==n)return;for(let t of n)this.add(t.key,t.value)}}add(n,t,r){if(null!=this.id2Value[n.id])throw new X(`Duplicate key: name=${n.name}, id=${n.id}`);return this.id2Value[n.id]=function lDe(e,n){if(null==e.dtype||e.dtype===n.dtype)return n;try{return xe(n,e.dtype)}catch{throw new X(`The dtype of the feed (${n.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}(n,t),this.name2Id[n.name]=n.id,null!=r&&(this.id2Mask[n.id]=r),this}addFeed(n){this.add(n.key,n.value)}hasKey(n){return null!=this.id2Value[n.id]}names(){return Object.keys(this.name2Id)}getValue(n){if(n instanceof Xs){if(null==this.id2Value[n.id])throw new X(`Nonexistent key: ${n.name}`);return this.id2Value[n.id]}{let t=this.name2Id[n];if(null==t)throw new X(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Value[t]}}getMask(n){if(n instanceof Xs){if(null==this.id2Value[n.id])throw new X(`Nonexistent key: ${n.name}`);return this.id2Mask[n.id]}{let t=this.name2Id[n];if(null==t)throw new X(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&at(this.id2Mask)}},T1=new LG,N1=new LG;function C_(e,n,t,r){let i=null!=t&&t.training,a=Array.isArray(e),s=a?e:[e],o=s.map(f=>f.name),l=[],c=n.names();for(let f of o)-1!==c.indexOf(f)?l.push(n.getValue(f)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);let d,u=o.join(",")+"|"+n.names().sort().join(","),h=T1.get(u);if(null==h){let f=function uDe(e,n){w.assert(null!=e&&e.length>0,()=>"Expected at least one fetch, got none");let t=[],r={};if(1===e.length){let i=n7(e[0],n);t=i.sorted,r=i.recipientMap}else{let i=new Set;for(let a of e){let{sorted:s,recipientMap:o}=n7(a,n);for(let l of s)i.has(l.name)||(t.push(l),i.add(l.name));for(let l in o)null==r[l]&&(r[l]=new Set),o[l].forEach(c=>r[l].add(c))}}return{sorted:t,recipientCounts:dDe(r)}}(s,n);h=f.sorted,d=f.recipientCounts,T1.put(u,h),N1.put(u,d)}d={},i||Object.assign(d,N1.get(u));let p=new ag(n);for(let f=0;f<h.length;++f){if(null!=r){let N=Tw().numTensors;N>r.maxNumTensors&&(r.maxNumTensors=N),N<r.minNumTensors&&(r.minNumTensors=N)}let m=h[f],g=m.sourceLayer;if(g instanceof ig)continue;let y=[],b=[],_=[],v=!1;for(let N of m.inputs){let F=p.getValue(N),O=p.getMask(N);y.push(F),b.push(O),null!=O&&(v=!0),i||(d[N.name]--,0===d[N.name]&&!n.hasKey(N)&&-1===o.indexOf(N.name)&&!F.isDisposed&&!0!==N.sourceLayer.stateful&&_.push(F))}v&&((t=t||{}).mask=b[0]);let x=sn(g.apply(y,t)),S=null;g.supportsMasking&&(S=g.computeMask(y,b));let M=hDe(m),D=Array.isArray(M)?M:[M];for(let N=0;N<D.length;++N){p.hasKey(D[N])||p.add(D[N],x[N],Array.isArray(S)?S[0]:S);let F=o.indexOf(D[N].name);-1!==F&&(l[F]=x[N])}i||at(_)}return p.disposeMasks(),a?l:l[0]}function dDe(e){let n={};for(let t in e)n[t]=e[t].size;return n}function n7(e,n){let t=new Set,r=[],i={};for(let o of n.names())t.add(o);let a=[],s=[];for(a.push(e);a.length>0;){let o=a[a.length-1];if(t.has(o.name)){a.pop();continue}let l=s[s.length-1]===a.length-1;if(0===o.inputs.length||l)a.pop(),r.push(o),t.add(o.name),l&&s.pop();else{s.push(a.length-1);for(let c of o.inputs)null==i[c.name]&&(i[c.name]=new Set),i[c.name].add(o.name),!t.has(c.name)&&a.push(c)}}return{sorted:r,recipientMap:i}}function hDe(e){let n;if(1===e.sourceLayer.inboundNodes.length)n=e.sourceLayer.output;else{let t=null;for(let r=0;r<e.sourceLayer.inboundNodes.length;++r)for(let i of e.sourceLayer.inboundNodes[r].outputTensors)if(i.id===e.id){t=r;break}n=e.sourceLayer.getOutputAt(t)}return n}Q().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,function cDe(e){T1?.setMaxEntries(e),N1?.setMaxEntries(e)});var r7={};function xT(e,n){return G(()=>ii(Re(U(e,e),n,!0)))}it(r7,{maxNorm:()=>fDe,minMaxNorm:()=>yDe,nonNeg:()=>gDe,unitNorm:()=>mDe});var k_=class extends fe.Serializable{getConfig(){return{}}},wT=class extends k_{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return G(()=>{let n=xT(e,this.axis),t=gi(n,0,this.maxValue);return U(e,Te(t,se(Nr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}};wT.className="MaxNorm",fe.registerClass(wT);var CT=class extends k_{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return G(()=>Te(e,se(Nr(),xT(e,this.axis))))}getConfig(){return{axis:this.axis}}};CT.className="UnitNorm",fe.registerClass(CT);var kT=class extends k_{apply(e){return an(e)}};kT.className="NonNeg",fe.registerClass(kT);var ST=class extends k_{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return G(()=>{let n=xT(e,this.axis),t=se(U(this.rate,gi(n,this.minValue,this.maxValue)),U(1-this.rate,n));return U(e,Te(t,se(Nr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}};ST.className="MinMaxNorm",fe.registerClass(ST);var i7={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Or(e){return rT(e)}function a7(e,n={}){return b_(e,fe.SerializationMap.getMap().classNameMap,n,"constraint")}function Fr(e){return null==e?null:"string"==typeof e?a7({className:e in i7?i7[e]:e,config:{}}):e instanceof k_?e:a7(e)}function fDe(e){return new wT(e)}function mDe(e){return new CT(e)}function gDe(){return new kT}function yDe(e){return new ST(e)}var s7={};function bDe(){return new dT}function _De(){return new x1}function vDe(e){return new hT(e)}function xDe(e){return new pT(e)}function wDe(e){return new fT(e)}function CDe(e){return new mT(e)}function kDe(e){return new gT(e)}function SDe(e){return new Qi(e)}function IDe(e){return new w1(e)}function MDe(e){return new C1(e)}function EDe(e){return new k1(e)}function DDe(e){return new S1(e)}function ADe(e){return new I1(e)}function TDe(e){return new M1(e)}function NDe(e){return new yT(e)}it(s7,{constant:()=>vDe,glorotNormal:()=>MDe,glorotUniform:()=>IDe,heNormal:()=>EDe,heUniform:()=>DDe,identity:()=>kDe,leCunNormal:()=>ADe,leCunUniform:()=>TDe,ones:()=>_De,orthogonal:()=>NDe,randomNormal:()=>wDe,randomUniform:()=>xDe,truncatedNormal:()=>CDe,varianceScaling:()=>SDe,zeros:()=>bDe});var c7,o7={};function Fc(e){return IT.apply(this,arguments)}function IT(){return IT=R(function*(e){if(null==e)return;let n=[],t=[],r=[];for(let i in e){let a=e[i];if("number"!=typeof a){let s=a;n.push(s.data()),t.push(i),r.push(s)}}if(n.length>0){let i=yield Promise.all(n);for(let a=0;a<i.length;++a)e[t[a]]=i[a][0];at(r)}}),IT.apply(this,arguments)}function l7(e){if(null!=e)for(let n in e){let t=e[n];"number"!=typeof t&&t.dispose()}}it(o7,{Layer:()=>Mt,RNN:()=>kl,RNNCell:()=>D_,activation:()=>lTe,add:()=>yTe,alphaDropout:()=>eNe,average:()=>bTe,averagePooling1d:()=>QN,averagePooling2d:()=>JN,averagePooling3d:()=>eO,avgPool1d:()=>MTe,avgPool2d:()=>DTe,avgPool3d:()=>TTe,avgPooling1d:()=>ETe,avgPooling2d:()=>ATe,avgPooling3d:()=>NTe,batchNormalization:()=>kTe,bidirectional:()=>GTe,categoryEncoding:()=>aNe,centerCrop:()=>rNe,concatenate:()=>_Te,conv1d:()=>JAe,conv2d:()=>eTe,conv2dTranspose:()=>tTe,conv3d:()=>nTe,conv3dTranspose:()=>rTe,convLstm2d:()=>UTe,convLstm2dCell:()=>HTe,cropping2D:()=>aTe,dense:()=>cTe,depthwiseConv2d:()=>oTe,dot:()=>CTe,dropout:()=>uTe,elu:()=>qAe,embedding:()=>gTe,flatten:()=>hTe,gaussianDropout:()=>JTe,gaussianNoise:()=>QTe,globalAveragePooling1d:()=>OTe,globalAveragePooling2d:()=>FTe,globalMaxPool1d:()=>KTe,globalMaxPool2d:()=>XTe,globalMaxPooling1d:()=>p9,globalMaxPooling2d:()=>f9,gru:()=>PTe,gruCell:()=>LTe,input:()=>N7,inputLayer:()=>GAe,layerNormalization:()=>STe,leakyReLU:()=>XAe,lstm:()=>$Te,lstmCell:()=>BTe,masking:()=>tNe,maxPool1d:()=>YTe,maxPool2d:()=>ZTe,maxPooling1d:()=>m9,maxPooling2d:()=>g9,maxPooling3d:()=>RTe,maximum:()=>vTe,minimum:()=>xTe,multiply:()=>wTe,permute:()=>mTe,prelu:()=>YAe,randomWidth:()=>sNe,reLU:()=>KAe,repeatVector:()=>pTe,rescaling:()=>nNe,reshape:()=>fTe,resizing:()=>iNe,rnn:()=>WTe,separableConv2d:()=>iTe,simpleRNN:()=>VTe,simpleRNNCell:()=>zTe,softmax:()=>ZAe,spatialDropout1d:()=>dTe,stackedRNNCells:()=>jTe,thresholdedReLU:()=>QAe,timeDistributed:()=>qTe,upSampling2d:()=>sTe,zeroPadding2d:()=>ITe}),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(c7||(c7={}));var sg=class{constructor(){this.validationData=null}setParams(e){this.params=e}onEpochBegin(e,n){return R(function*(){})()}onEpochEnd(e,n){return R(function*(){})()}onBatchBegin(e,n){return R(function*(){})()}onBatchEnd(e,n){return R(function*(){})()}onTrainBegin(e){return R(function*(){})()}onTrainEnd(e){return R(function*(){})()}setModel(e){}},u7=class{constructor(e,n=10){null==e&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(let n of this.callbacks)n.setParams(e)}setModel(e){for(let n of this.callbacks)n.setModel(e)}onEpochBegin(e,n){var t=this;return R(function*(){null==n&&(n={});for(let r of t.callbacks)yield r.onEpochBegin(e,n)})()}onEpochEnd(e,n){var t=this;return R(function*(){null==n&&(n={});for(let r of t.callbacks)yield r.onEpochEnd(e,n)})()}onBatchBegin(e,n){var t=this;return R(function*(){null==n&&(n={});for(let r of t.callbacks)yield r.onBatchBegin(e,n)})()}onBatchEnd(e,n){var t=this;return R(function*(){null==n&&(n={});for(let r of t.callbacks)yield r.onBatchEnd(e,n)})()}onTrainBegin(e){var n=this;return R(function*(){null==e&&(e={});for(let t of n.callbacks)yield t.onTrainBegin(e)})()}onTrainEnd(e){var n=this;return R(function*(){null==e&&(e={});for(let t of n.callbacks)yield t.onTrainEnd(e)})()}},FDe=class extends sg{constructor(){super()}onEpochBegin(e){var n=this;return R(function*(){n.seen=0,n.totals={}})()}onBatchEnd(e,n){var t=this;return R(function*(){null==n&&(n={});let r=null==n.size?0:n.size;t.seen+=r;for(let i in n){let a=n[i];if("number"==typeof a)t.totals.hasOwnProperty(i)||(t.totals[i]=0),t.totals[i]=t.totals[i]+a*r;else{let s;i in t.totals?s=t.totals[i]:t.totals[i]=0;let o=G(()=>se(t.totals[i],U(a,r)));t.totals[i]=o,s?.dispose()}}})()}onEpochEnd(e,n){var t=this;return R(function*(){if(null!=n)for(let r of t.params.metrics)null!=t.totals[r]&&("number"==typeof t.totals[r]?n[r]=t.totals[r]/t.seen:G(()=>{let i=U(Te(1,t.seen),t.totals[r]);n[r]=i,t.totals[r].dispose(),Ar(n[r])}))})()}},d7=class extends sg{onTrainBegin(e){var n=this;return R(function*(){n.epoch=[],n.history={}})()}onEpochEnd(e,n){var t=this;return R(function*(){null==n&&(n={}),t.epoch.push(e);for(let r in n)null==t.history[r]&&(t.history[r]=[]),t.history[r].push(n[r])})()}syncData(){var e=this;return R(function*(){let n=[],t=[],r=[];for(let a in e.history){let s=e.history[a];for(let o=0;o<s.length;++o)"number"!=typeof s[o]&&(n.push(s[o].data()),t.push(a),r.push(o))}let i=yield Promise.all(n);for(let a=0;a<i.length;++a)e.history[t[a]][r[a]].dispose(),e.history[t[a]][r[a]]=i[a][0]})()}},h7=class extends sg{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||eT,this.yieldEvery=n||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");w.isNumber(this.yieldEvery)&&(this.maybeWait=function O2e(e,n,t){let i,r=null!=t?t():w.now();return(...a)=>{let s=null!=t?t():w.now();return s-r<n||(r=s,i=e(...a)),i}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}maybeWait(e,n,t){var r=this;return R(function*(){let i=[];null!=r.yield&&(yield Fc(t),i.push(r.yield(e,n,t))),i.push(r.nextFrameFunc()),yield Promise.all(i)})()}onEpochBegin(e,n){var t=this;return R(function*(){t.currentEpoch=e,null!=t.epochBegin&&(yield Fc(n),yield t.epochBegin(e,n))})()}onEpochEnd(e,n){var t=this;return R(function*(){let r=[];null!=t.epochEnd&&(yield Fc(n),r.push(t.epochEnd(e,n))),"epoch"===t.yieldEvery&&r.push(t.nextFrameFunc()),yield Promise.all(r)})()}onBatchBegin(e,n){var t=this;return R(function*(){null!=t.batchBegin&&(yield Fc(n),yield t.batchBegin(e,n))})()}onBatchEnd(e,n){var t=this;return R(function*(){let r=[];null!=t.batchEnd&&(yield Fc(n),r.push(t.batchEnd(e,n))),"batch"===t.yieldEvery?r.push(t.nextFrameFunc()):w.isNumber(t.yieldEvery)&&r.push(t.maybeWait(t.currentEpoch,e,n)),yield Promise.all(r)})()}onTrainBegin(e){var n=this;return R(function*(){null!=n.trainBegin&&(yield Fc(e),yield n.trainBegin(e))})()}onTrainEnd(e){var n=this;return R(function*(){null!=n.trainEnd&&(yield Fc(e),yield n.trainEnd(e))})()}};function p7(e,n){return null==e&&(e={}),e instanceof sg?[e]:Array.isArray(e)&&e[0]instanceof sg?e:sn(e).map(t=>new h7(t,n))}var MT=class Ho{constructor(){}static registerCallbackConstructor(n,t){w.assert(n>=0&&Number.isInteger(n),()=>`Verbosity level is expected to be an integer >= 0, but got ${n}`),Ho.checkForDuplicate(t),null==Ho.constructors[n]&&(Ho.constructors[n]=[]),Ho.constructors[n].push(t)}static checkForDuplicate(n){for(let t in Ho.constructors)Ho.constructors[+t].forEach(r=>{if(r===n)throw new X("Duplicate callback constructor.")})}static clear(){Ho.constructors={}}static createCallbacks(n){let t=[];for(let r in Ho.constructors){let i=+r;n>=i&&t.push(...Ho.constructors[i])}return t.map(r=>new r)}};function f7(e,n,t,r,i,a,s,o,l){let c=new d7,u=[new FDe,...MT.createCallbacks(n)];null!=e&&u.push(...e),u.push(c);let h=new u7(u);return h.setParams({epochs:t,initialEpoch:r,samples:i,steps:a,batchSize:s,verbose:n,doValidation:o,metrics:l}),{callbackList:h,history:c}}function Ys(e,n={},t=!1){return b_(e,fe.SerializationMap.getMap().classNameMap,n,"layer",t)}function O1(e,n){return G(()=>{"float32"!==e.dtype&&(e=xe(e,"float32"));let t=Re(x_(e),n,!0),r=ba(t.shape,Nr()),i=ii(ko(t,r));return Te(e,i)})}function Lh(e,n){return G(()=>qn(x_(Ee(n,e)),-1))}function F1(e,n){return G(()=>qn(br(Ee(n,e)),-1))}function og(e,n){return G(()=>{let t=Ee(e,n),r=gi(br(e),Nr(),Number.MAX_VALUE),i=br(Te(t,r));return U(100,qn(i,-1))})}function S_(e,n,t=!1){return G(()=>{if(t)n=Mc(n);else{let r=Re(n,n.shape.length-1,!0);n=Te(n,r)}return n=gi(n,Nr(),1-Nr()),Dn(Re(U(xe(e,"float32"),xa(n)),n.shape.length-1))})}function R1(e,n,t=!1){return G(()=>{let r=xe(jm(function j2e(e){let n=[Nc(e.shape)];return H(e,n)}(e)),"int32"),i=(n=gi(n,Nr(),1-Nr())).shape;return S_(H(Km(r,i[i.length-1]),i),n,t)})}function P1(e,n){return G(()=>{let t;return t=gi(n,Nr(),1-Nr()),t=xa(Te(t,Ee(1,t))),qn(function VDe(e,n){if(!w.arraysEqual(e.shape,n.shape))throw new X(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(n.shape)}`);return G(()=>{let t=an(n),r=Dn(br(n));return se(Ee(t,U(n,e)),l_(yi(r)))})}(e,t),-1)})}function ET(e,n){return G(()=>{let t=O1(e,-1),r=O1(n,-1),i=U(t,r);return Dn(Re(i,-1))})}MT.constructors={};var L1={meanSquaredError:Lh,meanAbsoluteError:F1,meanAbsolutePercentageError:og,meanSquaredLogarithmicError:function RDe(e,n){return G(()=>{let t=gi(n,Nr(),Number.MAX_VALUE),r=xa(se(1,t)),i=gi(e,Nr(),Number.MAX_VALUE),a=xa(se(1,i));return qn(x_(Ee(r,a)),-1)})},squaredHinge:function PDe(e,n){return G(()=>{let t=ko(0,Ee(1,U(e,n)));return qn(x_(t),-1)})},hinge:function LDe(e,n){return G(()=>{let t=ko(0,Ee(1,U(e,n)));return qn(t,-1)})},categoricalHinge:function $De(e,n){return G(()=>{let t=Re(U(e,n),-1),r=Ha(U(Ee(1,e),n),-1);return ko(0,se(1,Ee(r,t)))})},logcosh:function BDe(e,n){return G(()=>{let t=Math.log(2),r=Ee(n,e),i=Ee(se(r,Ih(U(-2,r))),t);return qn(i,-1)})},categoricalCrossentropy:S_,sparseCategoricalCrossentropy:R1,binaryCrossentropy:P1,kullbackLeiblerDivergence:function zDe(e,n){return G(()=>{let t=gi(e,Nr(),1),r=gi(n,Nr(),1);return Re(U(e,xa(Te(t,r))),-1)})},poisson:function UDe(e,n){return G(()=>{let t=xa(se(Nr(),n));return qn(Ee(n,U(e,t)),-1)})},cosineProximity:ET};function DT(e){if("string"==typeof e){if(e in L1)return L1[e];let n=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(n=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new X(n)}return e}function AT(e,n){return G(()=>{let t=U(.5,wa(n)),r=wl(Fi(n,t),e.dtype);return qn(_a(e,r),-1)})}function TT(e,n){return G(()=>wl(_a(bh(e,-1),bh(n,-1)),"float32"))}function m7(e,n){return G(()=>xe(Re(_s(_a(e,1),_a(n,1))),"float32"))}function g7(e,n){return G(()=>{let t=m7(e,n),r=function WDe(e,n){return G(()=>xe(Re(_s(_a(e,0),_a(n,1))),"float32"))}(e,n),i=se(t,r);return xe(Wr(Fi(i,0),Te(t,i),0),"float32")})}function y7(e,n){return P1(e,n)}function b7(e,n){return e.rank===n.rank&&(e=Ec(e,[e.rank-1])),(n=bh(n,-1)).dtype!==e.dtype&&(n=xe(n,e.dtype)),xe(_a(e,n),"float32")}var NT=S_,_7=R1,$1={binaryAccuracy:AT,categoricalAccuracy:TT,precision:g7,categoricalCrossentropy:NT,sparseCategoricalCrossentropy:_7,mse:Lh,MSE:Lh,mae:F1,MAE:F1,mape:og,MAPE:og,cosine:ET};function JDe(e){if("string"==typeof e&&e in $1)return $1[e];if("string"!=typeof e&&null!=e)return e;throw new X(`Unknown metric ${e}`)}function B1(e){if(Do(null!==e,`Unknown LossOrMetricFn ${e}`),"string"==typeof e)return e;{let n;for(let t of Object.keys(L1))if(L1[t]===e){n=t;break}if(void 0!==n)return n;for(let t of Object.keys($1))if($1[t]===e){n=t;break}return void 0!==n?n:e.name}}function v7(e,n,t=!1){if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!OT(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(t){let r=JSON.stringify(e);r.length>1048576&&console.warn(`User-defined metadata of model "${n}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function OT(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){let n=Object.keys(e);for(let t of n)if("string"!=typeof t||!OT(e[t]))return!1;return!0}if(Array.isArray(e)){for(let n of e)if(!OT(n))return!1;return!0}return!1}{let n=typeof e;return"string"===n||"number"===n||"boolean"===n}}function V1(e,n,t=console.log){let r="";for(let i=0;i<e.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=e[i],r=r.slice(0,n[i]),r+=" ".repeat(n[i]-r.length);t(r)}function iAe(e,n,t){let r,i;try{i=e.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(e.outputShape)}catch{r="multiple"}V1([`${e.name} (${e.getClassName()})`,i,r,e.countParams().toString()],n,t)}function aAe(e,n,t,r){let i,a;try{a=e.inboundNodes.map(h=>JSON.stringify(h.inputShapes)).join(",")}catch{a="multiple"}try{i=JSON.stringify(e.outputShape)}catch{i="multiple"}let s=[];for(let h of e.inboundNodes)if(!(null!=t&&t.length>0&&-1===t.indexOf(h)))for(let d=0;d<h.inboundLayers.length;++d)s.push(`${h.inboundLayers[d].name}[${h.nodeIndices[d]}][${h.tensorIndices[d]}]`);let o=e.name,l=e.getClassName(),c=0===s.length?"":s[0];V1([`${o} (${l})`,a,i,e.countParams().toString(),c],n,r);for(let h=1;h<s.length;++h)V1(["","","","",s[h]],n,r)}function x7(e,n,t){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===n&&"string"==typeof t}function I_(e,n){if(null===e)return null;if("string"==typeof e)return Oh(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){let t=[],r=e.length;for(let i=0;i<r;++i){let a=e[i];x7(n,i,a)?t.push(a):t.push(I_(a,n))}return t}{let t={};for(let r of Object.keys(e)){let i=e[r];if("name"===r&&"string"==typeof i)t[r]=i;else{let a=Oh(r);t[a]=I_(i,a)}}return t}}function FT(e,n){if(null==e)return null;if("string"==typeof e)return xl(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){let t=[],r=e.length;for(let i=0;i<r;++i){let a=e[i];x7(n,i,a)?t.push(a):t.push(FT(a,n))}return t}{let t={};for(let r of Object.keys(e)){let i=e[r];t[xl(r)]="name"!==r&&"className"!==r||"string"!=typeof i?FT(i,r):i}return t}}var RT="4.16.0",oAe=class Wo extends Mt{constructor(n){if(super({}),this.containerNodes=new Set,this.name=n.name,null==this.name){let b=this.getClassName().toLowerCase();this.name=b1(b)}if(this.supportsMasking=!1,this.trainable_=!0,this.inputs=Array.isArray(n.inputs)?n.inputs.slice():[n.inputs],this.outputs=Array.isArray(n.outputs)?n.outputs.slice():[n.outputs],Tc(this.inputs).length!==this.inputs.length)throw new X(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);Tc(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let b of this.outputs){let v=b.nodeIndex,x=b.tensorIndex;this.outputLayers.push(b.sourceLayer),this.outputLayersNodeIndices.push(v),this.outputLayersTensorIndices.push(x)}for(let b of this.inputs){let _=b.sourceLayer,v=b.nodeIndex,x=b.tensorIndex;Do(0===v,"input layer has >1 nodes"),Do(0===x,"input layer has >1 tensors"),this.inputLayers.push(_),this.inputLayersNodeIndices.push(v),this.inputLayersTensorIndices.push(x)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){let _=this.inputLayers[b];if(!(_ instanceof ig))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${n.inputs}. Input ${b} (0-based) originates from layer type ${_.getClassName()}.`);this.inputNames.push(_.name),this.feedInputShapes.push(_.batchInputShape),this.feedInputNames.push(_.name)}for(let b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);let t={},r={},i={},a={},s={},o=[],l=(b,_,v,x,S,M)=>{(null==x||null==S||null==M)&&(x=b.sourceLayer,S=b.nodeIndex,M=b.tensorIndex);let D=x.inboundNodes[S];if(-1!==v.indexOf(D))throw new Eo(`The tensor ${b.name} at layer "${x.name}" is part of a cycle.`);if(-1!==_.indexOf(D))return;this.containerNodes.add(Wo.nodeKey(x,S)),x.id in s||(s[x.id]=Object.keys(s).length),-1===v.indexOf(D)&&v.push(D);let N=D.inboundLayers.length;for(let F=0;F<N;F++)l(D.inputTensors[F],_,v,D.inboundLayers[F],D.nodeIndices[F],D.tensorIndices[F]);for(_.push(D);v.indexOf(D)>=0;)v.splice(v.indexOf(D),1);o.push(D)},c=[],u=[];for(let b of this.outputs)l(b,c,u);let h=o.slice().reverse();for(let b of h){r[b.id]=b,b.id in t||(t[b.id]=0);let _=t[b.id];_=Math.max(_,null==i[b.outboundLayer.id]?0:i[b.outboundLayer.id]),i[b.outboundLayer.id]=_,a[b.outboundLayer.id]=b.outboundLayer,t[b.id]=_;for(let x=0;x<b.inboundLayers.length;x++){let D=b.inboundLayers[x].inboundNodes[b.nodeIndices[x]];t[D.id]=Math.max(_+1,null==t[D.id]?0:t[D.id]),r[D.id]=D}}let d={};for(let b in t){let _=t[b];_ in d||(d[_]=[]),d[_].push(r[b])}let p={};for(let b in i){let _=i[b];_ in p||(p[_]=[]),p[_].push(a[b])}let f=Object.keys(p).map(b=>parseInt(b,10)).sort(g1);this.layers=[];for(let b of f){let _=p[b];_.sort((v,x)=>{let S=s[v.id],M=s[x.id];return S<M?-1:S>M?1:0});for(let v of _)v instanceof Wo&&this.internalContainerRefs.push(v),this.layers.push(v)}this.layersByDepth=p,f=Object.keys(d).map(b=>parseInt(b,10)).sort(g1);let m=this.inputs.slice(),g=[];for(let b of f)for(let _ of d[b]){let v=_.outboundLayer;if(null!=v){for(let x of _.inputTensors)if(-1===m.indexOf(x))throw new Eo(`Graph disconnected: cannot obtain value for tensor ${x} at layer "${v.name}". The following previous layers were accessed without issue: ${g}`);for(let x of _.outputTensors)m.push(x);g.push(v.name)}}this.nodesByDepth=d;let y=this.layers.map(b=>b.name);for(let b of y){let _=y.filter(v=>v===b).length;if(1!==_)throw new Eo(`The name "${b}" is used ${_} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new A1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let n={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(let t of this.layers)n.numDisposedVariables+=t.dispose().numDisposedVariables;for(let t of this.internalContainerRefs)n.numDisposedVariables+=t.dispose().numDisposedVariables}return n.refCountAfterDispose=this._refCount,n}get trainable(){return this.trainable_}set trainable(n){this.layers.forEach(t=>{t._trainableWeights.forEach(r=>r.trainable=n)}),this.trainable_=n}get trainableWeights(){if(this._trainableWeights.length>0)throw new X("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let n=[];for(let t of this.layers)n=n.concat(t.trainableWeights);return n}get nonTrainableWeights(){let n=[];for(let t of this.layers)n.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let r of this.layers)t.push(...r.trainableWeights);return t.concat(n)}return n}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(n,t=!0){let r={},i=0,a=(e=>{let n=Object.keys(e);if(0===n.length)return!1;let t=n[0].split("/");return!isNaN(parseInt(t[t.length-1],10))})(n);a&&this.parseWeights(n);for(let o of this.layers)for(let[l,c]of o.weights.entries()){let u=a?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(null!=r[u])throw new X(`Duplicate weight name: ${u}`);r[u]=c,i++}let s=[];for(let o in n){let l=o;if(null==r[o]){let c=o.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(null!=r[l])s.push([r[l],n[o]]);else if(t)throw new X(`Provided weight data has no target variable: ${o}`);delete r[l]}if(t){let o=[];for(let l in r)o.push(l);if(o.length>0)throw new X(`${o.length} of ${i} weights are not set: ${o}`)}vT(s)}parseWeights(n){for(let t in Object.keys(n)){let r=t.split("/"),i=["vars","layer_checkpoint_dependencies"],a=r.map(s=>s.startsWith("_")?s.slice(1):s).filter(s=>!i.includes(s)).join("/");a!==t&&(n[a]=n[t],delete n[t])}}updatedConfig(){let n=this.getConfig(),t={};return t.className=this.getClassName(),t.config=n,t.kerasVersion=`tfjs-layers ${RT}`,t.backend="TensorFlow.js",t}toJSON(n,t=!0){let r=FT(this.updatedConfig());return t?JSON.stringify(r):r}call(n,t){return G(()=>{n=sn(n);let r=new ag;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],n[i]);return C_(this.outputs,r,t)})}computeMask(n,t){return G(()=>{let r;return n=sn(n),r=null==t?Nh(null,n.length):sn(t),this.runInternalGraph(n,r)[1]})}computeOutputShape(n){let t=E1(n);if(t.length!==this.inputLayers.length)throw new X(`Invalid inputShape argument ${n}: model has ${this.inputLayers.length} tensor inputs.`);let r={};for(let o=0;o<t.length;o++)r[this.inputLayers[o].name+"_0_0"]=t[o];let i=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(g1);if(i.length>1)for(let o of i){let l=this.nodesByDepth[o];for(let c of l){let u=c.outboundLayer;if(-1!==this.inputLayers.map(m=>m.id).indexOf(u.id))continue;let h=[];for(let m=0;m<c.inboundLayers.length;m++)h.push(r[`${c.inboundLayers[m].name}_${c.nodeIndices[m]}_${c.tensorIndices[m]}`]);let p=E1(u.computeOutputShape(Zi(h))),f=u.inboundNodes.indexOf(c);for(let m=0;m<p.length;m++)r[`${u.name}_${f}_${m}`]=p[m]}}let a=[],s=[];for(let o=0;o<this.outputLayers.length;o++)s.push(`${this.outputLayers[o].name}_${this.outputLayersNodeIndices[o]}_${this.outputLayersTensorIndices[o]}`);for(let o=0;o<s.length;o++){let l=s[o];Do(l in r),a.push(r[l])}return Zi(a)}runInternalGraph(n,t){null==t&&(t=Nh(null,n.length));let r={};for(let l=0;l<this.inputs.length;++l)r[this.inputs[l].id]=[n[l],t[l]];let i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(g1);for(let l of i){let c=this.nodesByDepth[l];for(let u of c){let h=u.outboundLayer,d=u.inputTensors,p=u.outputTensors,f=new Array;for(let m of d)m.id in r&&f.push(r[m.id]);if(f.length===d.length){let g,y,b,_,m={};if(null!=u.callArgs&&(m=u.callArgs),1===f.length){let[v,x]=f[0];null==m.mask&&(m.mask=x),b=sn(h.call(v,m)),_=sn(h.computeMask(v,x)),g=[v],y=[x]}else g=f.map(v=>v[0]),y=f.map(v=>v[1]),null==m.mask&&(m.mask=y),b=sn(h.call(g,m)),_=sn(h.computeMask(g,y));if(h.activityRegularizer)throw new It("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let v=0;v<p.length;++v)r[p[v].id]=[b[v],_[v]]}}}let a=[],s=[],o=[];for(let l of this.outputs){Do(l.id in r,`Could not compute output ${l.name} : ${l.id}`);let[c,u]=r[l.id];o.push(c.shape),a.push(c),s.push(u)}return[a,s,o]}buildNodeConversionMap(n){let r,t={};for(let i of this.layers){r=i instanceof Wo?1:0;for(let a=0;a<i.inboundNodes.length;a++){let s=Wo.nodeKey(i,a);this.containerNodes.has(s)&&(t[s]=r,r+=1)}}return t}getLayer(n,t){if(null!=t)return this.findLayer(t);if(null==n)throw new X("Provide either a layer name or layer index");if("number"==typeof n)return this.findLayer(n);for(let r of this.layers)if(r.name===n)return r;throw new X(`No such layer: ${n}`)}findLayer(n){if(this.layers.length<=n)throw new X(`Was asked to retrieve layer at index ${n}, but model only has ${this.layers.length} layer(s).`);return this.layers[n]}calculateLosses(){return G(()=>{let n=[];for(let t of this.layers)for(let r=0;r<t.inboundNodes.length;++r){let i=Wo.nodeKey(t,r);this.containerNodes.has(i)&&n.push(...t.calculateLosses())}return n})}getConfig(){let n={name:this.name},t=this.buildNodeConversionMap(this.layers),r=[];for(let s of this.layers){let o=s.getClassName(),l=s.getConfig(),c=[];for(let h=0;h<s.inboundNodes.length;h++){let d=s.inboundNodes[h],p=Wo.nodeKey(s,h),f={};if(this.containerNodes.has(p)){if(d.callArgs)try{JSON.stringify(d.callArgs),f=d.callArgs}catch{console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: ${d.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),f={}}if(d.inboundLayers.length>0){let m=[];for(let g=0;g<d.inboundLayers.length;g++){let y=d.inboundLayers[g],_=d.tensorIndices[g],x=t[Wo.nodeKey(y,d.nodeIndices[g])];null==x&&(x=0),m.push([y.name,x,_,f])}c.push(m)}}}let u={};u.name=s.name,u.className=o,u.config=l,u.inboundNodes=c,r.push(u)}n.layers=r;let i=[];for(let s=0;s<this.inputLayers.length;s++){let o=this.inputLayers[s],c=Wo.nodeKey(o,this.inputLayersNodeIndices[s]);if(!this.containerNodes.has(c))continue;let u=t[c];null==u&&(u=0),i.push([o.name,u,this.inputLayersTensorIndices[s]])}n.inputLayers=i;let a=[];for(let s=0;s<this.outputLayers.length;s++){let o=this.outputLayers[s],c=Wo.nodeKey(o,this.outputLayersNodeIndices[s]);if(!this.containerNodes.has(c))continue;let u=t[c];null==u&&(u=0),a.push([o.name,u,this.outputLayersTensorIndices[s]])}return n.outputLayers=a,n}static fromConfig(n,t,r={},i=!1){let a={},s={};function o(g,y){g.name in s?s[g.name].push(y):s[g.name]=[y]}function l(g,y){let _,b=[];for(let v of y){let x=v[0],S=v[1],M=v[2];if(_=null==v[3]?{}:v[3],!(x in a))return void o(g,y);let D=a[x];if(D.inboundNodes.length<=S)return void o(g,y);b.push(D.inboundNodes[S].outputTensors[M])}b.length>0&&g.apply(Zi(b),_)}function c(g){let y=g.name,b=Ys(g,null!=t.customObjects?t.customObjects:{});b.setFastWeightInitDuringBuild(i),a[y]=b,g.inboundNodes.forEach(_=>{if(!(_ instanceof Array))throw new X(`Corrupted configuration, expected array for nodeData: ${_}`);o(b,_)})}let u=t.name,h=t.layers;for(let g of h)c(g);for(;!N2e(s);)for(let g of h){let y=a[g.name];if(y.name in s){let b=s[y.name];delete s[y.name];for(let _ of b)l(y,_)}}let d=[],p=[],f=t.inputLayers;for(let g of f){let y=g[0],b=g[1],_=g[2];Do(y in a),d.push(a[y].inboundNodes[b].outputTensors[_])}let m=t.outputLayers;for(let g of m){let y=g[0],b=g[1],_=g[2];Do(y in a),p.push(a[y].inboundNodes[b].outputTensors[_])}return new n({inputs:d,outputs:p,name:u})}get stateful(){if(this._stateful)throw new X("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let n of this.layers)if(n.stateful)return!0;return!1}resetStates(){G(()=>{this.layers.forEach(n=>{n.stateful&&n.resetStates()})})}};function w7(e,n){return function lAe(e,n,t){let r=n.length;if(null==e||Array.isArray(e)&&0===e.length)return n.map(i=>null);if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&n[0]in e?[e[n[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided ${t} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){let i=[];return n.forEach(a=>{i.push(a in e?e[a]:null)}),i}throw new Error(`The model has multiple (${r}) outputs, so ${t} must be either an array with ${r} elements or an object with ${n} keys. Provided ${t} not understood: ${JSON.stringify(e)}`)}(e,n,"classWeight")}function C7(e,n,t,r){return PT.apply(this,arguments)}function PT(){return PT=R(function*(e,n,t,r){if(null!=n||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=t){let i=G(()=>{if(1===e.shape.length)return xo(e);if(2===e.shape.length){if(e.shape[1]>1)return bh(e,1);if(1===e.shape[1])return H(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),a=Array.from(yield i.data());at(i);let s=[];return a.forEach(o=>{if(null==t[o])throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);s.push(t[o])}),Qt(s,"float32")}return null}),PT.apply(this,arguments)}function cAe(e,n){return U(e,n)}function k7(e,n){let t,r;t=n.xs,r=n.ys,w.assert(null!=t&&null!=r,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${n}`);let a=S7("input",e.inputNames,t),s=S7("output",e.outputNames,r),o=a[0].shape[0];w.assert(a.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),w.assert(s.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let l=0;l<a.length;l++)w.assert(a[l].shape[0]===o,()=>`Batch size mismatch: input ${e.inputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`);for(let l=0;l<s.length;l++)w.assert(s[l].shape[0]===o,()=>`Batch size mismatch: output ${e.outputNames[l]} has ${s[l].shape[0]}; expected  ${o} based on input ${e.inputNames[0]}.`);return{xs:a,ys:s}}function S7(e,n,t){if(t instanceof gt)return[t];if(Array.isArray(t))return w.assert(t.length===n.length,()=>`Received an array of ${t.length} Tensors, but expected ${n.length} to match the ${e} keys ${n}.`),t;{let r=[];for(let i of n){if(null==t[i])throw new X(`The feature data generated by the dataset lacks the required ${e} key '${i}'.`);r.push(t[i])}return r}}function LT(){return LT=R(function*(e,n,t){let r=null!=t.batchesPerEpoch;if(w.assert(null!=e.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),w.assert(null!=t,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),w.assert(null!=t.epochs&&t.epochs>0&&Number.isInteger(t.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${t.epochs}`),w.assert(!r||t.batchesPerEpoch>0&&Number.isInteger(t.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${t.batchesPerEpoch}`),w.assert(null==t.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{let a,s,i=null!=t.validationData;if(i)if(I7(t.validationData))w.assert(null==t.validationBatches||t.validationBatches>0&&Number.isInteger(t.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${t.validationBatches}`);else{let g=function dAe(e){if(3===e.length)throw new It("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(t.validationData);a=g.xs,s=g.ys}let c,o=e.makeTrainFunction(),l=e.getDedupedMetricsNames();c=i?l.slice().concat(l.map(g=>"val_"+g)):l.slice();let u=p7(t.callbacks,t.yieldEvery),h=null==t.verbose?1:t.verbose,{callbackList:d,history:p}=f7(u,h,t.epochs,null,null,function pAe(e,n){let t=null;return null!=n.batchesPerEpoch?t=n.batchesPerEpoch:Number.isFinite(e.size)&&(t=e.size),t}(n,t),null,i,c);d.setModel(e),e.history=p,yield d.onTrainBegin(),e.stopTraining_=!1;let f=null==t.initialEpoch?0:t.initialEpoch,m=yield n.iterator();for(;f<t.epochs;){let g={};yield d.onEpochBegin(f);let y=0,b=0;for(r||(m=yield n.iterator());!r||y<t.batchesPerEpoch;){let _=yield m.next();if(r&&_.done){console.warn(`You provided \`batchesPerEpoch\` as ${t.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${t.batchesPerEpoch*t.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(null!=_.value){let{xs:v,ys:x}=k7(e,_.value),S={};S.batch=b,S.size=v[0].shape[0],yield d.onBatchBegin(b,S);let M=[];if(null!=t.classWeight){let F=w7(t.classWeight,e.outputNames);for(let O=0;O<F.length;++O)M.push(yield C7(x[O],null,F[O]))}let D=v.concat(x).concat(M),N=o(D);at(D);for(let F=0;F<l.length;++F){let k=N[F];S[l[F]]=k,Ar(k)}yield d.onBatchEnd(b,S),l7(S),b++,y++}if(r?y>=t.batchesPerEpoch:_.done){if(i){let v;v=I7(t.validationData)?sn(yield e.evaluateDataset(t.validationData,{batches:t.validationBatches})):sn(e.evaluate(a,s,{batchSize:null==t.validationBatchSize?32:t.validationBatchSize,verbose:0}));for(let x=0;x<e.metricsNames.length;++x)g[`val_${e.metricsNames[x]}`]=v[x]}break}if(e.stopTraining_)break}if(yield d.onEpochEnd(f,g),f++,e.stopTraining_)break}return yield d.onTrainEnd(),yield e.history.syncData(),e.history}finally{e.isTraining=!1}}),LT.apply(this,arguments)}function I7(e){return"function"==typeof e.iterator}function $T(){return $T=R(function*(e,n,t){let r=null!=(t=t||{}).batches,i=e.testFunction,a=[];if(t.verbose>0)throw new It("Verbose mode is not implemented yet.");w.assert(!r||t.batches>0&&Number.isInteger(t.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(t.batches)}`);let s=function fAe(e){return"function"==typeof e.next}(n)?n:yield n.iterator(),o=0,l=0;for(;!r||l<t.batches;){let c=yield s.next();if(a=G(()=>{if(c.value){let{xs:u,ys:h}=k7(e,c.value),d=u.concat(h),p=G(()=>i(d));if(at(d),0===l)for(let m=0;m<p.length;++m)a.push(He(0));let f=d[0].shape[0];for(let m=0;m<p.length;++m){let g=p[m],y=a[m];a[m]=G(()=>se(a[m],U(f,g))),l>0&&at(y)}at(p),o+=f,++l}return a}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${t.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<a.length;++c){let u=a[c];a[c]=Te(a[c],o),at(u)}return Zi(a)}),$T.apply(this,arguments)}function BT(e){w.assert(e>0&&Number.isInteger(e),()=>`batchSize is required to be a positive integer, but got ${e}`)}function M_(e,n,t){return null==e?[null]:Array.isArray(e)?e.map(r=>Ph(r,n,t-n)):Ph(e,n,t-n)}function VT(e,n){return G(()=>null==e?null:Array.isArray(e)?e.map(t=>VT(t,n)):KG(e,"int32"===n.dtype?n:xe(n,"int32")))}function zT(e,n){let t=[],r=0,i=null;for(;r<e;)i=r+n,i>=e&&(i=e),t.push([r,i]),r=i;return t}function M7(e){let n=[];e instanceof gt&&(e=[e]);for(let t=0;t<e.length;++t){let r=e[t];if(1===r.rank)n.push(v_(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");n.push(r)}}return n}function Zs(e,n){if(null==e)return;let t=[];if(n instanceof gt)t.push(n.id);else if(Array.isArray(n))n.forEach(i=>t.push(i.id));else if(null!=n)for(let i in n)t.push(n[i].id);let r=[];if(e instanceof gt)-1===t.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach(i=>{-1===t.indexOf(i.id)&&r.push(i)});else if(null!=e)for(let i in e){let a=e[i];-1===t.indexOf(a.id)&&r.push(a)}r.forEach(i=>{i.isDisposed||i.dispose()})}function UT(e){return Array.isArray(e)}function E7(e){return!function gAe(e){return e instanceof gt}(e)&&!UT(e)}function D7(e,n,t,r=!0,i=""){if(null==n||0===n.length){if(null!=e){let s=!1;if(UT(e)&&e.length>0)s=!0;else if(E7(e)){for(let o in e)if(e.hasOwnProperty(o)){s=!0;break}}else s=!0;if(s)throw new X(`Error when checking model ${i} expected no data, but got ${e}`)}return[]}if(null==e)return n.map(s=>null);let a;if(E7(e)){a=[];for(let s of n){if(null==e[s])throw new X(`No data provided for "${s}". Need data for each key in: ${n}`);a.push(e[s])}}else if(UT(e)){if(e.length!==n.length)throw new X(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${n.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);a=e}else{if(n.length>1)throw new X(`The model ${i} expects ${n.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);a=[e]}if(a=M7(a),null!=t)for(let s=0;s<n.length;++s){if(null==t[s])continue;let o=a[s];if(o.shape.length!==t[s].length)throw new X(`Error when checking ${i}: expected ${n[s]} to have ${t[s].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<t[s].length;++l){if(0===l&&!r)continue;let u=t[s][l];if(null!=u&&u>=0&&o.shape[l]!==u)throw new X(`${i} expected a batch of elements where each example has shape [${t[s].slice(1,t[s].length)}] (i.e.,tensor shape [*,${t[s].slice(1,t[s].length)}]) but the ${i} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return a}function A7(e,n,t,r=!0,i=""){let a;if(Array.isArray(e)){if(e.length!==n.length)throw new X(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${n.length} Tensor(s), but instead got ${e.length} Tensors(s).`);a=e}else{if(n.length>1)throw new X(`The model expects ${n.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);a=[e]}if(null!=t)for(let s=0;s<n.length;++s){if(null==t[s])continue;let o=a[s];if(o.shape.length!==t[s].length)throw new X(`Error when checking ${i}: expected ${n[s]} to have ${t[s].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<t[s].length;++l){if(0===l&&!r)continue;let u=t[s][l];if(null!=u&&u!==o.shape[l])throw new X(`Error when checking ${i}: expected ${n[s]} to have shape ${JSON.stringify(t[s])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}var Cl=class extends oAe{constructor(e){super(e),this.isTraining=!1}summary(e,n,t=console.log){if(!this.built)throw new X("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function tAe(e,n,t,r=console.log){let s,i=function rAe(e){let n=!0,t=[],r=[];for(let i in e.nodesByDepth)t.push(e.nodesByDepth[i]);for(let i of t){if(i.length>1||1===i.length&&i[0].inboundLayers.length>1){n=!1;break}r.push(...i)}if(n)for(let i of e.layers){let a=!1;for(let s of i.inboundNodes)if(-1!==r.indexOf(s)){if(a){n=!1;break}a=!0}if(!n)break}return n}(e),a=["Layer (type)","Input Shape","Output shape","Param #"];if(i?(n=n||90,t=t||[.32,.61,.89,1]):(n=n||115,t=t||[.24,.48,.7,.8,1]),t[t.length-1]<=1&&(t=t.map(u=>Math.floor(n*u))),!i){a.push("Receives inputs"),s=[];for(let u in e.nodesByDepth)s.push(...e.nodesByDepth[u])}r("_".repeat(n)),V1(a,t,r),r("=".repeat(n));let o=e.layers;for(let u=0;u<o.length;++u)i?iAe(o[u],t,r):aAe(o[u],t,s,r),r((u===o.length-1?"=":"_").repeat(n));e.checkTrainableWeightsConsistency();let l=function nAe(e){let n;return n=D1(null!=e.collectedTrainableWeights?e.collectedTrainableWeights:e.trainableWeights),n}(e),c=D1(e.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(n))}(this,e,n,t)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function eAe(e){let n={Adagrad:()=>Th.adagrad(.01),Adadelta:()=>Th.adadelta(1,.95,Nr()),Adam:()=>Th.adam(.001,.9,.999,Nr()),Adamax:()=>Th.adamax(.002,.9,.999,Nr(),0),RMSProp:()=>Th.rmsprop(.001,.9,0,Nr()),SGD:()=>Th.sgd(.01)};if(n.adagrad=n.Adagrad,n.adadelta=n.Adadelta,n.adam=n.Adam,n.adamax=n.Adamax,n.rmsprop=n.RMSProp,n.sgd=n.SGD,e in n)return n[e]();throw new X(`Unknown Optimizer ${e}`)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof vl))throw new X("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new X(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>DT(a))}else{let a=DT(e.loss);this.outputs.forEach(s=>{n.push(a)})}else{e.loss=e.loss;for(let a in e.loss)if(-1===this.outputNames.indexOf(a))throw new X(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(let a of this.outputNames)null==e.loss[a]&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),n.push(DT(e.loss[a]))}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){let s=this.internalOutputShapes[a];this.feedOutputNames.push(this.outputNames[a]),this.feedOutputShapes.push(s),this.feedLossFns.push(this.lossFunctions[a])}let t=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Rh("loss",()=>{for(let a=0;a<this.outputs.length;++a)-1===t.indexOf(a)&&this.outputs.length>1&&(this.metricsTensors.push([this.lossFunctions[a],a]),this.metricsNames.push(this.outputNames[a]+"_loss"))});let r=function _Ae(e,n){if(null==e||Array.isArray(e)&&0===e.length)return n.map(r=>[]);let t;if("string"==typeof e||"function"==typeof e)t=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);t=e}if(Array.isArray(t))return n.map(r=>t);{let r=[];for(let i of n){let a=t.hasOwnProperty(i)?t[i]:[];Array.isArray(a)||(a=[a]),r.push(a)}return r}}(e.metrics,this.outputNames),i=(a,s,o)=>{this.outputNames.length>1&&(s=this.outputNames[a]+"_"+s),this.metricsNames.push(s),this.metricsTensors.push([o,a])};Rh("metric",()=>{for(let a=0;a<this.outputs.length;++a)-1===t.indexOf(a)&&(o=>{let c,u,h;for(let d of o){if("string"==typeof d&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(d)){let m,f=this.internalOutputShapes[a];1===f[f.length-1]||this.lossFunctions[a]===P1?-1!==["accuracy","acc"].indexOf(d)?u=AT:-1!==["crossentropy","ce"].indexOf(d)&&(u=y7):this.lossFunctions[a]===R1?-1!==["accuracy","acc"].indexOf(d)?u=b7:-1!==["crossentropy","ce"].indexOf(d)&&(u=_7):-1!==["accuracy","acc"].indexOf(d)?u=TT:-1!==["crossentropy","ce"].indexOf(d)&&(u=NT),-1!==["accuracy","acc"].indexOf(d)?m="acc":-1!==["crossentropy","ce"].indexOf(d)&&(m="ce"),h=u,c=""+m}else h=JDe(d),c=""+B1(d);let p;Rh(c,()=>{p=h}),i(a,c,p)}})(r[a])}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,t={}){let r=null==t.batchSize?32:t.batchSize;BT(r);let i=this.standardizeUserDataXY(e,n,!0,r);try{let a=i[0].concat(i[1]);return this.makeTestFunction(),Zi(this.testLoop(this.testFunction,a,r,t.verbose,t.steps))}finally{Zs(i[0],e),Zs(i[1],n)}}evaluateDataset(e,n){var t=this;return R(function*(){return t.makeTestFunction(),function mAe(e,n,t){return $T.apply(this,arguments)}(t,e,n)})()}checkNumSamples(e,n,t,r="steps"){let i;if(null!=t){if(i=null,null!=n)throw new X(`If ${r} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else{if(null==e)throw new X(`Either the input data should have a defined shape, or ${r} shoud be specified.`);i=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return i}execute(e,n){if(Array.isArray(n)&&0===n.length)throw new X("`outputs` is an empty Array, which is not allowed.");let t=Array.isArray(n),i=this.retrieveSymbolicTensors(t?n:[n]),a=new ag;if(e instanceof gt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new X(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let o=0;o<this.inputs.length;++o)a.add(this.inputs[o],e[o])}else for(let o of this.inputs){let l=e[o.name];if(null==l)throw new X(`No value is provided for the model's input ${o.name}`);a.add(o,l)}let s=C_(i,a);return t?s:s[0]}retrieveSymbolicTensors(e){let n=Nh(null,e.length),t=e.length;for(let r of this.layers){let i=Array.isArray(r.output)?r.output:[r.output],a=i.map(s=>s.name);for(let s=0;s<e.length;++s){let o=a.indexOf(e[s]);if(-1!==o&&(n[s]=i[o],t--),0===t)break}if(0===t)break}if(t>0){let r=[];throw n.forEach((i,a)=>{null==i&&r.push(e[a])}),new X(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(r)}`)}return n}predictLoop(e,n=32,t=!1){return G(()=>{let r=this.checkNumSamples(e);if(t)throw new It("Verbose predictLoop() is not implemented yet.");let i=zT(r,n),a=this.outputs.map(s=>[]);for(let s=0;s<i.length;++s)G(()=>{let c=M_(e,i[s][0],i[s][1]),u=[];if(Array.isArray(c))for(let d=0;d<c.length;++d)u.push({key:this.inputs[d],value:c[d]});else u.push({key:this.inputs[0],value:c});let h=new ag(u);return C_(this.outputs,h)}).forEach((o,l)=>a[l].push(o));return Zi(a.map(s=>fn(s,0)))})}predict(e,n={}){let t=M7(e);A7(t,this.inputNames,this.feedInputShapes,!1);try{let r=null==n.batchSize?32:n.batchSize;return BT(r),this.predictLoop(t,r)}finally{Zs(t,e)}}predictOnBatch(e){A7(e,this.inputNames,this.feedInputShapes,!0);let n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,t=!0,r){if(null==this.optimizer_)throw new Eo("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let i=[];for(let a=0;a<this.feedOutputShapes.length;++a){let s=this.feedOutputShapes[a];i.push(this.feedLossFns[a]===R1?s.slice(0,s.length-1).concat([1]):s)}if(function yAe(e,n,t){let r=Tc(e.map(a=>a.shape[0]));r.sort();let i=Tc(n.map(a=>a.shape[0]));if(i.sort(),r.length>1)throw new X(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(a=>a.shape))}`);if(i.length>1)throw new X(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(a=>a.shape))}`);if(r.length>0&&i.length>0&&!w.arraysEqual(r,i))throw new X(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}(e=D7(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=D7(n,this.feedOutputNames,i,!1,"target")),function bAe(e,n,t){let r=[Lh,P1,S_];for(let i=0;i<e.length;++i){let a=e[i],s=n[i],o=t[i];if(null!=s){if(s===S_&&1===a.shape[a.shape.length-1])throw new X(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(s)){let l=a.shape.slice(1),c=o.slice(1);for(let u=0;u<l.length;++u){let d=c[u];if(null!=d&&l[u]!==d)throw new X(`A target Tensor with shape ${a.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&e[0].shape[0]%r!=0)throw new X(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}standardizeUserData(e,n,t,r,i=!0,a){var s=this;return R(function*(){let[o,l]=s.standardizeUserDataXY(e,n,i,a);if(null!=t)throw new Error("sample weight is not supported yet.");let c=null;if(null!=r){let u=w7(r,s.outputNames);c=[];for(let h=0;h<u.length;++h)c.push(yield C7(l[h],null,u[h]))}return[o,l,c]})()}testLoop(e,n,t,r=0,i){return G(()=>{let a=this.checkNumSamples(n,t,i,"steps"),s=[];if(r>0)throw new It("Verbose mode is not implemented yet.");if(null!=i)throw new It("steps mode in testLoop() is not implemented yet");{let o=zT(a,t),l=Qt(Gs(0,a));for(let c=0;c<o.length;++c){let u=o[c][0],h=o[c][1],d=Ph(l,u,h-u),p=VT(n,d),f=e(p);if(0===c)for(let m=0;m<f.length;++m)s.push(He(0));for(let m=0;m<f.length;++m)s[m]=se(s[m],U(h-u,f[m]))}for(let c=0;c<s.length;++c)s[c]=Te(s[c],a)}return s})}getDedupedMetricsNames(){let e=this.metricsNames,n=[];for(let t=0;t<e.length;++t){let r=e[t],i=r;$G(e,r)>1&&(i+=`_${$G(e.slice(0,t),r)}`),n.push(i)}return n}makeTrainFunction(){return e=>{let n=[],t=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),a=[],o=this.collectedTrainableWeights.map(l=>l.read());return[this.optimizer_.minimize(()=>{let l=[];for(let d=0;d<this.inputs.length;++d)l.push({key:this.inputs[d],value:t[d]});let h,c=new ag(l),u=C_(this.outputs,c,{training:!0});for(let d=0;d<this.lossFunctions.length;++d){let f=(0,this.lossFunctions[d])(r[d],u[d]);null!=i[d]&&(f=cAe(f,i[d]));let m=qn(f);n.push(m),h=0===d?f:se(h,f)}for(let d=0;d<this.metricsTensors.length;++d){let p;if(this.outputs.length>1&&d<this.outputs.length)p=n[d];else{let m=this.metricsTensors[d][1];p=qn((0,this.metricsTensors[d][0])(r[m],u[m]))}Ar(p),a.push(p)}return h=qn(h),this.calculateLosses().forEach(d=>{h=se(h,d)}),h},!0,o)].concat(a)}}makeTestFunction(){this.testFunction=e=>G(()=>{let t,n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let l=0;l<this.inputs.length;++l)a.push({key:this.inputs[l],value:r[l]});let s=new ag(a),o=C_(this.outputs,s);for(let l=0;l<this.lossFunctions.length;++l){let u=qn((0,this.lossFunctions[l])(i[l],o[l]));t=0===l?u:se(t,u),n.push(t)}for(let l=0;l<this.metricsTensors.length;++l){let u=this.metricsTensors[l][1],h=qn((0,this.metricsTensors[l][0])(i[u],o[u]));n.push(h)}return n})}fit(e,n,t={}){var r=this;return R(function*(){if(r.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let i,a,s,o,l,c,u,h,d;r.isTraining=!0;try{let p=null==t.batchSize?32:t.batchSize;BT(p);let f=yield r.standardizeUserData(e,n,t.sampleWeight,t.classWeight,!1,p);i=f[0],a=f[1],d=f[2];let g,m=!1;if(null!=t.validationData&&t.validationData.length>0){if(m=!0,2!==t.validationData.length)throw 3===t.validationData.length?new It("validationData including sample weights is not supported yet."):new X(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${t.validationData} is invalid.`);l=t.validationData[0],c=t.validationData[1];let M=yield r.standardizeUserData(l,c,null,null,!0,p);u=M[0],h=M[1],g=u.concat(h)}else if(null!=t.validationSplit&&t.validationSplit>0&&t.validationSplit<1){m=!0;let M=Math.floor(i[0].shape[0]*(1-t.validationSplit)),D=i[0].shape[0];u=M_(i,M,D),s=i,i=M_(i,0,M),h=M_(a,M,D),o=a,a=M_(a,0,M),g=u.concat(h)}else null!=t.validationSteps&&(m=!0);let y=i.concat(a).concat(d);r.checkTrainableWeightsConsistency();let v,x,b=r.makeTrainFunction(),_=r.getDedupedMetricsNames();m?(r.makeTestFunction(),v=r.testFunction,x=_.slice().concat(_.map(M=>"val_"+M))):(v=null,g=[],x=_.slice());let S=p7(t.callbacks,t.yieldEvery);return yield r.fitLoop(b,y,_,p,t.epochs,t.verbose,S,v,g,t.shuffle,x,t.initialEpoch,null,null)}finally{r.isTraining=!1,Zs(i,e),Zs(a,n),Zs(s,e),Zs(o,n),Zs(u,l),Zs(h,c),null!=d&&at(d)}})()}fitLoop(e,n,t,r,i,a,s,o,l,c,u,h,d,p){var f=this;return R(function*(){null==r&&(r=32),null==i&&(i=1),null==c&&(c=!0),null==h&&(h=0);let m=!1;if(null!=o&&null!=l&&(m=!0),null!=p&&(m=!0,null==d))throw new X("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let y,g=f.checkNumSamples(n,r,d,"steps_per_epoch");null!=g&&(y=Gs(0,g)),null==a&&(a=1);let{callbackList:b,history:_}=f7(s,a,i,h,g,d,r,m,u);b.setModel(f),f.history=_,yield b.onTrainBegin(),f.stopTraining_=!1;for(let v=h;v<i;++v){yield b.onEpochBegin(v);let x={};if(null!=d)throw new It("stepsPerEpoch mode is not implemented yet.");{if("batch"===c)throw new It("batch shuffling is not implemneted yet");c&&w.shuffle(y);let S=Qt(y),M=zT(g,r);for(let D=0;D<M.length;++D){let N={};if(yield b.onBatchBegin(D,N),G(()=>{let F=M[D][0],O=M[D][1],k=Ph(S,F,O-F);N.batch=D,N.size=O-F;let P=VT(n,k),j=e(P);for(let Z=0;Z<t.length;++Z){let W=j[Z];N[t[Z]]=W,Ar(W)}if(D===M.length-1&&m){let Z=f.testLoop(o,l,r);for(let z=0;z<t.length;++z){let W=t[z],q=Z[z];Ar(q),x["val_"+W]=q}}}),yield b.onBatchEnd(D,N),l7(N),f.stopTraining_)break}S.dispose()}if(yield b.onEpochEnd(v,x),f.stopTraining_)break}return yield b.onTrainEnd(),yield f.history.syncData(),f.history})()}fitDataset(e,n){var t=this;return R(function*(){return function hAe(e,n,t){return LT.apply(this,arguments)}(t,e,n)})()}trainOnBatch(e,n){var t=this;return R(function*(){let r=yield t.standardizeUserData(e,n),i=r[0],a=r[1],s=t.makeTrainFunction()(i.concat(a)),o=[];for(let l of s){let c=yield l.data();o.push(c[0])}return at(s),Zs(r[0],e),Zs(r[1],n),Zi(o)})()}getNamedWeights(e){let n=[],t=null!=e&&e.trainableOnly,r=t?this.trainableWeights:this.weights,i=this.getWeights(t);for(let a=0;a<r.length;++a)t&&!r[a].trainable||n.push({name:r[a].originalName,tensor:i[a]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){let n=Tw().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-Tw().numTensors}return e}getLossIdentifiers(){let e;if("string"==typeof this.loss)e=xl(this.loss);else if(Array.isArray(this.loss)){for(let n of this.loss)if("string"!=typeof n)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>xl(n))}else{let n=Object.keys(this.loss);e={};let t=this.loss;for(let r of n){if("string"!=typeof t[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=xl(t[r])}}return e}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[xl(B1(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>xl(B1(e)));{let e={};for(let n in this.metrics)e[n]=xl(B1(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");let r,i,t=Ys(I_(e.optimizer_config));if("string"==typeof e.loss)r=Oh(e.loss);else if(Array.isArray(e.loss))r=e.loss.map(a=>Oh(a));else if(null!=e.loss){r={};for(let a in e.loss)r[a]=Oh(e.loss[a])}if(Array.isArray(e.metrics))i=e.metrics.map(a=>Oh(a));else if(null!=e.metrics){i={};for(let a in e.metrics)i[a]=Oh(e.metrics[a])}this.compile({loss:r,metrics:i,optimizer:t})}save(e,n){var t=this;return R(function*(){if("string"==typeof e){let a=ai.getSaveHandlers(e);if(0===a.length)throw new X(`Cannot find any save handlers for URL '${e}'`);if(a.length>1)throw new X(`Found more than one (${a.length}) save handlers for URL '${e}'`);e=a[0]}if(null==e.save)throw new X("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let r=yield ai.encodeWeights(t.getNamedWeights(n)),i={modelTopology:t.toJSON(null,!1),format:"layers-model",generatedBy:`TensorFlow.js tfjs-layers v${RT}`,convertedBy:null};if(null!=n&&n.includeOptimizer&&null!=t.optimizer){i.trainingConfig=t.getTrainingConfig();let a="optimizer",{data:s,specs:o}=yield ai.encodeWeights(yield t.optimizer.getWeights(),a);r.specs.push(...o),r.data=ai.concatenateArrayBuffers([r.data,s])}return null!=t.userDefinedMetadata&&(v7(t.userDefinedMetadata,t.name,!0),i.userDefinedMetadata=t.userDefinedMetadata),i.weightData=r.data,i.weightSpecs=r.specs,e.save(i)})()}setUserDefinedMetadata(e){v7(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}};Cl.className="Model",fe.registerClass(Cl);var T7=class extends Cl{};function xAe(e,n){return HT.apply(this,arguments)}function HT(){return HT=R(function*(e,n){"modelTopology"in e||(e={modelTopology:e});let t=e.modelTopology;null!=t.model_config&&(t=t.model_config);let i=Ys(I_(t),n);if(null!=e.weightsManifest){let a=yield ai.loadWeights(e.weightsManifest,e.pathPrefix,i.weights.map(o=>o.originalName)),s={};for(let o of i.weights)s[o.originalName]=a[o.originalName];i.loadWeights(s),at(a)}return i}),HT.apply(this,arguments)}function wAe(e,n){return WT.apply(this,arguments)}function WT(){return WT=R(function*(e,n){if(null==n&&(n={}),"string"==typeof e){let t=ai.getLoadHandlers(e,n);if(0===t.length)t.push(ai.browserHTTPRequest(e,n));else if(t.length>1)throw new X(`Found more than one (${t.length}) load handlers for URL '${e}'`);e=t[0]}return function CAe(e,n,t){return jT.apply(this,arguments)}(e,void 0,n)}),WT.apply(this,arguments)}function jT(){return jT=R(function*(e,n,t){if(null==t&&(t={}),null==e.load)throw new X("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let r=yield e.load(),i=r.modelTopology;null!=i.model_config&&(i=i.model_config);let a=null==t.strict||t.strict,s=null!=r.weightData&&null!=r.weightSpecs&&a,o=Ys(I_(i),n,s),l=r.trainingConfig;if(null!=l&&o.loadTrainingConfig(l),null!=r.userDefinedMetadata&&o.setUserDefinedMetadata(r.userDefinedMetadata),null!=r.weightData){if(null==r.weightSpecs)throw new X("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:c,optimizerWeights:u}=function kAe(e,n){let t=ai.decodeWeights(e,n),r={},i=[];return n.forEach(a=>{"optimizer"===a.group?i.push({name:a.name,tensor:t[a.name]}):r[a.name]=t[a.name]}),{modelWeights:r,optimizerWeights:i}}(r.weightData,r.weightSpecs);o.loadWeights(c,a),null!=o.optimizer&&u.length>0&&(yield o.optimizer.setWeights(u)),at(c),at(u.map(h=>h.tensor))}return o}),jT.apply(this,arguments)}T7.className="Functional",fe.registerClass(T7);var z1=class X$ extends Cl{constructor(n){if(super({inputs:[],outputs:[]}),n=n||{},this.trainable=!0,this.built=!1,this.name=null!=n.name?n.name:b1("sequential_"),null!=n.layers)for(let t of n.layers)this.add(t)}checkShape(n){if(n.inboundNodes[0].outputTensors[0].shape.some(t=>t<0))throw new X(`Negative dimension size caused by adding layer ${n.name} with input shape [${n.inboundNodes[0].inputTensors[0].shape}]`)}add(n){let r,t=n instanceof X$||n instanceof Cl;if(t){if(r=n,1!==r.outputs.length)throw new X("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==r.inputs.length)throw new X("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===n.inboundNodes.length){if(null==n.batchInputShape)throw new X("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let i=t7({batchShape:n.batchInputShape,dtype:n.dtype,name:n.name+"_input"});n.apply(i)}if(t)this.outputs=r.outputs,this.inputs=r.inputs;else{if(1!==n.inboundNodes.length)throw new X(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${n.name} which has ${n.inboundNodes.length} pre-existing inbound connections.`);if(1!==n.inboundNodes[0].outputTensors.length)throw new X("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(n),this.outputs=[n.inboundNodes[0].outputTensors[0]],this.inputs=e7(this.outputs[0])}this.inboundNodes=[],new A1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Nh(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{let i=n.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(n),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(n),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let n=this.layers.length-1;this.layers[n].outboundNodes=[],this.outputs=[this.layers[n].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(n,t){return null==this.model&&this.build(),this.model.call(n,t)}build(n){if(Vt(n),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Cl({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(n,t,r=console.log){this.built||this.build(),super.summary(n,t,r)}setWeights(n){null==this.model&&this.build(),this.model.setWeights(n)}evaluate(n,t,r={}){if(!this.built)throw new Eo("The model needs to be compiled before being used.");return this.model.evaluate(n,t,r)}evaluateDataset(n,t){var r=this;return R(function*(){if(!r.built)throw new Eo("The model needs to be compiled before being used.");return r.model.evaluateDataset(n,t)})()}predict(n,t={}){return null==this.model&&this.build(),this.model.predict(n,t)}predictOnBatch(n){return null==this.model&&this.build(),this.model.predictOnBatch(n)}compile(n){this.build(),this.model.compile(n),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(n){this.model.optimizer=n}fit(n,t,r={}){var i=this;return R(function*(){if(!i.built)throw new Eo("The model needs to be compiled before being used.");return i.model.fit(n,t,r)})()}fitDataset(n,t){var r=this;return R(function*(){if(!r.built)throw new Eo("The model needs to be compiled before being used.");return r.model.fitDataset(n,t)})()}trainOnBatch(n,t){var r=this;return R(function*(){return r.model.trainOnBatch(n,t)})()}static fromConfig(n,t,r={},i=!1){let a,s={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new X("Legacy serialization format not supported yet.");a=t}else w.assert(null!=t.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=t.layers,delete t.layers,s=t;let o=new n(s);if(!(o instanceof X$))throw new It(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(let l of a){let c=Ys(l,void 0,i);i&&c.setFastWeightInitDuringBuild(!0),o.add(c)}return o}set stopTraining(n){if(null==this.model)throw new X("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=n}get stopTraining(){if(null==this.model)throw new X("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let n=[];for(let t of this.layers){let r={};r.className=t.getClassName(),r.config=t.getConfig(),n.push(r)}return{name:this.name,layers:n}}};function SAe(e){return new Cl(e)}function IAe(e){return new z1(e)}function N7(e){return t7(e)}function MAe(e,n){MT.registerCallbackConstructor(e,n)}z1.className="Sequential",fe.registerClass(z1);var Ji=class extends fe.Serializable{getConfig(){return{}}},O7=class extends Ji{apply(e,n=1){return function q2e(e,n=1){if(1!==n)throw new It(`Support for alpha values other than 1 (${n}) is not implemented yet.`);return Um(e)}(e,n)}};O7.className="elu",fe.registerClass(O7);var F7=class extends Ji{apply(e){return Zw(e)}};F7.className="selu",fe.registerClass(F7);var R7=class extends Ji{apply(e){return an(e)}};R7.className="relu",fe.registerClass(R7);var P7=class extends Ji{apply(e){return G(()=>Sc(6,an(e)))}};P7.className="relu6",fe.registerClass(P7);var L7=class extends Ji{apply(e){return e}};L7.className="linear",fe.registerClass(L7);var $7=class extends Ji{apply(e){return bs(e)}};$7.className="sigmoid",fe.registerClass($7);var B7=class extends Ji{apply(e){return function X2e(e){return G(()=>{let n=se(.5,U(.2,e));return gi(n,0,1)})}(e)}};B7.className="hardSigmoid",fe.registerClass(B7);var V7=class extends Ji{apply(e){return Ih(e)}};V7.className="softplus",fe.registerClass(V7);var z7=class extends Ji{apply(e){return function K2e(e){return G(()=>Te(e,se(br(e),1)))}(e)}};z7.className="softsign",fe.registerClass(z7);var U7=class extends Ji{apply(e){return vh(e)}};U7.className="tanh",fe.registerClass(U7);var GT=class extends Ji{apply(e,n=-1){return Mc(e,n)}};GT.className="softmax",fe.registerClass(GT);var H7=class extends Ji{apply(e,n=-1){return Hw(e,n)}};H7.className="logSoftmax",fe.registerClass(H7);var W7=class extends Ji{apply(e,n=1){return G(()=>U(bs(U(e,n)),e))}};W7.className="swish",fe.registerClass(W7);var j7=class extends Ji{apply(e){return G(()=>U(e,vh(Ih(e))))}};function Rc(e){return e.getClassName()}function qT(e,n={}){return b_(e,fe.SerializationMap.getMap().classNameMap,n,"activation")}function Pc(e){if(null==e){return qT({className:"linear",config:{}})}if("string"==typeof e){let n={};return n.className=e,n.config={},qT(n)}return e instanceof Ji?e:qT(e)}function KT(e){if(null!=e&&"object"!=typeof e)throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}j7.className="mish",fe.registerClass(j7);var G7=class extends fe.Serializable{},E_=class extends G7{constructor(e){super(),KT(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return G(()=>{let n=Kn([1]);return this.hasL1&&(n=se(n,Re(U(this.l1,br(e))))),this.hasL2&&(n=se(n,Re(U(this.l2,x_(e))))),H(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}};E_.className="L1L2",fe.registerClass(E_);var q7={l1l2:"L1L2"};function wn(e){return rT(e)}function K7(e,n={}){return b_(e,fe.SerializationMap.getMap().classNameMap,n,"regularizer")}function Vn(e){return null==e?null:"string"==typeof e?K7({className:e in q7?q7[e]:e,config:{}}):e instanceof G7?e:K7(e)}var XT=class extends Mt{constructor(e){super(e??{}),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,n){e=Qe(e);let t=an(e);return null!=this.maxValue&&(t=gi(t,0,this.maxValue)),t}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}};XT.className="ReLU",fe.registerClass(XT);var YT=class extends Mt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,n){let t=Qe(e);return o_(t,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};YT.className="LeakyReLU",fe.registerClass(YT);var ZT=class extends Mt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Bn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Vn(e.alphaRegularizer),this.alphaConstraint=Fr(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new X(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){let n=(e=Vt(e)).slice(1);if(null!=this.sharedAxes)for(let r of this.sharedAxes)n[r-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let t={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)t[r]=e[r];this.inputSpec=[new xr({ndim:e.length,axes:t})],this.built=!0}call(e,n){return e=Qe(e),p_(e,this.alpha.read())}getConfig(){let e={alphaInitializer:Xn(this.alphaInitializer),alphaRegularizer:wn(this.alphaRegularizer),alphaConstraint:Or(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}};ZT.className="PReLU",fe.registerClass(ZT);var QT=class extends Mt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new It(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,n){let t=Qe(e);return Um(t)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};QT.className="ELU",fe.registerClass(QT);var JT=class extends Mt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,n){let t=Qe(e);return U(t,xe(Fi(t,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}};JT.className="ThresholdedReLU",fe.registerClass(JT);var eN=class extends Mt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new GT).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,n){return G(()=>{let t=Qe(e),r=n.mask;if(null!=r){let i=U(Ee(Xi(t.shape),xe(r,t.dtype)),He(-1e9));t=se(t,i)}return this.axis instanceof Array?this.axis.length>1?yi(Ee(t,c_(t,this.axis,!0))):this.softmax(t,this.axis[0]):this.softmax(t,this.axis)})}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}};function lg(e,n,t){if("number"==typeof e)return Nh(e,n);if(e.length!==n)throw new X(`The ${t} argument must be an integer or tuple of ${n} integers. Received: ${e.length} elements.`);for(let r=0;r<n;++r){let i=e[r];if(!H2e(i))throw new X(`The ${t} argument must be an integer or tuple of ${n} integers. Received: ${JSON.stringify(e)} including a non-integer number ${i}`)}return e}function Qs(e,n,t,r,i=1){if(null==e)return e;let s;return s="same"===t?e:e-(n+(n-1)*(i-1))+1,Math.floor((s+r-1)/r)}function To(e,n,t,r){if(null==e)return null;if("valid"===r)e=e*n+Oc([t-n,0]);else{if("same"!==r)throw new X(`Unsupport padding mode: ${r}.`);e*=n}return e}function tN(e,n){return G(()=>(sr(n),"channelsFirst"===n?kt(e,[0,2,3,1]):e))}function X7(e,n){return G(()=>(sr(n),"channelsFirst"===n?kt(e,[0,2,3,4,1]):e))}function Y7(e,n,t,r=[1,1],i="valid",a,s,o=null){return G(()=>{if(null==a&&(a="channelsLast"),sr(a),3!==e.rank&&4!==e.rank)throw new X(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(3!==n.rank&&4!==n.rank)throw new X(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=tN(e,a);if("causal"===i)throw new It("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=eg.conv2d({x:l,filter:n,strides:r,pad:"same"===i?"same":"valid",dilations:s,dataFormat:"NHWC",bias:t,activation:o}),"channelsFirst"===a&&(l=kt(l,[0,3,1,2])),l})}eN.className="Softmax",fe.registerClass(eN);var Z7=class gie extends Mt{constructor(n,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",gie.verifyArgs(t),this.rank=n,qr(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new It(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=lg(t.kernelSize,n,"kernelSize"),this.strides=lg(null==t.strides?1:t.strides,n,"strides"),this.padding=null==t.padding?"valid":t.padding,Ga(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,sr(this.dataFormat),this.activation=Pc(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=Bn(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Fr(t.biasConstraint),this.biasRegularizer=Vn(t.biasRegularizer),this.activityRegularizer=Vn(t.activityRegularizer),this.dilationRate=lg(null==t.dilationRate?1:t.dilationRate,n,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new X(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new X(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new X(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(n){if(Do("kernelSize"in n,"required key 'kernelSize' not in config"),"number"!=typeof n.kernelSize&&!aT(n.kernelSize,"number",1,3))throw new X(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(n.kernelSize)}.`)}getConfig(){let n={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Rc(this.activation),useBias:this.useBias,biasInitializer:Xn(this.biasInitializer),biasRegularizer:wn(this.biasRegularizer),activityRegularizer:wn(this.activityRegularizer),biasConstraint:Or(this.biasConstraint)},t=super.getConfig();return Object.assign(n,t),n}},U1=class yie extends Z7{constructor(n,t){super(n,t),this.kernel=null,yie.verifyArgs(t),this.filters=t.filters,qr(this.filters,"filters"),this.kernelInitializer=Bn(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Fr(t.kernelConstraint),this.kernelRegularizer=Vn(t.kernelRegularizer)}build(n){n=Vt(n);let t="channelsFirst"===this.dataFormat?1:n.length-1;if(null==n[t])throw new X(`The channel dimension of the input should be defined. Found ${n[t]}`);let r=n[t],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:r}}],this.built=!0}call(n,t){return G(()=>{n=Qe(n);let r,i=null==this.bias?null:this.bias.read(),a=VG(this.activation.getClassName());if(null!=a&&2===this.rank)r=Y7(n,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(1===this.rank)r=function AAe(e,n,t,r=1,i="valid",a,s=1){return G(()=>{if(null==a&&(a="channelsLast"),sr(a),3!==e.shape.length)throw new X(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(3!==n.shape.length)throw new X(`The kernel for a conv1dWithBias operation should be 3, but is ${n.shape.length} instead`);if(null!=t&&1!==t.shape.length)throw new X(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if("channelsFirst"===a&&(e=kt(e,[0,2,1])),"causal"===i)throw new It("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=Pw(e,n,r,"same"===i?"same":"valid","NWC",s);return null!=t&&(o=Ks(o,t)),o})}(n,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)r=Y7(n,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new It("convolutions greater than 3D are not implemented yet.");r=function TAe(e,n,t,r=[1,1,1],i="valid",a,s){return G(()=>{if(null==a&&(a="channelsLast"),sr(a),4!==e.rank&&5!==e.rank)throw new X(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(4!==n.rank&&5!==n.rank)throw new X(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let o=X7(e,a);if("causal"===i)throw new It("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=UD(o,n,r,"same"===i?"same":"valid","NDHWC",s),null!=t&&(o=Ks(o,t)),"channelsFirst"===a&&(o=kt(o,[0,4,1,2,3])),o})}(n,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(r=this.activation.apply(r))}return r})}computeOutputShape(n){n=Vt(n);let t=[],r="channelsLast"===this.dataFormat?n.slice(1,n.length-1):n.slice(2);for(let a=0;a<r.length;++a){let s=Qs(r[a],this.kernelSize[a],this.padding,this.strides[a],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[a]);t.push(s)}let i=[n[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t),i.push(this.filters)):(i.push(this.filters),i=i.concat(t)),i}getConfig(){let n={filters:this.filters,kernelInitializer:Xn(this.kernelInitializer),kernelRegularizer:wn(this.kernelRegularizer),kernelConstraint:Or(this.kernelConstraint)},t=super.getConfig();return Object.assign(n,t),n}static verifyArgs(n){if(!("filters"in n)||"number"!=typeof n.filters||n.filters<1)throw new X(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(n.filters)}`)}},H1=class bie extends U1{constructor(n){super(2,n),bie.verifyArgs(n)}getConfig(){let n=super.getConfig();return delete n.rank,n}static verifyArgs(n){if("number"!=typeof n.kernelSize&&!aT(n.kernelSize,"number",1,2))throw new X(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(n.kernelSize)}.`)}};H1.className="Conv2D",fe.registerClass(H1);var W1=class _ie extends U1{constructor(n){super(3,n),_ie.verifyArgs(n)}getConfig(){let n=super.getConfig();return delete n.rank,n}static verifyArgs(n){if("number"!=typeof n.kernelSize&&(!Array.isArray(n.kernelSize)||1!==n.kernelSize.length&&3!==n.kernelSize.length))throw new X(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(n.kernelSize)}.`)}};W1.className="Conv3D",fe.registerClass(W1);var nN=class extends H1{constructor(e){if(super(e),this.inputSpec=[new xr({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new X(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(4!==(e=Vt(e)).length)throw new X("Input should have rank 4; Received input shape: "+JSON.stringify(e));let n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new X("The channel dimension of the inputs should be defined. Found `None`.");let t=e[n],r=this.kernelSize.concat([this.filters,t]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new xr({ndim:4,axes:{[n]:t}})],this.built=!0}call(e,n){return G(()=>{let t=Qe(e);if(4!==t.shape.length)throw new X(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);let a,s,r=t.shape;"channelsFirst"===this.dataFormat?(a=2,s=3):(a=1,s=2);let l=r[s],u=this.kernelSize[1],d=this.strides[1],m=[r[0],To(r[a],this.strides[0],this.kernelSize[0],this.padding),To(l,d,u,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=kt(t,[0,2,3,1]));let g=Lw(t,this.kernel.read(),m,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(g=kt(g,[0,3,1,2])),null!=this.bias&&(g=Ks(g,this.bias.read(),this.dataFormat)),null!=this.activation&&(g=this.activation.apply(g)),g})}computeOutputShape(e){let t,r,i,n=(e=Vt(e)).slice();"channelsFirst"===this.dataFormat?(t=1,r=2,i=3):(t=3,r=1,i=2);let a=this.kernelSize[0],s=this.kernelSize[1],o=this.strides[0],l=this.strides[1];return n[t]=this.filters,n[r]=To(n[r],o,a,this.padding),n[i]=To(n[i],l,s,this.padding),n}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};nN.className="Conv2DTranspose",fe.registerClass(nN);var rN=class extends W1{constructor(e){if(super(e),this.inputSpec=[new xr({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new X(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(5!==(e=Vt(e)).length)throw new X("Input should have rank 5; Received input shape: "+JSON.stringify(e));let n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new X("The channel dimension of the inputs should be defined. Found `None`.");let t=e[n],r=this.kernelSize.concat([this.filters,t]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new xr({ndim:5,axes:{[n]:t}})],this.built=!0}call(e,n){return G(()=>{let t=Qe(e);if(5!==t.shape.length)throw new X(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);let a,s,o,r=t.shape;"channelsFirst"===this.dataFormat?(o=2,a=3,s=4):(o=1,a=2,s=3);let c=r[a],u=r[s],d=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[1],g=this.strides[2],v=[r[0],To(r[o],this.strides[0],this.kernelSize[0],this.padding),To(c,m,d,this.padding),To(u,g,p,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=kt(t,[0,2,3,4,1]));let x=HD(t,this.kernel.read(),v,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(x=kt(x,[0,4,1,2,3])),null!==this.bias&&(x=Ks(x,this.bias.read(),this.dataFormat)),null!==this.activation&&(x=this.activation.apply(x)),x})}computeOutputShape(e){let t,r,i,a,n=(e=Vt(e)).slice();"channelsFirst"===this.dataFormat?(t=1,r=2,i=3,a=4):(t=4,r=1,i=2,a=3);let s=this.kernelSize[0],o=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],u=this.strides[1],h=this.strides[2];return n[t]=this.filters,n[r]=To(n[r],c,s,this.padding),n[i]=To(n[i],u,o,this.padding),n[a]=To(n[a],h,l,this.padding),n}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};rN.className="Conv3DTranspose",fe.registerClass(rN);var Q7=class extends U1{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==n.filters)throw new X("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=n.kernelInitializer||null!=n.kernelRegularizer||null!=n.kernelConstraint)throw new X("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=n.padding&&"same"!==n.padding&&"valid"!==n.padding)throw new X(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=null==n.depthMultiplier?1:n.depthMultiplier,this.depthwiseInitializer=Bn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Vn(n.depthwiseRegularizer),this.depthwiseConstraint=Fr(n.depthwiseConstraint),this.pointwiseInitializer=Bn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Vn(n.pointwiseRegularizer),this.pointwiseConstraint=Fr(n.pointwiseConstraint)}build(e){if((e=Vt(e)).length<this.rank+2)throw new X(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);let n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n]||e[n]<0)throw new X(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);let t=e[n],r=this.kernelSize.concat([t,this.depthMultiplier]),i=[];for(let s=0;s<this.rank;++s)i.push(1);i.push(t*this.depthMultiplier,this.filters);let a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):null,this.inputSpec=[new xr({ndim:this.rank+2,axes:{[n]:t}})],this.built=!0}call(e,n){return G(()=>{let t;if(e=Qe(e),1===this.rank)throw new It("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=kt(e,[0,2,3,1])),t=Ym(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=Ks(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=kt(t,[0,3,1,2])),t})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Xn(this.depthwiseInitializer),e.pointwiseInitializer=Xn(this.pointwiseInitializer),e.depthwiseRegularizer=wn(this.depthwiseRegularizer),e.pointwiseRegularizer=wn(this.pointwiseRegularizer),e.depthwiseConstraint=Or(this.depthwiseConstraint),e.pointwiseConstraint=Or(this.pointwiseConstraint),e}};Q7.className="SeparableConv";var iN=class extends Q7{constructor(e){super(2,e)}};iN.className="SeparableConv2D",fe.registerClass(iN);var aN=class vie extends U1{constructor(n){super(1,n),vie.verifyArgs(n),this.inputSpec=[{ndim:3}]}getConfig(){let n=super.getConfig();return delete n.rank,delete n.dataFormat,n}static verifyArgs(n){if("number"!=typeof n.kernelSize&&!aT(n.kernelSize,"number",1,1))throw new X(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(n.kernelSize)}.`)}};aN.className="Conv1D",fe.registerClass(aN);var sN=class extends Mt{constructor(e){super(e),this.cropping="number"==typeof e.cropping?[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return G(()=>{if(e=Qe(e),"channelsLast"===this.dataFormat){let t=_1(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return _1(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{let t=_1(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return _1(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}};sN.className="Cropping2D",fe.registerClass(sN);var oN=class extends Mt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,sr(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,function V2e(e){Fh(P2e,"InterpolationFormat",e)}(this.interpolation)}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],null==e[2]?null:this.size[0]*e[2],null==e[3]?null:this.size[1]*e[3]]:[e[0],null==e[1]?null:this.size[0]*e[1],null==e[2]?null:this.size[1]*e[2],e[3]]}call(e,n){return G(()=>{let t=Qe(e),r=t.shape;if("channelsFirst"===this.dataFormat){t=kt(t,[0,2,3,1]);let i=this.size[0]*r[2],a=this.size[1]*r[3],s="nearest"===this.interpolation?ja.resizeNearestNeighbor(t,[i,a]):ja.resizeBilinear(t,[i,a]);return kt(s,[0,3,1,2])}{let i=this.size[0]*r[1],a=this.size[1]*r[2];return"nearest"===this.interpolation?ja.resizeNearestNeighbor(t,[i,a]):ja.resizeBilinear(t,[i,a])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}};oN.className="UpSampling2D",fe.registerClass(oN);var lN=class extends Z7{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=Bn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Fr(e.depthwiseConstraint),this.depthwiseRegularizer=Vn(e.depthwiseRegularizer)}build(e){if((e=Vt(e)).length<4)throw new X(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let n="channelsFirst"===this.dataFormat?1:3;if(null==e[n]||e[n]<0)throw new X(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);let t=e[n];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],t,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[t*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,n){return G(()=>{let t=function NAe(e,n,t=[1,1],r="valid",i,a){return G(()=>{null==i&&(i="channelsLast"),sr(i);let s=tN(e,i);if(4!==e.rank)throw new X(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==n.rank)throw new X(`depthwiseKernel is required to be 4-D, but is instead ${n.rank}-D`);return s=Ch(s,n,t,"same"===r?"same":"valid","NHWC",a),"channelsFirst"===i&&(s=kt(s,[0,3,1,2])),s})}(e=Qe(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=Ks(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t})}computeOutputShape(e){e=Vt(e);let t="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=Qs("channelsFirst"===this.dataFormat?e[2]:e[1],this.kernelSize[0],this.padding,this.strides[0]),a=Qs(t,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,i,a]:[e[0],i,a,r]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Xn(this.depthwiseInitializer),e.depthwiseRegularizer=wn(this.depthwiseRegularizer),e.depthwiseConstraint=Or(this.depthwiseRegularizer),e}};function J7(e,n,t,r){if(Array.isArray(e)){if(null!=n||null!=t)throw new X("When inputs is an array, neither initialState or constants should be provided");null!=r&&(t=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(n=e.slice(1,e.length)),e=e[0]}function i(a){return null==a||Array.isArray(a)?a:[a]}return{inputs:e,initialState:n=i(n),constants:t=i(t)}}function e9(e,n,t,r=!1,i,a,s=!1,o=!1){return G(()=>{let l=n.shape.length;if(l<3)throw new X(`Input should be at least 3D, but is ${l}D.`);let c=[1,0].concat(Gs(2,l));if(n=kt(n,c),null!=a)throw new It("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&((i=xe(xe(i,"bool"),"float32")).rank===l-1&&(i=jr(i,-1)),i=kt(i,c)),r&&(n=Wa(n,0),null!=i&&(i=Wa(i,0)));let h,m,g,u=[],d=t,p=n.shape[0],f=tr(n);null!=i&&(m=tr(i));for(let y=0;y<p;++y){let b=f[y],_=G(()=>e(b,d));if(null==i)h=_[0],d=_[1];else{let v=G(()=>{let x=m[y],S=Ee(wa(x),x);return{output:se(U(_[0],x),U(d[0],S)),newStates:d.map((N,F)=>se(U(_[1][F],x),U(N,S)))}});h=v.output,d=v.newStates}o&&u.push(h)}return o&&(g=vr(u,1)),[h,g,d]})}lN.className="DepthwiseConv2D",fe.registerClass(lN);var kl=class xie extends Mt{constructor(n){let t;if(super(n),null==n.cell)throw new X("cell property is missing for the constructor of RNN.");if(t=Array.isArray(n.cell)?new q1({cells:n.cell}):n.cell,null==t.stateSize)throw new X("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=n.returnSequences&&n.returnSequences,this.returnState=null!=n.returnState&&n.returnState,this.goBackwards=null!=n.goBackwards&&n.goBackwards,this._stateful=null!=n.stateful&&n.stateful,this.unroll=null!=n.unroll&&n.unroll,this.supportsMasking=!0,this.inputSpec=[new xr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){return null==this.states_?Gs(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(t=>null):this.states_}setStates(n){this.states_=n}computeOutputShape(n){bT(n)&&(n=n[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);let i,r=t[0];if(i=this.returnSequences?[n[0],n[1],r]:[n[0],r],this.returnState){let a=[];for(let s of t)a.push([n[0],s]);return[i].concat(a)}return i}computeMask(n,t){return G(()=>{Array.isArray(t)&&(t=t[0]);let r=this.returnSequences?t:null;if(this.returnState){let i=this.states.map(a=>null);return[r].concat(i)}return r})}get states(){if(null==this.states_){let n=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let r=0;r<n;++r)t.push(null);return t}return this.states_}set states(n){this.states_=n}build(n){if(null!=this.numConstants)throw new It("Constants support is not implemented in RNN yet.");bT(n)&&(n=n[0]);let t=this.stateful?n[0]:null,r=n.slice(2);this.inputSpec[0]=new xr({shape:[t,null,...r]});let a,i=[n[0]].concat(n.slice(2));if(this.cell.build(i),a=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!w.arraysEqual(this.stateSpec.map(s=>s.shape[s.shape.length-1]),a))throw new X(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(s=>new xr({shape:[null,s]}));this.stateful&&this.resetStates()}resetStates(n,t=!1){G(()=>{if(!this.stateful)throw new Ac("Cannot call resetStates() on an RNN Layer that is not stateful.");let r=this.inputSpec[0].shape[0];if(null==r)throw new X("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(i=>Kn([r,i])):[Kn([r,this.cell.stateSize])];else if(null==n)at(this.states_),null!=this.keptStates&&(at(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>Kn([r,i])):this.states_[0]=Kn([r,this.cell.stateSize]);else{if(Array.isArray(n)||(n=[n]),n.length!==this.states_.length)throw new X(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${n.length} state value(s). Input received: ${n}`);!0===t?this.keptStates.push(this.states_.slice()):at(this.states_);for(let i=0;i<this.states_.length;++i){let a=n[i],s=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,o=[r,s];if(!w.arraysEqual(a.shape,o))throw new X(`State ${i} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${a.shape}`);this.states_[i]=a}}this.states_=this.states_.map(i=>Ar(i.clone()))})}apply(n,t){let r=null==t?null:t.initialState,i=null==t?null:t.constants;null==t&&(t={});let a=J7(n,r,i,this.numConstants);n=a.inputs,r=a.initialState,i=a.constants;let s=[],o=[];if(null!=r){t.initialState=r,s=s.concat(r),this.stateSpec=[];for(let l of r)this.stateSpec.push(new xr({shape:l.shape}));o=o.concat(this.stateSpec)}if(null!=i&&(t.constants=i,s=s.concat(i),this.numConstants=i.length),s[0]instanceof Xs){let l=[n].concat(s),c=this.inputSpec.concat(o),u=this.inputSpec;this.inputSpec=c;let h=super.apply(l,t);return this.inputSpec=u,h}return super.apply(n,t)}call(n,t){return G(()=>{let r=null==t?null:t.mask,i=null==t?null:t.training,a=null==t?null:t.initialState;n=Qe(n),null==a&&(a=this.stateful?this.states_:this.getInitialState(n));let s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==s)throw new X(`RNN Layer has ${s} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let o={training:i},l=e9((p,f)=>{let m=this.cell.call([p].concat(f),o);return[m[0],m.slice(1)]},n,a,this.goBackwards,r,null,this.unroll,this.returnSequences),c=l[0],u=l[1],h=l[2];this.stateful&&this.resetStates(h,i);let d=this.returnSequences?u:c;return this.returnState?[d].concat(h):d})}getInitialState(n){return G(()=>{let t=Kn(n.shape);return t=Re(t,[1,2]),t=v_(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?cT(t,[1,r]):t):this.cell.stateSize>1?[cT(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(n)}getConfig(){let n=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);let r=this.cell.getConfig();return this.getClassName()===xie.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),n),t)}static fromConfig(n,t,r={}){let a=Ys(t.cell,r);return new n(Object.assign(t,{cell:a}))}};kl.className="RNN",fe.registerClass(kl);var D_=class extends Mt{},j1=class extends D_{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,qr(this.units,"units"),this.activation=Pc(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Bn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Bn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Bn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Vn(e.kernelRegularizer),this.recurrentRegularizer=Vn(e.recurrentRegularizer),this.biasRegularizer=Vn(e.biasRegularizer),this.kernelConstraint=Fr(e.kernelConstraint),this.recurrentConstraint=Fr(e.recurrentConstraint),this.biasConstraint=Fr(e.biasConstraint),this.dropout=rg([1,Oc([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=rg([1,Oc([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Vt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,n){return G(()=>{if(2!==e.length)throw new X(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let t=e[1];e=e[0];let r=null!=n.training&&n.training;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Lc({ones:()=>wa(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Lc({ones:()=>wa(t),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));let i,a=this.dropoutMask,s=this.recurrentDropoutMask;i=Ao(null!=a?U(e,a):e,this.kernel.read()),null!=this.bias&&(i=Ks(i,this.bias.read())),null!=s&&(t=U(t,s));let o=se(i,Ao(t,this.recurrentKernel.read()));return null!=this.activation&&(o=this.activation.apply(o)),[o,o]})}getConfig(){let e=super.getConfig(),n={units:this.units,activation:Rc(this.activation),useBias:this.useBias,kernelInitializer:Xn(this.kernelInitializer),recurrentInitializer:Xn(this.recurrentInitializer),biasInitializer:Xn(this.biasInitializer),kernelRegularizer:wn(this.kernelRegularizer),recurrentRegularizer:wn(this.recurrentRegularizer),biasRegularizer:wn(this.biasRegularizer),activityRegularizer:wn(this.activityRegularizer),kernelConstraint:Or(this.kernelConstraint),recurrentConstraint:Or(this.recurrentConstraint),biasConstraint:Or(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}};j1.className="SimpleRNNCell",fe.registerClass(j1);var cN=class extends kl{constructor(e){e.cell=new j1(e),super(e)}call(e,n){return G(()=>(null!=this.cell.dropoutMask&&(at(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(at(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})))}static fromConfig(e,n){return new e(n)}};cN.className="SimpleRNN",fe.registerClass(cN);var G1=class extends D_{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new X("GRUCell does not support reset_after parameter set to true.");this.units=e.units,qr(this.units,"units"),this.activation=Pc(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Pc(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Bn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Bn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Bn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Vn(e.kernelRegularizer),this.recurrentRegularizer=Vn(e.recurrentRegularizer),this.biasRegularizer=Vn(e.biasRegularizer),this.kernelConstraint=Fr(e.kernelConstraint),this.recurrentConstraint=Fr(e.recurrentConstraint),this.biasConstraint=Fr(e.biasConstraint),this.dropout=rg([1,Oc([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=rg([1,Oc([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Vt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(e,n){return G(()=>{if(2!==e.length)throw new X(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);let t=null!=n.training&&n.training,r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Lc({ones:()=>wa(e),rate:this.dropout,training:t,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Lc({ones:()=>wa(r),rate:this.recurrentDropout,training:t,count:3,dropoutFunc:this.dropoutFunc}));let s,o,l,a=this.recurrentDropoutMask;0<this.dropout&&this.dropout<1&&(e=U(e,this.dropoutMask[0]));let c=Ao(e,this.kernel.read());this.useBias&&(c=Ks(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=U(r,a[0]));let u=this.recurrentKernel.read(),[h,d]=Yi(u,[2*this.units,this.units],u.rank-1),p=Ao(r,h),[f,m,g]=Yi(c,3,c.rank-1),[y,b]=Yi(p,2,p.rank-1);s=this.recurrentActivation.apply(se(f,y)),o=this.recurrentActivation.apply(se(m,b));let _=Ao(U(o,r),d);l=this.activation.apply(se(g,_));let v=se(U(s,r),U(se(1,Dn(s)),l));return[v,v]})}getConfig(){let e=super.getConfig(),n={units:this.units,activation:Rc(this.activation),recurrentActivation:Rc(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Xn(this.kernelInitializer),recurrentInitializer:Xn(this.recurrentInitializer),biasInitializer:Xn(this.biasInitializer),kernelRegularizer:wn(this.kernelRegularizer),recurrentRegularizer:wn(this.recurrentRegularizer),biasRegularizer:wn(this.biasRegularizer),activityRegularizer:wn(this.activityRegularizer),kernelConstraint:Or(this.kernelConstraint),recurrentConstraint:Or(this.recurrentConstraint),biasConstraint:Or(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}};G1.className="GRUCell",fe.registerClass(G1);var uN=class extends kl{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new G1(e),super(e)}call(e,n){return G(()=>(null!=this.cell.dropoutMask&&(at(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(at(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})))}static fromConfig(e,n){return 0===n.implmentation&&(n.implementation=1),new e(n)}};uN.className="GRU",fe.registerClass(uN);var A_=class extends D_{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,qr(this.units,"units"),this.activation=Pc(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=Pc(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Bn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Bn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Bn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Vn(e.kernelRegularizer),this.recurrentRegularizer=Vn(e.recurrentRegularizer),this.biasRegularizer=Vn(e.biasRegularizer),this.kernelConstraint=Fr(e.kernelConstraint),this.recurrentConstraint=Fr(e.recurrentConstraint),this.biasConstraint=Fr(e.biasConstraint),this.dropout=rg([1,Oc([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=rg([1,Oc([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;let r;if(e=Vt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){let i=this.biasInitializer,a=this.units;r=new((n=class extends xs{apply(s,o){let l=i.apply([a]),c=(new x1).apply([a]),u=i.apply([2*a]);return qG(qG(l,c),u)}}).className="CustomInit",n)}else r=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,r,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return G(()=>{let t=null!=n.training&&n.training;if(3!==e.length)throw new X(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1],i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Lc({ones:()=>wa(e),rate:this.dropout,training:t,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Lc({ones:()=>wa(r),rate:this.recurrentDropout,training:t,count:4,dropoutFunc:this.dropoutFunc}));let o,l,c,u,s=this.recurrentDropoutMask;0<this.dropout&&this.dropout<1&&(e=U(e,this.dropoutMask[0]));let h=Ao(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=U(r,s[0])),h=se(h,Ao(r,this.recurrentKernel.read())),this.useBias&&(h=Ks(h,this.bias.read()));let[d,p,f,m]=Yi(h,4,h.rank-1);o=this.recurrentActivation.apply(d),l=this.recurrentActivation.apply(p),c=se(U(l,i),U(o,this.activation.apply(f))),u=this.recurrentActivation.apply(m);let g=U(u,this.activation.apply(c));return[g,g,c]})}getConfig(){let e=super.getConfig(),n={units:this.units,activation:Rc(this.activation),recurrentActivation:Rc(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Xn(this.kernelInitializer),recurrentInitializer:Xn(this.recurrentInitializer),biasInitializer:Xn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:wn(this.kernelRegularizer),recurrentRegularizer:wn(this.recurrentRegularizer),biasRegularizer:wn(this.biasRegularizer),activityRegularizer:wn(this.activityRegularizer),kernelConstraint:Or(this.kernelConstraint),recurrentConstraint:Or(this.recurrentConstraint),biasConstraint:Or(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}};A_.className="LSTMCell",fe.registerClass(A_);var dN=class extends kl{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new A_(e),super(e)}call(e,n){return G(()=>(null!=this.cell.dropoutMask&&(at(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(at(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(e,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})))}static fromConfig(e,n){return 0===n.implmentation&&(n.implementation=1),new e(n)}};dN.className="LSTM",fe.registerClass(dN);var q1=class extends D_{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return G(()=>{let t=e.slice(1),r=[];for(let s of this.cells.slice().reverse())Array.isArray(s.stateSize)?r.push(t.splice(0,s.stateSize.length)):r.push(t.splice(0,1));r.reverse();let a,i=[];for(let s=0;s<this.cells.length;++s){let o=this.cells[s];t=r[s],a=0===s?[e[0]].concat(t):[a[0]].concat(t),a=o.call(a,n),i.push(a.slice(1))}t=[];for(let s of i.slice().reverse())t.push(...s);return[a[0]].concat(t)})}build(e){let n;bT(e)&&(e=e[0]),this.cells.forEach((t,r)=>{Rh(`RNNCell_${r}`,()=>{t.build(e),n=Array.isArray(t.stateSize)?t.stateSize[0]:t.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){let e=super.getConfig(),t={cells:this.cells.map(r=>({className:r.getClassName(),config:r.getConfig()}))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,n,t={}){let r=[];for(let i of n.cells)r.push(Ys(i,t));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){let n=[];for(let t of this.cells)n.push(...t.trainableWeights);return n.concat(e)}return e}getWeights(){let e=[];for(let n of this.cells)e.push(...n.weights);return _T(e)}setWeights(e){let n=[];for(let t of this.cells){let i=e.splice(t.weights.length);for(let a=0;a<t.weights.length;++a)n.push([t.weights[a],i[a]])}vT(n)}};function Lc(e){let{ones:n,rate:t,training:r=!1,count:i=1,dropoutFunc:a}=e,s=()=>null!=a?a(n(),t):XG(n(),t),o=()=>w_(s,n,r);return!i||i<=1?Ar(o().clone()):Array(i).fill(void 0).map(o).map(l=>Ar(l.clone()))}q1.className="StackedRNNCells",fe.registerClass(q1);var t9=class extends kl{constructor(e){if(e.unroll)throw new It("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new It("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new xr({ndim:5})]}call(e,n){return G(()=>{if(null!=this.cell.dropoutMask&&(at(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(at(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new X("ConvRNN2D cell does not support constants");return super.call(e,{mask:null==n?null:n.mask,training:null==n?null:n.training,initialState:null==n?null:n.initialState})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return G(()=>{let{stateSize:n}=this.cell,r=this.computeSingleOutputShape(e.shape),a=Kn([r[0],...r.slice(2)]);return Array.isArray(n)?Array(n.length).fill(a):[a]})}resetStates(e,n=!1){G(()=>{if(!this.stateful)throw new Ac("Cannot call resetStates() on an RNN Layer that is not stateful.");let t=this.inputSpec[0].shape,r=this.computeSingleOutputShape(t),i=[r[0],...r.slice(2)];if(null==t[0])throw new X("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(()=>Kn(i)):[Kn(i)];else if(null==e)at(this.states_),null!=this.keptStates&&(at(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Kn(i)):this.states_[0]=Kn(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new X(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):at(this.states_);for(let a=0;a<this.states_.length;++a){let s=e[a],o=i;if(!w.arraysEqual(s.shape,o))throw new X(`State ${a} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${s.shape}`);this.states_[a]=s}}this.states_=this.states_.map(a=>Ar(a.clone()))})}computeSingleOutputShape(e){let{dataFormat:n,filters:t,kernelSize:r,padding:i,strides:a,dilationRate:s}=this.cell,o="channelsFirst"===n,c=e[o?4:3],u=Qs(e[o?3:2],r[0],i,a[0],s[0]),h=Qs(c,r[1],i,a[1],s[1]);return[...e.slice(0,2),...o?[t,u,h]:[u,h,t]]}};t9.className="ConvRNN2D";var K1=class extends A_{constructor(e){let{filters:n,kernelSize:t,strides:r,padding:i,dataFormat:a,dilationRate:s}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,qr(this.filters,"filters"),this.kernelSize=lg(t,2,"kernelSize"),this.kernelSize.forEach(o=>qr(o,"kernelSize")),this.strides=lg(r||1,2,"strides"),this.strides.forEach(o=>qr(o,"strides")),this.padding=i||"valid",Ga(this.padding),this.dataFormat=a||"channelsLast",sr(this.dataFormat),this.dilationRate=lg(s||1,2,"dilationRate"),this.dilationRate.forEach(o=>qr(o,"dilationRate"))}build(e){var n;e=Vt(e);let t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new X(`The channel dimension of the input should be defined. Found ${e[t]}`);let a=this.kernelSize.concat([e[t],4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let s=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",s,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let o;if(this.unitForgetBias){let l=this.biasInitializer,c=this.filters;o=new((n=class extends xs{apply(u,h){return lT([l.apply([c]),Xi([c]),l.apply([2*c])])}}).className="CustomInit",n)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return G(()=>{if(3!==e.length)throw new X(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let t=n.training||!1,r=e[0],i=e[1],a=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Lc({ones:()=>wa(r),rate:this.dropout,training:t,count:4,dropoutFunc:this.dropoutFunc}));let o=this.dropoutMask,l=(J,te,ie)=>te&&te[ie]?U(te[ie],J):J,c=l(r,o,0),u=l(r,o,1),h=l(r,o,2),d=l(r,o,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Lc({ones:()=>wa(i),rate:this.recurrentDropout,training:t,count:4,dropoutFunc:this.dropoutFunc}));let p=this.recurrentDropoutMask,f=l(i,p,0),m=l(i,p,1),g=l(i,p,2),y=l(i,p,3),[_,v,x,S]=Yi(this.kernel.read(),4,3),[M,D,N,F]=this.useBias?Yi(this.bias.read(),4):[null,null,null,null];c=this.inputConv(c,_,M,this.padding),u=this.inputConv(u,v,D,this.padding),h=this.inputConv(h,x,N,this.padding),d=this.inputConv(d,S,F,this.padding);let[O,k,P,j]=Yi(this.recurrentKernel.read(),4,3);f=this.recurrentConv(f,O),m=this.recurrentConv(m,k),g=this.recurrentConv(g,P),y=this.recurrentConv(y,j);let Z=this.recurrentActivation.apply(se(c,f)),z=this.recurrentActivation.apply(se(u,m)),W=se(U(z,a),U(Z,this.activation.apply(se(h,g)))),q=U(this.recurrentActivation.apply(se(d,y)),this.activation.apply(W));return[q,q,W]})}getConfig(){let t=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}(super.getConfig(),["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},t),r)}inputConv(e,n,t,r){let i=Oi(e,n,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return t?Ks(i,t,this.dataFormat):i}recurrentConv(e,n){return Oi(e,n,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}};K1.className="ConvLSTM2DCell",fe.registerClass(K1);var hN=class extends t9{constructor(e){let n=new K1(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}};hN.className="ConvLSTM2D",fe.registerClass(hN);var X1=class extends Mt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;let n=e.shape,t=[];for(let r=0;r<this.noiseShape.length;++r)t.push(null==this.noiseShape[r]?n[r]:this.noiseShape[r]);return t}call(e,n){return G(()=>{this.invokeCallHook(e,n);let t=Qe(e);if(0<this.rate&&this.rate<1){let r=null!=n.training&&n.training,i=this.getNoiseShape(t);return w_(()=>XG(t,this.rate,i,this.seed),()=>t,r)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}};X1.className="Dropout",fe.registerClass(X1);var pN=class extends X1{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let n=e.shape;return[n[0],1,n[2]]}};pN.className="SpatialDropout1D",fe.registerClass(pN);var fN=class extends Mt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let n=null;null!=e.batchSize&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,qr(this.units,"units"),this.activation=Pc(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=Bn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Bn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Fr(e.kernelConstraint),this.biasConstraint=Fr(e.biasConstraint),this.kernelRegularizer=Vn(e.kernelRegularizer),this.biasRegularizer=Vn(e.biasRegularizer),this.activityRegularizer=Vn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){let n=(e=Vt(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){let n=(e=Vt(e)).slice();return n[n.length-1]=this.units,n}call(e,n){return G(()=>{this.invokeCallHook(e,n);let i,t=Qe(e),r=VG(this.activation.getClassName());return null!=r?i=Ao(t,this.kernel.read(),r,this.bias?this.bias.read():null):(i=Ao(t,this.kernel.read()),null!=this.bias&&(i=Ks(i,this.bias.read())),null!=this.activation&&(i=this.activation.apply(i))),i})}getConfig(){let e={units:this.units,activation:Rc(this.activation),useBias:this.useBias,kernelInitializer:Xn(this.kernelInitializer),biasInitializer:Xn(this.biasInitializer),kernelRegularizer:wn(this.kernelRegularizer),biasRegularizer:wn(this.biasRegularizer),activityRegularizer:wn(this.activityRegularizer),kernelConstraint:Or(this.kernelConstraint),biasConstraint:Or(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}};fN.className="Dense",fe.registerClass(fN);var mN=class extends Mt{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Vt(e);for(let n of e.slice(1))if(null==n)throw new X(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Nc(e,1)]}call(e,n){return G(()=>{this.invokeCallHook(e,n);let t=Qe(e);if("channelsFirst"===this.dataFormat&&t.rank>1){let r=[0];for(let i=2;i<t.rank;++i)r.push(i);r.push(1),t=kt(t,r)}return function G2e(e){if(e.rank<=1)throw new X(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);let n=[e.shape[0],Nc(e.shape,1)];return H(e,n)}(t)})}getConfig(){let e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);let n=super.getConfig();return Object.assign(e,n),e}};mN.className="Flatten",fe.registerClass(mN);var gN=class extends Mt{constructor(e){super(e),this.supportsMasking=!0,this.activation=Pc(e.activation)}call(e,n){return G(()=>{this.invokeCallHook(e,n);let t=Qe(e);return this.activation.apply(t)})}getConfig(){let e={activation:Rc(this.activation)},n=super.getConfig();return Object.assign(e,n),e}};gN.className="Activation",fe.registerClass(gN);var yN=class extends Mt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return G(()=>function W2e(e,n){return G(()=>{if(2!==e.shape.length)throw new X(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);return cT(v_(e,1),[1,n,1])})}(e=Qe(e),this.n))}getConfig(){let e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}};yN.className="RepeatVector",fe.registerClass(yN);var bN=class extends Mt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,n){let t="Total size of new array must be unchanged.",r=n.slice(),i=1,a=null;for(let o=0;o<r.length;++o){let l=r[o];if(this.isUnknown(l)){if(null!==a)throw new X("Can only specifiy one unknown dimension.");a=o}else i*=l}let s=Nc(e);if(null!==a){if(0===i||s%i!=0)throw new X(t);r[a]=s/i}else if(s!==i)throw new X(t);return r}computeOutputShape(e){let n=!1;for(let t=0;t<e.length;++t)if(this.isUnknown(e[t])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return G(()=>{this.invokeCallHook(e,n);let t=Qe(e),r=t.shape,i=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return H(t,i)})}getConfig(){let e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}};bN.className="Reshape",fe.registerClass(bN);var _N=class extends Mt{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let n=Gs(1,e.dims.length+1);if(!w.arraysEqual(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new xr({ndim:this.dims.length+1})]}computeOutputShape(e){let n=(e=Vt(e)).slice();return this.dims.forEach((t,r)=>{n[r+1]=e[t]}),n}call(e,n){return kt(Qe(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}};_N.className="Permute",fe.registerClass(_N);var vN=class extends Mt{constructor(e){super(e??{}),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){let t=Qe(e);return Jb(Mh(t,this.maskValue),-1)}call(e,n){return G(()=>{this.invokeCallHook(e,n);let t=Qe(e),r=Jb(Mh(t,this.maskValue),-1,!0);return U(t,xe(r,t.dtype))})}};vN.className="Masking",fe.registerClass(vN);var xN=class extends Mt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),this.batchInputShape=null==e.inputLength?[n,null]:[n].concat(sn(e.inputLength))}this.inputDim=e.inputDim,qr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,qr(this.outputDim,"outputDim"),this.embeddingsInitializer=Bn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Vn(e.embeddingsRegularizer),this.activityRegularizer=Vn(e.activityRegularizer),this.embeddingsConstraint=Fr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return G(()=>this.maskZero?(e=Qe(e),Mh(e,Ft(e))):null)}computeOutputShape(e){if(e=Vt(e),null==this.inputLength)return[...e,this.outputDim];let n=sn(this.inputLength);if(n.length!==e.length-1)throw new X(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let t=0;for(let r=0;r<n.length;++r){let i=n[r],a=e[r+1];if(null!=i&&null!=a&&i!==a)throw new X(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==i&&(n[t]=a),t++}}return[e[0],...n,this.outputDim]}call(e,n){return G(()=>{this.invokeCallHook(e,n);let t=Qe(e);"int32"!==t.dtype&&(t=wl(t,"int32"));let r=KG(this.embeddings.read(),H(t,[t.size]));return H(r,Vt(this.computeOutputShape(t.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Xn(this.embeddingsInitializer),embeddingsRegularizer:wn(this.embeddingsRegularizer),activityRegularizer:wn(this.activityRegularizer),embeddingsConstraint:Or(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}};xN.className="Embedding",fe.registerClass(xN);var $h=class extends Mt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new It}computeElementwiseOpOutputShape(e,n){if(null==e||null==n)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(0===n.length)return e;let t=e.slice(0,e.length-n.length);for(let r=0;r<n.length;++r){let i=e[e.length-n.length+r],a=n[r];if(null==i||null==a||i<0||a<0)t.push(null);else if(1===i)t.push(a);else if(1===a)t.push(i);else{if(i!==a)throw new X("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));t.push(i)}}return t}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Vt(e)]),e.length<2)throw new X(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(let i of e)null!=i&&null!==i[0]&&n.push(i[0]);if(n=Tc(n),n.length>1)throw new X(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let t=null==e[0]?null:e[0].slice(1);for(let i=1;i<e.length;++i){let a=null==e[i]?null:e[i].slice(1);t=this.computeElementwiseOpOutputShape(t,a)}let r=e.map(i=>i.length);this.reshapeRequired=-1!==e.indexOf(null)||1!==Tc(r).length}call(e,n){return G(()=>{if(this.reshapeRequired){let t=[],r=e.map(i=>i.rank);if(-1===r.indexOf(null)){let i=Oc(r);for(let a of e){let s=a.rank;for(let o=0;o<i-s;++o)a=v_(a,1);t.push(a)}return this.mergeFunction(t)}{let i=!1;for(let o of e){let l=o.rank;if(null==l){let c=o.shape,u=c[0],h=c.slice(1).concat([u]),d=H(o,[u].concat(Nc(c.slice(1))));d=kt(d,[1,0]),d=H(d,h),t.push(d),i=!0}else if(l>1){let c=Gs(1,l).concat([0]);t.push(kt(o,c)),i=!0}else t.push(o)}let a=this.mergeFunction(t),s=a.rank;if(i)if(null==s){let o=a.shape,c=o[o.length-1],u=[c].concat(o.slice(0,o.length-1));a=H(kt(H(a,[-1,c]),[1,0]),u)}else if(s>1){let o=[s-1].concat(Gs(0,s-1));a=kt(a,o)}return a}}return this.mergeFunction(e)})}computeOutputShape(e){let n;n=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){let i=null==e[r]?null:e[r].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let t=[];for(let r of e)null!=r&&null!==r[0]&&t.push(r[0]);return t=Tc(t),n=1===t.length?t.concat(n):[null].concat(n),n}computeMask(e,n){return G(()=>{if(null==n)return null;if(!Array.isArray(n))throw new X("`mask` should be an Array");if(!Array.isArray(e))throw new X("`inputs` should be an Array");if(n.length!==e.length)throw new X(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(r=>null==r))return null;let t=(n=n.map(r=>null==r?r:jr(r,0)))[0];for(let r=1;r<n.length-1;++r)t=_s(t,n[r]);return t})}},wN=class extends $h{constructor(e){super(e)}mergeFunction(e){return G(()=>{let n=e[0].clone();for(let t=1;t<e.length;++t)n=se(n,e[t]);return n})}};wN.className="Add",fe.registerClass(wN);var CN=class extends $h{constructor(e){super(e)}mergeFunction(e){return G(()=>{let n=e[0].clone();for(let t=1;t<e.length;++t)n=U(n,e[t]);return n})}};CN.className="Multiply",fe.registerClass(CN);var kN=class extends $h{constructor(e){super(e)}mergeFunction(e){return G(()=>{let n=e[0].clone();for(let t=1;t<e.length;++t)n=se(n,e[t]);return U(1/e.length,n)})}};kN.className="Average",fe.registerClass(kN);var SN=class extends $h{constructor(e){super(e)}mergeFunction(e){return G(()=>{let n=e[0];for(let t=1;t<e.length;++t)n=ko(n,e[t]);return n})}};SN.className="Maximum",fe.registerClass(SN);var IN=class extends $h{constructor(e){super(e)}mergeFunction(e){return G(()=>{let n=e[0];for(let t=1;t<e.length;++t)n=Sc(n,e[t]);return n})}};IN.className="Minimum",fe.registerClass(IN);var MN=class extends $h{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new X("A `Concatenate` layer should be called on a list of at least 2 inputs");let n=!0;for(let r of e)if(null!=r){n=!1;break}if(n)return;let t=[];for(let r=0;r<e.length;++r){let i=e[r].slice();i.splice(this.axis,1);let a=!1;for(let s of t)if(w.arraysEqual(s,i)){a=!0;break}a||t.push(i)}if(t.length>1)throw new X("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return G(()=>lT(e,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new X("A `Concatenate` layer should be called on a list of inputs.");let n=e,t=n[0].slice(),r=this.axis<0?t.length+this.axis:this.axis;for(let i of n.slice(1)){if(null==t[r]||null==i[r]){t[r]=null;break}t[r]+=i[r]}return t}computeMask(e,n){if(null==n)return null;if(!Array.isArray(n))throw new X("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new X("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new X(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return G(()=>{let t=!0;if(n.forEach(a=>{null==a||(t=!1)}),t)return null;let r=[];for(let a=0;a<e.length;++a)r.push(null==n[a]?xe(wa(e[a]),"bool"):n[a].rank<e[a].rank?jr(n[a],-1):n[a]);let i=fn(r,this.axis);return Rw(i,-1,!1)})}getConfig(){let e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}};function T_(e,n){for(;e<0;)e+=n;return e}MN.className="Concatenate",fe.registerClass(MN);var EN=class extends $h{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){w.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let n=e[0],t=e[1];if(n.length>3||t.length>3)throw new It("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(n,t);if(n[r[0]]!==t[r[1]])throw new X(`Dimension incompatibility: ${n[r[0]]} !== ${t[r[1]]}`)}mergeFunction(e){if(2!==e.length)throw new X(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let r,n=e[0],t=e[1];return r=Array.isArray(this.axes)?this.axes.map((i,a)=>T_(i,e[a].shape.length)):[T_(this.axes,n.shape.length),T_(this.axes,t.shape.length)],this.normalize&&(n=O1(n,r[0]),t=O1(t,r[1])),function FAe(e,n,t){if(e.shape.length>3||n.shape.length>3)throw new It("batchDot is not implemented for tensors of 4D or higher rank yet");if(w.assert(e.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`),w.assert(e.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${n.shape.length}`),"number"==typeof t&&(t=[t,t]),"complex64"===e.dtype||"complex64"===n.dtype)throw new It("batchDot is not implemented for complex64-type Tensors yet.");let r=e.shape.length,i=n.shape.length;null==t&&(t=[r-1,i-2]);let a=t;return G(()=>{let s,o;if(r>i){s=r-i;let l=[];for(let c=0;c<s;++c)l.push(1);n=H(n,n.shape.concat(l))}else if(i>r){s=i-r;let l=[];for(let c=0;c<s;++c)l.push(1);e=H(e,e.shape.concat(l))}else s=0;if(o=2===e.shape.length&&2===n.shape.length?a[0]===a[1]?Re(U(e,n),a[0]):Re(U(kt(e,[1,0]),n),a[1]):Ct(e,n,a[0]!==e.shape.length-1,a[1]===n.shape.length-1),s>0){let l;l=r>i?r+i-3:r-1;let c=[];for(let u=l;u<l+s;++u)c.push(u);o=Ec(o,c)}return 1===o.shape.length&&(o=jr(o,1)),o})}(n,t,r)}interpretAxes(e,n){let t;return t=Array.isArray(this.axes)?this.axes:[T_(this.axes,e.length),T_(this.axes,n.length)],t}computeOutputShape(e){w.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let n=e[0].slice(),t=e[1].slice();if(n.length>3||t.length>3)throw new It("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(n,t);n.splice(r[0],1),t.splice(r[1],1),t.splice(0,1);let i=n.concat(t);return 1===i.length&&i.push(1),i}computeMask(e,n){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}};EN.className="Dot",fe.registerClass(EN);var DN=class extends Mt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return G(()=>{this.invokeCallHook(e,n);let t=Qe(e);return w_(()=>se(v1(t.shape,0,this.stddev),t),()=>t,n.training||!1)})}};DN.className="GaussianNoise",fe.registerClass(DN);var AN=class extends Mt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return G(()=>{this.invokeCallHook(e,n);let t=Qe(e);return this.rate>0&&this.rate<1?w_(()=>{let r=Math.sqrt(this.rate/(1-this.rate));return U(t,v1(t.shape,1,r))},()=>t,n.training||!1):t})}};AN.className="GaussianDropout",fe.registerClass(AN);var TN=class extends Mt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Qe(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return G(()=>{if(this.rate<1&&this.rate>0){let t=this._getNoiseShape(e);return w_(()=>{let r=Qe(e),i=-1.7580993408473766,a=bl(Ic(t),this.rate);a=wl(a,"float32");let s=((1-this.rate)*(1+this.rate*i**2))**-.5,o=-s*i*this.rate,l=se(U(r,a),U(se(a,-1),i));return se(U(l,s),o)},()=>Qe(e),n.training||!1)}return e})}};function N_(e,n,t,r,i,a=.001){let s;if(2===e.rank)s=ND(e,n,t,r,i,a);else if(3===e.rank)s=OD(e,n,t,r,i,a);else{if(4!==e.rank)throw new It(`batchNormalization is not implemented for array of rank ${e.rank} yet`);s=FD(e,n,t,r,i,a)}return s}TN.className="AlphaDropout",fe.registerClass(TN);var NN=class extends Mt{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=Bn(e.betaInitializer||"zeros"),this.gammaInitializer=Bn(e.gammaInitializer||"ones"),this.movingMeanInitializer=Bn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Bn(e.movingVarianceInitializer||"ones"),this.betaConstraint=Fr(e.betaConstraint),this.gammaConstraint=Fr(e.gammaConstraint),this.betaRegularizer=Vn(e.betaRegularizer),this.gammaRegularizer=Vn(e.gammaRegularizer)}build(e){e=Vt(e);let n=this.axis>=0?this.axis:this.axis+e.length,t=e[n];if(null==t)throw new X(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new xr({ndim:e.length,axes:{[n]:t}})];let r=[t];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return G(()=>{let t=null!=n.training&&n.training,r=Qe(e),i=r.shape,a=i.length,s=Gs(0,a),o=this.axis>=0?this.axis:this.axis+a;s.splice(o,1);let l=Nh(1,a);l[o]=i[o];let c=s.slice();c.sort();let u=!w.arraysEqual(c,Gs(0,a).slice(0,a-1));if(!t)return(()=>{if(u){let g=H(this.movingMean.read(),l),y=H(this.movingVariance.read(),l),b=this.center?H(this.beta.read(),l):null,_=this.scale?H(this.gamma.read(),l):null;return N_(r,g,y,b,_,this.epsilon)}return N_(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();let[d,p,f]=function LAe(e,n,t,r,i=.001){return w.arraysEqual(r.slice().sort(),Gs(0,e.rank-1))?function RAe(e,n,t,r,i=.001){return G(()=>{let a=d_(e,r),s=a.mean,o=a.variance;return[N_(e,s,o,t,n,i),s,o]})}(e,n,t,r,i):function PAe(e,n,t,r,i=.001){return G(()=>{let a=d_(e,r),s=a.mean,o=a.variance,l=[];for(let p of Gs(0,e.rank))-1!==r.indexOf(p)?l.push(1):l.push(e.shape[p]);let c=H(s,l),u=H(o,l),h=null==n?null:H(n,l),d=null==t?null:H(t,l);return[N_(e,c,u,d,h,i),s,o]})}(e,n,t,r,i)}(r,this.gamma.read(),this.beta.read(),s,this.epsilon),m=(g,y,b)=>{G(()=>{let _=1-b,v=g.read(),x=U(Ee(v,y),_);g.write(Ee(v,x))})};return m(this.movingMean,p,this.momentum),m(this.movingVariance,f,this.momentum),d})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Xn(this.betaInitializer),gammaInitializer:Xn(this.gammaInitializer),movingMeanInitializer:Xn(this.movingMeanInitializer),movingVarianceInitializer:Xn(this.movingVarianceInitializer),betaRegularizer:wn(this.betaRegularizer),gammaRegularizer:wn(this.gammaRegularizer),betaConstraint:Or(this.betaConstraint),gammaConstraint:Or(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}};NN.className="BatchNormalization",fe.registerClass(NN);var ON=class extends Mt{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);for(let n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=Bn(e.betaInitializer||"zeros"),this.gammaInitializer=Bn(e.gammaInitializer||"ones"),this.betaRegularizer=Vn(e.betaRegularizer),this.gammaRegularizer=Vn(e.gammaRegularizer),this.supportsMasking=!0}build(e){let n=(e=Vt(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(let i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==Tc(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let t=this.axis.map(i=>e[i]);this.gamma=this.scale?this.addWeight("gamma",t,"float32",this.gammaInitializer,this.gammaRegularizer,!0):null,this.beta=this.center?this.addWeight("beta",t,"float32",this.betaInitializer,this.betaRegularizer,!0):null,this.built=!0}call(e,n){let t=Qe(e),r=t.shape,i=r.length;return G(()=>{let{mean:a,variance:s}=d_(t,this.axis,!0),o=Nh(1,i);for(let p of this.axis)o[p]=r[p];let l=p=>null!=p&&p.shape.length!==i?H(p,o):p,c=this.scale?l(this.gamma.read()):null,u=this.center?l(this.beta.read()):null,h=[],d=[];for(let p=0;p<i;++p)-1!==this.axis.indexOf(p)?(h.push(r[p]),d.push(1)):(h.push(1),d.push(r[p]));return a=va(a,h),s=va(s,h),null!=c&&(c=va(c,d)),null!=u&&(u=va(u,d)),N_(t,a,s,u,c,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Xn(this.betaInitializer),gammaInitializer:Xn(this.gammaInitializer),betaRegularizer:wn(this.betaRegularizer),gammaRegularizer:wn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}};ON.className="LayerNormalization",fe.registerClass(ON);var FN=class extends Mt{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new X(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,t;if("number"==typeof e.padding[0])n=[e.padding[0],e.padding[0]],t=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new X(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],2!==e.padding[1].length)throw new X(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);t=e.padding[1]}this.padding=[n,t]}this.inputSpec=[new xr({ndim:4})]}computeOutputShape(e){let n,t;return e=Vt(e),"channelsFirst"===this.dataFormat?(n=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,t=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],n,t]):(n=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,t=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],n,t,e[3]])}call(e,n){return G(()=>function $Ae(e,n,t){return G(()=>{if(4!==e.rank)throw new X(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new X("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==t&&(t="channelsLast"),"channelsLast"!==t&&"channelsFirst"!==t)throw new X(`Unknown data format: ${t}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return r="channelsFirst"===t?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],js(e,r)})}(Qe(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}};function Y1(e,n,t,r,i,a){return G(()=>{sr(i),UG(a),Ga(r),null==t&&(t=[1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==a&&(a="max"),e=tN(e,i);let s,o="same"===r?"same":"valid";return s="max"===a?Gr(e,n,t,o):gl(e,n,t,o),"channelsFirst"===i&&(s=kt(s,[0,3,1,2])),s})}function n9(e,n,t,r,i,a){return G(()=>{sr(i),UG(a),Ga(r),null==t&&(t=[1,1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==a&&(a="max"),e=X7(e,i);let s,o="same"===r?"same":"valid";return s="max"===a?aA(e,n,t,o):TD(e,n,t,o),"channelsFirst"===i&&(s=kt(s,[0,4,1,2,3])),s})}FN.className="ZeroPadding2D",fe.registerClass(FN);var r9=class extends Mt{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new X(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);this.poolSize=e.poolSize}if(qr(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new X(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);this.strides=e.strides}qr(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,Ga(this.padding),this.inputSpec=[new xr({ndim:3})]}computeOutputShape(e){let n=Qs((e=Vt(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return G(()=>{this.invokeCallHook(e,n),e=v_(Qe(e),2);let t=this.poolingFunction(Qe(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Ec(t,[2])})}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}},RN=class extends r9{constructor(e){super(e)}poolingFunction(e,n,t,r,i){return sr(i),Ga(r),Y1(e,n,t,r,i,"max")}};RN.className="MaxPooling1D",fe.registerClass(RN);var PN=class extends r9{constructor(e){super(e)}poolingFunction(e,n,t,r,i){return sr(i),Ga(r),Y1(e,n,t,r,i,"avg")}};PN.className="AveragePooling1D",fe.registerClass(PN);var i9=class extends Mt{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new X(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];qr(this.poolSize,"poolSize"),qr(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,sr(this.dataFormat),Ga(this.padding),this.inputSpec=[new xr({ndim:4})]}computeOutputShape(e){e=Vt(e);let n="channelsFirst"===this.dataFormat?e[2]:e[1],t="channelsFirst"===this.dataFormat?e[3]:e[2];return n=Qs(n,this.poolSize[0],this.padding,this.strides[0]),t=Qs(t,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],n,t]:[e[0],n,t,e[3]]}call(e,n){return G(()=>(this.invokeCallHook(e,n),this.poolingFunction(Qe(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}},LN=class extends i9{constructor(e){super(e)}poolingFunction(e,n,t,r,i){return sr(i),Ga(r),Y1(e,n,t,r,i,"max")}};LN.className="MaxPooling2D",fe.registerClass(LN);var $N=class extends i9{constructor(e){super(e)}poolingFunction(e,n,t,r,i){return sr(i),Ga(r),Y1(e,n,t,r,i,"avg")}};$N.className="AveragePooling2D",fe.registerClass($N);var a9=class extends Mt{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new X(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];qr(this.poolSize,"poolSize"),qr(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,sr(this.dataFormat),Ga(this.padding),this.inputSpec=[new xr({ndim:5})]}computeOutputShape(e){e=Vt(e);let n="channelsFirst"===this.dataFormat?e[2]:e[1],t="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return n=Qs(n,this.poolSize[0],this.padding,this.strides[0]),t=Qs(t,this.poolSize[1],this.padding,this.strides[1]),r=Qs(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],n,t,r]:[e[0],n,t,r,e[4]]}call(e,n){return G(()=>(this.invokeCallHook(e,n),this.poolingFunction(Qe(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}},BN=class extends a9{constructor(e){super(e)}poolingFunction(e,n,t,r,i){return sr(i),Ga(r),n9(e,n,t,r,i,"max")}};BN.className="MaxPooling3D",fe.registerClass(BN);var VN=class extends a9{constructor(e){super(e)}poolingFunction(e,n,t,r,i){return sr(i),Ga(r),n9(e,n,t,r,i,"avg")}};VN.className="AveragePooling3D",fe.registerClass(VN);var s9=class extends Mt{constructor(e){super(e),this.inputSpec=[new xr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new It}},zN=class extends s9{constructor(e){super(e||{})}call(e,n){return G(()=>{let t=Qe(e);return qn(t,1)})}};zN.className="GlobalAveragePooling1D",fe.registerClass(zN);var UN=class extends s9{constructor(e){super(e||{})}call(e,n){return G(()=>{let t=Qe(e);return Ha(t,1)})}};UN.className="GlobalMaxPooling1D",fe.registerClass(UN);var o9=class extends Mt{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,sr(this.dataFormat),this.inputSpec=[new xr({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new It}getConfig(){let e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}},HN=class extends o9{call(e,n){return G(()=>{let t=Qe(e);return qn(t,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}};HN.className="GlobalAveragePooling2D",fe.registerClass(HN);var WN=class extends o9{call(e,n){return G(()=>{let t=Qe(e);return Ha(t,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}};WN.className="GlobalMaxPooling2D",fe.registerClass(WN);var l9=class extends Mt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){let e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,t={}){let i=Ys(n.layer,t);delete n.layer;let a={layer:i};return Object.assign(a,n),new e(a)}},jN=class extends l9{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=Vt(e)).length<3)throw new X(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];let n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){let n=[(e=Vt(e))[0]].concat(e.slice(2)),t=this.layer.computeOutputShape(n);return[t[0],e[1]].concat(t.slice(1))}call(e,n){return G(()=>e9((t,r)=>[Qe(this.layer.call(t,n)),[]],e=Qe(e),[],!1,null,null,!1,!0)[1])}};jN.className="TimeDistributed",fe.registerClass(jN);var GN=class extends l9{constructor(e){super(e);let n=e.layer.getConfig(),t={};t.className=e.layer.getClassName(),t.config=n,this.forwardLayer=Ys(t),n.goBackwards=!0!==n.goBackwards;let r={};if(r.className=e.layer.getClassName(),r.config=n,this.backwardLayer=Ys(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function BAe(e){Fh(B2e,"BidirectionalMergeMode",e)}(this.mergeMode),e.weights)throw new It("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let t=Math.floor(e.length/2);this.forwardLayer.setWeights(e.slice(0,t)),this.backwardLayer.setWeights(e.slice(t))}computeOutputShape(e){let t,r,i,n=this.forwardLayer.computeOutputShape(e);return Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),this.returnState&&(i=n.slice(1)),t=n[0],"concat"===this.mergeMode?(t[t.length-1]*=2,r=[t]):r=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?r.concat(i).concat(i.slice()):[t].concat(i).concat(i.slice()):Zi(r)}apply(e,n){let t=null==n?null:n.initialState,r=null==n?null:n.constants;null==n&&(n={});let i=J7(e,t,r,this.numConstants);if(e=i.inputs,t=i.initialState,r=i.constants,Array.isArray(e)&&(t=e.slice(1),e=e[0]),(null==t||0===t.length)&&null==r)return super.apply(e,n);let a=[],s=[];if(null!=t){let l=t.length;if(l%2>0)throw new X("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=t,a.push(...t);let c=t.map(u=>new xr({shape:u.shape}));this.forwardLayer.stateSpec=c.slice(0,l/2),this.backwardLayer.stateSpec=c.slice(l/2),s.push(...c)}if(null!=r)throw new It("Support for constants in Bidirectional layers is not implemented yet.");let o=a[0]instanceof Xs;for(let l of a)if(l instanceof Xs!==o)throw new X("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(o){let l=[e].concat(a),c=this.inputSpec.concat(s),u=this.inputSpec;this.inputSpec=c;let h=super.apply(l,n);return this.inputSpec=u,h}return super.apply(e,n)}call(e,n){return G(()=>{let r,i,a,s,t=n.initialState;if(null==t)r=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{let o=t.slice(0,t.length/2),l=t.slice(t.length/2);r=this.forwardLayer.call(e,Object.assign(n,{initialState:o})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:l}))}return this.returnState&&(Array.isArray(r)&&(a=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),this.returnSequences&&(i=Wa(i,1)),"concat"===this.mergeMode?s=lT([r,i]):"sum"===this.mergeMode?s=se(r,i):"ave"===this.mergeMode?s=U(.5,se(r,i)):"mul"===this.mergeMode?s=U(r,i):null==this.mergeMode&&(s=[r,i]),this.returnState?null==this.mergeMode?s.concat(a):[s].concat(a):s})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Rh(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Rh(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){let t;if(Array.isArray(n)&&(n=n[0]),t=this.returnSequences?null==this.mergeMode?[n,n]:n:null==this.mergeMode?[null,null]:null,this.returnState){let r=this.forwardLayer.states.map(i=>null);return Array.isArray(t)?t.concat(r).concat(r):[t].concat(r).concat(r)}return t}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){let t=Ys(n.layer);if(delete n.layer,null!=n.numConstants)throw new It("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let r=n;return r.layer=t,new e(r)}};GN.className="Bidirectional",fe.registerClass(GN);var qN=class extends Mt{constructor(e){super(e),this.scale=e.scale,this.offset=e.offset?e.offset:0}getConfig(){let e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return G(()=>("float32"!==(e=Qe(e)).dtype&&(e=wl(e,"float32")),se(U(e,this.scale),this.offset)))}};qN.className="Rescaling",fe.registerClass(qN);var{resizeBilinear:zAe,cropAndResize:UAe}=ja,KN=class extends Mt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,t,r,i,a,s,o){return G(()=>{let l,c=!1,f=[n/a,t/s,(r+n)/a,(i+t)/s],m=[];3===e.rank?(c=!0,l=vr([e])):l=e;for(let _=0;_<l.shape[0];_++)m.push(f);let g=Ti(m,[m.length,4]),y=Eh(0,m.length,1,"int32"),b=UAe(l,g,y,[r,i],"nearest");return wl(c?Qe(tr(b)):b,o)})}upsize(e,n,t,r){return G(()=>wl(zAe(e,[n,t]),r))}call(e,n){return G(()=>{let t=Qe(e),r=t.dtype,i=t.shape,a=i[i.length-3],s=i[i.length-2],o=0;a!==this.height&&(o=Math.floor((a-this.height)/2));let l=0;return s!==this.width&&(l=Math.floor((s-this.width)/2),0===l&&(l=1)),o>=0&&l>=0?this.centerCrop(t,o,l,this.height,this.width,a,s,r):this.upsize(e,this.height,this.width,r)})}getConfig(){let e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){let t=(e=Vt(e)).length-2;return e[e.length-3]=this.height,e[t]=this.width,e}};KN.className="CenterCrop",fe.registerClass(KN);var XN=class extends Mt{constructor(e){super(e),this.numTokens=e.numTokens,this.outputMode=e.outputMode?e.outputMode:"multiHot"}getConfig(){let e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return null==(e=Vt(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return G(()=>{let t;if("int32"!==(e=Qe(e)).dtype&&(e=wl(e,"int32")),typeof n.countWeights<"u"){if("count"!==this.outputMode)throw new X(`countWeights is not used when outputMode !== count.\n              Received countWeights=${n.countWeights}`);t=Qe(n.countWeights)}let r=Ha(e),i=Hm(e),a=Fi(this.numTokens,r).bufferSync().get(0),s=bl(i,0).bufferSync().get(0);if(!a||!s)throw new X(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return function HAe(e,n,t,r){let i=Qe(e);if("int32"!==i.dtype&&(i=wl(i,"int32")),"int"===n)return i;let a=i.shape;if(0===i.rank&&(i=jr(i,-1)),"oneHot"===n&&1!==i.shape[i.shape.length-1]&&(i=jr(i,-1)),i.rank>2)throw new X(`When outputMode is not int, maximum output rank is 2 Received outputMode ${n} and input shape ${a} which would result in output rank ${i.rank}.`);let l,s=["multiHot","oneHot"].includes(n);if(l=Vw(i,typeof r<"u"&&"count"===n?r:[],t,s),"tfIdf"!==n)return l;if(r)return U(l,r);throw new X("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,t)})}};XN.className="CategoryEncoding",fe.registerClass(XN);var c9=new Set(["bilinear","nearest"]),YN=class extends Mt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!c9.has(e.interpolation))throw new X(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){return e=Vt(e),[this.height,this.width,e[2]]}getConfig(){let e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return G(()=>{let t=[this.height,this.width];if("bilinear"===this.interpolation)return ja.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return ja.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...c9]} are supported`)})}};YN.className="Resizing",fe.registerClass(YN);var u9=class{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}};u9.className="RandomSeed";var d9=class extends Mt{constructor(e){super(e),this.randomGenerator=new u9(e.seed)}getConfig(){let e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}};d9.className="BaseRandomLayer";var h9=new Set(["bilinear","nearest"]),ZN=class extends d9{constructor(e){super(e);let{factor:n,interpolation:t="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new X(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new X(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new X(`factor cannot have upper bound less than lower bound.\n        Got upper bound: ${this.widthUpper}.\n        Got lower bound: ${this.widthLower}\n      `);if(t){if(!h9.has(t))throw new X(`Invalid interpolation parameter: ${t} is not implemented`);this.interpolation=t}}getConfig(){let e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Vt(e),[this.imgHeight,-1,e[2]]}call(e,n){return G(()=>{let t=Qe(e);this.imgHeight=t.shape[t.shape.length-3];let r=t.shape[t.shape.length-2];this.widthFactor=Ic([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*r;i=Math.round(i);let a=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return ja.resizeBilinear(e,a);case"nearest":return ja.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}\n          but only ${[...h9]} are supported`)}})}};function GAe(e){return new ig(e)}function qAe(e){return new QT(e)}function KAe(e){return new XT(e)}function XAe(e){return new YT(e)}function YAe(e){return new ZT(e)}function ZAe(e){return new eN(e)}function QAe(e){return new JT(e)}function JAe(e){return new aN(e)}function eTe(e){return new H1(e)}function tTe(e){return new nN(e)}function nTe(e){return new W1(e)}function rTe(e){return new rN(e)}function iTe(e){return new iN(e)}function aTe(e){return new sN(e)}function sTe(e){return new oN(e)}function oTe(e){return new lN(e)}function lTe(e){return new gN(e)}function cTe(e){return new fN(e)}function uTe(e){return new X1(e)}function dTe(e){return new pN(e)}function hTe(e){return new mN(e)}function pTe(e){return new yN(e)}function fTe(e){return new bN(e)}function mTe(e){return new _N(e)}function gTe(e){return new xN(e)}function yTe(e){return new wN(e)}function bTe(e){return new kN(e)}function _Te(e){return new MN(e)}function vTe(e){return new SN(e)}function xTe(e){return new IN(e)}function wTe(e){return new CN(e)}function CTe(e){return new EN(e)}function kTe(e){return new NN(e)}function STe(e){return new ON(e)}function ITe(e){return new FN(e)}function QN(e){return new PN(e)}function MTe(e){return QN(e)}function ETe(e){return QN(e)}function JN(e){return new $N(e)}function DTe(e){return JN(e)}function ATe(e){return JN(e)}function eO(e){return new VN(e)}function TTe(e){return eO(e)}function NTe(e){return eO(e)}function OTe(e){return new zN(e)}function FTe(e){return new HN(e)}function p9(e){return new UN(e)}function f9(e){return new WN(e)}function m9(e){return new RN(e)}function g9(e){return new LN(e)}function RTe(e){return new BN(e)}function PTe(e){return new uN(e)}function LTe(e){return new G1(e)}function $Te(e){return new dN(e)}function BTe(e){return new A_(e)}function VTe(e){return new cN(e)}function zTe(e){return new j1(e)}function UTe(e){return new hN(e)}function HTe(e){return new K1(e)}function WTe(e){return new kl(e)}function jTe(e){return new q1(e)}function GTe(e){return new GN(e)}function qTe(e){return new jN(e)}ZN.className="RandomWidth",fe.registerClass(ZN);var KTe=p9,XTe=f9,YTe=m9,ZTe=g9;function QTe(e){return new DN(e)}function JTe(e){return new AN(e)}function eNe(e){return new TN(e)}function tNe(e){return new vN(e)}function nNe(e){return new qN(e)}function rNe(e){return new KN(e)}function iNe(e){return new YN(e)}function aNe(e){return new XN(e)}function sNe(e){return new ZN(e)}var y9={};function oNe(e,n){return AT(e,n)}function lNe(e,n){return y7(e,n)}function cNe(e,n){return b7(e,n)}function uNe(e,n){return TT(e,n)}function dNe(e,n){return NT(e,n)}function hNe(e,n){return g7(e,n)}function pNe(e,n){return function jDe(e,n){return G(()=>{let t=m7(e,n),r=function HDe(e,n){return G(()=>xe(Re(_s(_a(e,1),_a(n,0))),"float32"))}(e,n),i=se(t,r);return xe(Wr(Fi(i,0),Te(t,i),0),"float32")})}(e,n)}function fNe(e,n){return ET(e,n)}function mNe(e,n){return F1(e,n)}function gNe(e,n){return og(e,n)}function yNe(e,n){return og(e,n)}function bNe(e,n){return og(e,n)}function _Ne(e,n){return Lh(e,n)}function vNe(e,n){return Lh(e,n)}function xNe(e,n){return Lh(e,n)}it(y9,{MAPE:()=>yNe,MSE:()=>vNe,binaryAccuracy:()=>oNe,binaryCrossentropy:()=>lNe,categoricalAccuracy:()=>uNe,categoricalCrossentropy:()=>dNe,cosineProximity:()=>fNe,mape:()=>bNe,meanAbsoluteError:()=>mNe,meanAbsolutePercentageError:()=>gNe,meanSquaredError:()=>_Ne,mse:()=>xNe,precision:()=>hNe,recall:()=>pNe,sparseCategoricalAccuracy:()=>cNe});var b9={};it(b9,{modelFromJSON:()=>xAe});var _9={};function wNe(e){return new E_(e)}function CNe(e){return function EAe(e){return KT(e),new E_({l1:null!=e?e.l1:null,l2:0})}(e)}function kNe(e){return function DAe(e){return KT(e),new E_({l2:null!=e?e.l2:null,l1:0})}(e)}it(_9,{l1:()=>CNe,l1l2:()=>wNe,l2:()=>kNe});var v9=class extends sg{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof Cl))throw new Error("model must be a LayersModel, not some other Container");this.model=e}};function Z1(e,n){return e<n}function x9(e,n){return e>n}var Ca,C9,w9=class extends v9{constructor(e){if(super(),null==e&&(e={}),e.restoreBestWeights)throw new It("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),this.monitorFunc="min"===this.mode?Z1:"max"===this.mode||-1!==this.monitor.indexOf("acc")?x9:Z1,this.monitorFunc===Z1&&(this.minDelta*=-1)}onTrainBegin(e){var n=this;return R(function*(){n.wait=0,n.stoppedEpoch=0,n.best=null!=n.baseline?n.baseline:n.monitorFunc===Z1?1/0:-1/0})()}onEpochEnd(e,n){var t=this;return R(function*(){yield Fc(n);let r=t.getMonitorValue(n);null!=r&&(t.monitorFunc(r-t.minDelta,t.best)?(t.best=r,t.wait=0):(t.wait++,t.wait>=t.patience&&(t.stoppedEpoch=e,t.model.stopTraining=!0)))})()}onTrainEnd(e){var n=this;return R(function*(){n.stoppedEpoch>0&&n.verbose&&console.log(`Epoch ${n.stoppedEpoch}: early stopping.`)})()}getMonitorValue(e){null==e&&(e={});let n=e[this.monitor];return null==n&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(e)}`),n}},INe={earlyStopping:function SNe(e){return new w9(e)}};Q().registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(Ca||(Ca={})),function(e){let n;var t;(t=n=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"}(C9||(C9={}));var tO={};function ENe(e,n){tO[e]={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:n}}function k9(e){return tO[e]}function DNe(e){delete tO[e]}function C(e,n,t,r,i){let a=n.inputParams[e];if(a&&void 0!==a.inputIndexStart){let o=a.inputIndexStart,l=0===a.inputIndexEnd?void 0:void 0===a.inputIndexEnd?o+1:a.inputIndexEnd,c=o<0?n.inputNames.length+o:o;if("tensor"===a.type)return si(n.inputNames[c],t,r,i);if("tensors"===a.type){let d=n.inputs.slice(o,l);return n.inputNames.slice(o,l).filter((p,f)=>{var m;return"NoOp"!==(null===(m=d[f])||void 0===m?void 0:m.op)}).map(p=>si(p,t,r,i))}let u=si(n.inputNames[c],t,r,i),h=u.dataSync();return"number"===a.type?h[0]:w.toNestedArray(u.shape,h)}let s=n.attrParams[e];return s&&s.value}function si(e,n,t,r){let[i,a]=ka(e,t);if(null!=r){let o=r.getHashTableHandleByName(i);if(null!=o)return o}let s=t.currentContextIds.find(o=>!!n[Q1(i,o)]);return void 0!==s?n[Q1(i,s)][a]:void 0}function S9(e,n,t){return n[Q1(e,t.currentContextId)]}function Sl(e,n){let[t,r,i]=ka(e,n);return[Q1(t,n&&n.currentContextId),r,i]}function Q1(e,n){return n?`${e}-${n}`:e}function ka(e,n){if(""===e)return["",0,void 0];let t=null!=n&&null!=n.parseNodeNameCache;if(t){let a=n.parseNodeNameCache.get(e);if(null!=a)return a}let i,r=e.split(":");if(1===r.length)i=[e,0,void 0];else{let s=3===r.length?r[1]:void 0;i=[r[0],Number(r[r.length-1]),s]}return t&&n.parseNodeNameCache.set(e,i),i}function J1(e,n,t){let r=C("pad",e,n,t);if("explicit"===r){r=C("explicitPaddings",e,n,t);let i=[[0,0],[0,0],[0,0],[0,0]];for(let a=0;a<4;a++)i[a][0]=r[2*a],i[a][1]=r[2*a+1];return i}return r}function Il(e){return e.kept?e:xo(e)}var I9={};it(I9,{json:()=>ANe});var ANe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],M9={};it(M9,{json:()=>TNe});var TNe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],E9={};it(E9,{json:()=>NNe});var NNe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],D9={};it(D9,{json:()=>ONe});var ONe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],A9={};it(A9,{json:()=>FNe});var FNe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],T9={};it(T9,{json:()=>RNe});var RNe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],N9={};it(N9,{json:()=>PNe});var PNe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],O9={};it(O9,{json:()=>LNe});var LNe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],F9={};it(F9,{json:()=>$Ne});var $Ne=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],R9={};it(R9,{json:()=>BNe});var BNe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],P9={};it(P9,{json:()=>VNe});var VNe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],L9={};it(L9,{json:()=>zNe});var zNe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],$9={};it($9,{json:()=>UNe});var UNe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],B9={};it(B9,{json:()=>HNe});var HNe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],V9={};it(V9,{json:()=>WNe});var WNe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],z9={};it(z9,{json:()=>jNe});var jNe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],U9={};it(U9,{json:()=>GNe});var GNe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],H9={};it(H9,{json:()=>qNe});var qNe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],W9={};it(W9,{json:()=>KNe});var KNe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],j9=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let n=[].concat(...[I9,M9,E9,D9,A9,T9,N9,O9,F9,R9,P9,L9,$9,B9,V9,z9,U9,H9,W9].map(t=>t.json));this.opMappers=n.reduce((t,r)=>(t[r.tfOpName]=r,t),{})}transformGraph(e,n={}){let r=[],i=[],a=[],s=e.node.reduce((f,m)=>(f[m.name]=this.mapNode(m),m.op.startsWith("Placeholder")?r.push(f[m.name]):"Const"===m.op?i.push(f[m.name]):(null==m.input||0===m.input.length)&&a.push(f[m.name]),f),{}),o=[],l=[],c={},u={};null!=n&&(c=this.mapSignatureEntries(n.inputs),u=this.mapSignatureEntries(n.outputs));let h=Object.keys(s);h.forEach(f=>{let m=s[f];m.inputNames.forEach((g,y)=>{let[b,,_]=Sl(g),v=s[b];if(null!=v.outputs){let x=v.outputs.indexOf(_);-1!==x&&(m.inputNames[y]=`${b}:${x}`)}m.inputs.push(v),v.children.push(m)})}),0===Object.keys(u).length?h.forEach(f=>{let m=s[f];0===m.children.length&&l.push(m)}):Object.keys(u).forEach(f=>{let[m]=Sl(f),g=s[m];null!=g&&(g.signatureKey=u[f],l.push(g))}),Object.keys(c).length>0?Object.keys(c).forEach(f=>{let[m]=Sl(f),g=s[m];g&&(g.signatureKey=c[f],o.push(g))}):o=r;let d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce((f,m)=>(f[m.signature.name]=this.mapFunction(m),f),{}));let p={nodes:s,inputs:o,outputs:l,weights:i,placeholders:r,signature:n,functions:d};return a.length>0&&(p.initNodes=a),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,t)=>(n[e[t].name]=t,n),{})}mapNode(e){let n=k9(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});let t={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(r=>r.startsWith("^")?r.slice(1):r),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return null!=n.inputs&&(t.inputParams=n.inputs.reduce((r,i)=>(r[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},r),{})),null!=n.attrs&&(t.attrParams=n.attrs.reduce((r,i)=>{let s,a=i.type;switch(i.type){case"string":s=nO(e.attr,i.tfName,i.defaultValue),void 0===s&&i.tfDeprecatedName&&(s=nO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":s=uO(e.attr,i.tfName,i.defaultValue),void 0===s&&i.tfDeprecatedName&&(s=uO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":s=iO(e.attr,i.tfName,i.defaultValue||0),void 0===s&&i.tfDeprecatedName&&(s=iO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":s=cO(e.attr,i.tfName,i.defaultValue),void 0===s&&i.tfDeprecatedName&&(s=cO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":s=rO(e.attr,i.tfName,i.defaultValue),void 0===s&&i.tfDeprecatedName&&(s=rO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":s=hO(e.attr,i.tfName,i.defaultValue),void 0===s&&i.tfDeprecatedName&&(s=hO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":s=lO(e.attr,i.tfName,i.defaultValue),void 0===s&&i.tfDeprecatedName&&(s=lO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":s=dO(e.attr,i.tfName,i.defaultValue),void 0===s&&i.tfDeprecatedName&&(s=dO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":s=sO(e.attr,i.tfName,i.defaultValue),void 0===s&&i.tfDeprecatedName&&(s=sO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":s=oO(e.attr,i.tfName,i.defaultValue),void 0===s&&i.tfDeprecatedName&&(s=oO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":s=q9(e.attr,i.tfName,i.defaultValue),void 0===s&&i.tfDeprecatedName&&(s=q9(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return r[i.name]={value:s,type:a},r},{})),t}mapFunction(e){let n=e.nodeDef,r=[],i={};null!=n&&(i=n.reduce((c,u)=>(c[u.name]=this.mapNode(u),"Const"===u.op&&r.push(c[u.name]),c),{}));let a=[],s=[];e.signature.inputArg.forEach(c=>{let[u]=Sl(c.name),h={name:u,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:aO(c.type),type:"dtype"}},children:[]};h.signatureKey=c.name,a.push(h),i[u]=h}),Object.keys(i).forEach(c=>{let u=i[c];u.inputNames.forEach((h,d)=>{let[p,,f]=Sl(h),m=i[p];if(null!=m.outputs){let g=m.outputs.indexOf(f);-1!==g&&(u.inputNames[d]=`${p}:${g}`)}u.inputs.push(m),m.children.push(u)})});let o=e.ret;e.signature.outputArg.forEach(c=>{let[u,h]=Sl(o[c.name]),d=i[u];null!=d&&(d.defaultOutput=h,s.push(d))});let l=this.mapArgsToSignature(e);return{nodes:i,inputs:a,outputs:s,weights:r,placeholders:[],signature:l}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,t)=>(n[t.name]=this.mapArgToTensorInfo(t),n),{}),outputs:e.signature.outputArg.reduce((n,t)=>(n[t.name]=this.mapArgToTensorInfo(t,e.ret),n),{})}}mapArgToTensorInfo(e,n){let t=e.name;return null!=n&&(t=n[t]),{name:t,dtype:e.type}}};function G9(e,n){let t=Array.isArray(e)?String.fromCharCode.apply(null,e):function XNe(e){let n=Q().global;if(typeof n.atob<"u")return n.atob(e);if(typeof Buffer<"u")return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return n?t:t.toLowerCase()}function nO(e,n,t,r=!1){let i=e[n];return null!=i?G9(i.s,r):t}function rO(e,n,t){let r=e[n];return r?r.b:t}function iO(e,n,t){let r=e[n]||{},i=null!=r.i?r.i:null!=r.f?r.f:t;return"number"==typeof i?i:parseInt(i,10)}function aO(e){switch("string"==typeof e&&(e=Ca[e]),e){case Ca.DT_FLOAT:case Ca.DT_HALF:return"float32";case Ca.DT_INT32:case Ca.DT_INT64:case Ca.DT_INT8:case Ca.DT_UINT8:return"int32";case Ca.DT_BOOL:return"bool";case Ca.DT_DOUBLE:return"float32";case Ca.DT_STRING:return"string";case Ca.DT_COMPLEX64:case Ca.DT_COMPLEX128:return"complex64";default:return null}}function q9(e,n,t){let r=e[n];return r&&r.func?r.func.name:t}function sO(e,n,t){let r=e[n];return r&&r.type?aO(r.type):t}function oO(e,n,t){let r=e[n];return r&&r.list&&r.list.type?r.list.type.map(i=>aO(i)):t}function K9(e){if(!e.unknownRank)return null!=e.dim?e.dim.map(n=>"number"==typeof n.size?n.size:parseInt(n.size,10)):[]}function lO(e,n,t){let r=e[n];return r&&r.shape?K9(r.shape):t}function cO(e,n,t){let r=e[n];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(i=>"number"==typeof i?i:parseInt(i,10)):t}function uO(e,n,t,r=!1){let i=e[n];return i&&i.list&&i.list.s?i.list.s.map(a=>G9(a,r)):t}function dO(e,n,t){let r=e[n];return r&&r.list&&r.list.shape?r.list.shape.map(i=>K9(i)):t}function hO(e,n,t){let r=e[n];return r&&r.list&&r.list.b?r.list.b:t}var Kr={};function ws(e,n,t=""){if("number"!=typeof e&&"number"!=typeof n){w.assert(e.length===n.length,()=>t+` Shapes ${e} and ${n} must match`);for(let r=0;r<e.length;r++){let i=e[r],a=n[r];w.assert(i<0||a<0||i===a,()=>t+` Shapes ${e} and ${n} must match`)}}}function X9(e){return!("number"==typeof e||e.some(n=>n<0))}function O_(e,n,t){let r=pO(e,t),i=!X9(r);if(i&&0===n.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(i&&n.forEach(a=>{r=pO(a.shape,r)}),!X9(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function pO(e,n){if("number"==typeof e)return n;if("number"==typeof n)return e;if(e.length!==n.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${n}`);let t=[];for(let r=0;r<e.length;++r){let i=e[r],a=n[r];if(i>=0&&a>=0&&i!==a)throw new Error(`Incompatible shape during merge: ${e} vs. ${n}`);t[r]=i>=0?i:a}return t}it(Kr,{OP_SCOPE_SUFFIX:()=>eD,abs:()=>br,acos:()=>xD,acosh:()=>wD,add:()=>se,addN:()=>P8,all:()=>Rw,any:()=>Jb,argMax:()=>bh,argMin:()=>CD,asin:()=>kD,asinh:()=>SD,atan:()=>ID,atan2:()=>MD,atanh:()=>ED,avgPool:()=>gl,avgPool3d:()=>TD,basicLSTMCell:()=>V8,batchNorm:()=>xh,batchNorm2d:()=>ND,batchNorm3d:()=>OD,batchNorm4d:()=>FD,batchToSpaceND:()=>r_,bincount:()=>RD,bitwiseAnd:()=>z8,booleanMaskAsync:()=>Aj,broadcastArgs:()=>U8,broadcastTo:()=>wh,buffer:()=>wt,cast:()=>xe,ceil:()=>PD,clipByValue:()=>gi,clone:()=>xo,complex:()=>pl,concat:()=>fn,concat1d:()=>LD,concat2d:()=>$D,concat3d:()=>BD,concat4d:()=>VD,conv1d:()=>Pw,conv2d:()=>Oi,conv2dTranspose:()=>Lw,conv3d:()=>UD,conv3dTranspose:()=>HD,cos:()=>i_,cosh:()=>$w,cosineWindow:()=>c1,cumprod:()=>a_,cumsum:()=>Bw,denseBincount:()=>Vw,depthToSpace:()=>WD,depthwiseConv2d:()=>Ch,diag:()=>W8,dilation2d:()=>jD,div:()=>Te,divNoNan:()=>GD,dot:()=>qD,dropout:()=>EA,einsum:()=>kh,elu:()=>Um,enclosingPowerOfTwo:()=>DA,ensureShape:()=>G8,equal:()=>_a,erf:()=>KD,euclideanNorm:()=>ZD,exp:()=>yi,expandDims:()=>jr,expm1:()=>QD,eye:()=>zw,fft:()=>m_,fill:()=>ba,floor:()=>jm,floorDiv:()=>Fw,fused:()=>eg,gather:()=>Gm,gatherND:()=>Fj,greater:()=>Fi,greaterEqual:()=>bl,ifft:()=>Jm,imag:()=>s_,image:()=>ja,inTopKAsync:()=>Rj,irfft:()=>t1,isFinite:()=>JD,isInf:()=>eA,isNaN:()=>tA,leakyRelu:()=>o_,less:()=>qm,lessEqual:()=>kc,linalg:()=>PA,linspace:()=>Z8,localResponseNormalization:()=>nA,log:()=>xa,log1p:()=>l_,logSigmoid:()=>rA,logSoftmax:()=>Hw,logSumExp:()=>c_,logicalAnd:()=>_s,logicalNot:()=>u_,logicalOr:()=>Ww,logicalXor:()=>iA,losses:()=>Xj,lowerBound:()=>J8,matMul:()=>Ct,max:()=>Ha,maxPool:()=>Gr,maxPool3d:()=>aA,maxPoolWithArgmax:()=>ej,maximum:()=>ko,mean:()=>qn,meshgrid:()=>tj,min:()=>Hm,minimum:()=>Sc,mirrorPad:()=>sA,mod:()=>oA,moments:()=>d_,movingAverage:()=>Tj,mul:()=>U,multiRNNCell:()=>nj,multinomial:()=>rj,neg:()=>Dn,norm:()=>Wm,notEqual:()=>Mh,oneHot:()=>Km,ones:()=>Xi,onesLike:()=>wa,op:()=>V,outerProduct:()=>ij,pad:()=>js,pad1d:()=>aj,pad2d:()=>sj,pad3d:()=>oj,pad4d:()=>lj,pool:()=>lA,pow:()=>yl,prelu:()=>p_,print:()=>vD,prod:()=>cA,raggedGather:()=>cj,raggedRange:()=>uj,raggedTensorToTensor:()=>dj,rand:()=>hj,randomGamma:()=>gj,randomNormal:()=>qw,randomStandardNormal:()=>yj,randomUniform:()=>Ic,randomUniformInt:()=>bj,range:()=>Eh,real:()=>Xm,reciprocal:()=>gA,relu:()=>an,relu6:()=>Kw,reshape:()=>H,reverse:()=>Wa,reverse1d:()=>_j,reverse2d:()=>vj,reverse3d:()=>xj,reverse4d:()=>wj,rfft:()=>g_,round:()=>Xw,rsqrt:()=>Yw,scalar:()=>He,scatterND:()=>Nj,searchSorted:()=>Gw,selu:()=>Zw,separableConv2d:()=>Ym,setdiff1dAsync:()=>Cj,sigmoid:()=>bs,sign:()=>bA,signal:()=>Kj,sin:()=>Qw,sinh:()=>Jw,slice:()=>At,slice1d:()=>f_,slice2d:()=>e1,slice3d:()=>Zm,slice4d:()=>Qm,softmax:()=>Mc,softplus:()=>Ih,spaceToBatchND:()=>h_,sparse:()=>Yj,sparseToDense:()=>Oj,spectral:()=>qj,split:()=>Yi,sqrt:()=>ii,square:()=>gn,squaredDifference:()=>n1,squeeze:()=>Ec,stack:()=>vr,step:()=>Dh,stridedSlice:()=>_A,string:()=>Zj,sub:()=>Ee,sum:()=>Re,tan:()=>vA,tanh:()=>vh,tensor:()=>Ti,tensor1d:()=>Qt,tensor2d:()=>So,tensor3d:()=>r1,tensor4d:()=>Dc,tensor5d:()=>kj,tensor6d:()=>Sj,tensorScatterUpdate:()=>Mj,tile:()=>va,topk:()=>wA,transpose:()=>kt,truncatedNormal:()=>o1,unique:()=>CA,unsortedSegmentSum:()=>l1,unstack:()=>tr,upperBound:()=>Ej,variable:()=>kA,where:()=>Wr,whereAsync:()=>IA,zeros:()=>Kn,zerosLike:()=>Ft});var eC=class Y${get id(){return this.idTensor.id}constructor(n,t,r,i=-1){this.tensors=n,this.elementShape=t,this.elementDtype=r,n?.forEach(a=>{if(r!==a.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${a.dtype}`);ws(t,a.shape,"TensorList shape mismatch: "),Ar(a)}),this.idTensor=He(0),this.maxNumElements=i,Ar(this.idTensor)}copy(){return new Y$([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(n){this.tensors.forEach(t=>{(null==n||!n.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(n,t,r=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==r&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);ws(n,this.elementShape,"TensorList shape mismatch: ");let i=O_(this.elementShape,this.tensors,n);return G(()=>{let a=this.tensors.map(s=>H(s,i));return vr(a,0)})}popBack(n,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");let r=O_(this.elementShape,this.tensors,n),i=this.tensors.pop();return i.kept=!1,ws(i.shape,n,"TensorList shape mismatch: "),H(i,r)}pushBack(n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(ws(n.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Ar(n),this.tensors.push(n)}resize(n){if(n<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${n}`);if(-1!==this.maxNumElements&&n>this.maxNumElements)throw new Error(`TensorListResize input size ${n} is greater maxNumElement ${this.maxNumElements}.`);let t=new Y$([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=n;for(let r=0;r<Math.min(this.tensors.length,n);++r)t.tensors[r]=this.tensors[r];return t}getItem(n,t,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(n<0||n>this.tensors.length)throw new Error(`Trying to access element ${n} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[n])throw new Error(`element at index ${n} is null.`);ws(this.tensors[n].shape,t,"TensorList shape mismatch: ");let i=O_(this.elementShape,this.tensors,t);return H(this.tensors[n],i)}setItem(n,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(n<0||-1!==this.maxNumElements&&n>=this.maxNumElements)throw new Error(`Trying to set element ${n} in a list with max ${this.maxNumElements} elements.`);ws(this.elementShape,t.shape,"TensorList shape mismatch: "),Ar(t),null!=this.tensors[n]&&(this.tensors[n].kept=!1),this.tensors[n]=t}gather(n,t,r){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);ws(this.elementShape,r,"TensorList shape mismatch: "),n=n.slice(0,this.size());let i=O_(this.elementShape,this.tensors,r);return 0===n.length?Ti([],[0].concat(i)):G(()=>{let a=n.map(s=>H(this.tensors[s],i));return vr(a,0)})}concat(n,t){if(n&&n!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${n}`);ws(this.elementShape,t,"TensorList shape mismatch: ");let r=O_(this.elementShape,this.tensors,t);return 0===this.size()?Ti([],[0].concat(r)):G(()=>{let i=this.tensors.map(a=>H(a,r));return fn(i,0)})}},iOe=function(){var e=R(function*(n,t,r){switch(n.op){case"If":case"StatelessIf":{let i=C("thenBranch",n,t,r),a=C("elseBranch",n,t,r),s=C("cond",n,t,r),o=C("args",n,t,r);return(yield s.data())[0]?r.functionMap[i].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap):r.functionMap[a].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap)}case"While":case"StatelessWhile":{let i=C("body",n,t,r),a=C("cond",n,t,r),s=C("args",n,t,r),o=yield r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap),l=s.map(h=>h.id),c=yield o[0].data();o.forEach(h=>{!h.kept&&-1===l.indexOf(h.id)&&h.dispose()});let u=s;for(;c[0];){let h=u;u=yield r.functionMap[i].executeFunctionAsync(u,r.tensorArrayMap,r.tensorListMap);let d=u.map(f=>f.id);h.forEach(f=>{!f.kept&&-1===l.indexOf(f.id)&&-1===d.indexOf(f.id)&&f.dispose()});let p=yield r.functionMap[a].executeFunctionAsync(u,r.tensorArrayMap,r.tensorListMap);c=yield p[0].data(),p.forEach(f=>{!f.kept&&-1===l.indexOf(f.id)&&-1===d.indexOf(f.id)&&f.dispose()})}return u}case"LoopCond":return[Il(C("pred",n,t,r))];case"Switch":{let i=C("pred",n,t,r),a=C("data",n,t,r);return a.kept||(a=Il(a)),(yield i.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{let i=n.inputNames.find(a=>void 0!==si(a,t,r));return i?[Il(si(i,t,r))]:void 0}case"Enter":{let i=C("frameName",n,t,r),a=C("tensor",n,t,r);return r.enterFrame(i),[Il(a)]}case"Exit":{let i=C("tensor",n,t,r);return r.exitFrame(),[Il(i)]}case"NextIteration":{let i=C("tensor",n,t,r);return r.nextIteration(),[Il(i)]}case"TensorArrayV3":{let i=C("size",n,t,r),a=C("dtype",n,t,r),s=C("elementShape",n,t,r),o=C("dynamicSize",n,t,r),l=C("clearAfterRead",n,t,r),c=C("identicalElementShapes",n,t,r),u=C("name",n,t,r),h=new class{constructor(e,n,t,r,i,a,s){this.name=e,this.dtype=n,this.maxSize=t,this.elementShape=r,this.identicalElementShapes=i,this.dynamicSize=a,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=He(0),Ar(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(null==e||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);let n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);let t=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0===this.size()&&(null==this.elementShape||0===this.elementShape.length)&&(this.elementShape=n.shape),ws(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),t.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(t.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);t.tensor=n,Ar(n),t.written=!0,this.tensors[e]=t}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((t,r)=>this.write(t,n[r]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let r=0;r<this.size();r++)e.push(r)}if(0===e.length)return Ti([],[0].concat(this.elementShape));let t=this.readMany(e);return ws(this.elementShape,t[0].shape,"TensorArray shape mismatch: "),vr(t,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return Ti([],[0].concat(this.elementShape));let n=[];for(let r=0;r<this.size();r++)n.push(r);let t=this.readMany(n);return ws(this.elementShape,t[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${t[0].shape})`),fn(t,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);let t=Math.max(...e);if(!this.dynamicSize&&t>=this.maxSize)throw new Error(`Max index must be < array size (${t}  vs. ${this.maxSize})`);this.writeMany(e,tr(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let t=0,r=e.map(o=>(t+=o,t));if(t!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${t}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);let i=0===t?0:n.size/t,a=[];G(()=>{n=H(n,[1,t,i]);for(let o=0;o<e.length;++o)a[o]=H(At(n,[0,0===o?0:r[o-1],0],[1,e[o],i]),this.elementShape);return a});let s=[];for(let o=0;o<e.length;o++)s[o]=o;this.writeMany(s,a)}}(u,a,i,s,c,o,l);return r.addTensorArray(h),[h.idTensor,He(1)]}case"TensorArrayWriteV3":{let i=C("tensorArrayId",n,t,r),a=C("index",n,t,r),s=C("tensor",n,t,r),o=r.getTensorArray(i.id);return o.write(a,s),[o.idTensor]}case"TensorArrayReadV3":{let i=C("tensorArrayId",n,t,r),a=C("index",n,t,r);return[r.getTensorArray(i.id).read(a)]}case"TensorArrayGatherV3":{let i=C("tensorArrayId",n,t,r),a=C("indices",n,t,r),s=C("dtype",n,t,r);return[r.getTensorArray(i.id).gather(a,s)]}case"TensorArrayScatterV3":{let i=C("tensorArrayId",n,t,r),a=C("indices",n,t,r),s=C("tensor",n,t,r),o=r.getTensorArray(i.id);return o.scatter(a,s),[o.idTensor]}case"TensorArrayConcatV3":{let i=C("tensorArrayId",n,t,r),a=r.getTensorArray(i.id),s=C("dtype",n,t,r);return[a.concat(s)]}case"TensorArraySplitV3":{let i=C("tensorArrayId",n,t,r),a=C("tensor",n,t,r),s=C("lengths",n,t,r),o=r.getTensorArray(i.id);return o.split(s,a),[o.idTensor]}case"TensorArraySizeV3":{let i=C("tensorArrayId",n,t,r);return[He(r.getTensorArray(i.id).size(),"int32")]}case"TensorArrayCloseV3":{let i=C("tensorArrayId",n,t,r),a=r.getTensorArray(i.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{let i=C("tensorListId",n,t,r),a=C("index",n,t,r),s=C("tensor",n,t,r),o=r.getTensorList(i.id);return o.setItem(a,s),[o.idTensor]}case"TensorListGetItem":{let i=C("tensorListId",n,t,r),a=C("index",n,t,r),s=C("elementShape",n,t,r),o=C("elementDType",n,t,r);return[r.getTensorList(i.id).getItem(a,s,o)]}case"TensorListScatterV2":case"TensorListScatter":{let i=C("indices",n,t,r),l=function nOe(e,n,t,r){if(n.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${n.length} vs. ${e.shape[0]}`);let i=Math.max(...n);if(null!=r&&-1!==r&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);let a=new eC([],t,e.dtype,r),s=tr(e,0);return n.forEach((o,l)=>{a.setItem(o,s[l])}),a}(C("tensor",n,t,r),i,C("elementShape",n,t,r),C("numElements",n,t,r));return r.addTensorList(l),[l.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let s,i=C("elementShape",n,t,r),a=C("elementDType",n,t,r);s="TensorListReserve"===n.op?"numElements":"maxNumElements";let o=C(s,n,t,r),c=function tOe(e,n,t,r){return new eC([],e,n,r)}(i,a,0,"TensorListReserve"===n.op?-1:o);return r.addTensorList(c),[c.idTensor]}case"TensorListGather":{let i=C("tensorListId",n,t,r),a=C("indices",n,t,r),s=C("elementShape",n,t,r),o=C("elementDType",n,t,r);return[r.getTensorList(i.id).gather(a,o,s)]}case"TensorListStack":{let i=C("tensorListId",n,t,r),a=C("elementShape",n,t,r),s=C("elementDType",n,t,r),o=C("numElements",n,t,r);return[r.getTensorList(i.id).stack(a,s,o)]}case"TensorListFromTensor":{let o=function eOe(e,n,t){let r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==t)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${t}`);ws(e.shape.slice(1),n,"TensorList shape mismatch: ");let a=tr(e);return new eC(a,n,r)}(C("tensor",n,t,r),C("elementShape",n,t,r),C("elementDType",n,t,r));return r.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let i=C("tensorListId",n,t,r),a=r.getTensorList(i.id),s=C("dtype",n,t,r),o=C("elementShape",n,t,r);return[a.concat(s,o)]}case"TensorListPushBack":{let i=C("tensorListId",n,t,r),a=C("tensor",n,t,r),s=r.getTensorList(i.id);return s.pushBack(a),[s.idTensor]}case"TensorListPopBack":{let i=C("tensorListId",n,t,r),a=C("elementShape",n,t,r),s=C("elementDType",n,t,r);return[r.getTensorList(i.id).popBack(a,s)]}case"TensorListSplit":{let i=C("tensor",n,t,r),a=C("elementShape",n,t,r),o=function rOe(e,n,t){let r=0,i=n.map(u=>(r+=u,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${e.shape}`);let s=pO(e.shape.slice(1),t),o=0===r?0:e.size/r,l=G(()=>{let u=[];e=H(e,[1,r,o]);for(let h=0;h<n.length;++h)u[h]=H(At(e,[0,0===h?0:i[h-1],0],[1,n[h],o]),s);return e.dispose(),u}),c=new eC([],t,e.dtype,n.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}(i,C("lengths",n,t,r),a);return r.addTensorList(o),[o.idTensor]}case"TensorListLength":{let i=C("tensorListId",n,t,r);return[He(r.getTensorList(i.id).size(),"int32")]}case"TensorListResize":{let i=C("tensorListId",n,t,r),a=C("size",n,t,r),s=r.getTensorList(i.id).resize(a);return r.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${n.op} is not implemented`)}});return function(t,r,i){return e.apply(this,arguments)}}();function Y9(e,n,t){let[r,i]=C("fusedOps",e,n,t),a="biasadd"===r,s=!a,o="prelu"===i,l="fusedbatchnorm"===r,c=C("numArgs",e,n,t);if(a){if(o&&2!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&a&&1!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let u=C("strides",e,n,t),h=J1(e,n,t),d=C("dataFormat",e,n,t).toUpperCase(),p=C("dilations",e,n,t),[f,m]=C("args",e,n,t);return s&&(m=f,f=void 0),{stride:u,pad:h,dataFormat:d,dilations:p,biasArg:f,preluArg:m,activationFunc:i,leakyreluAlpha:C("leakyreluAlpha",e,n,t)}}function fO(e,n,t){return{boxes:C("boxes",e,n,t),scores:C("scores",e,n,t),maxOutputSize:C("maxOutputSize",e,n,t),iouThreshold:C("iouThreshold",e,n,t),scoreThreshold:C("scoreThreshold",e,n,t),softNmsSigma:C("softNmsSigma",e,n,t)}}var oOe=function(){var e=R(function*(n,t,r,i,a=Kr){switch(n.op){case"NonMaxSuppressionV5":{let{boxes:s,scores:o,maxOutputSize:l,iouThreshold:c,scoreThreshold:u,softNmsSigma:h}=fO(n,t,r),d=yield a.image.nonMaxSuppressionWithScoreAsync(s,o,l,c,u,h);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:s,scores:o,maxOutputSize:l,iouThreshold:c,scoreThreshold:u}=fO(n,t,r),h=C("padToMaxOutputSize",n,t,r),d=yield a.image.nonMaxSuppressionPaddedAsync(s,o,l,c,u,h);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:s,scores:o,maxOutputSize:l,iouThreshold:c,scoreThreshold:u}=fO(n,t,r);return[yield a.image.nonMaxSuppressionAsync(s,o,l,c,u)]}case"Where":{let s=a.cast(C("condition",n,t,r),"bool"),o=[yield a.whereAsync(s)];return s.dispose(),o}case"ListDiff":return a.setdiff1dAsync(C("x",n,t,r),C("y",n,t,r));default:throw TypeError(`Node type ${n.op} is not implemented`)}});return function(t,r,i,a){return e.apply(this,arguments)}}(),dOe=function(){var e=R(function*(n,t,r,i){switch(n.op){case"HashTable":case"HashTableV2":{let a=i.getHashTableHandleByName(n.name);if(null!=a)return[a];{let s=C("keyDType",n,t,r),o=C("valueDType",n,t,r),l=new class{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=He(0),this.tensorMap=new Map,Ar(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return He(this.size(),"int32")}import(e,n){var t=this;return R(function*(){t.checkKeyAndValueTensor(e,n);let r=yield e.data();return t.tensorMap.forEach(i=>i.dispose()),t.tensorMap.clear(),G(()=>{let i=tr(n),a=r.length,s=i.length;w.assert(a===s,()=>`The number of elements doesn't match, keys has ${a} elements, the values has ${s} elements.`);for(let o=0;o<a;o++){let l=r[o],c=i[o];Ar(c),t.tensorMap.set(l,c)}return t.handle})})()}find(e,n){var t=this;return R(function*(){t.checkKeyAndValueTensor(e,n);let r=yield e.data();return G(()=>{let i=[];for(let a=0;a<r.length;a++){let o=t.findWithDefault(r[a],n);i.push(o)}return vr(i)})})()}findWithDefault(e,n){return this.tensorMap.get(e)??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}(s,o);return i.addHashTable(n.name,l),[l.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let a=C("tableHandle",n,t,r,i),s=C("keys",n,t,r),o=C("values",n,t,r);return[yield i.getHashTableById(a.id).import(s,o)]}case"LookupTableFind":case"LookupTableFindV2":{let a=C("tableHandle",n,t,r,i),s=C("keys",n,t,r),o=C("defaultValue",n,t,r);return[yield i.getHashTableById(a.id).find(s,o)]}case"LookupTableSize":case"LookupTableSizeV2":{let a=C("tableHandle",n,t,r,i);return[i.getHashTableById(a.id).tensorSize()]}default:throw TypeError(`Node type ${n.op} is not implemented`)}});return function(t,r,i,a){return e.apply(this,arguments)}}();function Z9(e,n,t,r,i=G){let a=((s,o,l)=>{switch(s.category){case"arithmetic":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(C("a",e,n,t),C("b",e,n,t))];case"AddN":return[r.addN(C("tensors",e,n,t))];case"FloorMod":case"Mod":return[r.mod(C("a",e,n,t),C("b",e,n,t))];case"Mul":return[r.mul(C("a",e,n,t),C("b",e,n,t))];case"RealDiv":case"Div":return[r.div(C("a",e,n,t),C("b",e,n,t))];case"DivNoNan":return[r.divNoNan(C("a",e,n,t),C("b",e,n,t))];case"FloorDiv":return[r.floorDiv(C("a",e,n,t),C("b",e,n,t))];case"Sub":return[r.sub(C("a",e,n,t),C("b",e,n,t))];case"Minimum":return[r.minimum(C("a",e,n,t),C("b",e,n,t))];case"Maximum":return[r.maximum(C("a",e,n,t),C("b",e,n,t))];case"Pow":return[r.pow(C("a",e,n,t),C("b",e,n,t))];case"SquaredDifference":return[r.squaredDifference(C("a",e,n,t),C("b",e,n,t))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"basic_math":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(C("x",e,n,t))];case"Acos":return[r.acos(C("x",e,n,t))];case"Acosh":return[r.acosh(C("x",e,n,t))];case"Asin":return[r.asin(C("x",e,n,t))];case"Asinh":return[r.asinh(C("x",e,n,t))];case"Atan":return[r.atan(C("x",e,n,t))];case"Atan2":return[r.atan2(C("x",e,n,t),C("y",e,n,t))];case"Atanh":return[r.atanh(C("x",e,n,t))];case"Ceil":return[r.ceil(C("x",e,n,t))];case"Complex":return[r.complex(C("real",e,n,t),C("imag",e,n,t))];case"Cos":return[r.cos(C("x",e,n,t))];case"Cosh":return[r.cosh(C("x",e,n,t))];case"Elu":return[r.elu(C("x",e,n,t))];case"Erf":return[r.erf(C("x",e,n,t))];case"Exp":return[r.exp(C("x",e,n,t))];case"Expm1":return[r.expm1(C("x",e,n,t))];case"Floor":return[r.floor(C("x",e,n,t))];case"Log":return[r.log(C("x",e,n,t))];case"Log1p":return[r.log1p(C("x",e,n,t))];case"Imag":return[r.imag(C("x",e,n,t))];case"Neg":return[r.neg(C("x",e,n,t))];case"Reciprocal":return[r.reciprocal(C("x",e,n,t))];case"Real":return[r.real(C("x",e,n,t))];case"Relu":return[r.relu(C("x",e,n,t))];case"Round":return[r.round(C("x",e,n,t))];case"Selu":return[r.selu(C("x",e,n,t))];case"Sigmoid":return[r.sigmoid(C("x",e,n,t))];case"Sin":return[r.sin(C("x",e,n,t))];case"Sign":return[r.sign(C("x",e,n,t))];case"Sinh":return[r.sinh(C("x",e,n,t))];case"Softplus":return[r.softplus(C("x",e,n,t))];case"Sqrt":return[r.sqrt(C("x",e,n,t))];case"Square":return[r.square(C("x",e,n,t))];case"Tanh":return[r.tanh(C("x",e,n,t))];case"Tan":return[r.tan(C("x",e,n,t))];case"ClipByValue":return[r.clipByValue(C("x",e,n,t),C("clipValueMin",e,n,t),C("clipValueMax",e,n,t))];case"Relu6":return[r.relu6(C("x",e,n,t))];case"Rsqrt":return[r.rsqrt(si(e.inputNames[0],n,t))];case"LeakyRelu":return[r.leakyRelu(C("x",e,n,t),C("alpha",e,n,t))];case"Prelu":return[r.prelu(C("x",e,n,t),C("alpha",e,n,t))];case"IsNan":return[r.isNaN(si(e.inputNames[0],n,t))];case"IsInf":return[r.isInf(si(e.inputNames[0],n,t))];case"IsFinite":return[r.isFinite(si(e.inputNames[0],n,t))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"control":return iOe(s,o,l);case"convolution":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"Conv1D":{let i=C("stride",e,n,t),a=C("pad",e,n,t),s=C("dataFormat",e,n,t).toUpperCase(),o=C("dilation",e,n,t);return[r.conv1d(C("x",e,n,t),C("filter",e,n,t),i,a,s,o)]}case"Conv2D":{let i=C("strides",e,n,t),a=J1(e,n,t),s=C("dataFormat",e,n,t).toUpperCase(),o=C("dilations",e,n,t);return[r.conv2d(C("x",e,n,t),C("filter",e,n,t),[i[1],i[2]],a,s,[o[1],o[2]])]}case"_FusedConv2D":{let{stride:i,pad:a,dataFormat:s,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:h}=Y9(e,n,t);return[r.fused.conv2d({x:C("x",e,n,t),filter:C("filter",e,n,t),strides:[i[1],i[2]],pad:a,dataFormat:s,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{let{stride:i,pad:a,dataFormat:s,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:h}=Y9(e,n,t);return[r.fused.depthwiseConv2d({x:C("x",e,n,t),filter:C("filter",e,n,t),strides:[i[1],i[2]],pad:a,dataFormat:s,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let i=C("outputShape",e,n,t),a=C("strides",e,n,t),s=J1(e,n,t);return[r.conv2dTranspose(C("x",e,n,t),C("filter",e,n,t),i,[a[1],a[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let i=C("strides",e,n,t),a=J1(e,n,t),s=C("dilations",e,n,t),o=C("dataFormat",e,n,t).toUpperCase();return[r.depthwiseConv2d(C("input",e,n,t),C("filter",e,n,t),[i[1],i[2]],a,o,[s[1],s[2]])]}case"Conv3D":{let i=C("strides",e,n,t),a=C("pad",e,n,t),s=C("dataFormat",e,n,t).toUpperCase(),o=C("dilations",e,n,t);return[r.conv3d(C("x",e,n,t),C("filter",e,n,t),[i[1],i[2],i[3]],a,s,[o[1],o[2],o[3]])]}case"AvgPool":{let i=C("strides",e,n,t),a=C("pad",e,n,t),s=C("kernelSize",e,n,t);return[r.avgPool(C("x",e,n,t),[s[1],s[2]],[i[1],i[2]],a)]}case"MaxPool":{let i=C("strides",e,n,t),a=C("pad",e,n,t),s=C("kernelSize",e,n,t);return[r.maxPool(C("x",e,n,t),[s[1],s[2]],[i[1],i[2]],a)]}case"MaxPoolWithArgmax":{let i=C("strides",e,n,t),a=C("pad",e,n,t),s=C("kernelSize",e,n,t),o=C("includeBatchInIndex",e,n,t),{result:l,indexes:c}=r.maxPoolWithArgmax(C("x",e,n,t),[s[1],s[2]],[i[1],i[2]],a,o);return[l,c]}case"AvgPool3D":{let i=C("strides",e,n,t),a=C("pad",e,n,t),s=C("kernelSize",e,n,t);return[r.avgPool3d(C("x",e,n,t),[s[1],s[2],s[3]],[i[1],i[2],i[3]],a)]}case"MaxPool3D":{let i=C("strides",e,n,t),a=C("pad",e,n,t),s=C("kernelSize",e,n,t);return[r.maxPool3d(C("x",e,n,t),[s[1],s[2],s[3]],[i[1],i[2],i[3]],a)]}case"Dilation2D":{let i=C("strides",e,n,t),a=C("pad",e,n,t),s=C("dilations",e,n,t),o=i[1],l=i[2],c=s[1],u=s[2];return[r.dilation2d(C("x",e,n,t),C("filter",e,n,t),[o,l],a,[c,u],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"creation":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"Fill":{let i=C("shape",e,n,t),a=C("dtype",e,n,t),s=C("value",e,n,t);return[r.fill(i,s,a)]}case"LinSpace":{let i=C("start",e,n,t),a=C("stop",e,n,t),s=C("num",e,n,t);return[r.linspace(i,a,s)]}case"Multinomial":{let i=C("logits",e,n,t),a=C("numSamples",e,n,t),s=C("seed",e,n,t);return[r.multinomial(i,a,s)]}case"OneHot":{let i=C("indices",e,n,t),a=C("depth",e,n,t),s=C("onValue",e,n,t),o=C("offValue",e,n,t),l=C("dtype",e,n,t);return[r.oneHot(i,a,s,o,l)]}case"Ones":return[r.ones(C("shape",e,n,t),C("dtype",e,n,t))];case"OnesLike":return[r.onesLike(C("x",e,n,t))];case"RandomStandardNormal":return[r.randomStandardNormal(C("shape",e,n,t),C("dtype",e,n,t),C("seed",e,n,t))];case"RandomUniform":return[r.randomUniform(C("shape",e,n,t),C("minval",e,n,t),C("maxval",e,n,t),C("dtype",e,n,t))];case"RandomUniformInt":return[r.randomUniformInt(C("shape",e,n,t),C("minval",e,n,t),C("maxval",e,n,t),C("seed",e,n,t))];case"Range":{let i=C("start",e,n,t),a=C("stop",e,n,t),s=C("step",e,n,t);return[r.range(i,a,s,C("dtype",e,n,t))]}case"TruncatedNormal":{let i=C("shape",e,n,t),a=C("mean",e,n,t),s=C("stdDev",e,n,t),o=C("seed",e,n,t);return[r.truncatedNormal(i,a,s,C("dtype",e,n,t),o)]}case"Zeros":return[r.zeros(C("shape",e,n,t),C("dtype",e,n,t))];case"ZerosLike":return[r.zerosLike(C("x",e,n,t))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"dynamic":return oOe(s,o,l);case"evaluation":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"LowerBound":{let i=C("sortedSequence",e,n,t),a=C("values",e,n,t);return[r.lowerBound(i,a)]}case"TopKV2":{let i=C("x",e,n,t),a=C("k",e,n,t),s=C("sorted",e,n,t),o=r.topk(i,a,s);return[o.values,o.indices]}case"UpperBound":{let i=C("sortedSequence",e,n,t),a=C("values",e,n,t);return[r.upperBound(i,a)]}case"Unique":{let i=C("x",e,n,t),a=r.unique(i);return[a.values,a.indices]}case"UniqueV2":{let i=C("x",e,n,t),a=C("axis",e,n,t),s=r.unique(i,a);return[s.values,s.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"image":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"ResizeBilinear":{let i=C("images",e,n,t),a=C("size",e,n,t),s=C("alignCorners",e,n,t),o=C("halfPixelCenters",e,n,t);return[r.image.resizeBilinear(i,[a[0],a[1]],s,o)]}case"ResizeNearestNeighbor":{let i=C("images",e,n,t),a=C("size",e,n,t),s=C("alignCorners",e,n,t),o=C("halfPixelCenters",e,n,t);return[r.image.resizeNearestNeighbor(i,[a[0],a[1]],s,o)]}case"CropAndResize":{let i=C("image",e,n,t),a=C("boxes",e,n,t),s=C("boxInd",e,n,t),o=C("cropSize",e,n,t),l=C("method",e,n,t),c=C("extrapolationValue",e,n,t);return[r.image.cropAndResize(i,a,s,o,l,c)]}case"ImageProjectiveTransformV3":{let i=C("images",e,n,t),a=C("transforms",e,n,t),s=C("outputShape",e,n,t),o=C("fillValue",e,n,t),l=C("interpolation",e,n,t),c=C("fillMode",e,n,t);return[r.image.transform(i,a,l.toLowerCase(),c.toLowerCase(),o,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"graph":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"Const":return n[e.name];case"PlaceholderWithDefault":let i=C("default",e,n,t);return[si(e.name,n,t)||i];case"Placeholder":return[si(e.name,n,t)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[Il(C("x",e,n,t))];case"IdentityN":return C("x",e,n,t).map(u=>Il(u));case"Shape":return[r.tensor1d(C("x",e,n,t).shape,"int32")];case"ShapeN":return C("x",e,n,t).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(C("x",e,n,t).size,"int32")];case"Rank":return[r.scalar(C("x",e,n,t).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let s=C("x",e,n,t),o=C("data",e,n,t),l=C("message",e,n,t),c=C("summarize",e,n,t);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,c));return[s];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"logical":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"Equal":return[r.equal(C("a",e,n,t),C("b",e,n,t))];case"NotEqual":return[r.notEqual(C("a",e,n,t),C("b",e,n,t))];case"Greater":return[r.greater(C("a",e,n,t),C("b",e,n,t))];case"GreaterEqual":return[r.greaterEqual(C("a",e,n,t),C("b",e,n,t))];case"Less":return[r.less(C("a",e,n,t),C("b",e,n,t))];case"LessEqual":return[r.lessEqual(C("a",e,n,t),C("b",e,n,t))];case"LogicalAnd":return[r.logicalAnd(C("a",e,n,t),C("b",e,n,t))];case"LogicalNot":return[r.logicalNot(C("a",e,n,t))];case"LogicalOr":return[r.logicalOr(C("a",e,n,t),C("b",e,n,t))];case"Select":case"SelectV2":return[r.where(C("condition",e,n,t),C("a",e,n,t),C("b",e,n,t))];case"BitwiseAnd":return[r.bitwiseAnd(C("a",e,n,t),C("b",e,n,t))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"matrices":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(C("a",e,n,t),C("b",e,n,t),C("transposeA",e,n,t),C("transposeB",e,n,t))];case"Einsum":return[r.einsum(C("equation",e,n,t),...C("tensors",e,n,t))];case"Transpose":return[r.transpose(C("x",e,n,t),C("perm",e,n,t))];case"_FusedMatMul":let[i,a]=C("fusedOps",e,n,t),s="biasadd"===i,o="prelu"===a,l=C("numArgs",e,n,t),c=C("leakyreluAlpha",e,n,t);if(s){if(o&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[u,h]=C("args",e,n,t);return[r.fused.matMul({a:C("a",e,n,t),b:C("b",e,n,t),transposeA:C("transposeA",e,n,t),transposeB:C("transposeB",e,n,t),bias:u,activation:a,preluActivationWeights:h,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(C("a",e,n,t),C("numLower",e,n,t),C("numUpper",e,n,t))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"normalization":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(C("x",e,n,t),C("axis",e,n,t),C("keepDims",e,n,t))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(C("x",e,n,t),C("mean",e,n,t),C("variance",e,n,t),C("offset",e,n,t),C("scale",e,n,t),C("epsilon",e,n,t))];case"LRN":return[r.localResponseNormalization(C("x",e,n,t),C("radius",e,n,t),C("bias",e,n,t),C("alpha",e,n,t),C("beta",e,n,t))];case"Softmax":return[r.softmax(C("x",e,n,t))];case"LogSoftmax":return[r.logSoftmax(C("x",e,n,t))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"ragged":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"RaggedGather":{let{outputNestedSplits:i,outputDenseValues:a}=r.raggedGather(C("paramsNestedSplits",e,n,t),C("paramsDenseValues",e,n,t),C("indices",e,n,t),C("outputRaggedRank",e,n,t));return i.concat(a)}case"RaggedRange":{let{rtNestedSplits:i,rtDenseValues:a}=r.raggedRange(C("starts",e,n,t),C("limits",e,n,t),C("splits",e,n,t));return[i,a]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(C("shape",e,n,t),C("values",e,n,t),C("defaultValue",e,n,t),C("rowPartitionTensors",e,n,t),C("rowPartitionTypes",e,n,t))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"reduction":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"Max":{let o=C("axis",e,n,t),l=C("keepDims",e,n,t);return[r.max(C("x",e,n,t),o,l)]}case"Mean":{let o=C("axis",e,n,t),l=C("keepDims",e,n,t);return[r.mean(C("x",e,n,t),o,l)]}case"Min":{let o=C("axis",e,n,t),l=C("keepDims",e,n,t);return[r.min(C("x",e,n,t),o,l)]}case"Sum":{let o=C("axis",e,n,t),l=C("keepDims",e,n,t);return[r.sum(C("x",e,n,t),o,l)]}case"All":{let o=C("axis",e,n,t),l=C("keepDims",e,n,t);return[r.all(C("x",e,n,t),o,l)]}case"Any":{let o=C("axis",e,n,t),l=C("keepDims",e,n,t);return[r.any(C("x",e,n,t),o,l)]}case"ArgMax":{let o=C("axis",e,n,t);return[r.argMax(C("x",e,n,t),o)]}case"ArgMin":{let o=C("axis",e,n,t);return[r.argMin(C("x",e,n,t),o)]}case"Prod":{let o=C("axis",e,n,t),l=C("keepDims",e,n,t);return[r.prod(C("x",e,n,t),o,l)]}case"Cumprod":{let o=C("axis",e,n,t),l=C("exclusive",e,n,t),c=C("reverse",e,n,t);return[r.cumprod(C("x",e,n,t),o,l,c)]}case"Cumsum":{let o=C("axis",e,n,t),l=C("exclusive",e,n,t),c=C("reverse",e,n,t);return[r.cumsum(C("x",e,n,t),o,l,c)]}case"Bincount":let i=C("x",e,n,t),a=C("weights",e,n,t),s=C("size",e,n,t);return[r.bincount(i,a,s)];case"DenseBincount":{let o=C("x",e,n,t),l=C("weights",e,n,t),c=C("size",e,n,t),u=C("binaryOutput",e,n,t);return[r.denseBincount(o,l,c,u)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"slice_join":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"ConcatV2":case"Concat":{let i=C("n",e,n,t),a=C("axis",e,n,t),s=C("tensors",e,n,t);return s=s.slice(0,i),[r.concat(s,a)]}case"Gather":{let i=C("x",e,n,t),a=C("indices",e,n,t);return[r.gather(i,r.cast(a,"int32"),0)]}case"GatherV2":{let i=C("axis",e,n,t),a=C("batchDims",e,n,t),s=C("x",e,n,t),o=C("indices",e,n,t);return[r.gather(s,r.cast(o,"int32"),i,a)]}case"Reverse":{let i=C("dims",e,n,t),a=[];for(let o=0;o<i.length;o++)i[o]&&a.push(o);let s=C("x",e,n,t);return[r.reverse(s,a)]}case"ReverseV2":{let i=C("axis",e,n,t),a=C("x",e,n,t);return[r.reverse(a,i)]}case"Slice":{let i=C("begin",e,n,t),a=C("size",e,n,t);return[r.slice(C("x",e,n,t),i,a)]}case"StridedSlice":{let i=C("begin",e,n,t),a=C("end",e,n,t),s=C("strides",e,n,t),o=C("beginMask",e,n,t),l=C("endMask",e,n,t),c=C("ellipsisMask",e,n,t),u=C("newAxisMask",e,n,t),h=C("shrinkAxisMask",e,n,t),d=C("x",e,n,t);return[r.stridedSlice(d,i,a,s,o,l,c,u,h)]}case"Pack":return G(()=>{let i=C("axis",e,n,t),a=C("tensors",e,n,t),s=a[0].shape,o=r.squeeze(a[0]).shape,l=a.map(c=>{let u=w.arraysEqual(c.shape,s);if(!u&&!w.arraysEqual(r.squeeze(c).shape,o))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,s)});return[r.stack(l,i)]});case"Unpack":{let i=C("axis",e,n,t),a=C("tensor",e,n,t);return r.unstack(a,i)}case"Tile":{let i=C("reps",e,n,t);return[r.tile(C("x",e,n,t),i)]}case"Split":case"SplitV":{let i=C("axis",e,n,t),a=C("numOrSizeSplits",e,n,t),s=C("x",e,n,t);return r.split(s,a,i)}case"ScatterNd":{let i=C("indices",e,n,t),a=C("values",e,n,t),s=C("shape",e,n,t);return[r.scatterND(i,a,s)]}case"GatherNd":{let i=C("x",e,n,t),a=C("indices",e,n,t);return[r.gatherND(i,a)]}case"SparseToDense":{let i=C("sparseIndices",e,n,t),a=C("outputShape",e,n,t),s=C("sparseValues",e,n,t),o=C("defaultValue",e,n,t);return[r.sparseToDense(i,s,a,s.dtype===o.dtype?o:r.cast(o,s.dtype))]}case"TensorScatterUpdate":{let i=C("indices",e,n,t),a=C("values",e,n,t),s=C("tensor",e,n,t);return[r.tensorScatterUpdate(s,i,a)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"sparse":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"SparseFillEmptyRows":{let{outputIndices:i,outputValues:a,emptyRowIndicator:s,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(C("indices",e,n,t),C("values",e,n,t),C("denseShape",e,n,t),C("defaultValue",e,n,t));return[i,a,s,o]}case"SparseReshape":{let{outputIndices:i,outputShape:a}=r.sparse.sparseReshape(C("inputIndices",e,n,t),C("inputShape",e,n,t),C("newShape",e,n,t));return[i,a]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(C("data",e,n,t),C("indices",e,n,t),C("segmentIds",e,n,t))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(C("data",e,n,t),C("indices",e,n,t),C("segmentIds",e,n,t))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"spectral":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"FFT":return[r.fft(C("x",e,n,t))];case"IFFT":return[r.ifft(C("x",e,n,t))];case"RFFT":return[r.rfft(C("x",e,n,t))];case"IRFFT":return[r.irfft(C("x",e,n,t))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"string":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(C("input",e,n,t),C("pattern",e,n,t),C("rewrite",e,n,t),C("replaceGlobal",e,n,t))];case"StringNGrams":{let{nGrams:i,nGramsSplits:a}=r.string.stringNGrams(C("data",e,n,t),C("dataSplits",e,n,t),C("separator",e,n,t),C("nGramWidths",e,n,t),C("leftPad",e,n,t),C("rightPad",e,n,t),C("padWidth",e,n,t),C("preserveShortSequences",e,n,t));return[i,a]}case"StringSplit":{let{indices:i,values:a,shape:s}=r.string.stringSplit(C("input",e,n,t),C("delimiter",e,n,t),C("skipEmpty",e,n,t));return[i,a,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(C("input",e,n,t),C("numBuckets",e,n,t))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"transformation":return i(()=>((e,n,t,r=Kr)=>{switch(e.op){case"Cast":return[r.cast(C("x",e,n,t),C("dtype",e,n,t))];case"ExpandDims":{let i=C("axis",e,n,t);return[r.expandDims(C("x",e,n,t),i)]}case"Squeeze":{let i=C("axis",e,n,t);return[r.squeeze(C("x",e,n,t),i)]}case"Reshape":return[r.reshape(C("x",e,n,t),C("shape",e,n,t))];case"EnsureShape":return[r.ensureShape(C("x",e,n,t),C("shape",e,n,t))];case"MirrorPad":return[r.mirrorPad(C("x",e,n,t),C("padding",e,n,t),C("mode",e,n,t))];case"PadV2":case"Pad":return[r.pad(C("x",e,n,t),C("padding",e,n,t),C("constantValue",e,n,t))];case"SpaceToBatchND":{let i=C("blockShape",e,n,t),a=C("paddings",e,n,t);return[r.spaceToBatchND(C("x",e,n,t),i,a)]}case"BatchToSpaceND":{let i=C("blockShape",e,n,t),a=C("crops",e,n,t);return[r.batchToSpaceND(C("x",e,n,t),i,a)]}case"DepthToSpace":{let i=C("blockSize",e,n,t),a=C("dataFormat",e,n,t).toUpperCase();return[r.depthToSpace(C("x",e,n,t),i,a)]}case"BroadcastTo":return[r.broadcastTo(C("x",e,n,t),C("shape",e,n,t))];case"BroadcastArgs":return[r.broadcastArgs(C("s0",e,n,t),C("s1",e,n,t))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(s,o,l));case"hash_table":return dOe(s,o,l,r);case"custom":let c=k9(s.op);if(c&&c.customExecutor)return c.customExecutor(new class{constructor(e,n,t){this.node=e,this.tensorMap=n,this.context=t,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(r=>this.getInput(r)),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((r,i)=>(r[i]=this.getAttr(i),r),{}))}getInput(e){return si(e,this.tensorMap,this.context)}getAttr(e,n){let t=this.node.rawAttrs[e];if(null!=t.tensor)return si(e,this.tensorMap,this.context);if(null!=t.i||null!=t.f)return iO(this.node.rawAttrs,e,n);if(null!=t.s)return nO(this.node.rawAttrs,e,n);if(null!=t.b)return rO(this.node.rawAttrs,e,n);if(null!=t.shape)return lO(this.node.rawAttrs,e,n);if(null!=t.type)return sO(this.node.rawAttrs,e,n);if(null!=t.list){if(null!=t.list.i||null!=t.list.f)return cO(this.node.rawAttrs,e,n);if(null!=t.list.s)return uO(this.node.rawAttrs,e,n);if(null!=t.list.shape)return dO(this.node.rawAttrs,e,n);if(null!=t.list.b)return hO(this.node.rawAttrs,e,n);if(null!=t.list.type)return oO(this.node.rawAttrs,e,n)}return n}}(s,o,l));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,n,t);return w.isPromise(a)?a.then(s=>[].concat(s)):[].concat(a)}var Q9=class{constructor(e={},n={},t={},r={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=t,this.functionMap=r,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let n=0;n<this.contexts.length-1;n++){let t=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(t))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>0===n.id&&0===n.iterationId?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(let n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}};function J9(e,n,t,r){let i=new Set,a=[],s=null,o=null,l=new Set,c=new Set(Object.keys(e).map(d=>ka(d)[0]));r=r||[];let u=new Set(r.map(d=>ka(d.name)[0])),h=[...n];for(;h.length>0;){let d=h.pop();if((Bh(d)||AOe(d)||TOe(d))&&null==s&&(s=d,o=s.children.map(p=>p.name).filter(p=>i.has(p))),i.add(d.name),null==t[d.name]&&!c.has(d.name)&&!u.has(d.name)){if(0===d.inputs.length){a.push(d.name);continue}d.inputs.forEach(p=>{l.has(p.name)||(l.add(p.name),h.push(p))})}}return{inputs:e,outputs:n,usedNodes:i,missingInputs:a,dynamicNode:s,syncInputs:o}}var tC=class extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}},MOe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),EOe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),DOe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Bh(e){return MOe.has(e.op)}function AOe(e){return EOe.has(e.op)}function TOe(e){return DOe.has(e.op)}var eq=class wie{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(n){let t=Object.keys(n).map(r=>n[r].map(i=>i.id));this._weightIds=[].concat(...t),this._weightMap=n}set resourceManager(n){this._resourceManager=n}get inputs(){return this._inputs.map(n=>({name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(n=>({name:n.name,shape:n.attrParams.shape?n.attrParams.shape.value:void 0,dtype:n.attrParams.dtype?n.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(n=>n.signatureKey||n.name)}get outputNodes(){return this._outputs.map(n=>{let t=n.signatureKey||n.name;return n.defaultOutput?`${t}:${n.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((n,t)=>(n[t]=this._functions[t].signature,n),{})}constructor(n,t){this.graph=n,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=n.outputs,this._inputs=n.inputs,this._initNodes=n.initNodes,this._signature=n.signature,this._functions=n.functions,null!=n.functions&&Object.keys(n.functions).forEach(r=>{this._functionExecutorMap[r]=new wie(n.functions[r],this)})}getCompilationKey(n,t){let r=n.map(a=>a.name).sort(),i=t.map(a=>a.name).sort();return r.join(this.SEPARATOR)+"--"+i.join(this.SEPARATOR)}compile(n,t){let r=J9(n,t,this.weightMap,this._initNodes),{missingInputs:i,dynamicNode:a,syncInputs:s}=r;if(null!=a)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(i.length>0){let c=t.map(h=>h.name),u=Object.keys(n);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${i}]`)}let o=function COe(e,n){let{usedNodes:t,inputs:r}=n,s=g=>t.has("string"==typeof g?g:g.name);function o(g){return[...new Map(g.map(y=>[y.name,y])).values()]}let l=o([...Object.keys(r).map(g=>ka(g)[0]).map(g=>e.nodes[g]),...e.weights,...e.initNodes||[]]).filter(s),c=o([...l,...Object.values(e.nodes)]).filter(s),u=new Map(c.map(g=>[g.name,g])),h={};for(let g of c){h[g.name]=h[g.name]||0;for(let y of g.children)s(y)||(h[y.name]=Number.POSITIVE_INFINITY),h[y.name]=(h[y.name]||0)+1}let d=Object.entries(h).filter(([,g])=>0===g).map(([g])=>g),p=[...d];for(;d.length>0;){let g=d.pop(),y=u.get(g);for(let b of y.children.filter(s))0==--h[b.name]&&(p.push(b.name),d.push(b.name))}let m=function kOe(e,n){let t=new Map(e.map(a=>[a.name,a])),r=n.map(a=>a.name),i=new Set(r);for(;r.length>0;){let a=r.pop(),s=t.get(a);for(let o of s.children)!t.has(o.name)||i.has(o.name)||(i.add(o.name),r.push(o.name))}return e.filter(a=>i.has(a.name))}(p.map(g=>u.get(g)),l);return function SOe(e,n){let t=new Map(e.map((o,l)=>[o.name,l])),r=new Set(n.map(o=>o.name)),i=o=>r.has("string"==typeof o?o:o.name),a=new Set(e.map(o=>o.name)),s=o=>a.has("string"==typeof o?o:o.name);for(let o of e){for(let l of o.children.filter(s)){if(!t.has(l.name))throw new tC(`Child ${l.name} of node ${o.name} is unreachable.`);if(t.get(o.name)>t.get(l.name))throw new tC(`Node ${o.name} is scheduled to run after its child ${l.name}.`)}if(!i(o))for(let l of o.inputs){if(!t.has(l.name))throw new tC(`Input ${l.name} of node ${o.name} is unreachable.`);if(t.get(l.name)>t.get(o.name))throw new tC(`Node ${o.name} is scheduled to run before its input ${l.name}.`)}}}(m,l),m}(this.graph,r),l=function IOe(e){let n=new Map(e.map((o,l)=>[o.name,l])),t=Number.MAX_SAFE_INTEGER,r=e.map((o,l)=>Bh(o)?t:l),i=o=>r[n.get(o.name)]??-1,a=e.map((o,l)=>o.children.map(i).reduce((c,u)=>Math.max(c,u),r[l])),s=new Map;for(let o=0;o<e.length;++o){let l=a[o];if(l===t)continue;let c=e[o],u=e[l];s.has(u.name)||s.set(u.name,[]),s.get(u.name).push(c)}return s}(o);return{orderedNodes:o,nodeLiveUntilMap:l}}cloneAndKeepTensor(n){if(null==n)return null;let t=n.clone();return Ar(t),t}cloneTensorList(n){return n?n.map(t=>this.cloneAndKeepTensor(t)):null}cloneTensorMap(n){return Object.fromEntries(Object.entries(n).map(([t,r])=>[t,this.cloneTensorList(r)]))}execute(n,t){this.disposeIntermediateTensors(),n=this.mapInputs(n);let r=Object.keys(n).sort();this.checkInputs(n),this.checkInputShapeAndType(n),t=this.mapOutputs(t),this.checkOutputs(t);let i=r.map(d=>this.graph.nodes[ka(d)[0]]),a=t.map(d=>ka(d)[0]),s=new Set(a),o=a.map(d=>this.graph.nodes[d]);0===o.length&&(o=this._outputs);let l=this.getCompilationKey(i,o),c=this.compiledMap.get(l);null==c&&(c=this.compile(n,o),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=Q().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(d){this.keepIntermediateTensors=!1,console.warn(d.message)}let u={},h={};return G(()=>{let d=new Q9(this.weightMap,u,h,this.functionExecutorMap,this.parseNodeNameCache),p=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(n).forEach(y=>{let[b,_]=ka(y,d),v=[];v[_]=n[y],p[b]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[b]=this.cloneTensorList(v))});let f=this.getFrozenTensorIds(p),{orderedNodes:m,nodeLiveUntilMap:g}=c;for(let y of m){if(p[y.name])continue;let b=Z9(y,p,d,this._resourceManager);if(w.isPromise(b))throw new Error(`The execution of the op '${y.op}' returned a promise. Please use model.executeAsync() instead.`);p[y.name]=b,this.keepIntermediateTensors&&(this.clonedTensorsMap[y.name]=this.cloneTensorList(b)),this.checkTensorForDisposalWithNodeLiveUntilInfo(y,p,d,f,s,g.get(y.name))}return null==this.parent&&d.dispose(f),t.map(y=>si(y,p,d))})}getFrozenTensorIds(n){let t=[].concat.apply([],Object.keys(n).map(r=>n[r]).map(r=>r.map(i=>i.id)));return new Set(t)}checkTensorForDisposal(n,t,r,i,a,s,o){if(!Bh(t)&&!s.has(n)){for(let l of r[n])null!=l&&(o[l.id]=(o[l.id]||0)+t.children.length);for(let l of t.inputs){if(Bh(l))continue;let c=S9(l.name,r,i);if(null!=c)for(let u of c){if(!u||u.kept||a.has(u.id))continue;let h=o[u.id];1===h?(u.dispose(),delete o[u.id]):null!=h&&o[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(n,t,r,i,a,s){function o(l){return Bh(l)||a.has(l.name)}if(!Bh(n)&&null!=s)for(let l of s){if(o(l))continue;let c=S9(l.name,t,r);for(let u of c)!u||u.kept||i.has(u.id)||u.dispose()}}executeAsync(n,t){var r=this;return R(function*(){return r._executeAsync(n,t)})()}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(n=>{for(let t of n)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}_executeAsync(n,t,r=!1,i={},a={}){var s=this;return R(function*(){s.disposeIntermediateTensors(),r||(n=s.mapInputs(n),s.checkInputs(n),s.checkInputShapeAndType(n),t=s.mapOutputs(t),s.checkOutputs(t));try{s.keepIntermediateTensors=Q().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){s.keepIntermediateTensors=!1,console.warn(p.message)}let o=new Q9(s.weightMap,i,a,s.functionExecutorMap,s.parseNodeNameCache);s.keepIntermediateTensors&&(s.clonedTensorsMap=s.cloneTensorMap(s.weightMap));let l=yield s.executeWithControlFlow(n,o,t,r),c=t.map(p=>si(p,l,o)),u=c.map(p=>p.id),h=Object.keys(n).map(p=>n[p].id),d=new Set([...u,...h,...s.weightIds]);return Object.values(l).forEach(p=>{p.forEach(f=>{f&&!f.isDisposed&&!d.has(f.id)&&f.dispose()})}),null==s.parent&&o.dispose(d),c})()}executeFunctionAsync(n,t,r){var i=this;return R(function*(){let a=n.reduce((s,o,l)=>(s[i.inputs[l].name]=o,s),{});return i._executeAsync(a,i.outputNodes,!0,t,r)})()}executeWithControlFlow(n,t,r,i){var a=this;return R(function*(){let s=Object.keys(n),o=s.map(x=>a.graph.nodes[ka(x)[0]]),l=r.map(x=>ka(x)[0]),c=new Set(l),u=l.map(x=>a.graph.nodes[x]);0===u.length&&(u=a._outputs);let{usedNodes:h,missingInputs:d,dynamicNode:p,syncInputs:f}=J9(n,u,a.weightMap,a._initNodes),m=[...o,...a.graph.weights,...a._initNodes||[]].map(x=>({node:x,contexts:t.currentContext})),g=Object.assign({},a.weightMap);Object.keys(n).forEach(x=>{let[S,M]=ka(x),D=[];D[M]=n[x],g[S]=D});let y={},b=a.getFrozenTensorIds(g),_={};for(;m.length>0;){let x=a.processStack(o,m,t,g,_,b,c,y,h);yield Promise.all(x)}null==p&&!i&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let v=u.filter(x=>!Bh(x)&&!si(x.name,g,t)).map(x=>x.name);if(v.length>0){let x="";throw null!=p&&(x=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${f}]`),new Error(`Cannot compute the outputs [${v}] from the provided inputs [${s}]. Consider providing the following inputs: [${d}]. ${x}`)}return g})()}processStack(n,t,r,i,a,s,o,l,c){let u=[];for(;t.length>0;){let h=t.pop();r.currentContext=h.contexts;let d="";if("Enter"===h.node.op&&C("isConstant",h.node,i,r)&&([d]=Sl(h.node.name,r)),null==i[h.node.name]){let p=Z9(h.node,i,r,this._resourceManager);d||([d]=Sl(h.node.name,r));let f=r.currentContext;w.isPromise(p)?u.push(p.then(m=>(i[d]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(m)),r.currentContext=f,this.checkTensorForDisposal(d,h.node,i,r,s,o,l),this.processChildNodes(h.node,t,r,i,a,c),m))):(i[d]=p,this.keepIntermediateTensors&&(this.clonedTensorsMap[d]=this.cloneTensorList(p)),this.checkTensorForDisposal(d,h.node,i,r,s,o,l),this.processChildNodes(h.node,t,r,i,a,c))}else this.processChildNodes(h.node,t,r,i,a,c)}return u}processChildNodes(n,t,r,i,a,s){n.children.forEach(o=>{let[l]=Sl(o.name,r);a[l]||!s.has(o.name)||("Merge"===o.op?o.inputNames.some(c=>!!si(c,i,r))&&(a[l]=!0,t.push({contexts:r.currentContext,node:o})):o.inputNames.every(c=>!!si(c,i,r))&&(a[l]=!0,t.push({contexts:r.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(n=>this.weightMap[n].forEach(t=>t.dispose()))}checkInputShapeAndType(n){Object.keys(n).forEach(t=>{let r=n[t],[i]=ka(t),a=this.graph.nodes[i];if(a.attrParams.shape&&a.attrParams.shape.value){let s=a.attrParams.shape.value,o=s.length===r.shape.length&&r.shape.every((l,c)=>-1===s[c]||s[c]===l);w.assert(o,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${s}], but was [${r.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&w.assert(r.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(n){var t,r;let i={};for(let a in n){let s=null===(r=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===r?void 0:r[a];null!=s?i[s.name]=n[a]:i[a]=n[a]}return i}checkInputs(n){let t=Object.keys(n).filter(r=>{let[i]=ka(r);return null==this.graph.nodes[i]});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(n){return n.map(t=>{var r,i;let a=null===(i=null===(r=this._signature)||void 0===r?void 0:r.outputs)||void 0===i?void 0:i[t];return null!=a?a.name:t},{})}checkOutputs(n){n.forEach(t=>{let[r]=ka(t);if(!this.graph.nodes[r])throw new Error(`The output '${t}' is not found in the graph`)})}},OOe="?tfjs-format=file",FOe="model.json",mO=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},t=ai){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=t,null==n&&(this.loadOptions={}),this.resourceManager=new class{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}}findIOHandler(){let e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{let n=this.io.getLoadHandlers(e,this.loadOptions);if(0===n.length)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=this.handler.load();return w.isPromise(e)?e.then(n=>null==n.getWeightStream?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){let n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}loadStreaming(e){var n=this;return R(function*(){if(null==e.getWeightStream)throw new Error("Model artifacts missing streamWeights function");let t=yield k8(e.getWeightStream(),e.weightSpecs);return n.loadWithWeightMap(e,t)})()}loadWithWeightMap(e,n){this.artifacts=e;let t=this.artifacts.modelTopology,r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){let i=this.artifacts.userDefinedMetadata;null!=i.signature&&(r=i.signature),null!=i.structuredOutputKeys&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=r,this.version=`${t.versions.producer}.${t.versions.minConsumer}`,this.executor=new eq(j9.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){let i=j9.Instance.transformGraph(e.modelInitializer);this.initializer=new eq(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}save(e,n){var t=this;return R(function*(){if("string"==typeof e){let r=t.io.getSaveHandlers(e);if(0===r.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(t.artifacts)})()}addStructuredOutputNames(e){if(this.structuredOutputKeys){let t={};return(e instanceof gt?[e]:e).forEach((r,i)=>t[this.structuredOutputKeys[i]]=r),t}return e}predict(e,n){let t=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(t)}predictAsync(e,n){var t=this;return R(function*(){let r=yield t.executeAsync(e,t.outputNodes);return t.addStructuredOutputNames(r)})()}normalizeInputs(e){var n;if(!(e instanceof gt||Array.isArray(e))){let i=null===(n=this.signature)||void 0===n?void 0:n.inputs;if(null!=i)for(let a in i){let s=i[a];null!=s.resourceId&&(e[a]=this.resourceIdToCapturedInput[s.resourceId])}return e}e=Array.isArray(e)?e:[e];let t=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+t!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-t} non-resource placeholders, while there are ${e.length} input tensors provided.`);let r=0;return this.inputNodes.reduce((i,a)=>{var s,o,l;let c=null===(l=null===(o=null===(s=this.signature)||void 0===s?void 0:s.inputs)||void 0===o?void 0:o[a])||void 0===l?void 0:l.resourceId;return i[a]=null!=c?this.resourceIdToCapturedInput[c]:e[r++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return null==this.initializer?[]:this.initializer.execute({},null==this.initializerSignature?[]:Object.keys(this.initializerSignature.outputs))}executeInitializerGraphAsync(){var e=this;return R(function*(){return null==e.initializer?[]:e.initializer.executeAsync({},null==e.initializerSignature?[]:Object.keys(e.initializerSignature.outputs))})()}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){let n=this.initializerSignature.outputs,t=Object.keys(n);for(let r=0;r<t.length;r++)this.resourceIdToCapturedInput[n[t[r]].resourceId]=e[r]}}execute(e,n){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);let t=this.executor.execute(e,n);return t.length>1?t:t[0]}executeAsync(e,n){var t=this;return R(function*(){null==t.resourceIdToCapturedInput&&t.setResourceIdToCapturedInput(yield t.executeInitializerGraphAsync()),e=t.normalizeInputs(e),n=t.normalizeOutputs(n);let r=yield t.executor.executeAsync(e,n);return r.length>1?r:r[0]})()}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,t)=>(n[t]=[e[t]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&at(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};function ROe(e){return gO.apply(this,arguments)}function gO(){return gO=R(function*(e,n={},t=ai){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==n&&(n={}),n.fromTFHub&&"string"==typeof e&&(e=function LOe(e){return e.endsWith("/")||(e+="/"),`${e}${FOe}${OOe}`}(e));let r=new mO(e,n,t);return yield r.load(),r}),gO.apply(this,arguments)}function POe(e){if(null==e)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let n;if(e instanceof Array){let[r,i]=e;if(!r)throw new Error("modelJSON must be the first element of the array");if(!(i&&i instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");let a=ai.getWeightSpecs(r.weightsManifest),s=ai.getModelArtifactsForJSONSync(r,a,i);n=ai.fromMemorySync(s)}else if("load"in e)n=e;else{if(!("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e))throw new Error("Unknown model format");n=ai.fromMemorySync(e)}let t=new mO(n);return t.load(),t}var $Oe="4.16.0",tq={};it(tq,{CSVDataset:()=>fq,Dataset:()=>ug,FileDataSource:()=>_q,TextLineDataset:()=>dq,URLDataSource:()=>vq,array:()=>oFe,csv:()=>vFe,func:()=>xFe,generator:()=>wFe,microphone:()=>kFe,version_data:()=>SFe,webcam:()=>CFe,zip:()=>lFe});var BOe=cc(iw()),VOe=cc(iw());function nC(e,n,t=new Map,r=new Set){if(null==e)return null;if("function"==typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(t.has(e))return t.get(e);let i=n(e);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(cg(e)){let a=Array.isArray(e)?[]:{};r.add(e);for(let s in e){let l=nC(e[s],n,t,r);a[s]=l}return r.delete(e),e.__proto__&&(a.__proto__=e.__proto__),a}throw new Error(`Can't recurse into non-iterable type: ${e}`)}return t.set(e,i.value),i.value}function UOe(e,n=rq){return nq(e,n)}function nq(e,n,t=new Set){let r=e[0];if(t.has(r))throw new Error("Circular references are not supported.");let i=n(e);if(i.recurse&&null!==i.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(i.recurse){if(cg(r)){let a=Array.isArray(r)?[]:{};t.add(r);for(let s in r){let l=nq(e.map(c=>c[s]),n,t);a[s]=l}return t.delete(r),a}throw new Error(`Can't recurse into non-iterable type: ${r}`)}return i.value}function rq(e){return null===e?null:cg(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function iq(e,n){return yO.apply(this,arguments)}function yO(){return yO=R(function*(e,n){let t=new Map;nC(e,n,t);for(let r of Array.from(t.keys())){let i=t.get(r);if(w.isPromise(i)){let a=yield i;t.set(r,a)}}return nC(e,n,t)}),yO.apply(this,arguments)}function cg(e){let n=!1;if(Q().get("IS_BROWSER"))n=e instanceof TextDecoder;else{let{StringDecoder:t}=BW();n=e instanceof t}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof gt)&&!(e instanceof Promise)&&!n)}function jOe(e){return function zOe(e,n){return nC(e,n)}(e,GOe)}function GOe(e){return e instanceof gt?{value:e.clone(),recurse:!1}:cg(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var aq=class{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,n){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=n}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(let n of e)this.push(n)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);let e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let n=this.wrap(this.begin+e),t=this.get(n);return this.set(n,this.pop()),t}},sq=class Cie extends aq{constructor(){super(Cie.INITIAL_CAPACITY)}isFull(){return!1}push(n){super.isFull()&&this.expand(),super.push(n)}unshift(n){super.isFull()&&this.expand(),super.unshift(n)}expand(){let n=2*this.capacity,t=new Array(n),r=this.length();for(let i=0;i<r;i++)t[i]=this.get(this.wrap(this.begin+i));this.data=t,this.capacity=n,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=r}};function oq(e){return new XOe(e)}function bO(e){return new YOe(e)}sq.INITIAL_CAPACITY=32;var $c,Xr=class{toArray(){var e=this;return R(function*(){let n=[],t=yield e.next();for(;!t.done;)n.push(t.value),t=yield e.next();return n})()}toArrayForTest(){var e=this;return R(function*(){let n=e.prefetch(100),t=[],r=yield n.next();for(;!r.done;)t.push(r.value),r=yield n.next();return t})()}resolveFully(){var e=this;return R(function*(){let n=yield e.next();for(;!n.done;)n=yield e.next()})()}resolveWhile(e){var n=this;return R(function*(){let t=yield n.next(),r=e(t.value);for(;!t.done&&r;)t=yield n.next(),r=e(t.value)})()}handleErrors(e){return new rFe(this,e)}filter(e){return new tFe(this,e)}map(e){return new nFe(this,e)}mapAsync(e){return new lq(this,e)}serialMapAsync(e){return new lq(this,e).serial()}flatmap(e){return new iFe(this,e)}forEachAsync(e){var n=this;return R(function*(){return n.map(e).resolveFully()})()}serialForEach(e){var n=this;return R(function*(){return n.serialMapAsync(e).resolveWhile(t=>!0===t)})()}rowMajorBatch(e,n=!0){return new eFe(this,e,n)}columnMajorBatch(e,n=!0,t=rq){return this.rowMajorBatch(e,n).map(r=>UOe(r,t))}concatenate(e,n){return new cq(oq([this,e]),n)}take(e){return e<0||null==e?this:new JOe(this,e)}skip(e){return e<0||null==e?this:new QOe(this,e)}prefetch(e){return new uq(this,e)}shuffle(e,n){return new sFe(this,e,n)}serial(){return new ZOe(this)}},XOe=class extends Xr{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}next(){var e=this;return R(function*(){if(e.trav>=e.items.length)return{value:null,done:!0};let n=e.items[e.trav];return e.trav++,{value:jOe(n),done:!1}})()}},YOe=class extends Xr{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}next(){var e=this;return R(function*(){try{return e.nextFn()}catch(n){throw n.message=`Error thrown while iterating through a dataset: ${n.message}`,n}})()}},ZOe=class extends Xr{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}next(){var e=this;return R(function*(){return e.lastRead=e.lastRead.then(()=>e.serialNext()),e.lastRead})()}serialNext(){var e=this;return R(function*(){return e.upstream.next()})()}},QOe=class extends Xr{constructor(e,n){super(),this.upstream=e,this.maxCount=n,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}next(){var e=this;return R(function*(){return e.lastRead=e.lastRead.then(()=>e.serialNext()),e.lastRead})()}serialNext(){var e=this;return R(function*(){for(;e.count++<e.maxCount;){let n=yield e.upstream.next();if(n.done)return n;at(n.value)}return e.upstream.next()})()}},JOe=class extends Xr{constructor(e,n){super(),this.upstream=e,this.maxCount=n,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}next(){var e=this;return R(function*(){return e.count++>=e.maxCount?{value:null,done:!0}:e.upstream.next()})()}},eFe=class extends Xr{constructor(e,n,t=!0){super(),this.upstream=e,this.batchSize=n,this.enableSmallLastBatch=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}next(){var e=this;return R(function*(){return e.lastRead=e.lastRead.then(()=>e.serialNext()),e.lastRead})()}serialNext(){var e=this;return R(function*(){let n=[];for(;n.length<e.batchSize;){let t=yield e.upstream.next();if(t.done)return e.enableSmallLastBatch&&n.length>0?{value:n,done:!1}:{value:null,done:!0};n.push(t.value)}return{value:n,done:!1}})()}},tFe=class extends Xr{constructor(e,n){super(),this.upstream=e,this.predicate=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}next(){var e=this;return R(function*(){return e.lastRead=e.lastRead.then(()=>e.serialNext()),e.lastRead})()}serialNext(){var e=this;return R(function*(){for(;;){let n=yield e.upstream.next();if(n.done||e.predicate(n.value))return n;at(n.value)}})()}},nFe=class extends Xr{constructor(e,n){super(),this.upstream=e,this.transform=n}summary(){return`${this.upstream.summary()} -> Map`}next(){var e=this;return R(function*(){let n=yield e.upstream.next();if(n.done)return{value:null,done:!0};let t=Ws.getTensorsInContainer(n.value),r=e.transform(n.value),i=Ws.getTensorsInContainer(r);for(let a of t)Ws.isTensorInList(a,i)||a.dispose();return{value:r,done:!1}})()}},rFe=class extends Xr{constructor(e,n){super(),this.upstream=e,this.handler=n,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}next(){var e=this;return R(function*(){return e.lastRead=e.lastRead.then(()=>e.serialNext()),e.lastRead})()}serialNext(){var e=this;return R(function*(){for(;;)try{return yield e.upstream.next()}catch(n){if(!e.handler(n))return{value:null,done:!0}}})()}},lq=class extends Xr{constructor(e,n){super(),this.upstream=e,this.transform=n}summary(){return`${this.upstream.summary()} -> AsyncMap`}next(){var e=this;return R(function*(){let n=yield e.upstream.next();if(n.done)return{value:null,done:!0};let t=Ws.getTensorsInContainer(n.value),r=yield e.transform(n.value),i=Ws.getTensorsInContainer(r);for(let a of t)Ws.isTensorInList(a,i)||a.dispose();return{value:r,done:!1}})()}},_O=class extends Xr{constructor(){super(),this.outputQueue=new sq,this.lastRead=Promise.resolve({value:null,done:!1})}next(){var e=this;return R(function*(){return e.lastRead=e.lastRead.then(()=>e.serialNext()),e.lastRead})()}serialNext(){var e=this;return R(function*(){for(;0===e.outputQueue.length();)if(!(yield e.pump()))return{value:null,done:!0};return{value:e.outputQueue.shift(),done:!1}})()}},iFe=class extends _O{constructor(e,n){super(),this.upstream=e,this.transform=n}summary(){return`${this.upstream.summary()} -> Flatmap`}pump(){var e=this;return R(function*(){let n=yield e.upstream.next();if(n.done)return!1;let t=Ws.getTensorsInContainer(n.value),r=e.transform(n.value),i=Ws.getTensorsInContainer(r);e.outputQueue.pushAll(r);for(let a of t)Ws.isTensorInList(a,i)||a.dispose();return!0})()}},cq=class extends Xr{constructor(e,n){super(),this.baseErrorHandler=n,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}next(){var e=this;return R(function*(){return e.lastRead=e.readFromChain(e.lastRead),e.lastRead})()}readFromChain(e){var n=this;return R(function*(){if(yield e,null==n.iterator){let r=yield n.moreIterators.next();if(r.done)return{value:null,done:!0};n.iterator=r.value,null!=n.baseErrorHandler&&(n.iterator=n.iterator.handleErrors(n.baseErrorHandler))}let t=yield n.iterator.next();return t.done?(n.iterator=null,n.readFromChain(e)):t})()}};!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}($c||($c={}));var aFe=class extends Xr{constructor(e,n=$c.FAIL){super(),this.iterators=e,this.mismatchMode=n,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}nextState(e){var n=this;return R(function*(){yield e;let t=0,r=0,a=yield iq(n.iterators,function i(s){return s instanceof Xr?{value:s.next().then(o=>(t++,o.done&&r++,o.value)),recurse:!1}:{value:null,recurse:!0}});if(t===r)return{value:null,done:!0};if(r>0)switch(n.mismatchMode){case $c.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${n.count}.`);case $c.SHORTEST:return{value:null,done:!0}}return n.count++,{value:a,done:!1}})()}next(){var e=this;return R(function*(){return e.currentPromise=e.nextState(e.currentPromise),e.currentPromise})()}},uq=class extends Xr{constructor(e,n){super(),this.upstream=e,this.bufferSize=n,this.buffer=new aq(n)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){let e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}},sFe=class extends uq{constructor(e,n,t){super(e,n),this.upstream=e,this.windowSize=n,this.upstreamExhausted=!1,this.random=VOe.alea(t||w.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}next(){var e=this;return R(function*(){return e.lastRead=e.lastRead.then(()=>e.serialNext()),e.lastRead})()}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}serialNext(){var e=this;return R(function*(){for(e.upstreamExhausted||e.refill();!e.buffer.isEmpty();){let n=e.chooseIndex(),t=yield e.buffer.shuffleExcise(n);if(!t.done)return e.refill(),t;e.upstreamExhausted=!0}return{value:null,done:!0}})()}},ug=class{constructor(){this.size=null}batch(e,n=!0){let r,t=this;return w.assert(e>0,()=>`batchSize needs to be positive, but it is\n      ${e}`),r=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),Sa(R(function*(){return(yield t.iterator()).columnMajorBatch(e,n,cFe)}),r)}concatenate(e){let t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,Sa(R(function*(){return(yield n.iterator()).concatenate(yield e.iterator())}),t)}filter(e){let t,n=this;return t=this.size===1/0?1/0:null,Sa(R(function*(){return(yield n.iterator()).filter(r=>G(()=>e(r)))}),t)}forEachAsync(e){var n=this;return R(function*(){return(yield n.iterator()).forEachAsync(e)})()}map(e){let n=this;return Sa(R(function*(){return(yield n.iterator()).map(t=>G(()=>e(t)))}),this.size)}mapAsync(e){let n=this;return Sa(R(function*(){return(yield n.iterator()).mapAsync(e)}),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");let n=this;return Sa(R(function*(){return(yield n.iterator()).prefetch(e)}),this.size)}repeat(e){let t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,Sa(R(function*(){return function qOe(e,n){return new cq(e,n)}(bO(R(function*(){return{value:yield n.iterator(),done:!1}})).take(e))}),t)}skip(e){let t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,Sa(R(function*(){return(yield n.iterator()).skip(e)}),t)}shuffle(e,n,t=!0){if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);let r=this,i=BOe.alea(n||w.now().toString());return Sa(R(function*(){let a=i.int32();return t&&(a+=i.int32()),(yield r.iterator()).shuffle(e,a.toString())}),this.size)}take(e){let t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,Sa(R(function*(){return(yield n.iterator()).take(e)}),t)}toArray(){var e=this;return R(function*(){if(e.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(yield e.iterator()).toArray()})()}toArrayForTest(){var e=this;return R(function*(){if(e.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(yield e.iterator()).toArrayForTest()})()}};function Sa(e,n=null){return new class extends ug{constructor(){super(...arguments),this.size=n}iterator(){return R(function*(){return e()})()}}}function oFe(e){return Sa(R(function*(){return oq(e)}),e.length)}function lFe(e){if(!cg(e))throw new Error("The argument to zip() must be an object or array.");let n;if(Array.isArray(e))for(let t=0;t<e.length;t++)n=null==n?e[t].size:Math.min(n,e[t].size);else if(e instanceof Object)for(let t in e)n=null==n?e[t].size:Math.min(n,e[t].size);return Sa(R(function*(){return function KOe(e,n=$c.FAIL){return new aFe(e,n)}(yield iq(e,r=>{if(r instanceof ug)return{value:r.iterator(),recurse:!1};if(cg(r))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}),$c.SHORTEST)}),n)}function cFe(e){return null===e?null:function HOe(e){return null==e||function WOe(e){return null===e||"object"!=typeof e&&"function"!=typeof e}(e)||Array.isArray(e)||"object"==typeof e&&e instanceof gt||w.isTypedArray(e)}(e[0])?{value:uFe(e),recurse:!1}:{value:null,recurse:!0}}function uFe(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof gt?vr(e):Ti(e)}ug.MAX_BUFFER_SIZE=1e4;var dq=class extends ug{constructor(e){super(),this.input=e}iterator(){var e=this;return R(function*(){return(yield e.input.iterator()).decodeUTF8().split("\n").map(n=>(n.endsWith("\r")&&(n=n.slice(0,-1)),n))})()}},F_=Symbol("out"),hq=Symbol("field"),iC=Symbol("quote"),vO=Symbol("quoteafterquote"),pq=Symbol("quoteinquote"),fq=class extends ug{columnNames(){var e=this;return R(function*(){return e.columnNamesValidated||(yield e.setColumnNames()),e.configuredColumnsOnly?Object.keys(e.columnConfigs):e.fullColumnNames})()}setColumnNames(){var e=this;return R(function*(){let n=yield e.maybeReadHeaderLine();if(!e.fullColumnNames&&!n)throw new Error("Column names must be provided if there is no header line.");e.fullColumnNames&&n&&w.assert(n.length===e.fullColumnNames.length,()=>"The length of provided columnNames ("+e.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+n.length.toString()+")."),e.fullColumnNames||(e.fullColumnNames=n);let t=e.fullColumnNames.reduce((i,a)=>(i[a]=i[a]+1||1,i),{}),r=Object.keys(t).filter(i=>t[i]>1);if(w.assert(0===r.length,()=>"Duplicate column names found: "+r.toString()),e.columnConfigs)for(let i of Object.keys(e.columnConfigs))if(-1===e.fullColumnNames.indexOf(i))throw new Error('The key "'+i+'" provided in columnConfigs does not match any of the column names ('+e.fullColumnNames.toString()+").");e.columnNamesValidated=!0})()}maybeReadHeaderLine(){var e=this;return R(function*(){if(e.hasHeader){let n=yield(yield e.base.iterator()).next();if(n.done)throw new Error("No data was found for CSV parsing.");return e.parseRow(n.value,!1)}return null})()}constructor(e,n){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new dq(e),n||(n={}),this.hasHeader=!1!==n.hasHeader,this.fullColumnNames=n.columnNames,this.columnConfigs=n.columnConfigs,this.configuredColumnsOnly=n.configuredColumnsOnly,n.delimWhitespace?(w.assert(null==n.delimiter,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=n.delimiter?n.delimiter:","}iterator(){var e=this;return R(function*(){e.columnNamesValidated||(yield e.setColumnNames());let n=yield e.base.iterator();return e.hasHeader&&(n=n.skip(1)),n.map(t=>e.makeDataElement(t))})()}makeDataElement(e){let n=this.parseRow(e),t={},r={};for(let i=0;i<this.fullColumnNames.length;i++){let a=this.fullColumnNames[i],s=this.columnConfigs?this.columnConfigs[a]:null;if(!this.configuredColumnsOnly||s){let o=n[i],l=null;if(""===o)if(s&&void 0!==s.default)l=s.default;else{if(s&&(s.required||s.isLabel))throw new Error(`Required column ${a} is empty in this line: ${e}`);l=void 0}else{let c=Number(o);if(isNaN(c))l=s&&"bool"===s.dtype?this.getBoolean(o):o;else if(s&&s.dtype)switch(s.dtype){case"float32":default:l=c;break;case"int32":l=Math.floor(c);break;case"bool":l=this.getBoolean(o)}else l=c}s&&s.isLabel?r[a]=l:t[a]=l}}return 0===Object.keys(r).length?t:{xs:t,ys:r}}getBoolean(e){return"1"===e||"true"===e.toLowerCase()?1:0}parseRow(e,n=!0){let t=[],r=0,i=e.length,a=F_;for(let s=0;s<i;s++)switch(a){case F_:switch(e.charAt(s)){case'"':r=s+1,a=iC;break;case this.delimiter:if(r=s+1," "===this.delimiter&&this.delimWhitespace)break;t.push(""),a=F_;break;default:a=hq,r=s}break;case hq:e.charAt(s)===this.delimiter&&(t.push(e.substring(r,s)),a=F_,r=s+1);break;case iC:'"'===e.charAt(s)&&(a=vO);break;case vO:switch(e.charAt(s)){case this.delimiter:t.push(e.substring(r,s-1)),a=F_,r=s+1;break;case'"':a=iC;break;default:a=pq}break;case pq:'"'===e.charAt(s)&&(a=iC)}if(t.push(a===vO?e.substring(r,i-1):e.substring(r)),n&&t.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${t}`);return t}},dFe=class kie extends Xr{constructor(n){super(),this.microphoneConfig=n,this.isClosed=!1,this.fftSize=n.fftSize||1024;let t=Math.log2(this.fftSize);if(this.fftSize<0||t<4||t>14||!Number.isInteger(t))throw new Error(`Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=n.numFramesPerSpectrogram||43,this.sampleRateHz=n.sampleRateHz,this.columnTruncateLength=n.columnTruncateLength||this.fftSize,this.audioTrackConstraints=n.audioTrackConstraints,this.smoothingTimeConstant=n.smoothingTimeConstant||0,this.includeSpectrogram=!1!==n.includeSpectrogram,this.includeWaveform=!0===n.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static create(n={}){return R(function*(){if(!Q().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");let t=new kie(n);return yield t.start(),t})()}start(){var n=this;return R(function*(){try{n.stream=yield navigator.mediaDevices.getUserMedia({audio:null==n.audioTrackConstraints||n.audioTrackConstraints,video:!1})}catch(i){throw new Error(`Error thrown while initializing video stream: ${i.message}`)}if(!n.stream)throw new Error("Could not obtain audio from microphone.");let t=window.AudioContext||window.webkitAudioContext;if(n.audioContext=new t,n.sampleRateHz){if(n.audioContext.sampleRate!==n.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${n.sampleRateHz}; Actual: ${n.audioContext.sampleRate}`)}else n.sampleRateHz=n.audioContext.sampleRate;let r=n.audioContext.createMediaStreamSource(n.stream);n.analyser=n.audioContext.createAnalyser(),n.analyser.fftSize=2*n.fftSize,n.analyser.smoothingTimeConstant=n.smoothingTimeConstant,r.connect(n.analyser),n.freqData=new Float32Array(n.fftSize),n.timeData=new Float32Array(n.fftSize)})()}next(){var n=this;return R(function*(){if(n.isClosed)return{value:null,done:!0};let t,r,i=yield n.getAudioData();if(n.includeSpectrogram){let a=n.flattenQueue(i.freqDataQueue);t=n.getTensorFromAudioDataArray(a,[n.numFrames,n.columnTruncateLength,1])}if(n.includeWaveform){let a=n.flattenQueue(i.timeDataQueue);r=n.getTensorFromAudioDataArray(a,[n.numFrames*n.fftSize,1])}return{value:{spectrogram:t,waveform:r},done:!1}})()}capture(){var n=this;return R(function*(){return(yield n.next()).value})()}getAudioData(){var n=this;return R(function*(){let t=[],r=[],i=0;return new Promise(a=>{let s=setInterval(()=>{n.includeSpectrogram&&(n.analyser.getFloatFrequencyData(n.freqData),n.freqData[0]===-1/0&&a({freqDataQueue:t,timeDataQueue:r}),t.push(n.freqData.slice(0,n.columnTruncateLength))),n.includeWaveform&&(n.analyser.getFloatTimeDomainData(n.timeData),r.push(n.timeData.slice())),++i===n.numFrames&&(clearInterval(s),a({freqDataQueue:t,timeDataQueue:r}))},n.fftSize/n.sampleRateHz*1e3)})})()}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(n){let t=n[0].length,r=new Float32Array(n.length*t);return n.forEach((i,a)=>r.set(i,a*t)),r}getTensorFromAudioDataArray(n,t){let r=new Float32Array(w.sizeFromShape(t));return r.set(n,r.length-n.length),Ti(r,t)}},hFe=class Sie extends Xr{constructor(n,t){if(super(),this.webcamVideoElement=n,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=Qt([0],"int32"),this.webcamConfig.centerCrop){let r=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,i=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,a=(1-r)/2,s=(1-i)/2;this.cropBox=So([s,a,i+s,a+r],[1,4])}else this.cropBox=So([0,0,1,1],[1,4])}summary(){return"webcam"}static create(n,t={}){return R(function*(){if(!Q().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!n){if(n=document.createElement("video"),!t.resizeWidth||!t.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");n.width=t.resizeWidth,n.height=t.resizeHeight}let r=new Sie(n,t);return yield r.start(),r})()}start(){var n=this;return R(function*(){n.webcamConfig.facingMode&&w.assert("user"===n.webcamConfig.facingMode||"environment"===n.webcamConfig.facingMode,()=>`Invalid webcam facing mode: ${n.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{n.stream=yield navigator.mediaDevices.getUserMedia({video:{deviceId:n.webcamConfig.deviceId,facingMode:n.webcamConfig.facingMode?n.webcamConfig.facingMode:"user",width:n.webcamVideoElement.width,height:n.webcamVideoElement.height}})}catch(t){throw t.message=`Error thrown while initializing video stream: ${t.message}`,t}if(!n.stream)throw new Error("Could not obtain video from webcam.");try{n.webcamVideoElement.srcObject=n.stream}catch(t){console.log(t),n.webcamVideoElement.src=window.URL.createObjectURL(n.stream)}return n.webcamVideoElement.play(),n.isClosed=!1,new Promise(t=>{n.webcamVideoElement.onloadedmetadata=()=>{t()}})})()}next(){var n=this;return R(function*(){if(n.isClosed)return{value:null,done:!0};let t;try{t=y_.fromPixels(n.webcamVideoElement)}catch(r){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(r)}`)}if(!n.resize)return{value:t,done:!1};try{return{value:n.cropAndResizeFrame(t),done:!1}}catch(r){throw new Error(`Error thrown cropping the video: ${r.message}`)}finally{t.dispose()}})()}needToResize(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}cropAndResizeFrame(n){return G(()=>{let r,t=jr(xe(n,"float32"),0);return r=ja.cropAndResize(t,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear"),H(r,r.shape.slice(1))})}capture(){var n=this;return R(function*(){return(yield n.next()).value})()}stop(){this.stream.getTracks().forEach(n=>n.stop());try{this.webcamVideoElement.srcObject=null}catch(n){console.log(n),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}},mq=class{},gq=class extends Xr{split(e){return new pFe(this,e)}},pFe=class extends gq{constructor(e,n){super(),this.upstream=e,this.impl=new fFe(e,n)}summary(){return this.impl.summary()}next(){var e=this;return R(function*(){return e.impl.next()})()}},fFe=class extends _O{constructor(e,n){super(),this.upstream=e,this.separator=n,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}pump(){var e=this;return R(function*(){let n=yield e.upstream.next();if(n.done)return""!==e.carryover&&(e.outputQueue.push(e.carryover),e.carryover="",!0);let t=n.value.split(e.separator);t[0]=e.carryover+t[0];for(let r of t.slice(0,-1))e.outputQueue.push(r);return e.carryover=t[t.length-1],!0})()}},mFe=class extends Xr{decodeUTF8(){return new gFe(this)}},gFe=class extends gq{constructor(e){super(),this.upstream=e,this.impl=new yFe(e)}summary(){return this.impl.summary()}next(){var e=this;return R(function*(){return e.impl.next()})()}},yFe=class extends _O{constructor(e){if(super(),this.upstream=e,Q().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{let{StringDecoder:n}=BW();this.decoder=new n("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}pump(){var e=this;return R(function*(){let t,r,n=yield e.upstream.next();return!n.done&&(t=n.value,r=Q().get("IS_BROWSER")?e.decoder.decode(t,{stream:!0}):e.decoder.write(Buffer.from(t.buffer)),e.outputQueue.push(r),!0)})()}},yq=class extends mFe{constructor(e,n={}){super(),this.file=e,this.options=n,w.assert(e instanceof Uint8Array||!!Q().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=n.offset||0,this.chunkSize=n.chunkSize||1048576}summary(){return`FileChunks ${this.file}`}next(){var e=this;return R(function*(){return e.offset>=(e.file instanceof Uint8Array?e.file.byteLength:e.file.size)?{value:null,done:!0}:{value:yield new Promise((n,t)=>{let r=e.offset+e.chunkSize;if(e.file instanceof Uint8Array)n(new Uint8Array(e.file.slice(e.offset,r)));else{let i=new FileReader;i.onload=s=>{let o=i.result;if(o instanceof ArrayBuffer&&(o=new Uint8Array(o)),!(o instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));n(o)},i.onabort=s=>t(new Error("Aborted")),i.onerror=s=>t(new Error(s.type));let a=e.file.slice(e.offset,r);i.readAsArrayBuffer(a)}e.offset=r}),done:!1}})()}};function xO(){return xO=R(function*(e,n={},t){let r,i;"string"==typeof e?r=e:(r=e.url,i=_Fe(e));let a=yield(t||w.fetch)(r,i);if(a.ok){let s=new Uint8Array(yield a.arrayBuffer());return new yq(s,n)}throw new Error(a.statusText)}),xO.apply(this,arguments)}var _Fe=e=>({method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity});function bq(e){return"string"==typeof e&&"file://"===e.slice(0,7)}var _q=class extends mq{constructor(e,n={}){super(),this.input=e,this.options=n}iterator(){var e=this;return R(function*(){if(bq(e.input)&&Q().get("IS_NODE")){let n=R2();e.input=n.readFileSync(e.input.slice(7))}return new yq(e.input,e.options)})()}},vq=class extends mq{constructor(e,n={}){super(),this.url=e,this.fileOptions=n}iterator(){var e=this;return R(function*(){return bq(e.url)?new _q(e.url,e.fileOptions).iterator():function bFe(e){return xO.apply(this,arguments)}(e.url,e.fileOptions)})()}};function vFe(e,n={}){return new fq(new vq(e),n)}function xFe(e){let n=bO(e);return Sa(R(function*(){return n}))}function wFe(e){return Sa(R(function*(){let n=yield e();return bO(()=>n.next())}))}function CFe(e,n){return wO.apply(this,arguments)}function wO(){return wO=R(function*(e,n){return hFe.create(e,n)}),wO.apply(this,arguments)}function kFe(e){return CO.apply(this,arguments)}function CO(){return CO=R(function*(e){return dFe.create(e)}),CO.apply(this,arguments)}var SFe="4.16.0";function Pe(e,n){Array.isArray(e)||(e=[e]),e.forEach(t=>{null!=t&&w.assert("complex64"!==t.dtype,()=>`${n} does not support complex64 tensors in the CPU backend.`)})}var IFe=Mo.whereImpl,kO=class Iie extends gb{nextDataId(){return Iie.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new aw(this,ys())}write(n,t,r){this.firstUse&&(this.firstUse=!1,Q().get("IS_NODE")&&I.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));let i={id:this.nextDataId()};return this.data.set(i,{values:n,dtype:r,refCount:1}),i}makeTensorInfo(n,t,r){let i;if("string"===t&&null!=r&&r.length>0&&w.isString(r[0])){let a=r.map(s=>w.encodeString(s));i=this.write(a,n,t)}else i=this.write(r,n,t);return{dataId:i,shape:n,dtype:t}}refCount(n){return this.data.has(n)?this.data.get(n).refCount:0}incRef(n){this.data.get(n).refCount++}decRef(n){this.data.has(n)&&this.data.get(n).refCount--}move(n,t,r,i,a){this.data.set(n,{values:t,dtype:i,refCount:a})}numDataIds(){return this.data.numDataIds()}read(n){var t=this;return R(function*(){return t.readSync(n)})()}readSync(n){let{dtype:t,complexTensorInfos:r}=this.data.get(n);if("complex64"===t){let i=this.readSync(r.real.dataId),a=this.readSync(r.imag.dataId);return I.mergeRealAndImagArrays(i,a)}return w.convertBackendValuesAndArrayBuffer(this.data.get(n).values,t)}bufferSync(n){let t=this.readSync(n.dataId);if("string"===n.dtype)try{let r=t.map(i=>w.decodeString(i));return wt(n.shape,n.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return wt(n.shape,n.dtype,t)}makeOutput(n,t,r){return ys().makeTensorFromTensorInfo(this.makeTensorInfo(t,r,n),this)}disposeData(n,t=!1){if(this.data.has(n)){if(this.data.get(n).refCount--,!t&&this.data.get(n).refCount>0)return!1;let{complexTensorInfos:r}=this.data.get(n);null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(n)}return!0}disposeIntermediateTensorInfo(n){this.disposeData(n.dataId)}time(n){return R(function*(){let t=w.now();return n(),{kernelMs:w.now()-t}})()}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(n){Pe([n],"where");let t=this.readSync(n.dataId);return IFe(n.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}};kO.nextDataId=0;var SO={};function xq(e){let n=new Float32Array(e.length);for(let t=0;t<e.length;++t)n[t]=Math.abs(e[t]);return n}it(SO,{addImpl:()=>Cq,bincountImpl:()=>MO,bincountReduceImpl:()=>kq,bitwiseAndImpl:()=>Sq,castImpl:()=>wq,ceilImpl:()=>Iq,concatImpl:()=>EO,equalImpl:()=>Mq,expImpl:()=>Dq,expm1Impl:()=>Tq,floorDivImpl:()=>Oq,floorImpl:()=>Nq,gatherNdImpl:()=>Fq,gatherV2Impl:()=>Rq,greaterEqualImpl:()=>Lq,greaterImpl:()=>Pq,lessEqualImpl:()=>Bq,lessImpl:()=>$q,linSpaceImpl:()=>Vq,logImpl:()=>zq,maxImpl:()=>Uq,maximumImpl:()=>Hq,minimumImpl:()=>Wq,multiplyImpl:()=>DO,negImpl:()=>jq,notEqualImpl:()=>Gq,prodImpl:()=>qq,raggedGatherImpl:()=>Xq,raggedRangeImpl:()=>Zq,raggedTensorToTensorImpl:()=>eK,rangeImpl:()=>TO,rsqrtImpl:()=>tK,scatterImpl:()=>zh,sigmoidImpl:()=>SRe,simpleAbsImpl:()=>xq,sliceImpl:()=>oC,sparseFillEmptyRowsImpl:()=>rK,sparseReshapeImpl:()=>iK,sparseSegmentReductionImpl:()=>NO,sqrtImpl:()=>ERe,squaredDifferenceImpl:()=>aK,staticRegexReplaceImpl:()=>sK,stridedSliceImpl:()=>oK,stringNGramsImpl:()=>OO,stringSplitImpl:()=>FO,stringToHashBucketFastImpl:()=>RO,subImpl:()=>lK,tileImpl:()=>cK,topKImpl:()=>dK,transposeImpl:()=>AO,uniqueImpl:()=>LO});var EFe={kernelName:Nf,backendName:"cpu",kernelFunc:e=>{let{x:n}=e.inputs,t=e.backend;Pe(n,"abs");let r=new Float32Array(w.sizeFromShape(n.shape));return r=xq(t.data.get(n.dataId).values),t.makeOutput(r,n.shape,n.dtype)}};function or(e){return(n,t,r,i,a)=>{let s=I.assertAndGetBroadcastShape(n,t),o=s.length,l=w.computeStrides(s),c=w.sizeFromShape(s),u=w.getTypedArrayFromDType(a,c),h=n.length,d=t.length,p=w.computeStrides(n),f=w.computeStrides(t),m=I.getBroadcastDims(n,s),g=I.getBroadcastDims(t,s);if(m.length+g.length===0)for(let y=0;y<u.length;++y)u[y]=e(r[y%r.length],i[y%i.length]);else for(let y=0;y<u.length;++y){let b=w.indexToLoc(y,o,l),_=b.slice(-h);m.forEach(M=>_[M]=0);let v=w.locToIndex(_,h,p),x=b.slice(-d);g.forEach(M=>x[M]=0);let S=w.locToIndex(x,d,f);u[y]=e(r[v],i[S])}return[u,s]}}function Ia(e){let{inputs:n,backend:t}=e,{real:r,imag:i}=n,a=t.data.get(r.dataId).values,s=t.data.get(i.dataId).values,o=t.makeTensorInfo(r.shape,"complex64");return t.data.get(o.dataId).complexTensorInfos={real:t.makeTensorInfo(r.shape,"float32",a),imag:t.makeTensorInfo(i.shape,"float32",s)},o}var DFe={kernelName:dw,backendName:"cpu",kernelFunc:Ia};function aC(e,n,t="float32"){if("complex64"===t)return Ia({inputs:{real:aC(e,n,"float32"),imag:aC(e,n,"float32")},backend:e});let r=w.makeZerosTypedArray(w.sizeFromShape(n),t);return e.makeTensorInfo(n,t,r)}function No(e){let{inputs:n,backend:t}=e,{x:r}=n;return t.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var AFe={kernelName:_d,backendName:"cpu",kernelFunc:No};function Vh(e){let{inputs:n,backend:t}=e,{input:r}=n,i=t.data.get(r.dataId).complexTensorInfos.real,a=t.data.get(i.dataId).values;return t.makeTensorInfo(i.shape,i.dtype,a)}var TFe={kernelName:Cw,backendName:"cpu",kernelFunc:Vh};function wq(e,n,t,r){if("int32"===r)return[n,"int32",Int32Array.from(e)];if("bool"===r){let i=w.toTypedArray([0],t),[a,s]=or((o,l)=>o!==l?1:0)(n,[],e,i,"bool");return[s,"bool",a]}throw new Error(`Error in Cast: failed to cast ${t} to ${r}`)}function Bc(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{dtype:a}=r;if("complex64"===a){if("complex64"===i.dtype)return No({inputs:{x:i},backend:t});let u=aC(t,i.shape,i.dtype),h=Bc({inputs:{x:i},backend:t,attrs:{dtype:"float32"}}),d=Ia({inputs:{real:h,imag:u},backend:t});return t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(h),d}if("complex64"===i.dtype){let u=Vh({inputs:{input:i},backend:t}),h=Bc({inputs:{x:u},backend:t,attrs:{dtype:a}});return t.disposeIntermediateTensorInfo(u),h}if(!w.hasEncodingLoss(i.dtype,a)){let u=No({inputs:{x:i},backend:t});return{dataId:u.dataId,shape:u.shape,dtype:a}}let s=t.data.get(i.dataId).values,[o,l,c]=wq(s,i.shape,i.dtype,a);return t.makeTensorInfo(o,l,c)}var NFe={kernelName:ed,backendName:"cpu",kernelFunc:Bc};function Rr(e,n,t,r){return null==t?({inputs:i,backend:a})=>{let{a:s,b:o}=i,l=a;Pe([s,o],e);let c=l.data.get(s.dataId).values,u=l.data.get(o.dataId).values,h="string"===s.dtype?I.fromUint8ToStringArray(c):c,d="string"===s.dtype?I.fromUint8ToStringArray(u):u,p=r||s.dtype,[f,m]=n(s.shape,o.shape,h,d,p);return l.makeTensorInfo(m,p,f)}:({inputs:i,backend:a})=>{let{a:s,b:o}=i,l=a;if("complex64"===s.dtype||"complex64"===o.dtype){let c=Bc({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.imag,p=l.data.get(u.complexTensorInfos.real.dataId).values,f=l.data.get(d.dataId).values,m=Bc({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),b=g.complexTensorInfos.imag,_=l.data.get(g.complexTensorInfos.real.dataId).values,v=l.data.get(b.dataId).values,[x,S,M]=t(s.shape,o.shape,p,f,_,v),D=l.makeTensorInfo(M,"float32",x),N=l.makeTensorInfo(M,"float32",S),F=Ia({inputs:{real:D,imag:N},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(D),l.disposeIntermediateTensorInfo(N),F}{let c=l.data.get(s.dataId).values,u=l.data.get(o.dataId).values,h=r||s.dtype,[d,p]=n(s.shape,o.shape,c,u,h);return l.makeTensorInfo(p,h,d)}}}function IO(e){return(n,t,r,i,a,s)=>{let o=I.assertAndGetBroadcastShape(n,t),l=w.sizeFromShape(o),c=o.length,u=w.computeStrides(o),h=w.getTypedArrayFromDType("float32",l),d=w.getTypedArrayFromDType("float32",l),p=I.getBroadcastDims(n,o),f=I.getBroadcastDims(t,o),m=I.mergeRealAndImagArrays(r,i),g=I.mergeRealAndImagArrays(a,s),y=n.length,b=w.computeStrides(n),_=t.length,v=w.computeStrides(t);if(p.length+f.length===0)for(let x=0;x<h.length;x++){let S=x%m.length,M=x%g.length,D=e(m[2*S],m[2*S+1],g[2*M],g[2*M+1]);h[x]=D.real,d[x]=D.imag}else for(let x=0;x<h.length;x++){let S=w.indexToLoc(x,c,u),M=S.slice(-y);p.forEach(k=>M[k]=0);let D=w.locToIndex(M,y,b),N=S.slice(-_);f.forEach(k=>N[k]=0);let F=w.locToIndex(N,_,v),O=e(m[2*D],m[2*D+1],g[2*F],g[2*F+1]);h[x]=O.real,d[x]=O.imag}return[h,d,o]}}var Cq=or((e,n)=>e+n),OFe=IO((e,n,t,r)=>({real:e+t,imag:n+r})),dg=Rr(hc,Cq,OFe),FFe={kernelName:hc,backendName:"cpu",kernelFunc:dg};function MO(e,n,t,r,i){let a=w.sizeFromShape(r),s=w.makeZerosTypedArray(i,t);for(let o=0;o<e.length;o++){let l=e[o];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(s[l]+=a>0?n[o]:1)}return s}function kq(e,n,t,r=!1){let i=e.shape[0],a=e.shape[1],s=wt([i,t],n.dtype);for(let o=0;o<i;o++)for(let l=0;l<a;l++){let c=e.get(o,l);if(c<0)throw new Error("Input x must be non-negative!");c>=t||s.set(r?1:n.size>0?s.get(o,c)+n.get(o,l):s.get(o,c)+1,o,c)}return s}var Sq=or((e,n)=>e&n),RFe=Rr(Vf,Sq),PFe={kernelName:Vf,backendName:"cpu",kernelFunc:RFe};function Oo(e){return(n,t,r)=>{let i=w.getArrayFromDType(t,n.length);for(let a=0;a<n.length;++a)i[a]=e(n[a],r);return i}}function on(e,n,t){return Vc(e,Oo(n),t)}function Vc(e,n,t){return({inputs:r,attrs:i,backend:a})=>{let{x:s}=r;Pe(s,e);let c,o=a,l=o.data.get(s.dataId).values;if("string"===s.dtype){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=I.fromUint8ToStringArray(l)}else c=l;let u=t||s.dtype,h=n(c,u,i);return o.makeTensorInfo(s.shape,u,h)}}var Iq=Oo(e=>Math.ceil(e)),LFe=Vc(td,Iq),$Fe={kernelName:td,backendName:"cpu",kernelFunc:LFe};function EO(e,n,t,r){let i=w.getArrayFromDType(t,w.sizeFromShape(n));if(r&&"string"!==t){let a=0;e.forEach(s=>{let o=w.sizeFromShape(s.shape);i.set(s.vals,a),a+=o})}else{let a=0;e.forEach(s=>{let o="string"===t?I.fromUint8ToStringArray(s.vals):s.vals,l=0;for(let c=0;c<s.shape[0];++c){let u=c*n[1]+a;for(let h=0;h<s.shape[1];++h)i[u+h]=o[l++]}a+=s.shape[1]})}return i}var Mq=or((e,n)=>e===n?1:0),Eq=Rr(Yf,Mq,null,"bool"),BFe={kernelName:Yf,backendName:"cpu",kernelFunc:Eq},Dq=Oo(e=>Math.exp(e)),Aq=Vc(pd,Dq,"float32"),VFe={kernelName:pd,backendName:"cpu",kernelFunc:Aq},Tq=Oo(e=>Math.expm1(e)),zFe=Vc(fd,Tq),UFe={kernelName:fd,backendName:"cpu",kernelFunc:zFe},Nq=Oo(e=>Math.floor(e)),HFe=Vc(md,Nq),WFe={kernelName:md,backendName:"cpu",kernelFunc:HFe},Oq=or((e,n)=>Math.floor(e/n)),jFe=Rr(gd,Oq,null,"int32"),GFe={kernelName:gd,backendName:"cpu",kernelFunc:jFe};function Fq(e,n,t,r,i,a,s,o,l){let c=wt([r,a],t);for(let u=0;u<r;u++){let h=[],d=0;for(let p=0;p<i;p++){let f=e[u*i+p];d+=f*s[p],h.push(f)}if(d<0||d>=l/a)throw new Error(`Invalid indices: ${h} does not index into ${o}`);for(let p=0;p<a;p++)c.values[u*a+p]=n.get(...n.indexToLoc(d*a+p))}return c}function Rq(e,n,t){let r=wt(t,e.dtype);for(let i=0;i<r.size;++i){let a=r.indexToLoc(i).slice(),l=n.locToIndex([a[0],a[2]]);a[2]=n.values[l];let c=e.locToIndex(a);0<=c&&c<e.values.length&&(r.values[i]=e.values[c])}return r}var Pq=or((e,n)=>e>n?1:0),qFe=Rr(tm,Pq,null,"bool"),KFe={kernelName:tm,backendName:"cpu",kernelFunc:qFe},Lq=or((e,n)=>e>=n?1:0),XFe=Rr(bd,Lq,null,"bool"),YFe={kernelName:bd,backendName:"cpu",kernelFunc:XFe},$q=or((e,n)=>e<n?1:0),ZFe=Rr(nm,$q,null,"bool"),QFe={kernelName:nm,backendName:"cpu",kernelFunc:ZFe},Bq=or((e,n)=>e<=n?1:0),JFe=Rr(rm,Bq,null,"bool"),eRe={kernelName:rm,backendName:"cpu",kernelFunc:JFe};function Vq(e,n,t){let r=(n-e)/(t-1),i=w.makeZerosTypedArray(t,"float32");i[0]=e;for(let a=1;a<i.length;a++)i[a]=i[a-1]+r;return i}var zq=Oo(e=>Math.log(e)),tRe=Vc(kd,zq),nRe={kernelName:kd,backendName:"cpu",kernelFunc:tRe};function Uq(e,n,t,r){let i=w.getTypedArrayFromDType(r,w.sizeFromShape(t));for(let a=0;a<i.length;++a){let s=a*n,o=e[s];for(let l=0;l<n;++l){let c=e[s+l];(Number.isNaN(c)||c>o)&&(o=c)}i[a]=o}return i}var Hq=or((e,n)=>Math.max(e,n)),rRe=Rr(Ed,Hq),iRe={kernelName:Ed,backendName:"cpu",kernelFunc:rRe},Wq=or((e,n)=>Math.min(e,n)),aRe=Rr(Nd,Wq),sRe={kernelName:Nd,backendName:"cpu",kernelFunc:aRe},DO=or((e,n)=>e*n),oRe=IO((e,n,t,r)=>({real:e*t-n*r,imag:e*r+n*t})),sC=Rr(Rd,DO,oRe),lRe={kernelName:Rd,backendName:"cpu",kernelFunc:sC};function jq(e,n,t){let r=w.createScalarValue(-1,t);return DO([],n,r,e,t)}var uRe={kernelName:dm,backendName:"cpu",kernelFunc:function cRe(e){let{inputs:n,backend:t}=e,{x:r}=n;Pe(r,"neg");let i=t.data.get(r.dataId).values,[a,s]=jq(i,r.shape,r.dtype);return t.makeTensorInfo(s,r.dtype,a)}},Gq=or((e,n)=>e!==n?1:0),dRe=Rr(hm,Gq,null,"bool"),hRe={kernelName:hm,backendName:"cpu",kernelFunc:dRe};function AO(e,n,t,r,i){let a=n.length,s=w.sizeFromShape(n),o=w.computeStrides(n),l=w.computeStrides(i),c=w.getTypedArrayFromDType(t,w.sizeFromShape(i));for(let u=0;u<s;++u){let h=w.indexToLoc(u,a,o),d=new Array(h.length);for(let f=0;f<d.length;f++)d[f]=h[r[f]];c[w.locToIndex(d,a,l)]=e[u]}return c}function ea(e){let{inputs:n,attrs:t,backend:r}=e,{x:i}=n,{perm:a}=t;Pe(i,"transpose");let o=new Array(i.shape.length);for(let u=0;u<o.length;u++)o[u]=i.shape[a[u]];let c=AO(r.data.get(i.dataId).values,i.shape,i.dtype,a,o);return{dataId:r.write(c,o,i.dtype),shape:o,dtype:i.dtype}}var pRe={kernelName:hl,backendName:"cpu",kernelFunc:ea};function qq(e,n,t,r){let[i,a]=I.computeOutAndReduceShapes(e,r),s=za(n,"int32"),o=w.makeZerosTypedArray(w.sizeFromShape(i),s),l=w.sizeFromShape(a);for(let c=0;c<o.length;++c){let u=c*l,h=1;for(let d=0;d<l;++d)h*=t[u+d];o[c]=h}return{outVals:o,outShape:i,outDtype:s}}var mRe={kernelName:Vd,backendName:"cpu",kernelFunc:function fRe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,keepDims:s}=r;Pe(i,"prod");let o=i.shape.length,l=w.parseAxisParam(a,i.shape),c=I.getAxesPermutation(l,o),u=l,h=i,d=[];null!=c&&(h=ea({inputs:{x:i},backend:t,attrs:{perm:c}}),d.push(h),u=I.getInnerMostAxes(u.length,o));let p=t.data.get(h.dataId).values,{outVals:f,outShape:m,outDtype:g}=qq(h.shape,h.dtype,p,u),y=m;return s&&(y=I.expandShapeToKeepDim(m,l)),d.forEach(b=>t.disposeIntermediateTensorInfo(b)),t.makeTensorInfo(y,g,f)}};function Kq(e,n){let t=e.slice(0,n);for(;t.length<n;)t.push(1);for(let r=n;r<e.length;r++)t[n-1]*=e[r];return t}function Xq(e,n,t,r,i,a,s,o){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===n[0].length)throw new Error("Split tensors must not be scalars");if(function gRe(e,n,t){e.forEach((r,i)=>{if(r<0||r>=t){let a=w.indexToLoc(i,n.length,w.computeStrides(n)).join(",");throw new Error(`indices[${a}] = ${r} is not in [0, ${t})`)}})}(a,s,n[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");let c=r[0],{outSplits:u,valueSlices:h,numValues:d}=function bRe(e,n,t,r){let i=[],a=0,o=new Array(n.length-1+t.length).fill(null).map(()=>[0]);!function yRe(e,n){for(let t=0;t<e.length;++t){let r=e[t],i=t===e.length-1?n:e[t+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let a=1;a<r.length;++a)if(r[a-1]>r[a])throw new Error("Ragged splits must be sorted in ascending order")}}(t,r);let l=1;for(let c=0;c<n.length-1;++c){l*=n[c];let u=n[c+1];for(let h=1;h<l+1;++h)o[c].push(h*u)}for(let c=0;c<e.length;++c){let u=e[c],h=e[c]+1;for(let d=0;d<t.length;++d){let p=t[d],f=d+n.length-1;if(f>=0){let m=o[f],g=m[m.length-1]-p[u];for(let y=u;y<h;++y)o[f].push(p[y+1]+g)}u=p[u],h=p[h]}h!==u&&(i.push([u,h]),a+=h-u)}return{outSplits:o,valueSlices:i,numValues:a}}(a,s,e,c),p=function _Re(e){let n=[];for(let t=0;t<e.length;++t){let i=w.getArrayFromDType("int32",e[t].length);n.push(i),e[t].forEach((a,s)=>i[s]=a)}return n}(u),f=function xRe(e,n,t,r,i){let a=n.slice();a[0]=i;let s=w.getArrayFromDType(t,w.sizeFromShape(a)),o=e.length;return function vRe(e,n,t,r,i,a){let s=Kq(n,2)[1],o=Kq(a,2)[1],l=0;for(let c of t)for(let u=c[0];u<c[1];++u){for(let h=0;h<r;++h)i[l*o+h]=e[u*s+h];++l}}(e,n,r,0===o?0:o/n[0],s,a),[s,a]}(t,r,i,h,d);return[p,f[0],f[1]]}var Yq=2147483647;function Zq(e,n,t,r,i,a,s){if(n.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");let o=0===n.length,l=0===i.length,c=0===s.length,u=[];o||u.push(n[0]),l||u.push(i[0]),c||u.push(s[0]);for(let g=1;g<u.length;++g)if(u[g]!==u[g-1])throw new Error("starts, limits, and deltas must have the same shape");let h=0===u.length?1:u[0],d=w.getArrayFromDType("int32",h+1);d[0]=0;for(let g=0;g<h;++g){let v,y=o?e[0]:e[g],b=l?r[0]:r[g],_=c?a[0]:a[g];if(0===_)throw new Error("Requires delta != 0");if(_>0&&b<y||_<0&&b>y)v=0;else if(v=Math.ceil(Math.abs((b-y)/_)),v>Yq)throw new Error(`Requires ((limit - start) / delta) <= ${Yq}`);d[g+1]=d[g]+v}let f=w.getArrayFromDType(t,d[h]),m=0;for(let g=0;g<h;++g){let y=d[g+1]-d[g],b=o?e[0]:e[g],_=c?a[0]:a[g];for(let v=0;v<y;++v)f[m++]=b,b+=_}return[d,f]}var Cs=I.RowPartitionType,wRe=class Z${constructor(n,t,r,i,a,s,o,l,c,u){this.shape=n,this.shapeShape=t,this.values=r,this.valuesShape=i,this.valuesDType=a,this.defaultValue=s,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=I.getRowPartitionTypesHelper(u),this.raggedRank=I.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(n){return this.rowPartitionTypes[0]===Cs.FIRST_DIM_SIZE?this.rowPartitionTypes[n+1]:this.rowPartitionTypes[n]}getRowPartitionTensor(n){return this.rowPartitionTypes[0]===Cs.FIRST_DIM_SIZE?this.rowPartitionValues[n+1]:this.rowPartitionValues[n]}getMaxWidth(n){let t=this.getRowPartitionTensor(n-1);switch(this.getRowPartitionTypeByDimension(n-1)){case Cs.VALUE_ROWIDS:return Z$.getMaxWidthValueRowID(t);case Cs.ROW_SPLITS:return Z$.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${Cs[this.getRowPartitionTypeByDimension(n-1)]}`)}}static getMaxWidthRowSplit(n){let t=n.length;if(0===t||1===t)return 0;let r=0;for(let i=0;i<t-1;++i){let a=n[i+1]-n[i];a>r&&(r=a)}return r}static getMaxWidthValueRowID(n){let t=n.length;if(0===t)return 0;let r=0,i=n[0],a=0;for(let s=1;s<t;++s){let o=n[s];o!==i&&(i=o,a=Math.max(s-r,a),r=s)}return Math.max(t-r,a)}tensorShapeFromTensor(n,t,r=!0){if(0===t.length){if(-1===n[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Jq(n,r)}calculateOutputSize(n){let t=this.valuesShape;I.validateDefaultValueShape(this.defaultValueShape,t);let i=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=I.combineRaggedTensorToTensorShapes(this.raggedRank,i,t);a[0]<0&&(a[0]=n);for(let s=1;s<=this.raggedRank;++s)a[s]<0&&(a[s]=this.getMaxWidth(s));return a}calculateFirstParentOutputIndex(n,t,r){let i=Math.min(n,r),a=[],s=0;for(let o=0;o<i;++o,s+=t)a.push(s);for(let o=i;o<n;++o)a.push(-1);return w.assert(a.length===n,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(n,t,r,i){let a=n.length,s=[];for(let o=0;o<a-1;++o){let l=n[o+1]-n[o],c=Math.min(i,l),u=t[o];-1===u&&(c=0);for(let h=0;h<c;++h)s.push(u),u+=r;for(let h=0;h<l-c;++h)s.push(-1)}if(a>0&&s.length!==n[a-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(n,t,r,i){let a=n.length,s=[];if(0===a)return[];let o=0,l=n[0];if(l>=t.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${t.length}`);let c=t[l];s.push(c);for(let u=1;u<a;++u){let h=n[u];if(h===l)c>=0&&(++o,o<i?c+=r:c=-1);else{if(o=0,l=h,h>=t.length)throw new Error(`Got nextValueRowId=${h} which is not less than ${t.length}`);c=t[h]}s.push(c)}if(s.length!==n.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(n,t,r,i){let a=this.getRowPartitionTensor(n),s=this.getRowPartitionTypeByDimension(n);switch(s){case Cs.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,r,i);case Cs.ROW_SPLITS:if(a.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${a.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(a,t,r,i);default:throw new Error(`Unsupported partition type: ${Cs[s]}`)}}getFirstDimensionSize(){let n=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");let t=this.rowPartitionTypes[0];switch(t){case Cs.FIRST_DIM_SIZE:return n[0];case Cs.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Cs.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Cs[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let n=this.getFirstDimensionSize(),t=this.calculateOutputSize(n),r=new Array(this.raggedRank+1);r[r.length-1]=1;for(let s=r.length-2;s>=0;--s)r[s]=r[s+1]*t[s+1];let i=Jq(t,!1),a=w.getArrayFromDType(this.valuesDType,w.sizeFromShape(i));if(r[0]*t[0]>0){let s=this.calculateFirstParentOutputIndex(n,r[0],t[0]);for(let o=1;o<=this.raggedRank;++o)s=this.calculateOutputIndex(o-1,s,r[o],t[o]);this.setOutput(this.raggedRank,s,a,i)}return[i,a]}setOutput(n,t,r,i){if(0===r.length)return;let a=this.values,s=r,o=i.slice();o=o.slice(n+1);let l=w.sizeFromShape(o),c=t.length,u=this.defaultValue;if(u.length!==l&&1!==u.length){let f=this.defaultValueShape;G(()=>{let m=H(u,f);u=wh(m,o).dataSync()})}let h=0,d=0,p=0;for(let f=0;f<=c;++f){let m=f<c?t[f]:-1;if(m!==p){if(d<p){let g=a.subarray(h*l);Qq(s.subarray(d*l),g,(p-d)*l)}if(f>=c&&(m=Math.floor(r.length/l)),m>p)if(1===this.defaultValue.length)s.subarray(p*l,m*l).fill(this.defaultValue[0]),p=m;else for(;m>p;)Qq(s.slice(p*l),u,l),++p;m<0?(h=f+1,d=p):(h=f,d=p,p=d+1)}else++p}}};function Qq(e,n,t){for(let r=0;r<t;r++)e[r]=n[r]}function Jq(e,n){let t=[];for(let r of e){if(r<0){if(!n)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}t.push(r)}return t}function eK(e,n,t,r,i,a,s,o,l,c){return new wRe(e,n,t,r,i,a,s,o,l,c).compute()}function TO(e,n,t,r){if(e===n||e<n&&t<0||n<e&&t>1)return w.makeZerosTypedArray(0,r);let o=Math.abs(Math.ceil((n-e)/t)),l=w.makeZerosTypedArray(o,r);n<e&&1===t&&(t=-1),l[0]=e;for(let c=1;c<l.length;c++)l[c]=l[c-1]+t;return l}var tK=Oo(e=>1/Math.sqrt(e)),CRe=Vc(Kd,tK),kRe={kernelName:Kd,backendName:"cpu",kernelFunc:CRe};function zh(e,n,t,r,i,a,s,o,l,c){let u=[r/i,i],h=e.values,d=n.values;if(0===r)return wt(t,n.dtype);let p=l instanceof yr?l:wt(u,n.dtype);"string"==typeof l||"number"==typeof l?p.values.fill(l):"boolean"==typeof l&&p.values.fill(+l);for(let f=0;f<a;f++){let m=[],g=0;for(let y=0;y<s;y++){let b=h[f*s+y];m.push(b),g+=b*o[y]}if(g<0||g>=r/i)throw new Error(`Invalid indices: ${m} does not index into ${t}`);for(let y=0;y<i;y++)c?p.values[g*i+y]+=d[f*i+y]:p.values[g*i+y]=0===n.rank?d[0]:d[f*i+y]}return p}var SRe=Oo(e=>1/(1+Math.exp(-e))),nK=on(Jd,e=>1/(1+Math.exp(-e))),IRe={kernelName:Jd,backendName:"cpu",kernelFunc:nK};function oC(e,n,t,r,i){let a=Tr.isSliceContinous(r,n,t),s=w.sizeFromShape(t),o=w.computeStrides(r);if(a){let h=Tr.computeFlatOffset(n,o);return"string"===i?e.slice(h,h+s):e.subarray(h,h+s)}let c=wt(r,i,"string"===i?I.fromUint8ToStringArray(e):e),u=wt(t,i);for(let h=0;h<u.size;++h){let d=u.indexToLoc(h),p=d.map((f,m)=>f+n[m]);u.set(c.get(...p),...d)}return"string"===i?I.fromStringArrayToUint8(u.values):u.values}function Uh(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{begin:a,size:s}=r;Pe(i,"slice");let[o,l]=Tr.parseSliceParams(i,a,s);Tr.assertParamsValid(i,o,l);let u=oC(t.data.get(i.dataId).values,o,l,i.shape,i.dtype);return t.makeTensorInfo(l,i.dtype,u)}var MRe={kernelName:Sm,backendName:"cpu",kernelFunc:Uh};function rK(e,n,t,r,i,a,s){let o=n[0],l=a[0],c=new Array(l),u=new Array(o),h=n[1];if(0===l){if(0!==o)throw new Error(I.getSparseFillEmptyRowsIndicesDenseShapeMismatch(o));return[w.getArrayFromDType(t,0),[0,h],w.getArrayFromDType(i,0),c,u]}let d=!0,p=0,f=new Array(l).fill(0);for(let g=0;g<o;++g){let y=e[g*h];if(y<0)throw new Error(I.getSparseFillEmptyRowsNegativeIndexErrorMessage(g,y));if(y>=l)throw new Error(I.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(g,y,l));++f[y],d=d&&y>=p,p=y}let m=!0;for(let g=0;g<l;++g){let y=0===f[g];c[g]=y,m=m&&!y,f[g]=Math.max(f[g],1),g>0&&(f[g]+=f[g-1])}if(m&&d){let g=e,y=r;for(let b=0;b<o;++b)u[b]=b;return[g,[o,h],y,c,u]}{let g=f[l-1],y=w.getArrayFromDType(t,g*h),b=w.getArrayFromDType(i,g),_=new Array(l).fill(0);for(let v=0;v<o;++v){let x=e[v*h],M=(0===x?0:f[x-1])+_[x];_[x]++;for(let D=0;D<h;++D)y[M*h+D]=e[v*h+D];b[M]=r[v],u[v]=M}for(let v=0;v<l;++v)if(0===_[v]){let x=0===v?0:f[v-1];y[x*h+0]=v;for(let S=1;S<h;++S)y[x*h+S]=0;b[x]=s}return[y,[g,h],b,c,u]}}function iK(e,n,t,r,i){let a=w.sizeFromShape(r),s=n[0],o=i.length,l=[],c=1,u=-1;for(let m=0;m<o;++m){let g=i[m];if(-1===g){if(-1!==u)throw new Error(I.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(u,m));u=m,l.push(1)}else{if(g<0)throw new Error(I.getSparseReshapeNegativeOutputDimErrorMessage(m,g));c*=g,l.push(g)}}if(-1!==u){if(c<=0)throw new Error(I.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let m=Math.trunc(a/c);if(c*m!==a)throw new Error(I.getSparseReshapeInputOutputMultipleErrorMessage(r,l));l[u]=m}if(w.sizeFromShape(l)!==a)throw new Error(I.getSparseReshapeInputOutputMismatchErrorMessage(r,l));let h=r.length,d=[];if(h>0){d[h-1]=1;for(let m=h-2;m>=0;--m)d[m]=d[m+1]*r[m+1]}let p=[];if(o>0){p[o-1]=1;for(let m=o-2;m>=0;--m)p[m]=p[m+1]*l[m+1]}let f=w.getArrayFromDType(t,s*o);for(let m=0;m<s;++m){let g=0;for(let y=0;y<h;++y)g+=e[m*h+y]*d[y];for(let y=0;y<o;++y)f[m*o+y]=Math.trunc(g/p[y]),g%=p[y]}return[f,[s,o],l]}function NO(e,n,t,r,i,a=!1,s=0){let o=r.length,l=[n[0],e.length/n[0]],c=l[1],u=o>0?i[o-1]+1:0;if(u<0)throw new Error(I.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let h=n.slice();h[0]=u;let d=h.reduce((b,_)=>b*_,1),p=w.getArrayFromDType(t,d);if(0===o)return u>0&&p.fill(s),[p,h];if(u<=0)throw new Error(I.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let f=0,m=1,g=0,y=i[f];for(;;){let b=0;if(m<o){if(b=i[m],y===b){++m;continue}if(y>=b)throw new Error(I.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(y<0||y>=u)throw new Error(I.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y,u));y>g&&p.fill(s,g*c,y*c);for(let _=f;_<m;++_){let v=r[_];if(v<0||v>=l[0])throw new Error(I.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(_,r[_],l[0]));for(let x=0;x<c;x++)p[y*c+x]+=e[v*c+x]}if(a)for(let _=0;_<c;_++)p[y*c+_]/=m-f;if(f=m,++m,g=y+1,y=b,m>o)break}return g<u&&p.fill(s,g*c,u*c),[p,h]}var ERe=Oo(e=>Math.sqrt(e)),DRe=on(th,e=>Math.sqrt(e)),ARe={kernelName:th,backendName:"cpu",kernelFunc:DRe},aK=or((e,n)=>{let t=e-n;return t*t}),TRe=Rr(ih,aK),NRe={kernelName:ih,backendName:"cpu",kernelFunc:TRe},sK=Oo((e,n)=>{let{pattern:t,replaceGlobal:r,rewrite:i}=n;return e.replace(new RegExp(t,r?"g":""),i)}),ORe=Vc(Rb,sK),FRe={kernelName:Rb,backendName:"cpu",kernelFunc:ORe};function oK(e,n,t,r){let i=wt(e,n.dtype);for(let a=0;a<i.size;a++){let s=i.indexToLoc(a),o=new Array(s.length);for(let l=0;l<o.length;l++)o[l]=s[l]*t[l]+r[l];i.set(n.get(...o),...s)}return i}var RRe=class{constructor(e,n,t,r,i,a){this.separator=w.encodeString(e),this.nGramWidths=n,this.leftPad=w.encodeString(t),this.rightPad=w.encodeString(r),this.padWidth=i,this.preserveShort=a}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){let t=this.getPadWidth(n);return Math.max(0,e+2*t-n+1)}createNGrams(e,n,t,r,i,a){for(let s=0;s<i;++s){let o=this.getPadWidth(a),l=Math.max(0,o-s),c=Math.max(0,o-(i-(s+1))),u=a-(l+c),h=n+(l>0?0:s-o),d=0;d+=l*this.leftPad.length;for(let y=0;y<u;++y)d+=e[h+y].length;d+=c*this.rightPad.length,d+=(l+c+u-1)*this.separator.length,t[r+s]=new Uint8Array(d);let f=t[r+s],m=0,g=y=>y.forEach(b=>f[m++]=b);for(let y=0;y<l;++y)g(this.leftPad),g(this.separator);for(let y=0;y<u-1;++y)g(e[h+y]),g(this.separator);if(u>0){g(e[h+u-1]);for(let y=0;y<c;++y)g(this.separator),g(this.rightPad)}else{for(let y=0;y<c-1;++y)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,n){let t=e.length,r=n.length;if(r>0){let o=n[0];if(0!==o)throw new Error(`First split value must be 0, got ${o}`);for(let l=1;l<r;++l){let c=n[l]>=o;if(c=c&&n[l]<=t,!c)throw new Error(`Invalid split value ${n[l]}, must be in [${o}, ${t}]`);o=n[l]}if(o!==t)throw new Error(`Last split value must be data size. Expected ${t}, got ${o}`)}let i=r-1,a=w.getArrayFromDType("int32",r);if(0===t||0===r){let o=new Array(t);for(let l=0;l<=i;++l)a[l]=0;return[o,a]}a[0]=0;for(let o=1;o<=i;++o){let l=n[o]-n[o-1],c=0;this.nGramWidths.forEach(u=>{c+=this.getNumNGrams(l,u)}),this.preserveShort&&l>0&&0===c&&(c=1),a[o]=a[o-1]+c}let s=new Array(a[i]);for(let o=0;o<i;++o){let l=n[o],c=a[o];if(this.nGramWidths.forEach(u=>{let d=this.getNumNGrams(n[o+1]-n[o],u);this.createNGrams(e,l,s,c,d,u),c+=d}),this.preserveShort&&c===a[o]){let u=n[o+1]-n[o];if(0===u)continue;this.createNGrams(e,l,s,c,1,u+2*this.padWidth)}}return[s,a]}};function OO(e,n,t,r,i,a,s,o){return new RRe(t,r,i,a,s,o).compute(e,n)}function PRe(e,n,t,r){if(!e.length)return;if(0===n.length){for(let a=0;a<e.length;++a)r.push(e.subarray(a,a+1));return}if(1===n.length){let a=n[0],s=e.indexOf(a);for(;-1!==s;){let o=e.subarray(0,s);(!t||0!==o.length)&&r.push(o),s=(e=e.subarray(s+1)).indexOf(a)}return void((!t||0!==e.length)&&r.push(e))}let i=0;for(let a=0;a<e.length+1;a++)if(a===e.length||-1!==n.indexOf(e[a])){let s=e.subarray(i,a);(!t||0!==s.length)&&r.push(s),i=a+1}}function FO(e,n,t){let r=e.length,i=[],a=0,s=0,o=new Array(r);for(let d=0;d<r;++d){let p=i.length;PRe(e[d],n,t,i);let f=i.length-p;o[d]=f,a+=f,s=Math.max(s,f)}let l=w.getArrayFromDType("int32",2*a),c=new Array(a),u=[r,s],h=0;for(let d=0;d<r;++d)for(let p=0;p<o[d];++p)l[2*h]=d,l[2*h+1]=p,c[h]=i[h],++h;return[l,c,u]}function RO(e,n){let t=w.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)t[r]=w.fingerPrint64(e[r]).modulo(n).getLowBitsUnsigned();return t}var lK=or((e,n)=>e-n),LRe=IO((e,n,t,r)=>({real:e-t,imag:n-r})),PO=Rr(ah,lK,LRe),$Re={kernelName:ah,backendName:"cpu",kernelFunc:PO};function cK(e,n){let t=new Array(e.rank);for(let i=0;i<t.length;i++)t[i]=e.shape[i]*n[i];let r=wt(t,e.dtype);for(let i=0;i<r.values.length;++i){let a=r.indexToLoc(i),s=new Array(e.rank);for(let l=0;l<s.length;l++)s[l]=a[l]%e.shape[l];let o=e.locToIndex(s);r.values[i]=e.values[o]}return r}var R_=(e,n)=>{let t=n.value-e.value;return 0===t?e.index-n.index:t};function uK(e,n,t=0,r=e.length-1){for(;r>t;){if(r-t>600){let o=r-t+1,l=n-t+1,c=Math.log(o),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(o-u)/o)*Math.sign(l-o/2);uK(e,n,Math.max(t,Math.floor(n-l*u/o+h)),Math.min(r,Math.floor(n+(o-l)*u/o+h)))}let i=e[n],a=t,s=r;for(w.swap(e,t,n),R_(e[r],i)>0&&w.swap(e,t,r);a<s;){for(w.swap(e,a,s),a++,s--;R_(e[a],i)<0;)a+=1;for(;R_(e[s],i)>0;)s-=1}0===R_(e[t],i)?w.swap(e,t,s):(s+=1,w.swap(e,s,r)),s<=n&&(t=s+1),n<=s&&(r=s-1)}}function dK(e,n,t,r,i){let a=n[n.length-1],[s,o]=[e.length/a,a],l=w.getTypedArrayFromDType(t,s*r),c=w.getTypedArrayFromDType("int32",s*r);for(let h=0;h<s;h++){let d=h*o,p=e.subarray(d,d+o),f=new Array(p.length);p.forEach((b,_)=>f[_]={value:b,index:_}),r<f.length&&(uK(f,r),f=f.slice(0,r)),i&&f.sort(R_);let m=h*r,g=l.subarray(m,m+r),y=c.subarray(m,m+r);for(let b=0;b<r;b++)g[b]=f[b].value,y[b]=f[b].index}let u=n.slice();return u[u.length-1]=r,[wt(u,t,l),wt(u,"int32",c)]}function LO(e,n,t,r){let i=w.parseAxisParam(n,t)[0],a=[1,t[0],1];for(let f=0;f<i;f++)a[0]*=t[f];a[1]=t[i];for(let f=i+1;f<t.length;f++)a[2]*=t[f];let s=new Map,o=new Int32Array(t[i]),l=new yr(a,r,e),c=[],u=1===a[0]&&1===a[2];for(let f=0;f<t[i];f++){let m;if(u)m=e[f].toString();else{let y=[];for(let b=0;b<a[0];b++)for(let _=0;_<a[2];_++)y.push(l.get(b,f,_));m=y.join(",")}let g=s.get(m);if(null!=g)o[f]=g;else{let y=s.size;s.set(m,y),o[f]=y,c.push(f)}}let h=a.slice();h[1]=s.size;let d=new yr(h,r);c.forEach((f,m)=>{for(let g=0;g<a[0];g++)for(let y=0;y<a[2];y++)d.set(l.get(g,f,y),g,m,y)});let p=t.slice();return p[i]=h[1],{outputValues:d.values,outputShape:p,indices:o}}var BRe="4.16.0";Nw("cpu",()=>new kO,1);var hK=on(dd,e=>e>=0?e:Math.exp(e)-1),VRe={kernelName:dd,backendName:"cpu",kernelFunc:hK};function pK(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{alpha:a}=r;Pe([i],"leakyRelu");let s=w.sizeFromShape(i.shape),o=t.data.get(i.dataId).values,l=w.getTypedArrayFromDType("float32",s);for(let c=0;c<o.length;c++)l[c]=o[c]<0?a*o[c]:o[c];return t.makeTensorInfo(i.shape,"float32",l)}var zRe={kernelName:Cd,backendName:"cpu",kernelFunc:pK},URe=or((e,n)=>e<0?n*e:e);function fK(e){let{inputs:n,backend:t}=e,{x:r,alpha:i}=n;Pe([r,i],"prelu");let a=t.data.get(r.dataId).values,s=t.data.get(i.dataId).values,[o,l]=URe(r.shape,i.shape,a,s,"float32");return t.makeTensorInfo(l,"float32",o)}var HRe={kernelName:Bd,backendName:"cpu",kernelFunc:fK},mK=on(Ud,e=>Math.max(0,e)),WRe={kernelName:Ud,backendName:"cpu",kernelFunc:mK},gK=on(jd,e=>Math.min(Math.max(0,e),6)),jRe={kernelName:jd,backendName:"cpu",kernelFunc:gK};function lC(e,n,t,r,i){if("linear"===t)return No({inputs:{x:n},backend:e});if("relu"===t)return mK({inputs:{x:n},backend:e});if("elu"===t)return hK({inputs:{x:n},backend:e});if("relu6"===t)return gK({inputs:{x:n},backend:e});if("prelu"===t)return fK({inputs:{x:n,alpha:r},backend:e});if("leakyrelu"===t)return pK({inputs:{x:n},backend:e,attrs:{alpha:i}});if("sigmoid"===t)return nK({inputs:{x:n},backend:e});throw new Error(`Activation ${t} has not been implemented for the CPU backend.`)}function An(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{shape:a}=r,s=w.sizeFromShape(i.shape),o=w.inferFromImplicitShape(a,s),l=w.sizeFromShape(o);w.assert(s===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),t.incRef(i.dataId);let c=t.data.get(i.dataId);if(null!=c.complexTensorInfos){let h=c.complexTensorInfos.imag;c.complexTensorInfos.real.shape=o,h.shape=o}return{dataId:i.dataId,shape:o,dtype:i.dtype}}var GRe={kernelName:bm,backendName:"cpu",kernelFunc:An};function yK(e){let{inputs:n,backend:t,attrs:r}=e,{a:i,b:a}=n,{transposeA:s,transposeB:o}=r;Pe([i,a],"matMul");let l=i.shape.length,c=a.shape.length,u=s?i.shape[l-2]:i.shape[l-1],h=o?a.shape[c-1]:a.shape[c-2],d=s?i.shape[l-1]:i.shape[l-2],p=o?a.shape[c-2]:a.shape[c-1],f=i.shape.slice(0,-2),m=a.shape.slice(0,-2),g=w.sizeFromShape(f),y=w.sizeFromShape(m),b=zm.assertAndGetBroadcastShape(i.shape.slice(0,-2),a.shape.slice(0,-2)).concat([d,p]);w.assert(u===h,()=>`Error in matMul: inner shapes (${u}) and (${h}) of Tensors with shapes ${i.shape} and ${a.shape} and transposeA=${s} and transposeB=${o} must match.`);let v=o?[y,p,h]:[y,h,p],x=An({inputs:{x:i},backend:t,attrs:{shape:s?[g,u,d]:[g,d,u]}}),S=An({inputs:{x:a},backend:t,attrs:{shape:v}}),M=s?x.shape[1]:x.shape[2],D=s?x.shape[2]:x.shape[1],N=o?S.shape[1]:S.shape[2],F=Math.max(g,y),O=t.data.get(x.dataId).values,k=t.data.get(S.dataId).values,P=w.computeStrides(x.shape),j=w.computeStrides(S.shape),[Z,z,W]=s?[P[0],1,P[1]]:[P[0],P[1],1],[q,J,te]=o?[1,j[1],j[0]]:[j[1],1,j[0]],ie=D*N,pe=wt([F,D,N],x.dtype),le=pe.values,he=t.blockSize;for(let _e=0;_e<F;_e++){let Be=_e%g,be=_e%y;for(let Ne=0;Ne<D;Ne+=he){let Fe=Math.min(Ne+he,D);for(let Ge=0;Ge<N;Ge+=he){let st=Math.min(Ge+he,N);for(let Tt=0;Tt<M;Tt+=he){let kn=Math.min(Tt+he,M);for(let en=Ne;en<Fe;en++)for(let Gt=Ge;Gt<st;Gt++){let qt=0;for(let yt=Tt;yt<kn;yt++)qt+=O[Be*Z+en*z+yt*W]*k[yt*q+Gt*J+be*te];le[_e*ie+(en*N+Gt)]+=qt}}}}}return t.disposeIntermediateTensorInfo(x),t.disposeIntermediateTensorInfo(S),t.makeTensorInfo(b,pe.dtype,pe.values)}var qRe={kernelName:Ju,backendName:"cpu",kernelFunc:yK},XRe={kernelName:lh,backendName:"cpu",kernelFunc:function KRe(e){let d,p,f,{inputs:n,backend:t,attrs:r}=e,{a:i,b:a,bias:s,preluActivationWeights:o}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r,m=[];d=yK({inputs:{a:i,b:a},attrs:{transposeA:l,transposeB:c},backend:t}),s&&(p=dg({inputs:{a:d,b:s},backend:t}),m.push(d),d=p),u&&(f=lC(t,d,u,o,h),m.push(d),d=f);for(let g of m)t.disposeIntermediateTensorInfo(g);return d}},YRe=on(Wu,e=>Math.acos(e)),ZRe={kernelName:Wu,backendName:"cpu",kernelFunc:YRe},QRe=on(ju,e=>Math.acosh(e)),JRe={kernelName:ju,backendName:"cpu",kernelFunc:QRe},tPe={kernelName:Gu,backendName:"cpu",kernelFunc:function ePe(e){let{inputs:n,backend:t}=e,r=n;Pe(n,"addN");let i=r.map(o=>t.data.get(o.dataId).values),a=wt(r[0].shape,r[0].dtype),s=a.values;for(let o=0;o<r.length;o++){let l=i[o];for(let c=0;c<s.length;c++)s[c]+=l[c]}return t.makeTensorInfo(a.shape,a.dtype,a.values)}},rPe={kernelName:Of,backendName:"cpu",kernelFunc:function nPe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,keepDims:s}=r;Pe(i,"all");let o=w.parseAxisParam(a,i.shape),l=o,c=I.getAxesPermutation(l,i.shape.length),u=i;null!=c&&(u=ea({inputs:{x:i},backend:t,attrs:{perm:c}}),l=I.getInnerMostAxes(l.length,i.shape.length)),I.assertAxesAreInnerMostDims("all",l,u.shape.length);let[h,d]=I.computeOutAndReduceShapes(u.shape,l),p=w.sizeFromShape(d),f=w.makeZerosTypedArray(w.sizeFromShape(h),u.dtype),m=t.data.get(u.dataId).values;for(let y=0;y<f.length;++y){let b=y*p,_=m[b];for(let v=0;v<p;++v)_=_&&m[b+v];f[y]=_}null!=c&&t.disposeIntermediateTensorInfo(u);let g=t.makeTensorInfo(h,u.dtype,f);if(s){let b=An({inputs:{x:g},backend:t,attrs:{shape:I.expandShapeToKeepDim(h,o)}});return t.disposeIntermediateTensorInfo(g),b}return g}},aPe={kernelName:Ff,backendName:"cpu",kernelFunc:function iPe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,keepDims:s}=r;Pe(i,"any");let o=w.parseAxisParam(a,i.shape),l=o,c=I.getAxesPermutation(l,i.shape.length),u=i;null!=c&&(u=ea({inputs:{x:i},backend:t,attrs:{perm:c}}),l=I.getInnerMostAxes(l.length,i.shape.length)),I.assertAxesAreInnerMostDims("any",l,u.shape.length);let[h,d]=I.computeOutAndReduceShapes(u.shape,l),p=w.sizeFromShape(d),f=w.makeZerosTypedArray(w.sizeFromShape(h),u.dtype),m=t.data.get(u.dataId).values;for(let y=0;y<f.length;++y){let b=y*p,_=m[b];for(let v=0;v<p;++v)_=_||m[b+v];f[y]=_}null!=c&&t.disposeIntermediateTensorInfo(u);let g=t.makeTensorInfo(h,u.dtype,f);if(s){let b=An({inputs:{x:g},backend:t,attrs:{shape:I.expandShapeToKeepDim(h,o)}});return t.disposeIntermediateTensorInfo(g),b}return g}},oPe={kernelName:Rf,backendName:"cpu",kernelFunc:function sPe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a}=r;Pe(i,"argMax");let s=w.parseAxisParam(a,i.shape),o=I.getAxesPermutation(s,i.shape.length),l=i,c=[];null!=o&&(l=ea({inputs:{x:i},backend:t,attrs:{perm:o}}),c.push(l),s=I.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],I.assertAxesAreInnerMostDims("argMax",s,l.shape.length);let[u,h]=I.computeOutAndReduceShapes(l.shape,s),d=w.sizeFromShape(u),p=w.makeZerosTypedArray(d,"int32"),f=w.sizeFromShape(h),m=t.data.get(l.dataId).values;for(let g=0;g<p.length;++g){let y=g*f,b=m[y],_=0;for(let v=0;v<f;++v){let x=m[y+v];x>b&&(b=x,_=v)}p[g]=_}return c.forEach(g=>t.disposeIntermediateTensorInfo(g)),t.makeTensorInfo(u,"int32",p)}},cPe={kernelName:Pf,backendName:"cpu",kernelFunc:function lPe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a}=r;Pe(i,"argMin");let s=w.parseAxisParam(a,i.shape),o=I.getAxesPermutation(s,i.shape.length),l=i,c=[];null!=o&&(l=ea({inputs:{x:i},backend:t,attrs:{perm:o}}),c.push(l),s=I.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],I.assertAxesAreInnerMostDims("argMin",s,l.shape.length);let[u,h]=I.computeOutAndReduceShapes(l.shape,s),d=w.sizeFromShape(u),p=w.makeZerosTypedArray(d,"int32"),f=w.sizeFromShape(h),m=t.data.get(l.dataId).values;for(let g=0;g<p.length;++g){let y=g*f,b=m[y],_=0;for(let v=0;v<f;++v){let x=m[y+v];x<b&&(b=x,_=v)}p[g]=_}return c.forEach(g=>t.disposeIntermediateTensorInfo(g)),t.makeTensorInfo(u,"int32",p)}},uPe=on(qu,e=>Math.asin(e)),dPe={kernelName:qu,backendName:"cpu",kernelFunc:uPe},hPe=on(Ku,e=>Math.asinh(e)),pPe={kernelName:Ku,backendName:"cpu",kernelFunc:hPe},fPe=on(Xu,e=>Math.atan(e)),mPe={kernelName:Xu,backendName:"cpu",kernelFunc:fPe},gPe=or((e,n)=>Math.atan2(e,n)),yPe=Rr(Zu,gPe),bPe={kernelName:Zu,backendName:"cpu",kernelFunc:yPe},_Pe=on(Yu,e=>Math.atanh(e)),vPe={kernelName:Yu,backendName:"cpu",kernelFunc:_Pe};function $O(e,n,t,r,i,a){let s=i.strideHeight,o=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,u=i.effectiveFilterHeight,h=i.effectiveFilterWidth,d=i.padInfo.top,p=i.padInfo.left,f="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=wt(i.outShape,t),g=m.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],b=i.outShape[2]*i.outShape[3],_=i.outShape[3];for(let v=0;v<i.batchSize;++v){let x=v*y,S=v*r[0];for(let M=0;M<i.inChannels;++M)for(let D=0;D<i.outHeight;++D){let N=D*s-d,F=Math.max(0,N),O=Math.min(i.inHeight,u+N),k=x+D*b;for(let P=0;P<i.outWidth;++P){let j=P*o-p,Z=Math.max(0,j),z=Math.min(i.inWidth,h+j),W=f,q=0,J=0;for(let ie=F;ie<O;ie+=l){let pe=S+ie*r[1];for(let le=Z;le<z;le+=c){let _e=e[pe+le*r[2]+M];"max"===a&&_e>W?W=_e:"avg"===a&&(q+=_e,J++)}if(isNaN(W))break}g[k+P*_+M]="avg"===a?q/J:W}}}return m}function bK(e,n,t,r,i=!1,a=!1){let s=wt(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=wt(n,t,e);for(let g=0;g<r.batchSize;++g)for(let y=0;y<r.inChannels;++y)for(let b=0;b<r.outHeight;++b){let _=b*o-p,v=_;for(;v<0;)v+=c;let x=Math.min(r.inHeight,h+_);for(let S=0;S<r.outWidth;++S){let M=S*l-f,D=M;for(;D<0;)D+=u;let N=Math.min(r.inWidth,d+M),F=Number.NEGATIVE_INFINITY,O=-1;for(let k=v;k<x;k+=c){let P=k-_;for(let j=D;j<N;j+=u){let Z=j-M,z=m.get(g,k,j,y);z>F&&(F=z,O=i?a?((g*r.inHeight+k)*r.inWidth+j)*r.inChannels+y:(k*r.inWidth+j)*r.inChannels+y:P*d+Z)}}s.set(O,g,b,S,y)}}return s}function _K(e,n,t,r,i,a){let s=i.strideDepth,o=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,u=i.dilationHeight,h=i.dilationWidth,d=i.effectiveFilterDepth,p=i.effectiveFilterHeight,f=i.effectiveFilterWidth,m=i.padInfo.front,g=i.padInfo.top,y=i.padInfo.left,b="max"===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,_=wt(i.outShape,t),v=_.values,x=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],S=i.outShape[2]*i.outShape[3]*i.outShape[4],M=i.outShape[3]*i.outShape[4],D=i.outShape[4];for(let N=0;N<i.batchSize;++N){let F=N*x,O=N*r[0];for(let k=0;k<i.inChannels;++k)for(let P=0;P<i.outDepth;++P){let j=P*s-m,Z=j;for(;Z<0;)Z+=c;let z=Math.min(i.inDepth,d+j),W=F+P*S;for(let q=0;q<i.outHeight;++q){let J=q*o-g,te=J;for(;te<0;)te+=u;let ie=Math.min(i.inHeight,p+J),pe=W+q*M;for(let le=0;le<i.outWidth;++le){let he=le*l-y,_e=he;for(;_e<0;)_e+=h;let Be=Math.min(i.inWidth,f+he),be=pe+le*D,Ne=b,Fe=0,Ge=0;for(let Tt=Z;Tt<z;Tt+=c){let kn=O+Tt*r[1];for(let en=te;en<ie;en+=u){let Gt=kn+en*r[2];for(let qt=_e;qt<Be;qt+=h){let Tn=e[Gt+qt*r[3]+k];if("max"===a&&Tn>Ne?Ne=Tn:"avg"===a&&(Fe+=Tn,Ge++),isNaN(Ne))break}if(isNaN(Ne))break}if(isNaN(Ne))break}v[be+k]="avg"===a?Fe/Math.max(Ge,1):Ne}}}}return _}var CPe={kernelName:Qu,backendName:"cpu",kernelFunc:function wPe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n;Pe(i,"avgPool");let{filterSize:a,strides:s,pad:o,dimRoundingMode:l}=r;w.assert(I.eitherStridesOrDilationsAreOne(s,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`);let h,u=I.computePool2DInfo(i.shape,a,s,1,o,l);if(1===u.filterWidth&&1===u.filterHeight&&w.arraysEqual(u.inShape,u.outShape))h=No({inputs:{x:i},backend:t});else{let d=t.data.get(i.dataId).values,p=w.computeStrides(i.shape),f=$O(d,0,i.dtype,p,u,"avg");h=t.makeTensorInfo(u.outShape,i.dtype,f.values)}return h}},SPe={kernelName:Lf,backendName:"cpu",kernelFunc:function kPe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{filterSize:a,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r;Pe(i,"avgPool3d");let u=I.computePool3DInfo(i.shape,a,s,1,o,l,c),d=_K(t.data.get(i.dataId).values,0,i.dtype,w.computeStrides(i.shape),u,"avg");return t.makeTensorInfo(d.shape,"float32",d.values)}},MPe={kernelName:xb,backendName:"cpu",kernelFunc:function IPe(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,input:a}=n,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r;Pe([i,a],"avgPool3DGrad");let u=I.computePool3DInfo(a.shape,s,o,1,l,c),h=u.strideDepth,d=u.strideHeight,p=u.strideWidth,f=u.filterDepth,m=u.filterHeight,g=u.filterWidth,y=u.dilationDepth,b=u.dilationHeight,_=u.dilationWidth,v=u.effectiveFilterDepth,x=u.effectiveFilterHeight,S=u.effectiveFilterWidth,M=v-1-u.padInfo.front,D=S-1-u.padInfo.left,N=x-1-u.padInfo.top,F=wt(a.shape,"float32"),O=1/(f*m*g),k=t.bufferSync(i);for(let P=0;P<u.batchSize;++P)for(let j=0;j<u.inChannels;++j)for(let Z=0;Z<u.inDepth;++Z)for(let z=0;z<u.inHeight;++z)for(let W=0;W<u.inWidth;++W){let q=Z-M,J=z-N,te=W-D,ie=0;for(let pe=0;pe<v;pe+=y){let le=(q+pe)/h;if(!(le<0||le>=u.outDepth||Math.floor(le)!==le))for(let he=0;he<x;he+=b){let _e=(J+he)/d;if(!(_e<0||_e>=u.outHeight||Math.floor(_e)!==_e))for(let Be=0;Be<S;Be+=_){let be=(te+Be)/p;be<0||be>=u.outWidth||Math.floor(be)!==be||(ie+=k.get(P,le,_e,be,j))}}}F.set(ie*O,P,Z,z,W,j)}return t.makeTensorInfo(F.shape,F.dtype,F.values)}},DPe={kernelName:vb,backendName:"cpu",kernelFunc:function EPe(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,input:a}=n,s=a;Pe([i,a],"avgPoolGrad");let{filterSize:o,strides:l,pad:c}=r,u=I.computePool2DInfo(s.shape,o,l,1,c),h=u.strideHeight,d=u.strideWidth,p=u.filterHeight,f=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,y=u.effectiveFilterHeight,b=u.effectiveFilterWidth,_=b-1-u.padInfo.left,v=y-1-u.padInfo.top,x=wt(s.shape,"float32"),S=1/(p*f),M=t.data.get(i.dataId).values,D=wt(i.shape,"float32",M);for(let N=0;N<u.batchSize;++N)for(let F=0;F<u.inChannels;++F)for(let O=0;O<u.inHeight;++O)for(let k=0;k<u.inWidth;++k){let P=O-v,j=k-_,Z=0;for(let z=0;z<y;z+=m){let W=(P+z)/h;if(!(W<0||W>=u.outHeight||Math.floor(W)!==W))for(let q=0;q<b;q+=g){let J=(j+q)/d;J<0||J>=u.outWidth||Math.floor(J)!==J||(Z+=D.get(N,W,J,F))}}x.set(Z*S,N,O,k,F)}return t.makeTensorInfo(x.shape,x.dtype,x.values)}},TPe={kernelName:yd,backendName:"cpu",kernelFunc:function APe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,scale:a,offset:s,mean:o,variance:l}=n;w.assert(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),w.assert(null==s||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),w.assert(null==a||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Pe([i,o,l,a,s],"batchNorm");let{varianceEpsilon:c}=r;null==c&&(c=.001);let u=t.data.get(i.dataId).values,h=t.data.get(o.dataId).values,d=t.data.get(l.dataId).values,p=a?t.data.get(a.dataId).values:new Float32Array([1]),f=s?t.data.get(s.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=f.length,y=p.length,b=d.length,_=h.length,v=0,x=0,S=0,M=0;for(let D=0;D<u.length;++D)m[D]=f[v++]+(u[D]-h[x++])*p[S++]/Math.sqrt(d[M++]+c),v>=g&&(v=0),x>=_&&(x=0),S>=y&&(S=0),M>=b&&(M=0);return t.makeTensorInfo(i.shape,i.dtype,m)}},OPe={kernelName:$f,backendName:"cpu",kernelFunc:function NPe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{blockShape:a,crops:s}=r;Pe([i],"batchToSpaceND");let o=a.reduce((y,b)=>y*b),l=I.getReshaped(i.shape,a,o),c=I.getPermuted(l.length,a.length),u=I.getReshapedPermuted(i.shape,a,o),h=I.getSliceBeginCoords(s,a.length),d=I.getSliceSize(u,s,a.length),p=An({inputs:{x:i},backend:t,attrs:{shape:l}}),f=ea({inputs:{x:p},backend:t,attrs:{perm:c}}),m=An({inputs:{x:f},backend:t,attrs:{shape:u}}),g=Uh({inputs:{x:m},backend:t,attrs:{begin:h,size:d}});return t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(m),g}},RPe={kernelName:Bf,backendName:"cpu",kernelFunc:function FPe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,weights:a}=n,{size:s}=r,c=MO(t.data.get(i.dataId).values,t.data.get(a.dataId).values,a.dtype,a.shape,s);return t.makeTensorInfo([s],a.dtype,c)}},LPe={kernelName:wb,backendName:"cpu",kernelFunc:function PPe(e){let{inputs:n,backend:t}=e,{s0:r,s1:i}=n,a=t.data.get(r.dataId).values,s=t.data.get(i.dataId).values,o=I.assertAndGetBroadcastShape(Array.from(a),Array.from(s));return t.makeTensorInfo([o.length],"int32",Int32Array.from(o))}},$Pe=on(pc,(e,n)=>e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e),BPe={kernelName:pc,backendName:"cpu",kernelFunc:$Pe},zPe={kernelName:Cb,backendName:"cpu",kernelFunc:e=>{let{x:n}=e.inputs,t=e.backend,r=new Float32Array(w.sizeFromShape(n.shape)),i=t.data.get(n.dataId),s=i.complexTensorInfos.imag,o=t.data.get(i.complexTensorInfos.real.dataId).values,l=t.data.get(s.dataId).values;for(let c=0;c<o.length;c++)r[c]=Math.hypot(o[c],l[c]);return t.makeOutput(r,n.shape,"float32")}};function hg(e){let{inputs:n,backend:t}=e,{input:r}=n,i=t.data.get(r.dataId).complexTensorInfos.imag,a=t.data.get(i.dataId).values;return t.makeTensorInfo(i.shape,i.dtype,a)}var UPe={kernelName:_w,backendName:"cpu",kernelFunc:hg};function pg(e){let{inputs:n,backend:t,attrs:r}=e,{axis:i}=r,a=w.parseAxisParam(i,n[0].shape)[0],s=n.map(m=>m.shape);I.assertParamsConsistent(s,a);let o=I.computeOutShape(n.map(m=>m.shape),a);if(0===w.sizeFromShape(o))return t.makeTensorInfo(o,n[0].dtype,[]);let l=n.filter(m=>w.sizeFromShape(m.shape)>0);if(1===l.length)return No({inputs:{x:l[0]},backend:t});if("complex64"===l[0].dtype){let m=l.map(v=>Vh({inputs:{input:v},backend:t})),g=l.map(v=>hg({inputs:{input:v},backend:t})),y=pg({inputs:m,backend:t,attrs:{axis:a}}),b=pg({inputs:g,backend:t,attrs:{axis:a}}),_=Ia({inputs:{real:y,imag:b},backend:t});return m.forEach(v=>t.disposeIntermediateTensorInfo(v)),g.forEach(v=>t.disposeIntermediateTensorInfo(v)),t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(b),_}let c=l.map(m=>{let g=[-1,w.sizeFromShape(m.shape.slice(a))];return An({inputs:{x:m},backend:t,attrs:{shape:g}})}),u=c.map(m=>({vals:t.data.get(m.dataId).values,shape:m.shape}));o=I.computeOutShape(c.map(m=>m.shape),1);let d=EO(u,o,n[0].dtype,1===c[0].shape[0]),p=I.computeOutShape(l.map(m=>m.shape),a),f=t.makeTensorInfo(p,n[0].dtype,d);return c.forEach(m=>t.disposeIntermediateTensorInfo(m)),f}var HPe={kernelName:zf,backendName:"cpu",kernelFunc:pg};function vK(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,filter:a}=n,{strides:s,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r;Pe([i,a],"conv2d");let h=I.convertConv2DDataFormat(l),d=I.computeConv2DInfo(i.shape,a.shape,s,c,o,u,!1,h),p=d.filterHeight,f=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,y=d.padInfo.left,b=d.padInfo.top,_="channelsLast"===d.dataFormat,v=new yr(d.outShape,i.dtype),x=w.computeStrides(i.shape),S=w.computeStrides(a.shape),M=x[0],D=_?x[1]:x[2],N=_?x[2]:1,F=_?1:x[1],O=v.strides[0],k=_?v.strides[1]:v.strides[2],P=_?v.strides[2]:1,j=_?1:v.strides[1],Z=t.data.get(i.dataId).values,z=t.data.get(a.dataId).values,W=v.values;for(let q=0;q<d.batchSize;++q){let J=q*M,te=q*O;for(let ie=0;ie<d.outHeight;++ie){let pe=te+ie*k,le=ie*d.strideHeight-b;for(let he=0;he<p;++he){let _e=le+he*m;if(_e<0||_e>=d.inHeight)continue;let Be=he*S[0],be=J+_e*D;for(let Ne=0;Ne<d.outWidth;++Ne){let Fe=pe+Ne*P,Ge=Ne*d.strideWidth-y;for(let st=0;st<f;++st){let Tt=Ge+st*g;if(Tt<0||Tt>=d.inWidth)continue;let en=be+Tt*N,Gt=Be+st*S[1];for(let qt=0;qt<d.inChannels;++qt){let yt=Z[en+qt*F];for(let Tn=0;Tn<d.outChannels;++Tn)W[Fe+Tn*j]+=yt*z[Gt+Tn];Gt+=d.outChannels}}}}}}return t.makeTensorInfo(v.shape,v.dtype,W)}var WPe={kernelName:nd,backendName:"cpu",kernelFunc:vK},GPe={kernelName:hw,backendName:"cpu",kernelFunc:function jPe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,dy:a}=n,{strides:s,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;Pe([i,a],"conv2dBackpropFilter");let h=I.convertConv2DDataFormat(l),d=I.computeConv2DInfo(i.shape,u,s,1,o,c,!1,h),{strideHeight:p,strideWidth:f,filterHeight:m,filterWidth:g}=d,y="channelsLast"===d.dataFormat,b=new yr(d.filterShape,"float32"),_=d.padInfo.left,v=d.padInfo.top,x=t.data.get(i.dataId).values,S=t.data.get(a.dataId).values,M=new yr(i.shape,i.dtype,x),D=new yr(a.shape,a.dtype,S);for(let N=0;N<m;++N){let F=Math.max(0,Math.ceil((v-N)/p)),O=Math.min(d.outHeight,(d.inHeight+v-N)/p);for(let k=0;k<g;++k){let P=Math.max(0,Math.ceil((_-k)/f)),j=Math.min(d.outWidth,(d.inWidth+_-k)/f);for(let Z=0;Z<d.inChannels;++Z)for(let z=0;z<d.outChannels;++z){let W=0;for(let q=0;q<d.batchSize;++q)for(let J=F;J<O;++J){let te=N+J*p-v;for(let ie=P;ie<j;++ie){let pe=k+ie*f-_;W+=y?M.get(q,te,pe,Z)*D.get(q,J,ie,z):M.get(q,Z,te,pe)*D.get(q,z,J,ie)}}b.set(W,N,k,Z,z)}}}return t.makeTensorInfo(b.shape,b.dtype,b.values)}},KPe={kernelName:rd,backendName:"cpu",kernelFunc:function qPe(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,filter:a}=n,{inputShape:s,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r;Pe([i,a],"conv2dBackpropInput");let h=w.computeStrides(a.shape),d=w.computeStrides(i.shape),p=I.convertConv2DDataFormat(c),f=I.computeConv2DInfo(s,a.shape,o,1,l,u,!1,p),m=new yr(f.inShape,"float32"),g=m.values,y=t.data.get(i.dataId).values,b=t.data.get(a.dataId).values,[_,v,x]=h,{batchSize:S,filterHeight:M,filterWidth:D,inChannels:N,inHeight:F,inWidth:O,outChannels:k,outHeight:P,outWidth:j,strideHeight:Z,strideWidth:z}=f;p=f.dataFormat;let W=M-1-f.padInfo.top,q=D-1-f.padInfo.left,J="channelsLast"===p,te=m.strides[0],ie=J?m.strides[1]:m.strides[2],pe=J?m.strides[2]:1,le=J?1:m.strides[1],he=d[0],_e=J?d[1]:d[2],Be=J?d[2]:1,be=J?1:d[1];for(let Ne=0;Ne<S;++Ne)for(let Fe=0;Fe<N;++Fe)for(let Ge=0;Ge<F;++Ge){let st=Ge-W,Tt=Math.max(0,Math.ceil(st/Z)),kn=Math.min(P,(M+st)/Z);for(let en=0;en<O;++en){let Gt=en-q,qt=Math.max(0,Math.ceil(Gt/z)),yt=Math.min(j,(D+Gt)/z),Tn=0;for(let Cr=Tt;Cr<kn;++Cr){let Ja=Cr*Z-st;for(let ui=qt;ui<yt;++ui){let es=he*Ne+_e*Cr+Be*ui,ia=_*(M-1-Ja)+v*(D-1-(ui*z-Gt))+x*Fe;for(let vn=0;vn<k;++vn)Tn+=y[es+be*vn]*b[ia+vn]}}g[te*Ne+ie*Ge+pe*en+le*Fe]=Tn}}return t.makeTensorInfo(m.shape,m.dtype,m.values)}},YPe={kernelName:id,backendName:"cpu",kernelFunc:function XPe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,filter:a}=n,{strides:s,pad:o,dilations:l}=r;Pe([i,a],"conv3d");let c=I.computeConv3DInfo(i.shape,a.shape,s,l,o),{filterDepth:u,filterHeight:h,filterWidth:d,dilationDepth:p,dilationHeight:f,dilationWidth:m,padInfo:g}=c,y=g.front,b=g.left,_=g.top,v=new yr(c.outShape,i.dtype),x=t.data.get(i.dataId).values,S=t.data.get(a.dataId).values,M=v.values,D=w.computeStrides(i.shape),N=w.computeStrides(a.shape);for(let F=0;F<c.batchSize;++F){let O=F*D[0],k=F*v.strides[0];for(let P=0;P<c.outDepth;++P){let j=k+P*v.strides[1],Z=P*c.strideDepth-y;for(let z=0;z<u;++z){let W=Z+z*p;if(W<0||W>=c.inDepth)continue;let q=z*N[0],J=O+W*D[1];for(let te=0;te<c.outHeight;++te){let ie=j+te*v.strides[2],pe=te*c.strideHeight-_;for(let le=0;le<h;++le){let he=pe+le*f;if(he<0||he>=c.inHeight)continue;let _e=q+le*N[1],Be=J+he*D[2];for(let be=0;be<c.outWidth;++be){let Ne=ie+be*c.outChannels,Fe=be*c.strideWidth-b;for(let Ge=0;Ge<d;++Ge){let st=Fe+Ge*m;if(st<0||st>=c.inWidth)continue;let kn=Be+st*c.inChannels,en=_e+Ge*N[2];for(let Gt=0;Gt<c.inChannels;++Gt){let qt=x[kn+Gt];for(let yt=0;yt<c.outChannels;++yt)M[Ne+yt]+=qt*S[en+yt];en+=c.outChannels}}}}}}}}return t.makeTensorInfo(v.shape,v.dtype,v.values)}},QPe={kernelName:Uf,backendName:"cpu",kernelFunc:function ZPe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,dy:a}=n,{strides:s,pad:o,filterShape:l}=r;Pe([i,a],"conv3dBackpropFilterV2");let c=w.computeStrides(i.shape),u=w.computeStrides(a.shape),h=I.computeConv3DInfo(i.shape,l,s,1,o),d=h.strideDepth,p=h.strideHeight,f=h.strideWidth,m=h.filterDepth,g=h.filterHeight,y=h.filterWidth,b=new yr(h.filterShape,"float32"),_=b.values,[v,x,S,M]=b.strides,D=t.data.get(a.dataId).values,[N,F,O,k]=u,P=t.data.get(i.dataId).values,[j,Z,z,W]=c,q=h.padInfo.front,J=h.padInfo.left,te=h.padInfo.top;for(let ie=0;ie<m;++ie){let pe=Math.max(0,Math.ceil((q-ie)/d)),le=Math.min(h.outDepth,(h.inDepth+q-ie)/d),he=ie*v;for(let _e=0;_e<g;++_e){let Be=Math.max(0,Math.ceil((te-_e)/p)),be=Math.min(h.outHeight,(h.inHeight+te-_e)/p),Ne=_e*x+he;for(let Fe=0;Fe<y;++Fe){let Ge=Math.max(0,Math.ceil((J-Fe)/f)),st=Math.min(h.outWidth,(h.inWidth+J-Fe)/f),Tt=Fe*S+Ne;for(let kn=0;kn<h.inChannels;++kn){let en=kn*M+Tt;for(let Gt=0;Gt<h.outChannels;++Gt){let qt=0;for(let yt=0;yt<h.batchSize;++yt){let Tn=yt*j,Da=yt*N;for(let Cr=pe;Cr<le;++Cr){let Ja=(ie+Cr*d-q)*Z+Tn,ui=Cr*F+Da;for(let ra=Be;ra<be;++ra){let es=(_e+ra*p-te)*z+Ja,ia=ra*O+ui;for(let vn=Ge;vn<st;++vn)qt+=P[(Fe+vn*f-J)*W+es+kn]*D[vn*k+ia+Gt]}}}_[en+Gt]=qt}}}}}return t.makeTensorInfo(b.shape,b.dtype,b.values)}},eLe={kernelName:Hf,backendName:"cpu",kernelFunc:function JPe(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,filter:a}=n,{pad:s,strides:o,inputShape:l}=r;Pe([i],"conv3dBackpropInputV2");let c=w.computeStrides(i.shape),u=w.computeStrides(a.shape),h=I.computeConv3DInfo(l,a.shape,o,1,s),d=new yr(h.inShape,"float32"),p=d.values,[f,m,g,y]=d.strides,b=t.data.get(i.dataId).values,[_,v,x,S]=c,M=t.data.get(a.dataId).values,[D,N,F,O]=u,{batchSize:k,filterDepth:P,filterHeight:j,filterWidth:Z,inChannels:z,inDepth:W,inHeight:q,inWidth:J,outChannels:te,outDepth:ie,outHeight:pe,outWidth:le,strideDepth:he,strideHeight:_e,strideWidth:Be}=h,be=P-1-h.padInfo.front,Ne=j-1-h.padInfo.top,Fe=Z-1-h.padInfo.left;for(let Ge=0;Ge<k;++Ge)for(let st=0;st<z;++st)for(let Tt=0;Tt<W;++Tt){let kn=Tt-be,en=Math.max(0,Math.ceil(kn/he)),Gt=Math.min(ie,(P+kn)/he);for(let qt=0;qt<q;++qt){let yt=qt-Ne,Tn=Math.max(0,Math.ceil(yt/_e)),Da=Math.min(pe,(j+yt)/_e);for(let Cr=0;Cr<J;++Cr){let Ja=Cr-Fe,ui=Math.max(0,Math.ceil(Ja/Be)),ra=Math.min(le,(Z+Ja)/Be),es=0;for(let ia=en;ia<Gt;++ia){let vn=ia*he-kn;for(let aa=Tn;aa<Da;++aa){let Aa=aa*_e-yt;for(let Pl=ui;Pl<ra;++Pl){let Uo=_*Ge+v*ia+x*aa+S*Pl,jv=D*(P-1-vn)+N*(j-1-Aa)+F*(Z-1-(Pl*Be-Ja))+O*st;for(let As=0;As<te;++As)es+=b[Uo+As]*M[jv+As]}}}p[f*Ge+m*Tt+g*qt+y*Cr+st]=es}}}return t.makeTensorInfo(d.shape,d.dtype,d.values)}},tLe=on(ad,e=>Math.cos(e)),nLe={kernelName:ad,backendName:"cpu",kernelFunc:tLe},rLe=on(sd,e=>Math.cosh(e)),iLe={kernelName:sd,backendName:"cpu",kernelFunc:rLe},sLe={kernelName:jf,backendName:"cpu",kernelFunc:function aLe(e){let{inputs:n,backend:t,attrs:r}=e,{image:i,boxes:a,boxInd:s}=n,{cropSize:o,method:l,extrapolationValue:c}=r,[u,h,d,p]=i.shape,f=a.shape[0],[m,g]=o,y=wt([f,m,g,p],"float32"),b=t.data.get(a.dataId).values,_=t.data.get(s.dataId).values,v=t.data.get(i.dataId).values,x=w.computeStrides(i.shape),S=w.computeStrides(y.shape);for(let M=0;M<f;M++){let D=4*M,N=b[D],F=b[D+1],O=b[D+2],k=b[D+3],P=_[M];if(P>=u)continue;let j=m>1?(O-N)*(h-1)/(m-1):0,Z=g>1?(k-F)*(d-1)/(g-1):0;for(let z=0;z<m;z++){let W=m>1?N*(h-1)+z*j:.5*(N+O)*(h-1);if(W<0||W>h-1)for(let q=0;q<g;q++)for(let J=0;J<p;J++)y.values[J+q*S[2]+z*S[1]+M*S[0]]=c;else if("bilinear"===l){let q=Math.floor(W),J=Math.ceil(W),te=W-q;for(let ie=0;ie<g;ie++){let pe=g>1?F*(d-1)+ie*Z:.5*(F+k)*(d-1);if(pe<0||pe>d-1){for(let Be=0;Be<p;Be++)y.values[Be+ie*S[2]+z*S[1]+M*S[0]]=c;continue}let le=Math.floor(pe),he=Math.ceil(pe),_e=pe-le;for(let Be=0;Be<p;Be++){let be=Be+le*x[2]+q*x[1]+P*x[0],Ne=v[be];be=Be+he*x[2]+q*x[1]+P*x[0];let Fe=v[be];be=Be+le*x[2]+J*x[1]+P*x[0];let Ge=v[be];be=Be+he*x[2]+J*x[1]+P*x[0];let st=v[be],Tt=Ne+(Fe-Ne)*_e;be=Be+ie*S[2]+z*S[1]+M*S[0],y.values[be]=Tt+(Ge+(st-Ge)*_e-Tt)*te}}}else for(let q=0;q<g;++q){let J=g>1?F*(d-1)+q*Z:.5*(F+k)*(d-1);if(J<0||J>d-1){for(let pe=0;pe<p;pe++)y.values[pe+q*S[2]+z*S[1]+M*S[0]]=c;continue}let te=Math.round(J),ie=Math.round(W);for(let pe=0;pe<p;pe++)y.values[pe+q*S[2]+z*S[1]+M*S[0]]=v[pe+te*x[2]+ie*x[1]+P*x[0]]}}}return t.makeTensorInfo(y.shape,y.dtype,y.values)}},lLe={kernelName:Wf,backendName:"cpu",kernelFunc:function oLe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,exclusive:s,reverse:o}=r;Pe(i,"cumprod");let l=I.getAxesPermutation([a],i.shape.length),c=i;null!=l&&(c=ea({inputs:{x:i},backend:t,attrs:{perm:l}}));let u=I.getInnerMostAxes(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);let h=za(c.dtype,"int32"),d=w.makeOnesTypedArray(w.sizeFromShape(c.shape),h),p=t.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=o?(y,b)=>y+f-b-1:(y,b)=>y+b;for(let y=0;y<p.length;y+=f)for(let b=0;b<f;b++){let _=m(y,b);if(0===b)d[_]=s?1:p[_];else{let v=m(y,b-1);d[_]=s?p[v]*d[v]:p[_]*d[v]}}let g=t.makeTensorInfo(c.shape,h,d);if(null!=l){let b=ea({inputs:{x:g},backend:t,attrs:{perm:I.getUndoAxesPermutation(l)}});return t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(c),b}return g}},uLe={kernelName:od,backendName:"cpu",kernelFunc:function cLe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,exclusive:s,reverse:o}=r;Pe(i,"cumsum");let l=I.getAxesPermutation([a],i.shape.length),c=i;null!=l&&(c=ea({inputs:{x:i},backend:t,attrs:{perm:l}}));let u=I.getInnerMostAxes(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);let h=za(c.dtype,"int32"),d=w.makeZerosTypedArray(w.sizeFromShape(c.shape),h),p=t.data.get(c.dataId).values,f=c.shape[c.shape.length-1],m=o?(y,b)=>y+f-b-1:(y,b)=>y+b;for(let y=0;y<p.length;y+=f)for(let b=0;b<f;b++){let _=m(y,b);if(0===b)d[_]=s?0:p[_];else{let v=m(y,b-1);d[_]=s?p[v]+d[v]:p[_]+d[v]}}let g=t.makeTensorInfo(c.shape,h,d);if(null!=l){let b=ea({inputs:{x:g},backend:t,attrs:{perm:I.getUndoAxesPermutation(l)}});return t.disposeIntermediateTensorInfo(g),t.disposeIntermediateTensorInfo(c),b}return g}},hLe={kernelName:kb,backendName:"cpu",kernelFunc:function dLe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,weights:a}=n,{size:s,binaryOutput:o}=r;if(1===i.shape.length){let u=MO(t.data.get(i.dataId).values,t.data.get(a.dataId).values,a.dtype,a.shape,s);return t.makeTensorInfo([s],a.dtype,u)}if(2===i.shape.length){let u=kq(t.bufferSync(i),t.bufferSync(a),s,o);return t.makeTensorInfo(u.shape,a.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}},fLe={kernelName:Gf,backendName:"cpu",kernelFunc:function pLe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{blockSize:a,dataFormat:s}=r;w.assert("NHWC"===s,()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`);let o=i.shape[0],l=i.shape[1],c=i.shape[2],u=i.shape[3],h=l*a,d=c*a,p=u/(a*a),f=t.data.get(i.dataId).values,m=new Float32Array(o*h*d*p),g=0;for(let y=0;y<o;++y)for(let b=0;b<h;++b){let _=Math.floor(b/a),v=b%a;for(let x=0;x<d;++x){let S=Math.floor(x/a),D=(v*a+x%a)*p;for(let N=0;N<p;++N)m[g++]=f[N+D+u*(S+c*(_+l*y))]}}return t.makeTensorInfo([o,h,d,p],i.dtype,m)}};function xK(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,filter:a}=n,{strides:s,pad:o,dilations:l,dimRoundingMode:c}=r;Pe([i,a],"depthwiseConv2DNative");let u=w.computeStrides(i.shape),h=w.computeStrides(a.shape),d=l;null==d&&(d=[1,1]),w.assert(I.eitherStridesOrDilationsAreOne(s,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${d}'`);let p=I.computeConv2DInfo(i.shape,a.shape,s,d,o,c,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:b}=p,_=b.left,v=b.top,x=p.outChannels/p.inChannels,S=new yr(p.outShape,i.dtype),M=t.data.get(i.dataId).values,D=t.data.get(a.dataId).values,N=S.values;for(let F=0;F<p.batchSize;++F){let O=F*u[0],k=F*S.strides[0];for(let P=0;P<p.outHeight;++P){let j=k+P*S.strides[1],Z=P*p.strideHeight-v;for(let z=0;z<f;++z){let W=Z+z*g;if(W<0||W>=p.inHeight)continue;let q=z*h[0],J=O+W*u[1];for(let te=0;te<p.outWidth;++te){let ie=j+te*S.strides[2],pe=te*p.strideWidth-_;for(let le=0;le<m;++le){let he=pe+le*y;if(he<0||he>=p.inWidth)continue;let Be=J+he*p.inChannels,be=ie,Ne=q+le*h[1];for(let Fe=0;Fe<p.inChannels;++Fe){let Ge=M[Be+Fe];for(let st=0;st<x;++st)N[be+st]+=Ge*D[Ne+st];be+=x,Ne+=x}}}}}}return t.makeTensorInfo(S.shape,S.dtype,S.values)}var mLe={kernelName:ld,backendName:"cpu",kernelFunc:xK},yLe={kernelName:pw,backendName:"cpu",kernelFunc:function gLe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,dy:a}=n,{strides:s,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r;Pe([i,a],"depthwiseConv2dNativeBackpropFilter");let h=I.computeConv2DInfo(i.shape,u,s,o,l,c,!0),{strideHeight:d,strideWidth:p,filterHeight:f,filterWidth:m}=h,g=new yr(h.filterShape,"float32"),y=h.padInfo.left,b=h.padInfo.top,_=h.outChannels/h.inChannels,v=t.data.get(i.dataId).values,x=new yr(i.shape,i.dtype,v),S=t.data.get(a.dataId).values,M=new yr(a.shape,a.dtype,S);for(let D=0;D<f;++D){let N=Math.max(0,Math.ceil((b-D)/d)),F=Math.min(h.outHeight,(h.inHeight+b-D)/d);for(let O=0;O<m;++O){let k=Math.max(0,Math.ceil((y-O)/p)),P=Math.min(h.outWidth,(h.inWidth+y-O)/p);for(let j=0;j<h.outChannels;++j){let Z=Math.trunc(j/_),z=j%_,W=0;for(let q=0;q<h.batchSize;++q)for(let J=N;J<F;++J){let te=D+J*d-b;for(let ie=k;ie<P;++ie)W+=x.get(q,te,O+ie*p-y,Z)*M.get(q,J,ie,j)}g.set(W,D,O,Z,z)}}}return t.makeTensorInfo(g.shape,g.dtype,g.values)}},_Le={kernelName:fw,backendName:"cpu",kernelFunc:function bLe(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,filter:a}=n,{strides:s,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r;Pe([i,a],"depthwiseConv2DNativeBackpropInput");let h=w.computeStrides(i.shape),d=w.computeStrides(a.shape),p=I.computeConv2DInfo(u,a.shape,s,o,l,c,!0),f=new yr(p.inShape,"float32"),m=f.values,[g,y,b]=f.strides,_=t.data.get(i.dataId).values,[v,x,S]=h,M=t.data.get(a.dataId).values,[D,N,F]=d,{batchSize:O,filterHeight:k,filterWidth:P,inChannels:j,inHeight:Z,inWidth:z,outChannels:W,outHeight:q,outWidth:J,strideHeight:te,strideWidth:ie}=p,pe=k-1-p.padInfo.top,le=P-1-p.padInfo.left,he=W/j;for(let _e=0;_e<O;++_e)for(let Be=0;Be<j;++Be)for(let be=0;be<Z;++be){let Ne=be-pe,Fe=Math.max(0,Math.ceil(Ne/te)),Ge=Math.min(q,(k+Ne)/te);for(let st=0;st<z;++st){let Tt=st-le,kn=Math.max(0,Math.ceil(Tt/ie)),en=Math.min(J,(P+Tt)/ie),Gt=0;for(let qt=Fe;qt<Ge;++qt){let yt=qt*te-Ne;for(let Tn=kn;Tn<en;++Tn){let Cr=v*_e+x*qt+S*Tn,Ja=D*(k-1-yt)+N*(P-1-(Tn*ie-Tt))+F*Be;for(let ui=0;ui<he;++ui)Gt+=_[Cr+(Be*he+ui)]*M[Ja+ui]}}m[g*_e+y*be+b*st+Be]=Gt}}return t.makeTensorInfo(f.shape,f.dtype,f.values)}},xLe={kernelName:Sb,backendName:"cpu",kernelFunc:function vLe(e){let{inputs:n,backend:t}=e,{x:r}=n,i=w.sizeFromShape(r.shape),a=t.data.get(r.dataId).values,s=wt([i,i],r.dtype),o=s.values;for(let c=0;c<a.length;c++)o[c*i+c]=a[c];let l=[...r.shape,...r.shape];return t.makeTensorInfo(l,s.dtype,s.values)}},wLe={kernelName:cd,backendName:"cpu",kernelFunc:({inputs:e,backend:n,attrs:t})=>{let{x:r,filter:i}=e,{strides:a,pad:s,dilations:o}=t,l=n,c=l.data.get(r.dataId).values,u=r.shape.length,h=l.data.get(i.dataId).values,d=i.shape.length,{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:y,outWidth:b,padInfo:_,strideHeight:v,strideWidth:x,filterHeight:S,filterWidth:M,dilationHeight:D,dilationWidth:N,outShape:F}=I.computeDilation2DInfo(r.shape,i.shape,a,s,"NHWC",o),O=w.sizeFromShape(F),k=F.length,P=w.getArrayFromDType(r.dtype,O);for(let j=0;j<p;++j)for(let Z=0;Z<y;++Z){let z=Z*v-_.top;for(let W=0;W<b;++W){let q=W*x-_.left;for(let J=0;J<g;++J){let te=Number.MIN_SAFE_INTEGER;for(let pe=0;pe<S;++pe){let le=z+pe*D;if(le>=0&&le<f)for(let he=0;he<M;++he){let _e=q+he*N;if(_e>=0&&_e<m){let Be=w.locToIndex([j,le,_e,J],u,w.computeStrides(r.shape)),be=w.locToIndex([pe,he,J],d,w.computeStrides(i.shape)),Ne=c[Be]+h[be];Ne>te&&(te=Ne)}}}P[w.locToIndex([j,Z,W,J],k,w.computeStrides(F))]=te}}}return{dataId:l.write(w.toTypedArray(P,r.dtype),F,r.dtype),shape:F,dtype:r.dtype}}},CLe={kernelName:Kf,backendName:"cpu",kernelFunc:({inputs:e,backend:n,attrs:t})=>{let{x:r,filter:i,dy:a}=e,{strides:s,pad:o,dilations:l}=t,c=n,u=w.toNestedArray(r.shape,c.data.get(r.dataId).values),h=w.toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:d,inHeight:p,inWidth:f,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:_,strideWidth:v,filterHeight:x,filterWidth:S,dilationHeight:M,dilationWidth:D,outShape:N}=I.computeDilation2DInfo(r.shape,i.shape,s,o,"NHWC",l);w.assert(a.rank===N.length,()=>`Error in ${Kf}, dy must have the same rank as output ${N.length}, but got ${a.rank}`);let F=w.toNestedArray(N,c.data.get(a.dataId).values),O=w.makeZerosNestedTypedArray(i.shape,i.dtype);for(let k=0;k<d;++k)for(let P=0;P<g;++P){let j=P*_-b.top;for(let Z=0;Z<y;++Z){let z=Z*v-b.left;for(let W=0;W<m;++W){let q=Number.MIN_SAFE_INTEGER,J=0,te=0;for(let ie=0;ie<x;++ie){let pe=j+ie*M;if(pe>=0&&pe<p)for(let le=0;le<S;++le){let he=z+le*D;if(he>=0&&he<f){let _e=u[k][pe][he][W]+h[ie][le][W];_e>q&&(q=_e,J=ie,te=le)}}}O[J][te][W]+=F[k][P][Z][W]}}}return{dataId:c.write(w.toTypedArray(O,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},kLe={kernelName:qf,backendName:"cpu",kernelFunc:({inputs:e,backend:n,attrs:t})=>{let{x:r,filter:i,dy:a}=e,{strides:s,pad:o,dilations:l}=t,c=n,u=w.toNestedArray(r.shape,c.data.get(r.dataId).values),h=w.toNestedArray(i.shape,c.data.get(i.dataId).values),{batchSize:d,inHeight:p,inWidth:f,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:_,strideWidth:v,filterHeight:x,filterWidth:S,dilationHeight:M,dilationWidth:D,outShape:N}=I.computeDilation2DInfo(r.shape,i.shape,s,o,"NHWC",l);w.assert(a.rank===N.length,()=>`Error in ${qf}, dy must have the same rank as output ${N.length}, but got ${a.rank}`);let F=w.toNestedArray(N,c.data.get(a.dataId).values),O=w.makeZerosNestedTypedArray(r.shape,r.dtype);for(let k=0;k<d;++k)for(let P=0;P<g;++P){let j=P*_-b.top;for(let Z=0;Z<y;++Z){let z=Z*v-b.left;for(let W=0;W<m;++W){let q=Number.MIN_SAFE_INTEGER,J=j<0?0:j,te=z<0?0:z;for(let ie=0;ie<x;++ie){let pe=j+ie*M;if(pe>=0&&pe<p)for(let le=0;le<S;++le){let he=z+le*D;if(he>=0&&he<f){let _e=u[k][pe][he][W]+h[ie][le][W];_e>q&&(q=_e,J=pe,te=he)}}}O[k][J][te][W]+=F[k][P][Z][W]}}}return{dataId:c.write(w.toTypedArray(O,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},ILe={kernelName:mw,backendName:"cpu",kernelFunc:function SLe(e){let{inputs:n,backend:t,attrs:r}=e,{image:i}=n,{canvas:a,options:s}=r,{contextOptions:o,imageOptions:l}=s||{},c=l?.alpha||1,u=o?.contextType||"2d";if("2d"!==u)throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);let h=a.getContext(u,o?.contextAttributes||{});if(null==h)throw new Error(`Could not get the context with ${u} type.`);let[d,p]=i.shape.slice(0,2),f=2===i.shape.length?1:i.shape[2],m=t.data.get(i.dataId).values,g="float32"===i.dtype?255:1,y=new Uint8ClampedArray(p*d*4);for(let _=0;_<d*p;++_){let v=[0,0,0,255*c];for(let S=0;S<f;S++){let M=m[_*f+S];if("float32"===i.dtype){if(M<0||M>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${M}.`)}else if("int32"===i.dtype&&(M<0||M>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${M}.`);1===f?(v[0]=M*g,v[1]=M*g,v[2]=M*g):v[S]=M*g}let x=4*_;y[x+0]=Math.round(v[0]),y[x+1]=Math.round(v[1]),y[x+2]=Math.round(v[2]),y[x+3]=Math.round(v[3])}a.width=p,a.height=d;let b=new ImageData(y,p,d);return h.putImageData(b,0,0),i}};function P_(e){let o,{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,keepDims:s}=r;Pe(i,"sum"),o="bool"===i.dtype?Bc({inputs:{x:i},backend:t,attrs:{dtype:"int32"}}):No({inputs:{x:i},backend:t});let l=o.shape.length,c=w.parseAxisParam(a,o.shape),u=I.getAxesPermutation(c,l),h=c,d=o;null!=u&&(d=ea({inputs:{x:o},backend:t,attrs:{perm:u}}),h=I.getInnerMostAxes(h.length,l)),I.assertAxesAreInnerMostDims("sum",h,d.shape.length);let[p,f]=I.computeOutAndReduceShapes(d.shape,h),g=aC(t,p,I.upcastType(d.dtype,"int32")),y=w.sizeFromShape(f),b=t.data.get(g.dataId).values,_=t.data.get(d.dataId).values;for(let v=0;v<b.length;++v){let x=v*y,S=0;for(let M=0;M<y;++M)S+=_[x+M];b[v]=S}if(s){let x=g;g=An({inputs:{x:g},backend:t,attrs:{shape:I.expandShapeToKeepDim(g.shape,c)}}),t.disposeIntermediateTensorInfo(x)}return t.disposeIntermediateTensorInfo(o),null!=u&&t.disposeIntermediateTensorInfo(d),g}var MLe={kernelName:nh,backendName:"cpu",kernelFunc:P_},DLe={kernelName:gw,backendName:"cpu",kernelFunc:function ELe(e){let{inputs:n,backend:t,attrs:r}=e,{equation:i}=r,a=n,{allDims:s,summedDims:o,idDims:l}=I.decodeEinsumEquation(i,a.length);I.checkEinsumDimSizes(s.length,l,a);let{path:c,steps:u}=I.getEinsumComputePath(o,l),h=u.length,d=null,p=s.length,f=[];for(let m=0;m<h;++m){for(let g of u[m]){let _,{permutationIndices:y,expandDims:b}=I.getEinsumPermutation(p,l[g]);I.isIdentityPermutation(y)?_=a[g]:(_=ea({inputs:{x:a[g]},backend:t,attrs:{perm:y}}),f.push(_));let v=_.shape.slice();for(let x=0;x<b.length;++x)v.splice(b[x],0,1);w.arraysEqual(_.shape,v)||(_=An({inputs:{x:_},backend:t,attrs:{shape:v}}),f.push(_)),null===d?d=_:(d=sC({inputs:{a:_,b:d},backend:t}),f.push(d))}m<h-1&&(c[m]>=0&&(d=P_({inputs:{x:d},backend:t,attrs:{axis:c[m]-(s.length-p),keepDims:!1}}),f.push(d)),p--)}for(let m of f)m!==d&&t.disposeIntermediateTensorInfo(m);return d}},TLe={kernelName:Xf,backendName:"cpu",kernelFunc:function ALe(e){let{inputs:n,backend:t}=e,{dy:r,y:i}=n;Pe([r,i],"eluGrad");let a=new Float32Array(w.sizeFromShape(i.shape)),s=t.data.get(i.dataId).values,o=t.data.get(r.dataId).values;for(let l=0;l<s.length;++l){let c=s[l];a[l]=c>=0?o[l]:o[l]*(c+1)}return t.makeTensorInfo(i.shape,"float32",a)}},NLe=I.ERF_P,OLe=I.ERF_A1,FLe=I.ERF_A2,RLe=I.ERF_A3,PLe=I.ERF_A4,LLe=I.ERF_A5,$Le=on(hd,e=>{let n=Math.sign(e),t=Math.abs(e),r=1/(1+NLe*t);return n*(1-((((LLe*r+PLe)*r+RLe)*r+FLe)*r+OLe)*r*Math.exp(-t*t))}),BLe={kernelName:hd,backendName:"cpu",kernelFunc:$Le};function cC(e){let{inputs:n,backend:t,attrs:r}=e,{input:i}=n,{dim:a}=r,s=i.shape.length,o=i.shape.slice(),l=a;return a<0&&(w.assert(-(s+1)<=a,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+a+1),o.splice(l,0,1),An({inputs:{x:i},backend:t,attrs:{shape:o}})}var VLe={kernelName:Zf,backendName:"cpu",kernelFunc:cC},zLe=or((e,n)=>e/n),BO=Rr(ud,zLe),VO={kernelName:ud,backendName:"cpu",kernelFunc:BO};function wK(e,n,t){let r=e.shape,i=r[0],a=r[1],s=t.data.get(e.dataId),o=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,c=[i,a],u=w.sizeFromShape(c),h=w.getTypedArrayFromDType("float32",u),d=w.getTypedArrayFromDType("float32",u);for(let g=0;g<i;g++){let y=Uh({inputs:{x:o},backend:t,attrs:{begin:[g,0],size:[1,a]}}),b=Uh({inputs:{x:l},backend:t,attrs:{begin:[g,0],size:[1,a]}}),_=Ia({inputs:{real:y,imag:b},backend:t}),{real:v,imag:x}=ULe(_,n,t),S=I.mergeRealAndImagArrays(v,x);for(let M=0;M<a;M++){let D=I.getComplexWithIndex(S,M);h[g*a+M]=D.real,d[g*a+M]=D.imag}t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(b),t.disposeIntermediateTensorInfo(_)}let p=t.makeTensorInfo(c,"float32",h),f=t.makeTensorInfo(c,"float32",d),m=Ia({inputs:{real:p,imag:f},backend:t});return t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(f),m}function ULe(e,n,t){let r=w.sizeFromShape(e.shape),i=t.data.get(e.dataId),a=t.data.get(i.complexTensorInfos.real.dataId).values,s=t.data.get(i.complexTensorInfos.imag.dataId).values;if(function HLe(e){return 0==(e&e-1)}(r)){let o=zO(a,s,r,n,t),l=[e.shape[0],e.shape[1]];if(n){let c=t.makeTensorInfo(l,"float32",o.real),u=t.makeTensorInfo(l,"float32",o.imag),h=t.makeTensorInfo([],"float32",w.createScalarValue(r,"float32")),d=No({inputs:{x:h},backend:t}),p=VO.kernelFunc({inputs:{a:c,b:h},backend:t}),f=VO.kernelFunc({inputs:{a:u,b:d},backend:t}),m=t.data.get(p.dataId).values,g=t.data.get(f.dataId).values;return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(f),{real:m,imag:g}}return o}{let l=function WLe(e,n,t){let r=new Float32Array(2*n);for(let i=0;i<n;i++){let a=0,s=0;for(let o=0;o<n;o++){let l=I.exponent(i*o,n,t),c=I.getComplexWithIndex(e,o);a+=c.real*l.real-c.imag*l.imag,s+=c.real*l.imag+c.imag*l.real}t&&(a/=n,s/=n),I.assignToTypedArray(r,a,s,i)}return r}(I.mergeRealAndImagArrays(a,s),r,n);return I.splitRealAndImagArrays(l)}}function zO(e,n,t,r,i){if(1===t)return{real:e,imag:n};let a=I.mergeRealAndImagArrays(e,n),s=t/2,o=I.complexWithEvenIndex(a),l=o.real,c=o.imag,u=[l.length],h=i.makeTensorInfo(u,"float32",l),d=i.makeTensorInfo(u,"float32",c),p=Ia({inputs:{real:h,imag:d},backend:i}),f=I.complexWithOddIndex(a),m=f.real,g=f.imag,y=[m.length],b=i.makeTensorInfo(y,"float32",m),_=i.makeTensorInfo(y,"float32",g),v=Ia({inputs:{real:b,imag:_},backend:i}),x=zO(l,c,s,r,i),S=x.real,M=x.imag,D=[S.length],N=i.makeTensorInfo(D,"float32",S),F=i.makeTensorInfo(D,"float32",M),O=Ia({inputs:{real:N,imag:F},backend:i}),k=zO(m,g,s,r,i),P=k.real,j=k.imag,Z=[P.length],z=i.makeTensorInfo(Z,"float32",P),W=i.makeTensorInfo(Z,"float32",j),q=Ia({inputs:{real:z,imag:W},backend:i}),J=I.exponents(t,r),te=[J.real.length],ie=i.makeTensorInfo(te,"float32",J.real),pe=i.makeTensorInfo(te,"float32",J.imag),le=Ia({inputs:{real:ie,imag:pe},backend:i}),he=sC({inputs:{a:le,b:q},backend:i}),_e=dg({inputs:{a:O,b:he},backend:i}),Be=PO({inputs:{a:O,b:he},backend:i}),be=Vh({inputs:{input:_e},backend:i}),Ne=Vh({inputs:{input:Be},backend:i}),Fe=hg({inputs:{input:_e},backend:i}),Ge=hg({inputs:{input:Be},backend:i}),st=pg({inputs:[be,Ne],backend:i,attrs:{axis:0}}),Tt=pg({inputs:[Fe,Ge],backend:i,attrs:{axis:0}}),kn=i.data.get(st.dataId).values,en=i.data.get(Tt.dataId).values;return i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(b),i.disposeIntermediateTensorInfo(_),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(N),i.disposeIntermediateTensorInfo(F),i.disposeIntermediateTensorInfo(O),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(ie),i.disposeIntermediateTensorInfo(pe),i.disposeIntermediateTensorInfo(le),i.disposeIntermediateTensorInfo(he),i.disposeIntermediateTensorInfo(_e),i.disposeIntermediateTensorInfo(Be),i.disposeIntermediateTensorInfo(be),i.disposeIntermediateTensorInfo(Fe),i.disposeIntermediateTensorInfo(Ne),i.disposeIntermediateTensorInfo(Ge),i.disposeIntermediateTensorInfo(st),i.disposeIntermediateTensorInfo(Tt),{real:kn,imag:en}}var GLe={kernelName:yw,backendName:"cpu",kernelFunc:function jLe(e){let{inputs:n,backend:t}=e,{input:r}=n,i=w.sizeFromShape(r.shape),a=r.shape[r.shape.length-1],o=An({inputs:{x:r},backend:t,attrs:{shape:[i/a,a]}}),l=wK(o,!1,t),c=An({inputs:{x:l},backend:t,attrs:{shape:r.shape}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(l),c}};function UO(e){let{backend:n,attrs:t}=e,{shape:r,value:i,dtype:a}=t,s=a||w.inferDtype(i),o=w.getArrayFromDType(s,w.sizeFromShape(r));return function KLe(e,n,t){e.fill(n)}(o,i),n.makeTensorInfo(r,s,o)}var qLe={kernelName:Ib,backendName:"cpu",kernelFunc:UO},XLe={kernelName:Qf,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{let{image:r}=e,i=t,a=w.getTypedArrayFromDType(r.dtype,w.sizeFromShape(r.shape)),[s,o,l,c]=r.shape,u=i.data.get(r.dataId).values;for(let h=0;h<s;h++){let d=h*l*o*c;for(let p=0;p<o;p++){let f=p*(l*c);for(let m=0;m<l;m++){let g=m*c;for(let y=0;y<c;y++){let b=Math.round(l-m-1),_=d+f+g+y,v=u[_];b>=0&&b<l&&(v=u[d+f+b*c+y]),a[_]=v}}}}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},ZLe={kernelName:ch,backendName:"cpu",kernelFunc:function YLe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=n,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,m=vK({inputs:{x:i,filter:a},backend:t,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d}});if(s){let g=m;if("NCHW"===u&&1===s.shape.length&&1!==s.shape[0]){let y=An({inputs:{x:s},backend:t,attrs:{shape:[s.shape[0],1,1]}});m=dg({inputs:{a:m,b:y},backend:t}),t.disposeIntermediateTensorInfo(y)}else m=dg({inputs:{a:m,b:s},backend:t});t.disposeIntermediateTensorInfo(g)}if(p){let g=m;if("NCHW"===u&&"prelu"===p&&1===o.shape.length&&1!==o.shape[0]){let y=An({inputs:{x:o},backend:t,attrs:{shape:[o.shape[0],1,1]}});m=lC(t,m,p,y,f),t.disposeIntermediateTensorInfo(y)}else m=lC(t,m,p,o,f);t.disposeIntermediateTensorInfo(g)}return m}},JLe={kernelName:uh,backendName:"cpu",kernelFunc:function QLe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=n,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,m=xK({inputs:{x:i,filter:a},backend:t,attrs:{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d}});if(s){let g=m;m=dg({inputs:{a:m,b:s},backend:t}),t.disposeIntermediateTensorInfo(g)}if(p){let g=m;m=lC(t,m,p,o,f),t.disposeIntermediateTensorInfo(g)}return m}},t3e={kernelName:em,backendName:"cpu",kernelFunc:function e3e(e){let{inputs:n,backend:t}=e,{params:r,indices:i}=n,a=w.sizeFromShape(r.shape),s=i.shape,o=s[s.length-1],[l,c,u,h]=I.prepareAndValidate(r,i);if(0===c)return t.makeTensorInfo(l,r.dtype,[]);let f=Fq(t.data.get(i.dataId).values,t.bufferSync(r),r.dtype,c,o,u,h,r.shape,a);return t.makeTensorInfo(l,r.dtype,f.values)}},r3e={kernelName:Jf,backendName:"cpu",kernelFunc:function n3e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,indices:a}=n,{axis:s,batchDims:o}=r;Pe([i,a],"gatherV2");let l=w.parseAxisParam(s,i.shape)[0],c=t.data.get(a.dataId).values,u=i.shape[l];for(let v=0;v<c.length;++v){let x=c[v];w.assert(x<=u-1&&x>=0,()=>`GatherV2: the index value ${x} is not in [0, ${u-1}]`)}let h=o;null==o&&(h=0);let d=w.sizeFromShape(a.shape),p=I.segment_util.collectGatherOpShapeInfo(i,a,l,h),f=An({inputs:{x:i},backend:t,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=An({inputs:{x:a},backend:t,attrs:{shape:[p.batchSize,d/p.batchSize]}}),g=[p.batchSize,p.outerSize,d/p.batchSize,p.sliceSize],y=t.bufferSync(m),_=Rq(t.bufferSync(f),y,g);return t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(m),t.makeTensorInfo(p.outputShape,_.dtype,_.values)}},a3e={kernelName:bw,backendName:"cpu",kernelFunc:function i3e(e){let{inputs:n,backend:t}=e,{input:r}=n,i=w.sizeFromShape(r.shape),a=r.shape[r.shape.length-1],o=An({inputs:{x:r},backend:t,attrs:{shape:[i/a,a]}}),l=wK(o,!0,t),c=An({inputs:{x:l},backend:t,attrs:{shape:r.shape}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(l),c}},s3e=on(vd,e=>Number.isFinite(e)?1:0,"bool"),o3e={kernelName:vd,backendName:"cpu",kernelFunc:s3e},l3e=on(xd,e=>Math.abs(e)===1/0?1:0,"bool"),c3e={kernelName:xd,backendName:"cpu",kernelFunc:l3e},u3e=on(wd,e=>Number.isNaN(e)?1:0,"bool"),d3e={kernelName:wd,backendName:"cpu",kernelFunc:u3e},p3e={kernelName:im,backendName:"cpu",kernelFunc:function h3e(e){let{backend:n,attrs:t}=e,{start:r,stop:i,num:a}=t,s=Vq(r,i,a);return n.makeTensorInfo([s.length],"float32",s)}},f3e=on(Sd,e=>Math.log1p(e)),m3e={kernelName:Sd,backendName:"cpu",kernelFunc:f3e},g3e=or((e,n)=>e&&n),y3e=Rr(am,g3e,null,"bool"),b3e={kernelName:am,backendName:"cpu",kernelFunc:y3e},_3e=on(sm,e=>e?0:1,"bool"),v3e={kernelName:sm,backendName:"cpu",kernelFunc:_3e},x3e=or((e,n)=>e||n),w3e=Rr(om,x3e,null,"bool"),C3e={kernelName:om,backendName:"cpu",kernelFunc:w3e},S3e={kernelName:Id,backendName:"cpu",kernelFunc:function k3e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{depthRadius:a,bias:s,alpha:o,beta:l}=r;Pe(i,"LRN");let c=i.shape[3],u=c-1,h=t.data.get(i.dataId).values,d=w.sizeFromShape(i.shape),p=new Float32Array(d);function f(m){let g=m%c,y=m-g+Math.max(0,g-a),b=m-g+Math.min(g+a,u),_=0;for(;y<=b;y++){let v=h[y];_+=v*v}return _}for(let m=0;m<d;m++){let g=f(m),y=h[m]*Math.pow(s+o*g,-l);p[m]=y}return t.makeTensorInfo(i.shape,i.dtype,p)}},M3e={kernelName:lm,backendName:"cpu",kernelFunc:function I3e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,y:a,dy:s}=n,{depthRadius:o,bias:l,alpha:c,beta:u}=r;Pe(s,"LRNGrad");let h=w.sizeFromShape(s.shape),d=s.shape[3],p=t.data.get(s.dataId).values,f=t.data.get(i.dataId).values,m=t.data.get(a.dataId).values,g=new Float32Array(h),y=h;for(let b=0;b<y;b++){let _=b%d,v=b-_+Math.max(0,_-o),x=b-_+Math.min(d,_+o+1),S=0;for(let M=v;M<x;M++)S+=Math.pow(f[M],2);S=c*S+l;for(let M=v;M<x;M++){let D=-2*c*u*f[M]*m[b]/S;b===M&&(D+=Math.pow(S,-u)),D*=p[b],g[M]+=D}}return t.makeTensorInfo(s.shape,i.dtype,g)}};function CK(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{reductionIndices:a,keepDims:s}=r,o=t,l=i.shape,c=l.length,u=w.parseAxisParam(a,l),h=u,d=I.getAxesPermutation(h,c),p=o.data.get(i.dataId).values;if(null!=d){let v=new Array(c);for(let x=0;x<v.length;x++)v[x]=l[d[x]];p=AO(p,l,i.dtype,d,v),h=I.getInnerMostAxes(h.length,c),l=v}Pe(i,"max"),I.assertAxesAreInnerMostDims("max",h,c);let[f,m]=I.computeOutAndReduceShapes(l,h),y=Uq(p,w.sizeFromShape(m),f,i.dtype),b=o.write(y,f,i.dtype),_=f;return s&&(_=I.expandShapeToKeepDim(f,u)),{dataId:b,shape:_,dtype:i.dtype}}var E3e={kernelName:Md,backendName:"cpu",kernelFunc:CK},A3e={kernelName:Dd,backendName:"cpu",kernelFunc:function D3e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n;Pe(i,"maxPool");let{filterSize:a,strides:s,pad:o,dimRoundingMode:l}=r;w.assert(I.eitherStridesOrDilationsAreOne(s,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`);let h,u=I.computePool2DInfo(i.shape,a,s,1,o,l);if(1===u.filterWidth&&1===u.filterHeight&&w.arraysEqual(u.inShape,u.outShape))h=No({inputs:{x:i},backend:t});else{let d=t.data.get(i.dataId).values,p=w.computeStrides(i.shape),f=$O(d,0,i.dtype,p,u,"max");h=t.makeTensorInfo(u.outShape,i.dtype,f.values)}return h}},N3e={kernelName:cm,backendName:"cpu",kernelFunc:function T3e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{filterSize:a,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r;Pe(i,"maxPool3d");let u=I.computePool3DInfo(i.shape,a,s,1,o,l,c),d=_K(t.data.get(i.dataId).values,0,i.dtype,w.computeStrides(i.shape),u,"max");return t.makeTensorInfo(d.shape,"float32",d.values)}},F3e={kernelName:Eb,backendName:"cpu",kernelFunc:function O3e(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,input:a}=n,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r;Pe([i,a],"maxPool3DGrad");let u=I.computePool3DInfo(a.shape,s,o,1,l,c),d=function xPe(e,n){let t=wt(n.outShape,"int32"),r=n.strideDepth,i=n.strideHeight,a=n.strideWidth,s=n.dilationDepth,o=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterDepth,u=n.effectiveFilterHeight,h=n.effectiveFilterWidth,d=n.padInfo.front,p=n.padInfo.top,f=n.padInfo.left;for(let m=0;m<n.batchSize;++m)for(let g=0;g<n.inChannels;++g)for(let y=0;y<n.outDepth;++y){let b=y*r-d,_=b;for(;_<0;)_+=s;let v=Math.min(n.inDepth,c+b);for(let x=0;x<n.outHeight;++x){let S=x*i-p,M=S;for(;M<0;)M+=o;let D=Math.min(n.inHeight,u+S);for(let N=0;N<n.outWidth;++N){let F=N*a-f,O=F;for(;O<0;)O+=l;let k=Math.min(n.inWidth,h+F),P=Number.NEGATIVE_INFINITY,j=-1;for(let Z=_;Z<v;Z+=s){let z=Z-b;for(let W=M;W<D;W+=o){let q=W-S;for(let J=O;J<k;J+=l){let te=J-F,ie=e.get(m,Z,W,J,g);ie>=P&&(P=ie,j=z*u*h+q*u+te)}}}t.set(j,m,y,x,N,g)}}}return t}(t.bufferSync(a),u),p=u.strideDepth,f=u.strideHeight,m=u.strideWidth,g=u.dilationDepth,y=u.dilationHeight,b=u.dilationWidth,_=u.effectiveFilterDepth,v=u.effectiveFilterHeight,x=u.effectiveFilterWidth,S=_-1-u.padInfo.front,M=x-1-u.padInfo.left,D=v-1-u.padInfo.top,N=wt(a.shape,"float32"),F=t.bufferSync(i);for(let O=0;O<u.batchSize;++O)for(let k=0;k<u.inChannels;++k)for(let P=0;P<u.inDepth;++P)for(let j=0;j<u.inHeight;++j)for(let Z=0;Z<u.inWidth;++Z){let z=P-S,W=j-D,q=Z-M,J=0;for(let te=0;te<_;te+=g){let ie=(z+te)/p;if(!(ie<0||ie>=u.outDepth||Math.floor(ie)!==ie))for(let pe=0;pe<v;pe+=y){let le=(W+pe)/f;if(!(le<0||le>=u.outHeight||Math.floor(le)!==le))for(let he=0;he<x;he+=b){let _e=(q+he)/m;if(_e<0||_e>=u.outWidth||Math.floor(_e)!==_e)continue;let Ne=_*v*x-1-d.get(O,ie,le,_e,k)===te*v*x+pe*x+he?1:0;0!==Ne&&(J+=F.get(O,ie,le,_e,k)*Ne)}}}N.set(J,O,P,j,Z,k)}return t.makeTensorInfo(N.shape,N.dtype,N.values)}},P3e={kernelName:Mb,backendName:"cpu",kernelFunc:function R3e(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,input:a,output:s}=n,o=a;Pe([a,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=r,d=I.computePool2DInfo(o.shape,l,c,1,u,h),p=t.data.get(o.dataId).values,f=wt(d.outShape,o.dtype,bK(p,o.shape,o.dtype,d).values),m=d.strideHeight,g=d.strideWidth,y=d.dilationHeight,b=d.dilationWidth,_=d.effectiveFilterHeight,v=d.effectiveFilterWidth,x=v-1-d.padInfo.left,S=_-1-d.padInfo.top,M=wt(o.shape,"float32"),D=t.data.get(i.dataId).values,N=wt(i.shape,"float32",D);for(let F=0;F<d.batchSize;++F)for(let O=0;O<d.inChannels;++O)for(let k=0;k<d.inHeight;++k)for(let P=0;P<d.inWidth;++P){let j=k-S,Z=P-x,z=0;for(let W=0;W<_;W+=y){let q=(j+W)/m;if(!(q<0||q>=d.outHeight||Math.floor(q)!==q))for(let J=0;J<v;J+=b){let te=(Z+J)/g;if(te<0||te>=d.outWidth||Math.floor(te)!==te)continue;let le=_*v-1-f.get(F,q,te,O)===W*v+J?1:0;0!==le&&(z+=N.get(F,q,te,O)*le)}}M.set(z,F,k,P,O)}return t.makeTensorInfo(M.shape,M.dtype,M.values)}},$3e={kernelName:Db,backendName:"cpu",kernelFunc:({inputs:e,attrs:n,backend:t})=>{let{x:r}=e,{filterSize:i,strides:a,pad:s,includeBatchInIndex:o}=n,l=t;Pe(r,"MaxPoolWithArgmax");let c=l.data.get(r.dataId).values,u=I.computePool2DInfo(r.shape,i,a,[1,1],s),[h,d]=function L3e(e,n,t,r,i){let s=$O(e,0,t,w.computeStrides(n),i,"max"),o=bK(e,n,t,i,!0,r);return[s.values,o.values]}(c,r.shape,r.dtype,o,u),p=l.write(h,u.outShape,r.dtype),f=l.write(d,u.outShape,r.dtype);return[{dataId:p,shape:u.outShape,dtype:r.dtype},{dataId:f,shape:u.outShape,dtype:"int32"}]}},V3e={kernelName:Ad,backendName:"cpu",kernelFunc:function B3e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,keepDims:s}=r,o=w.parseAxisParam(a,i.shape),l=I.computeOutAndReduceShapes(i.shape,o)[1],c=w.sizeFromShape(l),u=[],h=t.makeTensorInfo([],"float32",new Float32Array([c]));u.push(h);let d=Bc({inputs:{x:i},backend:t,attrs:{dtype:"float32"}});u.push(d);let p=BO({inputs:{a:d,b:h},backend:t});u.push(p);let f=P_({inputs:{x:p},backend:t,attrs:{axis:a,keepDims:s}});return u.forEach(m=>t.disposeIntermediateTensorInfo(m)),f}},U3e={kernelName:Td,backendName:"cpu",kernelFunc:function z3e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,keepDims:s}=r;Pe(i,"min");let o=w.parseAxisParam(a,i.shape),l=o,c=I.getAxesPermutation(l,i.shape.length),u=i;null!=c&&(u=ea({inputs:{x:i},backend:t,attrs:{perm:c}}),l=I.getInnerMostAxes(l.length,i.shape.length)),I.assertAxesAreInnerMostDims("min",l,u.shape.length);let[h,d]=I.computeOutAndReduceShapes(u.shape,l),p=w.sizeFromShape(d),f=w.makeZerosTypedArray(w.sizeFromShape(h),u.dtype),m=t.data.get(u.dataId).values;for(let y=0;y<f.length;++y){let b=y*p,_=m[b];for(let v=0;v<p;++v){let x=m[b+v];(Number.isNaN(x)||x<_)&&(_=x)}f[y]=_}null!=c&&t.disposeIntermediateTensorInfo(u);let g=t.makeTensorInfo(h,u.dtype,f);if(s){let b=An({inputs:{x:g},backend:t,attrs:{shape:I.expandShapeToKeepDim(h,o)}});return t.disposeIntermediateTensorInfo(g),b}return g}},W3e={kernelName:Od,backendName:"cpu",kernelFunc:function H3e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{paddings:a,mode:s}=r;Pe(i,"mirrorPad");let o=a.map((b,_)=>b[0]+i.shape[_]+b[1]),l=a.map(b=>b[0]),c=a.map((b,_)=>b[0]+i.shape[_]),u="reflect"===s?0:1,h=t.data.get(i.dataId).values,d=i.shape.length,p=w.computeStrides(i.shape),f=w.sizeFromShape(o),m=o.length,g=w.computeStrides(o),y=w.getTypedArrayFromDType(i.dtype,f);for(let b=0;b<f;b++){let _=w.indexToLoc(b,m,g);for(let x=0;x<m;x++)_[x]<l[x]?_[x]=2*l[x]-_[x]-u:_[x]>=c[x]&&(_[x]=2*(c[x]-1)-_[x]+u);_=_.map((x,S)=>x-l[S]);let v=w.locToIndex(_,d,p);y[b]=h[v]}return{dataId:t.write(y,o,i.dtype),shape:o,dtype:i.dtype}}},j3e=or((e,n)=>{let t=e%n;return e<0&&n<0||e>=0&&n>=0?t:(t+n)%n}),G3e=Rr(Fd,j3e),q3e={kernelName:Fd,backendName:"cpu",kernelFunc:G3e},K3e=cc(iw());function kK(e){let{inputs:n,backend:t,attrs:r}=e,{logits:i}=n,{dim:a}=r,s=i.shape.length,o=a;if(-1===o&&(o=s-1),o!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${o}`);let l=w.parseAxisParam([o],i.shape),c=CK({inputs:{x:i},backend:t,attrs:{reductionIndices:l,keepDims:!1}}),u=I.expandShapeToKeepDim(c.shape,l),h=An({inputs:{x:c},backend:t,attrs:{shape:u}}),d=PO({inputs:{a:i,b:h},backend:t}),p=Aq({inputs:{x:d},backend:t}),f=P_({inputs:{x:p},backend:t,attrs:{axis:l,keepDims:!1}}),m=An({inputs:{x:f},backend:t,attrs:{shape:u}}),g=BO({inputs:{a:p,b:m},backend:t});return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(m),g}var X3e={kernelName:rh,backendName:"cpu",kernelFunc:kK},Z3e={kernelName:um,backendName:"cpu",kernelFunc:function Y3e(e){let{inputs:n,backend:t,attrs:r}=e,{logits:i}=n,{numSamples:a,seed:s,normalized:o}=r;Pe(i,"multinomial");let l=o?i:kK({inputs:{logits:i},backend:t,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],h=t.data.get(l.dataId).values,d=[c,a],p=w.makeZerosTypedArray(w.sizeFromShape(d),"int32");for(let f=0;f<c;++f){let m=f*u,g=new Float32Array(u-1);g[0]=h[m];for(let _=1;_<g.length;++_)g[_]=g[_-1]+h[m+_];let y=K3e.alea(s.toString()),b=f*a;for(let _=0;_<a;++_){let v=y();p[b+_]=g.length;for(let x=0;x<g.length;x++)if(v<g[x]){p[b+_]=x;break}}}return o||t.disposeIntermediateTensorInfo(l),t.makeTensorInfo(d,"int32",p)}},Q3e=Mo.nonMaxSuppressionV3Impl,e$e={kernelName:pm,backendName:"cpu",kernelFunc:function J3e(e){let{inputs:n,backend:t,attrs:r}=e,{boxes:i,scores:a}=n,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r;Pe(i,"NonMaxSuppression");let c=t.data.get(i.dataId).values,u=t.data.get(a.dataId).values,{selectedIndices:h}=Q3e(c,u,s,o,l);return t.makeTensorInfo([h.length],"int32",new Int32Array(h))}},t$e=Mo.nonMaxSuppressionV4Impl,r$e={kernelName:fm,backendName:"cpu",kernelFunc:function n$e(e){let{inputs:n,backend:t,attrs:r}=e,{boxes:i,scores:a}=n,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;Pe(i,"NonMaxSuppressionPadded");let u=t.data.get(i.dataId).values,h=t.data.get(a.dataId).values,{selectedIndices:d,validOutputs:p}=t$e(u,h,s,o,l,c);return[t.makeTensorInfo([d.length],"int32",new Int32Array(d)),t.makeTensorInfo([],"int32",new Int32Array([p]))]}},i$e=Mo.nonMaxSuppressionV5Impl,s$e={kernelName:mm,backendName:"cpu",kernelFunc:function a$e(e){let{inputs:n,backend:t,attrs:r}=e,{boxes:i,scores:a}=n,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;Pe(i,"NonMaxSuppressionWithScore");let u=t.data.get(i.dataId).values,h=t.data.get(a.dataId).values,d=s,p=o,f=l,m=c,{selectedIndices:g,selectedScores:y}=i$e(u,h,d,p,f,m);return[t.makeTensorInfo([g.length],"int32",new Int32Array(g)),t.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},l$e={kernelName:Pd,backendName:"cpu",kernelFunc:function o$e(e){let{inputs:n,backend:t,attrs:r}=e,{indices:i}=n,{dtype:a,depth:s,onValue:o,offValue:l}=r;Pe(i,"oneHot");let c=w.sizeFromShape(i.shape),u=new Float32Array(c*s);u.fill(l);let h=t.data.get(i.dataId).values;for(let d=0;d<c;++d)h[d]>=0&&h[d]<s&&(u[d*s+h[d]]=o);return t.makeTensorInfo([...i.shape,s],a,u)}};function uC(e){let{inputs:n,backend:t}=e,{x:r}=n;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){let i=Vh({inputs:{input:r},backend:t}),a=uC({inputs:{x:i},backend:t}),s=hg({inputs:{input:r},backend:t}),o=uC({inputs:{x:s},backend:t}),l=Ia({inputs:{real:a,imag:o},backend:t});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(o),l}return UO({backend:t,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var c$e={kernelName:Fm,backendName:"cpu",kernelFunc:uC},u$e={kernelName:gm,backendName:"cpu",kernelFunc:function SK(e){let{inputs:n,backend:t}=e,{x:r}=n;if("string"===r.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===r.dtype){let i=Vh({inputs:{input:r},backend:t}),a=SK({inputs:{x:i},backend:t}),s=hg({inputs:{input:r},backend:t}),o=uC({inputs:{x:s},backend:t}),l=Ia({inputs:{real:a,imag:o},backend:t});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(o),l}return UO({backend:t,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}};function IK(e){let{inputs:n,backend:t,attrs:r}=e,{axis:i}=r;if(1===n.length)return cC({inputs:{input:n[0]},backend:t,attrs:{dim:i}});let a=n[0].shape,s=n[0].dtype;n.forEach(u=>{w.assertShapesMatch(a,u.shape,"All tensors passed to stack must have matching shapes"),w.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],c=pg({inputs:n.map(u=>{let h=cC({inputs:{input:u},backend:t,attrs:{dim:i}});return o.push(h),h}),backend:t,attrs:{axis:i}});return o.forEach(u=>t.disposeIntermediateTensorInfo(u)),c}var d$e={kernelName:ym,backendName:"cpu",kernelFunc:IK},MK={kernelName:Ld,backendName:"cpu",kernelFunc:function h$e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{paddings:a,constantValue:s}=r;Pe(i,"pad");let o=a.map((y,b)=>y[0]+i.shape[b]+y[1]),l=a.map(y=>y[0]),c=t.data.get(i.dataId).values,u=w.sizeFromShape(i.shape),h=i.shape.length,d=w.computeStrides(i.shape),p=w.sizeFromShape(o),f=o.length,m=w.computeStrides(o),g=w.getTypedArrayFromDType(i.dtype,p);0!==s&&g.fill(s);for(let y=0;y<u;y++){let b=w.indexToLoc(y,h,d).map((v,x)=>v+l[x]);g[w.locToIndex(b,f,m)]=c[y]}return{dataId:t.write(g,o,i.dtype),shape:o,dtype:i.dtype}}},p$e=or((e,n)=>Math.pow(e,n)),f$e=Rr($d,p$e),m$e={kernelName:$d,backendName:"cpu",kernelFunc:f$e},y$e={kernelName:vw,backendName:"cpu",kernelFunc:function g$e(e){let{inputs:n,backend:t,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:a,indices:s}=n,l=i.map(y=>t.data.get(y.dataId).values),c=i.map(y=>y.shape),u=t.data.get(a.dataId).values,h=t.data.get(s.dataId).values,[d,p,f]=Xq(l,c,u,a.shape,a.dtype,h,s.shape),m=d.map(y=>t.makeTensorInfo([y.length],"int32",y)),g=t.makeTensorInfo(f,a.dtype,p);return m.concat([g])}},_$e={kernelName:xw,backendName:"cpu",kernelFunc:function b$e(e){let{inputs:n,backend:t}=e,{starts:r,limits:i,deltas:a}=n,s=t.data.get(r.dataId).values,o=t.data.get(i.dataId).values,l=t.data.get(a.dataId).values,[c,u]=Zq(s,r.shape,r.dtype,o,i.shape,l,a.shape);return[t.makeTensorInfo([c.length],"int32",c),t.makeTensorInfo([u.length],r.dtype,u)]}},x$e={kernelName:ww,backendName:"cpu",kernelFunc:function v$e(e){let{inputs:n,backend:t,attrs:r}=e,{shape:i,values:a,defaultValue:s,rowPartitionTensors:o}=n,{rowPartitionTypes:l}=r,c=t.data.get(i.dataId).values,u=t.data.get(a.dataId).values,h=t.data.get(s.dataId).values,d=o.map(g=>t.data.get(g.dataId).values),p=o.map(g=>g.shape),[f,m]=eK(c,i.shape,u,a.shape,a.dtype,h,s.shape,d,p,l);return t.makeTensorInfo(f,a.dtype,m)}},C$e={kernelName:Ab,backendName:"cpu",kernelFunc:function w$e(e){let{backend:n,attrs:t}=e,{start:r,stop:i,dtype:a,step:s}=t,o=TO(r,i,s,a);return n.makeTensorInfo([o.length],a,o)}},k$e=on(zd,e=>1/e),S$e={kernelName:zd,backendName:"cpu",kernelFunc:k$e},M$e={kernelName:Wd,backendName:"cpu",kernelFunc:function I$e(e){let{inputs:n,backend:t,attrs:r}=e,{images:i}=n,{alignCorners:a,halfPixelCenters:s,size:o}=r;Pe(i,"resizeBilinear");let l=w.computeStrides(i.shape),[c,u]=o,[h,d,p,f]=i.shape,m=t.data.get(i.dataId).values,g=new Float32Array(w.sizeFromShape([h,c,u,f])),y=[a&&c>1?d-1:d,a&&u>1?p-1:p],b=[a&&c>1?c-1:c,a&&u>1?u-1:u],_=0,v=y[0]/b[0],x=y[1]/b[1];for(let S=0;S<h;S++)for(let M=0;M<c;M++){let D;D=s?v*(M+.5)-.5:v*M;let N=Math.max(0,Math.floor(D)),F=D-N,O=Math.min(d-1,Math.ceil(D)),k=S*l[0]+N*l[1],P=S*l[0]+O*l[1];for(let j=0;j<u;j++){let Z;Z=s?x*(j+.5)-.5:x*j;let z=Math.max(0,Math.floor(Z)),W=Z-z,q=Math.min(p-1,Math.ceil(Z)),J=k+z*l[2],te=P+z*l[2],ie=k+q*l[2],pe=P+q*l[2];for(let le=0;le<f;le++){let he=m[J+le],_e=m[te+le],Ne=he+(m[ie+le]-he)*W;g[_++]=Ne+(_e+(m[pe+le]-_e)*W-Ne)*F}}}return t.makeTensorInfo([h,c,u,f],"float32",g)}},D$e={kernelName:vm,backendName:"cpu",kernelFunc:function E$e(e){let{inputs:n,backend:t,attrs:r}=e,{images:i,dy:a}=n,{alignCorners:s}=r;Pe([a,i],"resizeBilinearGrad");let o=w.computeStrides(i.shape),[l,c,u,h]=i.shape,[,d,p]=a.shape,f=new Float32Array(l*c*u*h),m=[s&&d>1?c-1:c,s&&p>1?u-1:u],g=[s&&d>1?d-1:d,s&&p>1?p-1:p],y=m[0]/g[0],b=m[1]/g[1],_=t.data.get(a.dataId).values,v=0;for(let x=0;x<l;x++){let S=x*o[0];for(let M=0;M<d;M++){let D=M*y,N=Math.floor(D),F=Math.min(Math.ceil(D),c-1),O=S+N*o[1],k=S+F*o[1],P=D-N,j=1-P;for(let Z=0;Z<p;Z++){let z=Z*b,W=Math.floor(z),q=Math.min(Math.ceil(z),u-1),J=z-W,te=1-J,ie=O+W*o[2],pe=O+q*o[2],le=k+W*o[2],he=k+q*o[2],_e=j*te,Be=j*J,be=P*te,Ne=P*J;for(let Fe=0;Fe<h;Fe++){let Ge=_[v++];f[ie+Fe]+=Ge*_e,f[pe+Fe]+=Ge*Be,f[le+Fe]+=Ge*be,f[he+Fe]+=Ge*Ne}}}}return t.makeTensorInfo([l,u,c,h],"float32",f)}},T$e={kernelName:Hd,backendName:"cpu",kernelFunc:function A$e(e){let{inputs:n,backend:t,attrs:r}=e,{images:i}=n,{alignCorners:a,halfPixelCenters:s,size:o}=r;Pe(i,"resizeNearestNeighbor");let l=w.computeStrides(i.shape),[c,u]=o,[h,d,p,f]=i.shape,m=t.data.get(i.dataId).values,g=new Float32Array(h*c*u*f),y=[a&&c>1?d-1:d,a&&u>1?p-1:p],b=[a&&c>1?c-1:c,a&&u>1?u-1:u],_=y[0]/b[0],v=y[1]/b[1],x=0;for(let S=0;S<h;S++){let M=S*l[0];for(let D=0;D<c;D++){let N=s?_*(D+.5):_*D,F=Math.min(d-1,a?Math.round(N):Math.floor(N));s&&(F=Math.max(0,F));let O=M+F*l[1];for(let k=0;k<u;k++){let P=s?v*(k+.5):v*k,j=Math.min(p-1,a?Math.round(P):Math.floor(P));s&&(j=Math.max(0,j));let Z=O+j*l[2];for(let z=0;z<f;z++)g[x++]=m[Z+z]}}}return t.makeTensorInfo([h,c,u,f],i.dtype,g)}},O$e={kernelName:_m,backendName:"cpu",kernelFunc:function N$e(e){let{inputs:n,backend:t,attrs:r}=e,{images:i,dy:a}=n,{alignCorners:s}=r;Pe([a,i],"resizeNearestNeighborGrad");let o=w.computeStrides(i.shape),l=w.computeStrides(a.shape),[c,u,h,d]=i.shape,[,p,f]=a.shape,m=new Float32Array(c*u*h*d),g=t.data.get(a.dataId).values,y=[s&&p>1?u-1:u,s&&f>1?h-1:h],b=[s&&p>1?p-1:p,s&&f>1?f-1:f],_=y[0]/b[0],v=y[1]/b[1],x=1/_,S=1/v,M=2*Math.ceil(x)+2,D=2*Math.ceil(S)+2;for(let N=0;N<c;N++){let F=N*o[0];for(let O=0;O<u;O++){let k=F+O*o[1],P=Math.floor(O*x),j=Math.floor(P-M/2);for(let Z=0;Z<h;Z++){let z=k+Z*o[2],W=Math.floor(Z*S),q=Math.floor(W-D/2);for(let J=0;J<d;J++){let te=0;for(let ie=0;ie<M;ie++){let pe=ie+j;if(pe<0||pe>=p)continue;let le=F+pe*l[1],he=pe*_;if(O===Math.min(u-1,s?Math.round(he):Math.floor(he)))for(let Be=0;Be<D;Be++){let be=Be+q;if(be<0||be>=f)continue;let Ne=le+be*l[2],Fe=be*v;Z===Math.min(h-1,s?Math.round(Fe):Math.floor(Fe))&&(te+=g[Ne+J])}}m[z+J]=te}}}}return t.makeTensorInfo(i.shape,i.dtype,m)}},R$e={kernelName:Gd,backendName:"cpu",kernelFunc:function F$e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{dims:a}=r;Pe(i,"reverse");let s=i.shape.length,o=w.parseAxisParam(a,i.shape);if(0===s)return No({inputs:{x:i},backend:t});let l=new yr(i.shape,i.dtype),c=t.bufferSync(i);for(let u=0;u<l.size;u++){let h=l.indexToLoc(u),d=h.slice();o.forEach(p=>d[p]=i.shape[p]-1-d[p]),l.set(c.get(...d),...h)}return t.makeTensorInfo(l.shape,l.dtype,l.values)}},P$e={kernelName:Rm,backendName:"cpu",kernelFunc:({inputs:e,attrs:n,backend:t})=>{let{image:r}=e,{radians:i,fillValue:a,center:s}=n,o=t,l=w.getTypedArrayFromDType(r.dtype,w.sizeFromShape(r.shape)),[c,u,h,d]=r.shape,[p,f]=I.getImageCenter(s,u,h),g=Math.sin(i),y=Math.cos(i),b=o.data.get(r.dataId).values;for(let _=0;_<c;_++){let v=_*h*u*d;for(let x=0;x<u;x++){let S=x*(h*d);for(let M=0;M<h;M++){let D=M*d;for(let N=0;N<d;N++){let F=[c,x,M,N],O=F[2],k=F[1],P=(O-p)*y-(k-f)*g,j=(O-p)*g+(k-f)*y;P=Math.round(P+p),j=Math.round(j+f);let Z=a;"number"!=typeof a&&(Z=3===N?255:a[N]),P>=0&&P<h&&j>=0&&j<u&&(Z=b[v+j*(h*d)+P*d+N]),l[v+S+D+N]=Z}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},L$e=on(qd,e=>{let n=Math.floor(e);return e-n<.5?Math.floor(e):e-n>.5?Math.ceil(e):n%2==0?n:n+1}),$$e={kernelName:qd,backendName:"cpu",kernelFunc:L$e},V$e={kernelName:xm,backendName:"cpu",kernelFunc:function B$e(e){let{inputs:n,backend:t,attrs:r}=e,{indices:i,updates:a}=n,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=I.calculateShapes(a,i,s),m=zh(t.bufferSync(i),t.bufferSync(a),s,h,c,l,o,u,0,!0);return t.makeTensorInfo(s,m.dtype,m.values)}};function z$e(e,n){let t=0,r=e.length,i=0;for(;t<r;)i=Math.floor((t+r)/2),e[i]<n?t=i+1:r=i;return r}function U$e(e,n){let t=0,r=e.length,i=0;for(;t<r;)i=Math.floor((t+r)/2),e[i]<=n?t=i+1:r=i;return r}var j$e={kernelName:Cm,backendName:"cpu",kernelFunc:function W$e(e){let{inputs:n,backend:t,attrs:r}=e,{sortedSequence:i,values:a}=n,{side:s}=r,c=function H$e(e,n,t,r,i,a){let s=w.getArrayFromDType("int32",t*i);for(let o=0;o<t;++o){let l=e.slice(o*r,(o+1)*r),c=o*i;for(let u=0;u<i;++u)s[c+u]="left"===a?z$e(l,n[u+c]):U$e(l,n[u+c])}return s}(t.data.get(i.dataId).values,t.data.get(a.dataId).values,i.shape[0],i.shape[1],a.shape[1],s);return t.makeTensorInfo(a.shape,"int32",c)}},q$e={kernelName:km,backendName:"cpu",kernelFunc:function G$e(e){let{inputs:n,backend:t}=e,{condition:r,t:i,e:a}=n;Pe([r,i,a],"select");let s=r.shape.length,o=t.data.get(r.dataId).values,l=t.data.get(i.dataId).values,c=t.data.get(a.dataId).values,u=za(i.dtype,a.dtype),h=w.makeZerosTypedArray(w.sizeFromShape(i.shape),u),d=0,p=0===s||s>1||1===i.shape.length?1:w.sizeFromShape(i.shape.slice(1));for(let f=0;f<o.length;f++)for(let m=0;m<p;m++)h[d++]=1===o[f]?l[f]:c[f];return t.makeTensorInfo(i.shape,u,h)}},K$e=I.SELU_SCALEALPHA,X$e=I.SELU_SCALE,Y$e=on(Xd,e=>e>=0?X$e*e:K$e*(Math.exp(e)-1)),Z$e={kernelName:Xd,backendName:"cpu",kernelFunc:Y$e},Q$e=on(Qd,e=>e<0?-1:e>0?1:0),J$e={kernelName:Qd,backendName:"cpu",kernelFunc:Q$e},e5e=on(Yd,e=>Math.sin(e)),t5e={kernelName:Yd,backendName:"cpu",kernelFunc:e5e},n5e=on(Zd,e=>Math.sinh(e)),r5e={kernelName:Zd,backendName:"cpu",kernelFunc:n5e},EK=Math.log(1.1920928955078125e-7)+2,a5e=on(eh,e=>{let i,n=e>-EK,t=e<EK,r=Math.exp(e);return i=t?r:n?e:Math.log(1+r),i}),s5e={kernelName:eh,backendName:"cpu",kernelFunc:a5e},l5e={kernelName:Im,backendName:"cpu",kernelFunc:function o5e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{blockShape:a,paddings:s}=r;Pe([i],"spaceToBatchND");let o=w.sizeFromShape(a),l=[[0,0]];l.push(...s);for(let g=1+a.length;g<i.shape.length;++g)l.push([0,0]);let c=MK.kernelFunc({inputs:{x:i},backend:t,attrs:{paddings:l,constantValue:0}}),u=I.getReshaped(c.shape,a,o,!1),h=I.getPermuted(u.length,a.length,!1),d=I.getReshapedPermuted(c.shape,a,o,!1),p=An({inputs:{x:c},backend:t,attrs:{shape:u}}),f=ea({inputs:{x:p},backend:t,attrs:{perm:h}}),m=An({inputs:{x:f},backend:t,attrs:{shape:d}});return t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(f),m}},u5e={kernelName:Tb,backendName:"cpu",kernelFunc:function c5e(e){let{inputs:n,backend:t}=e,{indices:r,values:i,denseShape:a,defaultValue:s}=n;if(1!==a.shape.length)throw new Error(`Dense shape must be a vector, saw:\n        ${a.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n        ${r.shape}`);if(1!==i.shape.length)throw new Error(`Values must be a vector, saw:\n        ${i.shape}`);if(0!==s.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${s.shape}`);let o=t.data.get(r.dataId).values,l=t.data.get(i.dataId).values,c=t.data.get(a.dataId).values,u=t.data.get(s.dataId).values[0],[h,d,p,f,m]=rK(o,r.shape,r.dtype,l,i.dtype,c,u);return[t.makeTensorInfo(d,r.dtype,h),t.makeTensorInfo([d[0]],i.dtype,p),t.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(g=>Number(g)))),t.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}},h5e={kernelName:Em,backendName:"cpu",kernelFunc:function d5e(e){let{inputs:n,backend:t}=e,{inputIndices:r,inputShape:i,newShape:a}=n;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${r.shape}`);if(1!==i.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${i.shape}`);if(1!==a.shape.length)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);let s=Array.from(t.data.get(i.dataId).values),o=t.data.get(r.dataId).values,l=Array.from(t.data.get(a.dataId).values),[c,u,h]=iK(o,r.shape,r.dtype,s,l);return[t.makeTensorInfo(u,r.dtype,c),t.makeTensorInfo([h.length],a.dtype,new Int32Array(h))]}},f5e={kernelName:Nb,backendName:"cpu",kernelFunc:function p5e(e){let{inputs:n,backend:t}=e,{data:r,indices:i,segmentIds:a}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n          ${i.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n          ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");let s=t.data.get(r.dataId).values,o=t.data.get(i.dataId).values,l=t.data.get(a.dataId).values,[c,u]=NO(s,r.shape,r.dtype,o,l,!0);return t.makeTensorInfo(u,r.dtype,c)}},g5e={kernelName:Ob,backendName:"cpu",kernelFunc:function m5e(e){let{inputs:n,backend:t}=e,{data:r,indices:i,segmentIds:a}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n         ${i.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n         ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");let s=t.data.get(r.dataId).values,o=t.data.get(i.dataId).values,l=t.data.get(a.dataId).values,[c,u]=NO(s,r.shape,r.dtype,o,l);return t.makeTensorInfo(u,r.dtype,c)}},b5e={kernelName:Dm,backendName:"cpu",kernelFunc:function y5e(e){let m,{inputs:n,backend:t,attrs:r}=e,{sparseIndices:i,sparseValues:a,defaultValue:s}=n,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:d}=I.calculateShapes(a,i,o),p=!1,f=t.bufferSync(i);switch(a.dtype){case"bool":m=zh(f,t.bufferSync(a),o,d,u,c,l,h,!!t.data.get(s.dataId).values[0],p);break;case"float32":case"int32":m=zh(f,t.bufferSync(a),o,d,u,c,l,h,t.data.get(s.dataId).values[0],p);break;case"string":m=zh(f,t.bufferSync(a),o,d,u,c,l,h,w.decodeString(t.data.get(s.dataId).values[0]),p);break;default:throw new Error(`Unsupported type ${a.dtype}`)}return t.makeTensorInfo(o,m.dtype,m.values)}},v5e={kernelName:Mm,backendName:"cpu",kernelFunc:function _5e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{numOrSizeSplits:a,axis:s}=r,o=w.parseAxisParam(s,i.shape)[0],l=I.prepareSplitSize(i,a,o),c=new Array(i.shape.length).fill(0),u=i.shape.slice();return l.map(h=>{let d=[...u];d[o]=h;let p=Uh({inputs:{x:i},backend:t,attrs:{begin:c,size:d}});return c[o]+=h,p})}},x5e={kernelName:Fb,backendName:"cpu",kernelFunc:({inputs:e,backend:n})=>{let{x:t}=e,r=n;Pe(t,"square");let i=r.data.get(t.dataId).values,a=new Float32Array(i.length);for(let s=0;s<i.length;++s){let o=i[s];a[s]=o*o}return{dataId:r.write(a,t.shape,t.dtype),shape:t.shape,dtype:t.dtype}}},w5e=on(mc,(e,n)=>{let t=n;return isNaN(e)?NaN:e>0?1:t.alpha}),C5e={kernelName:mc,backendName:"cpu",kernelFunc:w5e},S5e={kernelName:Am,backendName:"cpu",kernelFunc:function k5e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{begin:a,end:s,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=r;Pe(i,"stridedSlice");let x,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:_,strides:v}=Tr.sliceInfo(i.shape,a,s,o,l,c,u,h,d);if(m)x=An({inputs:{x:i},backend:t,attrs:{shape:f}});else if(g||y){w.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let S=Tr.computeOutShape(b,_,v),M=Uh({inputs:{x:i},backend:t,attrs:{begin:b,size:S}});x=An({inputs:{x:M},backend:t,attrs:{shape:f}}),t.disposeIntermediateTensorInfo(M)}else{let M=oK(p,t.bufferSync(i),v,b);x=t.makeTensorInfo(f,M.dtype,M.values)}return x}},M5e={kernelName:Pb,backendName:"cpu",kernelFunc:function I5e(e){let{inputs:n,backend:t,attrs:r}=e,{separator:i,nGramWidths:a,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:h}=n,d=t.data.get(u.dataId).values,p=t.data.get(h.dataId).values,[f,m]=OO(d,p,i,a,s,o,l,c);return[t.makeTensorInfo([f.length],"string",f),t.makeTensorInfo(h.shape,"int32",m)]}},D5e={kernelName:Lb,backendName:"cpu",kernelFunc:function E5e(e){let{inputs:n,backend:t,attrs:r}=e,{skipEmpty:i}=r,{input:a,delimiter:s}=n;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(0!==s.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let o=t.data.get(a.dataId).values,l=t.data.get(s.dataId).values[0],[c,u,h]=FO(o,l,i),d=u.length;return[t.makeTensorInfo([d,2],"int32",c),t.makeTensorInfo([d],"string",u),t.makeTensorInfo([2],"int32",new Int32Array(h))]}},T5e={kernelName:$b,backendName:"cpu",kernelFunc:function A5e(e){let{inputs:n,backend:t,attrs:r}=e,{numBuckets:i}=r,{input:a}=n;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");let o=RO(t.data.get(a.dataId).values,i);return t.makeTensorInfo(a.shape,"int32",o)}},N5e=on(sh,e=>Math.tan(e)),O5e={kernelName:sh,backendName:"cpu",kernelFunc:N5e},F5e=on(oh,e=>Math.tanh(e)),L5e={kernelName:wm,backendName:"cpu",kernelFunc:function P5e(e){let{inputs:n,backend:t}=e,{tensor:r,indices:i,updates:a}=n,{sliceRank:s,numUpdates:o,sliceSize:l,strides:c,outputSize:u}=I.calculateShapes(a,i,r.shape),d=t.bufferSync(i),p=t.bufferSync(a),f=t.bufferSync(r),m=zh(d,p,r.shape,u,l,o,s,c,f,!1);return t.makeTensorInfo(r.shape,m.dtype,m.values)}},B5e={kernelName:fc,backendName:"cpu",kernelFunc:function $5e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{reps:a}=r;Pe(i,"tile");let s=cK(t.bufferSync(i),a);return t.makeTensorInfo(s.shape,s.dtype,s.values)}},z5e={kernelName:Tm,backendName:"cpu",kernelFunc:function V5e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{k:a,sorted:s}=r;Pe(i,"topk");let o=t.data.get(i.dataId).values,[l,c]=dK(o,i.shape,i.dtype,a,s);return[t.makeTensorInfo(l.shape,l.dtype,l.values),t.makeTensorInfo(c.shape,c.dtype,c.values)]}},H5e={kernelName:Nm,backendName:"cpu",kernelFunc:function U5e(e){let{inputs:n,attrs:t,backend:r}=e,{image:i,transforms:a}=n,{interpolation:s,fillMode:o,fillValue:l,outputShape:c}=t,[u,h,d,p]=i.shape,[f,m]=c??[h,d],g=[u,f,m,p],y=w.computeStrides(i.shape),b=y[0],_=y[1],v=y[2],x=w.computeStrides(g),S=x[0],M=x[1],D=x[2],N=w.getTypedArrayFromDType(i.dtype,w.sizeFromShape(g));N.fill(l);let F=r.data.get(i.dataId).values,O=r.data.get(a.dataId).values;for(let k=0;k<u;++k){let P=1===a.shape[0]?O:O.subarray(8*k,8*k+8);for(let j=0;j<f;++j)for(let Z=0;Z<m;++Z)for(let z=0;z<p;++z){let W,q=P[6]*Z+P[7]*j+1;if(0===q)continue;let te=(P[3]*Z+P[4]*j+P[5])/q,ie=DK((P[0]*Z+P[1]*j+P[2])/q,d,o),pe=DK(te,h,o);switch(s){case"nearest":W=K5e(F,h,d,b,_,v,k,pe,ie,z,l);break;case"bilinear":W=X5e(F,h,d,b,_,v,k,pe,ie,z,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${s}`)}N[k*S+j*M+Z*D+z]=W}return r.makeTensorInfo(g,i.dtype,N)}return{dataId:r.write(N,g,i.dtype),shape:i.shape,dtype:i.dtype}}};function DK(e,n,t){switch(t){case"reflect":return function W5e(e,n){let t=e;if(t<0)if(n<=1)t=0;else{let r=2*n;t<r&&(t=r*Math.trunc(-t/r)+t),t=t<-n?t+r:-t-1}else if(t>n-1)if(n<=1)t=0;else{let r=2*n;t-=r*Math.trunc(t/r),t>=n&&(t=r-t-1)}return w.clamp(0,t,n-1)}(e,n);case"wrap":return function j5e(e,n){let t=e;return t<0?n<=1?t=0:t+=n*(Math.trunc(-t/(n-1))+1):t>n-1&&(n<=1?t=0:t-=n*Math.trunc(t/(n-1))),w.clamp(0,t,n-1)}(e,n);case"nearest":return function q5e(e,n){return w.clamp(0,e,n-1)}(e,n);default:return function G5e(e,n){return e}(e)}}function L_(e,n,t,r,i,a,s,o,l,c,u){return 0<=o&&o<n&&0<=l&&l<t?e[s*r+o*i+l*a+c]:u}function K5e(e,n,t,r,i,a,s,o,l,c,u){return L_(e,n,t,r,i,a,s,Math.round(o),Math.round(l),c,u)}function X5e(e,n,t,r,i,a,s,o,l,c,u){let h=Math.floor(o),d=Math.floor(l),p=h+1,f=d+1;return(p-o)*((f-l)*L_(e,n,t,r,i,a,s,h,d,c,u)+(l-d)*L_(e,n,t,r,i,a,s,h,f,c,u))+(o-h)*((f-l)*L_(e,n,t,r,i,a,s,p,d,c,u)+(l-d)*L_(e,n,t,r,i,a,s,p,f,c,u))}var Z5e={kernelName:Bb,backendName:"cpu",kernelFunc:function Y5e(e){let{inputs:n,attrs:t,backend:r}=e,{axis:i}=t,{x:a}=n;Pe(a,"unique");let s=r.data.get(a.dataId).values,{outputValues:o,outputShape:l,indices:c}=LO(s,i,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}},J5e={kernelName:Om,backendName:"cpu",kernelFunc:function Q5e(e){let{inputs:n,backend:t,attrs:r}=e,{value:i}=n,{axis:a}=r;a<0&&(a+=i.shape.length);let s=i.shape.length,o=i.shape[a],l=new Array(s-1),c=0;for(let p=0;p<s;p++)p!==a&&(l[c++]=i.shape[p]);let u=new Array(s).fill(0),h=i.shape.slice();h[a]=1;let d=new Array(o);for(let p=0;p<d.length;p++){u[a]=p;let f=Uh({inputs:{x:i},backend:t,attrs:{begin:u,size:h}});d[p]=An({inputs:{x:f},backend:t,attrs:{shape:l}}),t.disposeIntermediateTensorInfo(f)}return d}},t4e={kernelName:Vb,backendName:"cpu",kernelFunc:function e4e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,segmentIds:a}=n,{numSegments:s}=r;Pe(i,"unsortedSegmentSum");let c=[],u=[],h=i.shape.length-a.shape.length,d=a;for(let f=0;f<h;++f){let m=cC({inputs:{input:d},backend:t,attrs:{dim:f+1}});d=m,u.push(m)}for(let f=0;f<s;++f){let m=w.createScalarValue(f,"int32"),g=t.makeTensorInfo([],"int32",m),y=Eq({inputs:{a:g,b:d},backend:t}),b=Bc({inputs:{x:y},backend:t,attrs:{dtype:"float32"}}),_=sC({inputs:{a:b,b:i},backend:t}),v=P_({inputs:{x:_},backend:t,attrs:{axis:0,keepDims:!1}});c.push(v),u.push(g),u.push(y),u.push(b),u.push(_),u.push(v)}let p=IK({inputs:c,backend:t,attrs:{axis:0}});return u.forEach(f=>t.disposeIntermediateTensorInfo(f)),p}},n4e=[XRe,EFe,ZRe,JRe,FFe,tPe,rPe,aPe,oPe,cPe,dPe,pPe,mPe,bPe,vPe,CPe,SPe,MPe,DPe,qRe,TPe,OPe,RPe,PFe,LPe,NFe,$Fe,BPe,DFe,zPe,HPe,WPe,GPe,KPe,YPe,QPe,eLe,nLe,iLe,sLe,lLe,uLe,hLe,fLe,mLe,yLe,_Le,xLe,wLe,CLe,kLe,ILe,DLe,VRe,TLe,BFe,BLe,VFe,VLe,UFe,GLe,qLe,XLe,WFe,GFe,ZLe,JLe,t3e,r3e,KFe,YFe,AFe,a3e,UPe,o3e,c3e,d3e,zRe,QFe,eRe,p3e,nRe,m3e,b3e,v3e,C3e,S3e,M3e,E3e,iRe,A3e,N3e,F3e,P3e,$3e,V3e,U3e,sRe,W3e,q3e,Z3e,lRe,uRe,e$e,r$e,s$e,hRe,l$e,u$e,d$e,MK,m$e,HRe,mRe,y$e,_$e,x$e,C$e,TFe,VO,S$e,WRe,jRe,GRe,M$e,D$e,T$e,O$e,R$e,P$e,$$e,kRe,V$e,j$e,q$e,Z$e,IRe,J$e,t5e,r5e,MRe,X3e,s5e,l5e,u5e,h5e,f5e,g5e,b5e,v5e,ARe,x5e,NRe,FRe,C5e,S5e,M5e,D5e,T5e,$Re,MLe,O5e,{kernelName:oh,backendName:"cpu",kernelFunc:F5e},L5e,B5e,z5e,H5e,pRe,Z5e,J5e,t4e,c$e];for(let e of n4e)Hb(e);var AK={};it(AK,{assertNotComplex:()=>mg,bindCanvasToFramebuffer:()=>p4e,bindColorTextureToFramebuffer:()=>fC,bindTextureToProgramUniformSampler:()=>GK,bindTextureUnit:()=>HK,bindVertexBufferToProgramAttribute:()=>jO,callAndCheck:()=>Me,canBeRepresented:()=>NK,createFragmentShader:()=>RK,createFramebuffer:()=>UK,createProgram:()=>PK,createStaticIndexBuffer:()=>BK,createStaticVertexBuffer:()=>$K,createTexture:()=>VK,createVertexShader:()=>FK,getBatchDim:()=>Wh,getExtensionOrThrow:()=>V_,getFramebufferErrorMessage:()=>qK,getMaxTexturesInShader:()=>ZK,getNumChannels:()=>d4e,getProgramUniformLocation:()=>jK,getProgramUniformLocationOrThrow:()=>WK,getRowsCols:()=>jh,getShapeAs3D:()=>U_,getTextureShapeFromLogicalShape:()=>XK,getWebGLDisjointQueryTimerVersion:()=>QK,getWebGLErrorMessage:()=>OK,getWebGLMaxTextureSize:()=>YK,hasExtension:()=>Ka,isCapableOfRenderingToFloatTexture:()=>JK,isDownloadFloatTextureEnabled:()=>eX,isReshapeFree:()=>H_,isWebGLFenceEnabled:()=>tX,isWebGLVersionEnabled:()=>qO,linkProgram:()=>LK,logShaderSourceAndInfoLog:()=>WO,resetMaxTextureSize:()=>f4e,resetMaxTexturesInShader:()=>m4e,unbindColorTextureFromFramebuffer:()=>GO,unbindTextureUnit:()=>h4e,validateFramebuffer:()=>z_,validateProgram:()=>pC,validateTextureSize:()=>zK});var $_,qa,oi,Hh={},dC={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function TK(e,n){Hh[e]=n}function Js(e,n){if(!(e in Hh)||null!=n){let r=function i4e(e,n){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let t=n??function r4e(e){if(!Q().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&2===e)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Hh[e]},!1),Q().getBool("SOFTWARE_WEBGL_ENABLED")&&(dC.failIfMajorPerformanceCaveat=!1),1===e?t.getContext("webgl",dC)||t.getContext("experimental-webgl",dC):t.getContext("webgl2",dC)}(e,n);if(null===r)return console.log("Could not get context for WebGL version",e),null;Hh[e]=r}let t=Hh[e];return null==t||t.isContextLost()?(delete Hh[e],Js(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Hh[e])}function B_(e,n){return[n,e]}function hC(e){let n=w.sizeFromShape(e),t=Math.ceil(n/4);return w.sizeToSquarishShape(t)}function fg(e,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(e/2))]}function HO(e,n){let r,i,a,s,o,l,c,u,h,d,t=e;return 2===Q().getNumber("WEBGL_VERSION")?(r=t.R32F,i=t.R16F,a=t.RGBA16F,s=t.RGBA32F,o=t.RED,c=4,u=1,h=t.HALF_FLOAT,d=t.FLOAT,l=t.RGBA8):(r=e.RGBA,i=e.RGBA,a=e.RGBA,s=t.RGBA,o=e.RGBA,c=4,u=4,h=null!=n?n.HALF_FLOAT_OES:null,d=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:s,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:h,textureTypeFloat:d}}function Me(e,n){let t=n();return Q().getBool("DEBUG")&&function o4e(e){let n=e.getError();if(n!==e.NO_ERROR)throw new Error("WebGL Error: "+OK(e,n))}(e),t}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}($_||($_={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(qa||(qa={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(oi||(oi={}));var l4e=5.96e-8,c4e=65504;function NK(e){return!!(Q().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||l4e<Math.abs(e)&&Math.abs(e)<c4e)}function OK(e,n){switch(n){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${n}`}}function V_(e,n){return Ml(e,()=>e.getExtension(n),'Extension "'+n+'" not supported on this browser.')}function FK(e,n){let t=Ml(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Me(e,()=>e.shaderSource(t,n)),Me(e,()=>e.compileShader(t)),!1===e.getShaderParameter(t,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(t)),new Error("Failed to compile vertex shader.");return t}function RK(e,n){let t=Ml(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Me(e,()=>e.shaderSource(t,n)),Me(e,()=>e.compileShader(t)),Q().get("ENGINE_COMPILE_ONLY"))return t;if(!1===e.getShaderParameter(t,e.COMPILE_STATUS))throw WO(n,e.getShaderInfoLog(t)),new Error("Failed to compile fragment shader.");return t}var gC,yC,u4e=/ERROR: [0-9]+:([0-9]+):/g;function WO(e,n){let t=u4e.exec(n);if(null==t)return console.log(`Couldn't parse line number in error: ${n}`),void console.log(e);let r=+t[1],i=e.split("\n"),a=i.length.toString().length+2,s=i.map((h,d)=>w.rightPad((d+1).toString(),a)+h),o=0;for(let h=0;h<s.length;h++)o=Math.max(s[h].length,o);let l=s.slice(0,r-1),c=s.slice(r-1,r),u=s.slice(r);console.log(l.join("\n")),console.log(n.split("\n")[0]),console.log(`%c ${w.rightPad(c[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function PK(e){return Ml(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function LK(e,n){if(Me(e,()=>e.linkProgram(n)),!Q().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function pC(e,n){if(Me(e,()=>e.validateProgram(n)),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function $K(e,n){let t=Ml(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Me(e,()=>e.bindBuffer(e.ARRAY_BUFFER,t)),Me(e,()=>e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)),t}function BK(e,n){let t=Ml(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Me(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t)),Me(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)),t}function d4e(){return 2===Q().getNumber("WEBGL_VERSION")?1:4}function VK(e){return Ml(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function zK(e,n){let t=Q().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||n<=0)throw new Error(`Requested texture size [${e}x${n}] is invalid.`);if(e>t||n>t)throw new Error(`Requested texture size [${e}x${n}] greater than WebGL maximum on this browser / GPU [${t}x${t}].`)}function UK(e){return Ml(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function jO(e,n,t,r,i,a,s){let o=e.getAttribLocation(n,t);return-1!==o&&(Me(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),Me(e,()=>e.vertexAttribPointer(o,i,e.FLOAT,!1,a,s)),Me(e,()=>e.enableVertexAttribArray(o)),!0)}function HK(e,n,t){KK(e,t),Me(e,()=>e.activeTexture(e.TEXTURE0+t)),Me(e,()=>e.bindTexture(e.TEXTURE_2D,n))}function h4e(e,n){KK(e,n),Me(e,()=>e.activeTexture(e.TEXTURE0+n)),Me(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function WK(e,n,t){return Ml(e,()=>e.getUniformLocation(n,t),'uniform "'+t+'" not present in program.')}function jK(e,n,t){return e.getUniformLocation(n,t)}function GK(e,n,t,r){Me(e,()=>HK(e,n,r)),Me(e,()=>e.uniform1i(t,r))}function p4e(e){Me(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Me(e,()=>e.viewport(0,0,e.canvas.width,e.canvas.height)),Me(e,()=>e.scissor(0,0,e.canvas.width,e.canvas.height))}function fC(e,n,t){Me(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),Me(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0))}function GO(e,n){Me(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),Me(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function z_(e){let n=e.checkFramebufferStatus(e.FRAMEBUFFER);if(n!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+qK(e,n))}function qK(e,n){switch(n){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${n}`}}function Ml(e,n,t){let r=Me(e,()=>n());if(null==r)throw new Error(t);return r}function KK(e,n){let t=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=n+e.TEXTURE0;if(r<e.TEXTURE0||r>t)throw new Error(`textureUnit must be in [gl.TEXTURE0, gl.TEXTURE${t}].`)}function Wh(e,n=2){return w.sizeFromShape(e.slice(0,e.length-n))}function jh(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function U_(e){let n=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(n=[Wh(e),...jh(e)]),n}function XK(e,n=!1){let t=Q().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Q().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Q().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=t/2),n&&(t*=2,r*=2,1===(e=e.map((o,l)=>l>=e.length-2?w.nearestLargerEven(e[l]):e[l])).length&&(e=[2,e[0]])),2!==e.length&&(e=w.squeezeShape(e).newShape);let i=w.sizeFromShape(e),a=null;e.length<=1&&i<=t?a=[1,i]:2===e.length&&e[0]<=t&&e[1]<=t?a=e:3===e.length&&e[0]*e[1]<=t&&e[2]<=t?a=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=t&&e[1]*e[2]<=t?a=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=t&&e[3]<=t?a=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=t&&e[1]*e[2]*e[3]<=t&&(a=[e[0],e[1]*e[2]*e[3]]);let s=null!=a&&Math.max(...a)>r&&Math.min(...a)<=(n?2:1)&&Math.min(...a)>0;if(null==a||s)if(n){let o=Wh(e),l=2,c=2;e.length&&([l,c]=jh(e)),i=o*(l/2)*(c/2),a=w.sizeToSquarishShape(i).map(u=>2*u)}else a=w.sizeToSquarishShape(i);return a}function mC(e){return e%2==0}function H_(e,n){if(e=e.slice(-2),n=n.slice(-2),w.arraysEqual(e,n)||!e.length||!n.length||0===e[0]||0===e[1]||0===n[0]||0===n[1])return!0;if(e.length!==n.length){let t=e[e.length-1],r=n[n.length-1];if(t===r||mC(t)&&mC(r)&&(1===e[0]||1===n[0]))return!0}return e[1]===n[1]&&mC(e[0])&&mC(n[0])}function YK(e){if(null==gC){let n=Js(e);gC=n.getParameter(n.MAX_TEXTURE_SIZE)}return gC}function f4e(){gC=null}function m4e(){yC=null}function ZK(e){if(null==yC){let n=Js(e);yC=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,yC)}function QK(e){if(0===e)return 0;let n,t=Js(e);return n=Ka(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Ka(t,"EXT_disjoint_timer_query")?1:0,n}function Ka(e,n){return null!=e.getExtension(n)}function qO(e){try{if(null!=Js(e))return!0}catch(n){return console.log("Error when getting WebGL context: ",n),!1}return!1}function JK(e){if(0===e)return!1;let n=Js(e);if(1===e){if(!Ka(n,"OES_texture_float"))return!1}else if(!Ka(n,"EXT_color_buffer_float"))return!1;return KO(n)}function eX(e){if(0===e)return!1;let n=Js(e);if(1!==e){if(Ka(n,"EXT_color_buffer_float"))return KO(n);let t="EXT_color_buffer_half_float";if(Ka(n,t)){let r=n.getExtension(t);return function g4e(e,n){let t=HO(e,n),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatHalfFloat,1,1,0,t.textureFormatFloat,t.textureTypeHalfFloat,null);let i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);let a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),a}(n,r)}return!1}return!(!Ka(n,"OES_texture_float")||!Ka(n,"WEBGL_color_buffer_float"))&&KO(n)}function KO(e){let n=HO(e),t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);let r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);let i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(t),e.deleteFramebuffer(r),i}function tX(e){return 2===e&&null!=Js(e).fenceSync}function mg(e,n){Array.isArray(e)||(e=[e]),e.forEach(t=>{null!=t&&w.assert("complex64"!==t.dtype,()=>`${n} does not support complex64 tensors in the WebGL backend.`)})}var $e=Q();function Pi(){let e,n,t,r,i,a,s,o,l,c;return 2===Q().getNumber("WEBGL_VERSION")?(e="#version 300 es",n="in",t="out",r="in",i="texture",a="outputColor",s="out vec4 outputColor;",o=Q().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",n="attribute",t="varying",r="varying",i="texture2D",a="gl_FragColor",s="",o="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:n,varyingVs:t,varyingFs:r,texture2D:i,output:a,defineOutput:s,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}function Gh(e,n,t="index"){let r=w.computeStrides(n);return r.map((i,a)=>`int ${e[a]} = ${t} / ${i}; ${a===r.length-1?`int ${e[a+1]} = ${t} - ${e[a]} * ${i}`:`index -= ${e[a]} * ${i}`};`).join("")}function bC(e,n,t="index"){let r=w.computeStrides(n);return r.map((i,a)=>`int ${e[a]} = ${t} / outShapeStrides[${a}]; ${a===r.length-1?`int ${e[a+1]} = ${t} - ${e[a]} * outShapeStrides[${a}]`:`index -= ${e[a]} * outShapeStrides[${a}]`};`).join("")}function XO(e){let n=w.computeStrides(e).map(t=>t.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${n[0]} + coords.y * ${n[1]} + coords.z;\n  }\n`}$e.registerFlag("HAS_WEBGL",()=>$e.getNumber("WEBGL_VERSION")>0),$e.registerFlag("WEBGL_VERSION",()=>qO(2)?2:qO(1)?1:0),$e.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),$e.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===$e.get("WEBGL_VERSION")),$e.registerFlag("WEBGL_CPU_FORWARD",()=>!0),$e.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),$e.registerFlag("WEBGL_PACK",()=>$e.getBool("HAS_WEBGL")),$e.registerFlag("WEBGL_PACK_NORMALIZATION",()=>$e.getBool("WEBGL_PACK")),$e.registerFlag("WEBGL_PACK_CLIP",()=>$e.getBool("WEBGL_PACK")),$e.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>$e.getBool("WEBGL_PACK")),$e.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>$e.getBool("WEBGL_PACK")),$e.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>$e.getBool("WEBGL_PACK")),$e.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>$e.getBool("WEBGL_PACK")),$e.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>$e.getBool("WEBGL_PACK")),$e.registerFlag("WEBGL_PACK_REDUCE",()=>$e.getBool("WEBGL_PACK")),$e.registerFlag("WEBGL_LAZILY_UNPACK",()=>$e.getBool("WEBGL_PACK")),$e.registerFlag("WEBGL_CONV_IM2COL",()=>$e.getBool("WEBGL_PACK")),$e.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>$e.getBool("WEBGL_PACK")),$e.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>YK($e.getNumber("WEBGL_VERSION"))),$e.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>ZK($e.getNumber("WEBGL_VERSION"))),$e.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let e=$e.getNumber("WEBGL_VERSION");return 0===e?0:QK(e)}),$e.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>$e.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Yb.isMobile()),$e.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>JK($e.getNumber("WEBGL_VERSION"))),$e.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!$e.getBool("WEBGL_FORCE_F16_TEXTURES")&&$e.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),$e.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>eX($e.getNumber("WEBGL_VERSION"))),$e.registerFlag("WEBGL_FENCE_API_ENABLED",()=>tX($e.getNumber("WEBGL_VERSION"))),$e.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>$e.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),$e.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if("number"!=typeof e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)}),$e.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Yb.isMobile()?1:-1,e=>{if("number"!=typeof e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)}),$e.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),$e.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),$e.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),$e.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),$e.registerFlag("WEBGL_EXP_CONV",()=>!1),$e.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>$e.getBool("IS_TEST")),$e.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),$e.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),$e.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1),$e.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);var nX="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:rX}=I;function _4e(e,n,t){let r=[];if(e.forEach(d=>{let p=w.sizeFromShape(d.shapeInfo.logicalShape);if(d.shapeInfo.isUniform?r.push(`uniform float ${d.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${d.name};`),r.push(`uniform int offset${d.name};`)),t.enableShapeUniforms){let{uniformShape:f}=ZO(t.packedInputs,d.shapeInfo.logicalShape,d.shapeInfo.texShape);switch(f.length){case 1:r.push(`uniform int ${d.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${d.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${d.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${d.name}Shape;`)}r.push(`uniform ivec2 ${d.name}TexShape;`)}}),t.enableShapeUniforms){switch(n.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}t.customUniforms&&t.customUniforms.forEach(d=>{r.push(`uniform ${d.type} ${d.name}${d.arrayIndex?`[${d.arrayIndex}]`:""};`)});let c,u,i=r.join("\n"),a=e.map(d=>function v4e(e,n,t=!1,r){let i="";return i+=t?iX(e,r):gg(e,r),e.shapeInfo.logicalShape.length<=n.logicalShape.length&&(i+=t?function J4e(e,n){let u,t=e.name,r=t.charAt(0).toUpperCase()+t.slice(1),i="get"+r+"AtOutCoords",a=e.shapeInfo.logicalShape.length,s=n.logicalShape.length,o=rX(e.shapeInfo.logicalShape,n.logicalShape),l=yn(s),c=s-a,h=["x","y","z","w","u","v"];u=0===a?"":s<2&&o.length>=1?"coords = 0;":o.map(g=>`coords.${h[g+c]} = 0;`).join("\n");let d="";d=s<2&&a>0?"coords":e.shapeInfo.logicalShape.map((g,y)=>`coords.${h[y+c]}`).join(", ");let p="return outputValue;",f=1===w.sizeFromShape(e.shapeInfo.logicalShape),m=1===w.sizeFromShape(n.logicalShape);if(1!==a||f||m){if(f&&!m)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(o.length){let g=a-2,y=a-1;o.indexOf(g)>-1&&o.indexOf(y)>-1?p="return vec4(outputValue.x);":o.indexOf(g)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(y)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${i}() {\n      ${l} coords = getOutputCoords();\n      ${u}\n      vec4 outputValue = get${r}(${d});\n      ${p}\n    }\n  `}(e,n):function eBe(e,n){let t=e.name,r=t.charAt(0).toUpperCase()+t.slice(1),i="get"+r+"AtOutCoords",o=e.shapeInfo.logicalShape.length,l=n.logicalShape.length;if(!e.shapeInfo.isUniform&&o===l&&null==e.shapeInfo.flatOffset&&w.arraysEqual(e.shapeInfo.texShape,n.texShape))return`\n      float ${i}() {\n        return sampleTexture(${t}, resultUV);\n      }\n    `;let d,c=yn(l),u=rX(e.shapeInfo.logicalShape,n.logicalShape),h=l-o,p=["x","y","z","w","u","v"];d=0===o?"":l<2&&u.length>=1?"coords = 0;":u.map(m=>`coords.${p[m+h]} = 0;`).join("\n");let f="";return f=l<2&&o>0?"coords":e.shapeInfo.logicalShape.map((m,g)=>`coords.${p[g+h]}`).join(", "),`\n    float ${i}() {\n      ${c} coords = getOutputCoords();\n      ${d}\n      return get${r}(${f});\n    }\n  `}(e,n)),i}(d,n,t.packedInputs,t.enableShapeUniforms)).join("\n"),s=n.texShape,o=Pi(),l=function C4e(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(o),h=function I4e(e){return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${M4e}\n    ${E4e}\n    ${D4e}\n  `}(o);return n.isPacked?(c=function x4e(e,n,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function T4e(e,n,t){let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];return 1===r[0]?t?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `:1===r[1]?t?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `:t?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}(0,n,t);case 2:return function B4e(e,n,t){let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];if(w.arraysEqual(e,n))return t?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;let i=Math.ceil(e[1]/2);return t?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,n,t);case 3:return function O4e(e,n,t){if(t)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],i=Math.ceil(e[2]/2),a=i*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,n,t);default:return function R4e(e,n,t){if(t)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";let r=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],i=Math.ceil(e[e.length-1]/2),a=i*Math.ceil(e[e.length-2]/2),s=a,o="",l="b, r, c";for(let c=2;c<e.length-1;c++)s*=e[e.length-c-1],o=`\n      int b${c} = index / ${s};\n      index -= b${c} * ${s};\n    `+o,l=`b${c}, `+l;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${o}\n\n      int b = index / ${a};\n      index -= b * ${a};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec${e.length}(${l});\n    }\n  `}(e,n,t)}}(n.logicalShape,s,t.enableShapeUniforms),u=function S4e(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(o)):(c=function w4e(e,n,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function N4e(e,n,t){return 1===n[0]?t?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?t?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${n[0]}.0);\n      }\n    `:t?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return resTexRC.x * ${n[1]} + resTexRC.y;\n    }\n  `}(0,n,t);case 2:return function V4e(e,n,t){return w.arraysEqual(e,n)?t?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));\n      }\n    `:1===e[1]?t?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${n[0]}, ${n[1]}));\n        int index = resTexRC.x * ${n[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===e[0]?t?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${n[0]}, ${n[1]}));\n        int index = resTexRC.x * ${n[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:t?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,n,t);case 3:return function F4e(e,n,t){if(t)return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${bC(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`;let r=Gh(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}(e,n,t);case 4:return function P4e(e,n,t){if(t)return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${bC(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `;let r=Gh(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,n,t);case 5:return function L4e(e,n){let t=Gh(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${n[0]},\n                             ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${t}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,n);case 6:return function $4e(e,n){let t=Gh(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${t}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,n);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}(n.logicalShape,s,t.enableShapeUniforms),u=function k4e(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(o)),t.packedInputs&&(h+=A4e),[h,l,u,i,c,a,t.userCode].join("\n")}function gg(e,n=!1){let t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function U4e(e,n){let t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${t};}`;let[i,a]=e.shapeInfo.texShape;if(1===i&&1===a)return`\n      float ${r}() {\n        return sampleTexture(${t}, halfCR);\n      }\n    `;let s=qh(t);if(n)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], ${s});\n      return sampleTexture(${t}, uv);\n    }\n  `;let[o,l]=e.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${o}, ${l}, ${s});\n      return sampleTexture(${t}, uv);\n    }\n  `}(e,n);case 1:return function W4e(e,n){let t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${yg(e)}\n      }\n    `;let i=e.shapeInfo.texShape,a=i[0],s=i[1];if(1===s&&1===a)return`\n      float ${r}(int index) {\n        return sampleTexture(${t}, halfCR);\n      }\n    `;let o=qh(t);return 1===s?n?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${t}TexShape[0]));\n        return sampleTexture(${t}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${a}.0);\n        return sampleTexture(${t}, uv);\n      }\n    `:1===a?n?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${t}TexShape[1]), 0.5);\n        return sampleTexture(${t}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${s}.0, 0.5);\n        return sampleTexture(${t}, uv);\n      }\n    `:n?`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${t}TexShape[0], ${t}TexShape[1], index + ${o});\n      return sampleTexture(${t}, uv);\n    }\n  `:`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${a}, ${s}, index + ${o});\n      return sampleTexture(${t}, uv);\n    }\n  `}(e,n);case 2:return function G4e(e,n){let t=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape;if(null!=a&&w.arraysEqual(t,a))return n?`\n      float ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${a[1]}.0, ${a[0]}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;let{newShape:s,keptDims:o}=w.squeezeShape(t);if(s.length<t.length){let p=["row","col"];return`\n      ${gg(bg(e,s),n)}\n      float ${i}(int row, int col) {\n        return ${i}(${_g(p,o)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${t[1]}, 1)));\n        ${yg(e)}\n      }\n    `;let c=a[0],u=a[1],h=qh(r);return 1===u?n?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${t[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `:1===c?n?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${t[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `:n?`\n      float ${i}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r}Shape[1] + col + ${h};\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n  float ${i}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${t[1]} + col + ${h};\n    vec2 uv = uvFromFlat(${c}, ${u}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}(e,n);case 3:return function K4e(e,n){let t=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t[1]*t[2],s=t[2],{newShape:o,keptDims:l}=w.squeezeShape(t);if(o.length<t.length){let g=["row","col","depth"];return`\n        ${gg(bg(e,o),n)}\n        float ${i}(int row, int col, int depth) {\n          return ${i}(${_g(g,l)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${a}, ${s}, 1)));\n        ${yg(e)}\n      }\n    `;let u=e.shapeInfo.texShape,h=u[0],d=u[1],p=e.shapeInfo.flatOffset;if(d===a&&null==p)return n?`\n      float ${i}(int row, int col, int depth) {\n        int stride1 = ${r}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n        float ${i}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${s}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${h}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `;if(d===s&&null==p)return n?`\n      float ${i}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${t[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${h}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;let f=qh(r);return n?`\n    float ${i}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\n      int stride1 = ${r}Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ${f};\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n      return sampleTexture(${r}, uv);\n    }\n    `:`\n      float ${i}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${a} + col * ${s} + depth + ${f};\n        vec2 uv = uvFromFlat(${h}, ${d}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}(e,n);case 4:return function Y4e(e,n){let t=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t[3],s=t[2]*a,o=t[1]*s,{newShape:l,keptDims:c}=w.squeezeShape(t);if(l.length<t.length){let _=["row","col","depth","depth2"];return`\n      ${gg(bg(e,l),n)}\n      float ${i}(int row, int col, int depth, int depth2) {\n        return ${i}(${_g(_,c)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${o}, ${s}, ${a}, 1)));\n        ${yg(e)}\n      }\n    `;let u=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1],f=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(p===o&&null==u)return n?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        ${f}\n        ${m}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${s}, ${a}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;if(p===a&&null==u)return n?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${t[1]*t[2]}, ${t[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;let y=qh(r);return n?`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${f}\n      ${m}\n      ${g}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `:`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${o} + col * ${s} +\n          depth * ${a} + depth2;\n      vec2 uv = uvFromFlat(${d}, ${p}, index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `}(e,n);case 5:return function Z4e(e){let n=e.shapeInfo.logicalShape,t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),i=n[4],a=n[3]*i,s=n[2]*a,o=n[1]*s,{newShape:l,keptDims:c}=w.squeezeShape(n);if(l.length<n.length){let g=["row","col","depth","depth2","depth3"];return`\n      ${gg(bg(e,l))}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${_g(g,c)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${o}, ${s}, ${a}, ${i})) +\n          depth3;\n        ${yg(e)}\n      }\n    `;let u=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],p=h[1];return p===o&&null==u?`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${s}, ${a}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${p}.0, ${d}.0);\n        return sampleTexture(${t}, uv);\n      }\n    `:p===i&&null==u?`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${n[1]*n[2]*n[3]},\n               ${n[2]*n[3]}, ${n[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${p}.0, ${d}.0);\n        return sampleTexture(${t}, uv);\n      }\n    `:`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${o} + col * ${s} + depth * ${a} +\n          depth2 * ${i} + depth3 + ${qh(t)};\n      vec2 uv = uvFromFlat(${d}, ${p}, index);\n      return sampleTexture(${t}, uv);\n    }\n  `}(e);case 6:return function Q4e(e){let n=e.shapeInfo.logicalShape,t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),{newShape:i,keptDims:a}=w.squeezeShape(n);if(i.length<n.length){let y=["row","col","depth","depth2","depth3","depth4"];return`\n      ${gg(bg(e,i))}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${_g(y,a)});\n      }\n    `}let s=n[5],o=n[4]*s,l=n[3]*o,c=n[2]*l,u=n[1]*c;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${u}, ${c}, ${l}, ${o})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${s}, 1)));\n        ${yg(e)}\n      }\n    `;let h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1];return f===u&&null==h?`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${c}, ${l}, ${o}, ${s})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${t}, uv);\n      }\n    `:f===s&&null==h?`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${n[1]*n[2]*n[3]*n[4]},\n               ${n[2]*n[3]*n[4]},\n               ${n[3]*n[4]},\n               ${n[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${t}, uv);\n      }\n    `:`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${u} + col * ${c} + depth * ${l} +\n          depth2 * ${o} + depth3 * ${s} + depth4 + ${qh(t)};\n      vec2 uv = uvFromFlat(${p}, ${f}, index);\n      return sampleTexture(${t}, uv);\n    }\n  `}(e);default:throw new Error(`${t.length}-D input sampling is not yet supported`)}}function iX(e,n){switch(e.shapeInfo.logicalShape.length){case 0:return function z4e(e){let n=e.name;return`\n    vec4 ${"get"+n.charAt(0).toUpperCase()+n.slice(1)}() {\n      return ${Pi().texture2D}(${n}, halfCR);\n    }\n  `}(e);case 1:return function H4e(e,n){let t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),i=e.shapeInfo.texShape,a=Pi();if(n)return`\n    vec4 ${r}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${a.texture2D}(${t}, uv);\n    }\n  `;let s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${s[0]}, ${s[1]}, index);\n      return ${a.texture2D}(${t}, uv);\n    }\n  `}(e,n);case 2:return function j4e(e,n){let t=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,s=a[0],o=a[1],l=Pi();if(null!=a&&w.arraysEqual(t,a))return n?`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `:`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${s}.0);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `;if(n)return`\n    vec4 ${i}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `;let c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return`\n    vec4 ${i}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(t[1]/2)}, ${c[0]}, ${c[1]}, row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `}(e,n);case 3:return function q4e(e,n){let t=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0]){let p=[1,2],m=["b","row","col"];return`\n        ${iX(bg(e,t.slice(1)),n)}\n        vec4 ${i}(int b, int row, int col) {\n          return ${i}(${_g(m,p)});\n        }\n      `}let o=Pi();if(n)return`\n    vec4 ${i}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${o.texture2D}(${r}, uv);\n    }\n  `;let l=s[0],c=s[1],u=Math.ceil(t[2]/2);return`\n    vec4 ${i}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${c}, ${u*Math.ceil(t[1]/2)}, ${u}, b, row, col);\n      return ${o.texture2D}(${r}, uv);\n    }\n  `}(e,n);default:return function X4e(e,n){let t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),i=Pi();if(n)return`\n    vec4 ${r}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${t}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${t}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${t}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${t}TexShape[0]) / 2.0), ceil(float(${t}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${t}, uv);\n    }\n  `;let a=e.shapeInfo.logicalShape,s=a.length,o=e.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],u=l[1],h=Math.ceil(a[s-1]/2),d=h*Math.ceil(a[s-2]/2),p="int b, int row, int col",f=`b * ${d} + (row / 2) * ${h} + (col / 2)`;for(let m=2;m<s-1;m++)p=`int b${m}, `+p,d*=a[s-m-1],f=`b${m} * ${d} + `+f;return`\n    vec4 ${r}(${p}) {\n      int index = ${f};\n      int texR = index / ${u};\n      int texC = index - texR * ${u};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});\n      return ${i.texture2D}(${t}, uv);\n    }\n  `}(e,n)}}var M4e="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",E4e="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",D4e="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",A4e="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function qh(e){return`offset${e}`}function yg(e){let n=e.name,t=w.sizeFromShape(e.shapeInfo.logicalShape);return t<2?`return ${n};`:`\n    for (int i = 0; i < ${t}; i++) {\n      if (i == index) {\n        return ${n}[i];\n      }\n    }\n  `}function yn(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function ZO(e,n,t){let{newShape:r,keptDims:i}=w.squeezeShape(n),a=n.length,s=e&&3===a&&1===n[0],o=s?n.slice(1):r,l=!e&&a>1&&!w.arraysEqual(n,t)&&r.length<a||s;return{useSqueezeShape:l,uniformShape:l?o:n,keptDims:i}}function bg(e,n){let t=JSON.parse(JSON.stringify(e));return t.shapeInfo.logicalShape=n,t}function _g(e,n){return n.map(t=>e[t]).join(", ")}function sX(e,n,t){let a,s,o,r=[],i=[],l=null,c=null;c=e.getUniformLocation(t,"NAN",!1),1===Q().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(t,"INFINITY",!1));let u=!1;for(let h of n.variableNames){let d={name:h,uniform:e.getUniformLocation(t,h,u),offset:e.getUniformLocation(t,`offset${h}`,u)};n.enableShapeUniforms&&(d.shape=e.getUniformLocation(t,`${h}Shape`,u),d.texShape=e.getUniformLocation(t,`${h}TexShape`,u)),r.push(d)}if(n.enableShapeUniforms&&(a=e.getUniformLocation(t,"outShape",u),o=e.getUniformLocation(t,"outShapeStrides",u),s=e.getUniformLocation(t,"outTexShape",u)),n.customUniforms)for(let h of n.customUniforms)i.push(e.getUniformLocation(t,h.name,u));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:c,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:s}}function oX(e,n){if(e.length!==n.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${n.length} inputs`);e.forEach((t,r)=>{let i=t.logicalShape,a=n[r],s=a.shape;if(!w.arraysEqual(i,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${s} must match`);if(t.isUniform&&a.isUniform)return;let o=t.texShape,l=a.isUniform?null:a.texData.texShape;if(!w.arraysEqual(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function bi(e){return Q().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var lBe={R:0,G:1,B:2,A:3},lX=class{constructor(e,n=!1,t="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=Pi();this.outputShape=e,this.enableShapeUniforms=bi(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let a="";for(let s=0;s<t.length;s++)a+=`\n          if(offset == ${s}) {\n            result = values[${lBe[t[s]]}];\n          }`;this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":XO(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ${t.length});\n\n        flatIndex = idiv(flatIndex, ${t.length}, 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ${r.texture2D}(A, uv);\n          ${a}\n        }\n        ${r.output} = vec4(${i}, 0., 0., 0.);\n      }\n    `}},cX={};function uX(e){let n=Pi();return FK(e,`${n.version}\n    precision highp float;\n    ${n.attribute} vec3 clipSpacePos;\n    ${n.attribute} vec2 uv;\n    ${n.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}function dX(e){return $K(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function hX(e){return BK(e,new Uint16Array([0,1,2,2,1,3]))}function W_(e,n,t,r,i,a){zK(n,t);let s=VK(e),o=e.TEXTURE_2D;return Me(e,()=>e.bindTexture(o,s)),Me(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),Me(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),Me(e,()=>e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.NEAREST)),Me(e,()=>e.texParameteri(o,e.TEXTURE_MAG_FILTER,e.NEAREST)),1===Q().getNumber("WEBGL_VERSION")?Me(e,()=>e.texImage2D(o,0,r,n,t,0,i,a,null)):Me(e,()=>e.texStorage2D(o,1,r,n,t)),Me(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:s,texShape:[t,n]}}function QO(e){return e.internalFormatFloat}function pX(e,n,t,r){let[i,a]=B_(n,t);return W_(e,i,a,QO(r),r.textureFormatFloat,e.FLOAT)}function JO(e){return e.internalFormatHalfFloat}function fX(e,n,t,r){let[i,a]=B_(n,t);return W_(e,i,a,JO(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function eF(e){return e.downloadTextureFormat}function mX(e,n,t,r){let[i,a]=B_(n,t);return W_(e,i,a,eF(r),e.RGBA,e.UNSIGNED_BYTE)}function tF(e){return e.internalFormatPackedFloat}function gX(e,n,t,r){let[i,a]=fg(n,t);return W_(e,i,a,tF(r),e.RGBA,e.FLOAT)}function nF(e){return e.internalFormatPackedHalfFloat}function yX(e,n,t,r){let[i,a]=fg(n,t);return W_(e,i,a,nF(r),e.RGBA,r.textureTypeHalfFloat)}function bX(e,n,t){return Me(e,()=>e.bindBuffer(e.ARRAY_BUFFER,t)),jO(e,n,"clipSpacePos",t,3,20,0)&&jO(e,n,"uv",t,2,20,12)}function _X(e,n,t,r,i,a){let s,o,l;Me(e,()=>e.bindTexture(e.TEXTURE_2D,n)),i instanceof Uint8Array?(s=new Uint8Array(t*r*4),o=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(t*r*4),o=e.FLOAT,l=a.internalFormatPackedFloat),s.set(i),2===Q().getNumber("WEBGL_VERSION")?Me(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,t,r,e.RGBA,o,s)):Me(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,t,r,0,e.RGBA,o,s)),Me(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function vX(e,n,t){Me(e,()=>e.bindTexture(e.TEXTURE_2D,n)),t.data instanceof Uint8Array?2===Q().getNumber("WEBGL_VERSION")?Me(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.width,t.height,e.RGBA,e.UNSIGNED_BYTE,t.data)):Me(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width,t.height,0,e.RGBA,e.UNSIGNED_BYTE,t.data)):2===Q().getNumber("WEBGL_VERSION")?Me(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,t)):Me(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t)),Me(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function xX(e,n,t,r){let i=e.createBuffer();Me(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,i));let a=16*n*t;return Me(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)),Me(e,()=>e.readPixels(0,0,t,n,e.RGBA,e.FLOAT,0)),Me(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),i}function wX(e,n,t){let r=e,i=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,n),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function CX(e,n,t,r){let[i,a]=B_(n,t),o=new Uint8Array(function a4e(e,n){return e*n}(n*t,4));return Me(e,()=>e.readPixels(0,0,i,a,r.downloadTextureFormat,e.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function kX(e,n,t,r,i,a,s,o){let l=e,c=new Float32Array(function s4e(e,n){let[t,r]=fg(e,n);return t*r*4}(a,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,n),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function SX(e,n,t){let r=new Float32Array(n*t*4);return Me(e,()=>e.readPixels(0,0,t,n,e.RGBA,e.FLOAT,r)),r}it(cX,{bindVertexProgramAttributeStreams:()=>bX,createBufferFromOutputTexture:()=>xX,createFloat16MatrixTexture:()=>fX,createFloat16PackedMatrixTexture:()=>yX,createFloat32MatrixTexture:()=>pX,createIndexBuffer:()=>hX,createPackedMatrixTexture:()=>gX,createUnsignedBytesMatrixTexture:()=>mX,createVertexBuffer:()=>dX,createVertexShader:()=>uX,downloadByteEncodedFloatMatrixFromOutputTexture:()=>CX,downloadFloat32MatrixFromBuffer:()=>wX,downloadMatrixFromPackedOutputTexture:()=>SX,downloadPackedMatrixFromBuffer:()=>kX,getInternalFormatForFloat16MatrixTexture:()=>JO,getInternalFormatForFloat16PackedMatrixTexture:()=>nF,getInternalFormatForFloat32MatrixTexture:()=>QO,getInternalFormatForPackedMatrixTexture:()=>tF,getInternalFormatForUnsignedBytesMatrixTexture:()=>eF,uploadDenseMatrixToTexture:()=>_X,uploadPixelDataToTexture:()=>vX});var _C=class{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let n=Q().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,TK(n,e)):this.gl=Js(n),e=this.gl,2===Q().getNumber("WEBGL_VERSION")){let i=e;this.createVertexArray=()=>Me(i,()=>i.createVertexArray()),this.bindVertexArray=a=>Me(i,()=>i.bindVertexArray(a)),this.deleteVertexArray=a=>Me(i,()=>i.deleteVertexArray(a)),this.getVertexArray=()=>Me(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(null!=e){let i=e.getExtension("OES_vertex_array_object");if(null==i)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Me(e,()=>i.createVertexArrayOES()),this.bindVertexArray=a=>Me(e,()=>i.bindVertexArrayOES(a)),this.deleteVertexArray=a=>Me(e,()=>i.deleteVertexArrayOES(a)),this.getVertexArray=()=>Me(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let t="WEBGL_color_buffer_float",r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===Q().getNumber("WEBGL_VERSION")){let a="OES_texture_half_float";if(this.textureFloatExtension=V_(this.gl,"OES_texture_float"),Ka(this.gl,a))this.textureHalfFloatExtension=V_(this.gl,a);else if(Q().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(t),Ka(this.gl,r))this.colorBufferHalfFloatExtension=V_(this.gl,r);else if(Q().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(t="EXT_color_buffer_float",Ka(this.gl,t))this.colorBufferFloatExtension=this.gl.getExtension(t);else{if(!Ka(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=dX(this.gl),this.indexBuffer=hX(this.gl),this.framebuffer=UK(this.gl),this.textureConfig=HO(this.gl,this.textureHalfFloatExtension)}get debug(){return Q().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let e=this.gl;Me(e,()=>e.finish()),Me(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Me(e,()=>e.deleteFramebuffer(this.framebuffer)),Me(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Me(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Me(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),pX(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),fX(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),mX(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),vX(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,t,r){this.throwIfDisposed(),_X(this.gl,e,n,t,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),yX(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),gX(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(GO(this.gl,this.framebuffer),this.outputTexture=null),Me(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,t){return this.downloadMatrixDriver(e,()=>CX(this.gl,n,t,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,t,r,i,a){return kX(this.gl,e,0,0,0,i,a)}downloadFloat32MatrixFromBuffer(e,n){return wX(this.gl,e,n)}createBufferFromTexture(e,n,t){this.bindTextureToFrameBuffer(e);let r=xX(this.gl,n,t);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,t;if(Q().getBool("WEBGL_FENCE_API_ENABLED")){let r=e,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),t=()=>{let a=r.clientWaitSync(i,0,0);return a===r.ALREADY_SIGNALED||a===r.CONDITION_SATISFIED},n=i}else Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),t=()=>this.isQueryAvailable(n,Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):t=()=>!0;return{query:n,isFencePassed:t}}downloadMatrixFromPackedTexture(e,n,t){return this.downloadMatrixDriver(e,()=>SX(this.gl,n,t))}createProgram(e){this.throwIfDisposed();let n=this.gl;null==this.vertexShader&&(this.vertexShader=uX(n));let t=PK(n);Me(n,()=>n.attachShader(t,this.vertexShader)),Me(n,()=>n.attachShader(t,e)),LK(n,t);let r=Object.assign(t,{vao:this.createVertexArray()});return this.debug&&pC(n,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);let n=this.gl;Me(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),bX(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(Me(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&pC(this.gl,this.program),Me(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,t=!0){return this.throwIfDisposed(),t?WK(this.gl,e,n):jK(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Me(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,t){this.throwIfDisposed(),this.throwIfNoProgram(),GK(this.gl,e,n,t)}setOutputMatrixTexture(e,n,t){this.setOutputMatrixTextureDriver(e,t,n)}setOutputPackedMatrixTexture(e,n,t){this.throwIfDisposed();let[r,i]=fg(n,t);this.setOutputMatrixTextureDriver(e,r,i)}setOutputMatrixWriteRegion(e,n,t,r){this.setOutputMatrixWriteRegionDriver(t,e,r,n)}setOutputPackedMatrixWriteRegion(e,n,t,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&pC(this.gl,this.program),z_(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let e=this.gl;if(this.debug){let n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Me(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Me(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=V_(this.gl,2===Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){let t=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=t.createQuery();return t.beginQuery(r.TIME_ELAPSED_EXT,i),i}let e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(2===Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){let n=this.gl,t=this.getQueryTimerExtensionWebGL2();return void n.endQuery(t.TIME_ELAPSED_EXT)}let e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(e){var n=this;return R(function*(){return yield w.repeatedTry(()=>n.disposed||n.isQueryAvailable(e,Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),n.getQueryTime(e,Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})()}getQueryTime(e,n){if(0===n)return null;if(2===n){let t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{let t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(0===n)return!0;if(2===n){let t=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}{let t=this.getQueryTimerExtensionWebGL1(),r=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),r&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){let e=function uBe(e){let n=0;for(;n<e.length&&e[n]();++n);return n-1}(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){let{resolveFn:t}=this.itemsToPoll[n];t()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let t;"setTimeoutCustom"in Q().platform&&(t=Q().platform.setTimeoutCustom.bind(Q().platform)),w.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length),()=>0,null,t)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),fC(this.gl,e,this.framebuffer),this.debug&&z_(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(fC(this.gl,this.outputTexture,this.framebuffer),this.debug&&z_(this.gl)):GO(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);let t=n();return this.unbindTextureToFrameBuffer(),t}setOutputMatrixTextureDriver(e,n,t){this.throwIfDisposed();let r=this.gl;fC(r,e,this.framebuffer),this.debug&&z_(r),this.outputTexture=e,Me(r,()=>r.viewport(0,0,n,t)),Me(r,()=>r.scissor(0,0,n,t))}setOutputMatrixWriteRegionDriver(e,n,t,r){this.throwIfDisposed(),Me(this.gl,()=>this.gl.scissor(e,n,t,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}},{addImpl:dBe,bincountImpl:IX,bincountReduceImpl:hBe,bitwiseAndImpl:pBe,castImpl:fBe,ceilImpl:mBe,concatImpl:gBe,equalImpl:yBe,expImpl:bBe,expm1Impl:_Be,floorImpl:vBe,gatherNdImpl:xBe,gatherV2Impl:wBe,greaterImpl:CBe,greaterEqualImpl:kBe,lessImpl:SBe,lessEqualImpl:IBe,linSpaceImpl:MBe,logImpl:EBe,maxImpl:DBe,maximumImpl:ABe,minimumImpl:TBe,multiplyImpl:NBe,negImpl:OBe,notEqualImpl:FBe,prodImpl:RBe,raggedGatherImpl:PBe,raggedRangeImpl:LBe,raggedTensorToTensorImpl:$Be,rangeImpl:BBe,rsqrtImpl:VBe,scatterImpl:zBe,sigmoidImpl:UBe,simpleAbsImpl:MX,sliceImpl:HBe,sparseFillEmptyRowsImpl:WBe,sparseReshapeImpl:jBe,sparseSegmentReductionImpl:EX,sqrtImpl:GBe,staticRegexReplaceImpl:qBe,stridedSliceImpl:KBe,stringNGramsImpl:XBe,stringSplitImpl:YBe,stringToHashBucketFastImpl:ZBe,subImpl:QBe,tileImpl:JBe,topKImpl:eVe,transposeImpl:rF,uniqueImpl:tVe}=SO;function DX(e,n){return["x","y","z","w","u","v"].slice(0,n).map(t=>`${e}.${t}`)}function Li(e,n){return 1===n?[e]:DX(e,n)}var AX=class{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=bi(this.outputShape.length);let t="";for(let r=0;r<4;r++){let i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),t+=`\n        ${i}\n        ${r>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${r}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${r>0?"}":""}\n      `}this.userCode=`\n      ${function iVe(e,n){return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${n?function b4e(e,n,t="index"){let i=function y4e(e,n){let t=e.length,r=e.map(a=>`${n}[${a}]`),i=new Array(t-1);i[t-2]=r[t-1];for(let a=t-3;a>=0;--a)i[a]=`(${i[a+1]} * ${r[a+1]})`;return i}(e.map((a,s)=>s),n);return i.map((a,s)=>`int ${e[s]} = ${t} / ${i[s]}; ${s===i.length-1?`int ${e[s+1]} = ${t} - ${e[s]} * ${i[s]}`:`index -= ${e[s]} * ${i[s]}`};`).join("")}(["r","c","d"],"inputShape"):Gh(["r","c","d"],e)}\n      return ivec3(r, c, d);\n    }\n  `}(n,this.enableShapeUniforms)}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":XO(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\n\n        ${t}\n\n        setOutput(result);\n      }\n    `}};function TX(e,n,t,r,i){let s,a=function oVe(e,n){switch(e){case oi.PACKED_2X2_FLOAT32:return tF(n);case oi.PACKED_2X2_FLOAT16:return nF(n);case oi.UNPACKED_FLOAT32:return QO(n);case oi.UNPACKED_FLOAT16:return JO(n);case oi.PACKED_4X1_UNSIGNED_BYTE:return eF(n);default:throw new Error(`Unknown physical texture type ${e}`)}}(n,r);if(i){let[l,c]=fg(e[0],e[1]);s=l*c}else{let[l,c]=B_(e[0],e[1]);s=l*c}let o=function sVe(e,n){if(n===e.R32F)return 4;if(n===e.R16F)return 2;if(n===e.RGBA32F||n===e.RGBA)return 16;if(n===e.RGBA16F)return 8;if(n===e.RGBA8)return 4;throw new Error(`Unknown internal format ${n}`)}(t,a);return s*o}function NX(e,n){if(e===qa.UPLOAD)return oi.PACKED_2X2_FLOAT32;if(e===qa.RENDER||null==e)return function lVe(e){return Q().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?oi.PACKED_2X2_FLOAT32:oi.UNPACKED_FLOAT32:e?oi.PACKED_2X2_FLOAT16:oi.UNPACKED_FLOAT16}(n);if(e===qa.DOWNLOAD||e===qa.PIXELS)return oi.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function OX(e,n,t){return`${e[0]}_${e[1]}_${n}_${t}`}var Fo=class{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=bi(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${n}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}},ks="if (isnan(x)) return x;",cVe="return x;",FX="return abs(x);",uVe="return (x >= 0.0) ? x : (exp(x) - 1.0);",dVe=ks+"\n  return (x < 0.0) ? 0.0 : x;\n",hVe=ks+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",zc="return x;",pVe="return 1.0 / (1.0 + exp(-1.0 * x));",fVe="return x;",mVe="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",gVe="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",yVe="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",bVe="return 1.0 / (1.0 + exp(-1.0 * x));",Uc=class{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=bi(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${n}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}},vVe=Mo.whereImpl,iF={},kVe=Q().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),aF=class Mie extends gb{nextDataId(){return Mie.nextDataId++}constructor(n){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Q().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=n){if(n instanceof _C)t=n;else{let r=Js(Q().getNumber("WEBGL_VERSION"),n);t=new _C(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let r=Js(Q().getNumber("WEBGL_VERSION"));t=new _C(r),this.binaryCache=function CVe(e){return e in iF||(iF[e]={}),iF[e]}(Q().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new class{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,t){let r=NX(n,t),i=OX(e,r,t);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);let s,a=TX(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,t);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();let o=this.freeTextures[i].pop();return this.usedTextures[i].push(o),o}return r===oi.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===oi.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===oi.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===oi.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===oi.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(s),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),s}releaseTexture(e,n,t,r){if(null==this.freeTextures)return;let i=NX(t,r),a=OX(n,i,r);a in this.freeTextures||(this.freeTextures[a]=[]);let s=TX(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),o=Q().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==o&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[a].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;let l=this.usedTextures[a],c=l&&l.indexOf(e);if(null==c||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${this.numFreeTextures+this.numUsedTextures})`);let n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(let e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(let e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}(this.gpgpu),this.numMBBeforeWarning=function IVe(){return null==Q().global.screen?1024:Q().global.screen.height*Q().global.screen.width*window.devicePixelRatio*600/1024/1024}(),this.texData=new aw(this,ys())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(n,t,r,i,a,s){let o=this.makeTensorInfo(t,r),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:n,texShape:[i,a]},l.texShape=[i,a];let c=U_(t),u=new lX(c,!1,s),h=this.runWebGLProgram(u,[o],r,[[i,a]]);return h.shape=t,l.texture=null,this.disposeIntermediateTensorInfo(o),h.dataId}write(n,t,r){if((Q().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Q().getBool("DEBUG"))&&this.checkNumericalProblems(n),"complex64"===r&&null!=n)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let i={id:this.nextDataId()};return this.texData.set(i,{shape:t,dtype:r,values:n,usage:qa.UPLOAD,refCount:1}),i}refCount(n){return this.texData.has(n)?this.texData.get(n).refCount:0}incRef(n){this.texData.get(n).refCount++}decRef(n){this.texData.has(n)&&this.texData.get(n).refCount--}move(n,t,r,i,a){if(Q().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===i)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:r,dtype:i,values:t,usage:qa.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(n){this.disposeData(n.dataId)}readSync(n){let t=this.texData.get(n),{values:r,dtype:i,complexTensorInfos:a,slice:s,shape:o,isPacked:l}=t;if(null!=s){let d;d=l?new Uc(o,zc):new Fo(o,zc);let p=this.runWebGLProgram(d,[{dataId:n,shape:o,dtype:i}],i),f=this.readSync(p.dataId);return this.disposeIntermediateTensorInfo(p),f}if(null!=r)return this.convertAndCacheOnCPU(n);if("string"===i)return r;let u,h,c=null!=this.activeTimers;if(c&&(u=w.now()),"complex64"===i){let d=this.readSync(a.real.dataId),p=this.readSync(a.imag.dataId);h=I.mergeRealAndImagArrays(d,p)}else h=this.getValuesFromTexture(n);return c&&(this.downloadWaitMs+=w.now()-u),this.convertAndCacheOnCPU(n,h)}read(n){var t=this;return R(function*(){if(t.pendingRead.has(n)){let m=t.pendingRead.get(n);return new Promise(g=>m.push(g))}let r=t.texData.get(n),{values:i,shape:a,slice:s,dtype:o,complexTensorInfos:l,isPacked:c}=r;if(null!=s){let m;m=c?new Uc(a,zc):new Fo(a,zc);let g=t.runWebGLProgram(m,[{dataId:n,shape:a,dtype:o}],o),y=t.read(g.dataId);return t.disposeIntermediateTensorInfo(g),y}if(null!=i)return t.convertAndCacheOnCPU(n);if(Q().getBool("DEBUG")&&!Q().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Q().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let h,d,u=null;if("complex64"!==o&&Q().get("WEBGL_BUFFER_SUPPORTED")){h=t.decode(n);let m=t.texData.get(h.dataId);u=t.gpgpu.createBufferFromTexture(m.texture.texture,...hC(a))}if(t.pendingRead.set(n,[]),"complex64"!==o&&(yield t.gpgpu.createAndWaitForFence()),"complex64"===o){let m=yield Promise.all([t.read(l.real.dataId),t.read(l.imag.dataId)]);d=I.mergeRealAndImagArrays(m[0],m[1])}else if(null==u)d=t.getValuesFromTexture(n);else{let m=w.sizeFromShape(a);d=t.gpgpu.downloadFloat32MatrixFromBuffer(u,m)}if(null!=h&&t.disposeIntermediateTensorInfo(h),null!=u){let m=t.gpgpu.gl;Me(m,()=>m.deleteBuffer(u))}let p=t.convertAndCacheOnCPU(n,d),f=t.pendingRead.get(n);return t.pendingRead.delete(n),f.forEach(m=>m(p)),t.pendingDisposal.has(n)&&(t.pendingDisposal.delete(n),t.disposeData(n)&&ys().removeDataId(n,t),t.pendingDeletes--),p})()}readToGPU(n,t={}){let r=this.texData.get(n),{values:i,shape:a,slice:s,dtype:o,isPacked:l,texture:c}=r;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=s){let p;p=l?new Uc(a,zc):new Fo(a,zc);let f=this.runWebGLProgram(p,[{dataId:n,shape:a,dtype:o}],o),m=this.readToGPU(f,t);return this.disposeIntermediateTensorInfo(f),m}if(null==c)throw null!=i?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let u=this.decode(n,t.customTexShape),h=ys().makeTensorFromTensorInfo(u),d=this.texData.get(u.dataId);return Object.assign({tensorRef:h},d.texture)}bufferSync(n){let t=this.readSync(n.dataId);if("string"===n.dtype)try{let r=t.map(i=>w.decodeString(i));return wt(n.shape,n.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return wt(n.shape,n.dtype,t)}checkNumericalProblems(n){if(null!=n)for(let t=0;t<n.length;t++){let r=n[t];if(!NK(r))throw Q().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(n){let{shape:t,dtype:r,isPacked:i}=this.texData.get(n),a=w.sizeFromShape(t);if(Q().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let d=this.decode(n),p=this.texData.get(d.dataId),f=this.gpgpu.downloadMatrixFromPackedTexture(p.texture.texture,...hC(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(d),f}let s=Q().getBool("WEBGL_PACK")&&!0===i,o=s?U_(t):t,l=s?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=qa.DOWNLOAD;let n=Pi();this.outputShape=e,this.userCode=`\n      ${nX}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${n.output} = encode_float(x);\n      }\n    `}}(o):new class{constructor(e){this.variableNames=["A"],this.outTexUsage=qa.DOWNLOAD;let n=Pi();this.outputShape=e,this.userCode=`\n      ${nX}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${n.output} = encode_float(x);\n      }\n    `}}(o),c=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:n}],"float32"),u=this.texData.get(c.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(c),h}timerAvailable(){return Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(n){var t=this;let r=this.activeTimers,i=[],a=!1;null==this.programTimersStack?(this.programTimersStack=i,a=!0):this.activeTimers.push(i),this.activeTimers=i,n();let s=w.flatten(this.activeTimers.map(c=>c.query)).filter(c=>null!=c),o=w.flatten(this.activeTimers.map(c=>c.name)).filter(c=>null!=c);this.activeTimers=r,a&&(this.programTimersStack=null);let l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return R(function*(){if(Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let c=yield Promise.all(s);l.kernelMs=w.sum(c),l.getExtraProfileInfo=()=>c.map((u,h)=>({name:o[h],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else l.kernelMs={error:"WebGL query timers are not supported in this environment."};return t.uploadWaitMs=0,t.downloadWaitMs=0,l})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:w.now(),endMs:null}}endTimer(n){return Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=w.now(),n)}getQueryTime(n){var t=this;return R(function*(){return Q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?t.gpgpu.waitForQueryAndGetTime(n):n.endMs-n.startMs})()}disposeData(n,t=!1){if(this.pendingDisposal.has(n))return!1;if(!this.texData.has(n))return!0;if(t?this.texData.get(n).refCount=0:this.texData.get(n).refCount--,!t&&this.texData.get(n).refCount>0)return!1;if(this.pendingRead.has(n))return this.pendingDisposal.add(n),this.pendingDeletes++,!1;this.releaseGPUData(n);let{complexTensorInfos:r}=this.texData.get(n);return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(n),!0}releaseGPUData(n){let{texture:t,dtype:r,texShape:i,usage:a,isPacked:s,slice:o}=this.texData.get(n),l=o&&o.origDataId||n,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),null!=t&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(t,i,a,s)));let u=this.texData.get(n);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(n){return this.uploadToGPU(n),this.texData.get(n).texture.texture}getDataInfo(n){return this.texData.get(n)}shouldExecuteOnCPU(n,t=kVe){return Q().getBool("WEBGL_CPU_FORWARD")&&n.every(r=>null==this.texData.get(r.dataId).texture&&w.sizeFromShape(r.shape)<t)}getGPGPUContext(){return this.gpgpu}where(n){I.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let t=n.dataSync();return vVe(n.shape,t)}packedUnaryOp(n,t,r){let i=new Uc(n.shape,t),a=this.compileAndRun(i,[n],r);return ys().makeTensorFromTensorInfo(a)}abs(n){if(this.shouldExecuteOnCPU([n])&&"complex64"!==n.dtype){let i=MX(this.texData.get(n.dataId).values);return this.makeOutput(n.shape,n.dtype,i)}if(Q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,FX,n.dtype);let t=new Fo(n.shape,FX),r=this.compileAndRun(t,[n]);return ys().makeTensorFromTensorInfo(r)}makeTensorInfo(n,t,r){let i;if("string"===t&&null!=r&&r.length>0&&w.isString(r[0])){let a=r.map(s=>w.encodeString(s));i=this.write(a,n,t)}else i=this.write(r,n,t);return this.texData.get(i).usage=null,{dataId:i,shape:n,dtype:t}}makeOutput(n,t,r){return ys().makeTensorFromTensorInfo(this.makeTensorInfo(n,t,r),this)}unpackTensor(n){let t=new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=bi(this.outputShape.length);let n=e.length,t=Li("rc",n),r=yn(n),i=function nVe(e,n){if(1===e)return"rc";let t="";for(let r=0;r<e;r++)t+=n[r],r<e-1&&(t+=",");return t}(n,t),a=t.slice(-2),s=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${i});\n\n        setOutput(getChannel(packedInput, ${s}));\n      }\n    `}}(n.shape);return this.runWebGLProgram(t,[n],n.dtype)}packTensor(n){let t=new class{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=bi(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{let n=Li("rc",this.rank),t=yn(this.rank),r=this.getOutOfBoundsCondition(n),i=this.getSetup(n),a=this.getOutput(n);this.userCode=`\n        void main() {\n          ${t} rc = getOutputCoords();\n\n          if(${r}) {\n            setOutput(vec4(0));\n          } else {\n            ${i}\n\n            setOutput(vec4(${a}));\n          }\n        }\n      `}}getSourceCoordsArr(e){let n=[];for(let t=0;t<=1;t++)for(let r=0;r<=1;r++){let i=`${0===t?"r":"rp1"}, ${0===r?"c":"cp1"}`;for(let a=2;a<this.rank;a++)i=`${e[e.length-1-a]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let t=this.rank-2;t<this.rank;t++)n+=`${e[t]} >= ${this.enableShapeUniforms?`outShape[${t}]`:this.outputShape[t]}`,t<this.rank-1&&(n+="||");return n}getSetup(e){if(1===this.rank)return"";let n=e.slice(-2);return`\n      int r = ${n[0]};\n      int c = ${n[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1]};\n      bool rEdge = rp1 >= ${this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2]};\n    `}getOutput(e){let n=this.getSourceCoordsArr(e);return 1===this.rank?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),\n            cEdge ? 0. : getA(${n[1]}),\n            rEdge ? 0. : getA(${n[2]}),\n            rEdge || cEdge ? 0. : getA(${n[3]})`}}(n.shape);return this.runWebGLProgram(t,[n],n.dtype,null,!0)}packedReshape(n,t){let r=[Wh(n.shape),...jh(n.shape)],i={dtype:n.dtype,shape:r,dataId:n.dataId},a=[Wh(t),...jh(t)],s=new AX(a,r),c=this.runWebGLProgram(s,[i],n.dtype,[r],!0);return{dataId:c.dataId,shape:t,dtype:c.dtype}}decode(n,t){let r=this.texData.get(n),{isPacked:i,shape:a,dtype:s}=r;if(null!=t){let d=w.sizeFromShape(a);w.assert(d<=t[0]*t[1]*4,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let l,o=U_(a);l=i?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=$_.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=Pi();this.outputShape=e,this.enableShapeUniforms=bi(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?bC(["r","c","d"],e):Gh(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${n.output} = result;\n      }\n    `}}(o):new class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=$_.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=Pi();this.outputShape=e,this.enableShapeUniforms=bi(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?bC(["r","c","d"],e):Gh(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${n.output} = result;\n      }\n    `}}(o);let u=[t??hC(o)];return{dtype:s,shape:a,dataId:this.runWebGLProgram(l,[{shape:o,dtype:s,dataId:n}],s,u,!0,t).dataId}}runWebGLProgram(n,t,r,i,a=!1,s){let o=this.makeTensorInfo(n.outputShape,r),l=this.texData.get(o.dataId);if(n.packedOutput&&(l.isPacked=!0),n.outPackingScheme===$_.DENSE){let y=s??hC(n.outputShape);l.texShape=y.map(b=>2*b)}if(null!=n.outTexUsage&&(l.usage=n.outTexUsage),0===w.sizeFromShape(o.shape))return l.values=w.getTypedArrayFromDType(o.dtype,0),o;let c=[],u=t.map(y=>{if("complex64"===y.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(y.dataId);if(null==b.texture){if(!n.packedInputs&&w.sizeFromShape(y.shape)<=Q().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:b.values};n.packedInputs&&(b.isPacked=!0,b.shape=y.shape)}if(this.uploadToGPU(y.dataId),!!b.isPacked!=!!n.packedInputs)y=b.isPacked?this.unpackTensor(y):this.packTensor(y),c.push(y),b=this.texData.get(y.dataId);else if(b.isPacked&&!H_(b.shape,y.shape)){let _=y,v=y.shape;y.shape=b.shape,y=this.packedReshape(y,v),c.push(y),b=this.texData.get(y.dataId),_.shape=v}return{shape:y.shape,texData:b,isUniform:!1}});this.uploadToGPU(o.dataId);let m,h={shape:o.shape,texData:l,isUniform:!1},d=function rBe(e,n,t){let r="";n.concat(t).forEach(s=>{let o=null!=s.texData&&null!=s.texData.slice&&s.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!s.isUniform){let l=s.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:h}=ZO(e.packedInputs,s.shape,l),d="",p="",f="";if(1===u.length&&e.packedInputs){let x=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];d=`${x[0]>1}_${x[1]>1}`}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){let x=w.computeStrides(u);f=`${x[0]===l[1]}_${x[x.length-1]===l[1]}`}}else p=`${u[0]>1}_${u[1]>1}`;let m=s.shape.length,g=2===u.length&&w.arraysEqual(s.shape,l),y=1===w.sizeFromShape(s.shape),b=I.getBroadcastDims(s.shape,t.shape),_=!e.packedInputs&&m===t.shape.length&&w.arraysEqual(l,t.texData.texShape);r+=`${m}_${_}_${c?h:""}_${u.length}_${y}_${b}_${g}_${d}_${p}_${f}_${e.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`}_${o}`}else r+=`${s.shape}_${s.isUniform?"uniform":s.texData.texShape}_${o}`});let a=e.constructor.name;return a+="_"+r+"_"+e.userCode+`${Q().getNumber("WEBGL_VERSION")}`,a}(n,u,h),p=this.getAndSaveBinary(d,()=>function tBe(e,n,t,r){let i=t.map((u,h)=>{let d={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:!u.isUniform&&u.texData.isPacked,flatOffset:null};return null!=u.texData&&null!=u.texData.slice&&u.texData.slice.flatOffset>0&&(d.flatOffset=u.texData.slice.flatOffset),{name:n.variableNames[h],shapeInfo:d}}),a=i.map(u=>u.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=_4e(i,s,n),l=RK(e.gl,o),c=e.createProgram(l);return Q().get("ENGINE_COMPILE_ONLY")?{program:n,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:a,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:n,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:a,outShapeInfo:s},sX(e,n,c)))}(this.gpgpu,n,u,h)),f=null!=this.activeTimers;f&&(m=this.startTimer()),Q().get("ENGINE_COMPILE_ONLY")||function nBe(e,n,t,r,i){n.program.enableShapeUniforms||(oX(n.inShapeInfos,t),oX([n.outShapeInfo],[r]));let a=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a.texture,s[0],s[1]):e.setOutputMatrixTexture(a.texture,s[0],s[1]),e.setProgram(n.webGLProgram),e.bindVertexArray(n.webGLProgram.vao),1===Q().getNumber("WEBGL_VERSION")&&null!==n.infLoc&&e.gl.uniform1f(n.infLoc,1/0),null!==n.nanLoc&&e.gl.uniform1f(n.nanLoc,NaN);for(let l=0;l<t.length;++l){let c=t[l],{uniform:u,offset:h,shape:d,texShape:p}=n.variablesLocations[l];if(d){let{uniformShape:f}=ZO(n.program.packedInputs,c.shape,c.texData.texShape);switch(f.length){case 1:e.gl.uniform1iv(d,new Int32Array(f));break;case 2:e.gl.uniform2iv(d,new Int32Array(f));break;case 3:e.gl.uniform3iv(d,new Int32Array(f));break;case 4:e.gl.uniform4iv(d,new Int32Array(f))}}if(p&&e.gl.uniform2i(p,c.texData.texShape[0],c.texData.texShape[1]),null!=u){if(c.isUniform){if(w.sizeFromShape(c.shape)<2)e.gl.uniform1f(u,c.uniformValues[0]);else{let f=c.uniformValues;f instanceof Float32Array||(f=new Float32Array(f)),e.gl.uniform1fv(u,f)}continue}null!=c.texData.slice&&null!=h&&e.gl.uniform1i(h,c.texData.slice.flatOffset),e.setInputMatrixTexture(c.texData.texture.texture,u,l)}}let o=n.outShapeLocation;if(o)switch(r.shape.length){case 1:e.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(o,new Int32Array(r.shape))}if(n.outShapeStridesLocation){let l=w.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(n.outShapeStridesLocation,new Int32Array(l));break;case 3:e.gl.uniform2iv(n.outShapeStridesLocation,new Int32Array(l));break;case 4:e.gl.uniform3iv(n.outShapeStridesLocation,new Int32Array(l))}}if(n.outTexShapeLocation&&e.gl.uniform2i(n.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),n.program.customUniforms&&i)for(let l=0;l<n.program.customUniforms.length;++l){let c=n.program.customUniforms[l],u=n.customUniformLocations[l],h=i[l];if("float"===c.type)e.gl.uniform1fv(u,h);else if("vec2"===c.type)e.gl.uniform2fv(u,h);else if("vec3"===c.type)e.gl.uniform3fv(u,h);else if("vec4"===c.type)e.gl.uniform4fv(u,h);else if("int"===c.type)e.gl.uniform1iv(u,h);else if("ivec2"===c.type)e.gl.uniform2iv(u,h);else if("ivec3"===c.type)e.gl.uniform3iv(u,h);else{if("ivec4"!==c.type)throw Error(`uniform type ${c.type} is not supported yet.`);e.gl.uniform4iv(u,h)}}e.executeProgram()}(this.gpgpu,p,u,h,i),c.forEach(y=>this.disposeIntermediateTensorInfo(y)),f&&(m=this.endTimer(m),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(m)}));let g=Q().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){let y=w.now();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!Q().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&!1===a){let y=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),y}return o}compileAndRun(n,t,r,i,a=!1){return this.runWebGLProgram(n,t,r=r||t[0].dtype,i,a)}getAndSaveBinary(n,t){return n in this.binaryCache||(this.binaryCache[n]=t()),this.binaryCache[n]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Q().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),null!=this.canvas&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=G(()=>{if(!Q().get("WEBGL_RENDER_FLOAT32_ENABLED")){let n=Q().getBool("DEBUG");Q().set("DEBUG",!1);let t=this.abs(He(1e-8)).dataSync()[0];if(Q().set("DEBUG",n),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(n){let t=this.texData.get(n),{shape:r,dtype:i,values:a,texture:s,usage:o,isPacked:l}=t;if(null!=s)return;let u,c=null!=this.activeTimers;c&&(u=w.now());let h=t.texShape;if(null==h&&(h=XK(r,l),t.texShape=h),null!=a){let p,d=U_(r),f=h[1],m=h[0],g=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(l||!g)&&([f,m]=fg(h[0],h[1])),p=l?new class{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=Pi();this.outputShape=e,this.enableShapeUniforms=bi(this.outputShape.length);let r="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let s=0;s<=1;s++){let o=2*a+s;r+=`\n          localCoords = coords;\n          if(localCoords[2] + ${s} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {\n          localCoords[2] += ${s};\n          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {\n            localCoords[1] += ${a};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${t.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${o}] = values[0];\n            } else if (offset == 1) {\n              result[${o}] = values[1];\n            } else if (offset == 2) {\n              result[${o}] = values[2];\n            } else {\n              result[${o}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":XO(e)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${r}\n\n          ${t.output} = ${i};\n        }\n    `}}(d,g):new lX(d,g);let y=g?[m,f]:h,b=this.makeTensorInfo(y,i),_=this.texData.get(b.dataId);_.usage=g?qa.PIXELS:qa.UPLOAD,_.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),f,m,a);let x=this.runWebGLProgram(p,[b],i,[[m,f]],!0),S=this.texData.get(x.dataId);t.texShape=S.texShape,t.isPacked=S.isPacked,t.usage=S.usage,Q().get("ENGINE_COMPILE_ONLY")?this.disposeData(x.dataId):(t.texture=S.texture,t.values=null,this.texData.delete(x.dataId)),this.disposeIntermediateTensorInfo(b),c&&(this.uploadWaitMs+=w.now()-u)}else{let d=this.acquireTexture(h,o,i,l);t.texture=d}}convertAndCacheOnCPU(n,t){let r=this.texData.get(n),{dtype:i}=r;return null!=t&&(r.values=function MVe(e,n){if("float32"===n||"complex64"===n)return e;if("int32"===n||"bool"===n){let t="int32"===n?new Int32Array(e.length):new Uint8Array(e.length);for(let r=0;r<t.length;++r)t[r]=Math.round(e[r]);return t}throw new Error(`Unknown dtype ${n}`)}(t,i)),r.values}acquireTexture(n,t,r,i){if(this.numBytesInGPU+=this.computeBytes(n,r),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){let a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(n,t,i)}computeBytes(n,t){return n[0]*n[1]*w.bytesPerElement(t)}checkCompileCompletion(){for(let[,n]of Object.entries(this.binaryCache))this.checkCompletion_(n)}checkCompileCompletionAsync(){var n=this;return R(function*(){let t=[];if(n.gpgpu.parallelCompilationExtension){for(let[,r]of Object.entries(n.binaryCache))t.push(n.checkCompletionAsync_(r));return Promise.all(t)}for(let[,r]of Object.entries(n.binaryCache)){let i=new Promise(a=>{try{n.checkCompletion_(r),a(!0)}catch(s){throw s}});t.push(i)}return Promise.all(t)})()}checkCompletionAsync_(n){var t=this;return R(function*(){return t.gpgpu.gl.getProgramParameter(n.webGLProgram,t.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?t.checkCompletion_(n):(yield eT(),t.checkCompletionAsync_(n))})()}checkCompletion_(n){if(!1===this.gpgpu.gl.getProgramParameter(n.webGLProgram,this.gpgpu.gl.LINK_STATUS))throw console.log(this.gpgpu.gl.getProgramInfoLog(n.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(n.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)?(WO(n.source,this.gpgpu.gl.getShaderInfoLog(n.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let n of Object.values(this.binaryCache)){this.gpgpu.buildVao(n.webGLProgram);let{variablesLocations:t,customUniformLocations:r,infLoc:i,nanLoc:a,outShapeLocation:s,outShapeStridesLocation:o,outTexShapeLocation:l}=sX(this.gpgpu,n.program,n.webGLProgram);n.variablesLocations=t,n.customUniformLocations=r,n.infLoc=i,n.nanLoc=a,n.outShapeLocation=s,n.outShapeStridesLocation=o,n.outTexShapeLocation=l}}createTensorFromGPUData(n,t,r){n.channels=n.channels||"RGBA";let{texture:i,height:a,width:s,channels:o}=n,l=ys().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let c=l.writeTexture(i,t,r,a,s,o);return ys().makeTensorFromDataId(c,t,r,l)}};aF.nextDataId=0;var EVe="4.16.0";function RX(){Q().set("WEBGL_FORCE_F16_TEXTURES",!0)}Yb.isBrowser()&&Nw("webgl",()=>new aF,2);var DVe={forceHalfFloat:RX},sF="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",Kh=class{constructor(e,n,t){this.variableNames=["A","B"],this.outputShape=I.assertAndGetBroadcastShape(n,t),this.enableShapeUniforms=bi(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}},Xh="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n",vg=class{constructor(e,n,t,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=I.assertAndGetBroadcastShape(n,t);let i=this.outputShape.length;this.enableShapeUniforms=bi(i);let a="";if(r)if(0===i||1===w.sizeFromShape(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(a=`\n          ${yn(i)} coords = getOutputCoords();\n        `,1===i)a+=this.enableShapeUniforms?"\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{let s=Li("coords",i);a+=this.enableShapeUniforms?`\n            bool nextRowOutOfBounds =\n              (${s[i-2]} + 1) >= outShape[${i} - 2];\n            bool nextColOutOfBounds =\n              (${s[i-1]} + 1) >= outShape[${i} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:`\n            bool nextRowOutOfBounds =\n              (${s[i-2]} + 1) >= ${this.outputShape[i-2]};\n            bool nextColOutOfBounds =\n              (${s[i-1]} + 1) >= ${this.outputShape[i-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${a}\n\n        setOutput(result);\n      }\n    `}};function Ma(e){let{inputs:n,backend:t}=e,{x:r}=n;return t.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var AVe={kernelName:_d,backendName:"webgl",kernelFunc:Ma};function Hc(e){let{inputs:n,backend:t}=e,{real:r,imag:i}=n,a=t.makeTensorInfo(r.shape,"complex64"),s=t.texData.get(a.dataId),o=Ma({inputs:{x:r},backend:t}),l=Ma({inputs:{x:i},backend:t});return s.complexTensorInfos={real:o,imag:l},a}var TVe={kernelName:dw,backendName:"webgl",kernelFunc:Hc},PX="return (a < 0.) ? b * a : a;",LX="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",OVe={kernelName:Cd,backendName:"webgl",kernelFunc:function NVe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{alpha:a}=r,s=t.makeTensorInfo([],"float32",w.createScalarValue(a,"float32")),o=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vg(LX,i.shape,s.shape):new Kh(PX,i.shape,s.shape),l=t.runWebGLProgram(o,[i,s],"float32");return t.disposeIntermediateTensorInfo(s),l}},$X="return (a < 0.) ? b * a : a;",BX="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",RVe={kernelName:Bd,backendName:"webgl",kernelFunc:function FVe(e){let{inputs:n,backend:t}=e,{x:r,alpha:i}=n,a=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vg(BX,r.shape,i.shape):new Kh($X,r.shape,i.shape);return t.runWebGLProgram(a,[r,i],"float32")}},xg="if (isnan(x)) return x;";function Lt({opSnippet:e,packedOpSnippet:n,cpuKernelImpl:t,dtype:r}){return({inputs:i,backend:a})=>{let u,{x:s}=i,o=a,l=r||s.dtype;if(o.shouldExecuteOnCPU([s])&&null!=t){let h=o.texData.get(s.dataId),d=t(h.values,l);return o.makeTensorInfo(s.shape,l,d)}return u=Q().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new Uc(s.shape,n):new Fo(s.shape,e),o.runWebGLProgram(u,[s],l)}}function li({opSnippet:e,packedOpSnippet:n,checkOutOfBounds:t=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:a}){return({inputs:s,backend:o})=>{let{a:l,b:c}=s,u=o;if(r&&"complex64"===l.dtype){let f=u.texData.get(l.dataId),m=u.texData.get(c.dataId),[g,y]=[[f.complexTensorInfos.real,m.complexTensorInfos.real],[f.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(_=>{let[v,x]=_,S={dataId:v.dataId,dtype:v.dtype,shape:l.shape},M={dataId:x.dataId,dtype:x.dtype,shape:c.shape},D=new Kh(e,l.shape,c.shape);return u.runWebGLProgram(D,[S,M],za(v.dtype,x.dtype))}),b=Hc({inputs:{real:g,imag:y},backend:u});return u.disposeIntermediateTensorInfo(g),u.disposeIntermediateTensorInfo(y),b}let p,h=a||za(l.dtype,c.dtype);if(("string"===l.dtype||"string"===c.dtype||u.shouldExecuteOnCPU([l,c]))&&null!=i){let f=u.texData.get(l.dataId).values,m=u.texData.get(c.dataId).values,g="string"===l.dtype?I.fromUint8ToStringArray(f):f,y="string"===l.dtype?I.fromUint8ToStringArray(m):m,[b,_]=i(l.shape,c.shape,g,y,h),v=u.makeTensorInfo(_,h);return u.texData.get(v.dataId).values=b,v}return p=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new vg(n,l.shape,c.shape,t):new Kh(e,l.shape,c.shape),u.runWebGLProgram(p,[l,c],h)}}function j_(e,n=!1){if("linear"===e)return n?fVe:cVe;if("relu"===e)return n?gVe:dVe;if("elu"===e)return n?mVe:uVe;if("relu6"===e)return n?yVe:hVe;if("prelu"===e)return n?BX:$X;if("leakyrelu"===e)return n?LX:PX;if("sigmoid"===e)return n?bVe:pVe;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}var VX=class{constructor(e,n,t,r=!1,i=!1,a=!1,s=null,o=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=bi(this.outputShape.length);let u=Math.ceil((r?e[1]:e[2])/2),h=r?"i * 2, rc.y":"rc.y, i * 2",d=i?"rc.z, i * 2":"i * 2, rc.z",p=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",g="";s&&(m=o?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${s}\n        }`:l?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${s}\n        }`:`vec4 activation(vec4 x) {\n          ${s}\n        }`,g="result = activation(result);");let y=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let b="rc.x",_="rc.x";e[0]<n[0]?b=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(_=`imod(rc.x, ${n[0]})`),this.userCode=`\n      ${m}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${u}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ${b};\n        int batchB = ${_};\n        for (int i = 0; i < ${u}; i++) {\n          vec4 a = getMatrixA(batchA, ${h});\n          vec4 b = getMatrixB(batchB, ${d});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${p[0]} * ${f[0]});\n          result += (${p[1]} * ${f[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${y}\n\n        ${g}\n\n        setOutput(result);\n      }\n    `}},zX={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},UX=class{constructor(e,n,t){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=I.assertAndGetBroadcastShape(n,t),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}},HX="return a * b;";function oF(e){let s,{inputs:n,backend:t}=e,{a:r,b:i}=n,a=I.upcastType(r.dtype,i.dtype);if("complex64"===r.dtype){let o=t.texData.get(r.dataId),l=t.texData.get(i.dataId),c=new UX(zX.REAL,r.shape,i.shape),u=new UX(zX.IMAG,r.shape,i.shape),h=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],d=t.runWebGLProgram(c,h,"float32"),p=t.runWebGLProgram(u,h,"float32"),f=Hc({inputs:{real:d,imag:p},backend:t});return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(p),f}if(t.shouldExecuteOnCPU([r,i])){let o=t.texData.get(r.dataId),l=t.texData.get(i.dataId),[c,u]=NBe(r.shape,i.shape,o.values,l.values,a),h=t.makeTensorInfo(u,a);return t.texData.get(h.dataId).values=c,h}return s=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vg(HX,r.shape,i.shape):new Kh(HX,r.shape,i.shape),t.runWebGLProgram(s,[r,i],a)}var PVe={kernelName:Rd,backendName:"webgl",kernelFunc:oF};function Ie(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{shape:a}=r,s=t,o=w.sizeFromShape(i.shape),l=w.inferFromImplicitShape(a,o),c=w.sizeFromShape(l);w.assert(o===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);let u=s.texData.get(i.dataId);return!u.isPacked||H_(i.shape,l)||null!==u.texture&&H_(u.shape,l)?(s.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype}):function LVe(e,n,t){let r=[Wh(e.shape),...jh(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},a=[Wh(n),...jh(n)],s=new AX(a,r),c=t.runWebGLProgram(s,[i],e.dtype,[r],!0);return{dataId:c.dataId,shape:n,dtype:c.dtype}}(i,l,s)}var $Ve={kernelName:bm,backendName:"webgl",kernelFunc:Ie},WX=class{constructor(e,n){this.variableNames=["x"];let{windowSize:t,batchSize:r,inSize:i,outSize:a}=e;this.outputShape=[r,a];let s=4*Math.floor(t/4),o=t%4,l="sumValue += dot(values, ones);";if(null!=n){let u=1/n;l=`sumValue += dot(values * ${w.isInt(u)?u.toPrecision(2):u}, ones);`}let c="";i%t>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${t};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${s}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${s};\n        if (${1===o}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===o}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===o}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}},BVe=class{constructor(e,n){this.variableNames=["x"];let{windowSize:t,batchSize:r,inSize:i,outSize:a}=e;this.outputShape=[r,a];let s="0.0",o="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",o="min"):"max"===n&&(s="-1.0 / 1e-20",o="max");let l=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===n?l="sumValue":"prod"===n?l="prodValue":"all"===n?l="allValue":"any"===n&&(l="anyValue");let c=4*Math.floor(t/4),u=t%4,h=`\n      if (${"sum"===n}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===n}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${o}(values, minMaxValue);\n        if (${"min"===n} || ${"max"===n}) {\n          minMaxValue = ${o}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,d="vec4";"all"===n?(s="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===n&&(s="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";i%t>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${s};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${t};\n\n        vec4 minMaxValue = vec4(${s});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${c}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${c};\n        if (${1===u}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${2===u}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${3===u}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${h}\n        }\n        setOutput(${l});\n      }\n    `}};function Yh(e,n,t,r){let i=function VVe(e){let n=[];for(;0===n.length||1!==n[n.length-1].outSize;){let t=n.length?n[n.length-1].outSize:e[1],r=I.computeOptimalWindowSize(t);n.push({inSize:t,windowSize:r,outSize:Math.ceil(t/r)})}return n}(e.shape),a=e;for(let s=0;s<i.length;s++){let u,h,{inSize:o,windowSize:l,outSize:c}=i[s];u="mean"===t?0===s?new WX({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c},o):new WX({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c}):new BVe({windowSize:l,inSize:o,batchSize:e.shape[0],outSize:c},t),h=a,a=r.runWebGLProgram(u,[a],n),h.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(h)}return a}var zVe=class{constructor(e,n){this.variableNames=["A"];let t=new Array(e.length);for(let a=0;a<t.length;a++)t[a]=e[n[a]];this.outputShape=t,this.rank=t.length;let r=yn(this.rank),i=function UVe(e){let n=e.length;if(n>6)throw Error(`Transpose for rank ${n} is not yet supported`);let t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(n);for(let i=0;i<e.length;i++)r[e[i]]=t[i];return r.join()}(n);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${i}));\n    }\n    `}},HVe=class{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let t=new Array(e.length);for(let c=0;c<t.length;c++)t[c]=e[n[c]];if(this.outputShape=t,this.rank=t.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let r=yn(this.rank),i=DX("rc",this.rank),a=new Array(this.rank);for(let c=0;c<n.length;c++)a[n[c]]=i[c];let s=`vec2(${a.slice(-2).join()})`,o=`++${i[this.rank-1]} < ${t[this.rank-1]}`,l=`getChannel(getA(${a.join()}), ${s})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${l};\n      if(${o}) {\n        result[1] = ${l};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${t[this.rank-2]}) {\n        result[2] = ${l};\n        if(${o}) {\n          result[3] = ${l};\n        }\n      }\n      setOutput(result);\n    }\n    `}};function vC(e,n,t){let r=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new HVe(e.shape,n):new zVe(e.shape,n);return t.runWebGLProgram(r,[e],e.dtype)}function xC(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,keepDims:s}=r;return function WVe(e,n,t,r){let a=e.shape.length,s=w.parseAxisParam(n,e.shape),o=s,l=I.getAxesPermutation(o,a),c=null!=l,u=e;c&&(u=vC(e,l,r),o=I.getInnerMostAxes(o.length,a)),I.assertAxesAreInnerMostDims("sum",o,a);let[h,d]=I.computeOutAndReduceShapes(u.shape,o),p=h;t&&(p=I.expandShapeToKeepDim(h,s));let f=w.sizeFromShape(d),g=Ie({inputs:{x:u},attrs:{shape:[w.sizeFromShape(e.shape)/f,f]},backend:r}),b=Yh(g,Aw(e.dtype),"sum",r),_=Ie({inputs:{x:b},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(b),c&&r.disposeIntermediateTensorInfo(u),_}(i,a,s,t)}var jVe={kernelName:nh,backendName:"webgl",kernelFunc:xC};function $i(e){let c,{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{perm:a}=r,s=t,l=new Array(i.shape.length);for(let u=0;u<l.length;u++)l[u]=i.shape[a[u]];if(s.shouldExecuteOnCPU([i])){let u=s.texData.get(i.dataId).values,h=rF(u,i.shape,i.dtype,a,l);c=s.makeTensorInfo(l,i.dtype),s.texData.get(c.dataId).values=h}else c=vC(i,a,s);return c}var GVe={kernelName:hl,backendName:"webgl",kernelFunc:$i},jX=1e3;function wC({a:e,b:n,transposeA:t,transposeB:r,backend:i,bias:a=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:l=null}){let c=e.shape.length,u=n.shape.length,h=t?e.shape[c-2]:e.shape[c-1],d=r?n.shape[u-1]:n.shape[u-2],p=t?e.shape[c-1]:e.shape[c-2],f=r?n.shape[u-2]:n.shape[u-1],m=e.shape.slice(0,-2),g=n.shape.slice(0,-2),y=w.sizeFromShape(m),b=w.sizeFromShape(g),_=zm.assertAndGetBroadcastShape(e.shape.slice(0,-2),n.shape.slice(0,-2)).concat([p,f]);w.assert(h===d,()=>`Error in matMul: inner shapes (${h}) and (${d}) of Tensors with shapes ${e.shape} and ${n.shape} and transposeA=${t} and transposeB=${r} must match.`);let z,v=t?[y,h,p]:[y,p,h],x=r?[b,f,d]:[b,d,f],S=Ie({inputs:{x:e},backend:i,attrs:{shape:v}}),M=Ie({inputs:{x:n},backend:i,attrs:{shape:x}}),D=[S,M],N=Math.max(y,b),F=t?S.shape[1]:S.shape[2],O=null!=a,k=null!=s,P="leakyrelu"===l,j=null!=l?j_(l,!0):null;if((1===p||1===f)&&F>jX&&!1===(O||k||P||null!=j)){let q=S,J=M;t&&(q=$i({inputs:{x:S},backend:i,attrs:{perm:[0,2,1]}}),D.push(q)),r&&(J=$i({inputs:{x:M},backend:i,attrs:{perm:[0,2,1]}}),D.push(J));let ie=1===f,pe=q;1!==f&&(pe=Ie({inputs:{x:q},backend:i,attrs:{shape:[N,F,1]}}),D.push(pe));let le=1===f?2:1,he=J;ie&&(he=Ie({inputs:{x:J},backend:i,attrs:{shape:[N,1,F]}}),D.push(he));let _e=oF({inputs:{a:pe,b:he},backend:i});z=xC({inputs:{x:_e},backend:i,attrs:{axis:le,keepDims:!0}}),D.push(_e)}else{let q=za(e.dtype,n.dtype),J=new VX(v,x,[N,p,f],t,r,O,j,k,P),te=[S,M];if(null!=a&&te.push(a),k&&te.push(s),P){let ie=i.makeTensorInfo([],"float32",w.createScalarValue(o,"float32"));te.push(ie),D.push(ie)}z=i.runWebGLProgram(J,te,q)}let W=Ie({inputs:{x:z},backend:i,attrs:{shape:_}});D.push(z);for(let q of D)i.disposeIntermediateTensorInfo(q);return W}var KVe={kernelName:lh,backendName:"webgl",kernelFunc:function qVe(e){let{inputs:n,backend:t,attrs:r}=e,{a:i,b:a,bias:s,preluActivationWeights:o}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r;return wC({a:i,b:a,transposeA:l,transposeB:c,backend:t,bias:s,preluActivationWeights:o,leakyreluAlpha:h,activation:u})}},GX="return abs(x);",YVe={kernelName:Nf,backendName:"webgl",kernelFunc:function XVe(e){let i,{inputs:n,backend:t}=e,{x:r}=n;if(t.shouldExecuteOnCPU([r])&&"complex64"!==r.dtype){let a=t.texData.get(r.dataId),s=MX(a.values);return t.makeTensorInfo(r.shape,r.dtype,s)}return i=Q().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Uc(r.shape,GX):new Fo(r.shape,GX),t.runWebGLProgram(i,[r],r.dtype)}},QVe=Lt({opSnippet:ks+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),JVe={kernelName:Wu,backendName:"webgl",kernelFunc:QVe},tze=Lt({opSnippet:ks+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),nze={kernelName:ju,backendName:"webgl",kernelFunc:tze},qX="return a + b;",rze=li({opSnippet:qX,packedOpSnippet:qX,supportsComplex:!0,cpuKernelImpl:dBe}),ize={kernelName:hc,backendName:"webgl",kernelFunc:rze},oze={kernelName:Gu,backendName:"webgl",kernelFunc:function CC(e){let{inputs:n,backend:t}=e,r=n;if(1===r.length)return Ma({inputs:{x:r[0]},backend:t});if(r.length>Q().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let o=Math.floor(r.length/2),l=CC({inputs:r.slice(0,o),backend:t}),c=CC({inputs:r.slice(o),backend:t});return CC({inputs:[l,c],backend:t})}let i=r.map(o=>o.dtype).reduce((o,l)=>za(o,l)),a=r.map(o=>o.shape),s=Q().getBool("WEBGL_PACK")?new class{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,a)=>`T${a}`);let t=[];this.variableNames.forEach(i=>{t.push(`vec4 v${i} = get${i}AtOutCoords();`)});let r=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`\n      void main() {\n        ${t.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}(r[0].shape,a):new class{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,a)=>`T${a}`);let t=[];this.variableNames.forEach(i=>{t.push(`float v${i} = get${i}AtOutCoords();`)});let r=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`\n      void main() {\n        ${t.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}(r[0].shape,a);return t.runWebGLProgram(s,r,i)}},cze={kernelName:Of,backendName:"webgl",kernelFunc:function lze(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,keepDims:s}=r,o=i.shape.length,l=w.parseAxisParam(a,i.shape),c=l,u=I.getAxesPermutation(c,o),h=i;null!=u&&(h=$i({inputs:{x:i},backend:t,attrs:{perm:u}}),c=I.getInnerMostAxes(c.length,o)),I.assertAxesAreInnerMostDims("all",c,o);let y,[d,p]=I.computeOutAndReduceShapes(h.shape,c),m=Ie({inputs:{x:h},backend:t,attrs:{shape:[-1,w.sizeFromShape(p)]}}),g=Yh(m,m.dtype,"all",t);return y=Ie(s?{inputs:{x:g},backend:t,attrs:{shape:I.expandShapeToKeepDim(d,l)}}:{inputs:{x:g},backend:t,attrs:{shape:d}}),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(g),null!=u&&t.disposeIntermediateTensorInfo(h),y}},dze={kernelName:Ff,backendName:"webgl",kernelFunc:function uze(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,keepDims:s}=r,o=i.shape.length,l=w.parseAxisParam(a,i.shape),c=l,u=I.getAxesPermutation(c,o),h=i;null!=u&&(h=$i({inputs:{x:i},backend:t,attrs:{perm:u}}),c=I.getInnerMostAxes(c.length,o)),I.assertAxesAreInnerMostDims("any",c,o);let y,[d,p]=I.computeOutAndReduceShapes(h.shape,c),m=Ie({inputs:{x:h},backend:t,attrs:{shape:[-1,w.sizeFromShape(p)]}}),g=Yh(m,m.dtype,"any",t);return y=Ie(s?{inputs:{x:g},backend:t,attrs:{shape:I.expandShapeToKeepDim(d,l)}}:{inputs:{x:g},backend:t,attrs:{shape:d}}),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(g),null!=u&&t.disposeIntermediateTensorInfo(h),y}},hze=class{constructor(e,n,t){this.variableNames=["A"];let{windowSize:r,batchSize:i,outSize:a}=e;t||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${t?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));"};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${"max"===n?">":"<"} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}},pze=class{constructor(e,n,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,w.assert(e.length>2,()=>`Packed arg${t.charAt(0).toUpperCase()+t.slice(1)} supports only inputs with rank above 2.`);let a=Math.ceil(e[e.length-1]/n);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");let u,h,s=this.outputShape,o=s.length,l=yn(o),c=Li("coords",o);if(1===a){h=o+1;let M=yn(h);u=`\n        ${M} sourceLocR = ${M}(${c.join()}, 0);\n        ++${c[o-1]};\n        ${M} sourceLocG = ${M}(${c.join()}, 0);\n        ++${c[o-2]};\n        ${M} sourceLocA = ${M}(${c.join()}, 0);\n        --${c[o-1]};\n        ${M} sourceLocB = ${M}(${c.join()}, 0);\n        --${c[o-2]};`}else h=o,u=`\n        ${l} sourceLocR = coords;\n        ++${c[o-1]};\n        ${l} sourceLocG = coords;\n        ++${c[o-2]};\n        ${l} sourceLocA = coords;\n        --${c[o-1]};\n        ${l} sourceLocB = coords;\n        --${c[o-2]};`;let d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],f=d.map(M=>"int "+M),m=Li("sourceLocR",h-1).concat("inIdx.r"),g=Li("sourceLocG",h-1).concat("inIdx.g"),y=Li("sourceLocB",h-1).concat("inIdx.b"),b=Li("sourceLocA",h-1).concat("inIdx.a"),_="max"===t?"greaterThan":"lessThan",v=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${y.join()}),\n                             getBestIndicesAChannel(${b.join()})));`,x=`vec4(\n            getAChannel(${m.join()}),\n            hasNextCol ? getAChannel(${g.join()}) : 0.,\n            hasNextRow ? getAChannel(${y.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,S=r?"":`\n      float getBestIndicesAChannel(${f.join()}) {\n        return getChannel(getBestIndicesA(${d.join()}),\n                                          vec2(${d.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${f.join()}) {\n        return getChannel(getA(${d.join()}),\n                               vec2(${d.slice(-2).join()}));\n      }\n      ${S}\n      void main() {\n        ${l} coords = getOutputCoords();\n        bool hasNextCol = ${c[o-1]} < ${s[o-1]-1};\n        bool hasNextRow = ${c[o-2]} < ${s[o-2]-1};\n        ${u}\n        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},\n          sourceLocB${p}, sourceLocA${p}) * ${n};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${x};\n\n        for (int i = 0; i < ${n}; i++) {\n          inIdx = srcIdx;\n          ${v}\n          vec4 candidate = ${x};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${_}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}};function KX(e,n,t,r=null){let i=n.shape[0],a=n.shape[1];null!=r&&(i=r.shape[0],a=r.shape[1]);let s=I.computeOptimalWindowSize(a),o={windowSize:s,inSize:a,batchSize:i,outSize:Math.ceil(a/s)},l=new hze(o,t,null==r),c=[n];null!=r&&c.push(r);let u=e.runWebGLProgram(l,c,"int32");if(1===u.shape[1])return u;let h=KX(e,n,t,u);return e.disposeIntermediateTensorInfo(u),h}function XX(e,n,t,r=null){let i=null!=r?r.shape:n.shape,s=I.computeOptimalWindowSize(i[i.length-1]),o=new pze(i,s,t,null==r),c=e.runWebGLProgram(o,null==r?[n]:[n,r],"int32");if(c.shape.length===n.shape.length){let u=XX(e,n,t,c);return e.disposeIntermediateTensorInfo(c),u}return c}function YX(e,n,t,r){let i=[t];if(I.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,n.shape.length),!Q().getBool("WEBGL_PACK_REDUCE")||n.shape.length<=2){let a=[],s=e.texData.get(n.dataId),l=n;null!==s&&s.isPacked&&(l=e.unpackTensor(n),a.push(l));let[c,u]=I.computeOutAndReduceShapes(l.shape,i),h=w.sizeFromShape(u),d=Ie({inputs:{x:l},backend:e,attrs:{shape:[-1,h]}});a.push(d);let p=KX(e,d,r);a.push(p);let f=Ie({inputs:{x:p},backend:e,attrs:{shape:c}});return a.forEach(m=>e.disposeIntermediateTensorInfo(m)),f}return XX(e,n,r)}var mze={kernelName:Rf,backendName:"webgl",kernelFunc:function fze(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a}=r,s=w.parseAxisParam(a,i.shape),o=I.getAxesPermutation(s,i.shape.length),l=i,c=[];null!=o&&(l=$i({inputs:{x:i},backend:t,attrs:{perm:o}}),c.push(l),s=I.getInnerMostAxes(s.length,l.shape.length)),I.assertAxesAreInnerMostDims("argMax",[s[0]],l.shape.length);let u=YX(t,l,s[0],"max");return c.forEach(h=>t.disposeIntermediateTensorInfo(h)),u}},yze={kernelName:Pf,backendName:"webgl",kernelFunc:function gze(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a}=r,s=w.parseAxisParam(a,i.shape),o=I.getAxesPermutation(s,i.shape.length),l=i,c=[];null!=o&&(l=$i({inputs:{x:i},backend:t,attrs:{perm:o}}),c.push(l),s=I.getInnerMostAxes(s.length,l.shape.length)),I.assertAxesAreInnerMostDims("argMin",[s[0]],l.shape.length);let u=YX(t,l,s[0],"min");return c.forEach(h=>t.disposeIntermediateTensorInfo(h)),u}},_ze=Lt({opSnippet:ks+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),vze={kernelName:qu,backendName:"webgl",kernelFunc:_ze},wze=Lt({opSnippet:ks+"return log(x + sqrt(x * x + 1.0));"}),Cze={kernelName:Ku,backendName:"webgl",kernelFunc:wze},Sze=Lt({opSnippet:ks+"\n  return atan(x);\n"}),Ize={kernelName:Xu,backendName:"webgl",kernelFunc:Sze},Dze=li({opSnippet:sF+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Xh+"\n  return result;\n"}),Aze={kernelName:Zu,backendName:"webgl",kernelFunc:Dze},Nze=Lt({opSnippet:ks+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),Oze={kernelName:Yu,backendName:"webgl",kernelFunc:Nze},G_=class{constructor(e,n,t,r=!1,i=!1){if(this.variableNames=["x"],"avg"===n&&t)throw new Error("Cannot compute positions for average pool.");let a=e.filterWidth,s=e.strideHeight,o=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;let f="avg"===n,y="0.0";if(f||(y="-1.0 / 1e-20"),t)return void(this.userCode=`\n        const ivec2 strides = ivec2(${s}, ${o});\n        const ivec2 pads = ivec2(${d}, ${p});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${u};\n              wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${h};\n                wC += ${c}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?i?`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`:`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`:`wR * ${h} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let _=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===n&&(_="avgValue / max(count, 1.0)");let v=4*Math.floor(a/4),x=a%4,S=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${s}, ${o});\n      const ivec2 pads = ivec2(${d}, ${p});\n      const float initializationValue = ${y};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${y});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${u};\n            wR += ${l}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${v}; wC += 4) {\n            int xC = xCCorner + wC * ${c};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${c}, d),\n              getValue(batch, xR, xC + 2 * ${c}, d),\n              getValue(batch, xR, xC + 3 * ${c}, d)\n            );\n\n            ${S}\n          }\n\n          int xC = xCCorner + ${v};\n          if (${1===x}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${S}\n          } else if (${2===x}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${c}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${S}\n          } else if (${3===x}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${c}, d),\n              getValue(batch, xR, xC + 2 * ${c}, d),\n              initializationValue\n            );\n\n            ${S}\n          }\n        }\n        setOutput(${_});\n      }\n    `}},lF=class{constructor(e,n,t,r=!1,i=!1){if(this.variableNames=["x"],"avg"===n&&t)throw new Error("Cannot compute positions for average pool.");let a=e.filterWidth,s=e.strideDepth,o=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,u=e.dilationHeight,h=e.dilationWidth,d=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;let b="avg"===n,_="0.0";if(b||(_="-1.0 / 1e-20"),t)return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${s}, ${o}, ${l});\n        const ivec3 pads = ivec3(${m}, ${g}, ${y});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${d};\n              wD += ${c}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${p};\n                wR += ${u}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${h}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let x=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===n&&(x="avgValue / max(count, 1.0)");let S=4*Math.floor(a/4),M=a%4,D=`\n      if (${b}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${s}, ${o}, ${l});\n      const ivec3 pads = ivec3(${m}, ${g}, ${y});\n      const float initializationValue = ${_};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${_});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${c}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p};\n            wR += ${u}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${S}; wC += 4) {\n              int xC = xCCorner + wC * ${h};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${h}, ch)\n              );\n\n              ${D}\n            }\n\n            int xC = xCCorner + ${S};\n            if (${1===M}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${D}\n            } else if (${2===M}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${D}\n            } else if (${3===M}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                initializationValue\n              );\n\n              ${D}\n            }\n          }\n        }\n        setOutput(${x});\n      }\n    `}},Rze={kernelName:Qu,backendName:"webgl",kernelFunc:function Fze(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n;mg(i,"avgPool");let{filterSize:a,strides:s,pad:o,dimRoundingMode:l}=r;w.assert(I.eitherStridesOrDilationsAreOne(s,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`);let u=I.computePool2DInfo(i.shape,a,s,1,o,l);if(1===u.filterWidth&&1===u.filterHeight&&w.arraysEqual(u.inShape,u.outShape))return Ma({inputs:{x:i},backend:t});let h=new G_(u,"avg",!1);return t.runWebGLProgram(h,[i],"float32")}},Lze={kernelName:Lf,backendName:"webgl",kernelFunc:function Pze(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{filterSize:a,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r,h=I.computePool3DInfo(i.shape,a,s,[1,1,1],o,l,c),d=new lF(h,"avg",!1);return t.runWebGLProgram(d,[i],"float32")}},zze={kernelName:xb,backendName:"webgl",kernelFunc:function Vze(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,input:a}=n,s=a,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,d=I.computePool3DInfo(s.shape,o,l,[1,1,1],c,u),p=new class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${u-1-e.padInfo.front}, ${h-1-e.padInfo.top}, ${d-1-e.padInfo.left});\n      const float avgMultiplier = float(${1/(e.filterDepth*e.filterHeight*e.filterWidth)});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${u};\n            wD += ${e.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${e.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${h};\n              wR += ${e.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${d};\n                wC += ${e.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(d);return t.runWebGLProgram(p,[i],s.dtype)}},Hze={kernelName:vb,backendName:"webgl",kernelFunc:function Uze(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,input:a}=n,s=a;mg([i,a],"avgPoolGrad");let{filterSize:o,strides:l,pad:c}=r,u=I.computePool2DInfo(s.shape,o,l,1,c),h=new class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let o=e.effectiveFilterHeight,l=e.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${o-1-e.padInfo.top}, ${l-1-e.padInfo.left});\n      const float avgMultiplier = float(${1/(e.filterHeight*e.filterWidth)});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${o};\n            wR += ${e.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${l};\n            wC+= ${e.dilationWidth}) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(u);return t.runWebGLProgram(h,[i],s.dtype)}},jze={kernelName:Ju,backendName:"webgl",kernelFunc:function Wze(e){let{inputs:n,backend:t,attrs:r}=e,{a:i,b:a}=n,{transposeA:s,transposeB:o}=r;return wC({a:i,b:a,transposeA:s,transposeB:o,backend:t})}},Xze={kernelName:yd,backendName:"webgl",kernelFunc:({inputs:e,backend:n,attrs:t})=>{let{x:r,mean:i,variance:a,offset:s,scale:o}=e;w.assert(i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),w.assert(null==s||i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),w.assert(null==o||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=t;null==l&&(l=.001);let c=[r,i,a],u=null;null!=s&&(u=s.shape,c.push(s));let h=null;null!=o&&(h=o.shape,c.push(o));let d=Q().getBool("WEBGL_PACK_NORMALIZATION")?new class{constructor(e,n,t,r,i,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],I.assertAndGetBroadcastShape(e,n),I.assertAndGetBroadcastShape(e,t);let s="vec4(0.0)";null!=r&&(I.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="vec4(1.0)";null!=i&&(I.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${s};\n        vec4 scale = ${o};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${a}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}(r.shape,i.shape,a.shape,u,h,l):new class{constructor(e,n,t,r,i,a){this.outputShape=[],this.variableNames=["x","mean","variance"],I.assertAndGetBroadcastShape(e,n),I.assertAndGetBroadcastShape(e,t);let s="0.0";null!=r&&(I.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="1.0";null!=i&&(I.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${s};\n        float scale = ${o};\n        float inv = scale * inversesqrt(variance + float(${a}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}(r.shape,i.shape,a.shape,u,h,l);return n.runWebGLProgram(d,c,c[0].dtype)}},cF=["x","y","z","w","u","v"];function wg(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{begin:a,size:s}=r,[o,l]=Tr.parseSliceParams(i,a,s);if(Tr.assertParamsValid(i,o,l),0===w.sizeFromShape(l))return t.makeTensorInfo(l,i.dtype,[]);if(t.shouldExecuteOnCPU([i])||"string"===i.dtype){let h=t.texData.get(i.dataId),d=HBe(h.values,o,l,i.shape,i.dtype);return t.makeTensorInfo(l,i.dtype,d)}let{isPacked:c}=t.texData.get(i.dataId),u=Tr.isSliceContinous(i.shape,o,l);if(c||!u){let h=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let n=yn(this.rank),t=Li("coords",this.rank),r=Li("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,a=`getChannel(getSource(${r.join()}), ${i})`,s=`\n      result.x = ${a};\n      if (++${t[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${a};\n        --${r[this.rank-1]};\n      }\n    `,o=1===this.rank?"":`\n      --${t[this.rank-1]};\n      if (++${t[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${a};\n        if (++${t[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${a};\n        }\n      }\n    `,l=this.rank<=4?`sourceLoc = coords +\n            ${n}(${e.map((c,u)=>`start[${u}]`).join()});`:e.map((c,u)=>`${r[u]} = ${t[u]} + start[${u}];`).join("\n");this.userCode=`\n      void main() {\n        ${n} coords = getOutputCoords();\n        ${n} sourceLoc;\n        ${l}\n        vec4 result = vec4(0.);\n        ${s}\n        ${o}\n        setOutput(result);\n      }\n    `}}(l):new class{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;let n=yn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let r,t=function Zze(e){if(1===e)return"sourceLoc";if(e<=6)return cF.slice(0,e).map(n=>"sourceLoc."+n).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);r=`\n        ${n} sourceLoc;\n        ${n} coords = getOutputCoords();\n        ${e.map((a,s)=>`sourceLoc.${cF[s]} = start[${s}] + coords.${cF[s]};`).join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${r}\n        setOutput(getSource(${t}));\n      }\n    `}}(l);return t.runWebGLProgram(h,[i],i.dtype,[o])}return t.uploadToGPU(i.dataId),function Jze(e,n,t,r){let i=r.texData.get(e.dataId),a=r.makeTensorInfo(t,e.dtype),s=r.texData.get(a.dataId);Object.assign(s,i),s.refCount=1,s.shape=t,s.dtype=e.dtype;let o=Tr.computeFlatOffset(n,w.computeStrides(e.shape));i.slice&&(o+=i.slice.flatOffset),s.slice={flatOffset:o,origDataId:i.slice&&i.slice.origDataId||e.dataId};let l=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,l+1),a}(i,o,l,t)}var e6e={kernelName:Sm,backendName:"webgl",kernelFunc:wg},n6e={kernelName:$f,backendName:"webgl",kernelFunc:e=>{let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{blockShape:a,crops:s}=r;w.assert(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let o=a.reduce((b,_)=>b*_),l=I.getReshaped(i.shape,a,o),c=I.getPermuted(l.length,a.length),u=I.getReshapedPermuted(i.shape,a,o),h=I.getSliceBeginCoords(s,a.length),d=I.getSliceSize(u,s,a.length),p=[],f=Ie({inputs:{x:i},backend:t,attrs:{shape:l}}),m=$i({inputs:{x:f},backend:t,attrs:{perm:c}}),g=Ie({inputs:{x:m},backend:t,attrs:{shape:u}}),y=wg({inputs:{x:g},backend:t,attrs:{begin:h,size:d}});return p.push(f),p.push(m),p.push(g),p.forEach(b=>t.disposeIntermediateTensorInfo(b)),y}},i6e={kernelName:Bf,backendName:"webgl",kernelFunc:function r6e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,weights:a}=n,{size:s}=r,o=t.readSync(i.dataId),l=t.readSync(a.dataId),c=IX(o,l,a.dtype,a.shape,s);return t.makeTensorInfo([s],a.dtype,c)}},l6e={kernelName:Vf,backendName:"webgl",kernelFunc:function o6e(e){let o,{inputs:n,backend:t}=e,{a:r,b:i}=n,a=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=Q().getNumber("WEBGL_VERSION");if(t.shouldExecuteOnCPU([r,i])||1===s){let l=t.texData.get(r.dataId).values,c=t.texData.get(i.dataId).values,[u,h]=pBe(r.shape,i.shape,l,c,r.dtype),d=t.makeTensorInfo(h,r.dtype);return t.texData.get(d.dataId).values=u,d}return o=a?new vg("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",r.shape,i.shape,!1):new Kh("\n  return float(int(a.r) & int(b.r));\n",r.shape,i.shape),t.runWebGLProgram(o,[r,i],r.dtype)}},u6e={kernelName:wb,backendName:"webgl",kernelFunc:function c6e(e){let{inputs:n,backend:t}=e,{s0:r,s1:i}=n,a=t.readSync(r.dataId),s=t.readSync(i.dataId),o=I.assertAndGetBroadcastShape(Array.from(a),Array.from(s));return t.makeTensorInfo([o.length],"int32",Int32Array.from(o))}},ZX=li({opSnippet:"return float(a != b);",cpuKernelImpl:FBe,dtype:"bool"}),h6e={kernelName:hm,backendName:"webgl",kernelFunc:ZX};function q_(e){let{inputs:n,backend:t}=e,{input:r}=n;return Ma({inputs:{x:t.texData.get(r.dataId).complexTensorInfos.real},backend:t})}var p6e={kernelName:Cw,backendName:"webgl",kernelFunc:q_},g6e={kernelName:ed,backendName:"webgl",kernelFunc:function uF(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{dtype:a}=r;if("complex64"===a){if("complex64"===i.dtype)return Ma({inputs:{x:i},backend:t});let s=Kn(i.shape),o=uF({inputs:{x:i},backend:t,attrs:{dtype:"float32"}}),l=Hc({inputs:{real:o,imag:s},backend:t});return s.dispose(),t.disposeIntermediateTensorInfo(o),l}if("complex64"===i.dtype){let s=q_({inputs:{input:i},backend:t}),o=uF({inputs:{x:s},backend:t,attrs:{dtype:a}});return t.disposeIntermediateTensorInfo(s),o}if(!w.hasEncodingLoss(i.dtype,a)){let s=Ma({inputs:{x:i},backend:t});return{dataId:s.dataId,shape:s.shape,dtype:a}}if(t.shouldExecuteOnCPU([i])){let s=t.texData.get(i.dataId).values,[o,l,c]=fBe(s,i.shape,i.dtype,a);return t.makeTensorInfo(o,l,c)}if("int32"===a)return function m6e(e,n){let t=new Fo(e.shape,"return float(int(x));"),r=n.runWebGLProgram(t,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,t);if("bool"===a){let s=t.makeTensorInfo([],"bool",w.getTypedArrayFromDType("bool",1)),o=ZX({inputs:{a:i,b:s},backend:t});return t.disposeIntermediateTensorInfo(s),o}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${a}`)}},QX="return ceil(x);",y6e=Lt({opSnippet:QX,packedOpSnippet:QX,cpuKernelImpl:mBe}),b6e={kernelName:td,backendName:"webgl",kernelFunc:y6e},w6e={kernelName:pc,backendName:"webgl",kernelFunc:function x6e(e){let o,{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{clipValueMin:a,clipValueMax:s}=r;return o=Q().getBool("WEBGL_PACK_CLIP")?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}(i.shape):new class{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}(i.shape),t.runWebGLProgram(o,[i],i.dtype,[[a],[s]])}};function JX(e,n){return{dataId:n.dataId,dtype:n.dtype,shape:e.shape}}var S6e={kernelName:Cb,backendName:"webgl",kernelFunc:function k6e(e){let{inputs:n,backend:t}=e,{x:r}=n,i=t.texData.get(r.dataId),a=new class{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}(r.shape),s=[JX(r,i.complexTensorInfos.real),JX(r,i.complexTensorInfos.imag)];return t.runWebGLProgram(a,s,s[0].dtype)}},I6e=class{constructor(e){this.outputShape=[],this.outputShape=I.computeOutShape(e,1),this.variableNames=e.map((a,s)=>`T${s}`);let n=new Array(e.length-1);n[0]=e[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+e[a][1];let t=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++)t.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${n[a-1]}));`);t.push(`else setOutput(getT${n.length}(yR, yC-${n[n.length-1]}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${t.join("\n        ")}\n      }\n    `}},M6e=class{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=I.computeOutShape(e,n);let t=this.outputShape,r=t.length,i=yn(r),a=Li("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((f,m)=>`T${m}`);let o=new Array(e.length-1);o[0]=e[0][n];for(let f=1;f<o.length;f++)o[f]=o[f-1]+e[f][n];let l=s[n],c=s.slice(-2),u=s.join(),h=`if (${l} < ${o[0]}) {\n        return getChannel(\n            getT0(${u}), vec2(${c.join()}));\n        }`;for(let f=1;f<o.length;f++){let m=o[f-1];h+=`\n        if (${l} < ${o[f]}  && ${l} >= ${o[f-1]}) {\n          return getChannel(\n            getT${f}(${kC(s,l,m)}),\n            vec2(${kC(c,l,m)}));\n        }`}let p=o[o.length-1];h+=`\n        return getChannel(\n          getT${o.length}(${kC(s,l,p)}),\n          vec2(${kC(c,l,p)}));`,this.userCode=`\n      float getValue(${s.map(f=>"int "+f)}) {\n        ${h}\n      }\n\n      void main() {\n        ${i} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${a}), 0., 0., 0.);\n\n        ${a[r-1]} = ${a[r-1]} + 1;\n        if (${a[r-1]} < ${t[r-1]}) {\n          result.g = getValue(${a});\n        }\n\n        ${a[r-2]} = ${a[r-2]} + 1;\n        if (${a[r-2]} < ${t[r-2]}) {\n          result.a = getValue(${a});\n        }\n\n        ${a[r-1]} = ${a[r-1]} - 1;\n        if (${a[r-2]} < ${t[r-2]} &&\n            ${a[r-1]} < ${t[r-1]}) {\n          result.b = getValue(${a});\n        }\n        setOutput(result);\n      }\n    `}};function kC(e,n,t){let r=e.indexOf(n);return e.map((i,a)=>a===r?`${i} - ${t}`:i).join()}function SC(e){let{inputs:n,backend:t}=e,{input:r}=n;return Ma({inputs:{x:t.texData.get(r.dataId).complexTensorInfos.imag},backend:t})}var E6e={kernelName:_w,backendName:"webgl",kernelFunc:SC};function K_(e,n,t){let r=e[0].dtype;if("complex64"===r){let p=e.map(b=>q_({inputs:{input:b},backend:t})),f=e.map(b=>SC({inputs:{input:b},backend:t})),m=K_(p,n,t),g=K_(f,n,t),y=Hc({inputs:{real:m,imag:g},backend:t});return p.forEach(b=>t.disposeIntermediateTensorInfo(b)),f.forEach(b=>t.disposeIntermediateTensorInfo(b)),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(g),y}let i=t.shouldExecuteOnCPU(e);if("string"===r&&(i=!0),i){let p=e.map(v=>{let x=[-1,w.sizeFromShape(v.shape.slice(n))];return Ie({inputs:{x:v},backend:t,attrs:{shape:x}})}),f=p.map(v=>({vals:t.readSync(v.dataId),shape:v.shape})),m=I.computeOutShape(p.map(v=>v.shape),1),y=gBe(f,m,r,1===p[0].shape[0]),b=I.computeOutShape(e.map(v=>v.shape),n),_=t.makeTensorInfo(b,r,y);return p.forEach(v=>t.disposeIntermediateTensorInfo(v)),_}let a=e.filter(p=>w.sizeFromShape(p.shape)>0),s=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(1===a.length){let p=s?new Fo(e[0].shape,zc):new Uc(e[0].shape,zc);return t.runWebGLProgram(p,e,r)}let o=Q().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>o){let p=[];for(let m=0;m<a.length;m+=o){let g=a.slice(m,m+o);p.push(K_(g,n,t))}let f=K_(p,n,t);for(let m of p)t.disposeIntermediateTensorInfo(m);return f}if(s){let p=new M6e(a.map(f=>f.shape),n);return t.runWebGLProgram(p,a,r)}let{tensors2D:l,outShape:c}=function D6e(e,n,t){let r=I.computeOutShape(e.map(i=>i.shape),n);return{tensors2D:e.map(i=>Ie({inputs:{x:i},attrs:{shape:[-1,w.sizeFromShape(i.shape.slice(n))]},backend:t})),outShape:r}}(a,n,t),u=new I6e(l.map(p=>p.shape)),h=t.runWebGLProgram(u,l,r);l.forEach(p=>t.disposeIntermediateTensorInfo(p));let d=Ie({inputs:{x:h},attrs:{shape:c},backend:t});return t.disposeIntermediateTensorInfo(h),d}function eY(e){let{inputs:n,backend:t,attrs:r}=e,{axis:i}=r,a=w.parseAxisParam(i,n[0].shape)[0],s=n.map(c=>c.shape);I.assertParamsConsistent(s,a);let o=I.computeOutShape(n.map(c=>c.shape),a);if(0===w.sizeFromShape(o))return t.makeTensorInfo(o,n[0].dtype,[]);let l=n.filter(c=>w.sizeFromShape(c.shape)>0);return 1===l.length?Ma({inputs:{x:l[0]},backend:t}):K_(l,a,t)}var A6e={kernelName:zf,backendName:"webgl",kernelFunc:eY},tY=class{constructor(e,n=!1,t=null,r=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;let a=e.padInfo.top,s=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,y=m?2:3,b=m?3:1,_="",v="";t&&(_=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${t}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${t}\n        }`:`\n          float activation(float x) {\n            ${t}\n          }\n        `,v="result = activation(result);");let x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${_}\n\n      const ivec2 strides = ivec2(${o}, ${l});\n      const ivec2 pads = ivec2(${a}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${b}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${y}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${h}; wR++) {\n          int xR = xRCorner + wR * ${c};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            int xC = xCCorner + wC * ${u};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${p}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${p}) *\n                    getW(wR, wC, ${p}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${p}, xR, xC) *\n                    getW(wR, wC, ${p}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${p}, d2),\n                getW(wR, wC, ${p} + 1, d2),\n                getW(wR, wC, ${p} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${p}),\n                  getX(batch, xR, xC, ${p} + 1),\n                  getX(batch, xR, xC, ${p} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${p}, xR, xC),\n                  getX(batch, ${p} + 1, xR, xC),\n                  getX(batch, ${p} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${x}\n        ${v}\n        setOutput(result);\n      }\n    `}},nY=class{constructor(e,n=!1,t=null,r=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=bi(this.outputShape.length);let a=e.padInfo.left,s=e.strideWidth,o=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,u=c,h="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<c;m++)h+=`\n           vec4 xTexelC${2*m};\n           int xTexelC${2*m}Ready;\n           vec4 xTexelC${2*m+1};\n           int xTexelC${2*m+1}Ready;\n           vec4 xC${m};`;h+=`\n     for (int r = 0; r < ${l}; r++) {\n      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {\n       `;for(let m=0;m<c;m++)h+=`\n           xTexelC${2*m} = vec4(0.0);\n           xTexelC${2*m}Ready = 0;\n           xTexelC${2*m+1} = vec4(0.0);\n           xTexelC${2*m+1}Ready = 0;\n           xC${m} = vec4(0.0);`;h+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let m=0;m<(u+1)/2;m++){let g=2*m;if(h+=`\n           xC = xCCorner + ${g*o};\n           `,1===s){if(g<c&&(a%2==1?(h+=`\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {\n                   xTexelC${g} = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${g}.zw = vec2(0.0);\n                   }\n                   xTexelC${g}Ready = 1;\n                 }\n               `,h+=1===o&&g>0?`\n                 xC${g} = vec4(xTexelC${g-2}.zw, xTexelC${g}.xy);\n                 `:`\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC${g} = vec4(previous.zw, xTexelC${g}.xy);\n                   } else {\n                     xC${g} = vec4(0.0, 0.0, xTexelC${g}.xy);\n                   }\n                   `):h+=`\n                 if (xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {\n                   xTexelC${g} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${g}.zw = vec2(0.0);\n                   }\n                   xTexelC${g}Ready = 1;\n                 }\n\n                 xC${g} = xTexelC${g};\n                 `,g+1<c)){let y=a%2==0?w.nearestLargerEven(o):o;o%2==0&&a%2==1||o%2!=0&&a%2!=1?(h+=`\n                   xCOffset = xC + imod(pads[1], 2) + ${y};\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {\n                     xTexelC${g+1} = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC${g+1}.zw = vec2(0.0);\n                     }\n                     xTexelC${g+1}Ready = 1;\n                   }\n                   `,h+=o>1?`\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC${g+1} = vec4(previous.zw, xTexelC${g+1}.xy);\n                     } else {\n                      xC${g+1} = vec4(0.0, 0.0, xTexelC${g+1}.xy);\n                     }\n                     `:`\n                     xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.xy);\n                     `):h+=1===y?`\n                     xC${g+1} = xTexelC${g};\n                     `:`\n                     xCOffset = xC + ${y};\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {\n                       xTexelC${g+1} = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC${g+1}.zw = vec2(0.0);\n                       }\n                       xTexelC${g+1}Ready = 1;\n                     }\n\n                     xC${g+1} = xTexelC${g+1};\n                     `}}else g<c&&(a%2==1?(h+=`\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {\n                   xTexelC${g} = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${g}.zw = vec2(0.0);\n                   }\n                   xTexelC${g}Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${g+1}Ready == 0) {\n                   xTexelC${g+1} = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC${g+1}.zw = vec2(0.0);\n                   }\n                   xTexelC${g+1}Ready = 1;\n                 }\n\n                 xC${g} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);\n               `,g+1<c&&(h+=`\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC${g+1} = vec4(xTexelC${g+1}.xy, final.xy);\n                 `)):(h+=`\n                 if(xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {\n                   xTexelC${g} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${g}.zw = vec2(0.0);\n                   }\n                   xTexelC${g}Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {\n                   xTexelC${g+1} = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${g+1}.zw = vec2(0.);\n                   }\n                   xTexelC${g+1}Ready = 1;\n                 }\n\n                 xC${g} = vec4(\n                   xTexelC${g}.xy, xTexelC${g+1}.xy);\n               `,g+1<c&&(h+=`\n                   xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);\n                 `)));g<c&&(h+=`\n             wTexel = getW(r, ${g}, d1, d2);\n             dotProd += xC${g}.xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ${e.inChannels}) {\n               dotProd += xC${g}.yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           `,g+1<c&&(h+=`\n               wTexel = getW(r, ${g+1}, d1, d2);\n               dotProd += xC${g+1}.xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ${e.inChannels}) {\n                 dotProd += xC${g+1}.yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             `))}h+="\n     }\n   ",h+="\n     }\n   ",h+="\n     }\n   ";let d="",p="";t&&(d=r?`vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ${t}\n         }`:i?`vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ${t}\n         }`:`vec4 activation(vec4 x) {\n           ${t}\n         }`,p="result = activation(result);");let f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n       ${d}\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ${h}\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ${f}\n         ${p}\n         setOutput(result);\n       }\n     `}};function IC(e,n){let t=e.length;return t>=3?n?[...e.slice(0,-3),e[t-3]*e[t-2],e[t-1]]:[...e.slice(0,-3),e[t-3],e[t-2]*e[t-1]]:!n&&1===t&&e[0]>1?[e[0],1]:null}function rY({x:e,filter:n,convInfo:t,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:o=null}){let g,l=e.shape,c=r.texData.get(e.dataId),u=t.inChannels,h=l[0]*l[1]*l[2],d=t.outChannels,p="channelsLast"===t.dataFormat,y=[];if(null!=a){let b=IC(a.shape,p);null!=b&&(a=Ie({inputs:{x:a},backend:r,attrs:{shape:b}}),y.push(a))}if(null!=i){let b=IC(i.shape,p);null!=b&&(i=Ie({inputs:{x:i},backend:r,attrs:{shape:b}}),y.push(i))}if((1!==h&&1!==d||!(u>jX))&&c.isPacked&&p&&null!=c.texture&&l[2]%2!=0&&w.arraysEqual(c.shape.slice(-3),l.slice(-3))){let _={dataId:e.dataId,shape:[1,l[0]*l[1]*(l[2]+1),t.inChannels],dtype:e.dtype},v=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,w.assert(H_(c.shape,_.shape),()=>`packed reshape ${c.shape} to ${_.shape} isn't free`);let x=Ie({inputs:{x:n},backend:r,attrs:{shape:[1,t.inChannels,t.outChannels]}});y.push(x);let S=wC({a:_,b:x,backend:r,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:a,leakyreluAlpha:s}),M=r.texData.get(S.dataId);w.assert(M.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=v,M.shape=t.outShape,g=Ma({inputs:{x:S},backend:r}),g.shape=t.outShape,y.push(S)}else{let b=t.outHeight*t.outWidth,_=Ie({inputs:{x:e},backend:r,attrs:{shape:p?[t.batchSize,b,t.inChannels]:[t.batchSize,t.inChannels,b]}}),v=Ie({inputs:{x:n},backend:r,attrs:{shape:[1,t.inChannels,t.outChannels]}}),x=wC({a:p?_:v,b:p?v:_,transposeA:!p,transposeB:!1,backend:r,bias:i,activation:o,preluActivationWeights:a,leakyreluAlpha:s});g=Ie({inputs:{x},backend:r,attrs:{shape:t.outShape}}),y.push(_),y.push(v),y.push(x)}for(let b of y)r.disposeIntermediateTensorInfo(b);return g}function iY({x:e,filter:n,convInfo:t,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:o=null}){let{filterWidth:l,filterHeight:c,inChannels:u,outWidth:h,outHeight:d,dataFormat:p}=t,f="channelsLast"===p,m=l*c*u,g=d*h,y=[t.batchSize,m,g],v=[];if(null!=a){let q=IC(a.shape,f);null!=q&&(a=Ie({inputs:{x:a},backend:r,attrs:{shape:q}}),v.push(a))}if(null!=i){let q=IC(i.shape,f);null!=q&&(i=Ie({inputs:{x:i},backend:r,attrs:{shape:q}}),v.push(i))}let x=Ie({inputs:{x:n},backend:r,attrs:{shape:[1,m,w.sizeFromShape(n.shape)/m]}});v.push(x);let S=new class{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=bi(this.outputShape.length);let{dataFormat:t}=n,r=Pi(),i="channelsLast"===t,a=i?1:2,s=i?2:3,o=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`,l="";for(let c=0;c<=1;c++)for(let u=0;u<=1;u++)l+=`\n          blockIndex = rc.z + ${u};\n          pos = rc.y + ${c};\n\n          ${o}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${a}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${s}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${i}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*c+u}] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*c+u}] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${l}\n\n        ${r.output} = result;\n      }\n    `}}(y,t),D=r.runWebGLProgram(S,[e],"float32",[e.shape,[t.padInfo.top,t.padInfo.left],[t.strideHeight,t.strideWidth],[t.dilationHeight,t.dilationWidth],[t.inChannels],[t.filterWidth*t.inChannels],[t.outWidth]]),N=Ie({inputs:{x:D},backend:r,attrs:{shape:y}});v.push(D),v.push(N);let F=null!=i,O=null!=a,k="leakyrelu"===o,P=o?j_(o,!0):null,j=new VX(f?N.shape:x.shape,f?x.shape:N.shape,f?[t.batchSize,g,t.outChannels]:[t.batchSize,t.outChannels,g],!0,!1,F,P,O,k),Z=f?[N,x]:[x,N];if(i&&Z.push(i),O&&Z.push(a),k){let q=r.makeTensorInfo([],"float32",w.createScalarValue(s,"float32"));Z.push(q),v.push(q)}let z=r.runWebGLProgram(j,Z,"float32"),W=Ie({inputs:{x:z},backend:r,attrs:{shape:t.outShape}});v.push(z);for(let q of v)r.disposeIntermediateTensorInfo(q);return W}var X_,F6e={kernelName:nd,backendName:"webgl",kernelFunc:function O6e(e){let p,{inputs:n,backend:t,attrs:r}=e,{x:i,filter:a}=n,{strides:s,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r,h=I.convertConv2DDataFormat(l),d=I.computeConv2DInfo(i.shape,a.shape,s,c,o,u,!1,h);if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(d.strideWidth<=2&&"channelsLast"===h&&Q().getBool("WEBGL_EXP_CONV")){let m=new nY(d);p=t.runWebGLProgram(m,[i,a],"float32",[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]])}else if(Q().getBool("WEBGL_CONV_IM2COL"))p=iY({x:i,filter:a,convInfo:d,backend:t});else{let m=new tY(d);p=t.runWebGLProgram(m,[i,a],"float32")}else p=rY({x:i,filter:a,convInfo:d,backend:t});let f=Ie({inputs:{x:p},backend:t,attrs:{shape:d.outShape}});return t.disposeIntermediateTensorInfo(p),f}},V6e={kernelName:hw,backendName:"webgl",kernelFunc:function B6e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,dy:a}=n,{strides:s,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,h=I.convertConv2DDataFormat(l),d=I.computeConv2DInfo(i.shape,u,s,1,o,c,!1,h),p=new class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${e.strideHeight} - ${e.padInfo.top};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${e.strideWidth} - ${e.padInfo.left};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              ${"channelsLast"===e.dataFormat?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);"}\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(d);return t.runWebGLProgram(p,[i,a],"float32")}},H6e={kernelName:rd,backendName:"webgl",kernelFunc:function U6e(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,filter:a}=n,{inputShape:s,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r,h=I.convertConv2DDataFormat(c),d=I.computeConv2DInfo(s,a.shape,o,1,l,u,!1,h);if(Q().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===h){let p=[[d.strideHeight,d.strideWidth]],f=new class{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=bi(this.outputShape.length);let n=e.filterHeight,t=e.filterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${n-1-e.padInfo.top}, ${t-1-e.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ${n}; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ${n} - 1 - wR;\n\n          for (int wC = 0; wC < ${t}; wC++) {\n            int wCPerm = ${t} - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    `}}(d);return t.runWebGLProgram(f,[i,a],"float32",p)}{let p=new class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let n=e.filterHeight,t=e.filterWidth,a="channelsLast"===e.dataFormat;this.userCode=`\n      const ivec2 pads = ivec2(${n-1-e.padInfo.top}, ${t-1-e.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${a?3:1}];\n\n        ivec2 dyCorner = ivec2(coords[${a?1:2}], coords[${a?2:3}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${n}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${n} - 1 - wR;\n\n          for (int wC = 0; wC < ${t}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${t} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${a}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(d);return t.runWebGLProgram(p,[i,a],"float32")}}},j6e={kernelName:id,backendName:"webgl",kernelFunc:function W6e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,filter:a}=n,{strides:s,pad:o,dilations:l}=r,c=I.computeConv3DInfo(i.shape,a.shape,s,l,o),u=new class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let n=e.padInfo.front,t=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,a=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterDepth,h=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${i}, ${a}, ${s});\n      const ivec3 pads = ivec3(${n}, ${t}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${u}; wF++) {\n          int xF = xFCorner + wF * ${o};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h}; wR++) {\n            int xR = xRCorner + wR * ${l};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d}; wC++) {\n              int xC = xCCorner + wC * ${c};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${p}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${p}) *\n                  getW(wF, wR, wC, ${p}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1),\n                  getX(batch, xF, xR, xC, ${p} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2),\n                  getW(wF, wR, wC, ${p} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(c);return t.runWebGLProgram(u,[i,a],"float32")}},q6e={kernelName:Uf,backendName:"webgl",kernelFunc:function G6e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,dy:a}=n,{strides:s,pad:o,filterShape:l}=r,c=I.computeConv3DInfo(i.shape,l,s,1,o),u=new class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape,this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${e.strideDepth} - ${e.padInfo.front};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${e.strideHeight} - ${e.padInfo.top};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${e.strideWidth} - ${e.padInfo.left};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(c);return t.runWebGLProgram(u,[i,a],"float32")}},X6e={kernelName:Hf,backendName:"webgl",kernelFunc:function K6e(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,filter:a}=n,{pad:s,strides:o,inputShape:l}=r,c=I.computeConv3DInfo(l,a.shape,o,1,s),u=new class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let n=e.filterDepth,t=e.filterHeight,r=e.filterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${n-1-e.padInfo.front}, ${t-1-e.padInfo.top}, ${r-1-e.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${n}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${e.strideDepth}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${n} - 1 - wF;\n\n          for (int wR = 0; wR < ${t}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${t} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(c);return t.runWebGLProgram(u,[i,a],"float32")}},Q6e=Lt({opSnippet:xg+"\n  return cos(x);\n",packedOpSnippet:`\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ${Xh}\n  return result;\n`}),J6e={kernelName:ad,backendName:"webgl",kernelFunc:Q6e},tUe=Lt({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),nUe={kernelName:sd,backendName:"webgl",kernelFunc:tUe},aUe={kernelName:jf,backendName:"webgl",kernelFunc:e=>{let{inputs:n,backend:t,attrs:r}=e,{image:i,boxes:a,boxInd:s}=n,{cropSize:o,method:l,extrapolationValue:c}=r,u=new class{constructor(e,n,t,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[a,s,o,l]=e,[c]=n,[u,h]=t;this.outputShape=[c,u,h,l];let d="bilinear"===r?1:0,[p,f]=[s-1+".0",o-1+".0"],[m,g,y]=u>1?[""+(s-1)/(u-1),"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[b,_,v]=h>1?[""+(o-1)/(h-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${b});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${a}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${_};\n\n        float in_y = ${y};\n        if( in_y < 0.0 || in_y > ${p} ) {\n          setOutput(float(${i}));\n          return;\n        }\n        float in_x = ${v};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${i}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}(i.shape,a.shape,o,l,c);return t.runWebGLProgram(u,[i,a,s],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(X_||(X_={}));var aY=class{constructor(e,n,t,r){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let i=this.outputShape.length,s=t?this.op===X_.Prod?"1.0":"0.0":`getX(${sY(i,"coords",this.op)})`,o=this.outputShape[this.outputShape.length-1],l="",c="";t?(l=r?"end != "+(o-1):"end != 0",c=r?"end + 1":"end - 1"):(l=r?`end + pow2 < ${o}`:"end >= pow2",c=r?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${yn(i)} coords = getOutputCoords();\n        int end = ${oY(i,"coords",this.op)};\n        float val = ${s};\n        int pow2 = int(pow(2.0, index));\n        if (${l}) {\n          int idx = ${c};\n          ${oY(i,"coords",this.op)} = idx;\n          val ${this.op}= getX(${sY(i,"coords",this.op)});\n        }\n        setOutput(val);\n      }\n    `}};function sY(e,n,t){if(1===e)return`${n}`;if(2===e)return`${n}.x, ${n}.y`;if(3===e)return`${n}.x, ${n}.y, ${n}.z`;if(4===e)return`${n}.x, ${n}.y, ${n}.z, ${n}.w`;throw new Error(`Cumulative ${t} for rank ${e} is not yet supported`)}function oY(e,n,t){if(1===e)return`${n}`;if(2===e)return`${n}.y`;if(3===e)return`${n}.z`;if(4===e)return`${n}.w`;throw new Error(`Cumulative ${t} for rank ${e} is not yet supported`)}function lY(e,n,t,r,i,a){let s=n.shape.length,o=I.getAxesPermutation([r],s),l=n;null!=o&&(l=$i({inputs:{x:n},backend:t,attrs:{perm:o}}));let c=I.getInnerMostAxes(1,s)[0];if(c!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${n.shape.length-1} but got axis=${r}`);let u=l.shape[c],h=Ma({inputs:{x:l},backend:t});for(let d=0;d<=Math.ceil(Math.log2(u))-1;d++){let p=new aY(e,l.shape,!1,a),m=h;h=t.runWebGLProgram(p,[h],h.dtype,[[d]]),t.disposeIntermediateTensorInfo(m)}if(i){let d=new aY(e,l.shape,i,a),p=h;h=t.runWebGLProgram(d,[h],h.dtype),t.disposeIntermediateTensorInfo(p)}if(null!=o){let p=$i({inputs:{x:h},backend:t,attrs:{perm:I.getUndoAxesPermutation(o)}});return t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(l),p}return h}var oUe={kernelName:Wf,backendName:"webgl",kernelFunc:function sUe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,exclusive:s,reverse:o}=r;return lY(X_.Prod,i,t,a,s,o)}},cUe={kernelName:od,backendName:"webgl",kernelFunc:function lUe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,exclusive:s,reverse:o}=r;return lY(X_.Sum,i,t,a,s,o)}},dUe={kernelName:kb,backendName:"webgl",kernelFunc:function uUe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,weights:a}=n,{size:s,binaryOutput:o}=r;if(1===i.shape.length){let l=t.readSync(i.dataId),c=t.readSync(a.dataId),u=IX(l,c,a.dtype,a.shape,s);return t.makeTensorInfo([s],a.dtype,u)}if(2===i.shape.length){let l=t.bufferSync(i),c=t.bufferSync(a),u=hBe(l,c,s,o);return t.makeTensorInfo(u.shape,a.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}},fUe={kernelName:Gf,backendName:"webgl",kernelFunc:function pUe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{blockSize:a,dataFormat:s}=r,o=i.shape[0],h=("NHWC"===s?i.shape[1]:i.shape[2])*a,d=("NHWC"===s?i.shape[2]:i.shape[3])*a,p=("NHWC"===s?i.shape[3]:i.shape[1])/(a*a),f="NHWC"===s?[o,h,d,p]:[o,p,h,d],m=new class{constructor(e,n,t){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=t,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${n};\n      int offset_h = imod(h, ${n});\n      int in_w = w / ${n};\n      int offset_w = imod(w, ${n});\n      int offset_d = (offset_h * ${n} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}(f,a,s);return t.runWebGLProgram(m,[i],i.dtype)}},cY=class{constructor(e,n=!1,t=null,r=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=bi(this.outputShape.length);let a=e.filterHeight,s=e.filterWidth,o=e.outChannels/e.inChannels,l="",c="";t&&(l=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${t}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${t}\n        }`:`\n          float activation(float x) {\n            ${t}\n          }\n        `,c="result = activation(result);");let u=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${l}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${o};\n        int q = d2 - d1 * ${o};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${a}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${s}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${u}\n        ${c}\n        setOutput(result);\n      }\n    `}},uY=class{constructor(e,n=!1,t=null,r=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=bi(this.outputShape.length);let a=e.outChannels/e.inChannels,s=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,h=u,d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let g=0;g<u;g++)d+=`\n          vec4 xTexelC${2*g};\n          int xTexelC${2*g}Ready;\n          vec4 xTexelC${2*g+1};\n          int xTexelC${2*g+1}Ready;\n          vec4 xC${g};`;d+=`\n    for (int r = 0; r < ${c}; r++) {\n      `;for(let g=0;g<u;g++)d+=`\n          xTexelC${2*g} = vec4(0.0);\n          xTexelC${2*g}Ready = 0;\n          xTexelC${2*g+1} = vec4(0.0);\n          xTexelC${2*g+1}Ready = 0;\n          xC${g} = vec4(0.0);`;d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let g=0;g<(h+1)/2;g++){let y=2*g;if(d+=`\n          xC = xCCorner + ${y*l};\n          `,1===o){if(y<u&&(s%2==1?(d+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {\n                  xTexelC${y} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${y}.zw = vec2(0.0);\n                  }\n                  xTexelC${y}Ready = 1;\n                }\n              `,d+=1===l&&y>0?`\n                xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${y} = vec4(previous.zw, xTexelC${y}.xy);\n                  } else {\n                    xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);\n                  }\n                  `):d+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {\n                  xTexelC${y} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${y}.zw = vec2(0.0);\n                  }\n                  xTexelC${y}Ready = 1;\n                }\n\n                xC${y} = xTexelC${y};\n                `,y+1<u)){let b=s%2==0?w.nearestLargerEven(l):l;l%2==0&&s%2==1||l%2!=0&&s%2!=1?(d+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${b};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {\n                    xTexelC${y+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${y+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${y+1}Ready = 1;\n                  }\n                  `,d+=l>1?`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);\n                    } else {\n                     xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);\n                    }\n                    `:`\n                    xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);\n                    `):d+=1===b?`\n                    xC${y+1} = xTexelC${y};\n                    `:`\n                    xCOffset = xC + ${b};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {\n                      xTexelC${y+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${y+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${y+1}Ready = 1;\n                    }\n\n                    xC${y+1} = xTexelC${y+1};\n                    `}}else y<u&&(s%2==1?(d+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {\n                  xTexelC${y} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${y}.zw = vec2(0.0);\n                  }\n                  xTexelC${y}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {\n                  xTexelC${y+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${y+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${y+1}Ready = 1;\n                }\n\n                xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);\n              `,y+1<u&&(d+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);\n                `)):(d+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {\n                  xTexelC${y} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${y}.zw = vec2(0.0);\n                  }\n                  xTexelC${y}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {\n                  xTexelC${y+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${y+1}.zw = vec2(0.);\n                  }\n                  xTexelC${y+1}Ready = 1;\n                }\n\n                xC${y} = vec4(\n                  xTexelC${y}.xy, xTexelC${y+1}.xy);\n              `,y+1<u&&(d+=`\n                  xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);\n                `)));y<u&&(d+=`\n            wTexel = getW(r, ${y}, d1, q);\n            dotProd += xC${y} * vec4(wTexel.xz, wTexel.xz);\n          `,y+1<u&&(d+=`\n              wTexel = getW(r, ${y+1}, d1, q);\n              dotProd += xC${y+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}d+="\n    }\n  ",d+="\n      }\n    ";let p="",f="";t&&(p=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${t}\n        }`:i?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${t}\n        }`:`vec4 activation(vec4 x) {\n          ${t}\n        }`,f="result = activation(result);");let m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${p}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${a};\n        int q = d2 - d1 * ${a};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${d}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${m}\n        ${f}\n        setOutput(result);\n      }\n    `}},gUe={kernelName:ld,backendName:"webgl",kernelFunc:function mUe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,filter:a}=n,{strides:s,pad:o,dilations:l,dimRoundingMode:c}=r,u=l;null==u&&(u=[1,1]),w.assert(I.eitherStridesOrDilationsAreOne(s,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let d,h=I.computeConv2DInfo(i.shape,a.shape,s,u,o,c,!0);return d=Q().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels==1?new uY(h):new cY(h),t.runWebGLProgram(d,[i,a],"float32",[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]])}},vUe={kernelName:pw,backendName:"webgl",kernelFunc:function _Ue(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,dy:a}=n,{strides:s,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r,h=I.computeConv2DInfo(i.shape,u,s,o,l,c,!0),d=new class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${e.outChannels/e.inChannels} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${e.strideHeight} - ${e.padInfo.top};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${e.strideWidth} - ${e.padInfo.left};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(h);return t.runWebGLProgram(d,[i,a],"float32")}},wUe={kernelName:fw,backendName:"webgl",kernelFunc:function xUe(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,filter:a}=n,{strides:s,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r,h=I.computeConv2DInfo(u,a.shape,s,o,l,c,!0),d=new class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let n=e.filterHeight,t=e.filterWidth,o=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${n-1-e.padInfo.top}, ${t-1-e.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${n}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${n} - 1 - wR;\n\n          for (int wC = 0; wC < ${t}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${t} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${o}; dm++) {\n              int d2 = d1 * ${o} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(h);return t.runWebGLProgram(d,[i,a],"float32")}},SUe={kernelName:Sb,backendName:"webgl",kernelFunc:function kUe(e){let{inputs:n,backend:t}=e,{x:r}=n,i=[...r.shape,...r.shape],a=w.sizeFromShape(r.shape),s=Ie({inputs:{x:r},backend:t,attrs:{shape:[a]}}),o=new class{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}(a),l=t.runWebGLProgram(o,[s],s.dtype),c=Ie({inputs:{x:l},backend:t,attrs:{shape:i}});return t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(l),c}},EUe={kernelName:cd,backendName:"webgl",kernelFunc:function MUe(e){let u,{inputs:n,backend:t,attrs:r}=e,{x:i,filter:a}=n,{strides:s,pad:o,dilations:l}=r,c=I.computeDilation2DInfo(i.shape,a.shape,s,o,"NHWC",l),h=new class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let{inHeight:n,inWidth:t,padInfo:r,strideHeight:i,strideWidth:a,filterHeight:s,filterWidth:o,dilationHeight:l,dilationWidth:c}=e,{top:u,left:h}=r;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${a});\n      const ivec2 pads = ivec2(${u}, ${h});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${s}; h++) {\n          int hIn = hBeg + h * ${l};\n\n          if (hIn >= 0 && hIn < ${n}) {\n            for (int w = 0; w < ${o}; w++) {\n              int wIn = wBeg + w * ${c};\n\n              if (wIn >= 0 && wIn < ${t}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}(c);u=t.runWebGLProgram(h,[i,a],"float32");let d=Ie({inputs:{x:u},backend:t,attrs:{shape:c.outShape}});return t.disposeIntermediateTensorInfo(u),d}},AUe={kernelName:gw,backendName:"webgl",kernelFunc:function DUe(e){let{inputs:n,backend:t,attrs:r}=e,{equation:i}=r,a=n,{allDims:s,summedDims:o,idDims:l}=I.decodeEinsumEquation(i,a.length);I.checkEinsumDimSizes(s.length,l,a);let{path:c,steps:u}=I.getEinsumComputePath(o,l),h=u.length,d=null,p=s.length,f=[];for(let m=0;m<h;++m){for(let g of u[m]){let _,{permutationIndices:y,expandDims:b}=I.getEinsumPermutation(p,l[g]);I.isIdentityPermutation(y)?_=a[g]:(_=$i({inputs:{x:a[g]},backend:t,attrs:{perm:y}}),f.push(_));let v=_.shape.slice();for(let x=0;x<b.length;++x)v.splice(b[x],0,1);w.arraysEqual(_.shape,v)||(_=Ie({inputs:{x:_},backend:t,attrs:{shape:v}}),f.push(_)),null===d?d=_:(d=oF({inputs:{a:_,b:d},backend:t}),f.push(d))}m<h-1&&(c[m]>=0&&(d=xC({inputs:{x:d},backend:t,attrs:{axis:c[m]-(s.length-p),keepDims:!1}}),f.push(d)),p--)}for(let m of f)m!==d&&t.disposeIntermediateTensorInfo(m);return d}},OUe=Lt({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),FUe={kernelName:dd,backendName:"webgl",kernelFunc:OUe},$Ue={kernelName:Xf,backendName:"webgl",kernelFunc:e=>{let{inputs:n,backend:t}=e,{dy:r,y:i}=n,a=Q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new vg("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,i.shape):new Kh("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,i.shape);return t.runWebGLProgram(a,[r,i],r.dtype)}},zUe=li({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:yBe}),UUe={kernelName:Yf,backendName:"webgl",kernelFunc:zUe},WUe=Lt({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${I.ERF_P};\n  float a1 = ${I.ERF_A1};\n  float a2 = ${I.ERF_A2};\n  float a3 = ${I.ERF_A3};\n  float a4 = ${I.ERF_A4};\n  float a5 = ${I.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),jUe={kernelName:hd,backendName:"webgl",kernelFunc:WUe},dY=Lt({opSnippet:xg+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:bBe,dtype:"float32"}),KUe={kernelName:pd,backendName:"webgl",kernelFunc:dY};function dF(e){let{inputs:n,attrs:t,backend:r}=e,{dim:i}=t,{input:a}=n,s=a.shape.length,o=a.shape.slice(),l=i;return i<0&&(w.assert(-(s+1)<=i,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+i+1),o.splice(l,0,1),Ie({inputs:{x:a},backend:r,attrs:{shape:o}})}var XUe={kernelName:Zf,backendName:"webgl",kernelFunc:dF},hY="return exp(x) - 1.0;",YUe=Lt({opSnippet:hY,packedOpSnippet:hY,cpuKernelImpl:_Be}),ZUe={kernelName:fd,backendName:"webgl",kernelFunc:YUe},pY=class{constructor(e,n,t){this.variableNames=["real","imag"];let r=n[1];this.outputShape=n;let s,i=t?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=t?`${r}.0`:"1.0";if("real"===e)s="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);s="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${i};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${s}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${a};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}};function fY(e,n,t){let r=t.texData.get(e.dataId),i=w.sizeFromShape(e.shape),a=e.shape[e.shape.length-1],o=Ie({inputs:{x:e},backend:t,attrs:{shape:[i/a,a]}}),l=o.shape,c=new pY("real",l,n),u=new pY("imag",l,n),h=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],d=t.runWebGLProgram(c,h,"float32"),p=t.runWebGLProgram(u,h,"float32"),f=Hc({inputs:{real:d,imag:p},backend:t});t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(p);let m=Ie({inputs:{x:f},backend:t,attrs:{shape:e.shape}});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(f),m}var JUe={kernelName:yw,backendName:"webgl",kernelFunc:function QUe(e){let{inputs:n,backend:t}=e,{input:r}=n;return fY(r,!1,t)}},eHe=class{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}};function Y_(e){let{backend:n,attrs:t}=e,{shape:r,value:i}=t,{dtype:a}=t;if(a=a||w.inferDtype(i),"string"===a){let s=w.getArrayFromDType(a,w.sizeFromShape(r));return s.fill(i),n.makeTensorInfo(r,a,s)}{let s=new eHe(r,i);return n.runWebGLProgram(s,[],a,[[i]])}}var Cg,tHe={kernelName:Ib,backendName:"webgl",kernelFunc:Y_},rHe={kernelName:Qf,backendName:"webgl",kernelFunc:({inputs:e,backend:n})=>{let{image:t}=e,r=n,i=new class{constructor(e){this.variableNames=["Image"],this.outputShape=[];let n=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${n} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${n}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}(t.shape);return r.runWebGLProgram(i,[t],t.dtype)}},mY="return floor(x);",iHe=Lt({opSnippet:mY,packedOpSnippet:mY,cpuKernelImpl:vBe}),aHe={kernelName:md,backendName:"webgl",kernelFunc:iHe},lHe=li({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),cHe={kernelName:gd,backendName:"webgl",kernelFunc:lHe},hHe={kernelName:kw,backendName:"webgl",kernelFunc:function pHe(e){let{inputs:n,backend:t,attrs:r}=e,{pixels:i}=n,{numChannels:a}=r,s=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,c]=s?[i.videoWidth,i.videoHeight]:[i.width,i.height],u=[c,l],h=[c,l,a];if(o||s){let m=Q().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(null==Cg||m!==hF)&&(hF=m,Cg=document.createElement("canvas").getContext("2d",{willReadFrequently:hF})),Cg.canvas.width=l,Cg.canvas.height=c,Cg.drawImage(i,0,0,l,c),i=Cg.canvas}let d=t.makeTensorInfo(u,"int32");t.texData.get(d.dataId).usage=qa.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(d.dataId),i);let p=Q().getBool("WEBGL_PACK")?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let n=Pi(),[t,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${t}.0);\n            vec4 values = ${n.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${n.output} = result;\n      }\n    `}}(h):new class{constructor(e){this.variableNames=["A"];let n=Pi(),[t,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${t}.0);\n\n        vec4 values = ${n.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}(h),f=t.runWebGLProgram(p,[d],"int32");return t.disposeData(d.dataId),f}},hF=Q().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU"),mHe={kernelName:ch,backendName:"webgl",kernelFunc:function fHe(e){let y,{inputs:n,backend:t,attrs:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=n,{strides:l,pad:c,dataFormat:u,dilations:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=r,m=I.convertConv2DDataFormat(u),g=I.computeConv2DInfo(i.shape,a.shape,l,h,c,d,!1,m),b=[],_=null!=s,v=null!=o,x="leakyrelu"===p,S=()=>{let D=[i,a],N=(F,O)=>{if("NCHW"===O&&1===F.shape.length&&1!==F.shape[0]){let k=Ie({inputs:{x:F},backend:t,attrs:{shape:[F.shape[0],1,1]}});return b.push(k),k}return F};if(_&&D.push(N(s,u)),v&&D.push(N(o,u)),x){let F=t.makeTensorInfo([],"float32",w.createScalarValue(f,"float32"));D.push(F),b.push(F)}return D};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&Q().getBool("WEBGL_EXP_CONV")){let D=p?j_(p,!0):null,N=new nY(g,_,D,v,x),F=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],O=S();y=t.runWebGLProgram(N,O,"float32",F)}else if(Q().getBool("WEBGL_CONV_IM2COL"))y=iY({x:i,filter:a,convInfo:g,backend:t,bias:s,activation:p,preluActivationWeights:o,leakyreluAlpha:f});else{let D=p?j_(p,!1):null,N=new tY(g,_,D,v,x),F=S();y=t.runWebGLProgram(N,F,"float32")}else y=rY({x:i,filter:a,convInfo:g,backend:t,bias:s,activation:p,preluActivationWeights:o,leakyreluAlpha:f});let M=Ie({inputs:{x:y},backend:t,attrs:{shape:g.outShape}});return b.push(y),b.forEach(D=>t.disposeIntermediateTensorInfo(D)),M}},yHe={kernelName:uh,backendName:"webgl",kernelFunc:function gHe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=n,{strides:l,pad:c,dilations:u,dimRoundingMode:h,activation:d,leakyreluAlpha:p}=r,f=[],m=u;null==m&&(m=[1,1]),w.assert(I.eitherStridesOrDilationsAreOne(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);let M,g=I.computeConv2DInfo(i.shape,a.shape,l,m,c,h,!0),y=Q().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels==1,b=d?j_(d,y):null,_=[i,a],v=null!=s,x=null!=o,S="leakyrelu"===d;if(v&&_.push(s),x&&_.push(o),S){let F=t.makeTensorInfo([],"float32",w.createScalarValue(p,"float32"));_.push(F),f.push(F)}M=y?new uY(g,v,b,x,S):new cY(g,v,b,x,S);let N=t.runWebGLProgram(M,_,"float32",[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]]);return f.forEach(F=>t.disposeIntermediateTensorInfo(F)),N}},vHe={kernelName:em,backendName:"webgl",kernelFunc:function _He(e){let{inputs:n,backend:t}=e,{params:r,indices:i}=n,a=i.shape,s=a[a.length-1],o=w.sizeFromShape(r.shape),[l,c,u,h]=I.prepareAndValidate(r,i),d=Ie({inputs:{x:i},backend:t,attrs:{shape:[c,s]}}),p=Ie({inputs:{x:r},backend:t,attrs:{shape:[w.sizeFromShape(r.shape)/u,u]}});if(t.shouldExecuteOnCPU([r,i])||"string"===r.dtype){let y=t.readSync(i.dataId),b=t.bufferSync(r),_=xBe(y,b,r.dtype,c,s,u,h,r.shape,o);return t.makeTensorInfo(l,r.dtype,_.values)}let f=new class{constructor(e,n,t,r){this.sliceDim=e,this.strides=n,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=t;let i=yn(t.length),a="\n    int index;";for(let s=0;s<this.sliceDim;s++)a+=`\n          index = round(getIndices(coords[0], ${s}));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[s]};\n          flattenIndex += index * ${this.strides[s]};`;this.userCode=`\n         void main() {\n          ${i} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ${a}\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `}}(s,h,[c,u],r.shape),m=t.runWebGLProgram(f,[p,d],p.dtype),g=Ie({inputs:{x:m},backend:t,attrs:{shape:l}});return t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(m),g}};function gY(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,indices:a}=n,{axis:s,batchDims:o}=r,l=w.parseAxisParam(s,i.shape)[0];if(Q().get("DEBUG")){let b=t.readSync(a.dataId),_=i.shape[l];for(let v=0;v<b.length;++v){let x=b[v];w.assert(x<=_-1&&x>=0,()=>`GatherV2: the index value ${x} is not in [0, ${_-1}]`)}}let c=I.segment_util.collectGatherOpShapeInfo(i,a,l,o),u=w.sizeFromShape(a.shape),h=[],d=Ie({inputs:{x:i},backend:t,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=Ie({inputs:{x:a},backend:t,attrs:{shape:[c.batchSize,u/c.batchSize]}});h.push(d),h.push(p);let f=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(t.shouldExecuteOnCPU([i,a])||"string"===i.dtype){let b=t.bufferSync(p),_=t.bufferSync(d),v=wBe(_,b,f);return h.forEach(x=>t.disposeIntermediateTensorInfo(x)),t.makeTensorInfo(c.outputShape,v.dtype,v.values)}let m=new class{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;let t=yn(this.rank),r=function wHe(e,n){let t=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<e.length;i++)r.push(2===i?"index":`${t[i]}`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${t} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${r}));\n      }\n    `}}(d.shape,f),g=t.runWebGLProgram(m,[d,p],d.dtype);h.push(g);let y=Ie({inputs:{x:g},backend:t,attrs:{shape:c.outputShape}});return h.forEach(b=>t.disposeIntermediateTensorInfo(b)),y}var CHe={kernelName:Jf,backendName:"webgl",kernelFunc:gY},IHe=li({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:CBe,dtype:"bool"}),MHe={kernelName:tm,backendName:"webgl",kernelFunc:IHe},AHe=li({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:kBe}),THe={kernelName:bd,backendName:"webgl",kernelFunc:AHe},OHe={kernelName:bw,backendName:"webgl",kernelFunc:function NHe(e){let{inputs:n,backend:t}=e,{input:r}=n;return fY(r,!0,t)}},RHe=Lt({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),PHe={kernelName:vd,backendName:"webgl",kernelFunc:RHe},$He=Lt({opSnippet:"return float(isinf(x));",dtype:"bool"}),BHe={kernelName:xd,backendName:"webgl",kernelFunc:$He},zHe=Lt({opSnippet:"return float(isnan(x));",dtype:"bool"}),UHe={kernelName:wd,backendName:"webgl",kernelFunc:zHe},jHe=li({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:SBe,dtype:"bool"}),GHe={kernelName:nm,backendName:"webgl",kernelFunc:jHe},XHe=li({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:IBe,dtype:"bool"}),YHe={kernelName:rm,backendName:"webgl",kernelFunc:XHe},QHe={kernelName:im,backendName:"webgl",kernelFunc:function ZHe(e){let{backend:n,attrs:t}=e,{start:r,stop:i,num:a}=t,s=MBe(r,i,a);return n.makeTensorInfo([s.length],"float32",s)}},tWe=Lt({opSnippet:xg+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:EBe}),nWe={kernelName:kd,backendName:"webgl",kernelFunc:tWe},iWe=Lt({opSnippet:xg+"\n  return log(1.0 + x);\n"}),aWe={kernelName:Sd,backendName:"webgl",kernelFunc:iWe},lWe=li({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),cWe={kernelName:am,backendName:"webgl",kernelFunc:lWe},dWe=Lt({opSnippet:"return float(!(x >= 1.0));"}),hWe={kernelName:sm,backendName:"webgl",kernelFunc:dWe},mWe=li({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),gWe={kernelName:om,backendName:"webgl",kernelFunc:mWe},vWe={kernelName:Id,backendName:"webgl",kernelFunc:e=>{let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{depthRadius:a,bias:s,alpha:o,beta:l}=r,c=Q().getBool("WEBGL_PACK_NORMALIZATION")?new class{constructor(e,n,t,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let a=n,s=e[3]-1;this.outputShape=e;let o,l=`float(${t}) + float(${r}) * sum`;o=.5===i?`inversesqrt(${l})`:1===i?`1.0/(${l})`:`exp(log(${l}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${a};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${a}; j <= ${a}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${o};\n        setOutput(result);\n      }\n    `}}(i.shape,a,s,o,l):new class{constructor(e,n,t,r,i){this.variableNames=["x"],this.outputShape=[];let a=n,s=e[3]-1;this.outputShape=e;let o,l=`float(${t}) + float(${r}) * sum`;o=.5===i?`inversesqrt(${l})`:1===i?`1.0/(${l})`:`exp(log(${l}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${a}; j <= ${a}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${s}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${o};\n        setOutput(val);\n      }\n    `}}(i.shape,a,s,o,l);return t.runWebGLProgram(c,[i],i.dtype)}},CWe={kernelName:lm,backendName:"webgl",kernelFunc:e=>{let{inputs:n,backend:t,attrs:r}=e,{x:i,y:a,dy:s}=n,{depthRadius:o,bias:l,alpha:c,beta:u}=r,h=new class{constructor(e,n,t,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=t,this.alpha=r,this.beta=i,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${n})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${n} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${t});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${i})\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${i});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}(i.shape,o,l,c,u);return t.runWebGLProgram(h,[i,a,s],i.dtype)}};function yY(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{reductionIndices:a,keepDims:s}=r,o=i.shape.length,l=w.parseAxisParam(a,i.shape),c=l,u=I.getAxesPermutation(c,o),h=null!=u,d=t.shouldExecuteOnCPU([i]),p=i;if(h){if(d){let b=t.texData.get(p.dataId).values,_=new Array(o);for(let S=0;S<_.length;S++)_[S]=i.shape[u[S]];let v=rF(b,i.shape,i.dtype,u,_);p=t.makeTensorInfo(_,i.dtype),t.texData.get(p.dataId).values=v}else p=vC(i,u,t);c=I.getInnerMostAxes(c.length,o)}I.assertAxesAreInnerMostDims("max",c,o);let y,[f,m]=I.computeOutAndReduceShapes(p.shape,c),g=f;if(s&&(g=I.expandShapeToKeepDim(f,l)),d){let b=t.texData.get(p.dataId).values,_=DBe(b,w.sizeFromShape(m),g,i.dtype);y=t.makeTensorInfo(g,i.dtype),t.texData.get(y.dataId).values=_}else y=function kWe(e,n,t,r){let i=w.sizeFromShape(n),s=Ie({inputs:{x:e},attrs:{shape:[w.sizeFromShape(e.shape)/i,i]},backend:r}),o=Yh(s,e.dtype,"max",r),l=Ie({inputs:{x:o},attrs:{shape:t},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),l}(p,m,g,t);return h&&t.disposeIntermediateTensorInfo(p),y}var SWe={kernelName:Md,backendName:"webgl",kernelFunc:yY},EWe=li({opSnippet:sF+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Xh+"\n  return result;\n",cpuKernelImpl:ABe}),DWe={kernelName:Ed,backendName:"webgl",kernelFunc:EWe},TWe={kernelName:Dd,backendName:"webgl",kernelFunc:function AWe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n;mg(i,"maxPool");let{filterSize:a,strides:s,pad:o,dimRoundingMode:l}=r;w.assert(I.eitherStridesOrDilationsAreOne(s,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`);let u=I.computePool2DInfo(i.shape,a,s,1,o,l);if(1===u.filterWidth&&1===u.filterHeight&&w.arraysEqual(u.inShape,u.outShape))return Ma({inputs:{x:i},backend:t});let h=new G_(u,"max",!1);return t.runWebGLProgram(h,[i],i.dtype)}},OWe={kernelName:cm,backendName:"webgl",kernelFunc:function NWe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{filterSize:a,strides:s,pad:o,dataFormat:l,dimRoundingMode:c}=r,h=I.computePool3DInfo(i.shape,a,s,[1,1,1],o,c,l),d=new lF(h,"max",!1);return t.runWebGLProgram(d,[i],i.dtype)}},LWe={kernelName:Eb,backendName:"webgl",kernelFunc:function PWe(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,input:a}=n,s=a,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,d=I.computePool3DInfo(s.shape,o,l,[1,1,1],c,u),p=new lF(d,"max",!0),f=t.runWebGLProgram(p,[s],s.dtype),m=new class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let o=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${o-1-e.padInfo.front}, ${l-1-e.padInfo.top}, ${c-1-e.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${o};\n           wD += ${e.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${e.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${l};\n              wR += ${e.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${c};\n                wC += ${e.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${o*l*c-1} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${l} * ${c} +\n                  wR * ${c} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(d),g=t.runWebGLProgram(m,[i,f],s.dtype);return t.disposeIntermediateTensorInfo(f),g}},BWe={kernelName:Mb,backendName:"webgl",kernelFunc:function $We(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,input:a,output:s}=n,o=a;mg([a,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:h}=r,d=I.computePool2DInfo(o.shape,l,c,1,u,h),f=new G_(d,"max",!0),m=t.runWebGLProgram(f,[o],o.dtype),g=new class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let i=e.effectiveFilterHeight,a=e.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${i-1-e.padInfo.top}, ${a-1-e.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${i};\n          wR += ${e.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${e.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${a}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${e.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${i*a-1} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${a} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(d),y=t.runWebGLProgram(g,[i,m],o.dtype);return t.disposeIntermediateTensorInfo(m),y}},zWe={kernelName:Db,backendName:"webgl",kernelFunc:({inputs:e,attrs:n,backend:t})=>{let{x:r}=e,{filterSize:i,strides:a,pad:s,includeBatchInIndex:o}=n,l=t;w.assert(4===r.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);let c=[1,1];w.assert(I.eitherStridesOrDilationsAreOne(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let u=I.computePool2DInfo(r.shape,i,a,c,s),[h,d]=function VWe(e,n,t,r){let i=new G_(t,"max",!1),a=r.runWebGLProgram(i,[e],"float32");return i=new G_(t,"max",!0,!0,n),[a,r.runWebGLProgram(i,[e],"float32")]}(r,o,u,l);return[h,d]}},HWe={kernelName:Ad,backendName:"webgl",kernelFunc:({inputs:e,attrs:n,backend:t})=>{let{x:r}=e,{keepDims:i,axis:a}=n,s=t,o=r.shape.length,l=w.parseAxisParam(a,r.shape),c=l,u=I.getAxesPermutation(c,o),h=null!=u,d=s.shouldExecuteOnCPU([r]),p=[],f=r;if(h){if(d){let _=s.texData.get(f.dataId).values,v=new Array(o);for(let M=0;M<v.length;M++)v[M]=r.shape[u[M]];let x=rF(_,r.shape,r.dtype,u,v);f=s.makeTensorInfo(v,r.dtype),s.texData.get(f.dataId).values=x}else f=vC(r,u,s);p.push(f),c=I.getInnerMostAxes(c.length,o)}I.assertAxesAreInnerMostDims("sum",c,o);let[m,g]=I.computeOutAndReduceShapes(f.shape,c),y=m;i&&(y=I.expandShapeToKeepDim(m,l));let b=function UWe(e,n,t,r){let i=w.sizeFromShape(n),s=Ie({inputs:{x:e},attrs:{shape:[w.sizeFromShape(e.shape)/i,i]},backend:r}),o=Yh(s,"float32","mean",r),l=Ie({inputs:{x:o},attrs:{shape:t},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(o),l}(f,g,y,s);for(let _ of p)s.disposeIntermediateTensorInfo(_);return b}},jWe={kernelName:Td,backendName:"webgl",kernelFunc:function WWe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,keepDims:s}=r,o=i.shape.length,l=w.parseAxisParam(a,i.shape),c=l,u=I.getAxesPermutation(c,o),h=i;null!=u&&(h=$i({inputs:{x:i},backend:t,attrs:{perm:u}}),c=I.getInnerMostAxes(c.length,i.shape.length)),I.assertAxesAreInnerMostDims("min",c,o);let y,[d,p]=I.computeOutAndReduceShapes(h.shape,c),m=Ie({inputs:{x:h},backend:t,attrs:{shape:[-1,w.sizeFromShape(p)]}}),g=Yh(m,m.dtype,"min",t);return y=Ie(s?{inputs:{x:g},backend:t,attrs:{shape:I.expandShapeToKeepDim(d,l)}}:{inputs:{x:g},backend:t,attrs:{shape:d}}),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(g),null!=u&&t.disposeIntermediateTensorInfo(h),y}},KWe=li({opSnippet:sF+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+Xh+"\n  return result;\n",cpuKernelImpl:TBe}),XWe={kernelName:Nd,backendName:"webgl",kernelFunc:KWe},JWe={kernelName:Od,backendName:"webgl",kernelFunc:({inputs:e,backend:n,attrs:t})=>{let{x:r}=e,{paddings:i,mode:a}=t,s=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e,n,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,f)=>p[0]+e[f]+p[1]);let r=e.length,i=yn(r),a=n.map(p=>p[0]).join(","),s=n.map((p,f)=>p[0]+e[f]).join(","),o=Li("rc",r),l=Li("source",r),c=`${o[r-1]} < ${this.outputShape[r-1]}`,u=1===r?"source":`vec2(${l.slice(-2).join()})`,h="reflect"===t?0:1,d="";if(1===r){let p=`\n        ${i} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${h};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${h};\n        }\n        source -= start;\n      `;d=`\n        ${i} rc = outputLoc;\n        ${p}\n        result[0] = getChannel(getX(${l.join()}), ${u});\n        ${o[r-1]} += 1;\n        if(${c}) {\n          ${p}\n          result[1] = getChannel(getX(${l.join()}), ${u});\n        }\n      `}else{let p=`\n        ${i} source = rc;\n        ${i} lt = ${i}(lessThan(source, start));\n        ${i} gte = ${i}(greaterThanEqual(source, end));\n        ${i} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${h}) +\n                gte * ((end - 1) * 2 - source + ${h});\n        source -= start;\n      `;d=`\n        ${i} rc = outputLoc;\n        ${p}\n        result[0] = getChannel(getX(${l.join()}), ${u});\n        ${o[r-1]} += 1;\n        if(${c}) {\n          ${p}\n          result[1] = getChannel(getX(${l.join()}), ${u});\n        }\n        rc = outputLoc;\n        ${o[r-2]} += 1;\n        if(${o[r-2]} < ${this.outputShape[r-2]}) {\n          ${p}\n          result[2] = getChannel(getX(${l.join()}), ${u});\n          ${o[r-1]} += 1;\n          if(${c}) {\n            ${p}\n            result[3] = getChannel(getX(${l.join()}), ${u});\n          }\n        }\n      `}this.userCode=`\n      const ${i} start = ${i}(${a});\n      const ${i} end = ${i}(${s});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${d}\n        setOutput(result);\n      }\n    `}}(r.shape,i,a):new class{constructor(e,n,t){this.variableNames=["x"],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);let r=e.length,i=yn(r),a=n.map(c=>c[0]).join(","),s=n.map((c,u)=>c[0]+e[u]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===t?0:1;this.userCode=1!==r?`\n      ${i} start = ${i}(${a});\n      ${i} end = ${i}(${s});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${l};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};\n          }\n        }\n        ${i} coords = outC - start;\n        setOutput(getX(${o}));\n      }\n    `:`\n        int start = ${a};\n        int end = ${s};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${l};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${l};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}(r.shape,i,a);return n.runWebGLProgram(s,[r],r.dtype)}},n8e=li({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+Xh+"\n  return result;\n"}),r8e={kernelName:Fd,backendName:"webgl",kernelFunc:n8e},bY=li({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),o8e={kernelName:ud,backendName:"webgl",kernelFunc:bY},_Y="return a - b;",vY=li({opSnippet:_Y,packedOpSnippet:_Y,supportsComplex:!0,cpuKernelImpl:QBe}),l8e={kernelName:ah,backendName:"webgl",kernelFunc:vY};function xY(e){let{inputs:n,backend:t,attrs:r}=e,{logits:i}=n,{dim:a}=r,s=w.parseAxisParam([a],i.shape),o=yY({inputs:{x:i},backend:t,attrs:{reductionIndices:s,keepDims:!1}}),l=I.expandShapeToKeepDim(o.shape,s),c=Ie({inputs:{x:o},backend:t,attrs:{shape:l}}),u=vY({inputs:{a:i,b:c},backend:t}),h=dY({inputs:{x:u},backend:t}),d=xC({inputs:{x:h},backend:t,attrs:{axis:s,keepDims:!1}}),p=Ie({inputs:{x:d},backend:t,attrs:{shape:l}}),f=bY({inputs:{a:h,b:p},backend:t});return t.disposeIntermediateTensorInfo(o),t.disposeIntermediateTensorInfo(c),t.disposeIntermediateTensorInfo(u),t.disposeIntermediateTensorInfo(h),t.disposeIntermediateTensorInfo(d),t.disposeIntermediateTensorInfo(p),f}var c8e={kernelName:rh,backendName:"webgl",kernelFunc:xY},d8e={kernelName:um,backendName:"webgl",kernelFunc:function u8e(e){let{inputs:n,backend:t,attrs:r}=e,{logits:i}=n,{numSamples:a,seed:s,normalized:o}=r,l=o?i:xY({inputs:{logits:i},backend:t,attrs:{dim:i.shape.length-1}}),c=l.shape[0],u=l.shape[1],h=new class{constructor(e,n,t){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${n-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${n-1}));\n      }\n    `}}(c,u,a),p=t.runWebGLProgram(h,[l],"int32",[[s]]);return o||t.disposeIntermediateTensorInfo(l),p}},h8e=ks+"\n  return -x;\n",m8e={kernelName:dm,backendName:"webgl",kernelFunc:function f8e(e){let i,{inputs:n,backend:t}=e,{x:r}=n;if(t.shouldExecuteOnCPU([r])){let a=t.texData.get(r.dataId),[s,o]=OBe(a.values,r.shape,r.dtype);return t.makeTensorInfo(o,r.dtype,s)}return i=Q().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Uc(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new Fo(r.shape,h8e),t.runWebGLProgram(i,[r],r.dtype)}},g8e=Mo.nonMaxSuppressionV3Impl,b8e={kernelName:pm,backendName:"webgl",kernelFunc:function y8e(e){I.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:t,attrs:r}=e,{boxes:i,scores:a}=n,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r,c=t.readSync(i.dataId),u=t.readSync(a.dataId),{selectedIndices:h}=g8e(c,u,s,o,l);return t.makeTensorInfo([h.length],"int32",new Int32Array(h))}},_8e=Mo.nonMaxSuppressionV4Impl,x8e={kernelName:fm,backendName:"webgl",kernelFunc:function v8e(e){I.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:t,attrs:r}=e,{boxes:i,scores:a}=n,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,u=t.readSync(i.dataId),h=t.readSync(a.dataId),{selectedIndices:d,validOutputs:p}=_8e(u,h,s,o,l,c);return[t.makeTensorInfo([d.length],"int32",new Int32Array(d)),t.makeTensorInfo([],"int32",new Int32Array([p]))]}},w8e=Mo.nonMaxSuppressionV5Impl,k8e={kernelName:mm,backendName:"webgl",kernelFunc:function C8e(e){I.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:t,attrs:r}=e,{boxes:i,scores:a}=n,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,u=t.readSync(i.dataId),h=t.readSync(a.dataId),d=s,p=o,f=l,m=c,{selectedIndices:g,selectedScores:y}=w8e(u,h,d,p,f,m);return[t.makeTensorInfo([g.length],"int32",new Int32Array(g)),t.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},M8e={kernelName:Pd,backendName:"webgl",kernelFunc:e=>{let{inputs:n,backend:t,attrs:r}=e,{indices:i}=n,{dtype:a,depth:s,onValue:o,offValue:l}=r,c=w.sizeFromShape(i.shape),u=new class{constructor(e,n,t,r){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${t}),\n                      float(index == coords.y)));\n      }\n    `}}(c,s,o,l),h=Ie({inputs:{x:i},backend:t,attrs:{shape:[c]}}),d=t.runWebGLProgram(u,[h],a);t.disposeIntermediateTensorInfo(h);let f=Ie({inputs:{x:d},backend:t,attrs:{shape:[...i.shape,s]}});return t.disposeIntermediateTensorInfo(d),f}};function MC(e){let{inputs:n,backend:t}=e,{x:r}=n;if("complex64"===r.dtype){let i=q_({inputs:{input:r},backend:t}),a=MC({inputs:{x:i},backend:t}),s=SC({inputs:{input:r},backend:t}),o=MC({inputs:{x:s},backend:t}),l=Hc({inputs:{real:a,imag:o},backend:t});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(o),l}return Y_({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:t})}var E8e={kernelName:Fm,backendName:"webgl",kernelFunc:MC},D8e={kernelName:gm,backendName:"webgl",kernelFunc:function wY(e){let{inputs:n,backend:t}=e,{x:r}=n;if("string"===r.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===r.dtype){let i=q_({inputs:{input:r},backend:t}),a=wY({inputs:{x:i},backend:t}),s=SC({inputs:{input:r},backend:t}),o=MC({inputs:{x:s},backend:t}),l=Hc({inputs:{real:a,imag:o},backend:t});return t.disposeIntermediateTensorInfo(i),t.disposeIntermediateTensorInfo(a),t.disposeIntermediateTensorInfo(s),t.disposeIntermediateTensorInfo(o),l}return Y_({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:t})}},T8e={kernelName:ym,backendName:"webgl",kernelFunc:function A8e(e){let{inputs:n,backend:t,attrs:r}=e,{axis:i}=r;if(1===n.length)return dF({inputs:{input:n[0]},backend:t,attrs:{dim:i}});let a=n[0].shape,s=n[0].dtype;n.forEach(u=>{w.assertShapesMatch(a,u.shape,"All tensors passed to stack must have matching shapes"),w.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],c=eY({inputs:n.map(u=>{let h=dF({inputs:{input:u},backend:t,attrs:{dim:i}});return o.push(h),h}),backend:t,attrs:{axis:i}});return o.forEach(u=>t.disposeIntermediateTensorInfo(u)),c}},CY=e=>{let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{paddings:a,constantValue:s}=r;if(0===w.sizeFromShape(i.shape))return Y_({backend:t,attrs:{shape:a.map((u,h)=>u[0]+i.shape[h]+u[1]),value:s,dtype:i.dtype}});let o=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e,n,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((f,m)=>f[0]+e[m]+f[1]);let r=e.length,i=yn(r),a=n.map(f=>f[0]).join(","),s=n.map((f,m)=>f[0]+e[m]).join(","),o=Li("rc",r),l=Li("source",r),c=`${o[r-1]} < ${this.outputShape[r-1]}`,u=1===r?"source":`vec2(${l.slice(-2).join()})`,h=[`${i} rc = outputLoc;`,`${o[r-1]} += 1;\n       if(${c}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${o[r-2]} += 1;\n       if(${o[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${o[r-1]} += 1;\n         if(${c}) {`],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="";for(let f=0,m=1===r?2:4;f<m;f++)p+=`\n        ${h[f]}\n        if (${d}) {\n          result[${f}] = float(value);\n        } else {\n          ${i} source = rc - start;\n          result[${f}] = getChannel(getX(${l.join()}), ${u});\n        }\n      `;p+=1===r?"} ":"}}",this.userCode=`\n      const ${i} start = ${i}(${a});\n      const ${i} end = ${i}(${s});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p}\n        setOutput(result);\n      }\n    `}}(i.shape,a,s):new class{constructor(e,n,t){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((l,c)=>l[0]+e[c]+l[1]);let r=e.length,i=yn(r),a=n.map(l=>l[0]).join(","),s=n.map((l,c)=>l[0]+e[c]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${i} start = ${i}(${a});\n      ${i} end = ${i}(${s});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${i} coords = outC - start;\n          setOutput(getX(${o}));\n        }\n      }\n    `:`\n        int start = ${a};\n        int end = ${s};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}(i.shape,a,s);return t.runWebGLProgram(o,[i],i.dtype,[[s]])},F8e={kernelName:Ld,backendName:"webgl",kernelFunc:CY},L8e=li({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+Xh+"\n  return result;\n"}),$8e={kernelName:$d,backendName:"webgl",kernelFunc:L8e},V8e={kernelName:Vd,backendName:"webgl",kernelFunc:function B8e(e){let p,{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,keepDims:s}=r,o=i.shape.length,l=[],c=w.parseAxisParam(a,i.shape),u=c,h=I.getAxesPermutation(u,o),d=i;if(null!=h&&(d=$i({inputs:{x:i},backend:t,attrs:{perm:h}}),u=I.getInnerMostAxes(u.length,o),l.push(d)),I.assertAxesAreInnerMostDims("prod",u,o),t.shouldExecuteOnCPU([d])){let f=t.texData.get(d.dataId).values,{outVals:m,outShape:g,outDtype:y}=RBe(d.shape,d.dtype,f,u);p=t.makeTensorInfo(g,y,m)}else{let[f,m]=I.computeOutAndReduceShapes(d.shape,u),g=w.sizeFromShape(m),y=Ie({inputs:{x:d},backend:t,attrs:{shape:[-1,g]}}),_=Yh(y,Aw(i.dtype),"prod",t);p=Ie({inputs:{x:_},backend:t,attrs:{shape:f}}),l.push(y),l.push(_)}if(s){l.push(p);let f=I.expandShapeToKeepDim(p.shape,c);p=Ie({inputs:{x:p},backend:t,attrs:{shape:f}})}return l.forEach(f=>t.disposeIntermediateTensorInfo(f)),p}},U8e={kernelName:vw,backendName:"webgl",kernelFunc:function z8e(e){let{inputs:n,backend:t,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:a,indices:s}=n,{outputRaggedRank:o}=r,l=i.map(y=>t.readSync(y.dataId)),c=i.map(y=>y.shape),u=t.readSync(a.dataId),h=t.readSync(s.dataId),[d,p,f]=PBe(l,c,u,a.shape,a.dtype,h,s.shape,o),m=d.map(y=>t.makeTensorInfo([y.length],"int32",y)),g=t.makeTensorInfo(f,a.dtype,p);return m.concat([g])}},W8e={kernelName:xw,backendName:"webgl",kernelFunc:function H8e(e){let{inputs:n,backend:t}=e,{starts:r,limits:i,deltas:a}=n,s=t.readSync(r.dataId),o=t.readSync(i.dataId),l=t.readSync(a.dataId),[c,u]=LBe(s,r.shape,r.dtype,o,i.shape,l,a.shape);return[t.makeTensorInfo([c.length],"int32",c),t.makeTensorInfo([u.length],r.dtype,u)]}},G8e={kernelName:ww,backendName:"webgl",kernelFunc:function j8e(e){let{inputs:n,backend:t,attrs:r}=e,{shape:i,values:a,defaultValue:s,rowPartitionTensors:o}=n,{rowPartitionTypes:l}=r,c=t.readSync(i.dataId),u=t.readSync(a.dataId),h=t.readSync(s.dataId),d=o.map(g=>t.readSync(g.dataId)),p=o.map(g=>g.shape),[f,m]=$Be(c,i.shape,u,a.shape,a.dtype,h,s.shape,d,p,l);return t.makeTensorInfo(f,a.dtype,m)}},kY=e=>{let{backend:n,attrs:t}=e,{start:r,stop:i,step:a,dtype:s}=t,o=BBe(r,i,a,s);return n.makeTensorInfo([o.length],s,o)},q8e={kernelName:Ab,backendName:"webgl",kernelFunc:kY},X8e=Lt({opSnippet:"return 1.0 / x;"}),Y8e={kernelName:zd,backendName:"webgl",kernelFunc:X8e},J8e=Lt({opSnippet:ks+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),eje={kernelName:Ud,backendName:"webgl",kernelFunc:J8e},rje=Lt({opSnippet:ks+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),ije={kernelName:jd,backendName:"webgl",kernelFunc:rje},lje={kernelName:Wd,backendName:"webgl",kernelFunc:function oje(e){let{inputs:n,backend:t,attrs:r}=e,{images:i}=n,{alignCorners:a,halfPixelCenters:s,size:o}=r,[l,c]=o,u=Q().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new class{constructor(e,n,t,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[a,s,o,l]=e;this.outputShape=[a,n,t,l];let h,c=[r&&n>1?s-1:s,r&&t>1?o-1:o],u=[r&&n>1?n-1:n,r&&t>1?t-1:t];h=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${c[0]/u[0]},\n          ${c[1]/u[1]},\n          ${c[1]/u[1]});\n      const vec3 inputShapeRC = vec3(${s}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${t-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}(i.shape,l,c,a,s):new class{constructor(e,n,t,r,i){this.variableNames=["A"],this.outputShape=[];let[a,s,o,l]=e;this.outputShape=[a,n,t,l];let h,c=[r&&n>1?s-1:s,r&&t>1?o-1:o],u=[r&&n>1?n-1:n,r&&t>1?t-1:t];h=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${c[0]/u[0]},\n          ${c[1]/u[1]});\n      const vec2 inputShapeRC = vec2(${s}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${h};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}(i.shape,l,c,a,s);return t.runWebGLProgram(u,[i],"float32")}},dje={kernelName:vm,backendName:"webgl",kernelFunc:function uje(e){let{inputs:n,backend:t,attrs:r}=e,{images:i,dy:a}=n,{alignCorners:s}=r,o=new class{constructor(e,n,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;let[,r,i]=n,[,a,s]=e,o=[t&&a>1?r-1:r,t&&s>1?i-1:i],l=[t&&a>1?a-1:a,t&&s>1?s-1:s],c=o[0]/l[0],u=o[1]/l[1],h=1/c,d=1/u,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${c});\n        const float widthScale = float(${u});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${a}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${s}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}(a.shape,i.shape,s);return t.runWebGLProgram(o,[a],a.dtype)}},mje={kernelName:Hd,backendName:"webgl",kernelFunc:function fje(e){let{inputs:n,backend:t,attrs:r}=e,{images:i}=n,{alignCorners:a,halfPixelCenters:s,size:o}=r,[l,c]=o,u=Q().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new class{constructor(e,n,t,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[a,s,o,l]=e;this.outputShape=[a,n,t,l];let d,c=[r&&n>1?s-1:s,r&&t>1?o-1:o],u=[r&&n>1?n-1:n,r&&t>1?t-1:t];d=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${c[0]/u[0]},\n          ${c[1]/u[1]},\n          ${c[1]/u[1]});\n      const vec3 inputShapeRC = vec3(${s}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${d};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${t-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}(i.shape,l,c,a,s):new class{constructor(e,n,t,r,i){this.variableNames=["A"],this.outputShape=[];let[a,s,o,l]=e;this.outputShape=[a,n,t,l];let d,c=[r&&n>1?s-1:s,r&&t>1?o-1:o],u=[r&&n>1?n-1:n,r&&t>1?t-1:t];d=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${c[0]/u[0]},\n          ${c[1]/u[1]});\n      const vec2 inputShapeRC = vec2(${s}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${d};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}(i.shape,l,c,a,s);return t.runWebGLProgram(u,[i],i.dtype)}},bje={kernelName:_m,backendName:"webgl",kernelFunc:function yje(e){let{inputs:n,backend:t,attrs:r}=e,{images:i,dy:a}=n,{alignCorners:s}=r,o=new class{constructor(e,n,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;let[,r,i]=n,[,a,s]=e,o=[t&&a>1?r-1:r,t&&s>1?i-1:i],l=[t&&a>1?a-1:a,t&&s>1?s-1:s],c=o[0]/l[0],u=o[1]/l[1],h=1/c,d=1/u,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${c});\n        const float widthScale = float(${u});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${a}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${s}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${o[0]}) *\n                (float(dyR) / float(${l[0]}));\n\n            float sourceFracCol =\n                float(${o[1]}) *\n                  (float(dyC) / float(${l[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${t} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${i}) - 1),\n                ${t} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}(a.shape,i.shape,s);return t.runWebGLProgram(o,[a],a.dtype)}},wje={kernelName:Gd,backendName:"webgl",kernelFunc:function xje(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{dims:a}=r,s=i.shape.length,o=w.parseAxisParam(a,i.shape);if(0===s)return Ma({inputs:{x:i},backend:t});let l=Q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let t=e.length;if(t>4)throw new Error(`WebGL backend: Reverse of rank-${t} tensor is not yet supported`);this.outputShape=e;let r=Li("rc",t),i=`${r[t-1]} + 1 < ${this.outputShape[t-1]}`,a=`${r[t-2]} + 1 < ${this.outputShape[t-2]}`,s=yn(t);function h(p){let f=e.map((y,b)=>function d(p,f){return-1!==n.indexOf(p)&&1!==e[p]?`${e[p]} - ${f[p]} - 1`:`${f[p]}`}(b,p));return`getChannel(getX(${f.join(",")}), vec2(${f.slice(-2).join(",")}))`}this.userCode=1===t?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${s} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function o(p){return h(p)}(r.slice())};\n          if(${i}){\n            result.g = ${function l(p){return p[t-1]="("+p[t-1]+" + 1)",h(p)}(r.slice())};\n          }\n          if(${a}) {\n            result.b = ${function c(p){return p[t-2]="("+p[t-2]+" + 1)",h(p)}(r.slice())};\n            if(${i}) {\n              result.a = ${function u(p){return p[t-1]="("+p[t-1]+" + 1)",p[t-2]="("+p[t-2]+" + 1)",h(p)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}(i.shape,o):new class{constructor(e,n){this.variableNames=["x"];let t=e.length;if(t>4)throw new Error(`WebGL backend: Reverse of rank-${t} tensor is not yet supported`);if(this.outputShape=e,1===t)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);let i=e.map((s,o)=>(s=>-1!==n.indexOf(s)&&1!==e[s]?`${e[s]} - coords[${s}] - 1`:`coords[${s}]`)(o)).join(","),a=yn(t);this.userCode=`\n      void main() {\n        ${a} coords = getOutputCoords();\n        setOutput(getX(${i}));\n      }\n    `}}(i.shape,o);return t.runWebGLProgram(l,[i],i.dtype)}},kje={kernelName:Rm,backendName:"webgl",kernelFunc:({inputs:e,attrs:n,backend:t})=>{let{image:r}=e,{radians:i,fillValue:a,center:s}=n,o=t,l=new class{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let t=e[1],r=e[2];this.outputShape=e;let i="";i="number"==typeof n?`float outputValue = ${n.toFixed(2)};`:`\n        vec3 fill = vec3(${n.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${i}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${t}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}(r.shape,a),[c,u]=I.getImageCenter(s,r.shape[1],r.shape[2]),h=[[c,u,Math.sin(i),Math.cos(i)]];return o.runWebGLProgram(l,[r],r.dtype,h)}},Ije=Lt({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),Mje={kernelName:qd,backendName:"webgl",kernelFunc:Ije},Dje=Lt({opSnippet:"return inversesqrt(x);",cpuKernelImpl:VBe}),Aje={kernelName:Kd,backendName:"webgl",kernelFunc:Dje},pF=class{constructor(e,n,t,r,i,a,s=!0,o=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;let l=yn(i.length),c=yn(a.length),u="";1===t?u="i":2===t&&(u="i, j");let d="";1===r?d="i":2===r&&(d="i, coords[1]");let f="";o&&(f="coords[0], coords[1]"),this.userCode=`\n        ${l} strides = ${l}(${i});\n\n        void main() {\n          ${c} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${n}; j++) {\n              int index = round(getIndices(${u}));\n              flattenedIndex += index * ${n>1?"strides[j]":"strides"};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += getUpdates(${d});\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(${f}), sum, float(found)));\n        }\n      `}},Oje={kernelName:xm,backendName:"webgl",kernelFunc:function Nje(e){let{inputs:n,backend:t,attrs:r}=e,{indices:i,updates:a}=n,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=I.calculateShapes(a,i,s),d=[h/c,c];if(0===h)return t.makeTensorInfo(s,i.dtype);let g,p=Ie({inputs:{x:i},backend:t,attrs:{shape:[l,o]}}),f=Ie({inputs:{x:a},backend:t,attrs:{shape:[l,c]}}),m=t.makeTensorInfo([],"float32",new Float32Array([0]));g=Q().getBool("WEBGL_PACK")?new class{constructor(e,n,t,r,i,a,s=!0,o=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;let l=yn(i.length),c=yn(a.length),u="";1===t?u="i":2===t&&(u="i, j");let d="";1===r?d="i":2===r&&(d="i, coords[1]");let f="";o&&(f="coords[0], coords[1]"),this.userCode=`\n        ${l} strides = ${l}(${i});\n\n        void main() {\n          ${c} coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ${e}; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ${n}; j+=2) {\n              ivec4 index = round(getIndices(${u}));\n              flattenedIndex += index.xz * ${n>1?"strides[j]":"strides"};\n              if (j + 1 < ${n}) {\n                flattenedIndex += index.yw * ${n>1?"strides[j + 1]":"strides"};\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = getUpdates(${d});\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(getDefaultValue(${f}), sum, found));\n        }\n      `}}(l,o,p.shape.length,f.shape.length,u,d):new pF(l,o,p.shape.length,f.shape.length,u,d);let y=t.runWebGLProgram(g,[f,p,m],f.dtype),b=Ie({inputs:{x:y},backend:t,attrs:{shape:s}});return t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(y),t.disposeIntermediateTensorInfo(m),b}},Pje={kernelName:Cm,backendName:"webgl",kernelFunc:function Rje(e){let{inputs:n,backend:t,attrs:r}=e,{sortedSequence:i,values:a}=n,{side:s}=r,o=new class{constructor(e,n,t,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,t];let a=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,s=2===Q().getNumber("WEBGL_VERSION")?"while (left < right) {":a;this.userCode=`\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${s}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${"left"===r?"<":"<="} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `}}(i.shape[0],i.shape[1],a.shape[1],s);return t.runWebGLProgram(o,[i,a],"int32",[[i.shape[1]]])}},Bje={kernelName:km,backendName:"webgl",kernelFunc:function $je(e){let{inputs:n,backend:t}=e,{condition:r,t:i,e:a}=n,s=new class{constructor(e,n,t){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=n,t>4)throw Error(`Where for rank ${t} is not yet supported`);if(1===t)i="resRC",r="resRC";else{let s=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],l=[];for(let c=0;c<n.length;c++)l.push(`${s[c]}`),c<e&&o.push(`${s[c]}`);r=o.join(),i=l.join()}let a=yn(t);this.userCode=`\n      void main() {\n        ${a} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${i}));\n        } else {\n          setOutput(getB(${i}));\n        }\n      }\n    `}}(r.shape.length,i.shape,i.shape.length);return t.runWebGLProgram(s,[r,i,a],za(i.dtype,a.dtype))}},zje=Lt({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${I.SELU_SCALEALPHA};\n  float scale = ${I.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),Uje={kernelName:Xd,backendName:"webgl",kernelFunc:zje},jje=Lt({opSnippet:xg+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:UBe}),Gje={kernelName:Jd,backendName:"webgl",kernelFunc:jje},Kje=Lt({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),Xje={kernelName:Qd,backendName:"webgl",kernelFunc:Kje},Qje=Lt({opSnippet:xg+"\n  return sin(x);\n",packedOpSnippet:`\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ${Xh}\n  return result;\n`}),Jje={kernelName:Yd,backendName:"webgl",kernelFunc:Qje},tGe=Lt({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),nGe={kernelName:Zd,backendName:"webgl",kernelFunc:tGe},iGe=Lt({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),aGe={kernelName:eh,backendName:"webgl",kernelFunc:iGe},oGe={kernelName:Im,backendName:"webgl",kernelFunc:e=>{let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{blockShape:a,paddings:s}=r;w.assert(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let o=a.reduce((y,b)=>y*b),l=[[0,0]];l.push(...s);for(let y=1+a.length;y<i.shape.length;++y)l.push([0,0]);let c=[],u=CY({inputs:{x:i},backend:t,attrs:{paddings:l,constantValue:0}}),h=I.getReshaped(u.shape,a,o,!1),d=I.getPermuted(h.length,a.length,!1),p=I.getReshapedPermuted(u.shape,a,o,!1),f=Ie({inputs:{x:u},backend:t,attrs:{shape:h}}),m=$i({inputs:{x:f},backend:t,attrs:{perm:d}}),g=Ie({inputs:{x:m},backend:t,attrs:{shape:p}});return c.push(u),c.push(f),c.push(m),c.forEach(y=>t.disposeIntermediateTensorInfo(y)),g}},cGe={kernelName:Tb,backendName:"webgl",kernelFunc:function lGe(e){let{inputs:n,backend:t}=e,{indices:r,values:i,denseShape:a,defaultValue:s}=n;if(1!==a.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${a.shape}`);if(2!==r.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${r.shape}`);if(1!==i.shape.length)throw new Error(`Values must be a vector, saw:\n         ${i.shape}`);if(0!==s.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${s.shape}`);let o=t.readSync(r.dataId),l=t.readSync(i.dataId),c=t.readSync(a.dataId),u=t.readSync(s.dataId)[0],[h,d,p,f,m]=WBe(o,r.shape,r.dtype,l,i.dtype,c,u);return[t.makeTensorInfo(d,r.dtype,h),t.makeTensorInfo([d[0]],i.dtype,p),t.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(g=>Number(g)))),t.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}},dGe={kernelName:Em,backendName:"webgl",kernelFunc:function uGe(e){let{inputs:n,backend:t}=e,{inputIndices:r,inputShape:i,newShape:a}=n;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==i.shape.length)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(1!==a.shape.length)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);let s=Array.from(t.readSync(i.dataId)),o=t.readSync(r.dataId),l=Array.from(t.readSync(a.dataId)),[c,u,h]=jBe(o,r.shape,r.dtype,s,l);return[t.makeTensorInfo(u,r.dtype,c),t.makeTensorInfo([h.length],a.dtype,new Int32Array(h))]}},pGe={kernelName:Nb,backendName:"webgl",kernelFunc:function hGe(e){let{inputs:n,backend:t}=e,{data:r,indices:i,segmentIds:a}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${i.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${a.shape}`);let s=t.readSync(r.dataId),o=t.readSync(i.dataId),l=t.readSync(a.dataId),[c,u]=EX(s,r.shape,r.dtype,o,l,!0);return t.makeTensorInfo(u,r.dtype,c)}},mGe={kernelName:Ob,backendName:"webgl",kernelFunc:function fGe(e){let{inputs:n,backend:t}=e,{data:r,indices:i,segmentIds:a}=n;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${i.shape}`);if(1!==a.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${a.shape}`);let s=t.readSync(r.dataId),o=t.readSync(i.dataId),l=t.readSync(a.dataId),[c,u]=EX(s,r.shape,r.dtype,o,l);return t.makeTensorInfo(u,r.dtype,c)}},yGe={kernelName:Dm,backendName:"webgl",kernelFunc:function gGe(e){let{inputs:n,backend:t,attrs:r}=e,{sparseIndices:i,sparseValues:a,defaultValue:s}=n,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:d}=I.calculateShapes(a,i,o);if("string"===a.dtype){let y=t.bufferSync(i),b=t.bufferSync(a),_=w.decodeString(t.readSync(s.dataId)[0]),v=zBe(y,b,o,d,u,c,l,h,_,!1);return t.makeTensorInfo(o,v.dtype,v.values)}let f=new pF(c,l,i.shape.length,a.shape.length,h,[d,1],!1),m=t.runWebGLProgram(f,[a,i,s],a.dtype),g=Ie({inputs:{x:m},backend:t,attrs:{shape:o}});return t.disposeIntermediateTensorInfo(m),g}},_Ge={kernelName:Mm,backendName:"webgl",kernelFunc:function bGe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{numOrSizeSplits:a,axis:s}=r,o=w.parseAxisParam(s,i.shape)[0],l=I.prepareSplitSize(i,a,o),u=new Array(i.shape.length).fill(0),h=i.shape.slice();return l.map(d=>{let p=[...h];p[o]=d;let f=wg({inputs:{x:i},backend:t,attrs:{begin:u,size:p}});return u[o]+=d,f})}},SY="return sqrt(x);",vGe=Lt({opSnippet:SY,packedOpSnippet:SY,cpuKernelImpl:GBe}),xGe={kernelName:th,backendName:"webgl",kernelFunc:vGe},CGe=Lt({opSnippet:"return x * x;"}),kGe={kernelName:Fb,backendName:"webgl",kernelFunc:CGe},IY="return (a - b) * (a - b);",SGe=li({opSnippet:IY,packedOpSnippet:IY}),IGe={kernelName:ih,backendName:"webgl",kernelFunc:SGe},EGe={kernelName:Rb,backendName:"webgl",kernelFunc:function MGe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n;if("string"!==i.dtype)throw new Error("Input must be of datatype string");let a=t.readSync(i.dataId),s=I.fromUint8ToStringArray(a),o=qBe(s,"string",r);return t.makeTensorInfo(i.shape,"string",o)}},AGe={kernelName:mc,backendName:"webgl",kernelFunc:function DGe({inputs:e,attrs:n,backend:t}){let{x:r}=e,a=new Fo(r.shape,ks+`\n    return x > 0.0 ? 1.0 : float(${n.alpha});\n  `);return t.runWebGLProgram(a,[r],r.dtype)}},OGe={kernelName:Am,backendName:"webgl",kernelFunc:function NGe(e){let x,{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{begin:a,end:s,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=r,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:_,strides:v}=Tr.sliceInfo(i.shape,a,s,o,l,c,u,h,d);if(m)x=Ie({inputs:{x:i},backend:t,attrs:{shape:f}});else if(g||y){w.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let M=Tr.computeOutShape(b,_,v),D=wg({inputs:{x:i},backend:t,attrs:{begin:b,size:M}});x=Ie({inputs:{x:D},backend:t,attrs:{shape:f}}),t.disposeIntermediateTensorInfo(D)}else if(t.shouldExecuteOnCPU([i])){let M=t.readSync(i.dataId),D=wt(i.shape,i.dtype,M),N=KBe(p,D,v,b);x=t.makeTensorInfo(f,i.dtype,N.values)}else{let M=new class{constructor(e,n,t){this.variableNames=["x"],this.outputShape=t;let r=t.length,i=yn(t.length),a=yn(t.length),s="";if(1===r)s="coords * strides + begin";else{let o=0;s=t.map((l,c)=>(o++,1===t.length?`coords * strides[${c}] + begin[${c}]`:`coords[${o-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`\n      ${i} begin = ${i}(${e});\n      ${i} strides = ${i}(${n});\n\n      void main() {\n        ${a} coords = getOutputCoords();\n        setOutput(getX(${s}));\n      }\n    `}}(b,v,p);x=t.runWebGLProgram(M,[i],i.dtype)}let S=Ie({inputs:{x},backend:t,attrs:{shape:f}});return t.disposeIntermediateTensorInfo(x),S}},RGe={kernelName:Pb,backendName:"webgl",kernelFunc:function FGe(e){let{inputs:n,backend:t,attrs:r}=e,{separator:i,nGramWidths:a,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:h}=n,d=t.readSync(u.dataId),p=t.readSync(h.dataId),[f,m]=XBe(d,p,i,a,s,o,l,c);return[t.makeTensorInfo([f.length],"string",f),t.makeTensorInfo(h.shape,"int32",m)]}},LGe={kernelName:Lb,backendName:"webgl",kernelFunc:function PGe(e){let{inputs:n,backend:t,attrs:r}=e,{skipEmpty:i}=r,{input:a,delimiter:s}=n;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(0!==s.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let o=t.readSync(a.dataId),l=t.readSync(s.dataId)[0],[c,u,h]=YBe(o,l,i),d=u.length;return[t.makeTensorInfo([d,2],"int32",c),t.makeTensorInfo([d],"string",u),t.makeTensorInfo([2],"int32",new Int32Array(h))]}},BGe={kernelName:$b,backendName:"webgl",kernelFunc:function $Ge(e){let{inputs:n,backend:t,attrs:r}=e,{numBuckets:i}=r,{input:a}=n;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");let s=t.readSync(a.dataId),o=ZBe(s,i);return t.makeTensorInfo(a.shape,"int32",o)}},zGe=Lt({opSnippet:"return tan(x);"}),UGe={kernelName:sh,backendName:"webgl",kernelFunc:zGe},WGe=Lt({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),jGe={kernelName:oh,backendName:"webgl",kernelFunc:WGe},qGe={kernelName:wm,backendName:"webgl",kernelFunc:function GGe(e){let{inputs:n,backend:t}=e,{tensor:i,indices:a,updates:s}=n,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:h}=I.calculateShapes(s,a,i.shape),d=[h/c,c];if(0===h)return t.makeTensorInfo(i.shape,a.dtype);let p=Ie({inputs:{x:a},backend:t,attrs:{shape:[l,o]}}),f=Ie({inputs:{x:s},backend:t,attrs:{shape:[l,c]}}),m=Ie({inputs:{x:i},backend:t,attrs:{shape:d}}),g=new pF(l,o,p.shape.length,f.shape.length,u,d,!1,!0),y=t.runWebGLProgram(g,[f,p,m],m.dtype),b=Ie({inputs:{x:y},backend:t,attrs:{shape:i.shape}});return t.disposeIntermediateTensorInfo(p),t.disposeIntermediateTensorInfo(f),t.disposeIntermediateTensorInfo(m),t.disposeIntermediateTensorInfo(y),b}};function MY(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{reps:a}=r;if("string"===i.dtype||i.shape.length>5){let o=t.readSync(i.dataId),l="string"===i.dtype?o.map(h=>w.decodeString(h)):o,c=wt(i.shape,i.dtype,l),u=JBe(c,a);return t.makeTensorInfo(u.shape,u.dtype,u.values)}let s=new class{constructor(e,n){this.variableNames=["A"];let t=new Array(e.length);for(let a=0;a<t.length;a++)t[a]=e[a]*n[a];this.outputShape=t,this.rank=t.length;let r=yn(this.rank),i=function XGe(e){let n=e.length;if(n>5)throw Error(`Tile for rank ${n} is not yet supported`);if(1===n)return`imod(resRC, ${e[0]})`;let t=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<e.length;i++)r.push(`imod(${t[i]}, ${e[i]})`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}(i.shape,a);return t.runWebGLProgram(s,[i],i.dtype)}var YGe={kernelName:fc,backendName:"webgl",kernelFunc:MY},QGe=class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}};function Zh(e,n){null!==n&&e.disposeIntermediateTensorInfo(n)}function EY(e){let n=1;for(;n<e;)n*=2;return n}var zt,Z_,DY,e7e={kernelName:Tm,backendName:"webgl",kernelFunc:function JGe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{k:a,sorted:s}=r,o=Q().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Q().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,u=c[c.length-1];if(t.shouldExecuteOnCPU([i])||u<o||a>l){let N=t.readSync(i.dataId),[F,O]=eVe(N,c,i.dtype,a,s);return[t.makeTensorInfo(F.shape,F.dtype,F.values),t.makeTensorInfo(O.shape,O.dtype,O.values)]}if(0===a)return c[c.length-1]=0,[t.makeTensorInfo(c,i.dtype,[]),t.makeTensorInfo(c,"int32",[])];if(1===u)return[i,Y_({attrs:{shape:c,dtype:"int32",value:0},backend:t})];let h=t.texData.get(i.dataId),d=null!==h&&h.isPacked,p=d?t.unpackTensor(i):i,f=w.sizeFromShape(c)/u,m=Ie({inputs:{x:p},attrs:{shape:[f,u]},backend:t});d&&Zh(t,p);let g=EY(a),y=EY(u),b=null,_=()=>null===b?[m,m]:[m,b],v=(N,F,O)=>{let k=_(),P=new class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}(O),Z=b;b=t.runWebGLProgram(P,k,"int32",[[u],[null===b?1:0],[Number.NEGATIVE_INFINITY],[N],[F]]),Zh(t,Z)};for(let N=1;N<g;N*=2){let F=2*N;for(let O=N;O>=1;O/=2)v(F,O,[f,y])}for(let N=y;N>g;N/=2){let F=_(),O=new QGe([f,N/2]),P=b;b=t.runWebGLProgram(O,F,"int32",[[u],[null===b?1:0],[g]]),Zh(t,P);let j=g/2,Z=2*j;for(let z=j;z>=1;z/=2)v(Z,z,b.shape)}let x=b;b=wg({inputs:{x:b},backend:t,attrs:{begin:0,size:[f,a]}}),Zh(t,x);let S=gY({inputs:{x:m,indices:b},backend:t,attrs:{axis:1,batchDims:1}});Zh(t,m);let M=c.slice(0,-1);M.push(a),x=b,b=Ie({inputs:{x:b},attrs:{shape:M},backend:t}),Zh(t,x);let D=S;return S=Ie({inputs:{x:S},attrs:{shape:M},backend:t}),Zh(t,D),[S,b]}},r7e={kernelName:Nm,backendName:"webgl",kernelFunc:function n7e(e){let{inputs:n,backend:t,attrs:r}=e,{image:i,transforms:a}=n,{interpolation:s,fillMode:o,fillValue:l,outputShape:c}=r,[u,h,d,p]=i.shape,[f,m]=c??[h,d],g=[u,f,m,p],y=new class{constructor(e,n,t,r,i,a){this.variableNames=["Image","Transforms"],this.outputShape=a;let o,s="nearest"===t?1:2;switch(r){case"constant":default:o=1;break;case"reflect":o=2;break;case"wrap":o=3;break;case"nearest":o=4}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${o} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${o} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${o} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${i});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${i});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${n}));\n                float mapY = mapCoord(inY, float(${e}));\n\n                if (${s} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}(h,d,s,o,l,g);return t.runWebGLProgram(y,[i,a],"float32")}},a7e={kernelName:Bb,backendName:"webgl",kernelFunc:function i7e(e){let{inputs:n,attrs:t,backend:r}=e,{axis:i}=t,{x:a}=n;mg(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let s=r.readSync(a.dataId),{outputValues:o,outputShape:l,indices:c}=tVe(s,i,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}},o7e={kernelName:Om,backendName:"webgl",kernelFunc:function s7e(e){let{inputs:n,backend:t,attrs:r}=e,{value:i}=n,{axis:a}=r;a<0&&(a+=i.shape.length);let s=i,o=s.shape.length,l=i.shape[a],c=new Array(o-1),u=0;for(let m=0;m<o;m++)m!==a&&(c[u++]=s.shape[m]);let h=[],d=new Array(o).fill(0),p=s.shape.slice();p[a]=1;let f=new Array(l);for(let m=0;m<f.length;m++){d[a]=m;let g=wg({inputs:{x:s},backend:t,attrs:{begin:d,size:p}}),y=Ie({inputs:{x:g},backend:t,attrs:{shape:c}});f[m]=y,h.push(g)}return h.forEach(m=>t.disposeIntermediateTensorInfo(m)),f}},u7e={kernelName:Vb,backendName:"webgl",kernelFunc:function c7e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,segmentIds:a}=n,{numSegments:s}=r,o=i.shape.length,l=[],c=0,u=I.getAxesPermutation([c],o),h=i;null!=u&&(h=$i({inputs:{x:i},backend:t,attrs:{perm:u}}),l.push(h),c=I.getInnerMostAxes(1,o)[0]);let d=I.segment_util.computeOutShape(h.shape,c,s),p=w.sizeFromShape([h.shape[c]]),f=Ie({inputs:{x:h},backend:t,attrs:{shape:[-1,p]}});l.push(f);let m=Aw(i.dtype),g=(v,x,S,M,D)=>{let N=v.shape[0],F=v.shape[1],O=I.segment_util.segOpComputeOptimalWindowSize(F,D),k={windowSize:O,inSize:F,batchSize:N,numSegments:D},P=new class{constructor(e,n){this.variableNames=["x","segmentIds"];let t=e.windowSize,r=e.batchSize,i=e.inSize,a=e.numSegments,s=a*Math.ceil(i/t);this.outputShape=[r,s];let c=4*Math.floor(t/4),u=t%4,h="\n        sumValue += dot(values, segFilter);\n    ",d="";i%t>0&&(d=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `);let p="";i%t>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${d}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${p}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${a})) * float(${t}));\n        int currentSeg = int(mod(float(outIdx), float(${a})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${c}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${c};\n        if (${1===u}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${h}\n        } else if (${2===u}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${h}\n        } else if (${3===u}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${h}\n        }\n        setOutput(sumValue);\n      }\n    `}}(k,x),j=t.compileAndRun(P,[v,S],M);if(l.push(j),j.shape[1]===D)return j;let Z=kY({backend:t,attrs:{start:0,stop:D,step:1,dtype:"float32"}}),z=MY({inputs:{x:Z},backend:t,attrs:{reps:[F/O]}});return l.push(Z),l.push(z),g(j,x,z,M,D)},b=Ie({inputs:{x:g(f,"unsortedSegmentSum",a,m,s)},backend:t,attrs:{shape:d}}),_=b;if(null!=u){l.push(b);let v=I.getUndoAxesPermutation(u);_=$i({inputs:{x:_},backend:t,attrs:{perm:v}})}return l.forEach(v=>t.disposeIntermediateTensorInfo(v)),_}},d7e=[KVe,YVe,JVe,nze,ize,oze,cze,dze,mze,yze,vze,Cze,Ize,Aze,Oze,Rze,Lze,zze,Hze,jze,Xze,n6e,i6e,l6e,u6e,g6e,b6e,w6e,TVe,S6e,A6e,F6e,V6e,H6e,j6e,q6e,X6e,J6e,nUe,aUe,oUe,cUe,dUe,fUe,gUe,vUe,wUe,SUe,EUe,AUe,FUe,$Ue,UUe,jUe,KUe,XUe,ZUe,JUe,tHe,rHe,aHe,cHe,hHe,mHe,yHe,vHe,CHe,MHe,THe,AVe,OHe,E6e,PHe,BHe,UHe,OVe,GHe,YHe,QHe,nWe,aWe,cWe,hWe,gWe,vWe,CWe,SWe,DWe,TWe,OWe,LWe,BWe,zWe,HWe,jWe,XWe,JWe,r8e,d8e,PVe,m8e,b8e,x8e,k8e,h6e,M8e,D8e,T8e,F8e,$8e,RVe,V8e,U8e,W8e,G8e,q8e,p6e,o8e,Y8e,eje,ije,$Ve,lje,dje,mje,bje,wje,kje,Mje,Aje,Oje,Pje,Bje,Uje,Gje,Xje,Jje,nGe,e6e,c8e,aGe,oGe,cGe,dGe,pGe,mGe,yGe,_Ge,xGe,kGe,IGe,EGe,AGe,OGe,RGe,LGe,BGe,l8e,jVe,UGe,jGe,qGe,YGe,e7e,r7e,GVe,a7e,o7e,u7e,E8e];for(let e of d7e)Hb(e);!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(zt||(zt={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(Z_||(Z_={}));var f7e={kernelName:lh,backendName:"wasm",setupFunc:function h7e(e){DY=e.wasm.cwrap(lh,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function p7e(e){let{inputs:n,backend:t,attrs:r}=e,{a:i,b:a,bias:s,preluActivationWeights:o}=n;if("float32"!==i.dtype||"float32"!==a.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");let{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:h}=r,d=t.dataIdMap.get(i.dataId).id,p=t.dataIdMap.get(a.dataId).id,f=0;if(null!=s){let D=t.dataIdMap.get(s.dataId);if(1!==D.shape.length)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${D.shape.length}.`);f=D.id}let m=null==o?0:t.dataIdMap.get(o.dataId).id,g=Z_[u];if(null==g)throw new Error(`${u} activation not yet supported for FusedConv2D in the wasm backend.`);let y=l?i.shape[2]:i.shape[1],b=c?a.shape[1]:a.shape[2],_=zm.assertAndGetBroadcastShape(i.shape.slice(0,-2),a.shape.slice(0,-2)),v=t.makeOutput([..._,y,b],i.dtype),x=t.dataIdMap.get(v.dataId).id,S=new Uint8Array(new Int32Array(i.shape).buffer),M=new Uint8Array(new Int32Array(a.shape).buffer);return DY(d,S,i.shape.length,p,M,a.shape.length,l,c,g,f,m,h||0,x),v}};function Pt(e,n){let t;return{kernelName:e,backendName:"wasm",setupFunc:function r(a){t=a.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function i(a){let{backend:s,inputs:{x:o}}=a,l=s.dataIdMap.get(o.dataId).id,c=s.makeOutput(o.shape,n||o.dtype),u=s.dataIdMap.get(c.dataId).id;return 0===w.sizeFromShape(c.shape)||t(l,zt[o.dtype],u),c}}}var m7e=Pt(Nf),g7e=Pt(Wu),y7e=Pt(ju);function wr(e,n,t){let r;return{kernelName:e,backendName:"wasm",setupFunc:function i(s){r=s.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function a(s){let{backend:o,inputs:l}=s,{a:c,b:u}=l,h=o.dataIdMap.get(c.dataId).id,d=o.dataIdMap.get(u.dataId).id,p=t??c.dtype,f=I.assertAndGetBroadcastShape(c.shape,u.shape),m=o.makeOutput(f,p);if(0===w.sizeFromShape(f))return m;let g=new Uint8Array(new Int32Array(c.shape).buffer),y=new Uint8Array(new Int32Array(u.shape).buffer),b=o.dataIdMap.get(m.dataId).id;return r(h,g,c.shape.length,d,y,u.shape.length,zt[c.dtype],b),m}}}var AY,_7e=wr(hc),w7e={kernelName:Gu,backendName:"wasm",setupFunc:function v7e(e){AY=e.wasm.cwrap(Gu,null,["array","number","number","number"])},kernelFunc:function x7e(e){let{inputs:n,backend:t}=e,r=t.makeOutput(n[0].shape,n[0].dtype);if(0===w.sizeFromShape(r.shape))return r;let i=n.map(o=>t.dataIdMap.get(o.dataId).id),a=new Uint8Array(new Int32Array(i).buffer),s=t.dataIdMap.get(r.dataId).id;return AY(a,i.length,zt[r.dtype],s),r}};function EC(e){let{inputs:{x:n},backend:t}=e;if("string"===n.dtype)return Ti(t.readSync(n.dataId),n.shape,n.dtype);let r=t.makeOutput(n.shape,n.dtype),i=t.typedArrayFromHeap(n);return t.typedArrayFromHeap(r).set(i),r}var TY,C7e={kernelName:_d,backendName:"wasm",kernelFunc:EC};function Wc(e){let{inputs:n,backend:t,attrs:r}=e,[i,a]=function I7e(e,n){let t=[],r=[];for(let i=0;i<e.length;++i)1!==e[i]&&t.push(e[i]),1!==e[n[i]]&&r.push(n[i]);for(let i=0;i<r.length;++i){let a=-1;for(let s=0;s<r.length;++s)r[s]>=i&&(-1===a||r[a]>r[s])&&(a=s);r[a]=i}return[t,r]}(n.x.shape,r.perm),s=!0;for(let f=0;f<a.length;f++)a[f]!==f&&(s=!1);let o=function S7e(e,n){let t=new Array(e.length);for(let r=0;r<t.length;r++)t[r]=e[n[r]];return t}(n.x.shape,r.perm),l={dataId:n.x.dataId,shape:i,dtype:n.x.dtype};if(s){let f=EC({inputs:n,backend:t});return f.shape=o,f}let c=t.makeOutput(o,l.dtype),u=t.dataIdMap.get(l.dataId).id,h=t.dataIdMap.get(c.dataId).id,d=new Uint8Array(new Int32Array(a).buffer),p=new Uint8Array(new Int32Array(l.shape).buffer);return TY(u,p,l.shape.length,zt[l.dtype],h,d,a.length),c}var NY,M7e={kernelName:hl,backendName:"wasm",kernelFunc:Wc,setupFunc:function k7e(e){TY=e.wasm.cwrap(hl,null,["number","array","number","number","number","array","number"])}};function jc(e,n,t){let r=e.shape,i=e.shape.length,a=w.parseAxisParam(n,r),s=a,o=I.getAxesPermutation(s,i),l=null,c=!1;if(null!=o){let u=new Array(i);for(let d=0;d<u.length;d++)u[d]=r[o[d]];s=I.getInnerMostAxes(s.length,i),l=Wc({inputs:{x:e},attrs:{perm:o},backend:t});let h=t.dataIdMap.get(e.dataId).id;t.dataIdMap.get(l.dataId).id!==h&&(c=!0)}return{transposed:l,originalAxes:a,axes:s,inputWasTransposed:c}}var OY,A7e={kernelName:Of,backendName:"wasm",setupFunc:function E7e(e){NY=e.wasm.cwrap(Of,null,["number, number, number"])},kernelFunc:function D7e(e){let{backend:n,inputs:t,attrs:r}=e,{axis:i,keepDims:a}=r,{x:s}=t,o=n.dataIdMap.get(s.dataId).id,l=s,{transposed:c,axes:u,originalAxes:h,inputWasTransposed:d}=jc(s,i,n);d&&(l=c,o=n.dataIdMap.get(c.dataId).id),I.assertAxesAreInnerMostDims("all",u,l.shape.length);let[f,m]=I.computeOutAndReduceShapes(l.shape,u),g=w.sizeFromShape(m),y=n.makeOutput(f,s.dtype);if(0!==w.sizeFromShape(l.shape)){let b=n.dataIdMap.get(y.dataId).id;NY(o,g,b)}if(d&&n.disposeData(c.dataId),a){let b=I.expandShapeToKeepDim(y.shape,h);y.shape=b}return y}},O7e={kernelName:Ff,backendName:"wasm",setupFunc:function T7e(e){OY=e.wasm.cwrap(Ff,null,["number, number, number"])},kernelFunc:function N7e(e){let{backend:n,inputs:t,attrs:r}=e,{axis:i,keepDims:a}=r,{x:s}=t,o=n.dataIdMap.get(s.dataId).id,l=s,{transposed:c,axes:u,originalAxes:h,inputWasTransposed:d}=jc(s,i,n);d&&(l=c,o=n.dataIdMap.get(c.dataId).id),I.assertAxesAreInnerMostDims("any",u,l.shape.length);let[f,m]=I.computeOutAndReduceShapes(l.shape,u),g=w.sizeFromShape(m),y=n.makeOutput(f,s.dtype);if(0!==w.sizeFromShape(l.shape)){let b=n.dataIdMap.get(y.dataId).id;OY(o,g,b)}if(d&&n.disposeData(c.dataId),a){let b=I.expandShapeToKeepDim(y.shape,h);y.shape=b}return y}};function FY(e){let n;return{kernelName:e,backendName:"wasm",setupFunc:function t(i){n=i.wasm.cwrap(e,null,["number","number","number","number","number"])},kernelFunc:function r(i){let{backend:a,inputs:s,attrs:o}=i,{axis:l}=o,{x:c}=s,u=a.dataIdMap.get(c.dataId).id,h=u,d=c,{transposed:p,axes:f,inputWasTransposed:m}=jc(c,l,a);if(m){let x=a.dataIdMap.get(p.dataId).id;x!==u&&(d=p,h=x)}let g=d.shape.slice(0,-1),y=a.makeOutput(g,"int32"),b=a.dataIdMap.get(y.dataId).id,_=w.sizeFromShape(y.shape);return n(h,zt[d.dtype],_,d.shape[f[0]],b),m&&a.disposeData(p.dataId),y}}}var RY,PY,LY,$Y,F7e=FY(Rf),R7e=FY(Pf),P7e=Pt(qu),L7e=Pt(Ku),$7e=Pt(Xu),B7e=wr(Zu),V7e=Pt(Yu),H7e={kernelName:Qu,backendName:"wasm",setupFunc:function z7e(e){RY=e.wasm.cwrap(Qu,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function U7e(e){let{inputs:n,attrs:t,backend:r}=e,i=n.x,a=r.dataIdMap.get(i.dataId).id,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=t,u=I.computePool2DInfo(i.shape,s,o,1,l,c),h=u.filterHeight,d=u.filterWidth,p=u.padInfo.top,f=u.padInfo.right,m=u.padInfo.bottom,g=u.padInfo.left,y=u.strideHeight,b=u.strideWidth,_=u.inChannels;if("channelsLast"!==u.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${u.dataFormat}'. Please use 'channelsLast'.`);if(1!==u.dilationWidth||1!==u.dilationHeight)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${u.dilationHeight}, ${u.dilationWidth}].`);let v=r.makeOutput(u.outShape,"float32"),x=r.dataIdMap.get(v.dataId).id;return RY(a,i.shape[0],i.shape[1],i.shape[2],h,d,p,f,m,g,y,b,_,x),v}},G7e={kernelName:Lf,backendName:"wasm",setupFunc:function W7e(e){PY=e.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function j7e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{filterSize:a,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r,u=I.computePool3DInfo(i.shape,a,s,1,o,l,c),h=t.makeOutput(u.outShape,i.dtype);return PY(t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(h.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),h}},X7e={kernelName:xb,backendName:"wasm",setupFunc:function q7e(e){LY=e.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function K7e(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,input:a}=n,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r,u=I.computePool3DInfo(a.shape,s,o,1,l,c),h=t.makeOutput(a.shape,a.dtype);return LY(t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(h.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left,u.filterDepth,u.filterHeight,u.filterWidth),h}},Q7e={kernelName:vb,backendName:"wasm",setupFunc:function Y7e(e){$Y=e.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function Z7e(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,input:a}=n,{filterSize:s,strides:o,pad:l}=r,c=I.computePool2DInfo(a.shape,s,o,1,l),u=t.makeOutput(a.shape,a.dtype);return $Y(t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(u.dataId).id,c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.top,c.padInfo.left,c.filterHeight,c.filterWidth),u}};function ta(e){let{inputs:n,attrs:t}=e,{x:r}=n,{shape:i}=t,a=w.sizeFromShape(r.shape),s=w.inferFromImplicitShape(i,a);return w.assert(a===w.sizeFromShape(s),()=>`new shape: ${s}, old shape: ${r.shape}. New shape and old shape must have the same number of elements.`),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:s,dtype:r.dtype}}var BY,J7e={kernelName:bm,backendName:"wasm",kernelFunc:ta},n9e={kernelName:Ju,backendName:"wasm",setupFunc:function e9e(e){BY=e.wasm.cwrap(Ju,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function t9e(e){let{inputs:n,backend:t,attrs:r}=e,{a:i,b:a}=n,{transposeA:s,transposeB:o}=r;if("float32"!==i.dtype||"float32"!==a.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");let l=i.shape.length,c=a.shape.length,u=s?i.shape[l-2]:i.shape[l-1],h=o?a.shape[c-1]:a.shape[c-2],d=s?i.shape[l-1]:i.shape[l-2],p=o?a.shape[c-2]:a.shape[c-1],f=i.shape.slice(0,-2),m=a.shape.slice(0,-2),g=w.sizeFromShape(f),y=w.sizeFromShape(m),b=zm.assertAndGetBroadcastShape(i.shape.slice(0,-2),a.shape.slice(0,-2)).concat([d,p]);w.assert(u===h,()=>`Error in matMul: inner shapes (${u}) and (${h}) of Tensors with shapes ${i.shape} and ${a.shape} and transposeA=${s} and transposeB=${o} must match.`);let v=o?[y,p,h]:[y,h,p],x=ta({inputs:{x:i},backend:t,attrs:{shape:s?[g,u,d]:[g,d,u]}}),S=ta({inputs:{x:a},backend:t,attrs:{shape:v}}),M=t.dataIdMap.get(x.dataId).id,D=t.dataIdMap.get(S.dataId).id,N=s?x.shape[2]:x.shape[1],F=o?S.shape[1]:S.shape[2],O=Math.max(g,y),k=t.makeOutput([O,N,F],x.dtype),P=t.dataIdMap.get(k.dataId).id,j=new Uint8Array(new Int32Array(x.shape).buffer),Z=new Uint8Array(new Int32Array(S.shape).buffer);return BY(M,j,x.shape.length,D,Z,S.shape.length,s,o,P),t.disposeData(x.dataId),t.disposeData(S.dataId),k.shape=b,k}};function Qh(e){let{inputs:{x:n},attrs:{begin:t,size:r},backend:i}=e,[a,s]=Tr.parseSliceParams(n,t,r),o=Tr.isSliceContinous(n.shape,a,s),l=i.readSync(n.dataId),c=i.makeOutput(s,n.dtype),u=w.computeStrides(n.shape),h=i.dataIdMap.get(c.dataId);if(o){let f=Tr.computeFlatOffset(a,u);return"string"===n.dtype?h.stringBytes=l.slice(f,f+w.sizeFromShape(s)):i.typedArrayFromHeap(c).set(l.subarray(f,f+w.sizeFromShape(s))),c}if("string"===n.dtype){let f=oC(l,a,s,n.shape,n.dtype);return h.stringBytes=f,c}let d=i.typedArrayFromHeap(c),p=n.shape.length;if(2===p)!function r9e(e,n,t,r,i){let a=0,s=r[0],o=r[1],l=s+i[0];for(let c=s;c<l;c++){let u=c*n+o;t.set(e.subarray(u,u+i[1]),a),a+=i[1]}}(l,u[0],d,a,s);else if(3===p)!function i9e(e,n,t,r,i,a){let s=0,o=i[0],l=i[1],c=i[2],u=o+a[0],h=l+a[1];for(let d=o;d<u;d++)for(let p=l;p<h;p++){let f=d*n+p*t+c;r.set(e.subarray(f,f+a[2]),s),s+=a[2]}}(l,u[0],u[1],d,a,s);else if(4===p)!function a9e(e,n,t,r,i,a,s){let o=0,l=a[0],c=a[1],u=a[2],h=l+s[0],d=c+s[1],p=u+s[2],f=a[3];for(let m=l;m<h;m++)for(let g=c;g<d;g++)for(let y=u;y<p;y++){let b=m*n+g*t+y*r+f;i.set(e.subarray(b,b+s[3]),o),o+=s[3]}}(l,u[0],u[1],u[2],d,a,s);else{let f=oC(l,a,s,n.shape,n.dtype);d.set(f)}return c}var VY,s9e={kernelName:Sm,backendName:"wasm",kernelFunc:Qh},l9e={kernelName:$f,backendName:"wasm",kernelFunc:function o9e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{blockShape:a,crops:s}=r,o=a.reduce((y,b)=>y*b),l=I.getReshaped(i.shape,a,o),c=I.getPermuted(l.length,a.length),u=I.getReshapedPermuted(i.shape,a,o),h=I.getSliceBeginCoords(s,a.length),d=I.getSliceSize(u,s,a.length),p=ta({inputs:{x:i},backend:t,attrs:{shape:l}}),f=Wc({inputs:{x:p},backend:t,attrs:{perm:c}}),m=ta({inputs:{x:f},backend:t,attrs:{shape:u}}),g=Qh({inputs:{x:m},backend:t,attrs:{begin:h,size:d}});return t.disposeData(p.dataId),t.disposeData(f.dataId),t.disposeData(m.dataId),g}},d9e={kernelName:Bf,backendName:"wasm",setupFunc:function c9e(e){VY=e.wasm.cwrap(Bf,null,["number","number","boolean","number","number","number"])},kernelFunc:function u9e(e){let{backend:n,inputs:t,attrs:r}=e,{x:i,weights:a}=t,{size:s}=r,o=0!==a.shape.reduce((h,d)=>h*d,1),c=n.makeOutput(1===i.shape.length?[s]:[i.shape[0],s],a.dtype);function u(h){return n.dataIdMap.get(h.dataId).id}return VY(u(i),s,o,u(a),zt[a.dtype],u(c)),c}},p9e=wr(Vf),m9e={kernelName:wb,backendName:"wasm",kernelFunc:function f9e(e){let{inputs:n,backend:t}=e,{s0:r,s1:i}=n,a=t.typedArrayFromHeap(r),s=t.typedArrayFromHeap(i),o=I.assertAndGetBroadcastShape(Array.from(a),Array.from(s));return t.makeOutput([o.length],"int32",void 0,new Int32Array(o))}};function Gc(e){let{inputs:{x:n},attrs:{dtype:t},backend:r}=e,i=r.makeOutput(n.shape,t),a=r.typedArrayFromHeap(n);return r.typedArrayFromHeap(i).set(a),i}var zY,g9e={kernelName:ed,backendName:"wasm",kernelFunc:Gc},y9e=Pt(td),v9e={kernelName:pc,backendName:"wasm",setupFunc:function b9e(e){zY=e.wasm.cwrap(pc,null,["number","number","number","number"])},kernelFunc:function _9e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{clipValueMin:a,clipValueMax:s}=r,o=t.dataIdMap.get(i.dataId).id,l=t.makeOutput(i.shape,i.dtype),c=t.dataIdMap.get(l.dataId).id;return zY(o,a,s,c),l}};function UY(e){let{inputs:n,backend:t}=e,r=w.parseAxisParam(e.attrs.axis,n[0].shape)[0],i=n.map(p=>p.shape);I.assertParamsConsistent(i,r);let a=I.computeOutShape(n.map(p=>p.shape),r),s=n.filter(p=>w.sizeFromShape(p.shape)>0);if(1===s.length)return EC({inputs:{x:s[0]},backend:t});let o=t.makeOutput(a,n[0].dtype);if(0===w.sizeFromShape(a))return o;if("string"===s[0].dtype){let p=s.map(_=>{let v=[-1,w.sizeFromShape(_.shape.slice(r))];return ta({inputs:{x:_},backend:t,attrs:{shape:v}})}),f=p.map(_=>({vals:t.readSync(_.dataId),shape:_.shape}));a=I.computeOutShape(p.map(_=>_.shape),1);let g=EO(f,a,n[0].dtype,1===p[0].shape[0]),y=I.computeOutShape(s.map(_=>_.shape),r);return o.shape=y,t.dataIdMap.get(o.dataId).stringBytes=I.fromStringArrayToUint8(g),p.forEach(_=>t.disposeData(_.dataId)),o}let l=w.sizeFromShape(s[0].shape.slice(0,r)),c=0,u=s.map(p=>{let f=w.sizeFromShape(p.shape.slice(r));return c+=f,f}),h=s.map(p=>t.typedArrayFromHeap(p)),d=t.typedArrayFromHeap(o);for(let p=0;p<l;p++){let f=p*c;for(let m=0;m<h.length;m++){let g=u[m],y=p*g,b=h[m].subarray(y,y+g);d.set(b,f),f+=g}}return o}var HY,WY,jY,GY,qY,fF,KY,x9e={kernelName:zf,backendName:"wasm",kernelFunc:UY},k9e={kernelName:nd,backendName:"wasm",setupFunc:function w9e(e){HY=e.wasm.cwrap(nd,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function C9e(e){let{inputs:n,attrs:t,backend:r}=e,{x:i,filter:a}=n,s=r.dataIdMap.get(i.dataId).id,o=r.dataIdMap.get(a.dataId).id,{strides:l,dilations:c,pad:u,dimRoundingMode:h,dataFormat:d}=t,p=I.convertConv2DDataFormat(d),f=I.computeConv2DInfo(i.shape,a.shape,l,c,u,h,!1,p),m=f.filterHeight,g=f.filterWidth,y=f.padInfo.top,b=f.padInfo.right,_=f.padInfo.bottom,v=f.padInfo.left,x=f.dilationHeight,S=f.dilationWidth,M=f.strideHeight,D=f.strideWidth,N=f.inChannels,F=f.outChannels,O="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw new Error(`wasm backend Conv2D does not support dataFormat:'${f.dataFormat}'. Please use 'channelsLast'.`);let k=r.makeOutput(f.outShape,"float32"),P=r.dataIdMap.get(k.dataId).id;return HY(s,i.shape[0],i.shape[1],i.shape[2],o,m,g,y,b,_,v,O,x,S,M,D,N,F,P),k}},M9e={kernelName:rd,backendName:"wasm",setupFunc:function S9e(e){WY=e.wasm.cwrap(rd,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function I9e(e){let{backend:n,inputs:t,attrs:r}=e,{dy:i,filter:a}=t,{strides:s,pad:o,dataFormat:l,dimRoundingMode:c,inputShape:u}=r,d=I.convertConv2DDataFormat(l),p=I.computeConv2DInfo(u,a.shape,s,1,o,c,!1,d),{batchSize:f,filterHeight:m,filterWidth:g,inChannels:y,inHeight:b,inWidth:_,outChannels:v,outHeight:x,outWidth:S,strideHeight:M,strideWidth:D}=p,N=m-1-p.padInfo.top,F=g-1-p.padInfo.left,O="channelsLast"===p.dataFormat,k=w.computeStrides(p.inShape),P=w.computeStrides(i.shape),[j,Z,z]=w.computeStrides(a.shape),W=k[0],q=O?k[1]:k[2],J=O?k[2]:1,te=O?1:k[1],ie=P[0],pe=O?P[1]:P[2],le=O?P[2]:1,he=O?1:P[1],_e=n.makeOutput(p.inShape,"float32"),Be=n.dataIdMap.get(_e.dataId).id,be=n.dataIdMap.get(i.dataId).id,Ne=n.dataIdMap.get(a.dataId).id;return WY(be,Ne,f,m,g,b,_,y,x,S,v,M,D,N,F,j,Z,z,W,q,J,te,ie,pe,le,he,Be),_e}},A9e={kernelName:id,backendName:"wasm",setupFunc:function E9e(e){jY=e.wasm.cwrap(id,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function D9e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,filter:a}=n,{strides:s,pad:o,dilations:l}=r;if("float32"!==i.dtype)throw new Error(`Tensor x must have dtype float32, got ${i.dtype}`);if("float32"!==a.dtype)throw new Error(`Tensor filter must have dtype float32, got ${a.dtype}`);let c=I.computeConv3DInfo(i.shape,a.shape,s,l,o),u=t.makeOutput(c.outShape,i.dtype);return jY(t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(u.dataId).id,c.batchSize,c.inDepth,c.inHeight,c.inWidth,c.inChannels,c.outDepth,c.outHeight,c.outWidth,c.outChannels,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.filterDepth,c.filterHeight,c.filterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),u}},O9e={kernelName:Uf,backendName:"wasm",setupFunc:function T9e(e){GY=e.wasm.cwrap(Uf,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function N9e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,dy:a}=n,{strides:s,pad:o,filterShape:l}=r;if("float32"!==i.dtype)throw new Error(`Tensor dy must have dtype float32, got ${i.dtype}`);if("float32"!==a.dtype)throw new Error(`Tensor filter must have dtype float32, got ${a.dtype}`);let c=I.computeConv3DInfo(i.shape,l,s,1,o),u=t.makeOutput(c.filterShape,a.dtype);return GY(t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(u.dataId).id,c.batchSize,c.inDepth,c.inHeight,c.inWidth,c.inChannels,c.outDepth,c.outHeight,c.outWidth,c.outChannels,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.filterDepth,c.filterHeight,c.filterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),u}},P9e={kernelName:Hf,backendName:"wasm",setupFunc:function F9e(e){qY=e.wasm.cwrap(Hf,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function R9e(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,filter:a}=n,{pad:s,strides:o,inputShape:l}=r;if("float32"!==i.dtype)throw new Error(`Tensor dy must have dtype float32, got ${i.dtype}`);if("float32"!==a.dtype)throw new Error(`Tensor filter must have dtype float32, got ${a.dtype}`);let c=I.computeConv3DInfo(l,a.shape,o,1,s),u=t.makeOutput(c.inShape,i.dtype);return qY(t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(u.dataId).id,c.batchSize,c.inDepth,c.inHeight,c.inWidth,c.inChannels,c.outDepth,c.outHeight,c.outWidth,c.outChannels,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.filterDepth,c.filterHeight,c.filterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),u}},L9e=Pt(ad),$9e=Pt(sd);!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(fF||(fF={}));var XY,YY,ZY,QY,JY,eZ,tZ,nZ,rZ,iZ,z9e={kernelName:jf,backendName:"wasm",setupFunc:function B9e(e){KY=e.wasm.cwrap(jf,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function V9e(e){let m,{backend:n,inputs:t,attrs:r}=e,{method:i,extrapolationValue:a,cropSize:s}=r,{image:o,boxes:l,boxInd:c}=t,u=l.shape[0],[h,d]=s,p=[u,h,d,o.shape[3]],f=n.dataIdMap.get(o.dataId);"float32"!==o.dtype&&(m=Gc({backend:n,inputs:{x:o},attrs:{dtype:"float32"}}),f=n.dataIdMap.get(m.dataId));let g=f.id,y=n.dataIdMap.get(l.dataId).id,b=n.dataIdMap.get(c.dataId).id,_=n.makeOutput(p,"float32"),v=n.dataIdMap.get(_.dataId).id,x=new Uint8Array(new Int32Array(o.shape).buffer);return KY(g,y,b,u,x,h,d,fF[i],a,v),null!=m&&n.disposeData(m.dataId),_}},W9e={kernelName:Wf,backendName:"wasm",setupFunc:function U9e(e){XY=e.wasm.cwrap(Wf,null,["number","number","number","number","number","number"])},kernelFunc:function H9e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,exclusive:s,reverse:o}=r,l=i.shape.length;w.assert("float32"===i.dtype||"int32"===i.dtype,()=>`cumprod does not support ${i.dtype} tensors in the WASM backend`);let c=I.getAxesPermutation([a],l),u=i;null!==c&&(u=Wc({inputs:{x:i},attrs:{perm:c},backend:t}));let h=I.getInnerMostAxes(1,l)[0];I.assertAxesAreInnerMostDims("cumprod",[h],l);let d=t.makeOutput(u.shape,u.dtype),p=u.shape[h],f=t.dataIdMap.get(u.dataId).id,m=t.dataIdMap.get(d.dataId).id;XY(f,s?1:0,o?1:0,p,m,zt[i.dtype]);let g=d;return null!==c&&(g=Wc({inputs:{x:d},attrs:{perm:I.getUndoAxesPermutation(c)},backend:t}),t.disposeData(u.dataId),t.disposeData(d.dataId)),g}},q9e={kernelName:od,backendName:"wasm",setupFunc:function j9e(e){YY=e.wasm.cwrap(od,null,["number","number","number","number","number","number"])},kernelFunc:function G9e(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{axis:a,exclusive:s,reverse:o}=r,l=i.shape.length;w.assert("float32"===i.dtype||"int32"===i.dtype,()=>`cumsum does not support ${i.dtype} tensors in the WASM backend`);let c=I.getAxesPermutation([a],l),u=i;null!==c&&(u=Wc({inputs:{x:i},attrs:{perm:c},backend:t}));let h=I.getInnerMostAxes(1,l)[0];I.assertAxesAreInnerMostDims("cumsum",[h],l);let d=t.makeOutput(u.shape,u.dtype),p=u.shape[h],f=t.dataIdMap.get(u.dataId).id,m=t.dataIdMap.get(d.dataId).id;YY(f,s?1:0,o?1:0,p,m,zt[i.dtype]);let g=d;return null!==c&&(g=Wc({inputs:{x:d},attrs:{perm:I.getUndoAxesPermutation(c)},backend:t}),t.disposeData(u.dataId),t.disposeData(d.dataId)),g}},Y9e={kernelName:kb,backendName:"wasm",setupFunc:function K9e(e){ZY=e.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])},kernelFunc:function X9e(e){let{backend:n,inputs:t,attrs:r}=e,{x:i,weights:a}=t,{size:s,binaryOutput:o}=r,l=0!==a.shape.reduce((d,p)=>d*p,1),u=n.makeOutput(1===i.shape.length?[s]:[i.shape[0],s],a.dtype);function h(d){return n.dataIdMap.get(d.dataId).id}return ZY(h(i),new Uint8Array(new Int32Array(i.shape).buffer),i.shape.length,s,l,h(a),zt[a.dtype],o,h(u)),u}},J9e={kernelName:Gf,backendName:"wasm",setupFunc:function Z9e(e){QY=e.wasm.cwrap(Gf,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function Q9e(e){let{backend:n,inputs:t,attrs:r}=e,{x:i}=t,{blockSize:a,dataFormat:s}=r,o=i.shape[0],h=("NHWC"===s?i.shape[1]:i.shape[2])*a,d=("NHWC"===s?i.shape[2]:i.shape[3])*a,p=("NHWC"===s?i.shape[3]:i.shape[1])/(a*a),f="NHWC"===s?[o,h,d,p]:[o,p,h,d],m=n.makeOutput(f,"float32"),g=n.dataIdMap.get(i.dataId).id,y=new Uint8Array(new Int32Array(w.computeStrides(i.shape)).buffer),b=new Uint8Array(new Int32Array(f).buffer),_=new Uint8Array(new Int32Array(w.computeStrides(f)).buffer),v=n.dataIdMap.get(m.dataId).id;return QY(g,a,"NHWC"===s?1:0,y,i.shape.length-1,b,_,f.length,v),m}},nqe={kernelName:ld,backendName:"wasm",setupFunc:function eqe(e){JY=e.wasm.cwrap(ld,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function tqe(e){let{inputs:n,attrs:t,backend:r}=e,{x:i,filter:a}=n,s=r.dataIdMap.get(i.dataId).id,o=r.dataIdMap.get(a.dataId).id,{strides:l,dilations:c,pad:u,dimRoundingMode:h}=t,p=I.computeConv2DInfo(i.shape,a.shape,l,c??[1,1],u,h,!0),f=p.filterHeight,m=p.filterWidth,g=p.padInfo.top,y=p.padInfo.right,b=p.padInfo.bottom,_=p.padInfo.left,v=p.dilationHeight,x=p.dilationWidth,S=p.strideHeight,M=p.strideWidth,D=p.inChannels,N=p.outChannels,F="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${p.dataFormat}'. Please use 'channelsLast'.`);let O=r.makeOutput(p.outShape,"float32"),k=r.dataIdMap.get(O.dataId).id;return JY(s,i.shape[0],i.shape[1],i.shape[2],o,f,m,g,y,b,_,F,v,x,S,M,D,N,k),O}},aqe={kernelName:Sb,backendName:"wasm",setupFunc:function rqe(e){eZ=e.wasm.cwrap("Diag",null,["number","number","number","number"])},kernelFunc:function iqe(e){let{inputs:n,backend:t}=e,{x:r}=n,i=w.sizeFromShape(r.shape),a=t.makeOutput([...r.shape,...r.shape],r.dtype);return eZ(t.dataIdMap.get(r.dataId).id,zt[r.dtype],i,t.dataIdMap.get(a.dataId).id),a}},lqe={kernelName:cd,backendName:"wasm",setupFunc:function sqe(e){tZ=e.wasm.cwrap(cd,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function oqe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,filter:a}=n,{strides:s,pad:o,dilations:l}=r;if(i.dtype!==a.dtype)throw new Error(`Dilation2D error: x must have the same dtype as filter. Got ${i.dtype} and ${a.dtype}`);let c=I.computeDilation2DInfo(i.shape,a.shape,s,o,"NHWC",l),u=t.makeOutput(c.outShape,i.dtype);return tZ(t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(u.dataId).id,zt[i.dtype],c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.filterHeight,c.filterWidth,c.padInfo.top,c.padInfo.left),u}},dqe={kernelName:Kf,backendName:"wasm",setupFunc:function cqe(e){nZ=e.wasm.cwrap(Kf,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function uqe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,filter:a,dy:s}=n,{strides:o,pad:l,dilations:c}=r;if(i.dtype!==a.dtype||i.dtype!==s.dtype)throw new Error(`Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ${i.dtype}, ${a.dtype}, and ${s.dtype}`);let u=I.computeDilation2DInfo(i.shape,a.shape,o,l,"NHWC",c),h=t.makeOutput(a.shape,a.dtype);return nZ(t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(s.dataId).id,t.dataIdMap.get(h.dataId).id,zt[i.dtype],u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.filterHeight,u.filterWidth,u.padInfo.top,u.padInfo.left),h}},fqe={kernelName:qf,backendName:"wasm",setupFunc:function hqe(e){rZ=e.wasm.cwrap(qf,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function pqe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,filter:a,dy:s}=n,{strides:o,pad:l,dilations:c}=r;if(i.dtype!==a.dtype||i.dtype!==s.dtype)throw new Error(`Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ${i.dtype}, ${a.dtype}, and ${s.dtype}`);let u=I.computeDilation2DInfo(i.shape,a.shape,o,l,"NHWC",c),h=t.makeOutput(i.shape,i.dtype);return rZ(t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(s.dataId).id,t.dataIdMap.get(h.dataId).id,zt[i.dtype],u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.filterHeight,u.filterWidth,u.padInfo.top,u.padInfo.left),h}},mqe=Pt(dd),bqe={kernelName:Xf,backendName:"wasm",setupFunc:function gqe(e){iZ=e.wasm.cwrap(Xf,null,["number","number","number"])},kernelFunc:function yqe(e){let{inputs:n,backend:t}=e,{dy:r,y:i}=n,a=t.makeOutput(i.shape,"float32"),s=o=>t.dataIdMap.get(o.dataId).id;return iZ(s(i),s(r),s(a)),a}},vqe=wr(Yf,0,"bool"),xqe=Pt(hd),wqe=Pt(pd,"float32");function mF(e){let{inputs:n,attrs:t,backend:r}=e,{input:i}=n,{dim:a}=t,s=i.shape.length,o=i.shape.slice(),l=a;return a<0&&(w.assert(-(s+1)<=a,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+a+1),o.splice(l,0,1),ta({inputs:{x:i},backend:r,attrs:{shape:o}})}var Cqe={kernelName:Zf,backendName:"wasm",kernelFunc:mF},kqe=Pt(fd,"float32");function aZ(e){let{attrs:{shape:n,value:t},backend:r}=e,{attrs:{dtype:i}}=e;i=i||w.inferDtype(t);let a=r.makeOutput(n,i);return r.typedArrayFromHeap(a).fill(t),a}var sZ,oZ,lZ,cZ,uZ,dZ,hZ,pZ,fZ,mZ,gZ,yZ,bZ,_Z,vZ,xZ,wZ,CZ,gF,kZ,Sqe={kernelName:Ib,backendName:"wasm",kernelFunc:aZ},Eqe={kernelName:Qf,backendName:"wasm",kernelFunc:function Mqe(e){let{inputs:n,backend:t}=e,{image:r}=n,i=t.makeOutput(r.shape,r.dtype),a=t.dataIdMap.get(r.dataId).id,s=t.dataIdMap.get(i.dataId).id,[o,l,c,u]=r.shape;return sZ(a,o,l,c,u,s),i},setupFunc:function Iqe(e){sZ=e.wasm.cwrap(Qf,null,["number","number","number","number","number","number"])}},Dqe=Pt(md),Tqe=wr(gd),Fqe={kernelName:yd,backendName:"wasm",setupFunc:function Nqe(e){oZ=e.wasm.cwrap(yd,null,["number","number","number","number","number","number","number"])},kernelFunc:function Oqe(e){let{backend:n,inputs:t,attrs:r}=e,{varianceEpsilon:i}=r,{x:a,mean:s,variance:o,offset:l,scale:c}=t,u=n.dataIdMap.get(a.dataId).id,h=n.dataIdMap.get(s.dataId).id,d=n.dataIdMap.get(o.dataId).id,p=null!=l?n.dataIdMap.get(l.dataId).id:0,f=null!=c?n.dataIdMap.get(c.dataId).id:0,m=n.makeOutput(a.shape,a.dtype);if(0===w.sizeFromShape(a.shape))return m;let g=n.dataIdMap.get(m.dataId).id;return oZ(u,h,d,p,f,i,g),m}},Lqe={kernelName:ch,backendName:"wasm",setupFunc:function Rqe(e){lZ=e.wasm.cwrap(ch,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function Pqe(e){let{inputs:n,attrs:t,backend:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=n,{strides:l,pad:c,dilations:u,dataFormat:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=t,m=I.computeConv2DInfo(i.shape,a.shape,l,u,c,d),g=Z_[p];if(null==g)throw new Error(`${p} activation not yet supported for FusedConv2D in the wasm backend.`);let y=r.dataIdMap.get(i.dataId).id,b=r.dataIdMap.get(a.dataId).id,_=m.outChannels,v=0;if(null!=s){let le=r.dataIdMap.get(s.dataId);if(1!==le.shape.length)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${le.shape.length}.`);if(le.shape[0]!==_)throw new Error(`FusedConv2D bias shape (${le.shape}) does not match the number of output channels (${_})`);v=le.id}let x=m.filterHeight,S=m.filterWidth,M=m.padInfo.top,D=m.padInfo.right,N=m.padInfo.bottom,F=m.padInfo.left,O=m.dilationHeight,k=m.dilationWidth,P=m.strideHeight,j=m.strideWidth,Z=m.inChannels,z="SAME"===m.padInfo.type?1:0,W=m.batchSize,q=m.inHeight,J=m.inWidth;if("NHWC"!==h)throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${h}'. Please use 'NHWC'.`);let te=r.makeOutput(m.outShape,"float32"),ie=r.dataIdMap.get(te.dataId).id,pe=null==o?0:r.dataIdMap.get(o.dataId).id;return lZ(y,W,q,J,b,x,S,v,M,D,N,F,z,O,k,P,j,Z,_,g,pe,f||0,ie),te}},Vqe={kernelName:uh,backendName:"wasm",setupFunc:function $qe(e){cZ=e.wasm.cwrap(uh,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function Bqe(e){let{inputs:n,attrs:t,backend:r}=e,{x:i,filter:a,bias:s,preluActivationWeights:o}=n,{strides:l,pad:c,dilations:u,dataFormat:h,dimRoundingMode:d,activation:p,leakyreluAlpha:f}=t,m=I.computeConv2DInfo(i.shape,a.shape,l,u,c,d,!0),g=Z_[p];if(null==g)throw new Error(`${p} activation not yet supported for FusedDepthwiseConv2D in the wasm backend.`);let y=r.dataIdMap.get(i.dataId).id,b=r.dataIdMap.get(a.dataId).id,_=m.outChannels,v=0;if(null!=s){let le=r.dataIdMap.get(s.dataId);if(1!==le.shape.length)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${le.shape.length}.`);if(le.shape[0]!==_)throw new Error(`FusedDepthwiseConv2D bias shape (${le.shape}) does not match the number of output channels (${_})`);v=le.id}let x=m.filterHeight,S=m.filterWidth,M=m.padInfo.top,D=m.padInfo.right,N=m.padInfo.bottom,F=m.padInfo.left,O=m.dilationHeight,k=m.dilationWidth,P=m.strideHeight,j=m.strideWidth,Z=m.inChannels,z="SAME"===m.padInfo.type?1:0,W=m.batchSize,q=m.inHeight,J=m.inWidth;if("NHWC"!==h)throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${h}'. Please use 'NHWC'.`);let te=r.makeOutput(m.outShape,"float32"),ie=r.dataIdMap.get(te.dataId).id,pe=null==o?0:r.dataIdMap.get(o.dataId).id;return cZ(y,W,q,J,b,x,S,v,M,D,N,F,z,O,k,P,j,Z,_,g,pe,f||0,ie),te}},Hqe={kernelName:em,backendName:"wasm",setupFunc:function zqe(e){uZ=e.wasm.cwrap(em,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function Uqe(e){let{backend:n,inputs:t}=e,{params:r,indices:i}=t,[a,s,o,l]=QA.prepareAndValidate(r,i),c=n.makeOutput(a,r.dtype);if(0===s)return c;let u=i.shape,h=u[u.length-1],d=n.dataIdMap.get(r.dataId).id,p=n.dataIdMap.get(i.dataId).id,f=new Uint8Array(new Int32Array(l).buffer),m=n.dataIdMap.get(c.dataId).id;return uZ(d,zt[r.dtype],p,s,h,o,f,m),c}},Gqe={kernelName:Jf,backendName:"wasm",setupFunc:function Wqe(e){dZ=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function jqe(e){let{backend:n,inputs:t,attrs:r}=e,{x:i,indices:a}=t,{axis:s,batchDims:o}=r,l=w.parseAxisParam(s,i.shape)[0],c=n.readSync(a.dataId),u=i.shape[l];for(let M=0;M<c.length;++M){let D=c[M];w.assert(D<=u-1&&D>=0,()=>`GatherV2: the index value ${D} is not in [0, ${u-1}]`)}let h=I.segment_util.collectGatherOpShapeInfo(i,a,l,o),d=ta({inputs:{x:i},attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]},backend:n}),p=w.sizeFromShape(a.shape),f=ta({inputs:{x:a},attrs:{shape:[h.batchSize,p/h.batchSize]},backend:n}),m=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize],g=n.makeOutput(m,i.dtype);if(0===w.sizeFromShape(i.shape))return g;let y=d.shape.length-1,b=n.dataIdMap.get(d.dataId).id,_=n.dataIdMap.get(f.dataId).id,v=n.dataIdMap.get(g.dataId).id,x=new Uint8Array(new Int32Array(w.computeStrides(d.shape)).buffer),S=new Uint8Array(new Int32Array(w.computeStrides(m)).buffer);return dZ(b,zt[i.dtype],x,y,_,h.batchSize,S,v),n.disposeData(d.dataId),n.disposeData(f.dataId),g.shape=h.outputShape,g}},Kqe=wr(tm,0,"bool"),Yqe=wr(bd,0,"bool"),Zqe=Pt(vd,"bool"),Qqe=Pt(xd,"bool"),Jqe=Pt(wd,"bool"),nKe={kernelName:Cd,backendName:"wasm",setupFunc:function eKe(e){hZ=e.wasm.cwrap(Cd,null,["number","number","number","number"])},kernelFunc:function tKe(e){let{inputs:{x:n},attrs:{alpha:t},backend:r}=e,i=r.dataIdMap.get(n.dataId).id,a=r.makeOutput(n.shape,"float32");if(0!==w.sizeFromShape(n.shape)){let s=r.dataIdMap.get(a.dataId).id;hZ(i,zt[n.dtype],t,s)}return a}},iKe=wr(nm,0,"bool"),sKe=wr(rm,0,"bool"),cKe={kernelName:im,backendName:"wasm",setupFunc:function oKe(e){pZ=e.wasm.cwrap(im,null,["number","number","number","number"])},kernelFunc:function lKe(e){let{attrs:n,backend:t}=e,{start:r,stop:i,num:a}=n,s=Math.floor(a),o=t.makeOutput([s],"float32");return pZ(t.dataIdMap.get(o.dataId).id,r,i,s),o}},uKe=Pt(kd),dKe=Pt(Sd),pKe=wr(am,0,"bool"),fKe=Pt(sm),gKe=wr(om,0,"bool"),bKe=wr(t8,0,"bool"),xKe={kernelName:Id,backendName:"wasm",setupFunc:function _Ke(e){fZ=e.wasm.cwrap(Id,null,["number","number","number","number","number","number","number"])},kernelFunc:function vKe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{depthRadius:a,bias:s,alpha:o,beta:l}=r;if("float32"!==i.dtype)throw new Error("LRN error: x must have dtype float32");let c=t.makeOutput(i.shape,i.dtype);return fZ(t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(c.dataId).id,i.shape[3],a,s,o,l),c}},kKe={kernelName:lm,backendName:"wasm",setupFunc:function wKe(e){mZ=e.wasm.cwrap(lm,null,["number","number","number","number","number","number","number","number","number"])},kernelFunc:function CKe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i,y:a,dy:s}=n,{depthRadius:o,bias:l,alpha:c,beta:u}=r;if("float32"!==i.dtype||"float32"!==a.dtype||"float32"!==s.dtype)throw new Error("LRNGrad error: x, y, and dy must have dtype float32");let h=t.makeOutput(i.shape,i.dtype);return mZ(t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(s.dataId).id,t.dataIdMap.get(h.dataId).id,s.shape[3],o,l,c,u),h}},MKe={kernelName:Md,backendName:"wasm",setupFunc:function SKe(e){gZ=e.wasm.cwrap(Md,null,["number","number","number","number"])},kernelFunc:function IKe(e){let{backend:n,inputs:t,attrs:r}=e,{reductionIndices:i,keepDims:a}=r,{x:s}=t,o=n.dataIdMap.get(s.dataId).id,l=s,{transposed:c,axes:u,originalAxes:h,inputWasTransposed:d}=jc(s,i,n);d&&(l=c,o=n.dataIdMap.get(c.dataId).id),I.assertAxesAreInnerMostDims("max",u,l.shape.length);let[f,m]=I.computeOutAndReduceShapes(l.shape,u),g=w.sizeFromShape(m),y=n.makeOutput(f,s.dtype);if(0!==w.sizeFromShape(l.shape)){let b=n.dataIdMap.get(y.dataId).id;gZ(o,zt[s.dtype],g,b)}if(d&&n.disposeData(c.dataId),a){let b=I.expandShapeToKeepDim(y.shape,h);y.shape=b}return y}},DKe=wr(Ed),NKe={kernelName:Dd,backendName:"wasm",setupFunc:function AKe(e){yZ=e.wasm.cwrap(Dd,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function TKe(e){let{inputs:n,attrs:t,backend:r}=e,i=n.x,a=r.dataIdMap.get(i.dataId).id;w.assert("float32"===i.dtype,()=>`Error in MaxPool: only float32 input is supported. Got ${i.dtype}.`);let{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=t,u=I.computePool2DInfo(i.shape,s,o,1,l,c),h=u.filterHeight,d=u.filterWidth,p=u.padInfo.top,f=u.padInfo.right,m=u.padInfo.bottom,g=u.padInfo.left,y=u.dilationHeight,b=u.dilationWidth,_=u.strideHeight,v=u.strideWidth,x=u.inChannels,S=u.outChannels;if("channelsLast"!==u.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${u.dataFormat}'. Please use 'channelsLast'.`);let M=r.makeOutput(u.outShape,"float32"),D=r.dataIdMap.get(M.dataId).id;return yZ(a,i.shape[0],i.shape[1],i.shape[2],h,d,p,f,m,g,y,b,_,v,x,S,D),M}},RKe={kernelName:cm,backendName:"wasm",setupFunc:function OKe(e){bZ=e.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function FKe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{filterSize:a,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r,u=I.computePool3DInfo(i.shape,a,s,1,o,l,c),h=t.makeOutput(u.outShape,i.dtype);return bZ(t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(h.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),h}},$Ke={kernelName:Eb,backendName:"wasm",setupFunc:function PKe(e){_Z=e.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function LKe(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,input:a}=n,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r,u=I.computePool3DInfo(a.shape,s,o,1,l,c),h=t.makeOutput(a.shape,a.dtype);return _Z(t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(h.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),h}},zKe={kernelName:Mb,backendName:"wasm",setupFunc:function BKe(e){vZ=e.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function VKe(e){let{inputs:n,backend:t,attrs:r}=e,{dy:i,input:a}=n,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r,u=I.computePool2DInfo(a.shape,s,o,1,l,c),h=t.makeOutput(a.shape,a.dtype);return vZ(t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(h.dataId).id,u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.top,u.padInfo.left),h}},WKe={kernelName:Db,backendName:"wasm",setupFunc:function UKe(e){xZ=e.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function HKe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{filterSize:a,strides:s,pad:o,includeBatchInIndex:l}=r;w.assert(4===i.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${i.shape.length}.`);let c=[1,1];w.assert(I.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=I.computePool2DInfo(i.shape,a,s,[1,1],o),h=t.makeOutput(u.outShape,i.dtype),d=t.makeOutput(u.outShape,"int32");return xZ(t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(h.dataId).id,t.dataIdMap.get(d.dataId).id,zt[i.dtype],l,u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.top,u.padInfo.left),[h,d]}},qKe={kernelName:Ad,backendName:"wasm",setupFunc:function jKe(e){wZ=e.wasm.cwrap(Ad,null,["number, number, number"])},kernelFunc:function GKe(e){let{backend:n,inputs:t,attrs:r}=e,{axis:i,keepDims:a}=r,{x:s}=t,o=n.dataIdMap.get(s.dataId).id,l=o,c=s,{transposed:u,axes:h,originalAxes:d,inputWasTransposed:p}=jc(s,i,n),f=h;if(p){let v=n.dataIdMap.get(u.dataId).id;v!==o&&(c=u,l=v,f=I.getInnerMostAxes(f.length,c.shape.length))}I.assertAxesAreInnerMostDims("mean",f,c.shape.length);let[m,g]=I.computeOutAndReduceShapes(c.shape,f),y=w.sizeFromShape(g),b=c;"float32"!==c.dtype&&(b=Gc({backend:n,inputs:{x:c},attrs:{dtype:"float32"}}),l=n.dataIdMap.get(b.dataId).id);let _=n.makeOutput(m,"float32");if(0!==w.sizeFromShape(c.shape)){let v=n.dataIdMap.get(_.dataId).id;wZ(l,y,v)}if(p&&n.disposeData(u.dataId),a){let v=I.expandShapeToKeepDim(_.shape,d);_.shape=v}return"float32"!==c.dtype&&n.disposeData(b.dataId),_}},YKe={kernelName:Td,backendName:"wasm",setupFunc:function KKe(e){CZ=e.wasm.cwrap(Td,null,["number","number","number","number"])},kernelFunc:function XKe(e){let{backend:n,inputs:t,attrs:r}=e,{axis:i,keepDims:a}=r,{x:s}=t,o=n.dataIdMap.get(s.dataId).id,l=o,c=s,{transposed:u,axes:h,originalAxes:d,inputWasTransposed:p}=jc(s,i,n);if(p){let _=n.dataIdMap.get(u.dataId).id;_!==o&&(c=u,l=_)}I.assertAxesAreInnerMostDims("min",h,c.shape.length);let[m,g]=I.computeOutAndReduceShapes(c.shape,h),y=w.sizeFromShape(g),b=n.makeOutput(m,c.dtype);if(0!==w.sizeFromShape(c.shape)){let _=n.dataIdMap.get(b.dataId).id;CZ(l,zt[s.dtype],y,_)}if(p&&n.disposeData(u.dataId),a){let _=I.expandShapeToKeepDim(b.shape,d);b.shape=_}return b}},QKe=wr(Nd);!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(gF||(gF={}));var SZ,tXe={kernelName:Od,backendName:"wasm",kernelFunc:function eXe(e){let{inputs:{x:n},backend:t,attrs:{paddings:r,mode:i}}=e,a=r.map((f,m)=>f[0]+n.shape[m]+f[1]),s=t.dataIdMap.get(n.dataId).id,o=t.makeOutput(a,n.dtype),l=t.dataIdMap.get(o.dataId).id,c=new Uint8Array(new Int32Array(n.shape).buffer),u=r.map(f=>f[0]),h=r.map(f=>f[1]),d=new Uint8Array(new Int32Array(u).buffer),p=new Uint8Array(new Int32Array(h).buffer);return kZ(s,c,n.shape.length,zt[n.dtype],d,p,gF[i],l),o},setupFunc:function JKe(e){kZ=e.wasm.cwrap(Od,null,["number","array","number","number","array","array","number","number"])}};function IZ(e){let{backend:n,inputs:{logits:t},attrs:{dim:r}}=e,i=n.dataIdMap.get(t.dataId).id,a=n.makeOutput(t.shape,t.dtype),s=n.dataIdMap.get(a.dataId).id,o=t.shape[r],l=w.sizeFromShape(t.shape)/o;return 0===w.sizeFromShape(a.shape)||SZ(i,s,o,l),a}var MZ,EZ,rXe={kernelName:rh,backendName:"wasm",setupFunc:function nXe(e){SZ=e.wasm.cwrap(rh,null,["number","number","number","number"])},kernelFunc:IZ},sXe={kernelName:um,backendName:"wasm",setupFunc:function iXe(e){MZ=e.wasm.cwrap(um,null,["number","number","number","number","number","number"])},kernelFunc:function aXe(e){let{inputs:n,backend:t,attrs:r}=e,{logits:i}=n,{numSamples:a,seed:s,normalized:o}=r;if("float32"!==i.dtype)throw new Error(`Tensor logits must have dtype float32, got ${i.dtype}`);let l=o?i:IZ({inputs:{logits:i},backend:t,attrs:{dim:i.shape.length-1}}),[c,u]=l.shape,h=t.makeOutput([c,a],"int32");return MZ(t.dataIdMap.get(l.dataId).id,c,u,a,s,t.dataIdMap.get(h.dataId).id),o||t.disposeData(l.dataId),h}},oXe=wr(Fd),cXe=wr(Rd),uXe=Pt(dm);function yF(e,n){let t=new Int32Array(e.wasm.HEAPU8.buffer,n,4),r=t[0],i=t[1],a=t[2],s=t[3];return e.wasm._free(n),{pSelectedIndices:r,selectedSize:i,pSelectedScores:a,pValidOutputs:s}}var DZ,AZ,TZ,NZ,FZ,RZ,PZ,LZ,$Z,BZ,VZ,zZ,UZ,HZ,WZ,jZ,GZ,qZ,KZ,pXe={kernelName:pm,backendName:"wasm",setupFunc:function dXe(e){EZ=e.wasm.cwrap(pm,"number",["number","number","number","number","number"])},kernelFunc:function hXe(e){let{backend:n,inputs:t,attrs:r}=e,{iouThreshold:i,maxOutputSize:a,scoreThreshold:s}=r,{boxes:o,scores:l}=t,c=n.dataIdMap.get(o.dataId).id,u=n.dataIdMap.get(l.dataId).id,h=EZ(c,u,a,i,s),{pSelectedIndices:d,selectedSize:p,pSelectedScores:f,pValidOutputs:m}=yF(n,h);return n.wasm._free(f),n.wasm._free(m),n.makeOutput([p],"int32",d)}},gXe={kernelName:fm,backendName:"wasm",setupFunc:function fXe(e){DZ=e.wasm.cwrap(fm,"number",["number","number","number","number","number","bool"])},kernelFunc:function mXe(e){let{backend:n,inputs:t,attrs:r}=e,{iouThreshold:i,maxOutputSize:a,scoreThreshold:s,padToMaxOutputSize:o}=r,{boxes:l,scores:c}=t,u=n.dataIdMap.get(l.dataId).id,h=n.dataIdMap.get(c.dataId).id,d=DZ(u,h,a,i,s,o),{pSelectedIndices:p,selectedSize:f,pSelectedScores:m,pValidOutputs:g}=yF(n,d);return n.wasm._free(m),[n.makeOutput([f],"int32",p),n.makeOutput([],"int32",g)]}},_Xe={kernelName:mm,backendName:"wasm",setupFunc:function yXe(e){AZ=e.wasm.cwrap(mm,"number",["number","number","number","number","number","number"])},kernelFunc:function bXe(e){let{backend:n,inputs:t,attrs:r}=e,{iouThreshold:i,maxOutputSize:a,scoreThreshold:s,softNmsSigma:o}=r,{boxes:l,scores:c}=t,u=n.dataIdMap.get(l.dataId).id,h=n.dataIdMap.get(c.dataId).id,d=AZ(u,h,a,i,s,o),{pSelectedIndices:p,selectedSize:f,pSelectedScores:m,pValidOutputs:g}=yF(n,d);return n.wasm._free(g),[n.makeOutput([f],"int32",p),n.makeOutput([f],"float32",m)]}},xXe=wr(hm,0,"bool"),kXe={kernelName:Pd,backendName:"wasm",setupFunc:function wXe(e){TZ=e.wasm.cwrap(Pd,null,["number","number","number","number","number"])},kernelFunc:function CXe(e){let{inputs:n,backend:t,attrs:r}=e,{indices:i}=n,{dtype:a,depth:s,onValue:o,offValue:l}=r,c=t.makeOutput([...i.shape,s],a),u=t.dataIdMap.get(c.dataId).id,h=t.dataIdMap.get(i.dataId).id;return TZ(h,s,o,l,u),c}},IXe={kernelName:gm,backendName:"wasm",kernelFunc:function SXe(e){let{inputs:{x:n},backend:t}=e,r=t.makeOutput(n.shape,n.dtype);return t.typedArrayFromHeap(r).fill(1),r}},EXe={kernelName:ym,backendName:"wasm",kernelFunc:function MXe(e){let{inputs:n,backend:t,attrs:r}=e,{axis:i}=r;if(1===n.length)return mF({inputs:{input:n[0]},backend:t,attrs:{dim:i}});let a=n[0].shape,s=n[0].dtype;n.forEach(u=>{w.assertShapesMatch(a,u.shape,"All tensors passed to stack must have matching shapes"),w.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],c=UY({inputs:n.map(u=>{let h=mF({inputs:{input:u},backend:t,attrs:{dim:i}});return o.push(h),h}),backend:t,attrs:{axis:i}});return o.forEach(u=>t.disposeData(u.dataId)),c}},OZ={kernelName:Ld,backendName:"wasm",kernelFunc:function AXe(e){let{inputs:{x:n},backend:t,attrs:{paddings:r,constantValue:i}}=e,a=r.map((f,m)=>f[0]+n.shape[m]+f[1]);if(0===w.sizeFromShape(n.shape))return aZ({backend:t,attrs:{shape:a,value:i,dtype:n.dtype}});let s=t.dataIdMap.get(n.dataId).id,o=t.makeOutput(a,n.dtype),l=t.dataIdMap.get(o.dataId).id,c=new Uint8Array(new Int32Array(n.shape).buffer),u=r.map(f=>f[0]),h=r.map(f=>f[1]),d=new Uint8Array(new Int32Array(u).buffer),p=new Uint8Array(new Int32Array(h).buffer);return NZ(s,c,n.shape.length,zt[n.dtype],d,p,i,l),o},setupFunc:function DXe(e){NZ=e.wasm.cwrap(Ld,null,["number","array","number","number","array","array","number","number"])}},NXe=wr($d),RXe={kernelName:Bd,backendName:"wasm",setupFunc:function OXe(e){FZ=e.wasm.cwrap(Bd,null,["number","number","number"])},kernelFunc:function FXe(e){let{inputs:n,backend:t}=e,{x:r,alpha:i}=n,a=t.dataIdMap.get(r.dataId).id,s=t.dataIdMap.get(i.dataId).id,o=a,l=r,c=l;"float32"!==l.dtype&&(c=Gc({backend:t,inputs:{x:r},attrs:{dtype:"float32"}}),o=t.dataIdMap.get(c.dataId).id);let u=t.makeOutput(r.shape,"float32"),h=t.dataIdMap.get(u.dataId).id;return FZ(o,s,h),"float32"!==l.dtype&&t.disposeData(c.dataId),u}},$Xe={kernelName:Vd,backendName:"wasm",setupFunc:function PXe(e){RZ=e.wasm.cwrap(Vd,null,["number","number","number","number"])},kernelFunc:function LXe(e){let{backend:n,inputs:t,attrs:r}=e,{axis:i,keepDims:a}=r,{x:s}=t,o=n.dataIdMap.get(s.dataId).id,l=o,c=s,{transposed:u,axes:h,originalAxes:d,inputWasTransposed:p}=jc(s,i,n),f=h;if(p){let _=n.dataIdMap.get(u.dataId).id;_!==o&&(c=u,l=_,f=I.getInnerMostAxes(f.length,c.shape.length))}I.assertAxesAreInnerMostDims("prod",f,c.shape.length);let[m,g]=I.computeOutAndReduceShapes(c.shape,f),y=w.sizeFromShape(g),b=n.makeOutput(m,c.dtype);if(0!==w.sizeFromShape(c.shape)){let _=n.dataIdMap.get(b.dataId).id;RZ(l,y,zt[b.dtype],_)}if(p&&n.disposeData(u.dataId),a){let _=I.expandShapeToKeepDim(b.shape,d);b.shape=_}return b}},VXe={kernelName:Ab,backendName:"wasm",kernelFunc:e=>{let{backend:n,attrs:t}=e,{start:r,stop:i,step:a,dtype:s}=t,o=TO(r,i,a,s),l=n.makeOutput([o.length],s);return n.typedArrayFromHeap(l).set(o),l}},UXe=wr(ud),HXe=Pt(zd),WXe=Pt(Ud),jXe=Pt(jd),KXe={kernelName:Wd,backendName:"wasm",setupFunc:function GXe(e){PZ=e.wasm.cwrap(Wd,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function qXe(e){let g,{backend:n,inputs:t,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:s,size:o}=r,[l,c]=o,[u,h,d,p]=i.shape,f=[u,l,c,p],m=n.dataIdMap.get(i.dataId);"float32"!==m.dtype&&(g=Gc({backend:n,inputs:{x:i},attrs:{dtype:"float32"}}),m=n.dataIdMap.get(g.dataId));let y=m.id,b=n.makeOutput(f,"float32");if(0===w.sizeFromShape(i.shape))return b;let _=n.dataIdMap.get(b.dataId).id;return PZ(y,u,h,d,p,l,c,a?1:0,s?1:0,_),null!=g&&n.disposeData(g.dataId),b}},ZXe={kernelName:vm,backendName:"wasm",setupFunc:function XXe(e){LZ=e.wasm.cwrap(vm,null,["number","number","number","array","array","boolean"])},kernelFunc:function YXe(e){let c,{inputs:n,backend:t,attrs:r}=e,{images:i,dy:a}=n,{alignCorners:s}=r,o=t.makeOutput(i.shape,"float32"),l=t.dataIdMap.get(i.dataId);return"float32"!==l.dtype&&(c=Gc({backend:t,inputs:{x:i},attrs:{dtype:"float32"}}),l=t.dataIdMap.get(c.dataId)),LZ(t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(o.dataId).id,new Uint8Array(new Int32Array(i.shape).buffer),new Uint8Array(new Int32Array(a.shape).buffer),s),null!=c&&t.disposeData(c.dataId),o}},eYe={kernelName:Hd,backendName:"wasm",setupFunc:function QXe(e){$Z=e.wasm.cwrap(Hd,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function JXe(e){let{backend:n,inputs:t,attrs:r}=e,{images:i}=t,{alignCorners:a,halfPixelCenters:s,size:o}=r,[l,c]=o,[u,h,d,p]=i.shape,m=n.makeOutput([u,l,c,p],"float32");if(0===w.sizeFromShape(i.shape))return m;let y,g=n.dataIdMap.get(i.dataId);"float32"!==g.dtype&&(y=Gc({backend:n,inputs:{x:i},attrs:{dtype:"float32"}}),g=n.dataIdMap.get(y.dataId));let b=g.id,_=n.dataIdMap.get(m.dataId).id;return $Z(b,u,h,d,p,l,c,a?1:0,s?1:0,_),null!=y&&n.disposeData(y.dataId),m}},rYe={kernelName:_m,backendName:"wasm",setupFunc:function tYe(e){BZ=e.wasm.cwrap(_m,null,["number","number","number","array","array","boolean"])},kernelFunc:function nYe(e){let c,{inputs:n,backend:t,attrs:r}=e,{images:i,dy:a}=n,{alignCorners:s}=r,o=t.makeOutput(i.shape,"float32"),l=t.dataIdMap.get(i.dataId);return"float32"!==l.dtype&&(c=Gc({backend:t,inputs:{x:i},attrs:{dtype:"float32"}}),l=t.dataIdMap.get(c.dataId)),BZ(t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(a.dataId).id,t.dataIdMap.get(o.dataId).id,new Uint8Array(new Int32Array(i.shape).buffer),new Uint8Array(new Int32Array(a.shape).buffer),s),null!=c&&t.disposeData(c.dataId),o}},sYe={kernelName:Gd,backendName:"wasm",kernelFunc:function aYe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{dims:a}=r,s=w.parseAxisParam(a,i.shape);if(0===i.shape.length)return EC({inputs:{x:i},backend:t});let o=t.makeOutput(i.shape,i.dtype),l=t.dataIdMap.get(i.dataId).id,c=t.dataIdMap.get(o.dataId).id,u=new Uint8Array(new Int32Array(s).buffer),h=new Uint8Array(new Int32Array(i.shape).buffer);VZ(l,u,s.length,h,i.shape.length,c);let d=ta({inputs:{x:o},attrs:{shape:i.shape},backend:t});return t.disposeData(o.dataId),d},setupFunc:function iYe(e){VZ=e.wasm.cwrap(Gd,null,["number","array","number","array","number","number"])}},cYe={kernelName:Rm,backendName:"wasm",kernelFunc:function lYe(e){let{inputs:n,backend:t,attrs:r}=e,{image:i}=n,{radians:a,fillValue:s,center:o}=r,l=t.makeOutput(i.shape,i.dtype),c=t.dataIdMap.get(i.dataId).id,u=t.dataIdMap.get(l.dataId).id,[h,d,p,f]=i.shape,[m,g]=I.getImageCenter(o,d,p),_="number"==typeof s?[s,s,s,0===s?0:255]:[...s,255],v=new Uint8Array(new Int32Array(_).buffer);return zZ(c,h,d,p,f,a,m,g,v,_.length,u),l},setupFunc:function oYe(e){zZ=e.wasm.cwrap(Rm,null,["number","number","number","number","number","number","number","number","array","number","number"])}},uYe=Pt(qd),dYe=Pt(Kd),fYe={kernelName:xm,backendName:"wasm",setupFunc:function hYe(e){UZ=e.wasm.cwrap(xm,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function pYe(e){let{backend:n,inputs:t,attrs:r}=e,{indices:i,updates:a}=t,{shape:s}=r,o=n.makeOutput(s,a.dtype);if(0===w.sizeFromShape(s))return o;let{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:d}=a1.calculateShapes(a,i,s),p=n.dataIdMap.get(i.dataId).id,f=n.dataIdMap.get(a.dataId).id,m=new Uint8Array(new Int32Array(h).buffer),g=n.dataIdMap.get(o.dataId).id;return UZ(p,f,zt[a.dtype],l,c,u,m,d,g),o}},yYe={kernelName:Cm,backendName:"wasm",setupFunc:function mYe(e){HZ=e.wasm.cwrap(Cm,null,["number","number","number","number","number","number","bool","number"])},kernelFunc:function gYe(e){let{inputs:n,backend:t,attrs:r}=e,{sortedSequence:i,values:a}=n,{side:s}=r;if(i.dtype!==a.dtype)throw new Error(`SearchSorted error: sorted_sequence must have the same dtype as values. Got ${i.dtype} and ${a.dtype}`);let o=t.makeOutput(a.shape,"int32");function l(c){return t.dataIdMap.get(c.dataId).id}return HZ(l(i),l(a),i.shape[0],i.shape[1],a.shape[1],zt[i.dtype],"left"===s,l(o)),o}},vYe={kernelName:km,backendName:"wasm",kernelFunc:function _Ye(e){let{inputs:n,backend:t}=e,{condition:r,t:i,e:a}=n,s=t.dataIdMap.get(r.dataId).id,o=t.dataIdMap.get(i.dataId).id,l=t.dataIdMap.get(a.dataId).id,c=t.makeOutput(i.shape,i.dtype),u=t.dataIdMap.get(c.dataId).id,h=r.shape.length,p=0===h||h>1||1===i.shape.length?1:w.sizeFromShape(i.shape.slice(1));return WZ(s,o,l,p,u),c},setupFunc:function bYe(e){WZ=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}},xYe=Pt(Xd),kYe={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function wYe(e){jZ=e.wasm.cwrap(Jd,null,["number","number"])},kernelFunc:function CYe(e){let{backend:n,inputs:{x:t}}=e,r=n.dataIdMap.get(t.dataId).id,i=n.makeOutput(t.shape,t.dtype),a=n.dataIdMap.get(i.dataId).id;return 0===w.sizeFromShape(i.shape)||jZ(r,a),i}},SYe=Pt(Qd),IYe=Pt(Yd),MYe=Pt(Zd),EYe=Pt(eh),AYe={kernelName:Im,backendName:"wasm",kernelFunc:function DYe(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,{blockShape:a,paddings:s}=r,o=w.sizeFromShape(a),l=[[0,0]];l.push(...s);for(let g=1+a.length;g<i.shape.length;++g)l.push([0,0]);let c=OZ.kernelFunc({inputs:{x:i},backend:t,attrs:{paddings:l,constantValue:0}}),u=I.getReshaped(c.shape,a,o,!1),h=I.getPermuted(u.length,a.length,!1),d=I.getReshapedPermuted(c.shape,a,o,!1),p=ta({inputs:{x:c},backend:t,attrs:{shape:u}}),f=Wc({inputs:{x:p},backend:t,attrs:{perm:h}}),m=ta({inputs:{x:f},backend:t,attrs:{shape:d}});return t.disposeData(c.dataId),t.disposeData(p.dataId),t.disposeData(f.dataId),m}},OYe={kernelName:Tb,backendName:"wasm",setupFunc:function TYe(e){GZ=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function NYe(e){let F,{backend:n,inputs:t}=e,{indices:r,values:i,denseShape:a,defaultValue:s}=t,o=r.shape[0],l=r.shape[1],c=n.readSync(a.dataId)[0],u=[o+c,l],h=n.dataIdMap.get(r.dataId).id,d=n.dataIdMap.get(i.dataId).id,p=n.dataIdMap.get(s.dataId).id,f=n.makeOutput(u,r.dtype),m=n.dataIdMap.get(f.dataId).id,g=n.makeOutput(u.slice(0,1),i.dtype),y=n.dataIdMap.get(g.dataId).id,b=n.makeOutput([c],"bool"),_=n.dataIdMap.get(b.dataId).id,v=n.makeOutput([o],r.dtype),x=n.dataIdMap.get(v.dataId).id,S=n.makeOutput([4],"int32"),M=n.dataIdMap.get(S.dataId).id,D=GZ(h,d,zt[i.dtype],o,c,l,p,m,y,_,x,M),N=n.readSync(S.dataId);switch(N[0]){case 1:F=I.getSparseFillEmptyRowsIndicesDenseShapeMismatch(N[1]);break;case 2:F=I.getSparseFillEmptyRowsNegativeIndexErrorMessage(N[1],N[2]);break;case 3:F=I.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(N[1],N[2],N[3]);break;default:F=""}if(n.disposeData(S.dataId),F)throw n.disposeData(f.dataId),n.disposeData(g.dataId),n.disposeData(b.dataId),n.disposeData(v.dataId),new Error(F);let O=f,k=g;return D!==u[0]&&(O=Qh({inputs:{x:f},attrs:{begin:0,size:[D,l]},backend:n}),k=Qh({inputs:{x:g},attrs:{begin:0,size:D},backend:n}),n.disposeData(f.dataId),n.disposeData(g.dataId)),[O,k,b,v]}},PYe={kernelName:Em,backendName:"wasm",setupFunc:function FYe(e){qZ=e.wasm.cwrap(Em,null,["number","number","number","number","number","number","number"])},kernelFunc:function RYe(e){let{backend:n,inputs:t}=e,{inputIndices:r,inputShape:i,newShape:a}=t;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${r.shape}`);if(1!==i.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${i.shape}`);if(1!==a.shape.length)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);let s=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(i.dataId).id,l=n.dataIdMap.get(a.dataId).id,c=r.shape[0],u=w.sizeFromShape(a.shape),h=n.makeOutput([c,u],r.dtype),d=n.dataIdMap.get(h.dataId).id,p=n.makeOutput([u],a.dtype),f=n.dataIdMap.get(p.dataId).id,m=n.makeOutput([3],"int32"),g=n.dataIdMap.get(m.dataId).id;qZ(s,o,l,c,d,f,g);let b,y=n.readSync(m.dataId);switch(y[0]){case 0:b=I.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(y[1],y[2]);break;case 1:b=I.getSparseReshapeNegativeOutputDimErrorMessage(y[1],y[2]);break;case 2:b=I.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:{let _=Array.from(n.readSync(i.dataId)),v=Array.from(n.readSync(p.dataId));b=I.getSparseReshapeInputOutputMultipleErrorMessage(_,v);break}case 4:{let _=Array.from(n.readSync(i.dataId)),v=Array.from(n.readSync(p.dataId));b=I.getSparseReshapeInputOutputMismatchErrorMessage(_,v);break}default:b=""}if(n.disposeData(m.dataId),b)throw n.disposeData(h.dataId),n.disposeData(p.dataId),new Error(b);return[h,p]}};function XZ(e){KZ=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function YZ(e,n){let{backend:t,inputs:r}=e,{data:i,indices:a,segmentIds:s}=r,o=a.shape[0],l=t.readSync(s.dataId,o-1,o)[0],c=o>0?l+1:0;if(c<0)throw new Error(I.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let u=i.shape.slice();u[0]=c;let h=t.dataIdMap.get(i.dataId).id,d=t.dataIdMap.get(a.dataId).id,p=t.dataIdMap.get(s.dataId).id,f=t.makeOutput(u,i.dtype),m=t.dataIdMap.get(f.dataId).id,g=t.makeOutput([4],"int32"),y=t.dataIdMap.get(g.dataId).id;KZ(h,zt[i.dtype],i.shape[0],d,p,m,y,n,0);let _,b=t.readSync(g.dataId);switch(b[0]){case 0:_=I.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break;case 1:_=I.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break;case 2:_=I.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(b[1],b[2]);break;case 3:_=I.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(b[1],b[2],b[3]);break;default:_=""}if(t.disposeData(g.dataId),_)throw t.disposeData(f.dataId),new Error(_);return f}var ZZ,QZ,JZ,eQ,tQ,nQ,rQ,iQ,$Ye={kernelName:Nb,backendName:"wasm",setupFunc:XZ,kernelFunc:function LYe(e){return YZ(e,!0)}},VYe={kernelName:Ob,backendName:"wasm",setupFunc:XZ,kernelFunc:function BYe(e){return YZ(e,!1)}},HYe={kernelName:Dm,backendName:"wasm",setupFunc:function zYe(e){ZZ=e.wasm.cwrap(Dm,null,["number","number","number","number","number","number","number","number","array","number","number"])},kernelFunc:function UYe(e){let{backend:n,inputs:t,attrs:r}=e,{sparseIndices:i,sparseValues:a,defaultValue:s}=t,{outputShape:o}=r,l=n.makeOutput(o,s.dtype);if(0===w.sizeFromShape(o))return l;let{sliceRank:c,numUpdates:u,sliceSize:h,strides:d,outputSize:p}=I.calculateShapes(a,i,o),f=n.dataIdMap.get(i.dataId).id,m=n.dataIdMap.get(a.dataId).id,g=n.dataIdMap.get(s.dataId).id,y=new Uint8Array(new Int32Array(d).buffer),b=n.dataIdMap.get(l.dataId).id;return ZZ(f,m,a.shape.length,g,zt[s.dtype],c,u,h,y,p,b),l}},jYe={kernelName:Mm,backendName:"wasm",kernelFunc:function WYe(e){let{inputs:n,attrs:t,backend:r}=e,{x:i}=n,{numOrSizeSplits:a,axis:s}=t,o=w.parseAxisParam(s,i.shape)[0],l=I.prepareSplitSize(i,a,o),c=new Array(i.shape.length).fill(0),u=i.shape.slice();return l.map(h=>{let d=[...u];d[o]=h;let p=Qh({inputs:{x:i},attrs:{begin:c,size:d},backend:r});return c[o]+=h,p})}},GYe=Pt(th),qYe=Pt(Fb),XYe=wr(ih),QYe={kernelName:mc,backendName:"wasm",setupFunc:function YYe(e){QZ=e.wasm.cwrap(mc,null,["number","number","number","number"])},kernelFunc:function ZYe(e){let{backend:n,inputs:t,attrs:r}=e,{alpha:i}=r,{x:a}=t,s=n.dataIdMap.get(a.dataId).id,o=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(o.dataId).id;return QZ(s,i,zt[a.dtype],l),o}},tZe={kernelName:Am,backendName:"wasm",setupFunc:function JYe(e){JZ=e.wasm.cwrap(Am,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function eZe(e){let x,{backend:n,inputs:t,attrs:r}=e,{x:i}=t,{begin:a,end:s,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:h,shrinkAxisMask:d}=r,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:_,strides:v}=Tr.sliceInfo(i.shape,a,s,o,l,c,u,h,d);if(m)x=ta({inputs:{x:i},backend:n,attrs:{shape:f}});else if(g||y){w.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let S=Tr.computeOutShape(b,_,v),M=Qh({inputs:{x:i},backend:n,attrs:{begin:b,size:S}});x=ta({inputs:{x:M},backend:n,attrs:{shape:f}}),n.disposeData(M.dataId)}else{let S=n.makeOutput(p,"float32"),M=n.dataIdMap.get(i.dataId).id,D=new Uint8Array(new Int32Array(w.computeStrides(i.shape)).buffer),N=new Uint8Array(new Int32Array(b).buffer),F=new Uint8Array(new Int32Array(_).buffer),O=new Uint8Array(new Int32Array(v).buffer),k=new Uint8Array(new Int32Array(p).buffer),P=new Uint8Array(new Int32Array(w.computeStrides(p)).buffer),j=n.dataIdMap.get(S.dataId).id;JZ(M,D,i.shape.length,N,F,O,k,P,p.length,j),x=ta({inputs:{x:S},backend:n,attrs:{shape:f}}),n.disposeData(S.dataId)}return x}},rZe={kernelName:Pb,backendName:"wasm",kernelFunc:function nZe(e){let{backend:n,inputs:t,attrs:r}=e,{data:i,dataSplits:a}=t,{separator:s,nGramWidths:o,leftPad:l,rightPad:c,padWidth:u,preserveShortSequences:h}=r,d=n.readSync(i.dataId),p=n.readSync(a.dataId),[f,m]=OO(d,p,s,o,l,c,u,h),g=n.makeOutput([f.length],"string");n.dataIdMap.get(g.dataId).stringBytes=f;let b=n.makeOutput(a.shape,"int32");return n.typedArrayFromHeap(b).set(m),[g,b]}},aZe={kernelName:Lb,backendName:"wasm",kernelFunc:function iZe(e){let{backend:n,inputs:t,attrs:r}=e,{input:i,delimiter:a}=t,{skipEmpty:s}=r,o=n.readSync(i.dataId),l=n.readSync(a.dataId),[c,u,h]=FO(o,l[0],s),d=u.length,p=n.makeOutput([d,2],"int32");n.typedArrayFromHeap(p).set(c);let f=n.makeOutput([d],"string");n.dataIdMap.get(f.dataId).stringBytes=u;let g=n.makeOutput([2],"int32");return n.typedArrayFromHeap(g).set(h),[p,f,g]}},oZe={kernelName:$b,backendName:"wasm",kernelFunc:function sZe(e){let{backend:n,inputs:t,attrs:r}=e,{input:i}=t,{numBuckets:a}=r,o=RO(n.readSync(i.dataId),a),l=n.makeOutput(i.shape,"int32");return n.typedArrayFromHeap(l).set(o),l}},cZe=wr(ah),hZe={kernelName:nh,backendName:"wasm",setupFunc:function uZe(e){eQ=e.wasm.cwrap(nh,null,["number","number","number","number"])},kernelFunc:function dZe(e){let{backend:n,inputs:t,attrs:r}=e,{axis:i,keepDims:a}=r,{x:s}=t,o=n.dataIdMap.get(s.dataId).id,l=o,c=s,{transposed:u,axes:h,originalAxes:d,inputWasTransposed:p}=jc(s,i,n),f=h;if(p){let _=n.dataIdMap.get(u.dataId).id;_!==o&&(c=u,l=_,f=I.getInnerMostAxes(f.length,c.shape.length))}I.assertAxesAreInnerMostDims("sum",f,c.shape.length);let[m,g]=I.computeOutAndReduceShapes(c.shape,f),y=w.sizeFromShape(g),b=n.makeOutput(m,c.dtype);if(0!==w.sizeFromShape(c.shape)){let _=n.dataIdMap.get(b.dataId).id;eQ(l,y,zt[b.dtype],_)}if(p&&n.disposeData(u.dataId),a){let _=I.expandShapeToKeepDim(b.shape,d);b.shape=_}return b}},pZe=Pt(sh),fZe=Pt(oh),yZe={kernelName:wm,backendName:"wasm",setupFunc:function mZe(e){tQ=e.wasm.cwrap(wm,null,["number","number","number","number","number","number","array","number","number","number"])},kernelFunc:function gZe(e){let{backend:n,inputs:t}=e,{tensor:i,indices:a,updates:s}=t,o=n.makeOutput(i.shape,i.dtype);if(0===w.sizeFromShape(i.shape))return o;let{sliceRank:l,numUpdates:c,sliceSize:u,strides:h,outputSize:d}=a1.calculateShapes(s,a,i.shape),p=n.dataIdMap.get(a.dataId).id,f=n.dataIdMap.get(s.dataId).id,m=n.dataIdMap.get(i.dataId).id,g=new Uint8Array(new Int32Array(h).buffer),y=n.dataIdMap.get(o.dataId).id;return tQ(p,f,zt[s.dtype],l,c,u,g,d,y,m),o}},vZe={kernelName:fc,backendName:"wasm",setupFunc:function bZe(e){nQ=e.wasm.cwrap(fc,null,["number","array","number","array","number","number"])},kernelFunc:function _Ze(e){let{inputs:n,backend:t,attrs:r}=e,{x:i}=n,a=t.dataIdMap.get(i.dataId).id,{reps:s}=r,o=new Array(i.shape.length);for(let d=0;d<o.length;d++)o[d]=i.shape[d]*s[d];let l=new Uint8Array(new Int32Array(i.shape).buffer),c=new Uint8Array(new Int32Array(o).buffer),u=t.makeOutput(o,i.dtype),h=t.dataIdMap.get(u.dataId).id;return nQ(a,l,i.shape.length,c,o.length,zt[u.dtype],h),u}},CZe={kernelName:Tm,backendName:"wasm",setupFunc:function xZe(e){rQ=e.wasm.cwrap(Tm,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:({inputs:e,backend:n,attrs:t})=>{let{x:r}=e,{k:i,sorted:a}=t,s=n.dataIdMap.get(r.dataId).id,o=new Uint8Array(new Int32Array(r.shape).buffer),l=r.shape.slice();l[l.length-1]=i;let c=n.makeOutput(l,r.dtype),u=n.dataIdMap.get(c.dataId).id,h=n.makeOutput(l,"int32"),d=n.dataIdMap.get(h.dataId).id;return rQ(s,o,r.shape.length,zt[r.dtype],i,a,u,d),[c,h]}},IZe={kernelName:Nm,backendName:"wasm",setupFunc:function kZe(e){iQ=e.wasm.cwrap(Nm,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])},kernelFunc:function SZe(e){let D,{backend:n,inputs:t,attrs:r}=e,{image:i,transforms:a}=t,{interpolation:s,fillMode:o,fillValue:l,outputShape:c}=r,[u,h,d,p]=i.shape,[f,m]=c??[h,d],g=[u,f,m,p],y=new Uint8Array(new Int32Array(w.computeStrides(i.shape)).buffer),b=new Uint8Array(new Int32Array(w.computeStrides(g)).buffer),_=n.makeOutput(g,i.dtype),v=n.dataIdMap.get(_.dataId).id,x=n.dataIdMap.get(i.dataId).id,S=n.dataIdMap.get(a.dataId).id,M="nearest"===s?1:2;switch(o){case"constant":default:D=1;break;case"reflect":D=2;break;case"wrap":D=3;break;case"nearest":D=4}return iQ(x,S,a.shape[0]>1,u,f,m,p,d,h,y,i.shape.length-1,b,g.length-1,M,D,l,v),_}},EZe={kernelName:Bb,backendName:"wasm",kernelFunc:function MZe(e){let{inputs:n,attrs:t,backend:r}=e,{axis:i}=t,{x:a}=n,{outputValues:s,outputShape:o,indices:l}=LO(r.readSync(a.dataId),i,a.shape,a.dtype);return[r.makeOutput(o,a.dtype,void 0,s),r.makeOutput([l.length],"int32",void 0,l)]}},AZe={kernelName:Om,backendName:"wasm",kernelFunc:function DZe(e){let{inputs:n,backend:t,attrs:r}=e,{value:i}=n,{axis:a}=r;a<0&&(a+=i.shape.length);let s=i.shape[a],o=i.shape.length,l=new Array(o-1),c=0;for(let p=0;p<o;p++)p!==a&&(l[c++]=i.shape[p]);let u=new Array(s),h=new Array(o).fill(0),d=i.shape.slice();d[a]=1;for(let p=0;p<u.length;p++)h[a]=p,u[p]=Qh({inputs:{x:i},attrs:{begin:h,size:d},backend:t});return u.map(({dataId:p,dtype:f})=>({dataId:p,dtype:f,shape:l}))}},NZe={kernelName:Fm,backendName:"wasm",kernelFunc:function TZe(e){let{inputs:{x:n},backend:t}=e,r=t.makeOutput(n.shape,n.dtype);return t.typedArrayFromHeap(r).fill(0),r}},OZe=[f7e,m7e,g7e,y7e,_7e,w7e,A7e,O7e,F7e,R7e,P7e,L7e,$7e,B7e,V7e,H7e,Q7e,G7e,X7e,n9e,l9e,d9e,p9e,m9e,g9e,y9e,v9e,x9e,k9e,M9e,A9e,O9e,P9e,L9e,$9e,z9e,W9e,q9e,Y9e,J9e,nqe,aqe,lqe,dqe,fqe,mqe,bqe,vqe,xqe,wqe,Cqe,kqe,Sqe,Eqe,Dqe,Tqe,Fqe,Lqe,Vqe,Hqe,Gqe,Kqe,Yqe,C7e,Zqe,Qqe,Jqe,nKe,iKe,sKe,cKe,dKe,uKe,pKe,fKe,gKe,bKe,xKe,kKe,MKe,DKe,NKe,RKe,$Ke,zKe,WKe,qKe,YKe,QKe,tXe,sXe,oXe,cXe,uXe,pXe,gXe,_Xe,xXe,kXe,IXe,EXe,OZ,NXe,RXe,$Xe,VXe,UXe,HXe,WXe,jXe,J7e,KXe,ZXe,eYe,rYe,sYe,cYe,uYe,dYe,fYe,yYe,vYe,xYe,kYe,SYe,IYe,MYe,s9e,rXe,EYe,AYe,OYe,PYe,$Ye,VYe,HYe,jYe,GYe,qYe,XYe,QYe,tZe,rZe,aZe,oZe,cZe,hZe,pZe,fZe,yZe,vZe,CZe,IZe,M7e,EZe,AZe,NZe];for(let e of OZe)Hb(e);var bF=Q();bF.registerFlag("WASM_HAS_SIMD_SUPPORT",R(function*(){try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch{return!1}})),bF.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",R(function*(){if(bF.get("IS_NODE"))return!1;try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}}));var aQ=cc(ive()),FZe=cc(ave()),sQ=cc(sve()),oQ=aQ.default||aQ,RZe=sQ.default||sQ,lQ=class extends gb{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(uQ),xF=this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new aw(this,ys())}write(e,n,t){let r={id:this.dataIdNextNumber++};return this.move(r,e,n,t,1),r}numDataIds(){return this.dataIdMap.numDataIds()}time(e){return R(function*(){let n=w.now();return e(),{kernelMs:w.now()-n}})()}move(e,n,t,r,i){let a=this.dataIdNextNumber++;if("string"===r)return void this.dataIdMap.set(e,{id:a,stringBytes:n,shape:t,dtype:r,memoryOffset:null,refCount:i});let s=w.sizeFromShape(t),o=s*w.bytesPerElement(r),l=this.wasm._malloc(o)>>>0;this.dataIdMap.set(e,{id:a,memoryOffset:l,shape:t,dtype:r,refCount:i}),this.wasm.tfjs.registerTensor(a,s,l),null!=n&&this.wasm.HEAPU8.set(new Uint8Array(n.buffer,n.byteOffset,o),l)}read(e){var n=this;return R(function*(){return n.readSync(e)})()}readSync(e,n,t){let{memoryOffset:r,dtype:i,shape:a,stringBytes:s}=this.dataIdMap.get(e);if("string"===i)return null!=n&&0!==n||!(null==t||t>=s.length)?s.slice(n,t):s;n=n||0,t=t||w.sizeFromShape(a);let o=w.bytesPerElement(i);return function $Ze(e,n){switch(n){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error(`Unknown dtype ${n}`)}}(this.wasm.HEAPU8.slice(r+n*o,r+t*o).buffer,i)}disposeData(e,n=!1){if(this.dataIdMap.has(e)){let t=this.dataIdMap.get(e);if(t.refCount--,!n&&t.refCount>0)return!1;this.wasm._free(t.memoryOffset),this.wasm.tfjs.disposeData(t.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){let n=this.dataIdMap.get(e);null!=n&&n.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,n,t,r){let i;if(null==t)i=this.write(r??null,e,n);else{let a=this.dataIdNextNumber++;i={id:a},this.dataIdMap.set(i,{id:a,memoryOffset:t,shape:e,dtype:n,refCount:1});let s=w.sizeFromShape(e);this.wasm.tfjs.registerTensor(a,s,t)}return{dataId:i,shape:e,dtype:n}}typedArrayFromHeap({shape:e,dtype:n,dataId:t}){let r=this.wasm.HEAPU8.buffer,{memoryOffset:i}=this.dataIdMap.get(t),a=w.sizeFromShape(e);switch(n){case"float32":return new Float32Array(r,i,a);case"int32":return new Int32Array(r,i,a);case"bool":return new Uint8Array(r,i,a);default:throw new Error(`Unknown dtype ${n}`)}}};function cQ(e,n,t){if(null!=DC)return DC;let r="tfjs-backend-wasm.wasm";return e&&n?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),null!=J_&&null!=J_[r]?J_[r]:t+r}function _F(){return _F=R(function*(){let[e,n]=yield Promise.all([Q().getAsync("WASM_HAS_SIMD_SUPPORT"),Q().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((t,r)=>{let i={locateFile:(o,l)=>{if(o.endsWith(".worker.js")){let c=FZe.wasmWorkerContents.replace(/\n/g,"\\n"),u=new Blob([c],{type:"application/javascript"});return URL.createObjectURL(u)}return o.endsWith(".wasm")?cQ(e,n,Q_??l):l+o}};vF&&(i.instantiateWasm=function PZe(e){return(n,t)=>(w.fetch(e,{credentials:"same-origin"}).then(r=>{r.ok||n.env.a(`failed to load wasm binary file at '${e}'`),r.arrayBuffer().then(i=>{WebAssembly.instantiate(i,n).then(a=>{t(a.instance,a.module)})})}),{})}(cQ(e,n,Q_??"")));let s,a=!1;i.onAbort=()=>{a||ev||(ev=!0,r({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},n&&e&&null==DC?(i.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+oQ.toString()],{type:"text/javascript"}),s=oQ(i)):s=RZe(i),s.then(o=>{a=!0,ev=!1,o.tfjs={init:o.cwrap("init",null,[]),initWithThreadsCount:o.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:o.cwrap("get_threads_count","number",[]),registerTensor:o.cwrap("register_tensor",null,["number","number","number"]),disposeData:o.cwrap("dispose_data",null,["number"]),dispose:o.cwrap("dispose",null,[])},t({wasm:o})}).catch(r)})}),_F.apply(this,arguments)}var BZe=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],DC=null,Q_=null,J_={},ev=!1,vF=!1;function VZe(e,n=!1){if(tD("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),ev)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");DC=e,vF=n}function zZe(e,n=!1){if(ev)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)Q_=e;else{J_=e;let t=BZe.filter(r=>null==J_[r]);if(t.length>0)throw new Error(`There were no entries found for the following binaries: ${t.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}vF=n}var uQ=-1,xF=-1;function UZe(e){uQ=e}function HZe(){if(-1===xF)throw new Error("WASM backend not initialized.");return xF}var WZe="4.16.0";Nw("wasm",R(function*(){let{wasm:e}=yield function LZe(){return _F.apply(this,arguments)}();return new lQ(e)}),2);var YZe={tfjs:"4.16.0","tfjs-core":"4.16.0","tfjs-converter":"4.16.0","tfjs-backend-cpu":"4.16.0","tfjs-backend-webgl":"4.16.0","tfjs-backend-wasm":"4.16.0"},AC={};function qc(e,n,t=!1){if(e.beginPath(),n.slice(1).forEach(({x:r,y:i},a)=>{let s=n[a];e.moveTo(s.x,s.y),e.lineTo(r,i)}),t){let r=n[n.length-1],i=n[0];if(!r||!i)return;e.moveTo(r.x,r.y),e.lineTo(i.x,i.y)}e.stroke()}O2(AC,{AnchorPosition:()=>kQ,DrawBox:()=>IQ,DrawBoxOptions:()=>SQ,DrawFaceLandmarks:()=>zQ,DrawFaceLandmarksOptions:()=>VQ,DrawTextField:()=>AF,DrawTextFieldOptions:()=>DF,drawContour:()=>qc,drawDetections:()=>cQe,drawFaceExpressions:()=>kQe,drawFaceLandmarks:()=>IQe}),O2({},{computeReshapedDimensions:()=>fQ,getCenterPoint:()=>NC,isDimensions:()=>CF,isEven:()=>wF,isFloat:()=>pQ,isTensor:()=>kg,isTensor1D:()=>QZe,isTensor2D:()=>hQ,isTensor3D:()=>tv,isTensor4D:()=>El,isValidNumber:()=>Kc,isValidProbablitiy:()=>OC,range:()=>Sg,round:()=>TC});var Jh=class Eie{constructor(n,t){if(!Kc(n)||!Kc(t))throw new Error(`Dimensions.constructor - expected width and height to be valid numbers, instead have ${JSON.stringify({width:n,height:t})}`);this._width=n,this._height=t}get width(){return this._width}get height(){return this._height}reverse(){return new Eie(1/this.width,1/this.height)}};function kg(e,n){return e instanceof gt&&e.shape.length===n}function QZe(e){return kg(e,1)}function hQ(e){return kg(e,2)}function tv(e){return kg(e,3)}function El(e){return kg(e,4)}function pQ(e){return e%1!=0}function wF(e){return e%2==0}function TC(e,n=2){let t=10**n;return Math.floor(e*t)/t}function CF(e){return e&&e.width&&e.height}function fQ({width:e,height:n},t){let r=t/Math.max(n,e);return new Jh(Math.round(e*r),Math.round(n*r))}function NC(e){return e.reduce((n,t)=>n.add(t),new bn(0,0)).div(new bn(e.length,e.length))}function Sg(e,n,t){return Array(e).fill(0).map((r,i)=>n+i*t)}function Kc(e){return!!e&&e!==1/0&&e!==-1/0&&!Number.isNaN(e)||0===e}function OC(e){return Kc(e)&&e>=0&&e<=1}var bn=class _p{constructor(n,t){this._x=n,this._y=t}get x(){return this._x}get y(){return this._y}add(n){return new _p(this.x+n.x,this.y+n.y)}sub(n){return new _p(this.x-n.x,this.y-n.y)}mul(n){return new _p(this.x*n.x,this.y*n.y)}div(n){return new _p(this.x/n.x,this.y/n.y)}abs(){return new _p(Math.abs(this.x),Math.abs(this.y))}magnitude(){return Math.sqrt(this.x**2+this.y**2)}floor(){return new _p(Math.floor(this.x),Math.floor(this.y))}},Xc=class ro{static isRect(n){return!!n&&[n.x,n.y,n.width,n.height].every(Kc)}static assertIsValidBox(n,t,r=!1){if(!ro.isRect(n))throw new Error(`${t} - invalid box: ${JSON.stringify(n)}, expected object with properties x, y, width, height`);if(!r&&(n.width<0||n.height<0))throw new Error(`${t} - width (${n.width}) and height (${n.height}) must be positive numbers`)}constructor(n,t=!0){let r=n||{},i=[r.left,r.top,r.right,r.bottom].every(Kc),a=[r.x,r.y,r.width,r.height].every(Kc);if(!a&&!i)throw new Error(`Box.constructor - expected box to be IBoundingBox | IRect, instead have ${JSON.stringify(r)}`);let[s,o,l,c]=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top];ro.assertIsValidBox({x:s,y:o,width:l,height:c},"Box.constructor",t),this._x=s,this._y=o,this._width=l,this._height=c}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get area(){return this.width*this.height}get topLeft(){return new bn(this.left,this.top)}get topRight(){return new bn(this.right,this.top)}get bottomLeft(){return new bn(this.left,this.bottom)}get bottomRight(){return new bn(this.right,this.bottom)}round(){let[n,t,r,i]=[this.x,this.y,this.width,this.height].map(a=>Math.round(a));return new ro({x:n,y:t,width:r,height:i})}floor(){let[n,t,r,i]=[this.x,this.y,this.width,this.height].map(a=>Math.floor(a));return new ro({x:n,y:t,width:r,height:i})}toSquare(){let{x:n,y:t,width:r,height:i}=this,a=Math.abs(r-i);return r<i&&(n-=a/2,r+=a),i<r&&(t-=a/2,i+=a),new ro({x:n,y:t,width:r,height:i})}rescale(n){let t=CF(n)?n.width:n,r=CF(n)?n.height:n;return new ro({x:this.x*t,y:this.y*r,width:this.width*t,height:this.height*r})}pad(n,t){let[r,i,a,s]=[this.x-n/2,this.y-t/2,this.width+n,this.height+t];return new ro({x:r,y:i,width:a,height:s})}clipAtImageBorders(n,t){let{x:r,y:i,right:a,bottom:s}=this,o=Math.max(r,0),l=Math.max(i,0),u=s-l,h=Math.min(a-o,n-o),d=Math.min(u,t-l);return new ro({x:o,y:l,width:h,height:d}).floor()}shift(n,t){let{width:r,height:i}=this;return new ro({x:this.x+n,y:this.y+t,width:r,height:i})}padAtBorders(n,t){let r=this.width+1,i=this.height+1,o=r,l=i,c=this.left,u=this.top,h=this.right,d=this.bottom;return h>t&&(o=-h+t+r,h=t),d>n&&(l=-d+n+i,d=n),c<1&&(l=2-c,c=1),u<1&&(l=2-u,u=1),{dy:1,edy:l,dx:1,edx:o,y:u,ey:d,x:c,ex:h,w:r,h:i}}calibrate(n){return new ro({left:this.left+n.left*this.width,top:this.top+n.top*this.height,right:this.right+n.right*this.width,bottom:this.bottom+n.bottom*this.height}).toSquare().round()}},mQ=class extends Xc{constructor(e,n,t,r,i=!1){super({left:e,top:n,right:t,bottom:r},i)}},gQ=class Die{constructor(n,t,r,i,a){this._imageDims=new Jh(a.width,a.height),this._score=n,this._classScore=t,this._className=r,this._box=new Xc(i).rescale(this._imageDims)}get score(){return this._score}get classScore(){return this._classScore}get className(){return this._className}get box(){return this._box}get imageDims(){return this._imageDims}get imageWidth(){return this.imageDims.width}get imageHeight(){return this.imageDims.height}get relativeBox(){return new Xc(this._box).rescale(this.imageDims.reverse())}forSize(n,t){return new Die(this.score,this.classScore,this.className,this.relativeBox,{width:n,height:t})}},Ss=class Aie extends gQ{constructor(n,t,r){super(n,n,"",t,r)}forSize(n,t){let{score:r,relativeBox:i,imageDims:a}=super.forSize(n,t);return new Aie(r,i,a)}};function JZe(e,n,t=!0){let a=Math.max(0,Math.min(e.right,n.right)-Math.max(e.left,n.left))*Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top));return t?a/(e.area+n.area-a):a/Math.min(e.area,n.area)}function nv(e,n){return G(()=>{let[t,r,i]=n,a=ba([...e.shape.slice(0,3),1],t,"float32"),s=ba([...e.shape.slice(0,3),1],r,"float32"),o=ba([...e.shape.slice(0,3),1],i,"float32"),l=fn([a,s,o],3);return Ee(e,l)})}function kF(e){return 1/(1+Math.exp(-e))}var Yr,yQ=class extends Xc{constructor(e,n,t,r,i=!1){super({x:e,y:n,width:t,height:r},i)}},rv=class{constructor(e,n,t=new bn(0,0)){let{width:r,height:i}=n;this._imgDims=new Jh(r,i),this._shift=t,this._positions=e.map(a=>a.mul(new bn(r,i)).add(t))}get shift(){return new bn(this._shift.x,this._shift.y)}get imageWidth(){return this._imgDims.width}get imageHeight(){return this._imgDims.height}get positions(){return this._positions}get relativePositions(){return this._positions.map(e=>e.sub(this._shift).div(new bn(this.imageWidth,this.imageHeight)))}forSize(e,n){return new this.constructor(this.relativePositions,{width:e,height:n})}shiftBy(e,n){return new this.constructor(this.relativePositions,this._imgDims,new bn(e,n))}shiftByPoint(e){return this.shiftBy(e.x,e.y)}align(e,n={}){if(e){let i=e instanceof Ss?e.box.floor():new Xc(e);return this.shiftBy(i.x,i.y).align(null,n)}let{useDlibAlignment:t,minBoxPadding:r}={useDlibAlignment:!1,minBoxPadding:.2,...n};return t?this.alignDlib():this.alignMinBbox(r)}alignDlib(){let e=this.getRefPointsForAlignment(),[n,t,r]=e,i=u=>r.sub(u).magnitude(),a=(i(n)+i(t))/2,s=Math.floor(a/.45),o=NC(e),l=Math.floor(Math.max(0,o.x-.5*s)),c=Math.floor(Math.max(0,o.y-.43*s));return new yQ(l,c,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+c))}alignMinBbox(e){let n=function eQe(e){let n=e.map(o=>o.x),t=e.map(o=>o.y),r=n.reduce((o,l)=>l<o?l:o,1/0),i=t.reduce((o,l)=>l<o?l:o,1/0),a=n.reduce((o,l)=>o<l?l:o,0),s=t.reduce((o,l)=>o<l?l:o,0);return new mQ(r,i,a,s)}(this.positions);return n.pad(n.width*e,n.height*e)}getRefPointsForAlignment(){throw new Error("getRefPointsForAlignment not implemented by base class")}},bQ=class extends rv{getJawOutline(){return this.positions.slice(0,17)}getLeftEyeBrow(){return this.positions.slice(17,22)}getRightEyeBrow(){return this.positions.slice(22,27)}getNose(){return this.positions.slice(27,36)}getLeftEye(){return this.positions.slice(36,42)}getRightEye(){return this.positions.slice(42,48)}getMouth(){return this.positions.slice(48,68)}getRefPointsForAlignment(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(NC)}};function iv(e){return e.detection instanceof Ss}function RC(e,n){return{...e,detection:n}}function vQ(){let e=window.fetch;if(!e)throw new Error("fetch - missing fetch implementation for browser environment");return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:()=>document.createElement("canvas"),createImageElement:()=>document.createElement("img"),createVideoElement:()=>document.createElement("video"),fetch:e,readFile:()=>{throw new Error("readFile - filesystem not available for browser environment")}}}function SF(){return"object"==typeof global&&typeof process<"u"&&null!=process.versions&&null!=process.versions.node}function xQ(e){let n="";if(!e&&SF())try{e=P_e("fs")}catch(t){n=t.toString()}return{readFile:e?t=>new Promise((r,i)=>{e.readFile(t,(a,s)=>a?i(a):r(s))}):()=>{throw new Error(`readFile - failed to require fs in nodejs environment with error: ${n}`)}}}function wQ(){let e=global.Canvas||global.HTMLCanvasElement,n=global.Image||global.HTMLImageElement,t=global.Video||global.HTMLVideoElement,s=global.fetch,o=xQ();return{Canvas:e||class{},CanvasRenderingContext2D:global.CanvasRenderingContext2D||class{},Image:n||class{},ImageData:global.ImageData||class{},Video:global.HTMLVideoElement||class{},createCanvasElement:()=>{if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:()=>{if(n)return new n;throw new Error("createImageElement - missing Image implementation for nodejs environment")},createVideoElement:()=>{if(t)return new t;throw new Error("createVideoElement - missing Video implementation for nodejs environment")},fetch:s,...o}}function CQ(){return"object"==typeof window&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function IF(e){Yr=e}function MF(){return CQ()?IF(vQ()):SF()?IF(wQ()):null}var _i={getEnv:function oQe(){if(!Yr)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Yr},setEnv:IF,initialize:MF,createBrowserEnv:vQ,createFileSystem:xQ,createNodejsEnv:wQ,monkeyPatch:function lQe(e){if(Yr||MF(),!Yr)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");let{Canvas:n=Yr.Canvas,Image:t=Yr.Image}=e;Yr.Canvas=n,Yr.Image=t,Yr.createCanvasElement=e.createCanvasElement||(()=>new n),Yr.createImageElement=e.createImageElement||(()=>new t),Yr.ImageData=e.ImageData||Yr.ImageData,Yr.Video=e.Video||Yr.Video,Yr.fetch=e.fetch||Yr.fetch,Yr.readFile=e.readFile||Yr.readFile},isBrowser:CQ,isNodejs:SF};function EF(e){return _i.isNodejs()||"string"!=typeof e?e:document.getElementById(e)}function Yc(e){let{Canvas:n,CanvasRenderingContext2D:t}=_i.getEnv();if(e instanceof t)return e;let r=EF(e);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");let i=r.getContext("2d",{willReadFrequently:!0});if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}MF();var kQ=(e=>(e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e))(kQ||{}),DF=class{constructor(e={}){let{anchorPosition:n,backgroundColor:t,fontColor:r,fontSize:i,fontStyle:a,padding:s}=e;this.anchorPosition=n||"TOP_LEFT",this.backgroundColor=t||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=i||14,this.fontStyle=a||"Georgia",this.padding=s||4}},AF=class Nie{constructor(n,t,r={}){this.text="string"==typeof n?[n]:n instanceof Nie?n.text:n,this.anchor=t,this.options=new DF(r)}measureWidth(n){let{padding:t}=this.options;return this.text.map(r=>n.measureText(r).width).reduce((r,i)=>r<i?i:r,0)+2*t}measureHeight(){let{fontSize:n,padding:t}=this.options;return this.text.length*n+2*t}getUpperLeft(n,t){let{anchorPosition:r}=this.options,i="BOTTOM_RIGHT"===r||"TOP_RIGHT"===r,a="BOTTOM_LEFT"===r||"BOTTOM_RIGHT"===r,s=this.measureWidth(n),o=this.measureHeight(),l=i?this.anchor.x-s:this.anchor.x,c=a?this.anchor.y-o:this.anchor.y;if(t){let{width:u,height:h}=t;return{x:Math.max(Math.min(l,u-s),0),y:Math.max(Math.min(c,h-o),0)}}return{x:l,y:c}}draw(n){let t=EF(n),r=Yc(t),{backgroundColor:i,fontColor:a,fontSize:s,fontStyle:o,padding:l}=this.options;r.font=`${s}px ${o}`;let c=this.measureWidth(r),u=this.measureHeight();r.fillStyle=i;let h=this.getUpperLeft(r,t);r.fillRect(h.x,h.y,c,u),r.fillStyle=a,this.text.forEach((d,p)=>{r.fillText(d,l+h.x,l+h.y+(p+1)*s)})}},SQ=class{constructor(e={}){let{boxColor:n,lineWidth:t,label:r,drawLabelOptions:i}=e;this.boxColor=n||"rgba(0, 0, 255, 1)",this.lineWidth=t||2,this.label=r,this.drawLabelOptions=new DF({anchorPosition:"BOTTOM_LEFT",backgroundColor:this.boxColor,...i})}},IQ=class{constructor(e,n={}){this.box=new Xc(e),this.options=new SQ(n)}draw(e){let n=Yc(e),{boxColor:t,lineWidth:r}=this.options,{x:i,y:a,width:s,height:o}=this.box;n.strokeStyle=t,n.lineWidth=r,n.strokeRect(i,a,s,o);let{label:l}=this.options;l&&new AF([l],{x:i-r/2,y:a},this.options.drawLabelOptions).draw(e)}};function cQe(e,n){(Array.isArray(n)?n:[n]).forEach(t=>{let r=t instanceof Ss?t.score:iv(t)?t.detection.score:void 0,i=t instanceof Ss?t.box:iv(t)?t.detection.box:new Xc(t),a=r?`${TC(r)}`:void 0;new IQ(i,{label:a}).draw(e)})}function MQ(e){let{Image:n,Video:t}=_i.getEnv();return e instanceof n&&e.complete||e instanceof t&&e.readyState>=3}function TF(e){let{Image:n,Video:t}=_i.getEnv();return e instanceof n?new Jh(e.naturalWidth,e.naturalHeight):e instanceof t?new Jh(e.videoWidth,e.videoHeight):new Jh(e.width,e.height)}function PC({width:e,height:n}){let{createCanvasElement:t}=_i.getEnv(),r=t();return r.width=e,r.height=n,r}function NF(e,n){let{ImageData:t}=_i.getEnv();if(!(e instanceof t||MQ(e)))throw new Error("createCanvasFromMedia - media has not finished loading yet");let{width:r,height:i}=n||TF(e),a=PC({width:r,height:i});return e instanceof t?Yc(a).putImageData(e,0,0):Yc(a).drawImage(e,0,0,r,i),a}function OF(){return OF=R(function*(e,n){let t=n||_i.getEnv().createCanvasElement(),[r,i,a]=e.shape.slice(El(e)?1:0),s=G(()=>e.as3D(r,i,a).toInt());return yield y_.toPixels(s,t),s.dispose(),t}),OF.apply(this,arguments)}function EQ(e){let{Image:n,Canvas:t,Video:r}=_i.getEnv();return e instanceof n||e instanceof t||e instanceof r}var LC=class{constructor(e,n=!1){if(this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],this._inputSize=0,!Array.isArray(e))throw new Error(`NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have ${e}`);this._treatAsBatchInput=n,this._batchSize=e.length,e.forEach((t,r)=>{if(tv(t))return this._imageTensors[r]=t,void(this._inputDimensions[r]=t.shape);if(El(t)){let a=t.shape[0];if(1!==a)throw new Error(`NetInput - tf.Tensor4D with batchSize ${a} passed, but not supported in input array`);return this._imageTensors[r]=t,void(this._inputDimensions[r]=t.shape.slice(1))}let i=t instanceof _i.getEnv().Canvas?t:NF(t);this._canvases[r]=i,this._inputDimensions[r]=[i.height,i.width,3]})}get imageTensors(){return this._imageTensors}get canvases(){return this._canvases}get isBatchInput(){return this.batchSize>1||this._treatAsBatchInput}get batchSize(){return this._batchSize}get inputDimensions(){return this._inputDimensions}get inputSize(){return this._inputSize}get reshapedInputDimensions(){return Sg(this.batchSize,0,1).map((e,n)=>this.getReshapedInputDimensions(n))}getInput(e){return this.canvases[e]||this.imageTensors[e]}getInputDimensions(e){return this._inputDimensions[e]}getInputHeight(e){return this._inputDimensions[e][0]}getInputWidth(e){return this._inputDimensions[e][1]}getReshapedInputDimensions(e){if("number"!=typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return fQ({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)}toBatchTensor(e,n=!0){return this._inputSize=e,G(()=>{let t=Sg(this.batchSize,0,1).map(r=>{let i=this.getInput(r);if(i instanceof gt){let a=El(i)?i:jr(i);return a=function nQe(e,n=!1){return G(()=>{let[t,r]=e.shape.slice(1);if(t===r)return e;let i=Math.abs(t-r),a=Math.round(i*(n?.5:1)),s=t>r?2:1,o=h=>{let d=e.shape.slice();return d[s]=h,ba(d,0,"float32")},l=o(a),c=i-l.shape[s],u=[n&&c?o(c):null,e,l].filter(h=>!!h).map(h=>xe(h,"float32"));return fn(u,s)})}(a,n),(a.shape[1]!==e||a.shape[2]!==e)&&(a=ja.resizeBilinear(a,[e,e],!1,!1)),a.as3D(e,e,3)}if(i instanceof _i.getEnv().Canvas)return y_.fromPixels(function pQe(e,n,t=!1){let{Image:r,Canvas:i}=_i.getEnv();if(!(e instanceof r||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");if(n<=0)return PC({width:1,height:1});let a=TF(e),s=n/Math.max(a.height,a.width),o=s*a.width,l=s*a.height,c=PC({width:n,height:n}),u=e instanceof i?e:NF(e),h=Math.abs(o-l)/2,d=t&&o<l?h:0,p=t&&l<o?h:0;return u.width>0&&u.height>0&&Yc(c).drawImage(u,d,p,o,l),c}(i,e,n));throw new Error(`toBatchTensor - at batchIdx ${r}, expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have ${i}`)});return vr(t.map(r=>xe(r,"float32"))).as4D(this.batchSize,e,e,3)})}};function Bi(e){return FF.apply(this,arguments)}function FF(){return FF=R(function*(e){if(e instanceof LC)return e;let n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("toNetInput - empty array passed as input");let t=i=>Array.isArray(e)?` at input index ${i}:`:"",r=n.map(EF);return r.forEach((i,a)=>{if(!EQ(i)&&!tv(i)&&!El(i))throw"string"==typeof n[a]?new Error(`toNetInput -${t(a)} string passed, but could not resolve HTMLElement for element id ${n[a]}`):new Error(`toNetInput -${t(a)} expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id`);if(El(i)){let s=i.shape[0];if(1!==s)throw new Error(`toNetInput -${t(a)} tf.Tensor4D with batchSize ${s} passed, but not supported in input array`)}}),yield Promise.all(r.map(i=>EQ(i)&&function uQe(e){return new Promise((n,t)=>{function r(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",i),a.currentTarget.removeEventListener("error",r),t(a))}function i(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",i),a.currentTarget.removeEventListener("error",r),n(a))}(e instanceof _i.getEnv().Canvas||MQ(e))&&n(null),e.addEventListener("load",i),e.addEventListener("error",r)})}(i))),new LC(r,Array.isArray(e))}),FF.apply(this,arguments)}function RF(e,n){return PF.apply(this,arguments)}function PF(){return PF=R(function*(e,n){let{Canvas:t}=_i.getEnv(),r=e;if(!(e instanceof t)){let a=yield Bi(e);if(a.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");let s=a.getInput(0);r=s instanceof t?s:yield function hQe(e,n){return OF.apply(this,arguments)}(s)}let i=Yc(r);return n.map(a=>a instanceof Ss?a.forSize(r.width,r.height).box.floor():a).map(a=>a.clipAtImageBorders(r.width,r.height)).map(({x:a,y:s,width:o,height:l})=>{let c=PC({width:o,height:l});return o>0&&l>0&&Yc(c).putImageData(i.getImageData(a,s,o,l),0,0),c})}),PF.apply(this,arguments)}function LF(e,n){return $F.apply(this,arguments)}function $F(){return $F=R(function*(e,n){if(!tv(e)&&!El(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(El(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return G(()=>{let[t,r,i]=e.shape.slice(El(e)?1:0);return n.map(a=>a instanceof Ss?a.forSize(r,t).box:a).map(a=>a.clipAtImageBorders(r,t)).filter(a=>a.width>0&&a.height>0).map(({x:a,y:s,width:o,height:l})=>Zm(e.as3D(t,r,i),[s,a,0],[l,o,i]))})}),$F.apply(this,arguments)}function BF(){return BF=R(function*(e,n){let{fetch:t}=_i.getEnv(),r=yield t(e,n);if(!(r.status<400))throw new Error(`failed to fetch: (${r.status}) ${r.statusText}, from url: ${r.url}`);return r}),BF.apply(this,arguments)}function zF(){return zF=R(function*(e){return(yield function $C(e,n){return BF.apply(this,arguments)}(e)).json()}),zF.apply(this,arguments)}function DQ(e,n){let t=`${n}-weights_manifest.json`;if(!e)return{modelBaseUri:"",manifestUri:t};if("/"===e)return{modelBaseUri:"/",manifestUri:`/${t}`};let r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",i=(e=e.replace(r,"")).split("/").filter(o=>o),a=e.endsWith(".json")?i[i.length-1]:t,s=r+(e.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return s=e.startsWith("/")?`/${s}`:s,{modelBaseUri:s,manifestUri:"/"===s?`/${a}`:`${s}/${a}`}}function WF(){return WF=R(function*(e,n){let{manifestUri:t,modelBaseUri:r}=DQ(e,n),i=yield function fQe(e){return zF.apply(this,arguments)}(t);return ai.loadWeights(i,r)}),WF.apply(this,arguments)}var Zc=class{constructor(e){this._params=void 0,this._paramMappings=[],this._name=e}get params(){return this._params}get paramMappings(){return this._paramMappings}get isLoaded(){return!!this.params}getParamFromPath(e){let{obj:n,objProp:t}=this.traversePropertyPath(e);return n[t]}reassignParamFromPath(e,n){let{obj:t,objProp:r}=this.traversePropertyPath(e);t[r].dispose(),t[r]=n}getParamList(){return this._paramMappings.map(({paramPath:e})=>({path:e,tensor:this.getParamFromPath(e)}))}getTrainableParams(){return this.getParamList().filter(e=>e.tensor instanceof ph)}getFrozenParams(){return this.getParamList().filter(e=>!(e.tensor instanceof ph))}variable(){this.getFrozenParams().forEach(({path:e,tensor:n})=>{this.reassignParamFromPath(e,n.variable())})}freeze(){this.getTrainableParams().forEach(({path:e,tensor:n})=>{let t=Ti(n.dataSync());n.dispose(),this.reassignParamFromPath(e,t)})}dispose(e=!0){this.getParamList().forEach(n=>{if(e&&n.tensor.isDisposed)throw new Error(`param tensor has already been disposed for path ${n.path}`);n.tensor.dispose()}),this._params=void 0}serializeParams(){return new Float32Array(this.getParamList().map(({tensor:e})=>Array.from(e.dataSync())).reduce((e,n)=>e.concat(n)))}load(e){var n=this;return R(function*(){e instanceof Float32Array?n.extractWeights(e):yield n.loadFromUri(e)})()}loadFromUri(e){var n=this;return R(function*(){if(e&&"string"!=typeof e)throw new Error(`${n._name}.loadFromUri - expected model uri`);let t=yield function gQe(e,n){return WF.apply(this,arguments)}(e,n.getDefaultModelName());n.loadFromWeightMap(t)})()}loadFromDisk(e){var n=this;return R(function*(){if(e&&"string"!=typeof e)throw new Error(`${n._name}.loadFromDisk - expected model file path`);let{readFile:t}=_i.getEnv(),{manifestUri:r,modelBaseUri:i}=DQ(e,n.getDefaultModelName()),s=ai.weightsLoaderFactory(c=>Promise.all(c.map(u=>t(u).then(h=>"string"==typeof h?Buffer.from(h):h.buffer)))),o=JSON.parse((yield t(r)).toString()),l=yield s(o,i);n.loadFromWeightMap(l)})()}loadFromWeightMap(e){let{paramMappings:n,params:t}=this.extractParamsFromWeightMap(e);this._paramMappings=n,this._params=t}extractWeights(e){let{paramMappings:n,params:t}=this.extractParams(e);this._paramMappings=n,this._params=t}traversePropertyPath(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");let n=e.split("/").reduce((i,a)=>{if(!i.nextObj.hasOwnProperty(a))throw new Error(`traversePropertyPath - object does not have property ${a}, for path ${e}`);return{obj:i.nextObj,objProp:a,nextObj:i.nextObj[a]}},{nextObj:this.params}),{obj:t,objProp:r}=n;if(!(t&&r&&t[r]instanceof gt))throw new Error(`traversePropertyPath - parameter is not a tensor, for path ${e}`);return{obj:t,objProp:r}}};function Xa(e,n,t){return G(()=>{let r=Ym(e,n.depthwise_filter,n.pointwise_filter,t,"same");return r=se(r,n.bias),r})}function jF(e,n,t=!1){return G(()=>{let r=an(t?se(Oi(e,n.conv0.filters,[2,2],"same"),n.conv0.bias):Xa(e,n.conv0,[2,2])),i=Xa(r,n.conv1,[1,1]),s=Xa(an(se(r,i)),n.conv2,[1,1]);return an(se(r,se(i,s)))})}function BC(e,n,t=!1,r=!0){return G(()=>{let i=an(t?se(Oi(e,n.conv0.filters,r?[2,2]:[1,1],"same"),n.conv0.bias):Xa(e,n.conv0,r?[2,2]:[1,1])),a=Xa(i,n.conv1,[1,1]),o=Xa(an(se(i,a)),n.conv2,[1,1]),c=Xa(an(se(i,se(a,o))),n.conv3,[1,1]);return an(se(i,se(a,se(o,c))))})}function av(e,n,t="same",r=!1){return G(()=>{let i=se(Oi(e,n.filters,[1,1],t),n.bias);return r?an(i):i})}function Qc(e,n){Object.keys(e).forEach(t=>{n.some(r=>r.originalPath===t)||e[t].dispose()})}function GF(e,n){return(t,r,i,a)=>{let s=Dc(e(t*r*i*i),[i,i,t,r]),o=Qt(e(r));return n.push({paramPath:`${a}/filters`},{paramPath:`${a}/bias`}),{filters:s,bias:o}}}function AQ(e,n){return(t,r,i)=>{let a=So(e(t*r),[t,r]),s=Qt(e(r));return n.push({paramPath:`${i}/weights`},{paramPath:`${i}/bias`}),{weights:a,bias:s}}}var TQ=class{constructor(e,n,t){this.depthwise_filter=e,this.pointwise_filter=n,this.bias=t}};function qF(e,n){return(t,r,i)=>{let a=Dc(e(9*t),[3,3,t,1]),s=Dc(e(t*r),[1,1,t,r]),o=Qt(e(r));return n.push({paramPath:`${i}/depthwise_filter`},{paramPath:`${i}/pointwise_filter`},{paramPath:`${i}/bias`}),new TQ(a,s,o)}}function KF(e){return n=>{let t=e(`${n}/depthwise_filter`,4),r=e(`${n}/pointwise_filter`,4),i=e(`${n}/bias`,1);return new TQ(t,r,i)}}function ep(e,n){return(t,r,i)=>{let a=e[t];if(!kg(a,r))throw new Error(`expected weightMap[${t}] to be a Tensor${r}D, instead have ${a}`);return n.push({originalPath:t,paramPath:i||t}),a}}function Jc(e){let n=e;return{extractWeights:function t(i){let a=n.slice(0,i);return n=n.slice(i),a},getRemainingWeights:function r(){return n}}}function NQ(e,n){let t=GF(e,n),r=qF(e,n);function i(s,o,l,c=!1){return{conv0:c?t(s,o,3,`${l}/conv0`):r(s,o,`${l}/conv0`),conv1:r(o,o,`${l}/conv1`),conv2:r(o,o,`${l}/conv2`)}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:function a(s,o,l,c=!1){let{conv0:u,conv1:h,conv2:d}=i(s,o,l,c);return{conv0:u,conv1:h,conv2:d,conv3:r(o,o,`${l}/conv3`)}}}}function OQ(e){return n=>({filters:e(`${n}/filters`,4),bias:e(`${n}/bias`,1)})}function FQ(e,n){let t=ep(e,n),r=OQ(t),i=KF(t);return{extractDenseBlock3Params:function a(o,l=!1){return{conv0:l?r(`${o}/conv0`):i(`${o}/conv0`),conv1:i(`${o}/conv1`),conv2:i(`${o}/conv2`)}},extractDenseBlock4Params:function s(o,l=!1){return{conv0:l?r(`${o}/conv0`):i(`${o}/conv0`),conv1:i(`${o}/conv1`),conv2:i(`${o}/conv2`),conv3:i(`${o}/conv3`)}}}}var RQ=class extends Zc{constructor(){super("FaceFeatureExtractor")}forwardInput(e){let{params:n}=this;if(!n)throw new Error("FaceFeatureExtractor - load model before inference");return G(()=>{let i=BC(nv(xe(e.toBatchTensor(112,!0),"float32"),[122.782,117.001,104.298]).div(255),n.dense0,!0);return i=BC(i,n.dense1),i=BC(i,n.dense2),i=BC(i,n.dense3),i=gl(i,[7,7],[2,2],"valid"),i})}forward(e){var n=this;return R(function*(){return n.forwardInput(yield Bi(e))})()}getDefaultModelName(){return"face_feature_extractor_model"}extractParamsFromWeightMap(e){return function _Qe(e){let n=[],{extractDenseBlock4Params:t}=FQ(e,n),r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2"),dense3:t("dense3")};return Qc(e,n),{params:r,paramMappings:n}}(e)}extractParams(e){return function bQe(e){let n=[],{extractWeights:t,getRemainingWeights:r}=Jc(e),{extractDenseBlock4Params:i}=NQ(t,n),a=i(3,32,"dense0",!0),s=i(32,64,"dense1"),o=i(64,128,"dense2"),l=i(128,256,"dense3");if(0!==r().length)throw new Error(`weights remaing after extract: ${r().length}`);return{paramMappings:n,params:{dense0:a,dense1:s,dense2:o,dense3:l}}}(e)}};function XF(e,n){return G(()=>se(Ct(e,n.weights),n.bias))}function PQ(e){let n={},t={};return Object.keys(e).forEach(r=>{(r.startsWith("fc")?t:n)[r]=e[r]}),{featureExtractorMap:n,classifierMap:t}}var LQ=class extends Zc{constructor(e,n){super(e),this._faceFeatureExtractor=n}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){let{params:n}=this;if(!n)throw new Error(`${this._name} - load model before inference`);return G(()=>{let t=e instanceof LC?this.faceFeatureExtractor.forwardInput(e):e;return XF(t.as2D(t.shape[0],-1),n.fc)})}dispose(e=!0){this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){let{params:n,paramMappings:t}=this.extractClassifierParams(e);this._params=n,this._paramMappings=t}extractClassifierParams(e){return function vQe(e,n,t){let r=[],{extractWeights:i,getRemainingWeights:a}=Jc(e),s=AQ(i,r)(n,t,"fc");if(0!==a().length)throw new Error(`weights remaing after extract: ${a().length}`);return{paramMappings:r,params:{fc:s}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())}extractParamsFromWeightMap(e){let{featureExtractorMap:n,classifierMap:t}=PQ(e);return this.faceFeatureExtractor.loadFromWeightMap(n),function xQe(e){let n=[],t=ep(e,n),i={fc:function r(a){return{weights:t(`${a}/weights`,2),bias:t(`${a}/bias`,1)}}("fc")};return Qc(e,n),{params:i,paramMappings:n}}(t)}extractParams(e){let n=this.getClassifierChannelsIn(),t=this.getClassifierChannelsOut(),r=t*n+t,i=e.slice(0,e.length-r),a=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(a)}},$Q=["neutral","happy","sad","angry","fearful","disgusted","surprised"],YF=class{constructor(e){if(this.neutral=0,this.happy=0,this.sad=0,this.angry=0,this.fearful=0,this.disgusted=0,this.surprised=0,7!==e.length)throw new Error(`FaceExpressions.constructor - expected probabilities.length to be 7, have: ${e.length}`);$Q.forEach((n,t)=>{this[n]=e[t]})}asSortedArray(){return $Q.map(e=>({expression:e,probability:this[e]})).sort((e,n)=>n.probability-e.probability)}};function kQe(e,n,t=.1,r){(Array.isArray(n)?n:[n]).forEach(i=>{let a=i instanceof YF?i:function CQe(e){return e.expressions instanceof YF}(i)?i.expressions:void 0;if(!a)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");let s=a.asSortedArray().filter(l=>l.probability>t),o=iv(i)?i.detection.box.bottomLeft:r||new bn(0,0);new AF(s.map(l=>`${l.expression} (${TC(l.probability)})`),o).draw(e)})}function ZF(e){return iv(e)&&e.landmarks instanceof rv&&e.unshiftedLandmarks instanceof rv&&e.alignedRect instanceof Ss}function QF(e,n){let{box:t}=e.detection,r=n.shiftBy(t.x,t.y),i=r.align(),{imageDims:a}=e.detection,s=new Ss(e.detection.score,i.rescale(a.reverse()),a),o=function SQe(e){let n=l=>180*l/Math.PI,t=(l,c)=>Math.sqrt((l.x-c.x)**2+(l.y-c.y)**2),r={roll:void 0,pitch:void 0,yaw:void 0};if(!e||!e.positions||68!==e.positions.length)return r;let o=e.positions;return r.roll=((l,c)=>{let u=Math.hypot(c.x-l.x,c.y-l.y),d=Math.asin((c.y-l.y)/u),p=n(d);return Math.floor(90-p)*(c.x-l.x<0?-1:1)})(o[27],o[66]),r.pitch=((l,c,u)=>{let h=t(l,u),d=new bn((l.x+u.x)/2,(l.y+u.y)/2),p=t(c,d),f=Math.atan(p/h);return Math.floor(n(f))*(d.y-c.y<0?-1:1)})(o[14],o[30],o[2]),r.yaw=(c=o[33],u=o[2],Math.floor(o[14].x-c.x)-Math.floor(c.x-u.x)),r;var c,u}(n);return{...e,landmarks:r,unshiftedLandmarks:n,alignedRect:s,angle:o}}var VQ=class{constructor(e={}){let{drawLines:n=!0,drawPoints:t=!0,lineWidth:r,lineColor:i,pointSize:a,pointColor:s}=e;this.drawLines=n,this.drawPoints=t,this.lineWidth=r||1,this.pointSize=a||2,this.lineColor=i||"rgba(0, 255, 255, 1)",this.pointColor=s||"rgba(255, 0, 255, 1)"}},zQ=class{constructor(e,n={}){this.faceLandmarks=e,this.options=new VQ(n)}draw(e){let n=Yc(e),{drawLines:t,drawPoints:r,lineWidth:i,lineColor:a,pointSize:s,pointColor:o}=this.options;t&&this.faceLandmarks instanceof bQ&&(n.strokeStyle=a,n.lineWidth=i,qc(n,this.faceLandmarks.getJawOutline()),qc(n,this.faceLandmarks.getLeftEyeBrow()),qc(n,this.faceLandmarks.getRightEyeBrow()),qc(n,this.faceLandmarks.getNose()),qc(n,this.faceLandmarks.getLeftEye(),!0),qc(n,this.faceLandmarks.getRightEye(),!0),qc(n,this.faceLandmarks.getMouth(),!0)),r&&(n.strokeStyle=o,n.fillStyle=o,this.faceLandmarks.positions.forEach(c=>{n.beginPath(),n.arc(c.x,c.y,s,0,2*Math.PI),n.fill()}))}};function IQe(e,n){(Array.isArray(n)?n:[n]).forEach(t=>{let r=t instanceof rv?t:ZF(t)?t.landmarks:void 0;if(!r)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new zQ(r).draw(e)})}function UQ(e,n,t){return se(Oi(e,n.filters,t,"same"),n.bias)}function JF(e,n,t=!0){let r=t?an(e):e;return r=Xa(r,n.separable_conv0,[1,1]),r=Xa(an(r),n.separable_conv1,[1,1]),r=Gr(r,[3,3],[2,2],"same"),r=se(r,UQ(e,n.expansion_conv,[2,2])),r}var NQe=class extends Zc{constructor(e){super("TinyXception"),this._numMainBlocks=e}forwardInput(e){let{params:n}=this;if(!n)throw new Error("TinyXception - load model before inference");return G(()=>{let r=nv(xe(e.toBatchTensor(112,!0),"float32"),[122.782,117.001,104.298]).div(255),i=an(UQ(r,n.entry_flow.conv_in,[2,2]));return i=JF(i,n.entry_flow.reduction_block_0,!1),i=JF(i,n.entry_flow.reduction_block_1),Sg(this._numMainBlocks,0,1).forEach(a=>{i=function TQe(e,n){let t=Xa(an(e),n.separable_conv0,[1,1]);return t=Xa(an(t),n.separable_conv1,[1,1]),t=Xa(an(t),n.separable_conv2,[1,1]),t=se(t,e),t}(i,n.middle_flow[`main_block_${a}`])}),i=JF(i,n.exit_flow.reduction_block),i=an(Xa(i,n.exit_flow.separable_conv,[1,1])),i})}forward(e){var n=this;return R(function*(){return n.forwardInput(yield Bi(e))})()}getDefaultModelName(){return"tiny_xception_model"}extractParamsFromWeightMap(e){return function AQe(e,n){let t=[],{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:a,extractMainBlockParams:s}=function DQe(e,n){let t=ep(e,n),r=OQ(t),i=KF(t);return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:function a(o){return{separable_conv0:i(`${o}/separable_conv0`),separable_conv1:i(`${o}/separable_conv1`),expansion_conv:r(`${o}/expansion_conv`)}},extractMainBlockParams:function s(o){return{separable_conv0:i(`${o}/separable_conv0`),separable_conv1:i(`${o}/separable_conv1`),separable_conv2:i(`${o}/separable_conv2`)}}}}(e,t),u={conv_in:r("entry_flow/conv_in"),reduction_block_0:a("entry_flow/reduction_block_0"),reduction_block_1:a("entry_flow/reduction_block_1")},h={};Sg(n,0,1).forEach(m=>{h[`main_block_${m}`]=s(`middle_flow/main_block_${m}`)});let f={reduction_block:a("exit_flow/reduction_block"),separable_conv:i("exit_flow/separable_conv")};return Qc(e,t),{params:{entry_flow:u,middle_flow:h,exit_flow:f},paramMappings:t}}(e,this._numMainBlocks)}extractParams(e){return function EQe(e,n){let t=[],{extractWeights:r,getRemainingWeights:i}=Jc(e),{extractConvParams:a,extractSeparableConvParams:s,extractReductionBlockParams:o,extractMainBlockParams:l}=function MQe(e,n){let t=GF(e,n),r=qF(e,n);return{extractConvParams:t,extractSeparableConvParams:r,extractReductionBlockParams:function i(s,o,l){return{separable_conv0:r(s,o,`${l}/separable_conv0`),separable_conv1:r(o,o,`${l}/separable_conv1`),expansion_conv:t(s,o,1,`${l}/expansion_conv`)}},extractMainBlockParams:function a(s,o){return{separable_conv0:r(s,s,`${o}/separable_conv0`),separable_conv1:r(s,s,`${o}/separable_conv1`),separable_conv2:r(s,s,`${o}/separable_conv2`)}}}}(r,t),d={conv_in:a(3,32,3,"entry_flow/conv_in"),reduction_block_0:o(32,64,"entry_flow/reduction_block_0"),reduction_block_1:o(64,128,"entry_flow/reduction_block_1")},p={};Sg(n,0,1).forEach(y=>{p[`main_block_${y}`]=l(128,`middle_flow/main_block_${y}`)});let g={reduction_block:o(128,256,"exit_flow/reduction_block"),separable_conv:s(256,512,"exit_flow/separable_conv")};if(0!==i().length)throw new Error(`weights remaing after extract: ${i().length}`);return{paramMappings:t,params:{entry_flow:d,middle_flow:p,exit_flow:g}}}(e,this._numMainBlocks)}},RQe=(e=>(e.FEMALE="female",e.MALE="male",e))(RQe||{}),HQ=class extends LQ{postProcess(e,n,t){let r=t.map(({width:a,height:s})=>{let o=n/Math.max(s,a);return{width:a*o,height:s*o}}),i=r.length;return G(()=>{let a=(c,u)=>vr([ba([68],c,"float32"),ba([68],u,"float32")],1).as2D(1,136).as1D(),s=(c,u)=>{let{width:h,height:d}=r[c];return u(h,d)?Math.abs(h-d)/2:0};return e.mul(ba([i,136],n,"float32")).sub(vr(Array.from(Array(i),(c,u)=>a((c=>s(c,(u,h)=>u<h))(u),(c=>s(c,(u,h)=>h<u))(u))))).div(vr(Array.from(Array(i),(c,u)=>a(r[u].width,r[u].height))))})}forwardInput(e){return G(()=>{let n=this.runNet(e);return this.postProcess(n,e.inputSize,e.inputDimensions.map(([t,r])=>({height:t,width:r})))})}forward(e){var n=this;return R(function*(){return n.forwardInput(yield Bi(e))})()}detectLandmarks(e){var n=this;return R(function*(){let t=yield Bi(e),r=G(()=>tr(n.forwardInput(t))),i=yield Promise.all(r.map(function(){var a=R(function*(s,o){let l=Array.from(s.dataSync()),c=l.filter((h,d)=>wF(d)),u=l.filter((h,d)=>!wF(d));return new bQ(Array(68).fill(0).map((h,d)=>new bn(c[d],u[d])),{height:t.getInputHeight(o),width:t.getInputWidth(o)})});return function(s,o){return a.apply(this,arguments)}}()));return r.forEach(a=>a.dispose()),t.isBatchInput?i:i[0]})()}getClassifierChannelsOut(){return 136}},VQe=class extends Zc{constructor(){super("TinyFaceFeatureExtractor")}forwardInput(e){let{params:n}=this;if(!n)throw new Error("TinyFaceFeatureExtractor - load model before inference");return G(()=>{let i=jF(nv(xe(e.toBatchTensor(112,!0),"float32"),[122.782,117.001,104.298]).div(255),n.dense0,!0);return i=jF(i,n.dense1),i=jF(i,n.dense2),i=gl(i,[14,14],[2,2],"valid"),i})}forward(e){var n=this;return R(function*(){return n.forwardInput(yield Bi(e))})()}getDefaultModelName(){return"face_feature_extractor_tiny_model"}extractParamsFromWeightMap(e){return function $Qe(e){let n=[],{extractDenseBlock3Params:t}=FQ(e,n),r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2")};return Qc(e,n),{params:r,paramMappings:n}}(e)}extractParams(e){return function BQe(e){let n=[],{extractWeights:t,getRemainingWeights:r}=Jc(e),{extractDenseBlock3Params:i}=NQ(t,n),a=i(3,32,"dense0",!0),s=i(32,64,"dense1"),o=i(64,128,"dense2");if(0!==r().length)throw new Error(`weights remaing after extract: ${r().length}`);return{paramMappings:n,params:{dense0:a,dense1:s,dense2:o}}}(e)}};function eR(e,n,t,r,i="same"){let{filters:a,bias:s}=n.conv,o=Oi(e,a,t,i);return o=se(o,s),o=function UQe(e,n){return se(U(e,n.weights),n.biases)}(o,n.scale),r?an(o):o}function WQ(e,n){return eR(e,n,[1,1],!1)}function jQ(e,n){return eR(e,n,[2,2],!0,"valid")}function WQe(e,n){function a(o,l,c,u){let h=function r(o,l,c,u){let h=function t(o,l,c){let u=e(o),h=u.length/(l*c*c);if(pQ(h))throw new Error(`depth has to be an integer: ${h}, weights.length: ${u.length}, numFilters: ${l}, filterSize: ${c}`);return G(()=>kt(Dc(u,[l,h,c,c]),[2,3,1,0]))}(o,l,c),d=Qt(e(l));return n.push({paramPath:`${u}/filters`},{paramPath:`${u}/bias`}),{filters:h,bias:d}}(o,l,c,`${u}/conv`),d=function i(o,l){let c=Qt(e(o)),u=Qt(e(o));return n.push({paramPath:`${l}/weights`},{paramPath:`${l}/biases`}),{weights:c,biases:u}}(l,`${u}/scale`);return{conv:h,scale:d}}return{extractConvLayerParams:a,extractResidualLayerParams:function s(o,l,c,u,h=!1){return{conv1:a((h?.5:1)*o,l,c,`${u}/conv1`),conv2:a(o,l,c,`${u}/conv2`)}}}}function Ro(e,n){let t=function HQe(e,n){return eR(e,n,[1,1],!0)}(e,n.conv1);return t=WQ(t,n.conv2),t=se(t,e),t=an(t),t}function VC(e,n){let t=jQ(e,n.conv1);t=WQ(t,n.conv2);let r=gl(e,2,2,"valid"),i=Kn(r.shape),a=r.shape[3]!==t.shape[3];if(r.shape[1]!==t.shape[1]||r.shape[2]!==t.shape[2]){let s=[...t.shape];s[1]=1;let o=Kn(s);t=fn([t,o],1);let l=[...t.shape];l[2]=1;let c=Kn(l);t=fn([t,c],2)}return r=a?fn([r,i],3):r,t=se(r,t),t=an(t),t}function Po(e,n,t){return G(()=>{let r=Oi(e,n.filters,t,"same");return r=se(r,n.batch_norm_offset),gi(r,0,6)})}function nJe(e,n,t){let r=e.arraySync(),i=Math.min(r[n][0],r[n][2]),a=Math.min(r[n][1],r[n][3]),s=Math.max(r[n][0],r[n][2]),o=Math.max(r[n][1],r[n][3]),l=Math.min(r[t][0],r[t][2]),c=Math.min(r[t][1],r[t][3]),u=Math.max(r[t][0],r[t][2]),h=Math.max(r[t][1],r[t][3]),d=(s-i)*(o-a),p=(u-l)*(h-c);if(d<=0||p<=0)return 0;let f=Math.max(i,l),m=Math.max(a,c),g=Math.min(s,u),y=Math.min(o,h),b=Math.max(g-f,0)*Math.max(y-m,0);return b/(d+p-b)}function Ig(e,n){return G(()=>{let t=e.shape[0];return{boxPredictionEncoding:H(av(e,n.box_encoding_predictor),[t,-1,1,4]),classPrediction:H(av(e,n.class_predictor),[t,-1,3])}})}var eu=class{constructor({minConfidence:e,maxResults:n}={}){if(this._name="SsdMobilenetv1Options",this._minConfidence=e||.5,this._maxResults=n||100,"number"!=typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(`${this._name} - expected minConfidence to be a number between 0 and 1`);if("number"!=typeof this._maxResults)throw new Error(`${this._name} - expected maxResults to be a number`)}get minConfidence(){return this._minConfidence}get maxResults(){return this._maxResults}},uJe=[new bn(.738768,.874946),new bn(2.42204,2.65704),new bn(4.30971,7.04493),new bn(10.246,4.59428),new bn(12.6868,11.8741)],dJe=[new bn(1.603231,2.094468),new bn(6.041143,7.080126),new bn(2.882459,3.518061),new bn(4.266906,5.178857),new bn(9.041765,10.66308)],hJe=[117.001,114.697,97.404],zC=e=>"number"==typeof e;function tR(e){return G(()=>{let n=U(e,He(.10000000149011612));return se(an(Ee(e,n)),n)})}function tu(e,n){return G(()=>{let t=js(e,[[0,0],[1,1],[1,1],[0,0]]);return t=Oi(t,n.conv.filters,[1,1],"valid"),t=Ee(t,n.bn.sub),t=U(t,n.bn.truediv),t=se(t,n.conv.bias),tR(t)})}function nu(e,n){return G(()=>{let t=js(e,[[0,0],[1,1],[1,1],[0,0]]);return t=Ym(t,n.depthwise_filter,n.pointwise_filter,[1,1],"valid"),t=se(t,n.bias),tR(t)})}var UC=class{constructor({inputSize:e,scoreThreshold:n}={}){if(this._name="TinyYolov2Options",this._inputSize=e||416,this._scoreThreshold=n||.5,"number"!=typeof this._inputSize||this._inputSize%32!=0)throw new Error(`${this._name} - expected inputSize to be a number divisible by 32`);if("number"!=typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(`${this._name} - expected scoreThreshold to be a number between 0 and 1`)}get inputSize(){return this._inputSize}get scoreThreshold(){return this._scoreThreshold}},vJe=(()=>{let e=class Oie extends Zc{constructor(t){super("TinyYolov2"),function mJe(e){if(!e)throw new Error(`invalid config: ${e}`);if("boolean"!=typeof e.withSeparableConvs)throw new Error(`config.withSeparableConvs has to be a boolean, have: ${e.withSeparableConvs}`);if(!zC(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error(`config.iouThreshold has to be a number between [0, 1], have: ${e.iouThreshold}`);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(n=>"string"==typeof n))throw new Error(`config.classes has to be an array class names: string[], have: ${JSON.stringify(e.classes)}`);if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(n=>n||{}).every(n=>zC(n.x)&&zC(n.y)))throw new Error(`config.anchors has to be an array of { x: number, y: number }, have: ${JSON.stringify(e.anchors)}`);if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(zC)))throw new Error(`config.meanRgb has to be an array of shape [number, number, number], have: ${JSON.stringify(e.meanRgb)}`)}(t),this._config=t}get config(){return this._config}get withClassScores(){return this.config.withClassScores||this.config.classes.length>1}get boxEncodingSize(){return 5+(this.withClassScores?this.config.classes.length:0)}runTinyYolov2(t,r){let i=tu(t,r.conv0);return i=Gr(i,[2,2],[2,2],"same"),i=tu(i,r.conv1),i=Gr(i,[2,2],[2,2],"same"),i=tu(i,r.conv2),i=Gr(i,[2,2],[2,2],"same"),i=tu(i,r.conv3),i=Gr(i,[2,2],[2,2],"same"),i=tu(i,r.conv4),i=Gr(i,[2,2],[2,2],"same"),i=tu(i,r.conv5),i=Gr(i,[2,2],[1,1],"same"),i=tu(i,r.conv6),i=tu(i,r.conv7),av(i,r.conv8,"valid",!1)}runMobilenet(t,r){let i=this.config.isFirstLayerConv2d?tR(av(t,r.conv0,"valid",!1)):nu(t,r.conv0);return i=Gr(i,[2,2],[2,2],"same"),i=nu(i,r.conv1),i=Gr(i,[2,2],[2,2],"same"),i=nu(i,r.conv2),i=Gr(i,[2,2],[2,2],"same"),i=nu(i,r.conv3),i=Gr(i,[2,2],[2,2],"same"),i=nu(i,r.conv4),i=Gr(i,[2,2],[2,2],"same"),i=nu(i,r.conv5),i=Gr(i,[2,2],[1,1],"same"),i=r.conv6?nu(i,r.conv6):i,i=r.conv7?nu(i,r.conv7):i,av(i,r.conv8,"valid",!1)}forwardInput(t,r){let{params:i}=this;if(!i)throw new Error("TinyYolov2 - load model before inference");return G(()=>{let a=xe(t.toBatchTensor(r,!1),"float32");return a=this.config.meanRgb?nv(a,this.config.meanRgb):a,a=a.div(255),this.config.withSeparableConvs?this.runMobilenet(a,i):this.runTinyYolov2(a,i)})}forward(t,r){var i=this;return R(function*(){return i.forwardInput(yield Bi(t),r)})()}detect(t,r={}){var i=this;return R(function*(){let{inputSize:a,scoreThreshold:s}=new UC(r),o=yield Bi(t),l=yield i.forwardInput(o,a),c=G(()=>tr(l)[0].expandDims()),u={width:o.getInputWidth(0),height:o.getInputHeight(0)},h=yield i.extractBoxes(c,o.getReshapedInputDimensions(0),s);l.dispose(),c.dispose();let d=h.map(g=>g.box),p=h.map(g=>g.score),f=h.map(g=>g.classScore),m=h.map(g=>i.config.classes[g.label]);return function tQe(e,n,t,r=!0){let i=n.map((s,o)=>({score:s,boxIndex:o})).sort((s,o)=>s.score-o.score).map(s=>s.boxIndex),a=[];for(;i.length>0;){let s=i.pop();a.push(s);let o=i,l=[];for(let c=0;c<o.length;c++)l.push(JZe(e[s],e[o[c]],r));i=i.filter((c,u)=>l[u]<=t)}return a}(d.map(g=>g.rescale(a)),p,i.config.iouThreshold,!0).map(g=>new gQ(p[g],f[g],m[g],d[g],u))})()}getDefaultModelName(){return""}extractParamsFromWeightMap(t){return function _Je(e,n){let s,t=[],{extractConvParams:r,extractConvWithBatchNormParams:i,extractSeparableConvParams:a}=function bJe(e,n){let t=ep(e,n);function i(o){return{filters:t(`${o}/filters`,4),bias:t(`${o}/bias`,1)}}return{extractConvParams:i,extractConvWithBatchNormParams:function a(o){let l=i(`${o}/conv`),c=function r(o){return{sub:t(`${o}/sub`,1),truediv:t(`${o}/truediv`,1)}}(`${o}/bn`);return{conv:l,bn:c}},extractSeparableConvParams:KF(t)}}(e,t);if(n.withSeparableConvs){let o=n.filterSizes&&n.filterSizes.length||9;s={conv0:n.isFirstLayerConv2d?r("conv0"):a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:o>7?a("conv6"):void 0,conv7:o>8?a("conv7"):void 0,conv8:r("conv8")}}else s={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:r("conv8")};return Qc(e,t),{params:s,paramMappings:t}}(t,this.config)}extractParams(t){let r=this.config.filterSizes||Oie.DEFAULT_FILTER_SIZES,i=r?r.length:void 0;if(7!==i&&8!==i&&9!==i)throw new Error(`TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found ${i} filterSizes in config`);return function yJe(e,n,t,r){let u,{extractWeights:i,getRemainingWeights:a}=Jc(e),s=[],{extractConvParams:o,extractConvWithBatchNormParams:l,extractSeparableConvParams:c}=function gJe(e,n){let t=GF(e,n),a=qF(e,n);return{extractConvParams:t,extractConvWithBatchNormParams:function i(s,o,l){let c=t(s,o,3,`${l}/conv`),u=function r(s,o){let l=Qt(e(s)),c=Qt(e(s));return n.push({paramPath:`${o}/sub`},{paramPath:`${o}/truediv`}),{sub:l,truediv:c}}(o,`${l}/bn`);return{conv:c,bn:u}},extractSeparableConvParams:a}}(i,s);if(n.withSeparableConvs){let[h,d,p,f,m,g,y,b,_]=r;u={conv0:n.isFirstLayerConv2d?o(h,d,3,"conv0"):c(h,d,"conv0"),conv1:c(d,p,"conv1"),conv2:c(p,f,"conv2"),conv3:c(f,m,"conv3"),conv4:c(m,g,"conv4"),conv5:c(g,y,"conv5"),conv6:b?c(y,b,"conv6"):void 0,conv7:_?c(b,_,"conv7"):void 0,conv8:o(_||b||y,5*t,1,"conv8")}}else{let[h,d,p,f,m,g,y,b,_]=r;u={conv0:l(h,d,"conv0"),conv1:l(d,p,"conv1"),conv2:l(p,f,"conv2"),conv3:l(f,m,"conv3"),conv4:l(m,g,"conv4"),conv5:l(g,y,"conv5"),conv6:l(y,b,"conv6"),conv7:l(b,_,"conv7"),conv8:o(_,5*t,1,"conv8")}}if(0!==a().length)throw new Error(`weights remaing after extract: ${a().length}`);return{params:u,paramMappings:s}}(t,this.config,this.boxEncodingSize,r)}extractBoxes(t,r,i){var a=this;return R(function*(){let{width:s,height:o}=r,l=Math.max(s,o),c=l/s,u=l/o,h=t.shape[1],d=a.config.anchors.length,[p,f,m]=G(()=>{let _=t.reshape([h,h,d,a.boxEncodingSize]);return[_.slice([0,0,0,0],[h,h,d,4]),_.slice([0,0,0,4],[h,h,d,1]),a.withClassScores?Mc(_.slice([0,0,0,5],[h,h,d,a.config.classes.length]),3):He(0)]}),g=[],y=yield f.array(),b=yield p.array();for(let _=0;_<h;_++)for(let v=0;v<h;v++)for(let x=0;x<d;x++){let S=kF(y[_][v][x][0]);if(!i||S>i){let M=(v+kF(b[_][v][x][0]))/h*c,D=(_+kF(b[_][v][x][1]))/h*u,N=Math.exp(b[_][v][x][2])*a.config.anchors[x].x/h*c,F=Math.exp(b[_][v][x][3])*a.config.anchors[x].y/h*u,O=M-N/2,k=D-F/2,P={row:_,col:v,anchor:x},{classScore:j,label:Z}=a.withClassScores?yield a.extractPredictedClass(m,P):{classScore:1,label:0};g.push({box:new mQ(O,k,O+N,k+F),score:S,classScore:S*j,label:Z,...P})}}return p.dispose(),f.dispose(),m.dispose(),g})()}extractPredictedClass(t,r){var i=this;return R(function*(){let{row:a,col:s,anchor:o}=r,l=yield t.array();return Array(i.config.classes.length).fill(0).map((c,u)=>l[a][s][o][u]).map((c,u)=>({classScore:c,label:u})).reduce((c,u)=>c.classScore>u.classScore?c:u)})()}};return e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e})(),ZQ=vJe,xJe=class extends UC{constructor(){super(...arguments),this._name="TinyFaceDetectorOptions"}},sv=class{then(e){var n=this;return R(function*(){return e(yield n.run())})()}run(){return R(function*(){throw new Error("ComposableTask - run is not implemented")})()}};function HC(e,n,t,r){return nR.apply(this,arguments)}function nR(){return nR=R(function*(e,n,t,r,i=(({alignedRect:a})=>a)){let a=e.map(l=>ZF(l)?i(l):l.detection),s=r||(n instanceof gt?yield LF(n,a):yield RF(n,a)),o=yield t(s);return s.forEach(l=>l instanceof gt&&l.dispose()),o}),nR.apply(this,arguments)}var CJe=[new bn(1.603231,2.094468),new bn(6.041143,7.080126),new bn(2.882459,3.518061),new bn(4.266906,5.178857),new bn(9.041765,10.66308)],kJe=[117.001,114.697,97.404],_n={ssdMobilenetv1:new class extends Zc{constructor(){super("SsdMobilenetv1")}forwardInput(e){let{params:n}=this;if(!n)throw new Error("SsdMobilenetv1 - load model before inference");return G(()=>{let t=xe(e.toBatchTensor(512,!1),"float32"),i=function tJe(e,n){return G(()=>{let t,r=Po(e,n.conv_0,[2,2]);if([n.conv_1,n.conv_2,n.conv_3,n.conv_4,n.conv_5,n.conv_6,n.conv_7,n.conv_8,n.conv_9,n.conv_10,n.conv_11,n.conv_12,n.conv_13].forEach((i,a)=>{let s=a+1,o=function eJe(e){return[2,4,6,12].some(n=>n===e)?[2,2]:[1,1]}(s);r=function JQe(e,n,t){return G(()=>{let r=Ch(e,n.filters,t,"same");return r=xh(r,n.batch_norm_mean,n.batch_norm_variance,n.batch_norm_offset,n.batch_norm_scale,.0010000000474974513),gi(r,0,6)})}(r,i.depthwise_conv,o),r=Po(r,i.pointwise_conv,[1,1]),11===s&&(t=r)}),null===t)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:t}})}(Ee(Te(t,127.5),1),n.mobilenetv1),{boxPredictions:a,classPredictions:s}=function oJe(e,n,t){return G(()=>{let r=Po(e,t.conv_0,[1,1]),i=Po(r,t.conv_1,[2,2]),a=Po(i,t.conv_2,[1,1]),s=Po(a,t.conv_3,[2,2]),o=Po(s,t.conv_4,[1,1]),l=Po(o,t.conv_5,[2,2]),c=Po(l,t.conv_6,[1,1]),u=Po(c,t.conv_7,[2,2]),h=Ig(n,t.box_predictor_0),d=Ig(e,t.box_predictor_1),p=Ig(i,t.box_predictor_2),f=Ig(s,t.box_predictor_3),m=Ig(l,t.box_predictor_4),g=Ig(u,t.box_predictor_5);return{boxPredictions:fn([h.boxPredictionEncoding,d.boxPredictionEncoding,p.boxPredictionEncoding,f.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),classPredictions:fn([h.classPrediction,d.classPrediction,p.classPrediction,f.classPrediction,m.classPrediction,g.classPrediction],1)}})}(i.out,i.conv11,n.prediction_layer);return function sJe(e,n,t){return G(()=>{let r=e.shape[0],i=function aJe(e,n){let{sizes:t,centers:r}=function iJe(e){let n=tr(kt(e,[1,0])),t=[Ee(n[2],n[0]),Ee(n[3],n[1])];return{sizes:t,centers:[se(n[0],Te(t[0],2)),se(n[1],Te(t[1],2))]}}(e),i=tr(kt(n,[1,0])),a=Te(U(yi(Te(i[2],5)),t[0]),2),s=se(U(Te(i[0],10),t[0]),r[0]),o=Te(U(yi(Te(i[3],5)),t[1]),2),l=se(U(Te(i[1],10),t[1]),r[1]);return kt(vr([Ee(s,a),Ee(l,o),se(s,a),se(l,o)]),[1,0])}(H(va(t.extra_dim,[r,1,1]),[-1,4]),H(e,[-1,4]));i=H(i,[r,i.shape[0]/r,4]);let a=bs(At(n,[0,0,1],[-1,-1,-1])),s=At(a,[0,0,0],[-1,-1,1]);return s=H(s,[r,s.shape[1]]),{boxes:tr(i),scores:tr(s)}})}(a,s,n.output_layer)})}forward(e){var n=this;return R(function*(){return n.forwardInput(yield Bi(e))})()}locateFaces(e,n={}){var t=this;return R(function*(){let{maxResults:r,minConfidence:i}=new eu(n),a=yield Bi(e),{boxes:s,scores:o}=t.forwardInput(a),l=s[0],c=o[0];for(let b=1;b<s.length;b++)s[b].dispose(),o[b].dispose();let u=Array.from(c.dataSync()),h=function rJe(e,n,t,r,i){let s=Math.min(t,e.shape[0]),o=n.map((u,h)=>({score:u,boxIndex:h})).filter(u=>u.score>i).sort((u,h)=>h.score-u.score),l=u=>u<=r?1:0,c=[];return o.forEach(u=>{if(c.length>=s)return;let h=u.score;for(let d=c.length-1;d>=0;--d){let p=nJe(e,u.boxIndex,c[d]);if(0!==p&&(u.score*=l(p),u.score<=i))break}h===u.score&&c.push(u.boxIndex)}),c}(l,u,r,.5,i),d=a.getReshapedInputDimensions(0),p=a.inputSize,f=p/d.width,m=p/d.height,g=l.arraySync(),y=h.map(b=>{let[_,v]=[Math.max(0,g[b][0]),Math.min(1,g[b][2])].map(M=>M*m),[x,S]=[Math.max(0,g[b][1]),Math.min(1,g[b][3])].map(M=>M*f);return new Ss(u[b],new yQ(x,_,S-x,v-_),{height:a.getInputHeight(0),width:a.getInputWidth(0)})});return l.dispose(),c.dispose(),y})()}getDefaultModelName(){return"ssd_mobilenetv1_model"}extractParamsFromWeightMap(e){return function ZQe(e){let n=[],{extractMobilenetV1Params:t,extractPredictionLayerParams:r}=function YQe(e,n){let t=ep(e,n);function r(c,u,h){return{filters:t(`${c}/Conv2d_${u}_pointwise/weights`,4,`${h}/filters`),batch_norm_offset:t(`${c}/Conv2d_${u}_pointwise/convolution_bn_offset`,1,`${h}/batch_norm_offset`)}}function i(c){let u=`mobilenetv1/conv_${c}`,h=`MobilenetV1/Conv2d_${c}_depthwise`,d=`${u}/depthwise_conv`,p=`${u}/pointwise_conv`;return{depthwise_conv:{filters:t(`${h}/depthwise_weights`,4,`${d}/filters`),batch_norm_scale:t(`${h}/BatchNorm/gamma`,1,`${d}/batch_norm_scale`),batch_norm_offset:t(`${h}/BatchNorm/beta`,1,`${d}/batch_norm_offset`),batch_norm_mean:t(`${h}/BatchNorm/moving_mean`,1,`${d}/batch_norm_mean`),batch_norm_variance:t(`${h}/BatchNorm/moving_variance`,1,`${d}/batch_norm_variance`)},pointwise_conv:r("MobilenetV1",c,p)}}function s(c,u){return{filters:t(`${c}/weights`,4,`${u}/filters`),bias:t(`${c}/biases`,1,`${u}/bias`)}}function o(c){return{box_encoding_predictor:s(`Prediction/BoxPredictor_${c}/BoxEncodingPredictor`,`prediction_layer/box_predictor_${c}/box_encoding_predictor`),class_predictor:s(`Prediction/BoxPredictor_${c}/ClassPredictor`,`prediction_layer/box_predictor_${c}/class_predictor`)}}return{extractMobilenetV1Params:function a(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}},extractPredictionLayerParams:function l(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:o(0),box_predictor_1:o(1),box_predictor_2:o(2),box_predictor_3:o(3),box_predictor_4:o(4),box_predictor_5:o(5)}}}}(e,n),i=e["Output/extra_dim"];if(n.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!tv(i))throw new Error(`expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have ${i}`);let a={mobilenetv1:t(),prediction_layer:r(),output_layer:{extra_dim:i}};return Qc(e,n),{params:a,paramMappings:n}}(e)}extractParams(e){return function XQe(e){let n=[],{extractWeights:t,getRemainingWeights:r}=Jc(e),{extractMobilenetV1Params:i,extractPredictionLayerParams:a}=function KQe(e,n){function r(l,c,u,h,d){let p=Dc(e(l*c*u*u),[u,u,l,c]),f=Qt(e(c));return n.push({paramPath:`${h}/filters`},{paramPath:`${h}/${d?"batch_norm_offset":"bias"}`}),{filters:p,bias:f}}function i(l,c,u,h){let{filters:d,bias:p}=r(l,c,u,h,!0);return{filters:d,batch_norm_offset:p}}function a(l,c,u){let h=function t(l,c){let u=Dc(e(9*l),[3,3,l,1]),h=Qt(e(l)),d=Qt(e(l)),p=Qt(e(l)),f=Qt(e(l));return n.push({paramPath:`${c}/filters`},{paramPath:`${c}/batch_norm_scale`},{paramPath:`${c}/batch_norm_offset`},{paramPath:`${c}/batch_norm_mean`},{paramPath:`${c}/batch_norm_variance`}),{filters:u,batch_norm_scale:h,batch_norm_offset:d,batch_norm_mean:p,batch_norm_variance:f}}(l,`${u}/depthwise_conv`);return{depthwise_conv:h,pointwise_conv:i(l,c,1,`${u}/pointwise_conv`)}}return{extractMobilenetV1Params:function s(){return{conv_0:i(3,32,3,"mobilenetv1/conv_0"),conv_1:a(32,64,"mobilenetv1/conv_1"),conv_2:a(64,128,"mobilenetv1/conv_2"),conv_3:a(128,128,"mobilenetv1/conv_3"),conv_4:a(128,256,"mobilenetv1/conv_4"),conv_5:a(256,256,"mobilenetv1/conv_5"),conv_6:a(256,512,"mobilenetv1/conv_6"),conv_7:a(512,512,"mobilenetv1/conv_7"),conv_8:a(512,512,"mobilenetv1/conv_8"),conv_9:a(512,512,"mobilenetv1/conv_9"),conv_10:a(512,512,"mobilenetv1/conv_10"),conv_11:a(512,512,"mobilenetv1/conv_11"),conv_12:a(512,1024,"mobilenetv1/conv_12"),conv_13:a(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function o(){return{conv_0:i(1024,256,1,"prediction_layer/conv_0"),conv_1:i(256,512,3,"prediction_layer/conv_1"),conv_2:i(512,128,1,"prediction_layer/conv_2"),conv_3:i(128,256,3,"prediction_layer/conv_3"),conv_4:i(256,128,1,"prediction_layer/conv_4"),conv_5:i(128,256,3,"prediction_layer/conv_5"),conv_6:i(256,64,1,"prediction_layer/conv_6"),conv_7:i(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:r(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:r(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:r(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:r(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:r(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}(t,n),s=i(),o=a(),l={extra_dim:r1(t(20472),[1,5118,4])};if(n.push({paramPath:"output_layer/extra_dim"}),0!==r().length)throw new Error(`weights remaing after extract: ${r().length}`);return{params:{mobilenetv1:s,prediction_layer:o,output_layer:l},paramMappings:n}}(e)}},tinyFaceDetector:new class extends ZQ{constructor(){super({withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:CJe,meanRgb:kJe,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]})}get anchors(){return this.config.anchors}locateFaces(e,n){var t=this;return R(function*(){return(yield t.detect(e,n)).map(r=>new Ss(r.score,r.relativeBox,{width:r.imageWidth,height:r.imageHeight}))})()}getDefaultModelName(){return"tiny_face_detector_model"}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}},tinyYolov2:new class extends ZQ{constructor(e=!0){super({withSeparableConvs:e,iouThreshold:.4,classes:["face"],...e?{anchors:dJe,meanRgb:hJe}:{anchors:uJe,withClassScores:!0}})}get withSeparableConvs(){return this.config.withSeparableConvs}get anchors(){return this.config.anchors}locateFaces(e,n){var t=this;return R(function*(){return(yield t.detect(e,n)).map(r=>new Ss(r.score,r.relativeBox,{width:r.imageWidth,height:r.imageHeight}))})()}getDefaultModelName(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}},faceLandmark68Net:new class extends HQ{constructor(e=new RQ){super("FaceLandmark68Net",e)}getDefaultModelName(){return"face_landmark_68_model"}getClassifierChannelsIn(){return 256}},faceLandmark68TinyNet:new class extends HQ{constructor(e=new VQe){super("FaceLandmark68TinyNet",e)}getDefaultModelName(){return"face_landmark_68_tiny_model"}getClassifierChannelsIn(){return 128}},faceRecognitionNet:new class extends Zc{constructor(){super("FaceRecognitionNet")}forwardInput(e){let{params:n}=this;if(!n)throw new Error("FaceRecognitionNet - load model before inference");return G(()=>{let i=jQ(nv(xe(e.toBatchTensor(150,!0),"float32"),[122.782,117.001,104.298]).div(255),n.conv32_down);i=Gr(i,3,2,"valid"),i=Ro(i,n.conv32_1),i=Ro(i,n.conv32_2),i=Ro(i,n.conv32_3),i=VC(i,n.conv64_down),i=Ro(i,n.conv64_1),i=Ro(i,n.conv64_2),i=Ro(i,n.conv64_3),i=VC(i,n.conv128_down),i=Ro(i,n.conv128_1),i=Ro(i,n.conv128_2),i=VC(i,n.conv256_down),i=Ro(i,n.conv256_1),i=Ro(i,n.conv256_2),i=VC(i,n.conv256_down_out);let a=i.mean([1,2]);return Ct(a,n.fc)})}forward(e){var n=this;return R(function*(){return n.forwardInput(yield Bi(e))})()}computeFaceDescriptor(e){var n=this;return R(function*(){var t;if(null!=(t=e?.shape)&&t.some(s=>s<=0))return new Float32Array(128);let r=yield Bi(e),i=G(()=>tr(n.forwardInput(r))),a=yield Promise.all(i.map(s=>s.data()));return i.forEach(s=>s.dispose()),r.isBatchInput?a:a[0]})()}getDefaultModelName(){return"face_recognition_model"}extractParamsFromWeightMap(e){return function qQe(e){let n=[],{extractConvLayerParams:t,extractResidualLayerParams:r}=function GQe(e,n){let t=ep(e,n);function i(s){let o=t(`${s}/conv/filters`,4),l=t(`${s}/conv/bias`,1),c=function r(s){return{weights:t(`${s}/scale/weights`,1),biases:t(`${s}/scale/biases`,1)}}(s);return{conv:{filters:o,bias:l},scale:c}}return{extractConvLayerParams:i,extractResidualLayerParams:function a(s){return{conv1:i(`${s}/conv1`),conv2:i(`${s}/conv2`)}}}}(e,n),i=t("conv32_down"),a=r("conv32_1"),s=r("conv32_2"),o=r("conv32_3"),l=r("conv64_down"),c=r("conv64_1"),u=r("conv64_2"),h=r("conv64_3"),d=r("conv128_down"),p=r("conv128_1"),f=r("conv128_2"),m=r("conv256_down"),g=r("conv256_1"),y=r("conv256_2"),b=r("conv256_down_out"),{fc:_}=e;if(n.push({originalPath:"fc",paramPath:"fc"}),!hQ(_))throw new Error(`expected weightMap[fc] to be a Tensor2D, instead have ${_}`);let v={conv32_down:i,conv32_1:a,conv32_2:s,conv32_3:o,conv64_down:l,conv64_1:c,conv64_2:u,conv64_3:h,conv128_down:d,conv128_1:p,conv128_2:f,conv256_down:m,conv256_1:g,conv256_2:y,conv256_down_out:b,fc:_};return Qc(e,n),{params:v,paramMappings:n}}(e)}extractParams(e){return function jQe(e){let{extractWeights:n,getRemainingWeights:t}=Jc(e),r=[],{extractConvLayerParams:i,extractResidualLayerParams:a}=WQe(n,r),s=i(4704,32,7,"conv32_down"),o=a(9216,32,3,"conv32_1"),l=a(9216,32,3,"conv32_2"),c=a(9216,32,3,"conv32_3"),u=a(36864,64,3,"conv64_down",!0),h=a(36864,64,3,"conv64_1"),d=a(36864,64,3,"conv64_2"),p=a(36864,64,3,"conv64_3"),f=a(147456,128,3,"conv128_down",!0),m=a(147456,128,3,"conv128_1"),g=a(147456,128,3,"conv128_2"),y=a(589824,256,3,"conv256_down",!0),b=a(589824,256,3,"conv256_1"),_=a(589824,256,3,"conv256_2"),v=a(589824,256,3,"conv256_down_out"),x=G(()=>kt(So(n(32768),[128,256]),[1,0]));if(r.push({paramPath:"fc"}),0!==t().length)throw new Error(`weights remaing after extract: ${t().length}`);return{params:{conv32_down:s,conv32_1:o,conv32_2:l,conv32_3:c,conv64_down:u,conv64_1:h,conv64_2:d,conv64_3:p,conv128_down:f,conv128_1:m,conv128_2:g,conv256_down:y,conv256_1:b,conv256_2:_,conv256_down_out:v,fc:x},paramMappings:r}}(e)}},faceExpressionNet:new class extends LQ{constructor(e=new RQ){super("FaceExpressionNet",e)}forwardInput(e){return G(()=>Mc(this.runNet(e)))}forward(e){var n=this;return R(function*(){return n.forwardInput(yield Bi(e))})()}predictExpressions(e){var n=this;return R(function*(){let t=yield Bi(e),r=yield n.forwardInput(t),i=yield Promise.all(tr(r).map(function(){var s=R(function*(o){let l=o.dataSync();return o.dispose(),l});return function(o){return s.apply(this,arguments)}}()));r.dispose();let a=i.map(s=>new YF(s));return t.isBatchInput?a:a[0]})()}getDefaultModelName(){return"face_expression_model"}getClassifierChannelsIn(){return 256}getClassifierChannelsOut(){return 7}},ageGenderNet:new class extends Zc{constructor(e=new NQe(2)){super("AgeGenderNet"),this._faceFeatureExtractor=e}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){let{params:n}=this;if(!n)throw new Error(`${this._name} - load model before inference`);return G(()=>{let t=e instanceof LC?this.faceFeatureExtractor.forwardInput(e):e,r=gl(t,[7,7],[2,2],"valid").as2D(t.shape[0],-1);return{age:XF(r,n.fc.age).as1D(),gender:XF(r,n.fc.gender)}})}forwardInput(e){return G(()=>{let{age:n,gender:t}=this.runNet(e);return{age:n,gender:Mc(t)}})}forward(e){var n=this;return R(function*(){return n.forwardInput(yield Bi(e))})()}predictAgeAndGender(e){var n=this;return R(function*(){let t=yield Bi(e),r=yield n.forwardInput(t),i=tr(r.age),a=tr(r.gender),s=i.map((l,c)=>({ageTensor:l,genderTensor:a[c]})),o=yield Promise.all(s.map(function(){var l=R(function*({ageTensor:c,genderTensor:u}){let h=c.dataSync()[0],d=u.dataSync()[0],p=d>.5,f=p?"male":"female",m=p?d:1-d;return c.dispose(),u.dispose(),{age:h,gender:f,genderProbability:m}});return function(c){return l.apply(this,arguments)}}()));return r.age.dispose(),r.gender.dispose(),t.isBatchInput?o:o[0]})()}getDefaultModelName(){return"age_gender_model"}dispose(e=!0){this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){let{params:n,paramMappings:t}=this.extractClassifierParams(e);this._params=n,this._paramMappings=t}extractClassifierParams(e){return function OQe(e){let n=[],{extractWeights:t,getRemainingWeights:r}=Jc(e),i=AQ(t,n),a=i(512,1,"fc/age"),s=i(512,2,"fc/gender");if(0!==r().length)throw new Error(`weights remaing after extract: ${r().length}`);return{paramMappings:n,params:{fc:{age:a,gender:s}}}}(e)}extractParamsFromWeightMap(e){let{featureExtractorMap:n,classifierMap:t}=PQ(e);return this.faceFeatureExtractor.loadFromWeightMap(n),function FQe(e){let n=[],t=ep(e,n);function r(a){return{weights:t(`${a}/weights`,2),bias:t(`${a}/bias`,1)}}let i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Qc(e,n),{params:i,paramMappings:n}}(t)}extractParams(e){let n=e.slice(0,e.length-1539),t=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(n),this.extractClassifierParams(t)}}},SJe=class extends sv{constructor(e,n,t){super(),this.parentTask=e,this.input=n,this.extractedFaces=t}},aR=class extends SJe{run(){var e=this;return R(function*(){let n=yield e.parentTask,t=yield HC(n,e.input,function(){var r=R(function*(i){return Promise.all(i.map(a=>_n.faceExpressionNet.predictExpressions(a)))});return function(i){return r.apply(this,arguments)}}(),e.extractedFaces);return n.map((r,i)=>function BQ(e,n){return{...e,expressions:n}}(r,t[i]))})()}withAgeAndGender(){return new lR(this,this.input)}},sR=class extends aR{withAgeAndGender(){return new cR(this,this.input)}withFaceDescriptors(){return new dR(this,this.input)}},IJe=class extends sv{constructor(e,n,t){super(),this.parentTask=e,this.input=n,this.extractedFaces=t}},lR=class extends IJe{run(){var e=this;return R(function*(){let n=yield e.parentTask,t=yield HC(n,e.input,function(){var r=R(function*(i){return Promise.all(i.map(a=>_n.ageGenderNet.predictAgeAndGender(a)))});return function(i){return r.apply(this,arguments)}}(),e.extractedFaces);return n.map((r,i)=>{let{age:a,gender:s,genderProbability:o}=t[i];return function KQ(e,n){return{...e,age:n}}(function XQ(e,n,t){return{...e,gender:n,genderProbability:t}}(r,s,o),a)})})()}withFaceExpressions(){return new aR(this,this.input)}},cR=class extends lR{withFaceExpressions(){return new sR(this,this.input)}withFaceDescriptors(){return new dR(this,this.input)}},MJe=class extends sv{constructor(e,n){super(),this.parentTask=e,this.input=n}},dR=class extends MJe{run(){var e=this;return R(function*(){let n=yield e.parentTask;return(yield HC(n,e.input,t=>Promise.all(t.map(r=>_n.faceRecognitionNet.computeFaceDescriptor(r))),null,t=>t.landmarks.align(null,{useDlibAlignment:!0}))).map((t,r)=>function qQ(e,n){return{...e,descriptor:n}}(n[r],t))})()}withFaceExpressions(){return new sR(this,this.input)}withAgeAndGender(){return new cR(this,this.input)}},EJe=class extends sv{constructor(e,n,t){super(),this.parentTask=e,this.input=n,this.useTinyLandmarkNet=t}get landmarkNet(){return this.useTinyLandmarkNet?_n.faceLandmark68TinyNet:_n.faceLandmark68Net}},DJe=class extends EJe{run(){var e=this;return R(function*(){let n=yield e.parentTask,t=n.map(a=>a.detection),r=e.input instanceof gt?yield LF(e.input,t):yield RF(e.input,t),i=yield Promise.all(r.map(a=>e.landmarkNet.detectLandmarks(a)));return r.forEach(a=>a instanceof gt&&a.dispose()),n.filter((a,s)=>i[s]).map((a,s)=>QF(a,i[s]))})()}withFaceExpressions(){return new sR(this,this.input)}withAgeAndGender(){return new cR(this,this.input)}withFaceDescriptors(){return new dR(this,this.input)}},TJe=class extends sv{constructor(e,n=new eu){super(),this.input=e,this.options=n}},nJ=class extends TJe{run(){var e=this;return R(function*(){let r,{input:n,options:t}=e;if(t instanceof xJe)r=_n.tinyFaceDetector.locateFaces(n,t);else if(t instanceof eu)r=_n.ssdMobilenetv1.locateFaces(n,t);else{if(!(t instanceof UC))throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | TinyYolov2Options");r=_n.tinyYolov2.locateFaces(n,t)}return r})()}runAndExtendWithFaceDetections(){return new Promise((e,n)=>{this.run().then(t=>e(t.map(r=>RC({},r)))).catch(t=>n(t))})}withFaceLandmarks(e=!1){return new DJe(this.runAndExtendWithFaceDetections(),this.input,e)}withFaceExpressions(){return new aR(this.runAndExtendWithFaceDetections(),this.input)}withAgeAndGender(){return new lR(this.runAndExtendWithFaceDetections(),this.input)}};function WC(e,n=new eu){return new nJ(e,n)}function rJ(e,n){let{width:t,height:r}=new Jh(n.width,n.height);if(t<=0||r<=0)throw new Error(`resizeResults - invalid dimensions: ${JSON.stringify({width:t,height:r})}`);if(Array.isArray(e))return e.map(i=>rJ(i,{width:t,height:r}));if(ZF(e)){let i=e.detection.forSize(t,r),a=e.unshiftedLandmarks.forSize(i.box.width,i.box.height);return QF(RC(e,i),a)}return iv(e)?RC(e,e.detection.forSize(t,r)):e instanceof rv||e instanceof Ss?e.forSize(t,r):e}function Jt(e){return null!=e&&"false"!=`${e}`}function ov(e,n=0){return function FJe(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}(e)?Number(e):n}function jC(e){return Array.isArray(e)?e:[e]}function Pr(e){return null==e?"":"string"==typeof e?e:`${e}px`}function Dl(e){return e instanceof Le?e.nativeElement:e}function iJ(e){return Pn((n,t)=>e<=t)}class RJe extends ln{constructor(n,t){super()}schedule(n,t=0){return this}}const GC={setInterval(e,n,...t){const{delegate:r}=GC;return r?.setInterval?r.setInterval(e,n,...t):setInterval(e,n,...t)},clearInterval(e){const{delegate:n}=GC;return(n?.clearInterval||clearInterval)(e)},delegate:void 0};class mR extends RJe{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var r;if(this.closed)return this;this.state=n;const i=this.id,a=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(a,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(a,this.id,t),this}requestAsyncId(n,t,r=0){return GC.setInterval(n.flush.bind(n,this),r)}recycleAsyncId(n,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&GC.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(n,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let i,r=!1;try{this.work(n)}catch(a){r=!0,i=a||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:n,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,rr(r,this),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}}const gR={now:()=>(gR.delegate||Date).now(),delegate:void 0};class lv{constructor(n,t=lv.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,r){return new this.schedulerActionCtor(this,n).schedule(r,t)}}lv.now=gR.now;class yR extends lv{constructor(n,t=lv.now){super(n,t),this.actions=[],this._active=!1}flush(n){const{actions:t}=this;if(this._active)return void t.push(n);let r;this._active=!0;do{if(r=n.execute(n.state,n.delay))break}while(n=t.shift());if(this._active=!1,r){for(;n=t.shift();)n.unsubscribe();throw r}}}const qC=new yR(mR),PJe=qC;function bR(e,n=qC){return jn((t,r)=>{let i=null,a=null,s=null;const o=()=>{if(i){i.unsubscribe(),i=null;const c=a;a=null,r.next(c)}};function l(){const c=s+e,u=n.now();if(u<c)return i=this.schedule(void 0,c-u),void r.add(i);o()}t.subscribe(In(r,c=>{a=c,s=n.now(),i||(i=n.schedule(l,e),r.add(i))},()=>{o(),r.complete()},void 0,()=>{a=i=null}))})}function lr(e){return jn((n,t)=>{di(e).subscribe(In(t,()=>t.complete(),Os)),!t.closed&&n.subscribe(t)})}let _R;try{_R=typeof Intl<"u"&&Intl.v8BreakIterator}catch{_R=!1}let Mg,ci=(()=>{class e{constructor(t){this._platformId=t,this.isBrowser=this._platformId?$u(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!_R)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Ii))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const aJ=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function sJ(){if(Mg)return Mg;if("object"!=typeof document||!document)return Mg=new Set(aJ),Mg;let e=document.createElement("input");return Mg=new Set(aJ.filter(n=>(e.setAttribute("type",n),e.type===n))),Mg}let cv,tp,vR;function Eg(e){return function LJe(){if(null==cv&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>cv=!0}))}finally{cv=cv||!1}return cv}()?e:!!e.capture}function $Je(){if(null==tp){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return tp=!1,tp;if("scrollBehavior"in document.documentElement.style)tp=!0;else{const e=Element.prototype.scrollTo;tp=!!e&&!/\{\s*\[native code\]\s*\}/.test(e.toString())}}return tp}function xR(){let e=typeof document<"u"&&document?document.activeElement:null;for(;e&&e.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}function ru(e){return e.composedPath?e.composedPath()[0]:e.target}function wR(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const oJ=new Set;let np,zJe=(()=>{class e{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):HJe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function UJe(e,n){if(!oJ.has(e))try{np||(np=document.createElement("style"),n&&(np.nonce=n),np.setAttribute("type","text/css"),document.head.appendChild(np)),np.sheet&&(np.sheet.insertRule(`@media ${e} {body{ }}`,0),oJ.add(e))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(ci),Y(iM,8))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function HJe(e){return{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{}}}let XC=(()=>{class e{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new je}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return lJ(jC(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let a=Yy(lJ(jC(t)).map(s=>this._registerQuery(s).observable));return a=Zy(a.pipe(fr(1)),a.pipe(iJ(1),bR(0))),a.pipe(tt(s=>{const o={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{o.matches=o.matches||l,o.breakpoints[c]=l}),o}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),a={observable:new Sn(s=>{const o=l=>this._zone.run(()=>s.next(l));return r.addListener(o),()=>{r.removeListener(o)}}).pipe(ol(r),tt(({matches:s})=>({query:t,matches:s})),lr(this._destroySubject)),mql:r};return this._queries.set(t,a),a}static#e=this.\u0275fac=function(r){return new(r||e)(Y(zJe),Y(We))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function lJ(e){return e.map(n=>n.split(",")).reduce((n,t)=>n.concat(t)).map(n=>n.trim())}function kR(e=0,n,t=PJe){let r=-1;return null!=n&&(m5(n)?t=n:r=n),new Sn(i=>{let a=function WJe(e){return e instanceof Date&&!isNaN(e)}(e)?+e-t.now():e;a<0&&(a=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},a)})}function cJ(e=1/0){let n;n=e&&"object"==typeof e?e:{count:e};const{count:t=1/0,delay:r,resetOnSuccess:i=!1}=n;return t<=0?Go:jn((a,s)=>{let l,o=0;const c=()=>{let u=!1;l=a.subscribe(In(s,h=>{i&&(o=0),s.next(h)},void 0,h=>{if(o++<t){const d=()=>{l?(l.unsubscribe(),l=null,c()):u=!0};if(null!=r){const p="number"==typeof r?kR(r):di(r(h,o)),f=In(s,()=>{f.unsubscribe(),d()},()=>{s.complete()});p.subscribe(f)}else d()}else s.error(h)})),u&&(l.unsubscribe(),l=null,c())};c()})}class YC{}class SR{}class Lo{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(s):this.headers.set(a,[s])}})}:()=>{this.headers=new Map,Object.entries(n).forEach(([t,r])=>{let i;if(i="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(a=>a.toString()),i.length>0){const a=t.toLowerCase();this.headers.set(a,i),this.maybeSetNormalizedName(t,a)}})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof Lo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){const t=new Lo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Lo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){const t=n.name.toLowerCase();switch(n.op){case"a":case"s":let r=n.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(n.name,t);const i=("a"===n.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=n.value;if(a){let s=this.headers.get(t);if(!s)return;s=s.filter(o=>-1===a.indexOf(o)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}}class jJe{encodeKey(n){return uJ(n)}encodeValue(n){return uJ(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const qJe=/%(\d[a-f0-9])/gi,KJe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function uJ(e){return encodeURIComponent(e).replace(qJe,(n,t)=>KJe[t]??n)}function ZC(e){return`${e}`}class iu{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new jJe,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function GJe(e,n){const t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[s,o]=-1==a?[n.decodeKey(i),""]:[n.decodeKey(i.slice(0,a)),n.decodeValue(i.slice(a+1))],l=t.get(s)||[];l.push(o),t.set(s,l)}),t}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{const r=n.fromObject[t],i=Array.isArray(r)?r.map(ZC):[ZC(r)];this.map.set(t,i)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){const t=[];return Object.keys(n).forEach(r=>{const i=n[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const t=this.encoder.encodeKey(n);return this.map.get(n).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const t=new iu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const t=("a"===n.op?this.map.get(n.param):void 0)||[];t.push(ZC(n.value)),this.map.set(n.param,t);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let r=this.map.get(n.param)||[];const i=r.indexOf(ZC(n.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(n.param,r):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class XJe{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function dJ(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function hJ(e){return typeof Blob<"u"&&e instanceof Blob}function pJ(e){return typeof FormData<"u"&&e instanceof FormData}class uv{constructor(n,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function YJe(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Lo),this.context||(this.context=new XJe),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const o=t.indexOf("?");this.urlWithParams=t+(-1===o?"?":o<t.length-1?"&":"")+s}}else this.params=new iu,this.urlWithParams=t}serializeBody(){return null===this.body?null:dJ(this.body)||hJ(this.body)||pJ(this.body)||function ZJe(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof iu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||pJ(this.body)?null:hJ(this.body)?this.body.type||null:dJ(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof iu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const t=n.method||this.method,r=n.url||this.url,i=n.responseType||this.responseType,a=void 0!==n.body?n.body:this.body,s=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,o=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let l=n.headers||this.headers,c=n.params||this.params;const u=n.context??this.context;return void 0!==n.setHeaders&&(l=Object.keys(n.setHeaders).reduce((h,d)=>h.set(d,n.setHeaders[d]),l)),n.setParams&&(c=Object.keys(n.setParams).reduce((h,d)=>h.set(d,n.setParams[d]),c)),new uv(t,r,a,{params:c,headers:l,context:u,reportProgress:o,responseType:i,withCredentials:s})}}var Dg=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Dg||{});class IR{constructor(n,t=200,r="OK"){this.headers=n.headers||new Lo,this.status=void 0!==n.status?n.status:t,this.statusText=n.statusText||r,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class MR extends IR{constructor(n={}){super(n),this.type=Dg.ResponseHeader}clone(n={}){return new MR({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Ag extends IR{constructor(n={}){super(n),this.type=Dg.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new Ag({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class fJ extends IR{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function ER(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let dv=(()=>{class e{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof uv)a=t;else{let l,c;l=i.headers instanceof Lo?i.headers:new Lo(i.headers),i.params&&(c=i.params instanceof iu?i.params:new iu({fromObject:i.params})),a=new uv(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=Ue(a).pipe(vf(l=>this.handler.handle(l)));if(t instanceof uv||"events"===i.observe)return s;const o=s.pipe(Pn(l=>l instanceof Ag));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return o.pipe(tt(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return o.pipe(tt(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return o.pipe(tt(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return o.pipe(tt(l=>l.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new iu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,ER(i,r))}post(t,r,i={}){return this.request("POST",t,ER(i,r))}put(t,r,i={}){return this.request("PUT",t,ER(i,r))}static#e=this.\u0275fac=function(r){return new(r||e)(Y(YC))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();function mJ(e,n){return n(e)}function QJe(e,n){return(t,r)=>n.intercept(t,{handle:i=>e(i,r)})}const eet=new ue(""),hv=new ue(""),gJ=new ue("");function tet(){let e=null;return(n,t)=>(null===e&&(e=(Se(eet,{optional:!0})??[]).reduceRight(QJe,mJ)),e(n,t))}let yJ=(()=>{class e extends YC{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(hv),...this.injector.get(gJ,[])]));this.chain=r.reduceRight((i,a)=>function JJe(e,n,t){return(r,i)=>t.runInContext(()=>n(r,a=>e(a,i)))}(i,a,this.injector),mJ)}return this.chain(t,r=>this.backend.handle(r))}static#e=this.\u0275fac=function(r){return new(r||e)(Y(SR),Y(ho))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();const aet=/^\)\]\}',?\n/;let _J=(()=>{class e{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new oe(-2800,!1);const r=function oet(){const e=()=>{};if(typeof Zone<"u"){const n=Zone.current,t=n.scheduleMacroTask("httpMacroTask",e,void 0,e,e);return()=>n.cancelTask(t)}return e}(),i=this.xhrFactory;return(i.\u0275loadImpl?ur(i.\u0275loadImpl()):Ue(null)).pipe(ri(()=>new Sn(s=>{const o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((y,b)=>o.setRequestHeader(y,b.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const y=t.detectContentTypeHeader();null!==y&&o.setRequestHeader("Content-Type",y)}if(t.responseType){const y=t.responseType.toLowerCase();o.responseType="json"!==y?y:"text"}const l=t.serializeBody();let c=null;const u=()=>{if(null!==c)return c;const y=o.statusText||"OK",b=new Lo(o.getAllResponseHeaders()),_=function set(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(o)||t.url;return c=new MR({headers:b,status:o.status,statusText:y,url:_}),c},h=()=>{let{headers:y,status:b,statusText:_,url:v}=u(),x=null;204!==b&&(x=typeof o.response>"u"?o.responseText:o.response),0===b&&(b=x?200:0);let S=b>=200&&b<300;if("json"===t.responseType&&"string"==typeof x){const M=x;x=x.replace(aet,"");try{x=""!==x?JSON.parse(x):null}catch(D){x=M,S&&(S=!1,x={error:D,text:x})}}S?(s.next(new Ag({body:x,headers:y,status:b,statusText:_,url:v||void 0})),s.complete()):s.error(new fJ({error:x,headers:y,status:b,statusText:_,url:v||void 0}))},d=y=>{const{url:b}=u(),_=new fJ({error:y,status:o.status||0,statusText:o.statusText||"Unknown Error",url:b||void 0});s.error(_),r()};let p=!1;const f=y=>{p||(s.next(u()),p=!0);let b={type:Dg.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(b.total=y.total),"text"===t.responseType&&o.responseText&&(b.partialText=o.responseText),s.next(b)},m=y=>{let b={type:Dg.UploadProgress,loaded:y.loaded};y.lengthComputable&&(b.total=y.total),s.next(b)};o.addEventListener("load",h),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",f),null!==l&&o.upload&&o.upload.addEventListener("progress",m));const g=()=>r();o.addEventListener("loadend",g);try{o.send(l)}catch(y){d(y)}return s.next({type:Dg.Sent}),()=>{o.removeEventListener("loadend",g),o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",h),o.removeEventListener("timeout",d),r(),t.reportProgress&&(o.removeEventListener("progress",f),null!==l&&o.upload&&o.upload.removeEventListener("progress",m)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||e)(Y(cH))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();const DR=new ue("XSRF_ENABLED"),vJ=new ue("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),xJ=new ue("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class wJ{}let det=(()=>{class e{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=QU(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Je),Y(Ii),Y(vJ))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();function het(e,n){const t=e.url.toLowerCase();if(!Se(DR)||"GET"===e.method||"HEAD"===e.method||t.startsWith("http://")||t.startsWith("https://"))return n(e);const r=Se(wJ).getToken(),i=Se(xJ);return null!=r&&!e.headers.has(i)&&(e=e.clone({headers:e.headers.set(i,r)})),n(e)}var rp=function(e){return e[e.Interceptors=0]="Interceptors",e[e.LegacyInterceptors=1]="LegacyInterceptors",e[e.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",e[e.NoXsrfProtection=3]="NoXsrfProtection",e[e.JsonpSupport=4]="JsonpSupport",e[e.RequestsMadeViaParent=5]="RequestsMadeViaParent",e}(rp||{});function pet(...e){const n=[dv,_J,yJ,{provide:YC,useExisting:yJ},{provide:SR,useExisting:_J},{provide:hv,useValue:het,multi:!0},{provide:DR,useValue:!0},{provide:wJ,useClass:det}];for(const t of e)n.push(...t.\u0275providers);return function XI(e){return{\u0275providers:e}}(n)}const CJ=new ue("LEGACY_INTERCEPTOR_FN");function fet(){return function Tg(e,n){return{\u0275kind:e,\u0275providers:n}}(rp.LegacyInterceptors,[{provide:CJ,useFactory:tet},{provide:hv,useExisting:CJ,multi:!0}])}let met=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({providers:[pet(fet())]})}return e})(),xet=(()=>{class e{get progress(){return!!this.tail.length}constructor(t){this._http=t,this.tail=[]}sendRequest(t,r,i={},a={}){t=t.toLocaleLowerCase();const s=localStorage.getItem("accessToken")||"";let o={timeout:20};switch(s&&(o.Authorization=`Bearer ${s}`),t){case"get":return this.request(this._http.get(r,{params:i,headers:o,...a}));case"post":return this.request(this._http.post(r,i,{headers:o,...a}));case"put":return this.request(this._http.put(r,i,{headers:o,...a}));case"delete":return this.request(this._http.delete(r,{headers:o,...a}));default:throw"method not provided"}}request(t){return this.tail.push(t),t.pipe(cJ(0),Jy(()=>{const r=this.tail.indexOf(t);this.tail.splice(r,1)}))}static#e=this.\u0275fac=function(r){return new(r||e)(Y(dv))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function QC(...e){const n=g5(e),{args:t,keys:r}=TH(e),i=new Sn(a=>{const{length:s}=t;if(!s)return void a.complete();const o=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let h=!1;di(t[u]).subscribe(In(a,d=>{h||(h=!0,c--),o[u]=d},()=>l--,void 0,()=>{(!l||!h)&&(c||a.next(r?NH(r,o):o),a.complete())}))}});return n?i.pipe(l2(n)):i}class wet extends je{constructor(n=1/0,t=1/0,r=gR){super(),this._bufferSize=n,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,t)}next(n){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:s}=this;t||(r.push(n),!i&&r.push(a.now()+s)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(n),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let s=0;s<a.length&&!n.closed;s+=r?1:2)n.next(a[s]);return this._checkFinalizedStatuses(n),t}_trimBuffer(){const{_bufferSize:n,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*n;if(n<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const s=t.now();let o=0;for(let l=1;l<r.length&&r[l]<=s;l+=2)o=l;o&&r.splice(0,o+1)}}}var kJ=is(7);class ket{constructor(n){this.translations=n}getTranslation(n){return Ue(this.translations.get(n)||{})}}const SJ=new ue("TRANSLOCO_LOADER");function IJ(e,n){return e&&(Object.prototype.hasOwnProperty.call(e,n)?e[n]:n.split(".").reduce((t,r)=>t?.[r],e))}function MJ(e){return e?Array.isArray(e)?e.length:AR(e)?Object.keys(e).length:e?e.length:0:0}function ip(e){return"string"==typeof e}function AR(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function EJ(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(n,t)=>0==t?n.toLowerCase():n.toUpperCase()).replace(/\s+|_|-|\//g,"")}function TR(e){return null==e}function AJ(e){return!1===TR(e)}function TJ(e){return e&&"string"==typeof e.scope}function NJ(e){return(0,kJ.flatten)(e,{safe:!0})}const Ng=new ue("TRANSLOCO_CONFIG",{providedIn:"root",factory:()=>({defaultLang:"en"})}),JC={defaultLang:"en",reRenderOnLangChange:!1,prodMode:!1,failedRetries:2,availableLangs:[],missingHandler:{logMissingKey:!0,useFallbackTranslation:!1,allowEmpty:!1},flatten:{aot:!1},interpolation:["{{","}}"]};function Net(e=JC){return{...JC,...e}}const OJ=new ue("TRANSLOCO_TRANSPILER");let Oet=(()=>{class e{constructor(t){this.interpolationMatcher=function Fet(e){const[n,t]=e&&e.interpolation?e.interpolation:JC.interpolation;return new RegExp(`${n}(.*?)${t}`,"g")}(t)}transpile(t,r={},i,a){return ip(t)?t.replace(this.interpolationMatcher,(s,o)=>(o=o.trim(),AJ(r[o])?r[o]:AJ(i[o])?this.transpile(i[o],r,i,a):"")):(r&&(AR(t)?t=this.handleObject(t,r,i,a):Array.isArray(t)&&(t=this.handleArray(t,r,i,a))),t)}handleObject(t,r={},i,a){let s=t;return Object.keys(r).forEach(o=>{const l=IJ(s,o),c=IJ(r,o),u=this.transpile(l,c,i,a);s=function Iet(e,n,t){e={...e};const r=n.split("."),i=r.length-1;return r.reduce((a,s,o)=>(a[s]=o===i?t:Array.isArray(a[s])?a[s].slice():{...a[s]},a&&a[s]),e),e}(s,o,u)}),s}handleArray(t,r={},i,a){return t.map(s=>this.transpile(s,r,i,a))}}return e.\u0275fac=function(t){return new(t||e)(Y(Ng,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const FJ=new ue("TRANSLOCO_MISSING_HANDLER");let Ret=(()=>{class e{handle(t,r){return r.missingHandler.logMissingKey&&!r.prodMode&&console.warn(`%c Missing translation for '${t}'`,"font-size: 12px; color: red"),t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const RJ=new ue("TRANSLOCO_INTERCEPTOR");let Pet=(()=>{class e{preSaveTranslation(t){return t}preSaveTranslationKey(t,r){return r}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();const PJ=new ue("TRANSLOCO_FALLBACK_STRATEGY");let FR,Let=(()=>{class e{constructor(t){this.userConfig=t}getNextLangs(){const t=this.userConfig.fallbackLang;if(!t)throw new Error("When using the default fallback, a fallback language must be provided in the config!");return Array.isArray(t)?t:[t]}}return e.\u0275fac=function(t){return new(t||e)(Y(Ng))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e})();function fv(e){if(!e)return"";const n=e.split("/");return n.pop(),n.join("/")}function au(e){return e?e.split("/").pop():""}function NR(e,n,t="|"){if(ip(e)){const r=e.split(t),i=r.pop();return i===n?[!0,r.toString()]:[!1,i]}return[!1,""]}function LJ(e,n){return function Aet(e){return e&&AR(e.loader)}(e)?function zet(e,n){return Object.keys(e).reduce((t,r)=>(t[`${n}/${r}`]=e[r],t),{})}(e.loader,n):void 0}function OR(e){return{scope:fv(e)||null,langName:au(e)}}function $J(e){const{path:n,inlineLoader:t,mainLoader:r,data:i}=e;if(t){if(!1===function Eet(e){return"function"==typeof e}(t[n]))throw`You're using an inline loader but didn't provide a loader for ${n}`;return t[n]().then(s=>s.default?s.default:s)}return r.getTranslation(n,i)}let su=(()=>{class e{constructor(t,r,i,a,s,o){this.loader=t,this.parser=r,this.missingHandler=i,this.interceptor=a,this.userConfig=s,this.fallbackStrategy=o,this.subscription=null,this.translations=new Map,this.cache=new Map,this.defaultLang="",this.availableLangs=[],this.isResolvedMissingOnce=!1,this.failedLangs=new Set,this.events=new je,this.events$=this.events.asObservable(),this.loader||(this.loader=new ket(this.translations)),FR=this,this.mergedConfig=function $et(e,n){return{...e,...n,missingHandler:{...e.missingHandler,...n.missingHandler},flatten:{...e.flatten,...n.flatten}}}(JC,this.userConfig),this.setAvailableLangs(this.mergedConfig.availableLangs||[]),this.setFallbackLangForMissingTranslation(this.mergedConfig),this.setDefaultLang(this.mergedConfig.defaultLang),this.lang=new qi(this.getDefaultLang()),this.langChanges$=this.lang.asObservable(),this.subscription=this.events$.subscribe(l=>{"translationLoadSuccess"===l.type&&l.wasFailure&&this.setActiveLang(l.payload.langName)})}get config(){return this.mergedConfig}getDefaultLang(){return this.defaultLang}setDefaultLang(t){this.defaultLang=t}getActiveLang(){return this.lang.getValue()}setActiveLang(t){return this.parser.onLangChanged?.(t),this.lang.next(t),this.events.next({type:"langChanged",payload:OR(t)}),this}setAvailableLangs(t){this.availableLangs=t}getAvailableLangs(){return this.availableLangs}load(t,r={}){const i=this.cache.get(t);if(i)return i;let a;const s=this._isLangScoped(t);let o;s&&(o=fv(t));const l={path:t,mainLoader:this.loader,inlineLoader:r.inlineLoader,data:s?{scope:o}:void 0};if(this.useFallbackTranslation(t)){const u=s?`${o}/${this.firstFallbackLang}`:this.firstFallbackLang,h=function Uet({mainLoader:e,path:n,data:t,fallbackPath:r,inlineLoader:i}){return(r?[n,r]:[n]).map(s=>ur($J({path:s,mainLoader:e,inlineLoader:i,data:t})).pipe(tt(l=>({translation:l,lang:s}))))}({...l,fallbackPath:u});a=QC(h)}else a=ur($J(l));const c=a.pipe(cJ(this.config.failedRetries),mr(u=>{Array.isArray(u)?u.forEach(h=>{this.handleSuccess(h.lang,h.translation),h.lang!==t&&this.cache.set(h.lang,Ue({}))}):this.handleSuccess(t,u)}),ll(u=>(this.mergedConfig.prodMode||console.error(`Error while trying to load "${t}"`,u),this.handleFailure(t,r))),function Cet(e,n,t){let r,i=!1;return e&&"object"==typeof e?({bufferSize:r=1/0,windowTime:n=1/0,refCount:i=!1,scheduler:t}=e):r=e??1/0,zS({connector:()=>new wet(r,n,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}(1));return this.cache.set(t,c),c}translate(t,r={},i=this.getActiveLang()){if(!t)return t;const{scope:a,resolveLang:s}=this.resolveLangAndScope(i);if(Array.isArray(t))return t.map(c=>this.translate(a?`${a}.${c}`:c,r,s));t=a?`${a}.${t}`:t;const o=this.getTranslation(s),l=o[t];return l?this.parser.transpile(l,r,o,t):this._handleMissingKey(t,l,r)}selectTranslate(t,r,i,a=!1){let s;const o=(c,u)=>this.load(c,u).pipe(tt(()=>a?this.translateObject(t,r,c):this.translate(t,r,c)));if(TR(i))return this.langChanges$.pipe(ri(c=>o(c)));if(TJ(i)){const c=i;i=c.scope,s=LJ(c,c.scope)}if(this.isLang(i)||this.isScopeWithLang(i))return o(i);const l=i;return this.langChanges$.pipe(ri(c=>o(`${l}/${c}`,{inlineLoader:s})))}isScopeWithLang(t){return this.isLang(au(t))}translateObject(t,r={},i=this.getActiveLang()){if(ip(t)||Array.isArray(t)){const{resolveLang:s,scope:o}=this.resolveLangAndScope(i);if(Array.isArray(t))return t.map(u=>this.translateObject(o?`${o}.${u}`:u,r,s));const l=this.getTranslation(s),c=function Tet(e){return(0,kJ.unflatten)(e)}(this.getObjectByKey(l,t=o?`${o}.${t}`:t));return function Met(e){return 0===MJ(e)}(c)?this.translate(t,r,i):this.parser.transpile(c,r,l,t)}const a=[];for(const[s,o]of this.getEntries(t))a.push(this.translateObject(s,o,i));return a}selectTranslateObject(t,r,i){if(ip(t)||Array.isArray(t))return this.selectTranslate(t,r,i,!0);const[[a,s],...o]=this.getEntries(t);return this.selectTranslateObject(a,s,i).pipe(tt(l=>{const c=[l];for(const[u,h]of o)c.push(this.translateObject(u,h,i));return c}))}getTranslation(t){if(t){if(this.isLang(t))return this.translations.get(t)||{};{const{scope:r,resolveLang:i}=this.resolveLangAndScope(t),a=this.translations.get(i)||{};return this.getObjectByKey(a,r)}}return this.translations}selectTranslation(t){let r=this.langChanges$;if(t){const i=au(t)!==t;r=this.isLang(t)||i?Ue(t):this.langChanges$.pipe(tt(a=>`${t}/${a}`))}return r.pipe(ri(i=>this.load(i).pipe(tt(()=>this.getTranslation(i)))))}setTranslation(t,r=this.getActiveLang(),i={}){const s={merge:!0,emitChange:!0,...i},o=fv(r);let l=t;o&&(l=NJ({[this.getMappedScope(o)]:t}));const c=o?au(r):r,u={...s.merge&&this.getTranslation(c),...l},h=this.mergedConfig.flatten.aot?u:NJ(u),d=this.interceptor.preSaveTranslation(h,c);this.translations.set(c,d),s.emitChange&&this.setActiveLang(this.getActiveLang())}setTranslationKey(t,r,i=this.getActiveLang(),a={}){const s=this.interceptor.preSaveTranslationKey(t,r,i);this.setTranslation({[t]:s},i,{...a,merge:!0})}setFallbackLangForMissingTranslation({fallbackLang:t}){const r=Array.isArray(t)?t[0]:t;t&&this.useFallbackTranslation(r)&&(this.firstFallbackLang=r)}_handleMissingKey(t,r,i){if(this.config.missingHandler.allowEmpty&&""===r)return"";if(!this.isResolvedMissingOnce&&this.useFallbackTranslation()){this.isResolvedMissingOnce=!0;const a=this.translate(t,i,this.firstFallbackLang);return this.isResolvedMissingOnce=!1,a}return this.missingHandler.handle(t,this.getMissingHandlerData(),i)}_isLangScoped(t){return-1===this.getAvailableLangsIds().indexOf(t)}isLang(t){return-1!==this.getAvailableLangsIds().indexOf(t)}_loadDependencies(t,r){const i=au(t);return this._isLangScoped(t)&&!this.isLoadedTranslation(i)?Yy(this.load(i),this.load(t,{inlineLoader:r})):this.load(t,{inlineLoader:r})}_completeScopeWithLang(t){return this._isLangScoped(t)&&!this.isLang(au(t))?`${t}/${this.getActiveLang()}`:t}_setScopeAlias(t,r){this.mergedConfig.scopeMapping||(this.mergedConfig.scopeMapping={}),this.mergedConfig.scopeMapping[t]=r}ngOnDestroy(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null),this.cache.clear()}isLoadedTranslation(t){return MJ(this.getTranslation(t))}getAvailableLangsIds(){return ip(this.getAvailableLangs()[0])?this.getAvailableLangs():this.getAvailableLangs().map(r=>r.id)}getMissingHandlerData(){return{...this.config,activeLang:this.getActiveLang(),availableLangs:this.availableLangs,defaultLang:this.defaultLang}}useFallbackTranslation(t){return this.config.missingHandler.useFallbackTranslation&&t!==this.firstFallbackLang}handleSuccess(t,r){this.setTranslation(r,t,{emitChange:!1}),this.events.next({wasFailure:!!this.failedLangs.size,type:"translationLoadSuccess",payload:OR(t)}),this.failedLangs.forEach(i=>this.cache.delete(i)),this.failedLangs.clear()}handleFailure(t,r){TR(r.failedCounter)&&(r.failedCounter=0,r.fallbackLangs||(r.fallbackLangs=this.fallbackStrategy.getNextLangs(t)));const i=t.split("/"),s=r.fallbackLangs[r.failedCounter];if(this.failedLangs.add(t),this.cache.has(s))return this.handleSuccess(s,this.getTranslation(s)),ss;if(!s||s===i[i.length-1]){let c="Unable to load translation and all the fallback languages";throw i.length>1&&(c+=", did you misspelled the scope name?"),new Error(c)}let l=s;return i.length>1&&(i[i.length-1]=s,l=i.join("/")),r.failedCounter++,this.events.next({type:"translationLoadFailure",payload:OR(t)}),this.load(l,r)}getMappedScope(t){const{scopeMapping:r={}}=this.config;return r[t]||EJ(t)}resolveLangAndScope(t){let i,r=t;if(this._isLangScoped(t)){const a=au(t),s=this.isLang(a);r=s?a:this.getActiveLang(),i=this.getMappedScope(s?fv(t):t)}return{scope:i,resolveLang:r}}getObjectByKey(t,r){const i={},a=`${r}.`;for(const s in t)s.startsWith(a)&&(i[s.replace(a,"")]=t[s]);return i}getEntries(t){return t instanceof Map?t.entries():Object.entries(t)}}return e.\u0275fac=function(t){return new(t||e)(Y(SJ,8),Y(OJ),Y(FJ),Y(RJ),Y(Ng),Y(PJ))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Wet=new ue("TRANSLOCO_LANG"),jet=(new ue("TRANSLOCO_LOADING_TEMPLATE"),new ue("TRANSLOCO_SCOPE"));class Get{constructor(){this.initialized=!1}resolve({inline:n,provider:t,active:r}){let i=r;if(this.initialized)return i=r,i;if(t){const[,a]=NR(t,"static");i=a}if(n){const[,a]=NR(n,"static");i=a}return this.initialized=!0,i}resolveLangBasedOnScope(n){return fv(n)?au(n):n}resolveLangPath(n,t){return t?`${t}/${n}`:n}}class qet{constructor(n){this.translocoService=n}resolve({inline:n,provider:t}={inline:void 0,provider:void 0}){if(n)return n;if(t){if(TJ(t)){const{scope:r,alias:i=EJ(r)}=t;return this.translocoService._setScopeAlias(r,i),r}return t}}}let mv=(()=>{class e{constructor(t,r,i,a){this.translocoService=t,this.providerScope=r,this.providerLang=i,this.cdr=a,this.subscription=null,this.lastValue="",this.langResolver=new Get,this.scopeResolver=new qet(this.translocoService)}transform(t,r,i){if(!t)return t;const a=r?`${t}${JSON.stringify(r)}`:t;if(a===this.lastKey)return this.lastValue;this.lastKey=a,this.subscription?.unsubscribe();const s=function Bet(e,n){const[t]=NR(n,"static");return!t&&!!e.config.reRenderOnLangChange}(this.translocoService,this.providerLang||i);return this.subscription=this.translocoService.langChanges$.pipe(ri(o=>{const l=this.langResolver.resolve({inline:i,provider:this.providerLang,active:o});return Array.isArray(this.providerScope)?QC(this.providerScope.map(c=>this.resolveScope(l,c))):this.resolveScope(l,this.providerScope)}),function Vet(e){return e?n=>n:fr(1)}(s)).subscribe(()=>this.updateValue(t,r)),this.lastValue}ngOnDestroy(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}updateValue(t,r){const i=this.langResolver.resolveLangBasedOnScope(this.path);this.lastValue=this.translocoService.translate(t,r,i),this.cdr.markForCheck()}resolveScope(t,r){const i=this.scopeResolver.resolve({inline:void 0,provider:r});this.path=this.langResolver.resolveLangPath(t,i);const a=LJ(r,i);return this.translocoService._loadDependencies(this.path,a)}}return e.\u0275fac=function(t){return new(t||e)(E(su,16),E(jet,24),E(Wet,24),E(fi,16))},e.\u0275pipe=Vi({name:"transloco",type:e,pure:!1}),e})();const Ket=[{provide:OJ,useClass:Oet,deps:[Ng]},{provide:FJ,useClass:Ret},{provide:RJ,useClass:Pet},{provide:PJ,useClass:Let,deps:[Ng]}];let RR=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ze({type:e}),e.\u0275inj=Ye({providers:[Ket]}),e})();new ue("TRANSLOCO_TEST_LANGS - Available testing languages"),new ue("TRANSLOCO_TEST_OPTIONS - Testing options");let ek=(()=>{class e{constructor(t,r,i){this._httpWrapper=t,this._translocoService=r,this._breakpointObserver=i,this.baseUrl="https://wallet-api.verifik.co",this._faceapi=new qi(null),this.deviceData={generalInformation:[]},this.deviceData=this.getDeviceDetails(),this.loadModels(),this._breakpointObserver.observe(["(max-width: 599.98px)","(min-width: 600px) and (max-width: 959.98px)"]).subscribe(a=>{this.deviceData.isMobile=a.matches,this.deviceData.time=a.matches?500:250}),this.deviceData.OS=this.detectOS()}getDeviceData(){return this.deviceData}get faceapi$(){return this._faceapi.asObservable()}loadModels(){var t=this;return R(function*(){const r=[];r.push(_n.ssdMobilenetv1.loadFromUri("assets/models")),r.push(_n.faceLandmark68Net.loadFromUri("assets/models")),yield Promise.allSettled(r),t._faceapi.next(!0)})()}detectOS(){const t=window.navigator.userAgent.toLowerCase();return/android/.test(t)?"ANDROID":/iphone|ipad|ipod/.test(t)?"IOS":"DESKTOP"}getDeviceDetails(){if(this.deviceData.generalInformation.length)return;const t={userAgent:navigator.userAgent,platform:navigator.platform,appName:navigator.appName,appVersion:navigator.appVersion,language:navigator.language,onLine:navigator.onLine,cookiesEnabled:navigator.cookieEnabled,doNotTrack:navigator.doNotTrack,screenResolution:`${screen.width} x ${screen.height}`,screenAvailableResolution:`${screen.availWidth} x ${screen.availHeight}`,colorDepth:screen.colorDepth,pixelDepth:screen.pixelDepth,innerWidth:window.innerWidth,innerHeight:window.innerHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight,touchSupported:"ontouchstart"in window,geolocationSupported:"geolocation"in navigator,onlineStatus:navigator.onLine?"Online":"Offline"};return this.deviceData.generalInformation.push({key:"device",value:t.platform},{key:"language",value:t.language},{key:"userAgent",value:t.userAgent}),t}generateUniqueId(){const t=window.navigator,r=window.screen;return{hash:this.simpleHash(`${t.userAgent}-${t.language}-${t.platform}-${r.height}x${r.width}`),userAgent:t.userAgent,height:r.height,width:r.width}}simpleHash(t){let r=0;if(0===t.length)return r.toString();for(let i=0;i<t.length;i++)r=(r<<5)-r+t.charCodeAt(i),r&=r;return r.toString()}requestWallet(t){return this._httpWrapper.sendRequest("get",`${this.baseUrl}/api/wallets/${t}`)}createLivenessSession(t){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/api/sessions`,t,{Headers:{}})}createWallet(t){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/api/wallets`,t)}decryptWAllet(t){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/api/wallets/decrypt`,t)}createAppRegistration(t){return this._httpWrapper.sendRequest("post",`${this.baseUrl}/v2/app-registrations`,t)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(xet),Y(su),Y(XC))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Yet=new ue("cdk-dir-doc",{providedIn:"root",factory:function Zet(){return Se(Je)}}),Qet=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Al=(()=>{class e{constructor(t){this.value="ltr",this.change=new ct,t&&(this.value=function Jet(e){const n=e?.toLowerCase()||"";return"auto"===n&&typeof navigator<"u"&&navigator?.language?Qet.test(navigator.language)?"rtl":"ltr":"rtl"===n?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Yet,8))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ap=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({})}return e})();function BJ(e){for(let n in e){let t=e[n]??"";switch(n){case"display":e.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":e["-webkit-"+n]=t;break;case"flex-direction":e["-webkit-flex-direction"]=t,e["flex-direction"]=t;break;case"order":e.order=e["-webkit-"+n]=isNaN(+t)?"0":t}}return e}const PR="inline",tk=["row","column","row-reverse","column-reverse"];function VJ(e){let[n,t,r]=zJ(e);return function ttt(e,n=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":e,"flex-wrap":n||null}}(n,t,r)}function zJ(e){e=e?.toLowerCase()??"";let[n,t,r]=e.split(" ");return tk.find(i=>i===n)||(n=tk[0]),t===PR&&(t=r!==PR?r:"",r=PR),[n,ett(t),!!r]}function gv(e){let[n]=zJ(e);return n.indexOf("row")>-1}function ett(e){if(e)switch(e.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":e="wrap-reverse";break;case"no":case"none":case"nowrap":e="nowrap";break;default:e="wrap"}return e}function Tl(e,...n){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(let t of n)if(null!=t)for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}const rtt={provide:w0,useFactory:function ntt(e,n){return()=>{if($u(n)){const t=Array.from(e.querySelectorAll(`[class*=${UJ}]`)),r=/\bflex-layout-.+?\b/g;t.forEach(i=>{i.classList.contains(`${UJ}ssr`)&&i.parentNode?i.parentNode.removeChild(i):i.className.replace(r,"")})}}},deps:[Je,Ii],multi:!0},UJ="flex-layout-";let LR=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ze({type:e}),e.\u0275inj=Ye({providers:[rtt]}),e})();class sp{constructor(n=!1,t="all",r="",i="",a=0){this.matches=n,this.mediaQuery=t,this.mqAlias=r,this.suffix=i,this.priority=a,this.property=""}clone(){return new sp(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let itt=(()=>{class e{constructor(){this.stylesheet=new Map}addStyleToElement(t,r,i){const a=this.stylesheet.get(t);a?a.set(r,i):this.stylesheet.set(t,new Map([[r,i]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,r){const i=this.stylesheet.get(t);let a="";if(i){const s=i.get(r);("number"==typeof s||"string"==typeof s)&&(a=s+"")}return a}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const $R={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},eo=new ue("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>$R}),Og=new ue("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),BR=new ue("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function HJ(e,n){return e=e?.clone()??new sp,n&&(e.mqAlias=n.alias,e.mediaQuery=n.mediaQuery,e.suffix=n.suffix,e.priority=n.priority),e}class cr{constructor(){this.shouldCache=!0}sideEffect(n,t,r){}}let zn=(()=>{class e{constructor(t,r,i,a){this._serverStylesheet=t,this._serverModuleLoaded=r,this._platformId=i,this.layoutConfig=a}applyStyleToElement(t,r,i=null){let a={};"string"==typeof r&&(a[r]=i,r=a),a=this.layoutConfig.disableVendorPrefixes?r:BJ(r),this._applyMultiValueStyleToElement(a,t)}applyStyleToElements(t,r=[]){const i=this.layoutConfig.disableVendorPrefixes?t:BJ(t);r.forEach(a=>{this._applyMultiValueStyleToElement(i,a)})}getFlowDirection(t){const r="flex-direction";let i=this.lookupStyle(t,r);return[i||"row",this.lookupInlineStyle(t,r)||sc(this._platformId)&&this._serverModuleLoaded?i:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,r){return t.getAttribute(r)??""}lookupInlineStyle(t,r){return $u(this._platformId)?t.style.getPropertyValue(r):function att(e,n){return WJ(e)[n]??""}(t,r)}lookupStyle(t,r,i=!1){let a="";return t&&((a=this.lookupInlineStyle(t,r))||($u(this._platformId)?i||(a=getComputedStyle(t).getPropertyValue(r)):this._serverModuleLoaded&&(a=this._serverStylesheet.getStyleForElement(t,r)))),a?a.trim():""}_applyMultiValueStyleToElement(t,r){Object.keys(t).sort().forEach(i=>{const a=t[i],s=Array.isArray(a)?a:[a];s.sort();for(let o of s)o=o?o+"":"",$u(this._platformId)||!this._serverModuleLoaded?$u(this._platformId)?r.style.setProperty(i,o):stt(r,i,o):this._serverStylesheet.addStyleToElement(r,i,o)})}}return e.\u0275fac=function(t){return new(t||e)(Y(itt),Y(Og),Y(Ii),Y(eo))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function stt(e,n,t){n=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const r=WJ(e);r[n]=t??"",function ott(e,n){let t="";for(const r in n)n[r]&&(t+=`${r}:${n[r]};`);e.setAttribute("style",t)}(e,r)}function WJ(e){const n={},t=e.getAttribute("style");if(t){const r=t.split(/;+/g);for(let i=0;i<r.length;i++){const a=r[i].trim();if(a.length>0){const s=a.indexOf(":");if(-1===s)throw new Error(`Invalid CSS style: ${a}`);n[a.substr(0,s).trim()]=a.substr(s+1).trim()}}}return n}function yv(e,n){return(n&&n.priority||0)-(e&&e.priority||0)}function ltt(e,n){return(e.priority||0)-(n.priority||0)}let VR=(()=>{class e{constructor(t,r,i){this._zone=t,this._platformId=r,this._document=i,this.source=new qi(new sp(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((r,i)=>{r.matches&&t.push(i)}),t}isActive(t){return this.registry.get(t)?.matches??this.registerQuery(t).some(i=>i.matches)}observe(t,r=!1){if(t&&t.length){const i=this._observable$.pipe(Pn(s=>!r||t.indexOf(s.mediaQuery)>-1));return os(new Sn(s=>{const o=this.registerQuery(t);if(o.length){const l=o.pop();o.forEach(c=>{s.next(c)}),this.source.next(l)}s.complete()}),i)}return this._observable$}registerQuery(t){const r=Array.isArray(t)?t:[t],i=[];return function ctt(e,n){const t=e.filter(r=>!jJ[r]);if(t.length>0){const r=t.join(", ");try{const i=n.createElement("style");i.setAttribute("type","text/css"),i.styleSheet||i.appendChild(n.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${r} {.fx-query-test{ }}\n`)),n.head.appendChild(i),t.forEach(a=>jJ[a]=i)}catch(i){console.error(i)}}}(r,this._document),r.forEach(a=>{const s=l=>{this._zone.run(()=>this.source.next(new sp(l.matches,a)))};let o=this.registry.get(a);o||(o=this.buildMQL(a),o.addListener(s),this.pendingRemoveListenerFns.push(()=>o.removeListener(s)),this.registry.set(a,o)),o.matches&&i.push(new sp(!0,a))}),i}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function dtt(e,n){return n&&window.matchMedia("all").addListener?window.matchMedia(e):function utt(e){const n=new EventTarget;return n.matches="all"===e||""===e,n.media=e,n.addListener=()=>{},n.removeListener=()=>{},n.addEventListener=()=>{},n.dispatchEvent=()=>!1,n.onchange=null,n}(e)}(t,$u(this._platformId))}}return e.\u0275fac=function(t){return new(t||e)(Y(We),Y(Ii),Y(Je))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const jJ={},htt=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],GJ="(orientation: portrait) and (max-width: 599.98px)",qJ="(orientation: landscape) and (max-width: 959.98px)",KJ="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",XJ="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",YJ="(orientation: portrait) and (min-width: 840px)",ZJ="(orientation: landscape) and (min-width: 1280px)",Nl={HANDSET:`${GJ}, ${qJ}`,TABLET:`${KJ} , ${XJ}`,WEB:`${YJ}, ${ZJ} `,HANDSET_PORTRAIT:`${GJ}`,TABLET_PORTRAIT:`${KJ} `,WEB_PORTRAIT:`${YJ}`,HANDSET_LANDSCAPE:`${qJ}`,TABLET_LANDSCAPE:`${XJ}`,WEB_LANDSCAPE:`${ZJ}`},ptt=[{alias:"handset",priority:2e3,mediaQuery:Nl.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:Nl.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:Nl.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:Nl.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:Nl.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:Nl.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:Nl.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:Nl.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:Nl.WEB_PORTRAIT,overlapping:!0}],ftt=/(\.|-|_)/g;function mtt(e){let n=e.length>0?e.charAt(0):"",t=e.length>1?e.slice(1):"";return n.toUpperCase()+t}const _tt=new ue("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const e=Se(BR),n=Se(eo),t=[].concat.apply([],(e||[]).map(i=>Array.isArray(i)?i:[i]));return function btt(e,n=[]){const t={};return e.forEach(r=>{t[r.alias]=r}),n.forEach(r=>{t[r.alias]?Tl(t[r.alias],r):t[r.alias]=r}),function ytt(e){return e.forEach(n=>{n.suffix||(n.suffix=function gtt(e){return e.replace(ftt,"|").split("|").map(mtt).join("")}(n.alias),n.overlapping=!!n.overlapping)}),e}(Object.keys(t).map(r=>t[r]))}((n.disableDefaultBps?[]:htt).concat(n.addOrientationBps?ptt:[]),t)}});let zR=(()=>{class e{constructor(t){this.findByMap=new Map,this.items=[...t].sort(ltt)}findByAlias(t){return t?this.findWithPredicate(t,r=>r.alias===t):null}findByQuery(t){return this.findWithPredicate(t,r=>r.mediaQuery===t)}get overlappings(){return this.items.filter(t=>t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t?.suffix??"")}findWithPredicate(t,r){let i=this.findByMap.get(t);return i||(i=this.items.find(r)??null,this.findByMap.set(t,i)),i??null}}return e.\u0275fac=function(t){return new(t||e)(Y(_tt))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Fg="print",vtt={alias:Fg,mediaQuery:Fg,priority:1e3};let xtt=(()=>{class e{constructor(t,r,i){this.breakpoints=t,this.layoutConfig=r,this._document=i,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new wtt,this.deactivations=[]}withPrintQuery(t){return[...t,Fg]}isPrintEvent(t){return t.mediaQuery.startsWith(Fg)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const r=this.breakpoints.findByQuery(t);return(r?[...this.printBreakPoints,r]:this.printBreakPoints).sort(yv)}updateEvent(t){let r=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(r=this.getEventBreakpoints(t)[0],t.mediaQuery=r?.mediaQuery??""),HJ(t,r)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const r=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new sp(!0,Fg))),t.updateStyles())},i=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",r),this._document.defaultView.addEventListener("afterprint",i),this.beforePrintEventListeners.push(r),this.afterPrintEventListeners.push(i)}interceptEvents(t){return r=>{this.isPrintEvent(r)?r.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(r)),t.updateStyles()):!r.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(t,r)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,r){this.isPrinting=!0,this.formerActivations=t.activatedBreakpoints,t.activatedBreakpoints=this.queue.addPrintBreakpoints(r)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(t,r){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!r.matches){const i=this.breakpoints.findByQuery(r.mediaQuery);if(i){const a=this.formerActivations&&this.formerActivations.includes(i),s=!this.formerActivations&&t.activatedBreakpoints.includes(i);(a||s)&&(this.deactivations.push(i),this.deactivations.sort(yv))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return e.\u0275fac=function(t){return new(t||e)(Y(zR),Y(eo),Y(Je))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class wtt{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(n){return n.push(vtt),n.sort(yv),n.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(n){n&&void 0===this.printBreakpoints.find(r=>r.mediaQuery===n.mediaQuery)&&(this.printBreakpoints=function Ctt(e){return e?.mediaQuery.startsWith(Fg)??!1}(n)?[n,...this.printBreakpoints]:[...this.printBreakpoints,n])}clear(){this.printBreakpoints=[]}}let Yn=(()=>{class e{constructor(t,r,i){this.matchMedia=t,this.breakpoints=r,this.hook=i,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new je,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(t){this._activatedBreakpoints=[...t]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(t){this._useFallbacks=t}onMediaChange(t){const r=this.findByQuery(t.mediaQuery);if(r){t=HJ(t,r);const i=this.activatedBreakpoints.indexOf(r);t.matches&&-1===i?(this._activatedBreakpoints.push(r),this._activatedBreakpoints.sort(yv),this.updateStyles()):!t.matches&&-1!==i&&(this._activatedBreakpoints.splice(i,1),this._activatedBreakpoints.sort(yv),this.updateStyles())}}init(t,r,i,a,s=[]){QJ(this.updateMap,t,r,i),QJ(this.clearMap,t,r,a),this.buildElementKeyMap(t,r),this.watchExtraTriggers(t,r,s)}getValue(t,r,i){const a=this.elementMap.get(t);if(a){const s=void 0!==i?a.get(i):this.getActivatedValues(a,r);if(s)return s.get(r)}}hasValue(t,r){const i=this.elementMap.get(t);if(i){const a=this.getActivatedValues(i,r);if(a)return void 0!==a.get(r)||!1}return!1}setValue(t,r,i,a){let s=this.elementMap.get(t);if(s){const l=(s.get(a)??new Map).set(r,i);s.set(a,l),this.elementMap.set(t,s)}else s=(new Map).set(a,(new Map).set(r,i)),this.elementMap.set(t,s);const o=this.getValue(t,r);void 0!==o&&this.updateElement(t,r,o)}trackValue(t,r){return this.subject.asObservable().pipe(Pn(i=>i.element===t&&i.key===r))}updateStyles(){this.elementMap.forEach((t,r)=>{const i=new Set(this.elementKeyMap.get(r));let a=this.getActivatedValues(t);a&&a.forEach((s,o)=>{this.updateElement(r,o,s),i.delete(o)}),i.forEach(s=>{if(a=this.getActivatedValues(t,s),a){const o=a.get(s);this.updateElement(r,s,o)}else this.clearElement(r,s)})})}clearElement(t,r){const i=this.clearMap.get(t);if(i){const a=i.get(r);a&&(a(),this.subject.next({element:t,key:r,value:""}))}}updateElement(t,r,i){const a=this.updateMap.get(t);if(a){const s=a.get(r);s&&(s(i),this.subject.next({element:t,key:r,value:i}))}}releaseElement(t){const r=this.watcherMap.get(t);r&&(r.forEach(a=>a.unsubscribe()),this.watcherMap.delete(t));const i=this.elementMap.get(t);i&&(i.forEach((a,s)=>i.delete(s)),this.elementMap.delete(t))}triggerUpdate(t,r){const i=this.elementMap.get(t);if(i){const a=this.getActivatedValues(i,r);a&&(r?this.updateElement(t,r,a.get(r)):a.forEach((s,o)=>this.updateElement(t,o,s)))}}buildElementKeyMap(t,r){let i=this.elementKeyMap.get(t);i||(i=new Set,this.elementKeyMap.set(t,i)),i.add(r)}watchExtraTriggers(t,r,i){if(i&&i.length){let a=this.watcherMap.get(t);if(a||(a=new Map,this.watcherMap.set(t,a)),!a.get(r)){const o=os(...i).subscribe(()=>{const l=this.getValue(t,r);this.updateElement(t,r,l)});a.set(r,o)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,r){for(let a=0;a<this.activatedBreakpoints.length;a++){const o=t.get(this.activatedBreakpoints[a].alias);if(o&&(void 0===r||o.has(r)&&null!=o.get(r)))return o}if(!this._useFallbacks)return;const i=t.get("");return void 0===r||i&&i.has(r)?i:void 0}observeActivations(){const t=this.breakpoints.items.map(r=>r.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe(mr(this.hook.interceptEvents(this)),Pn(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return e.\u0275fac=function(t){return new(t||e)(Y(VR),Y(zR),Y(xtt))},e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function QJ(e,n,t,r){if(void 0!==r){const i=e.get(n)??new Map;i.set(t,r),e.set(n,i)}}let nr=(()=>{class e{constructor(t,r,i,a){this.elementRef=t,this.styleBuilder=r,this.styler=i,this.marshal=a,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new je,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(r=>{if(-1!==this.inputs.indexOf(r)){const i=r.split(".").slice(1).join(".");this.setValue(t[r].currentValue,i)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,r){const i=this.styleBuilder,a=i.shouldCache;let s=this.styleCache.get(t);(!s||!a)&&(s=i.buildStyles(t,r),a&&this.styleCache.set(t,s)),this.mru={...s},this.applyStyleToElement(s),i.sideEffect(t,s,r)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,r=!1){if(t){const[i,a]=this.styler.getFlowDirection(t);if(!a&&r){const s=VJ(i);this.styler.applyStyleToElements(s,[t])}return i.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,r,i=this.nativeElement){this.styler.applyStyleToElement(i,t,r)}setValue(t,r){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,r)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return e.\u0275fac=function(t){return new(t||e)(E(Le),E(cr),E(zn),E(Yn))},e.\u0275dir=ce({type:e,features:[Jr]}),e})();EventTarget;let Itt=(()=>{class e extends cr{buildStyles(t,{display:r}){const i=VJ(t);return{...i,display:"none"===r?r:i.display}}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ve(e)))(r||e)}}(),e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Mtt=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let Ett=(()=>{class e extends nr{constructor(t,r,i,a,s){super(t,i,r,a),this._config=s,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(t){const i=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=nee.get(i)??new Map,nee.set(i,this.styleCache),this.currentValue!==t&&(this.addStyles(t,{display:i}),this.currentValue=t)}}return e.\u0275fac=function(t){return new(t||e)(E(Le),E(zn),E(Itt),E(Yn),E(eo))},e.\u0275dir=ce({type:e,features:[Ce]}),e})(),$o=(()=>{class e extends Ett{constructor(){super(...arguments),this.inputs=Mtt}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ve(e)))(r||e)}}(),e.\u0275dir=ce({type:e,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[Ce]}),e})();const nee=new Map;let gnt=(()=>{class e extends cr{buildStyles(t,r){const i={},[a,s]=t.split(" ");switch(a){case"center":i["justify-content"]="center";break;case"space-around":i["justify-content"]="space-around";break;case"space-between":i["justify-content"]="space-between";break;case"space-evenly":i["justify-content"]="space-evenly";break;case"end":case"flex-end":i["justify-content"]="flex-end";break;default:i["justify-content"]="flex-start"}switch(s){case"start":case"flex-start":i["align-items"]=i["align-content"]="flex-start";break;case"center":i["align-items"]=i["align-content"]="center";break;case"end":case"flex-end":i["align-items"]=i["align-content"]="flex-end";break;case"space-between":i["align-content"]="space-between",i["align-items"]="stretch";break;case"space-around":i["align-content"]="space-around",i["align-items"]="stretch";break;case"baseline":i["align-content"]="stretch",i["align-items"]="baseline";break;default:i["align-items"]=i["align-content"]="stretch"}return Tl(i,{display:r.inline?"inline-flex":"flex","flex-direction":r.layout,"box-sizing":"border-box","max-width":"stretch"===s?gv(r.layout)?null:"100%":null,"max-height":"stretch"===s&&gv(r.layout)?"100%":null})}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ve(e)))(r||e)}}(),e.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const ynt=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let bnt=(()=>{class e extends nr{constructor(t,r,i,a){super(t,i,r,a),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(lr(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const r=this.layout||"row",i=this.inline;"row"===r&&i?this.styleCache=Cnt:"row"!==r||i?"row-reverse"===r&&i?this.styleCache=Snt:"row-reverse"!==r||i?"column"===r&&i?this.styleCache=knt:"column"!==r||i?"column-reverse"===r&&i?this.styleCache=Int:"column-reverse"===r&&!i&&(this.styleCache=wnt):this.styleCache=vnt:this.styleCache=xnt:this.styleCache=_nt,this.addStyles(t,{layout:r,inline:i})}onLayoutChange(t){const r=t.value.split(" ");this.layout=r[0],this.inline=t.value.includes("inline"),tk.find(i=>i===this.layout)||(this.layout="row"),this.triggerUpdate()}}return e.\u0275fac=function(t){return new(t||e)(E(Le),E(zn),E(gnt),E(Yn))},e.\u0275dir=ce({type:e,features:[Ce]}),e})(),Bo=(()=>{class e extends bnt{constructor(){super(...arguments),this.inputs=ynt}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ve(e)))(r||e)}}(),e.\u0275dir=ce({type:e,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[Ce]}),e})();const _nt=new Map,vnt=new Map,xnt=new Map,wnt=new Map,Cnt=new Map,knt=new Map,Snt=new Map,Int=new Map;let aee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ze({type:e}),e.\u0275inj=Ye({imports:[LR,ap]}),e})();function Mnt(e,n){1&e&&we(0,"img",76),2&e&&me("src",ze().wallet.image,jp)}let Ent=(()=>{class e{constructor(t,r){this._router=t,this._walletService=r,this.title="something"}openFullPage(){const t=chrome.runtime.getURL("index.html");chrome.tabs.create({url:t})}ngOnInit(){const t=localStorage.getItem("walletId")||"663ab8c316f85d1b95b02cb3";t?this._getWallet(t):this._router.navigate(["/onboarding"])}_getWallet(t){this._walletService.requestWallet(t).subscribe({next:r=>{this.wallet=r.data,console.log({responseWallet:this.wallet})},error:r=>{},complete:()=>{}})}_redirectToOnboarding(){this._router.navigate(["/onboarding"])}static#e=this.\u0275fac=function(r){return new(r||e)(E(mi),E(ek))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["app-home"]],decls:155,vars:1,consts:[["fxLayout","column","fxLayoutAlign","start center",1,"home-main","h-full"],[1,"home-main-div"],[1,"home-main-header"],[2,"width","86px","padding-right","26px","justify-content","flex-start","align-items","center","display","flex"],[2,"align-self","stretch","background","#f0efff","border-radius","48px","overflow","hidden","flex-direction","column","justify-content","center","align-items","center","gap","8px","display","inline-flex"],[2,"width","60px","flex","1 1 0","padding-left","8px","padding-right","8px","padding-top","10px","padding-bottom","10px","justify-content","center","align-items","center","gap","8px","display","inline-flex"],[2,"width","18px","height","18px","position","relative"],["xmlns","http://www.w3.org/2000/svg","width","19","height","18","viewBox","0 0 19 18","fill","none"],["d","M16.625 6.75L14.9375 3.75H12.455L11.1875 1.5H7.8125L6.545 3.75H4.0625L2.375 6.75L3.6425 9L2.375 11.25L4.0625 14.25H6.545L7.8125 16.5H11.1875L12.455 14.25H14.9375L16.625 11.25L15.3575 9L16.625 6.75ZM14.9075 6.75L14.0675 8.25H12.4625L11.6225 6.75L12.4625 5.25H14.0675L14.9075 6.75ZM8.705 10.5L7.865 9L8.705 7.5H10.295L11.135 9L10.295 10.5H8.705ZM10.31 3L11.15 4.485L10.295 6H8.705L7.85 4.485L8.69 3H10.31ZM4.94 5.25H6.545L7.385 6.75L6.545 8.25H4.94L4.0925 6.75L4.94 5.25ZM4.0925 11.25L4.9325 9.75H6.5375L7.3775 11.25L6.5375 12.75H4.94L4.0925 11.25ZM8.69 15L7.85 13.515L8.705 12H10.295L11.1425 13.515L10.31 15H8.69ZM14.06 12.75H12.455L11.615 11.25L12.455 9.75H14.06L14.9 11.25L14.06 12.75Z","fill","#46464F"],["d","M12.9425 6.22168L9.5 9.65668L6.0575 6.22168L5 7.27918L9.5 11.7792L14 7.27918L12.9425 6.22168Z","fill","#46464F"],[2,"flex-direction","column","justify-content","flex-start","align-items","center","gap","6px","display","inline-flex"],[2,"align-self","stretch","justify-content","center","align-items","center","gap","8px","display","inline-flex"],[2,"color","#1f1f1f","font-size","15px","font-family","Poppins","font-weight","600","line-height","24px","word-wrap","break-word"],[2,"width","24px","height","24px","position","relative"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["d","M16.59 8.29492L12 12.8749L7.41 8.29492L6 9.70492L12 15.7049L18 9.70492L16.59 8.29492Z","fill","#1F1F1F"],[2,"justify-content","flex-end","align-items","center","gap","16px","display","flex"],[2,"padding","3px","background","#e9e9e9","border-radius","4px","justify-content","center","align-items","center","gap","8px","display","flex",3,"click"],[2,"width","40px","height","40px","position","relative"],["style","width: 40px",3,"src",4,"ngIf"],[2,"width","24px","height","24px","position","relative","border-radius","40px","overflow","hidden"],[2,"width","4px","height","16px","left","10px","top","4px","position","absolute","background","#46464f"],[2,"padding-left","16px","padding-right","16px","padding-top","8px","padding-bottom","8px","left","138px","top","84px","position","absolute","background","#e3e1ec","border-radius","32px","justify-content","flex-start","align-items","center","gap","6px","display","inline-flex"],[2,"text-align","center","color","#010333","font-size","14px","font-family","Poppins","font-weight","500","line-height","20px","letter-spacing","0.1px","word-wrap","break-word"],[2,"width","16px","height","16px","position","relative"],["xmlns","http://www.w3.org/2000/svg","width","17","height","16","viewBox","0 0 17 16","fill","none"],["d","M5.83398 4.66699H13.1673V14.0003H5.83398V4.66699Z","fill","#010333"],["d","M11.1673 0.666992H3.16732C2.43398 0.666992 1.83398 1.26699 1.83398 2.00033V11.3337H3.16732V2.00033H11.1673V0.666992ZM13.1673 3.33366H5.83398C5.10065 3.33366 4.50065 3.93366 4.50065 4.66699V14.0003C4.50065 14.7337 5.10065 15.3337 5.83398 15.3337H13.1673C13.9007 15.3337 14.5007 14.7337 14.5007 14.0003V4.66699C14.5007 3.93366 13.9007 3.33366 13.1673 3.33366ZM13.1673 14.0003H5.83398V4.66699H13.1673V14.0003Z","fill","#010333"],[2,"left","124px","top","152px","position","absolute","justify-content","center","align-items","center","gap","12px","display","inline-flex"],[2,"align-self","stretch","flex-direction","column","justify-content","center","align-items","center","gap","10px","display","inline-flex"],[2,"width","180px","height","27px","text-align","center","color","#444746","font-size","32px","font-family","Poppins","font-weight","500","line-height","40px","word-wrap","break-word"],[2,"width","175px","height","15px","text-align","center","color","#37be5f","font-size","16px","font-family","Poppins","font-weight","400","line-height","24px","letter-spacing","0.15px","word-wrap","break-word"],[2,"left","15.5px","top","236px","position","absolute","justify-content","center","align-items","center","gap","8px","display","inline-flex"],[2,"flex-direction","column","justify-content","flex-start","align-items","center","gap","4px","display","inline-flex"],[2,"padding","8px","background","#dee0ff","border-radius","16px","justify-content","flex-start","align-items","flex-start","gap","8px","display","inline-flex"],[2,"width","20px","height","20px","left","2px","top","2px","position","absolute","background","#010333"],[2,"width","73px","text-align","center","color","#46464f","font-size","11px","font-family","Poppins","font-weight","500","line-height","16px","letter-spacing","0.5px","word-wrap","break-word"],[2,"width","14.59px","height","14.59px","left","4.7px","top","4.7px","position","absolute","background","#010333"],[2,"width","17.57px","height","12.59px","left","3.21px","top","5.71px","position","absolute","background","#010333"],[2,"text-align","center","color","#46464f","font-size","11px","font-family","Poppins","font-weight","500","line-height","16px","letter-spacing","0.5px","word-wrap","break-word"],[2,"width","19px","height","14px","left","2.5px","top","5px","position","absolute","background","#010333"],[2,"width","16px","height","16px","left","4px","top","4px","position","absolute","background","#010333"],[2,"height","49px","left","16px","top","328px","position","absolute","background","white","flex-direction","column","justify-content","flex-start","align-items","flex-start","display","inline-flex"],[2,"align-self","stretch","justify-content","flex-start","align-items","flex-start","display","inline-flex"],[2,"flex","1 1 0","height","48px","background","white","flex-direction","column","justify-content","flex-end","align-items","center","display","inline-flex"],[2,"align-self","stretch","flex","1 1 0","padding-left","16px","padding-right","16px","flex-direction","column","justify-content","flex-end","align-items","center","display","flex"],[2,"width","52px","padding-top","14px","padding-bottom","14px","flex-direction","column","justify-content","flex-end","align-items","center","gap","12px","display","flex"],[2,"text-align","center","color","#1c44f9","font-size","14px","font-family","Poppins","font-weight","600","line-height","20px","letter-spacing","0.1px","word-wrap","break-word"],[2,"width","132px","height","2px","background","#1c44f9"],[2,"height","48px","padding-top","14px","padding-bottom","14px","justify-content","center","align-items","flex-end","gap","10px","display","inline-flex"],[2,"text-align","center","color","#43474e","font-size","14px","font-family","Poppins","font-weight","600","line-height","20px","letter-spacing","0.1px","word-wrap","break-word"],[2,"align-self","stretch","height","1px","flex-direction","column","justify-content","center","align-items","flex-start","display","flex"],[2,"align-self","stretch","height","0px","border","1px #e2e2e6 solid"],[2,"height","338px","left","17px","top","409px","position","absolute","flex-direction","column","justify-content","flex-start","align-items","flex-start","gap","40px","display","inline-flex"],[2,"align-self","stretch","height","162px","padding-left","8px","padding-right","8px","flex-direction","column","justify-content","flex-start","align-items","flex-start","display","flex"],[2,"align-self","stretch","height","54px","flex-direction","column","justify-content","flex-start","align-items","flex-start","display","flex"],[2,"align-self","stretch","flex","1 1 0","padding-top","16px","padding-bottom","16px","background","rgba(255, 255, 255, 0)","justify-content","space-between","align-items","center","display","inline-flex"],[2,"justify-content","flex-start","align-items","flex-start","gap","8px","display","flex"],["src","https://via.placeholder.com/24x24",2,"width","24px","height","24px"],[2,"flex-direction","column","justify-content","center","align-items","flex-start","gap","4px","display","inline-flex"],[2,"width","112px","height","10px","color","#37be5f","font-size","11px","font-family","Poppins","font-weight","400","line-height","16px","letter-spacing","0.5px","word-wrap","break-word"],[2,"width","112px","height","10px","color","#8f8f8f","font-size","11px","font-family","Poppins","font-weight","500","line-height","16px","letter-spacing","0.5px","word-wrap","break-word"],[2,"justify-content","flex-end","align-items","flex-start","gap","8px","display","flex"],[2,"flex-direction","column","justify-content","center","align-items","flex-end","gap","8px","display","inline-flex"],[2,"width","112px","height","10px","text-align","right","color","#37be5f","font-size","14px","font-family","Poppins","font-weight","500","line-height","20px","letter-spacing","0.1px","word-wrap","break-word"],[2,"width","112px","height","10px","text-align","right","color","#8f8f8f","font-size","14px","font-family","Poppins","font-weight","500","line-height","20px","letter-spacing","0.1px","word-wrap","break-word"],[2,"width","112px","height","10px","color","#444746","font-size","11px","font-family","Poppins","font-weight","400","line-height","16px","letter-spacing","0.5px","word-wrap","break-word"],[2,"align-self","stretch","height","136px","flex-direction","column","justify-content","flex-start","align-items","flex-start","gap","8px","display","flex"],[2,"width","169px","border-radius","100px","overflow","hidden","flex-direction","column","justify-content","center","align-items","center","gap","8px","display","flex"],[2,"align-self","stretch","flex","1 1 0","padding-top","10px","padding-bottom","10px","padding-left","12px","padding-right","16px","justify-content","center","align-items","center","gap","8px","display","inline-flex"],[2,"width","12px","height","12px","left","3px","top","3px","position","absolute","background","#004fe4"],[2,"text-align","center","color","#004fe4","font-size","14px","font-family","Poppins","font-weight","500","line-height","20px","letter-spacing","0.1px","word-wrap","break-word"],[2,"width","160px","border-radius","100px","overflow","hidden","flex-direction","column","justify-content","center","align-items","center","gap","8px","display","flex"],[2,"width","16.5px","height","12px","left","0.75px","top","3px","position","absolute","background","#1c44f9"],[2,"width","253px","border-radius","100px","overflow","hidden","flex-direction","column","justify-content","center","align-items","center","gap","8px","display","flex"],[2,"width","15px","height","15px","left","1.5px","top","1.5px","position","absolute","background","#1c44f9"],[2,"width","40px",3,"src"]],template:function(r,i){1&r&&(B(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),ar(),B(7,"svg",7),we(8,"path",8),K()(),Er(),B(9,"div",6),ar(),B(10,"svg",7),we(11,"path",9),K()()()()(),Er(),B(12,"div",10)(13,"div",11)(14,"div",12),ye(15," Cuenta 1 "),K(),B(16,"div",13),ar(),B(17,"svg",14),we(18,"path",15),K()()()(),Er(),B(19,"div",16)(20,"div",17),xt("click",function(){return i.openFullPage()}),B(21,"div",18),Ae(22,Mnt,1,1,"img",19),K()(),B(23,"div",20),we(24,"div",21),K()()(),B(25,"div",22)(26,"div",23),ye(27," 0x24d4...F09D "),K(),B(28,"div",24),ar(),B(29,"svg",25),we(30,"path",26)(31,"path",27),K()()(),Er(),B(32,"div",28)(33,"div",29)(34,"div",30),ye(35," 0,109213\u039e "),K(),B(36,"div",31),ye(37," 658,47 US$ "),K()()(),B(38,"div",32)(39,"div",33)(40,"div",34)(41,"div",13),we(42,"div",35),K()(),B(43,"div",36),ye(44," Recibir "),K()(),B(45,"div",33)(46,"div",34)(47,"div",13),we(48,"div",37),K()(),B(49,"div",36),ye(50," Enviar "),K()(),B(51,"div",33)(52,"div",34)(53,"div",13),we(54,"div",38),K()(),B(55,"div",39),ye(56," Intercambio "),K()(),B(57,"div",33)(58,"div",34)(59,"div",13),we(60,"div",40),K()(),B(61,"div",36),ye(62," Puente "),K()(),B(63,"div",33)(64,"div",34)(65,"div",13),we(66,"div",41),K()(),B(67,"div",36),ye(68," Productos "),K()()(),B(69,"div",42)(70,"div",43)(71,"div",44)(72,"div",45)(73,"div",46)(74,"div",47),ye(75," Tokens "),K()(),we(76,"div",48),K()(),B(77,"div",44)(78,"div",45)(79,"div",49)(80,"div",50),ye(81," NFTs "),K()()()(),B(82,"div",44)(83,"div",45)(84,"div",49)(85,"div",50),ye(86," Actividad "),K()()()()(),B(87,"div",51),we(88,"div",52),K()(),B(89,"div",53)(90,"div",54)(91,"div",55)(92,"div",56)(93,"div",57),we(94,"img",58),B(95,"div",59)(96,"div",60),ye(97," -0.369 ETH "),K(),B(98,"div",61),ye(99," 1464,11 US$ "),K()()(),B(100,"div",62)(101,"div",63)(102,"div",64),ye(103," -0.369 ETH "),K(),B(104,"div",65),ye(105," 1464,11 USD "),K()()()()(),B(106,"div",55)(107,"div",56)(108,"div",57),we(109,"img",58),B(110,"div",59)(111,"div",66),ye(112," -0.369 BUSD "),K(),B(113,"div",61),ye(114," 1464,11 US$ "),K()()(),B(115,"div",62)(116,"div",63)(117,"div",64),ye(118," -0.369 ETH "),K(),B(119,"div",65),ye(120," 1464,11 USD "),K()()()()(),B(121,"div",55)(122,"div",56)(123,"div",57),we(124,"img",58),B(125,"div",59)(126,"div",66),ye(127," -0.369 XTZ "),K(),B(128,"div",61),ye(129," 1464,11 US$ "),K()()(),B(130,"div",62)(131,"div",63)(132,"div",64),ye(133," -0.369 ETH "),K(),B(134,"div",65),ye(135," 1464,11 USD "),K()()()()()(),B(136,"div",67)(137,"div",68)(138,"div",69)(139,"div",6),we(140,"div",70),K(),B(141,"div",71),ye(142," Importar tokens "),K()()(),B(143,"div",72)(144,"div",69)(145,"div",6),we(146,"div",73),K(),B(147,"div",71),ye(148," Actualizar lista "),K()()(),B(149,"div",74)(150,"div",69)(151,"div",6),we(152,"div",75),K(),B(153,"div",71),ye(154," Soporte de Biometric Wallet "),K()()()()()()()),2&r&&(ne(22),me("ngIf",i.wallet&&i.wallet.image))},dependencies:[ma,$o,Bo],styles:['@font-face{font-family:Poppins;src:url(Poppins-Regular.woff2) format("woff2");font-weight:400;font-style:normal;font-display:swap}*[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.main-div[_ngcontent-%COMP%]{flex:1 1 auto;width:100%;max-width:100%;height:100vh;background:rgba(211,211,211,.3607843137)}.w-full[_ngcontent-%COMP%]{width:100%}.h-full[_ngcontent-%COMP%]{height:100vh}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.primaryColor[_ngcontent-%COMP%]{color:#01236d!important}.divider-height[_ngcontent-%COMP%]{width:2px;background-color:#8080806e;height:100%;margin-top:5px;margin-bottom:5px}.justify-center[_ngcontent-%COMP%]{justify-content:center}.text-center[_ngcontent-%COMP%]{text-align:center}.h-20[_ngcontent-%COMP%]{height:20px}.my-2[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}@media (min-width: 768px){.sm\\:h-8[_ngcontent-%COMP%]{height:8px}}@media (min-width: 1024px){.h-20[_ngcontent-%COMP%]{height:20px}.sm\\:h-8[_ngcontent-%COMP%]{height:8px}}@media (min-width: 1280px){.h-20[_ngcontent-%COMP%]{height:20px}.sm\\:h-8[_ngcontent-%COMP%]{height:8px}}.p-0[_ngcontent-%COMP%]{padding:0}.p-1[_ngcontent-%COMP%]{padding:.25rem}.p-2[_ngcontent-%COMP%]{padding:.5rem}.p-3[_ngcontent-%COMP%]{padding:.75rem}.p-4[_ngcontent-%COMP%]{padding:1rem}.p-5[_ngcontent-%COMP%]{padding:1.25rem}.p-6[_ngcontent-%COMP%]{padding:1.5rem}.px-0[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.px-1[_ngcontent-%COMP%]{padding-left:.25rem;padding-right:.25rem}.px-2[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem}.px-3[_ngcontent-%COMP%]{padding-left:.75rem;padding-right:.75rem}.px-4[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.px-5[_ngcontent-%COMP%]{padding-left:1.25rem;padding-right:1.25rem}.px-6[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}.m-0[_ngcontent-%COMP%]{margin:0}.m-1[_ngcontent-%COMP%]{margin:.25rem}.m-2[_ngcontent-%COMP%]{margin:.5rem}.m-3[_ngcontent-%COMP%]{margin:.75rem}.m-4[_ngcontent-%COMP%]{margin:1rem}.m-5[_ngcontent-%COMP%]{margin:1.25rem}.m-6[_ngcontent-%COMP%]{margin:1.5rem}.mx-0[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.mx-1[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem}.mx-2[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem}.mx-3[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:.75rem}.mx-4[_ngcontent-%COMP%]{margin-left:1rem;margin-right:1rem}.mx-5[_ngcontent-%COMP%]{margin-left:1.25rem;margin-right:1.25rem}.mx-6[_ngcontent-%COMP%]{margin-left:1.5rem;margin-right:1.5rem}.p-7[_ngcontent-%COMP%]{padding:1.75rem}.p-8[_ngcontent-%COMP%]{padding:2rem}.p-9[_ngcontent-%COMP%]{padding:2.25rem}.p-10[_ngcontent-%COMP%]{padding:2.5rem}.p-11[_ngcontent-%COMP%]{padding:2.75rem}.p-12[_ngcontent-%COMP%]{padding:3rem}.p-14[_ngcontent-%COMP%]{padding:3.5rem}.p-16[_ngcontent-%COMP%]{padding:4rem}.px-7[_ngcontent-%COMP%]{padding-left:1.75rem;padding-right:1.75rem}.px-8[_ngcontent-%COMP%]{padding-left:2rem;padding-right:2rem}.px-9[_ngcontent-%COMP%]{padding-left:2.25rem;padding-right:2.25rem}.px-10[_ngcontent-%COMP%]{padding-left:2.5rem;padding-right:2.5rem}.px-11[_ngcontent-%COMP%]{padding-left:2.75rem;padding-right:2.75rem}.px-12[_ngcontent-%COMP%]{padding-left:3rem;padding-right:3rem}.px-14[_ngcontent-%COMP%]{padding-left:3.5rem;padding-right:3.5rem}.px-16[_ngcontent-%COMP%]{padding-left:4rem;padding-right:4rem}.m-7[_ngcontent-%COMP%]{margin:1.75rem}.m-8[_ngcontent-%COMP%]{margin:2rem}.m-9[_ngcontent-%COMP%]{margin:2.25rem}.m-10[_ngcontent-%COMP%]{margin:2.5rem}.m-11[_ngcontent-%COMP%]{margin:2.75rem}.m-12[_ngcontent-%COMP%]{margin:3rem}.m-14[_ngcontent-%COMP%]{margin:3.5rem}.m-16[_ngcontent-%COMP%]{margin:4rem}.mx-7[_ngcontent-%COMP%]{margin-left:1.75rem;margin-right:1.75rem}.mx-8[_ngcontent-%COMP%]{margin-left:2rem;margin-right:2rem}.mx-9[_ngcontent-%COMP%]{margin-left:2.25rem;margin-right:2.25rem}.mx-10[_ngcontent-%COMP%]{margin-left:2.5rem;margin-right:2.5rem}.mx-11[_ngcontent-%COMP%]{margin-left:2.75rem;margin-right:2.75rem}.mx-12[_ngcontent-%COMP%]{margin-left:3rem;margin-right:3rem}.mx-14[_ngcontent-%COMP%]{margin-left:3.5rem;margin-right:3.5rem}.mx-16[_ngcontent-%COMP%]{margin-left:4rem;margin-right:4rem}.pt-1[_ngcontent-%COMP%]{padding-top:.25rem}.pt-2[_ngcontent-%COMP%]{padding-top:.5rem}.pt-3[_ngcontent-%COMP%]{padding-top:.75rem}.pt-4[_ngcontent-%COMP%]{padding-top:1rem}.pt-5[_ngcontent-%COMP%]{padding-top:1.25rem}.pt-6[_ngcontent-%COMP%]{padding-top:1.5rem}.pt-7[_ngcontent-%COMP%]{padding-top:1.75rem}.pt-8[_ngcontent-%COMP%]{padding-top:2rem}.pt-9[_ngcontent-%COMP%]{padding-top:2.25rem}.pt-10[_ngcontent-%COMP%]{padding-top:2.5rem}.pt-11[_ngcontent-%COMP%]{padding-top:2.75rem}.pt-12[_ngcontent-%COMP%]{padding-top:3rem}.pt-14[_ngcontent-%COMP%]{padding-top:3.5rem}.pt-16[_ngcontent-%COMP%]{padding-top:4rem}.pb-1[_ngcontent-%COMP%]{padding-bottom:.25rem}.pb-2[_ngcontent-%COMP%]{padding-bottom:.5rem}.pb-3[_ngcontent-%COMP%]{padding-bottom:.75rem}.pb-4[_ngcontent-%COMP%]{padding-bottom:1rem}.pb-5[_ngcontent-%COMP%]{padding-bottom:1.25rem}.pb-6[_ngcontent-%COMP%]{padding-bottom:1.5rem}.pb-7[_ngcontent-%COMP%]{padding-bottom:1.75rem}.pb-8[_ngcontent-%COMP%]{padding-bottom:2rem}.pb-9[_ngcontent-%COMP%]{padding-bottom:2.25rem}.pb-10[_ngcontent-%COMP%]{padding-bottom:2.5rem}.pb-11[_ngcontent-%COMP%]{padding-bottom:2.75rem}.pb-12[_ngcontent-%COMP%]{padding-bottom:3rem}.pb-14[_ngcontent-%COMP%]{padding-bottom:3.5rem}.pb-16[_ngcontent-%COMP%]{padding-bottom:4rem}.mt-1[_ngcontent-%COMP%]{margin-top:.25rem}.mt-2[_ngcontent-%COMP%]{margin-top:.5rem}.mt-3[_ngcontent-%COMP%]{margin-top:.75rem}.mt-4[_ngcontent-%COMP%]{margin-top:1rem}.mt-5[_ngcontent-%COMP%]{margin-top:1.25rem}.mt-6[_ngcontent-%COMP%]{margin-top:1.5rem}.mt-7[_ngcontent-%COMP%]{margin-top:1.75rem}.mt-8[_ngcontent-%COMP%]{margin-top:2rem}.mt-9[_ngcontent-%COMP%]{margin-top:2.25rem}.mt-10[_ngcontent-%COMP%]{margin-top:2.5rem}.mt-11[_ngcontent-%COMP%]{margin-top:2.75rem}.mt-12[_ngcontent-%COMP%]{margin-top:3rem}.mt-14[_ngcontent-%COMP%]{margin-top:3.5rem}.mt-16[_ngcontent-%COMP%]{margin-top:4rem}.mb-1[_ngcontent-%COMP%]{margin-bottom:.25rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:.75rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.mb-5[_ngcontent-%COMP%]{margin-bottom:1.25rem}.mb-6[_ngcontent-%COMP%]{margin-bottom:1.5rem}.mb-7[_ngcontent-%COMP%]{margin-bottom:1.75rem}.mb-8[_ngcontent-%COMP%]{margin-bottom:2rem}.mb-9[_ngcontent-%COMP%]{margin-bottom:2.25rem}.mb-10[_ngcontent-%COMP%]{margin-bottom:2.5rem}.mb-11[_ngcontent-%COMP%]{margin-bottom:2.75rem}.mb-12[_ngcontent-%COMP%]{margin-bottom:3rem}.mb-14[_ngcontent-%COMP%]{margin-bottom:3.5rem}.mb-16[_ngcontent-%COMP%]{margin-bottom:4rem}.py-1[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem}.py-2[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}.py-3[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem}.py-4[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}.py-5[_ngcontent-%COMP%]{padding-top:1.25rem;padding-bottom:1.25rem}.py-6[_ngcontent-%COMP%]{padding-top:1.5rem;padding-bottom:1.5rem}.py-7[_ngcontent-%COMP%]{padding-top:1.75rem;padding-bottom:1.75rem}.py-8[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:2rem}.py-9[_ngcontent-%COMP%]{padding-top:2.25rem;padding-bottom:2.25rem}.py-10[_ngcontent-%COMP%]{padding-top:2.5rem;padding-bottom:2.5rem}.py-11[_ngcontent-%COMP%]{padding-top:2.75rem;padding-bottom:2.75rem}.py-12[_ngcontent-%COMP%]{padding-top:3rem;padding-bottom:3rem}.py-14[_ngcontent-%COMP%]{padding-top:3.5rem;padding-bottom:3.5rem}.py-16[_ngcontent-%COMP%]{padding-top:4rem;padding-bottom:4rem}.my-1[_ngcontent-%COMP%]{margin-top:.25rem;margin-bottom:.25rem}.my-2[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}.my-3[_ngcontent-%COMP%]{margin-top:.75rem;margin-bottom:.75rem}.my-4[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem}.my-5[_ngcontent-%COMP%]{margin-top:1.25rem;margin-bottom:1.25rem}.my-6[_ngcontent-%COMP%]{margin-top:1.5rem;margin-bottom:1.5rem}.my-7[_ngcontent-%COMP%]{margin-top:1.75rem;margin-bottom:1.75rem}.my-8[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}.my-9[_ngcontent-%COMP%]{margin-top:2.25rem;margin-bottom:2.25rem}.my-10[_ngcontent-%COMP%]{margin-top:2.5rem;margin-bottom:2.5rem}.my-11[_ngcontent-%COMP%]{margin-top:2.75rem;margin-bottom:2.75rem}.my-12[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:3rem}.my-14[_ngcontent-%COMP%]{margin-top:3.5rem;margin-bottom:3.5rem}.my-16[_ngcontent-%COMP%]{margin-top:4rem;margin-bottom:4rem}.main-button[_ngcontent-%COMP%]{background-color:#0b57d0!important;color:#fff!important;height:45px!important;font-size:18px;border-radius:20px}.main-title[_ngcontent-%COMP%]{margin-top:0!important;color:#1c44f9!important}.main-button[_ngcontent-%COMP%]:disabled{background-color:#e5ebfd!important;color:#4e6599!important}.secondary-button[_ngcontent-%COMP%]{background-color:#fff!important;color:#0b57d0!important;border:1px solid rgba(11,87,208,.5411764706)!important;height:45px;font-size:18px;border-radius:20px}.secondary-button[_ngcontent-%COMP%]:disabled{color:#4e6599!important;border:1px solid rgba(11,87,208,.2117647059)!important}.mr-1[_ngcontent-%COMP%]{margin-right:.25rem}.mr-2[_ngcontent-%COMP%]{margin-right:.5rem}.mr-3[_ngcontent-%COMP%]{margin-right:.75rem}.mr-4[_ngcontent-%COMP%]{margin-right:1rem}.mr-5[_ngcontent-%COMP%]{margin-right:1.25rem}.mr-6[_ngcontent-%COMP%]{margin-right:1.5rem}.mr-7[_ngcontent-%COMP%]{margin-right:1.75rem}.mr-8[_ngcontent-%COMP%]{margin-right:2rem}.mr-9[_ngcontent-%COMP%]{margin-right:2.25rem}.mr-10[_ngcontent-%COMP%]{margin-right:2.5rem}.mr-11[_ngcontent-%COMP%]{margin-right:2.75rem}.mr-12[_ngcontent-%COMP%]{margin-right:3rem}.mr-14[_ngcontent-%COMP%]{margin-right:3.5rem}.mr-16[_ngcontent-%COMP%]{margin-right:4rem}.ml-1[_ngcontent-%COMP%]{margin-left:.25rem}.ml-2[_ngcontent-%COMP%]{margin-left:.5rem}.ml-3[_ngcontent-%COMP%]{margin-left:.75rem}.ml-4[_ngcontent-%COMP%]{margin-left:1rem}.ml-5[_ngcontent-%COMP%]{margin-left:1.25rem}.ml-6[_ngcontent-%COMP%]{margin-left:1.5rem}.ml-7[_ngcontent-%COMP%]{margin-left:1.75rem}.ml-8[_ngcontent-%COMP%]{margin-left:2rem}.ml-9[_ngcontent-%COMP%]{margin-left:2.25rem}.ml-10[_ngcontent-%COMP%]{margin-left:2.5rem}.ml-11[_ngcontent-%COMP%]{margin-left:2.75rem}.ml-12[_ngcontent-%COMP%]{margin-left:3rem}.ml-14[_ngcontent-%COMP%]{margin-left:3.5rem}.ml-16[_ngcontent-%COMP%]{margin-left:4rem}.on-header[_ngcontent-%COMP%]{width:80%;height:80px}.on-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.mat-mdc-snack-bar-container[_ngcontent-%COMP%]{margin:0!important}',".home-main[_ngcontent-%COMP%]{background:white;width:440px;height:750px}.home-main-div[_ngcontent-%COMP%]{width:100%;position:relative;background:white}.home-main-header[_ngcontent-%COMP%]{width:100%;height:60px;background:white;box-shadow:0 2px 4px 1px #61616147;justify-content:space-between;align-items:center;display:inline-flex}"]})}return e})(),Dnt=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=Ut({type:e,selectors:[["app-about"]],decls:2,vars:0,template:function(r,i){1&r&&(B(0,"p"),ye(1," about works! "),K())},encapsulation:2})}return e})(),see=(()=>{class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||e)(E(Pa),E(Le))};static#t=this.\u0275dir=ce({type:e})}return e})(),op=(()=>{class e extends see{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Ve(e)))(i||e)}}();static#t=this.\u0275dir=ce({type:e,features:[Ce]})}return e})();const to=new ue("NgValueAccessor"),Tnt={provide:to,useExisting:xn(()=>ik),multi:!0},Ont=new ue("CompositionEventMode");let ik=(()=>{class e extends see{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Nnt(){const e=ac()?ac().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||e)(E(Pa),E(Le),E(Ont,8))};static#t=this.\u0275dir=ce({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&xt("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[jt([Tnt]),Ce]})}return e})();function ou(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}function lee(e){return null!=e&&"number"==typeof e.length}const vi=new ue("NgValidators"),lu=new ue("NgAsyncValidators"),Fnt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class UR{static min(n){return function cee(e){return n=>{if(ou(n.value)||ou(e))return null;const t=parseFloat(n.value);return!isNaN(t)&&t<e?{min:{min:e,actual:n.value}}:null}}(n)}static max(n){return function uee(e){return n=>{if(ou(n.value)||ou(e))return null;const t=parseFloat(n.value);return!isNaN(t)&&t>e?{max:{max:e,actual:n.value}}:null}}(n)}static required(n){return function dee(e){return ou(e.value)?{required:!0}:null}(n)}static requiredTrue(n){return function hee(e){return!0===e.value?null:{required:!0}}(n)}static email(n){return function pee(e){return ou(e.value)||Fnt.test(e.value)?null:{email:!0}}(n)}static minLength(n){return function fee(e){return n=>ou(n.value)||!lee(n.value)?null:n.value.length<e?{minlength:{requiredLength:e,actualLength:n.value.length}}:null}(n)}static maxLength(n){return function mee(e){return n=>lee(n.value)&&n.value.length>e?{maxlength:{requiredLength:e,actualLength:n.value.length}}:null}(n)}static pattern(n){return function gee(e){if(!e)return ak;let n,t;return"string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),n=new RegExp(t)):(t=e.toString(),n=e),r=>{if(ou(r.value))return null;const i=r.value;return n.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(n)}static nullValidator(n){return null}static compose(n){return wee(n)}static composeAsync(n){return Cee(n)}}function ak(e){return null}function yee(e){return null!=e}function bee(e){return Ty(e)?ur(e):e}function _ee(e){let n={};return e.forEach(t=>{n=null!=t?{...n,...t}:n}),0===Object.keys(n).length?null:n}function vee(e,n){return n.map(t=>t(e))}function xee(e){return e.map(n=>function Rnt(e){return!e.validate}(n)?n:t=>n.validate(t))}function wee(e){if(!e)return null;const n=e.filter(yee);return 0==n.length?null:function(t){return _ee(vee(t,n))}}function HR(e){return null!=e?wee(xee(e)):null}function Cee(e){if(!e)return null;const n=e.filter(yee);return 0==n.length?null:function(t){return QC(vee(t,n).map(bee)).pipe(tt(_ee))}}function WR(e){return null!=e?Cee(xee(e)):null}function kee(e,n){return null===e?[n]:Array.isArray(e)?[...e,n]:[e,n]}function See(e){return e._rawValidators}function Iee(e){return e._rawAsyncValidators}function jR(e){return e?Array.isArray(e)?e:[e]:[]}function sk(e,n){return Array.isArray(e)?e.includes(n):e===n}function Mee(e,n){const t=jR(n);return jR(e).forEach(i=>{sk(t,i)||t.push(i)}),t}function Eee(e,n){return jR(n).filter(t=>!sk(e,t))}class Dee{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=HR(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=WR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,t){return!!this.control&&this.control.hasError(n,t)}getError(n,t){return this.control?this.control.getError(n,t):null}}class na extends Dee{get formDirective(){return null}get path(){return null}}class Vo extends Dee{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Aee{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let GR=(()=>{class e extends Aee{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||e)(E(Vo,2))};static#t=this.\u0275dir=ce({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Xt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ce]})}return e})(),qR=(()=>{class e extends Aee{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||e)(E(na,10))};static#t=this.\u0275dir=ce({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Xt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Ce]})}return e})();const bv="VALID",lk="INVALID",Rg="PENDING",_v="DISABLED";function YR(e){return(ck(e)?e.validators:e)||null}function ZR(e,n){return(ck(n)?n.asyncValidators:e)||null}function ck(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function Nee(e,n,t){const r=e.controls;if(!(n?Object.keys(r):r).length)throw new oe(1e3,"");if(!r[t])throw new oe(1001,"")}function Oee(e,n,t){e._forEachChild((r,i)=>{if(void 0===t[i])throw new oe(1002,"")})}class uk{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===bv}get invalid(){return this.status===lk}get pending(){return this.status==Rg}get disabled(){return this.status===_v}get enabled(){return this.status!==_v}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(Mee(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(Mee(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(Eee(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(Eee(n,this._rawAsyncValidators))}hasValidator(n){return sk(this._rawValidators,n)}hasAsyncValidator(n){return sk(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=Rg,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=_v,this.errors=null,this._forEachChild(r=>{r.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){const t=this._parentMarkedDirty(n.onlySelf);this.status=bv,this._forEachChild(r=>{r.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bv||this.status===Rg)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_v:bv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=Rg,this._hasOwnPendingAsyncValidator=!0;const t=bee(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(!1!==t.emitEvent)}get(n){let t=n;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(n,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new ct,this.statusChanges=new ct}_calculateStatus(){return this._allControlsDisabled()?_v:this.errors?lk:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rg)?Rg:this._anyControlsHaveStatus(lk)?lk:bv}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){ck(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=function Bnt(e){return Array.isArray(e)?HR(e):e||null}(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=function Vnt(e){return Array.isArray(e)?WR(e):e||null}(this._rawAsyncValidators)}}class vv extends uk{constructor(n,t,r){super(YR(t),ZR(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,r={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){Oee(this,0,n),Object.keys(n).forEach(r=>{Nee(this,!0,r),this.controls[r].setValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(Object.keys(n).forEach(r=>{const i=this.controls[r];i&&i.patchValue(n[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((r,i)=>{r.reset(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,r)=>(n[r]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&n(r,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&n(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(n,t){let r=n;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}class Fee extends vv{}const lp=new ue("CallSetDisabledState",{providedIn:"root",factory:()=>xv}),xv="always";function wv(e,n,t=xv){QR(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||"always"===t)&&n.valueAccessor.setDisabledState?.(e.disabled),function Unt(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Ree(e,n)})}(e,n),function Wnt(e,n){const t=(r,i)=>{n.valueAccessor.writeValue(r),i&&n.viewToModelUpdate(r)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}(e,n),function Hnt(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Ree(e,n),"submit"!==e.updateOn&&e.markAsTouched()})}(e,n),function znt(e,n){if(n.valueAccessor.setDisabledState){const t=r=>{n.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}(e,n)}function hk(e,n,t=!0){const r=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(r),n.valueAccessor.registerOnTouched(r)),fk(e,n),e&&(n._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function pk(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function QR(e,n){const t=See(e);null!==n.validator?e.setValidators(kee(t,n.validator)):"function"==typeof t&&e.setValidators([t]);const r=Iee(e);null!==n.asyncValidator?e.setAsyncValidators(kee(r,n.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();pk(n._rawValidators,i),pk(n._rawAsyncValidators,i)}function fk(e,n){let t=!1;if(null!==e){if(null!==n.validator){const i=See(e);if(Array.isArray(i)&&i.length>0){const a=i.filter(s=>s!==n.validator);a.length!==i.length&&(t=!0,e.setValidators(a))}}if(null!==n.asyncValidator){const i=Iee(e);if(Array.isArray(i)&&i.length>0){const a=i.filter(s=>s!==n.asyncValidator);a.length!==i.length&&(t=!0,e.setAsyncValidators(a))}}}const r=()=>{};return pk(n._rawValidators,r),pk(n._rawAsyncValidators,r),t}function Ree(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Pee(e,n){QR(e,n)}function Lee(e,n){e._syncPendingControls(),n.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const Xnt={provide:na,useExisting:xn(()=>kv)},Cv=(()=>Promise.resolve())();let kv=(()=>{class e extends na{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ct,this.form=new vv({},HR(t),WR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Cv.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),wv(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Cv.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Cv.then(()=>{const r=this._findContainer(t.path),i=new vv({});Pee(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Cv.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Cv.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Lee(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||e)(E(vi,10),E(lu,10),E(lp,8))};static#t=this.\u0275dir=ce({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&xt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[jt([Xnt]),Ce]})}return e})();function $ee(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function Bee(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const Sv=class extends uk{constructor(n=null,t,r){super(YR(t),ZR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ck(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Bee(n)?n.value:n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){$ee(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){$ee(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){Bee(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};let nP=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=ce({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return e})(),jee=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({})}return e})();const rP=new ue("NgModelWithFormControlWarning"),irt={provide:na,useExisting:xn(()=>cp)};let cp=(()=>{class e extends na{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ct,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(fk(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return wv(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){hk(t.control||null,t,!1),function Knt(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Lee(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(hk(r||null,t),(e=>e instanceof Sv)(i)&&(wv(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);Pee(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function jnt(e,n){return fk(e,n)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){QR(this.form,this),this._oldForm&&fk(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||e)(E(vi,10),E(lu,10),E(lp,8))};static#t=this.\u0275dir=ce({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&xt("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[jt([irt]),Ce,Jr]})}return e})();const ort={provide:Vo,useExisting:xn(()=>mk)};let mk=(()=>{class e extends Vo{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,a,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new ct,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function tP(e,n){if(!n)return null;let t,r,i;return Array.isArray(n),n.forEach(a=>{a.constructor===ik?t=a:function qnt(e){return Object.getPrototypeOf(e.constructor)===op}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._added||this._setUpControl(),function eP(e,n){if(!e.hasOwnProperty("model"))return!1;const t=e.model;return!!t.isFirstChange()||!Object.is(n,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function dk(e,n){return[...n.path,e]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||e)(E(na,13),E(vi,10),E(lu,10),E(to,10),E(rP,8))};static#n=this.\u0275dir=ce({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[jt([ort]),Ce,Jr]})}return e})(),ste=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[jee]})}return e})();class ote extends uk{constructor(n,t,r){super(YR(t),ZR(r,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[this._adjustIndex(n)]}push(n,t={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(n,t,r={}){this.controls.splice(n,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(n,t={}){let r=this._adjustIndex(n);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(n,t,r={}){let i=this._adjustIndex(n);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,t={}){Oee(this,0,n),n.forEach((r,i)=>{Nee(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){null!=n&&(n.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n=[],t={}){this._forEachChild((r,i)=>{r.reset(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(n=>n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_adjustIndex(n){return n<0?n+this.length:n}_syncPendingControls(){let n=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){this.controls.forEach((t,r)=>{n(t,r)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(t=>t.enabled&&n(t))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}_find(n){return this.at(n)??null}}function lte(e){return!!e&&(void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn)}let wrt=(()=>{class e{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new e;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let a={};return lte(r)?a=r:null!==r&&(a.validators=r.validator,a.asyncValidators=r.asyncValidator),new vv(i,a)}record(t,r=null){const i=this._reduceControls(t);return new Fee(i,r)}control(t,r,i){let a={};return this.useNonNullable?(lte(r)?a=r:(a.validators=r,a.asyncValidators=i),new Sv(t,{...a,nonNullable:!0})):new Sv(t,r,i)}array(t,r,i){const a=t.map(s=>this._createControl(s));return new ote(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Sv||t instanceof uk?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),cte=(()=>{class e extends wrt{group(t,r=null){return super.group(t,r)}control(t,r,i){return super.control(t,r,i)}array(t,r,i){return super.array(t,r,i)}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Ve(e)))(i||e)}}();static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Crt=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:lp,useValue:t.callSetDisabledState??xv}]}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[ste]})}return e})(),krt=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:rP,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:lp,useValue:t.callSetDisabledState??xv}]}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[ste]})}return e})();function cu(e,...n){return n.length?n.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function dte(e,n=Go){return e=e??$rt,jn((t,r)=>{let i,a=!0;t.subscribe(In(r,s=>{const o=n(s);(a||!e(i,o))&&(a=!1,i=o,r.next(s))}))})}function $rt(e,n){return e===n}let hte=(()=>{class e{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Brt=(()=>{class e{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=Dl(t);return new Sn(i=>{const s=this._observeElement(r).subscribe(i);return()=>{s.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new je,i=this._mutationObserverFactory.create(a=>r.next(a));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}static#e=this.\u0275fac=function(r){return new(r||e)(Y(hte))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Vrt=(()=>{class e{get disabled(){return this._disabled}set disabled(t){this._disabled=Jt(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=ov(t),this._subscribe()}constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new ct,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(bR(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)(E(Brt),E(Le),E(We))};static#t=this.\u0275dir=ce({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return e})(),pte=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({providers:[hte]})}return e})();class gte{constructor(n){this._items=n,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new je,this._typeaheadSubscription=ln.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new je,this.change=new je,n instanceof ff&&(this._itemChangesSubscription=n.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}}))}skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(mr(t=>this._pressedLetters.push(t)),bR(n),Pn(()=>this._pressedLetters.length>0),tt(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const a=(this._activeItemIndex+i)%r.length,s=r[a];if(!this._skipPredicateFn(s)&&0===s.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(a);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,t=10){return this._pageUpAndDown={enabled:n,delta:t},this}setActiveItem(n){const t=this._activeItem;this.updateActiveItem(n),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(n){const t=n.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(a=>!n[a]||this._allowedModifierKeys.indexOf(a)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&i){const a=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(a>0?a:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&i){const a=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(a<s?a:s-1,-1);break}return;default:return void((i||cu(n,"shiftKey"))&&(n.key&&1===n.key.length?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){const t=this._getItemsArray(),r="number"==typeof n?n:t.indexOf(n);this._activeItem=t[r]??null,this._activeItemIndex=r}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+n*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,t){const r=this._getItemsArray();if(r[n]){for(;this._skipPredicateFn(r[n]);)if(!r[n+=t])return;this.setActiveItem(n)}}_getItemsArray(){return this._items instanceof ff?this._items.toArray():this._items}}class Hrt extends gte{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}}class Wrt extends gte{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(n){return this._origin=n,this}setActiveItem(n){super.setActiveItem(n),this.activeItem&&this.activeItem.focus(this._origin)}}let Ck=(()=>{class e{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Grt(e){return!!(e.offsetWidth||e.offsetHeight||"function"==typeof e.getClientRects&&e.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function jrt(e){try{return e.frameElement}catch{return null}}(function eit(e){return e.ownerDocument&&e.ownerDocument.defaultView||window}(t));if(r&&(-1===bte(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),a=bte(t);return t.hasAttribute("contenteditable")?-1!==a:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function Qrt(e){let n=e.nodeName.toLowerCase(),t="input"===n&&e.type;return"text"===t||"password"===t||"select"===n||"textarea"===n}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==a:"video"===i?-1!==a&&(null!==a||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function Jrt(e){return!function Krt(e){return function Yrt(e){return"input"==e.nodeName.toLowerCase()}(e)&&"hidden"==e.type}(e)&&(function qrt(e){let n=e.nodeName.toLowerCase();return"input"===n||"select"===n||"button"===n||"textarea"===n}(e)||function Xrt(e){return function Zrt(e){return"a"==e.nodeName.toLowerCase()}(e)&&e.hasAttribute("href")}(e)||e.hasAttribute("contenteditable")||yte(e))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(r){return new(r||e)(Y(ci))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function yte(e){if(!e.hasAttribute("tabindex")||void 0===e.tabIndex)return!1;let n=e.getAttribute("tabindex");return!(!n||isNaN(parseInt(n,10)))}function bte(e){if(!yte(e))return null;const n=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}class tit{get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}constructor(n,t,r,i,a=!1){this._element=n,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,a||this.attachAnchors()}destroy(){const n=this._startAnchor,t=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){const t=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return"start"==n?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(n),!!r}return t.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){const t=this._getRegionBoundary("start");return t&&t.focus(n),!!t}focusLastTabbableElement(n){const t=this._getRegionBoundary("end");return t&&t.focus(n),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const t=n.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;const t=n.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,t){n?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._ngZone.isStable?n():this._ngZone.onStable.pipe(fr(1)).subscribe(n)}}let uP=(()=>{class e{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new tit(t,this._checker,this._ngZone,this._document,r)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Ck),Y(We),Y(Je))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function dP(e){return 0===e.buttons||0===e.offsetX&&0===e.offsetY}function hP(e){const n=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!(!n||-1!==n.identifier||null!=n.radiusX&&1!==n.radiusX||null!=n.radiusY&&1!==n.radiusY)}const nit=new ue("cdk-input-modality-detector-options"),rit={ignoreKeys:[18,17,224,91,16]},Pg=Eg({passive:!0,capture:!0});let iit=(()=>{class e{get mostRecentModality(){return this._modality.value}constructor(t,r,i,a){this._platform=t,this._mostRecentTarget=null,this._modality=new qi(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(o=>o===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ru(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(dP(s)?"keyboard":"mouse"),this._mostRecentTarget=ru(s))},this._onTouchstart=s=>{hP(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ru(s))},this._options={...rit,...a},this.modalityDetected=this._modality.pipe(iJ(1)),this.modalityChanged=this.modalityDetected.pipe(dte()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Pg),i.addEventListener("mousedown",this._onMousedown,Pg),i.addEventListener("touchstart",this._onTouchstart,Pg)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Pg),document.removeEventListener("mousedown",this._onMousedown,Pg),document.removeEventListener("touchstart",this._onTouchstart,Pg))}static#e=this.\u0275fac=function(r){return new(r||e)(Y(ci),Y(We),Y(Je),Y(nit,8))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const ait=new ue("liveAnnouncerElement",{providedIn:"root",factory:function sit(){return null}}),oit=new ue("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let lit=0,pP=(()=>{class e{constructor(t,r,i,a){this._ngZone=r,this._defaultOptions=a,this._document=i,this._liveElement=t||this._createLiveElement()}announce(t,...r){const i=this._defaultOptions;let a,s;return 1===r.length&&"number"==typeof r[0]?s=r[0]:[a,s]=r,this.clear(),clearTimeout(this._previousTimeout),a||(a=i&&i.politeness?i.politeness:"polite"),null==s&&i&&(s=i.duration),this._liveElement.setAttribute("aria-live",a),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(o=>this._currentResolve=o)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof s&&(this._previousTimeout=setTimeout(()=>this.clear(),s)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",r=this._document.getElementsByClassName(t),i=this._document.createElement("div");for(let a=0;a<r.length;a++)r[a].remove();return i.classList.add(t),i.classList.add("cdk-visually-hidden"),i.setAttribute("aria-atomic","true"),i.setAttribute("aria-live","polite"),i.id="cdk-live-announcer-"+lit++,this._document.body.appendChild(i),i}_exposeAnnouncerToModals(t){const r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<r.length;i++){const a=r[i],s=a.getAttribute("aria-owns");s?-1===s.indexOf(t)&&a.setAttribute("aria-owns",s+" "+t):a.setAttribute("aria-owns",t)}}static#e=this.\u0275fac=function(r){return new(r||e)(Y(ait,8),Y(We),Y(Je),Y(oit,8))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const cit=new ue("cdk-focus-monitor-default-options"),kk=Eg({passive:!0,capture:!0});let Lg=(()=>{class e{constructor(t,r,i,a,s){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new je,this._rootNodeFocusAndBlurListener=o=>{for(let c=ru(o);c;c=c.parentElement)"focus"===o.type?this._onFocus(o,c):this._onBlur(o,c)},this._document=a,this._detectionMode=s?.detectionMode||0}monitor(t,r=!1){const i=Dl(t);if(!this._platform.isBrowser||1!==i.nodeType)return Ue(null);const a=function VJe(e){if(function BJe(){if(null==vR){const e=typeof document<"u"?document.head:null;vR=!(!e||!e.createShadowRoot&&!e.attachShadow)}return vR}()){const n=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}(i)||this._getDocument(),s=this._elementInfo.get(i);if(s)return r&&(s.checkChildren=!0),s.subject;const o={checkChildren:r,subject:new je,rootNode:a};return this._elementInfo.set(i,o),this._registerGlobalListeners(o),o.subject}stopMonitoring(t){const r=Dl(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const a=Dl(t);a===this._getDocument().activeElement?this._getClosestElementsInfo(a).forEach(([o,l])=>this._originChanged(o,r,l)):(this._setOrigin(r),"function"==typeof a.focus&&a.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),a=ru(t);!i||!i.checkChildren&&r!==a||this._originChanged(r,this._getFocusOrigin(a),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,kk),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,kk)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(lr(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,kk),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,kk),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,a)=>{(a===t||i.checkChildren&&a.contains(t))&&r.push([a,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const a=t.labels;if(a)for(let s=0;s<a.length;s++)if(a[s].contains(r))return!0;return!1}static#e=this.\u0275fac=function(r){return new(r||e)(Y(We),Y(ci),Y(iit),Y(Je,8),Y(cit,8))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const vte="cdk-high-contrast-black-on-white",xte="cdk-high-contrast-white-on-black",fP="cdk-high-contrast-active";let wte=(()=>{class e{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=Se(XC).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,a=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(fP,vte,xte),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(fP,vte):2===r&&t.add(fP,xte)}}static#e=this.\u0275fac=function(r){return new(r||e)(Y(ci),Y(Je))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),uit=(()=>{class e{constructor(t){t._applyBodyHighContrastModeCssClasses()}static#e=this.\u0275fac=function(r){return new(r||e)(Y(wte))};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[pte]})}return e})();const dit=["text"];function hit(e,n){if(1&e&&we(0,"mat-pseudo-checkbox",6),2&e){const t=ze();me("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function pit(e,n){1&e&&we(0,"mat-pseudo-checkbox",7),2&e&&me("disabled",ze().disabled)}function fit(e,n){if(1&e&&(B(0,"span",8),ye(1),K()),2&e){const t=ze();ne(1),Ot("(",t.group.label,")")}}const mit=[[["mat-icon"]],"*"],git=["mat-icon","*"],bit=new ue("mat-sanity-checks",{providedIn:"root",factory:function yit(){return!0}});let Cn=(()=>{class e{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!wR()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||e)(Y(wte),Y(bit,8),Y(Je))};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[ap,ap]})}return e})();function Sk(e){return class extends e{get disabled(){return this._disabled}set disabled(n){this._disabled=Jt(n)}constructor(...n){super(...n),this._disabled=!1}}}function Ste(e,n){return class extends e{get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...t){super(...t),this.defaultColor=n,this.color=n}}}function Ik(e){return class extends e{get disableRipple(){return this._disableRipple}set disableRipple(n){this._disableRipple=Jt(n)}constructor(...n){super(...n),this._disableRipple=!1}}}function Ite(e,n=0){return class extends e{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?ov(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=n,this.defaultTabIndex=n}}}function Mte(e){return class extends e{updateErrorState(){const n=this.errorState,a=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);a!==n&&(this.errorState=a,this.stateChanges.next())}constructor(...n){super(...n),this.errorState=!1}}}let mP=(()=>{class e{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class vit{constructor(n,t,r,i=!1){this._renderer=n,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const Ete=Eg({passive:!0,capture:!0});class xit{constructor(){this._events=new Map,this._delegateEventHandler=n=>{const t=ru(n);t&&this._events.get(n.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(a=>a.handleEvent(n))})}}addHandler(n,t,r,i){const a=this._events.get(t);if(a){const s=a.get(r);s?s.add(i):a.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),n.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,Ete)})}removeHandler(n,t,r){const i=this._events.get(n);if(!i)return;const a=i.get(t);a&&(a.delete(r),0===a.size&&i.delete(t),0===i.size&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,Ete)))}}const Dte={enterDuration:225,exitDuration:150},Ate=Eg({passive:!0,capture:!0}),Tte=["mousedown","touchstart"],Nte=["mouseup","mouseleave","touchend","touchcancel"];class Mv{static#e=this._eventManager=new xit;constructor(n,t,r,i){this._target=n,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Dl(r))}fadeInRipple(n,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a={...Dte,...r.animation};r.centered&&(n=i.left+i.width/2,t=i.top+i.height/2);const s=r.radius||function Cit(e,n,t){const r=Math.max(Math.abs(e-t.left),Math.abs(e-t.right)),i=Math.max(Math.abs(n-t.top),Math.abs(n-t.bottom));return Math.sqrt(r*r+i*i)}(n,t,i),o=n-i.left,l=t-i.top,c=a.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=o-s+"px",u.style.top=l-s+"px",u.style.height=2*s+"px",u.style.width=2*s+"px",null!=r.color&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const h=window.getComputedStyle(u),p=h.transitionDuration,f="none"===h.transitionProperty||"0s"===p||"0s, 0s"===p||0===i.width&&0===i.height,m=new vit(this,u,r,f);u.style.transform="scale3d(1, 1, 1)",m.state=0,r.persistent||(this._mostRecentTransientRipple=m);let g=null;return!f&&(c||a.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const y=()=>this._finishRippleTransition(m),b=()=>this._destroyRipple(m);u.addEventListener("transitionend",y),u.addEventListener("transitioncancel",b),g={onTransitionEnd:y,onTransitionCancel:b}}),this._activeRipples.set(m,g),(f||!c)&&this._finishRippleTransition(m),m}fadeOutRipple(n){if(2===n.state||3===n.state)return;const t=n.element,r={...Dte,...n.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",n.state=2,(n._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){const t=Dl(n);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Tte.forEach(r=>{Mv._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Nte.forEach(t=>{this._triggerElement.addEventListener(t,this,Ate)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){0===n.state?this._startFadeOutTransition(n):2===n.state&&this._destroyRipple(n)}_startFadeOutTransition(n){const t=n===this._mostRecentTransientRipple,{persistent:r}=n.config;n.state=1,!r&&(!t||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){const t=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=3,null!==t&&(n.element.removeEventListener("transitionend",t.onTransitionEnd),n.element.removeEventListener("transitioncancel",t.onTransitionCancel)),n.element.remove()}_onMousedown(n){const t=dP(n),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!hP(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=n.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{!n.config.persistent&&(1===n.state||n.config.terminateOnPointerUp&&0===n.state)&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const n=this._triggerElement;n&&(Tte.forEach(t=>Mv._eventManager.removeHandler(t,n,this)),this._pointerUpEventsRegistered&&Nte.forEach(t=>n.removeEventListener(t,this,Ate)))}}const Ote=new ue("mat-ripple-global-options");let Ev=(()=>{class e{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,i,a,s){this._elementRef=t,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new Mv(this,r,t,i)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(We),E(ci),E(Ote,8),E(ds,8))};static#t=this.\u0275dir=ce({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,i){2&r&&Xt("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return e})(),Dv=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[Cn,Cn]})}return e})(),kit=(()=>{class e{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1,this.appearance="full"}static#e=this.\u0275fac=function(r){return new(r||e)(E(ds,8))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(r,i){2&r&&Xt("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("mat-pseudo-checkbox-minimal","minimal"===i.appearance)("mat-pseudo-checkbox-full","full"===i.appearance)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(r,i){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return e})(),Sit=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[Cn]})}return e})();const Fte=new ue("MAT_OPTION_PARENT_COMPONENT"),Rte=new ue("MatOptgroup");let Iit=0;class Mit{constructor(n,t=!1){this.source=n,this.isUserInput=t}}let Eit=(()=>{class e{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=Jt(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(t,r,i,a){this._element=t,this._changeDetectorRef=r,this._parent=i,this.group=a,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Iit++,this.onSelectionChange=new ct,this._stateChanges=new je}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,r){const i=this._getHostElement();"function"==typeof i.focus&&i.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!cu(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=t)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new Mit(this,t))}static#e=this.\u0275fac=function(r){Zp()};static#t=this.\u0275dir=ce({type:e,viewQuery:function(r,i){if(1&r&&hn(dit,7),2&r){let a;ft(a=mt())&&(i._text=a.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}})}return e})(),Pte=(()=>{class e extends Eit{constructor(t,r,i,a){super(t,r,i,a)}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(fi),E(Fte,8),E(Rte,8))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(r,i){1&r&&xt("click",function(){return i._selectViaInteraction()})("keydown",function(s){return i._handleKeydown(s)}),2&r&&(nc("id",i.id),dn("aria-selected",i.selected)("aria-disabled",i.disabled.toString()),Xt("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},exportAs:["matOption"],features:[Ce],ngContentSelectors:git,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],["state","checked","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(r,i){1&r&&(Hi(mit),Ae(0,hit,1,2,"mat-pseudo-checkbox",0),Wt(1),B(2,"span",1,2),Wt(4,1),K(),Ae(5,pit,1,1,"mat-pseudo-checkbox",3),Ae(6,fit,2,1,"span",4),we(7,"div",5)),2&r&&(me("ngIf",i.multiple),ne(5),me("ngIf",!i.multiple&&i.selected&&!i.hideSingleSelectionIndicator),ne(1),me("ngIf",i.group&&i.group._inert),ne(1),me("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[Ev,ma,kit],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return e})(),Lte=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[Dv,Va,Cn,Sit]})}return e})();const Tit=["mat-button",""],Nit=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Oit=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],Rit=["mat-icon-button",""],Pit=["*"],$te={capture:!0},Bte=["focus","click","mouseenter","touchstart"],Av="mat-button-ripple-uninitialized";let Lit=(()=>{class e{constructor(){this._document=Se(Je,{optional:!0}),this._animationMode=Se(ds,{optional:!0}),this._globalRippleOptions=Se(Ote,{optional:!0}),this._platform=Se(ci),this._ngZone=Se(We),this._onInteraction=t=>{if(t.target===this._document)return;const i=t.target.closest(`[${Av}]`);i&&(i.removeAttribute(Av),this._appendRipple(i))},this._ngZone.runOutsideAngular(()=>{for(const t of Bte)this._document?.addEventListener(t,this._onInteraction,$te)})}ngOnDestroy(){for(const t of Bte)this._document?.removeEventListener(t,this._onInteraction,$te)}_appendRipple(t){if(!this._document)return;const r=this._document.createElement("span");r.classList.add("mat-mdc-button-ripple");const i=new $it(t,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);i.rippleConfig.centered=t.hasAttribute("mat-icon-button"),new Mv(i,this._ngZone,r,this._platform).setupTriggerEvents(t),t.append(r)}_createMatRipple(t){if(!this._document)return;t.querySelector(".mat-mdc-button-ripple")?.remove(),t.removeAttribute(Av);const r=this._document.createElement("span");r.classList.add("mat-mdc-button-ripple");const i=new Ev(new Le(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return i._isInitialized=!0,i.trigger=t,t.append(r),i}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class $it{constructor(n,t,r){this._button=n,this._globalRippleOptions=t,this._setRippleConfig(t,r)}_setRippleConfig(n,t){this.rippleConfig=n||{},"NoopAnimations"===t&&(this.rippleConfig.animation={enterDuration:0,exitDuration:0})}get rippleDisabled(){return this._button.hasAttribute("disabled")||!!this._globalRippleOptions?.disabled}}const Bit=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Vit=Ste(Sk(Ik(class{constructor(e){this._elementRef=e}})));let Vte=(()=>{class e extends Vit{get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement)),this._ripple}set ripple(t){this._ripple=t}constructor(t,r,i,a){super(t),this._platform=r,this._ngZone=i,this._animationMode=a,this._focusMonitor=Se(Lg),this._rippleLoader=Se(Lit),this._isFab=!1;const s=t.nativeElement.classList;for(const o of Bit)this._hasHostAttributes(o.selector)&&o.mdcClasses.forEach(l=>{s.add(l)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnChanges(){this._ripple&&(this._ripple.disabled=this.disableRipple||this.disabled)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...t){return t.some(r=>this._elementRef.nativeElement.hasAttribute(r))}static#e=this.\u0275fac=function(r){Zp()};static#t=this.\u0275dir=ce({type:e,features:[Ce,Jr]})}return e})(),Mk=(()=>{class e extends Vte{constructor(t,r,i,a){super(t,r,i,a)}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(ci),E(We),E(ds,8))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:7,hostBindings:function(r,i){2&r&&(dn("disabled",i.disabled||null),Xt("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Ce],attrs:Tit,ngContentSelectors:Oit,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){1&r&&(Hi(Nit),we(0,"span",0),Wt(1),B(2,"span",1),Wt(3,1),K(),Wt(4,2),we(5,"span",2)(6,"span",3)),2&r&&Xt("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return e})(),Hit=(()=>{class e extends Vte{get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement),this._ripple.centered=!0),this._ripple}constructor(t,r,i,a){super(t,r,i,a)}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(ci),E(We),E(ds,8))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["button","mat-icon-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:7,hostBindings:function(r,i){2&r&&(dn("disabled",i.disabled||null),Xt("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Ce],attrs:Rit,ngContentSelectors:Pit,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){1&r&&(Hi(),we(0,"span",0),Wt(1),we(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px;--mdc-icon-button-disabled-icon-color:black;--mdc-icon-button-disabled-icon-opacity:0.38}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;font-size:var(--mdc-icon-button-icon-size);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return e})(),Ek=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[Cn,Dv,Cn]})}return e})();const Wit=["input"],jit=["label"],Git=["*"],qit=new ue("mat-checkbox-default-options",{providedIn:"root",factory:zte});function zte(){return{color:"accent",clickAction:"check-indeterminate"}}const Kit={provide:to,useExisting:xn(()=>gP),multi:!0};class Xit{}let Yit=0;const Ute=zte(),Zit=Ite(Ste(Ik(Sk(class{constructor(e){this._elementRef=e}}))));let yP,Qit=(()=>{class e extends Zit{get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=Jt(t)}constructor(t,r,i,a,s,o,l){super(r),this._changeDetectorRef=i,this._ngZone=a,this._animationMode=o,this._options=l,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new ct,this.indeterminateChange=new ct,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||Ute,this.color=this.defaultColor=this._options.color||Ute.color,this.tabIndex=parseInt(s)||0,this.id=this._uniqueId=`${t}${++Yit}`}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(t){const r=Jt(t);r!=this.checked&&(this._checked=r,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const r=Jt(t);r!==this.disabled&&(this._disabled=r,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const r=t!=this._indeterminate;this._indeterminate=Jt(t),r&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_transitionCheckState(t){let r=this._currentCheckState,i=this._getAnimationTargetElement();if(r!==t&&i&&(this._currentAnimationClass&&i.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(r,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){i.classList.add(this._currentAnimationClass);const a=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{i.classList.remove(a)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const t=this._options?.clickAction;this.disabled||"noop"===t?!this.disabled&&"noop"===t&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==t&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(t){t.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(t,r){if("NoopAnimations"===this._animationMode)return"";switch(t){case 0:if(1===r)return this._animationClasses.uncheckedToChecked;if(3==r)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===r?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===r?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===r?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(t){const r=this._inputElement;r&&(r.nativeElement.indeterminate=t)}static#e=this.\u0275fac=function(r){Zp()};static#t=this.\u0275dir=ce({type:e,viewQuery:function(r,i){if(1&r&&(hn(Wit,5),hn(jit,5),hn(Ev,5)),2&r){let a;ft(a=mt())&&(i._inputElement=a.first),ft(a=mt())&&(i._labelElement=a.first),ft(a=mt())&&(i.ripple=a.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[Ce]})}return e})(),gP=(()=>{class e extends Qit{constructor(t,r,i,a,s,o){super("mat-mdc-checkbox-",t,r,i,a,s,o),this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"}}focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(t){const r=new Xit;return r.source=this,r.checked=t,r}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_onInputClick(){super._handleInputClick()}_onTouchTargetClick(){super._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(t){t.target&&this._labelElement.nativeElement.contains(t.target)&&t.stopPropagation()}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(fi),E(We),Mu("tabindex"),E(ds,8),E(qit,8))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-mdc-checkbox"],hostVars:12,hostBindings:function(r,i){2&r&&(nc("id",i.id),dn("tabindex",null)("aria-label",null)("aria-labelledby",null),Xt("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mdc-checkbox--disabled",i.disabled)("mat-mdc-checkbox-disabled",i.disabled)("mat-mdc-checkbox-checked",i.checked))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[jt([Kit]),Ce],ngContentSelectors:Git,decls:15,vars:19,consts:[[1,"mdc-form-field",3,"click"],[1,"mdc-checkbox"],["checkbox",""],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"checked","indeterminate","disabled","id","required","tabIndex","blur","click","change"],["input",""],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"],["label",""]],template:function(r,i){if(1&r&&(Hi(),B(0,"div",0),xt("click",function(s){return i._preventBubblingFromLabel(s)}),B(1,"div",1,2)(3,"div",3),xt("click",function(){return i._onTouchTargetClick()}),K(),B(4,"input",4,5),xt("blur",function(){return i._onBlur()})("click",function(){return i._onInputClick()})("change",function(s){return i._onInteractionEvent(s)}),K(),we(6,"div",6),B(7,"div",7),ar(),B(8,"svg",8),we(9,"path",9),K(),Er(),we(10,"div",10),K(),we(11,"div",11),K(),B(12,"label",12,13),Wt(14),K()()),2&r){const a=Zl(2);Xt("mdc-form-field--align-end","before"==i.labelPosition),ne(4),Xt("mdc-checkbox--selected",i.checked),me("checked",i.checked)("indeterminate",i.indeterminate)("disabled",i.disabled)("id",i.inputId)("required",i.required)("tabIndex",i.tabIndex),dn("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby)("name",i.name)("value",i.value),ne(7),me("matRippleTrigger",a)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0),ne(1),me("for",i.inputId)}},dependencies:[Ev],styles:['.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mdc-checkbox[hidden]{display:none}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-checkbox{padding:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:var(--mdc-checkbox-disabled-selected-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}}.mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}@keyframes mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}}@keyframes mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}}.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:hover.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox .mdc-checkbox__background{top:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2)}.mdc-checkbox .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:focus:not(:checked):not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color);background-color:var(--mdc-checkbox-selected-focus-icon-color)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}html{--mdc-checkbox-disabled-selected-checkmark-color:#fff;--mdc-checkbox-selected-focus-state-layer-opacity:0.16;--mdc-checkbox-selected-hover-state-layer-opacity:0.04;--mdc-checkbox-selected-pressed-state-layer-opacity:0.16;--mdc-checkbox-unselected-focus-state-layer-opacity:0.16;--mdc-checkbox-unselected-hover-state-layer-opacity:0.04;--mdc-checkbox-unselected-pressed-state-layer-opacity:0.16}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox .mdc-checkbox__background{-webkit-print-color-adjust:exact;color-adjust:exact}.mat-mdc-checkbox._mat-animation-noopable *,.mat-mdc-checkbox._mat-animation-noopable *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default}.mat-mdc-checkbox label:empty{display:none}.cdk-high-contrast-active .mat-mdc-checkbox.mat-mdc-checkbox-disabled{opacity:.5}.cdk-high-contrast-active .mat-mdc-checkbox .mdc-checkbox__checkmark{--mdc-checkbox-selected-checkmark-color: CanvasText;--mdc-checkbox-disabled-selected-checkmark-color: CanvasText}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return e})(),Hte=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({})}return e})(),tat=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[Cn,Dv,Hte,Cn,Hte]})}return e})(),nat=1;const Dk={};function Wte(e){return e in Dk&&(delete Dk[e],!0)}const rat={setImmediate(e){const n=nat++;return Dk[n]=!0,yP||(yP=Promise.resolve()),yP.then(()=>Wte(n)&&e()),n},clearImmediate(e){Wte(e)}},{setImmediate:iat,clearImmediate:aat}=rat,Ak={setImmediate(...e){const{delegate:n}=Ak;return(n?.setImmediate||iat)(...e)},clearImmediate(e){const{delegate:n}=Ak;return(n?.clearImmediate||aat)(e)},delegate:void 0},bP=new class oat extends yR{flush(n){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;n=n||r.shift();do{if(i=n.execute(n.state,n.delay))break}while((n=r[0])&&n.id===t&&r.shift());if(this._active=!1,i){for(;(n=r[0])&&n.id===t&&r.shift();)n.unsubscribe();throw i}}}(class sat extends mR{constructor(n,t){super(n,t),this.scheduler=n,this.work=t}requestAsyncId(n,t,r=0){return null!==r&&r>0?super.requestAsyncId(n,t,r):(n.actions.push(this),n._scheduled||(n._scheduled=Ak.setImmediate(n.flush.bind(n,void 0))))}recycleAsyncId(n,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(n,t,r);const{actions:a}=n;null!=t&&(null===(i=a[a.length-1])||void 0===i?void 0:i.id)!==t&&(Ak.clearImmediate(t),n._scheduled===t&&(n._scheduled=void 0))}});function jte(e,n){return n?t=>Zy(n.pipe(fr(1),function lat(){return jn((e,n)=>{e.subscribe(In(n,Os))})}()),t.pipe(jte(e))):Lr((t,r)=>di(e(t,r)).pipe(fr(1),PH(t)))}function Gte(e,n=qC){const t=kR(e,n);return jte(()=>t)}class _P{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(n){this._attachedHost=n}}class Tv extends _P{constructor(n,t,r,i,a){super(),this.component=n,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=a}}class Nv extends _P{constructor(n,t,r,i){super(),this.templateRef=n,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(n,t=this.context){return this.context=t,super.attach(n)}detach(){return this.context=void 0,super.detach()}}class cat extends _P{constructor(n){super(),this.element=n instanceof Le?n.nativeElement:n}}class Tk{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){return n instanceof Tv?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof Nv?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof cat?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class uat extends Tk{constructor(n,t,r,i,a){super(),this.outletElement=n,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=s=>{const o=s.element,l=this._document.createComment("dom-portal");o.parentNode.insertBefore(l,o),this.outletElement.appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(o,l)})},this._document=a}attachComponentPortal(n){const r=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component);let i;return n.viewContainerRef?(i=n.viewContainerRef.createComponent(r,n.viewContainerRef.length,n.injector||n.viewContainerRef.injector,n.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(n.injector||this._defaultInjector||dr.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=n,i}attachTemplatePortal(n){let t=n.viewContainerRef,r=t.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=n,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}}let Ov=(()=>{class e extends Tk{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new ct,this.attachDomPortal=a=>{const s=a.element,o=this._document.createComment("dom-portal");a.setAttachedHost(this),s.parentNode.insertBefore(o,s),this._getRootNode().appendChild(s),this._attachedPortal=a,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(s,o)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,a=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),s=r.createComponent(a,r.length,t.injector||r.injector,t.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=t,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(r){return new(r||e)(E(Kp),E(fa),E(Je))};static#t=this.\u0275dir=ce({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Ce]})}return e})(),$g=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({})}return e})();class qte{}class dat{}const Ol="*";function Fl(e,n){return{type:7,name:e,definitions:n,options:{}}}function Is(e,n=null){return{type:4,styles:n,timings:e}}function Xte(e,n=null){return{type:2,steps:e,options:n}}function Un(e){return{type:6,styles:e,offset:null}}function Ea(e,n,t){return{type:0,name:e,styles:n,options:t}}function Ya(e,n,t=null){return{type:1,expr:e,animation:n,options:t}}function vP(e=null){return{type:9,options:e}}function xP(e,n,t=null){return{type:11,selector:e,animation:n,options:t}}function Yte(e){Promise.resolve().then(e)}class Fv{constructor(n=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=n+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Yte(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Zte{constructor(n){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=n;let t=0,r=0,i=0;const a=this.players.length;0==a?Yte(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==a&&this._onFinish()}),s.onDestroy(()=>{++r==a&&this._onDestroy()}),s.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((s,o)=>Math.max(s,o.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const t=n*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const n=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const hat=["addListener","removeListener"],pat=["addEventListener","removeEventListener"],fat=["on","off"];function CP(e,n,t,r){if(_t(t)&&(r=t,t=void 0),r)return CP(e,n,t).pipe(l2(r));const[i,a]=function yat(e){return _t(e.addEventListener)&&_t(e.removeEventListener)}(e)?pat.map(s=>o=>e[s](n,o,t)):function mat(e){return _t(e.addListener)&&_t(e.removeListener)}(e)?hat.map(Qte(e,n)):function gat(e){return _t(e.on)&&_t(e.off)}(e)?fat.map(Qte(e,n)):[];if(!i&&BS(e))return Lr(s=>CP(s,n,t))(di(e));if(!i)throw new TypeError("Invalid event target");return new Sn(s=>{const o=(...l)=>s.next(1<l.length?l:l[0]);return i(o),()=>a(o)})}function Qte(e,n){return t=>r=>e[t](n,r)}const Rv={schedule(e){let n=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Rv;r&&(n=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=n(a=>{t=void 0,e(a)});return new ln(()=>t?.(i))},requestAnimationFrame(...e){const{delegate:n}=Rv;return(n?.requestAnimationFrame||requestAnimationFrame)(...e)},cancelAnimationFrame(...e){const{delegate:n}=Rv;return(n?.cancelAnimationFrame||cancelAnimationFrame)(...e)},delegate:void 0};new class _at extends yR{flush(n){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;n=n||r.shift();do{if(i=n.execute(n.state,n.delay))break}while((n=r[0])&&n.id===t&&r.shift());if(this._active=!1,i){for(;(n=r[0])&&n.id===t&&r.shift();)n.unsubscribe();throw i}}}(class bat extends mR{constructor(n,t){super(n,t),this.scheduler=n,this.work=t}requestAsyncId(n,t,r=0){return null!==r&&r>0?super.requestAsyncId(n,t,r):(n.actions.push(this),n._scheduled||(n._scheduled=Rv.requestAnimationFrame(()=>n.flush(void 0))))}recycleAsyncId(n,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(n,t,r);const{actions:a}=n;null!=t&&(null===(i=a[a.length-1])||void 0===i?void 0:i.id)!==t&&(Rv.cancelAnimationFrame(t),n._scheduled=void 0)}});function Jte(e,n=qC){return function xat(e){return jn((n,t)=>{let r=!1,i=null,a=null,s=!1;const o=()=>{if(a?.unsubscribe(),a=null,r){r=!1;const c=i;i=null,t.next(c)}s&&t.complete()},l=()=>{a=null,s&&t.complete()};n.subscribe(In(t,c=>{r=!0,i=c,a||di(e(c)).subscribe(a=In(t,o,l))},()=>{s=!0,(!r||!a||a.closed)&&t.complete()}))})}(()=>kR(e,n))}let Cat=(()=>{class e{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new je,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Sn(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(Jte(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ue()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Pn(a=>!a||i.indexOf(a)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,a)=>{this._scrollableContainsElement(a,t)&&r.push(a)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Dl(r),a=t.getElementRef().nativeElement;do{if(i==a)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>CP(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(We),Y(ci),Y(Je,8))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),kP=(()=>{class e{constructor(t,r,i){this._platform=t,this._change=new je,this._changeListener=a=>{this._change.next(a)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,a=i.getBoundingClientRect();return{top:-a.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-a.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Jte(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(r){return new(r||e)(Y(ci),Y(We),Y(Je,8))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Nk=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({})}return e})(),ene=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[ap,Nk,ap,Nk]})}return e})();const tne=$Je();class Iat{constructor(n,t){this._viewportRuler=n,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=Pr(-this._previousScrollPosition.left),n.style.top=Pr(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const n=this._document.documentElement,r=n.style,i=this._document.body.style,a=r.scrollBehavior||"",s=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),tne&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),tne&&(r.scrollBehavior=a,i.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class Mat{constructor(n,t,r,i){this._scrollDispatcher=n,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(n){this._overlayRef=n}enable(){if(this._scrollSubscription)return;const n=this._scrollDispatcher.scrolled(0).pipe(Pn(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class nne{enable(){}disable(){}attach(){}}function SP(e,n){return n.some(t=>e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}function rne(e,n){return n.some(t=>e.top<t.top||e.bottom>t.bottom||e.left<t.left||e.right>t.right)}class Eat{constructor(n,t,r,i){this._scrollDispatcher=n,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(n){this._overlayRef=n}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();SP(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Dat=(()=>{class e{constructor(t,r,i,a){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new nne,this.close=s=>new Mat(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new Iat(this._viewportRuler,this._document),this.reposition=s=>new Eat(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=a}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Cat),Y(kP),Y(We),Y(Je))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class Pv{constructor(n){if(this.scrollStrategy=new nne,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,n){const t=Object.keys(n);for(const r of t)void 0!==n[r]&&(this[r]=n[r])}}}class Aat{constructor(n,t){this.connectionPair=n,this.scrollableViewProperties=t}}let ine=(()=>{class e{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Je))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Tat=(()=>{class e extends ine{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const a=this._attachedOverlays;for(let s=a.length-1;s>-1;s--)if(a[s]._keydownEvents.observers.length>0){const o=a[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>o.next(i)):o.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Je),Y(We,8))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Nat=(()=>{class e extends ine{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=ru(a)},this._clickListener=a=>{const s=ru(a),o="click"===a.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(s)||u.overlayElement.contains(o))break;const h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(a)):h.next(a)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Je),Y(ci),Y(We,8))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ok=(()=>{class e{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||wR()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let a=0;a<i.length;a++)i[a].remove()}const r=this._document.createElement("div");r.classList.add(t),wR()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Je),Y(ci))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class Lv{constructor(n,t,r,i,a,s,o,l,c,u=!1){this._portalOutlet=n,this._host=t,this._pane=r,this._config=i,this._ngZone=a,this._keyboardDispatcher=s,this._document=o,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new je,this._attachments=new je,this._detachments=new je,this._locationChanges=ln.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new je,this._outsidePointerEvents=new je,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(fr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){const n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,n&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config={...this._config,...n},this._updateElementSize()}setDirection(n){this._config={...this._config,direction:n},this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){const n=this._config.direction;return n?"string"==typeof n?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const n=this._pane.style;n.width=Pr(this._config.width),n.height=Pr(this._config.height),n.minWidth=Pr(this._config.minWidth),n.minHeight=Pr(this._config.minHeight),n.maxWidth=Pr(this._config.maxWidth),n.maxHeight=Pr(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){const n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const n=this._backdropElement;if(n){if(this._animationsDisabled)return void this._disposeBackdrop(n);n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",this._backdropTransitionendHandler)}),n.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(n)},500))}}_toggleClasses(n,t,r){const i=jC(t||[]).filter(a=>!!a);i.length&&(r?n.classList.add(...i):n.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const n=this._ngZone.onStable.pipe(lr(os(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){const n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",this._backdropTransitionendHandler),n.remove(),this._backdropElement===n&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const ane="cdk-overlay-connected-position-bounding-box",Oat=/([A-Za-z%]+)$/;class Fat{get positions(){return this._preferredPositions}constructor(n,t,r,i,a){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=a,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new je,this._resizeSubscription=ln.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(n)}attach(n){this._validatePositions(),n.hostElement.classList.add(ane),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,a=[];let s;for(let o of this._preferredPositions){let l=this._getOriginPoint(n,i,o),c=this._getOverlayPoint(l,t,o),u=this._getOverlayFit(c,t,r,o);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,l);this._canFitWithFlexibleDimensions(u,c,r)?a.push({position:o,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,o)}):(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:o,overlayRect:t})}if(a.length){let o=null,l=-1;for(const c of a){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,o=c)}return this._isPushed=!1,void this._applyPosition(o.position,o.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&dp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(ane),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,t)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,-1===n.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,t,r){let i,a;if("center"==r.originX)i=n.left+n.width/2;else{const s=this._isRtl()?n.right:n.left,o=this._isRtl()?n.left:n.right;i="start"==r.originX?s:o}return t.left<0&&(i-=t.left),a="center"==r.originY?n.top+n.height/2:"top"==r.originY?n.top:n.bottom,t.top<0&&(a-=t.top),{x:i,y:a}}_getOverlayPoint(n,t,r){let i,a;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,a="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:n.x+i,y:n.y+a}}_getOverlayFit(n,t,r,i){const a=one(t);let{x:s,y:o}=n,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(s+=l),c&&(o+=c);let d=0-o,p=o+a.height-r.height,f=this._subtractOverflows(a.width,0-s,s+a.width-r.width),m=this._subtractOverflows(a.height,d,p),g=f*m;return{visibleArea:g,isCompletelyWithinViewport:a.width*a.height===g,fitsInViewportVertically:m===a.height,fitsInViewportHorizontally:f==a.width}}_canFitWithFlexibleDimensions(n,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,a=r.right-t.x,s=sne(this._overlayRef.getConfig().minHeight),o=sne(this._overlayRef.getConfig().minWidth);return(n.fitsInViewportVertically||null!=s&&s<=i)&&(n.fitsInViewportHorizontally||null!=o&&o<=a)}return!1}_pushOverlayOnScreen(n,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};const i=one(t),a=this._viewportRect,s=Math.max(n.x+i.width-a.width,0),o=Math.max(n.y+i.height-a.height,0),l=Math.max(a.top-r.top-n.y,0),c=Math.max(a.left-r.left-n.x,0);let u=0,h=0;return u=i.width<=a.width?c||-s:n.x<this._viewportMargin?a.left-r.left-n.x:0,h=i.height<=a.height?l||-o:n.y<this._viewportMargin?a.top-r.top-n.y:0,this._previousPushAmount={x:u,y:h},{x:n.x+u,y:n.y+h}}_applyPosition(n,t){if(this._setTransformOrigin(n),this._setOverlayElementStyles(t,n),this._setBoundingBoxStyles(t,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._lastPosition=n,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new Aat(n,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=n.overlayY;r="center"===n.overlayX?"center":this._isRtl()?"start"===n.overlayX?"right":"left":"start"===n.overlayX?"left":"right";for(let a=0;a<t.length;a++)t[a].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(n,t){const r=this._viewportRect,i=this._isRtl();let a,s,o,u,h,d;if("top"===t.overlayY)s=n.y,a=r.height-s+this._viewportMargin;else if("bottom"===t.overlayY)o=r.height-n.y+2*this._viewportMargin,a=r.height-o+this._viewportMargin;else{const p=Math.min(r.bottom-n.y+r.top,n.y),f=this._lastBoundingBoxSize.height;a=2*p,s=n.y-p,a>f&&!this._isInitialRender&&!this._growAfterOpen&&(s=n.y-f/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)d=r.width-n.x+this._viewportMargin,u=n.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)h=n.x,u=r.right-n.x;else{const p=Math.min(r.right-n.x+r.left,n.x),f=this._lastBoundingBoxSize.width;u=2*p,h=n.x-p,u>f&&!this._isInitialRender&&!this._growAfterOpen&&(h=n.x-f/2)}return{top:s,left:h,bottom:o,right:d,width:u,height:a}}_setBoundingBoxStyles(n,t){const r=this._calculateBoundingBoxRect(n,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const a=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;i.height=Pr(r.height),i.top=Pr(r.top),i.bottom=Pr(r.bottom),i.width=Pr(r.width),i.left=Pr(r.left),i.right=Pr(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",a&&(i.maxHeight=Pr(a)),s&&(i.maxWidth=Pr(s))}this._lastBoundingBoxSize=r,dp(this._boundingBox.style,i)}_resetBoundingBoxStyles(){dp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){dp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,t){const r={},i=this._hasExactPosition(),a=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){const u=this._viewportRuler.getViewportScrollPosition();dp(r,this._getExactOverlayY(t,n,u)),dp(r,this._getExactOverlayX(t,n,u))}else r.position="static";let o="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(o+=`translateX(${l}px) `),c&&(o+=`translateY(${c}px)`),r.transform=o.trim(),s.maxHeight&&(i?r.maxHeight=Pr(s.maxHeight):a&&(r.maxHeight="")),s.maxWidth&&(i?r.maxWidth=Pr(s.maxWidth):a&&(r.maxWidth="")),dp(this._pane.style,r)}_getExactOverlayY(n,t,r){let i={top:"",bottom:""},a=this._getOverlayPoint(t,this._overlayRect,n);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,r)),"bottom"===n.overlayY?i.bottom=this._document.documentElement.clientHeight-(a.y+this._overlayRect.height)+"px":i.top=Pr(a.y),i}_getExactOverlayX(n,t,r){let s,i={left:"",right:""},a=this._getOverlayPoint(t,this._overlayRect,n);return this._isPushed&&(a=this._pushOverlayOnScreen(a,this._overlayRect,r)),s=this._isRtl()?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left","right"===s?i.right=this._document.documentElement.clientWidth-(a.x+this._overlayRect.width)+"px":i.left=Pr(a.x),i}_getScrollVisibility(){const n=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:rne(n,r),isOriginOutsideView:SP(n,r),isOverlayClipped:rne(t,r),isOverlayOutsideView:SP(t,r)}}_subtractOverflows(n,...t){return t.reduce((r,i)=>r-Math.max(i,0),n)}_getNarrowedViewportRect(){const n=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+n-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:n-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,t){return"x"===t?null==n.offsetX?this._offsetX:n.offsetX:null==n.offsetY?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&jC(n).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){const n=this._origin;if(n instanceof Le)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();const t=n.width||0,r=n.height||0;return{top:n.y,bottom:n.y+r,left:n.x,right:n.x+t,height:r,width:t}}}function dp(e,n){for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function sne(e){if("number"!=typeof e&&null!=e){const[n,t]=e.split(Oat);return t&&"px"!==t?null:parseFloat(n)}return e||null}function one(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}const lne="cdk-global-overlay-wrapper";class Rat{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(n){const t=n.getConfig();this._overlayRef=n,this._width&&!t.width&&n.updateSize({width:this._width}),this._height&&!t.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(lne),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const n=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:a,maxWidth:s,maxHeight:o}=r,l=!("100%"!==i&&"100vw"!==i||s&&"100%"!==s&&"100vw"!==s),c=!("100%"!==a&&"100vh"!==a||o&&"100%"!==o&&"100vh"!==o),u=this._xPosition,h=this._xOffset,d="rtl"===this._overlayRef.getConfig().direction;let p="",f="",m="";l?m="flex-start":"center"===u?(m="center",d?f=h:p=h):d?"left"===u||"end"===u?(m="flex-end",p=h):("right"===u||"start"===u)&&(m="flex-start",f=h):"left"===u||"start"===u?(m="flex-start",p=h):("right"===u||"end"===u)&&(m="flex-end",f=h),n.position=this._cssPosition,n.marginLeft=l?"0":p,n.marginTop=c?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=l?"0":f,t.justifyContent=m,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const n=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(lne),r.justifyContent=r.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}}let Pat=(()=>{class e{constructor(t,r,i,a){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=a}global(){return new Rat}flexibleConnectedTo(t){return new Fat(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(kP),Y(Je),Y(ci),Y(Ok))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Lat=0,Ms=(()=>{class e{constructor(t,r,i,a,s,o,l,c,u,h,d,p){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=a,this._keyboardDispatcher=s,this._injector=o,this._ngZone=l,this._document=c,this._directionality=u,this._location=h,this._outsideClickDispatcher=d,this._animationsModuleType=p}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),a=this._createPortalOutlet(i),s=new Pv(t);return s.direction=s.direction||this._directionality.value,new Lv(a,r,i,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+Lat++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(ic)),new uat(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Dat),Y(Ok),Y(Kp),Y(Pat),Y(Tat),Y(dr),Y(We),Y(Je),Y(Al),Y(Hy),Y(Nat),Y(ds,8))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const $at=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],cne=new ue("cdk-connected-overlay-scroll-strategy");let IP=(()=>{class e{constructor(t){this.elementRef=t}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le))};static#t=this.\u0275dir=ce({type:e,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0})}return e})(),une=(()=>{class e{get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Jt(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=Jt(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=Jt(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=Jt(t)}get push(){return this._push}set push(t){this._push=Jt(t)}constructor(t,r,i,a,s){this._overlay=t,this._dir=s,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=ln.EMPTY,this._attachSubscription=ln.EMPTY,this._detachSubscription=ln.EMPTY,this._positionSubscription=ln.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new ct,this.positionChange=new ct,this.attach=new ct,this.detach=new ct,this.overlayKeydown=new ct,this.overlayOutsideClick=new ct,this._templatePortal=new Nv(r,i),this._scrollStrategyFactory=a,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=$at);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),27===r.keyCode&&!this.disableClose&&!cu(r)&&(r.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{this.overlayOutsideClick.next(r)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),r=new Pv({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(r.width=this.width),(this.height||0===this.height)&&(r.height=this.height),(this.minWidth||0===this.minWidth)&&(r.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(t){const r=this.positions.map(i=>({originX:i.originX,originY:i.originY,overlayX:i.overlayX,overlayY:i.overlayY,offsetX:i.offsetX||this.offsetX,offsetY:i.offsetY||this.offsetY,panelClass:i.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof IP?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function Sat(e,n=!1){return jn((t,r)=>{let i=0;t.subscribe(In(r,a=>{const s=e(a,i++);(s||n)&&r.next(a),!s&&r.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)(E(Ms),E($a),E(fa),E(cne),E(Al,8))};static#t=this.\u0275dir=ce({type:e,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[Jr]})}return e})();const Vat={provide:cne,deps:[Ms],useFactory:function Bat(e){return()=>e.scrollStrategies.reposition()}};let $v=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({providers:[Ms,Vat],imports:[ap,$g,ene,ene]})}return e})();const zat=["mat-menu-item",""];function Uat(e,n){1&e&&(ar(),B(0,"svg",3),we(1,"polygon",4),K())}const Hat=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],Wat=["mat-icon, [matMenuItemIcon]","*"];function jat(e,n){if(1&e){const t=ps();B(0,"div",0),xt("keydown",function(i){return ei(t),ti(ze()._handleKeydown(i))})("click",function(){return ei(t),ti(ze().closed.emit("click"))})("@transformMenu.start",function(i){return ei(t),ti(ze()._onAnimationStart(i))})("@transformMenu.done",function(i){return ei(t),ti(ze()._onAnimationDone(i))}),B(1,"div",1),Wt(2),K()()}if(2&e){const t=ze();me("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),dn("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const Gat=["*"],MP=new ue("MAT_MENU_PANEL"),qat=Ik(Sk(class{}));let Fk=(()=>{class e extends qat{constructor(t,r,i,a,s){super(),this._elementRef=t,this._document=r,this._focusMonitor=i,this._parentMenu=a,this._changeDetectorRef=s,this.role="menuitem",this._hovered=new je,this._focused=new je,this._highlighted=!1,this._triggersSubmenu=!1,a?.addItem?.(this)}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),r=t.querySelectorAll("mat-icon, .material-icons");for(let i=0;i<r.length;i++)r[i].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(Je),E(Lg),E(MP,8),E(fi))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(r,i){1&r&&xt("click",function(s){return i._checkDisabled(s)})("mouseenter",function(){return i._handleMouseEnter()}),2&r&&(dn("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled)("disabled",i.disabled||null),Xt("mat-mdc-menu-item-highlighted",i._highlighted)("mat-mdc-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[Ce],attrs:zat,ngContentSelectors:Wat,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false","aria-hidden","true",4,"ngIf"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(r,i){1&r&&(Hi(Hat),Wt(0),B(1,"span",0),Wt(2,1),K(),we(3,"div",1),Ae(4,Uat,2,0,"svg",2)),2&r&&(ne(3),me("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),ne(1),me("ngIf",i._triggersSubmenu))},dependencies:[ma,Ev],encapsulation:2,changeDetection:0})}return e})();const Kat=new ue("MatMenuContent"),Rk={transformMenu:Fl("transformMenu",[Ea("void",Un({opacity:0,transform:"scale(0.8)"})),Ya("void => enter",Is("120ms cubic-bezier(0, 0, 0.2, 1)",Un({opacity:1,transform:"scale(1)"}))),Ya("* => void",Is("100ms 25ms linear",Un({opacity:0})))]),fadeInItems:Fl("fadeInItems",[Ea("showing",Un({opacity:1})),Ya("void => *",[Un({opacity:0}),Is("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Xat=0;const dne=new ue("mat-menu-default-options",{providedIn:"root",factory:function Yat(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Bv=(()=>{class e{get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Jt(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Jt(t)}set panelClass(t){const r=this._previousPanelClass;r&&r.length&&r.split(" ").forEach(i=>{this._classList[i]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(i=>{this._classList[i]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}constructor(t,r,i,a){this._elementRef=t,this._ngZone=r,this._changeDetectorRef=a,this._directDescendantItems=new ff,this._classList={},this._panelAnimationState="void",this._animationDone=new je,this.closed=new ct,this.close=this.closed,this.panelId="mat-menu-panel-"+Xat++,this.overlayPanelClass=i.overlayPanelClass||"",this._xPosition=i.xPosition,this._yPosition=i.yPosition,this.backdropClass=i.backdropClass,this._overlapTrigger=i.overlapTrigger,this._hasBackdrop=i.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Wrt(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(ol(this._directDescendantItems),ri(t=>os(...t.map(r=>r._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const r=this._keyManager;if("enter"===this._panelAnimationState&&r.activeItem?._hasFocus()){const i=t.toArray(),a=Math.max(0,Math.min(i.length-1,r.activeItemIndex||0));i[a]&&!i[a].disabled?r.setActiveItem(a):r.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(ol(this._directDescendantItems),ri(r=>os(...r.map(i=>i._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const r=t.keyCode,i=this._keyManager;switch(r){case 27:cu(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&i.setFocusOrigin("keyboard"),void i.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(fr(1)).subscribe(()=>{let r=null;if(this._directDescendantItems.length&&(r=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!r||!r.contains(document.activeElement)){const i=this._keyManager;i.setFocusOrigin(t).setFirstItemActive(),!i.activeItem&&r&&r.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const r=Math.min(this._baseElevation+t,24),i=`${this._elevationPrefix}${r}`,a=Object.keys(this._classList).find(s=>s.startsWith(this._elevationPrefix));(!a||a===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[i]=!0,this._previousElevation=i)}setPositionClasses(t=this.xPosition,r=this.yPosition){const i=this._classList;i["mat-menu-before"]="before"===t,i["mat-menu-after"]="after"===t,i["mat-menu-above"]="above"===r,i["mat-menu-below"]="below"===r,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(ol(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(We),E(dne),E(fi))};static#t=this.\u0275dir=ce({type:e,contentQueries:function(r,i,a){if(1&r&&(Ei(a,Kat,5),Ei(a,Fk,5),Ei(a,Fk,4)),2&r){let s;ft(s=mt())&&(i.lazyContent=s.first),ft(s=mt())&&(i._allItems=s),ft(s=mt())&&(i.items=s)}},viewQuery:function(r,i){if(1&r&&hn($a,5),2&r){let a;ft(a=mt())&&(i.templateRef=a.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}})}return e})(),Zat=(()=>{class e extends Bv{constructor(t,r,i,a){super(t,r,i,a),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(We),E(dne),E(fi))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["mat-menu"]],hostAttrs:["ngSkipHydration",""],hostVars:3,hostBindings:function(r,i){2&r&&dn("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[jt([{provide:MP,useExisting:e}]),Ce],ngContentSelectors:Gat,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(r,i){1&r&&(Hi(),Ae(0,jat,3,6,"ng-template"))},dependencies:[Lu],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mdc-menu-surface{max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));z-index:8;border-radius:var(--mdc-shape-medium, 4px)}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[Rk.transformMenu,Rk.fadeInItems]},changeDetection:0})}return e})();const hne=new ue("mat-menu-scroll-strategy"),Jat={provide:hne,deps:[Ms],useFactory:function Qat(e){return()=>e.scrollStrategies.reposition()}},pne=Eg({passive:!0});let est=(()=>{class e{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(t,r,i,a,s,o,l,c,u){this._overlay=t,this._element=r,this._viewContainerRef=i,this._menuItemInstance=o,this._dir=l,this._focusMonitor=c,this._ngZone=u,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=ln.EMPTY,this._hoverSubscription=ln.EMPTY,this._menuCloseSubscription=ln.EMPTY,this._changeDetectorRef=Se(fi),this._handleTouchStart=h=>{hP(h)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new ct,this.onMenuOpen=this.menuOpened,this.menuClosed=new ct,this.onMenuClose=this.menuClosed,this._scrollStrategy=a,this._parentMaterialMenu=s instanceof Bv?s:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,pne)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,pne),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;const r=this._createOverlay(t),i=r.getConfig(),a=i.positionStrategy;this._setPosition(t,a),i.hasBackdrop=null==t.hasBackdrop?!this.triggersSubmenu():t.hasBackdrop,r.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof Bv&&(t._startAnimation(),t._directDescendantItems.changes.pipe(lr(t.close)).subscribe(()=>{a.withLockedPosition(!1).reapplyLastPosition(),a.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const r=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,r instanceof Bv?(r._resetAnimation(),r.lazyContent?r._animationDone.pipe(Pn(i=>"void"===i.toState),fr(1),lr(r.lazyContent._attached)).subscribe({next:()=>r.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),r?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let r=0,i=t.parentMenu;for(;i;)r++,i=i.parentMenu;t.setElevation(r)}}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){const r=this._getOverlayConfig(t);this._subscribeToPositions(t,r.positionStrategy),this._overlayRef=this._overlay.create(r),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new Pv({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,r){t.setPositionClasses&&r.positionChanges.subscribe(i=>{const a="start"===i.connectionPair.overlayX?"after":"before",s="top"===i.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(a,s)):t.setPositionClasses(a,s)})}_setPosition(t,r){let[i,a]="before"===t.xPosition?["end","start"]:["start","end"],[s,o]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[l,c]=[s,o],[u,h]=[i,a],d=0;if(this.triggersSubmenu()){if(h=i="before"===t.xPosition?"start":"end",a=u="end"===i?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const p=this._parentMaterialMenu.items.first;this._parentInnerPadding=p?p._getHostElement().offsetTop:0}d="bottom"===s?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(l="top"===s?"bottom":"top",c="top"===o?"bottom":"top");r.withPositions([{originX:i,originY:l,overlayX:u,overlayY:s,offsetY:d},{originX:a,originY:l,overlayX:h,overlayY:s,offsetY:d},{originX:i,originY:c,overlayX:u,overlayY:o,offsetY:-d},{originX:a,originY:c,overlayX:h,overlayY:o,offsetY:-d}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),r=this._overlayRef.detachments();return os(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:Ue(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Pn(s=>s!==this._menuItemInstance),Pn(()=>this._menuOpen)):Ue(),r)}_handleMousedown(t){dP(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const r=t.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Pn(t=>t===this._menuItemInstance&&!t.disabled),Gte(0,bP)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Bv&&this.menu._isAnimating?this.menu._animationDone.pipe(fr(1),Gte(0,bP),lr(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new Nv(t.templateRef,this._viewContainerRef)),this._portal}static#e=this.\u0275fac=function(r){return new(r||e)(E(Ms),E(Le),E(fa),E(hne),E(MP,8),E(Fk,10),E(Al,8),E(Lg),E(We))};static#t=this.\u0275dir=ce({type:e,hostVars:3,hostBindings:function(r,i){1&r&&xt("click",function(s){return i._handleClick(s)})("mousedown",function(s){return i._handleMousedown(s)})("keydown",function(s){return i._handleKeydown(s)}),2&r&&dn("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}})}return e})(),tst=(()=>{class e extends est{static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Ve(e)))(i||e)}}();static#t=this.\u0275dir=ce({type:e,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[Ce]})}return e})(),nst=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({providers:[Jat],imports:[Va,Dv,Cn,$v,Nk,Cn]})}return e})();function rst(e,n){1&e&&c0(0)}function ist(e,n){1&e&&c0(0)}const fne=function(e){return{$implicit:e}};function ast(e,n){if(1&e){const t=ps();B(0,"button",7),xt("click",function(){ei(t);const i=ze().$implicit;return ti(ze().setActiveLang(i.id))}),B(1,"span",8),Ae(2,ist,1,0,"ng-container",1),B(3,"span",9),ye(4),K()()()}if(2&e){const t=ze().$implicit;ze();const r=Zl(7);ne(2),me("ngTemplateOutlet",r)("ngTemplateOutletContext",$y(3,fne,t.id)),ne(2),On(t.label)}}function sst(e,n){if(1&e&&(Ql(0),Ae(1,ast,5,5,"button",6),Jl()),2&e){const t=n.$implicit;ne(1),me("ngIf",t)}}function ost(e,n){if(1&e&&(B(0,"span",11),we(1,"img",12),K()),2&e){const t=ze().$implicit,r=ze();ne(1),me("src","assets/images/flags/"+r.flagCodes[t].toUpperCase()+".svg",jp)("alt","Flag image for "+t)}}function lst(e,n){if(1&e&&Ae(0,ost,2,2,"span",10),2&e){const t=n.$implicit;me("ngIf",ze().flagCodes[t])}}let EP=(()=>{class e{constructor(t,r){this._changeDetectorRef=t,this._translocoService=r,this.activeLang="",this.flagCodes={en:"us",es:"es"}}ngOnInit(){this.availableLangs=this._translocoService.getAvailableLangs();const t=localStorage.getItem("currentLanguage");t&&(this._translocoService.setActiveLang(t),this._changeDetectorRef.markForCheck()),this._translocoService.langChanges$.subscribe(r=>{this.activeLang=r,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){}setActiveLang(t){this._translocoService.setActiveLang(t),localStorage.setItem("currentLanguage",t)}trackByFn(t,r){return r.id||t}static#e=this.\u0275fac=function(r){return new(r||e)(E(fi),E(su))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["language-picker"]],decls:8,vars:9,consts:[["mat-icon-button","",3,"matMenuTriggerFor"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[2,"background-color","white !important",3,"xPosition","yPosition"],["languages","matMenu"],[4,"ngFor","ngForOf","ngForTrackBy"],["flagImage",""],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],["fxLayout","row","fxLayoutAlign","start center",1,"flex","items-center"],[1,"flag-label"],["class","relative w-6 shadow rounded-sm overflow-hidden",4,"ngIf"],[1,"relative","w-6","shadow","rounded-sm","overflow-hidden"],[1,"flag-img",3,"src","alt"]],template:function(r,i){if(1&r&&(B(0,"div")(1,"button",0),Ae(2,rst,1,0,"ng-container",1),K(),B(3,"mat-menu",2,3),Ae(5,sst,2,1,"ng-container",4),K(),Ae(6,lst,1,1,"ng-template",null,5,cE),K()),2&r){const a=Zl(4),s=Zl(7);ne(1),me("matMenuTriggerFor",a),ne(1),me("ngTemplateOutlet",s)("ngTemplateOutletContext",$y(7,fne,i.activeLang)),ne(1),me("xPosition","after")("yPosition","below"),ne(2),me("ngForOf",i.availableLangs)("ngForTrackBy",i.trackByFn)}},dependencies:[Gy,ma,GE,$o,Bo,Hit,Zat,Fk,tst],styles:['@font-face{font-family:Poppins;src:url(Poppins-Regular.woff2) format("woff2");font-weight:400;font-style:normal;font-display:swap}*{font-family:Poppins,sans-serif}.main-div{flex:1 1 auto;width:100%;max-width:100%;height:100vh;background:rgba(211,211,211,.3607843137)}.w-full{width:100%}.h-full{height:100vh}.bg-white{background-color:#fff}.primaryColor{color:#01236d!important}.divider-height{width:2px;background-color:#8080806e;height:100%;margin-top:5px;margin-bottom:5px}.justify-center{justify-content:center}.text-center{text-align:center}.h-20{height:20px}.my-2{margin-top:2rem;margin-bottom:2rem}@media (min-width: 768px){.sm\\:h-8{height:8px}}@media (min-width: 1024px){.h-20{height:20px}.sm\\:h-8{height:8px}}@media (min-width: 1280px){.h-20{height:20px}.sm\\:h-8{height:8px}}.p-0{padding:0}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.px-0{padding-left:0;padding-right:0}.px-1{padding-left:.25rem;padding-right:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.m-0{margin:0}.m-1{margin:.25rem}.m-2{margin:.5rem}.m-3{margin:.75rem}.m-4{margin:1rem}.m-5{margin:1.25rem}.m-6{margin:1.5rem}.mx-0{margin-left:0;margin-right:0}.mx-1{margin-left:.25rem;margin-right:.25rem}.mx-2{margin-left:.5rem;margin-right:.5rem}.mx-3{margin-left:.75rem;margin-right:.75rem}.mx-4{margin-left:1rem;margin-right:1rem}.mx-5{margin-left:1.25rem;margin-right:1.25rem}.mx-6{margin-left:1.5rem;margin-right:1.5rem}.p-7{padding:1.75rem}.p-8{padding:2rem}.p-9{padding:2.25rem}.p-10{padding:2.5rem}.p-11{padding:2.75rem}.p-12{padding:3rem}.p-14{padding:3.5rem}.p-16{padding:4rem}.px-7{padding-left:1.75rem;padding-right:1.75rem}.px-8{padding-left:2rem;padding-right:2rem}.px-9{padding-left:2.25rem;padding-right:2.25rem}.px-10{padding-left:2.5rem;padding-right:2.5rem}.px-11{padding-left:2.75rem;padding-right:2.75rem}.px-12{padding-left:3rem;padding-right:3rem}.px-14{padding-left:3.5rem;padding-right:3.5rem}.px-16{padding-left:4rem;padding-right:4rem}.m-7{margin:1.75rem}.m-8{margin:2rem}.m-9{margin:2.25rem}.m-10{margin:2.5rem}.m-11{margin:2.75rem}.m-12{margin:3rem}.m-14{margin:3.5rem}.m-16{margin:4rem}.mx-7{margin-left:1.75rem;margin-right:1.75rem}.mx-8{margin-left:2rem;margin-right:2rem}.mx-9{margin-left:2.25rem;margin-right:2.25rem}.mx-10{margin-left:2.5rem;margin-right:2.5rem}.mx-11{margin-left:2.75rem;margin-right:2.75rem}.mx-12{margin-left:3rem;margin-right:3rem}.mx-14{margin-left:3.5rem;margin-right:3.5rem}.mx-16{margin-left:4rem;margin-right:4rem}.pt-1{padding-top:.25rem}.pt-2{padding-top:.5rem}.pt-3{padding-top:.75rem}.pt-4{padding-top:1rem}.pt-5{padding-top:1.25rem}.pt-6{padding-top:1.5rem}.pt-7{padding-top:1.75rem}.pt-8{padding-top:2rem}.pt-9{padding-top:2.25rem}.pt-10{padding-top:2.5rem}.pt-11{padding-top:2.75rem}.pt-12{padding-top:3rem}.pt-14{padding-top:3.5rem}.pt-16{padding-top:4rem}.pb-1{padding-bottom:.25rem}.pb-2{padding-bottom:.5rem}.pb-3{padding-bottom:.75rem}.pb-4{padding-bottom:1rem}.pb-5{padding-bottom:1.25rem}.pb-6{padding-bottom:1.5rem}.pb-7{padding-bottom:1.75rem}.pb-8{padding-bottom:2rem}.pb-9{padding-bottom:2.25rem}.pb-10{padding-bottom:2.5rem}.pb-11{padding-bottom:2.75rem}.pb-12{padding-bottom:3rem}.pb-14{padding-bottom:3.5rem}.pb-16{padding-bottom:4rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-5{margin-top:1.25rem}.mt-6{margin-top:1.5rem}.mt-7{margin-top:1.75rem}.mt-8{margin-top:2rem}.mt-9{margin-top:2.25rem}.mt-10{margin-top:2.5rem}.mt-11{margin-top:2.75rem}.mt-12{margin-top:3rem}.mt-14{margin-top:3.5rem}.mt-16{margin-top:4rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-5{margin-bottom:1.25rem}.mb-6{margin-bottom:1.5rem}.mb-7{margin-bottom:1.75rem}.mb-8{margin-bottom:2rem}.mb-9{margin-bottom:2.25rem}.mb-10{margin-bottom:2.5rem}.mb-11{margin-bottom:2.75rem}.mb-12{margin-bottom:3rem}.mb-14{margin-bottom:3.5rem}.mb-16{margin-bottom:4rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-5{padding-top:1.25rem;padding-bottom:1.25rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-7{padding-top:1.75rem;padding-bottom:1.75rem}.py-8{padding-top:2rem;padding-bottom:2rem}.py-9{padding-top:2.25rem;padding-bottom:2.25rem}.py-10{padding-top:2.5rem;padding-bottom:2.5rem}.py-11{padding-top:2.75rem;padding-bottom:2.75rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-14{padding-top:3.5rem;padding-bottom:3.5rem}.py-16{padding-top:4rem;padding-bottom:4rem}.my-1{margin-top:.25rem;margin-bottom:.25rem}.my-2{margin-top:.5rem;margin-bottom:.5rem}.my-3{margin-top:.75rem;margin-bottom:.75rem}.my-4{margin-top:1rem;margin-bottom:1rem}.my-5{margin-top:1.25rem;margin-bottom:1.25rem}.my-6{margin-top:1.5rem;margin-bottom:1.5rem}.my-7{margin-top:1.75rem;margin-bottom:1.75rem}.my-8{margin-top:2rem;margin-bottom:2rem}.my-9{margin-top:2.25rem;margin-bottom:2.25rem}.my-10{margin-top:2.5rem;margin-bottom:2.5rem}.my-11{margin-top:2.75rem;margin-bottom:2.75rem}.my-12{margin-top:3rem;margin-bottom:3rem}.my-14{margin-top:3.5rem;margin-bottom:3.5rem}.my-16{margin-top:4rem;margin-bottom:4rem}.main-button{background-color:#0b57d0!important;color:#fff!important;height:45px!important;font-size:18px;border-radius:20px}.main-title{margin-top:0!important;color:#1c44f9!important}.main-button:disabled{background-color:#e5ebfd!important;color:#4e6599!important}.secondary-button{background-color:#fff!important;color:#0b57d0!important;border:1px solid rgba(11,87,208,.5411764706)!important;height:45px;font-size:18px;border-radius:20px}.secondary-button:disabled{color:#4e6599!important;border:1px solid rgba(11,87,208,.2117647059)!important}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mr-3{margin-right:.75rem}.mr-4{margin-right:1rem}.mr-5{margin-right:1.25rem}.mr-6{margin-right:1.5rem}.mr-7{margin-right:1.75rem}.mr-8{margin-right:2rem}.mr-9{margin-right:2.25rem}.mr-10{margin-right:2.5rem}.mr-11{margin-right:2.75rem}.mr-12{margin-right:3rem}.mr-14{margin-right:3.5rem}.mr-16{margin-right:4rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.ml-4{margin-left:1rem}.ml-5{margin-left:1.25rem}.ml-6{margin-left:1.5rem}.ml-7{margin-left:1.75rem}.ml-8{margin-left:2rem}.ml-9{margin-left:2.25rem}.ml-10{margin-left:2.5rem}.ml-11{margin-left:2.75rem}.ml-12{margin-left:3rem}.ml-14{margin-left:3.5rem}.ml-16{margin-left:4rem}.on-header{width:80%;height:80px}.on-header img{width:150px}.cursor-pointer{cursor:pointer}.mat-mdc-snack-bar-container{margin:0!important}\n',".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed;z-index:1000}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute;z-index:1000}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;z-index:1000;display:flex;min-width:120px;max-width:100%;max-height:100%;background-color:#fff;border-radius:16px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-overlay-pane button:hover{background-color:#d3d3d331;font-weight:500}.flag-img{width:100%}.flag-label{margin-left:10px;margin-right:10px}.cdk-overlay-backdrop{position:absolute;inset:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:1}.cdk-high-contrast-active .cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:.6}.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;z-index:1000;display:flex;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}\n"],encapsulation:2,changeDetection:0})}return e})(),DP=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=Ut({type:e,selectors:[["footer"]],decls:9,vars:0,consts:[["fxLayout","row","fxLayoutAlign","center center",1,"w-full","footer"],[1,"mr-4"]],template:function(r,i){1&r&&(B(0,"div",0)(1,"span",1),ye(2," Verifik Wallet"),K(),B(3,"span",1),ye(4," Terminos y condiciones"),K(),B(5,"span",1),ye(6," Privacidad "),K(),B(7,"span",1),ye(8," Ayuda "),K()())},dependencies:[$o,Bo],styles:['@font-face{font-family:Poppins;src:url(Poppins-Regular.woff2) format("woff2");font-weight:400;font-style:normal;font-display:swap}*[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.main-div[_ngcontent-%COMP%]{flex:1 1 auto;width:100%;max-width:100%;height:100vh;background:rgba(211,211,211,.3607843137)}.w-full[_ngcontent-%COMP%]{width:100%}.h-full[_ngcontent-%COMP%]{height:100vh}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.primaryColor[_ngcontent-%COMP%]{color:#01236d!important}.divider-height[_ngcontent-%COMP%]{width:2px;background-color:#8080806e;height:100%;margin-top:5px;margin-bottom:5px}.justify-center[_ngcontent-%COMP%]{justify-content:center}.text-center[_ngcontent-%COMP%]{text-align:center}.h-20[_ngcontent-%COMP%]{height:20px}.my-2[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}@media (min-width: 768px){.sm\\:h-8[_ngcontent-%COMP%]{height:8px}}@media (min-width: 1024px){.h-20[_ngcontent-%COMP%]{height:20px}.sm\\:h-8[_ngcontent-%COMP%]{height:8px}}@media (min-width: 1280px){.h-20[_ngcontent-%COMP%]{height:20px}.sm\\:h-8[_ngcontent-%COMP%]{height:8px}}.p-0[_ngcontent-%COMP%]{padding:0}.p-1[_ngcontent-%COMP%]{padding:.25rem}.p-2[_ngcontent-%COMP%]{padding:.5rem}.p-3[_ngcontent-%COMP%]{padding:.75rem}.p-4[_ngcontent-%COMP%]{padding:1rem}.p-5[_ngcontent-%COMP%]{padding:1.25rem}.p-6[_ngcontent-%COMP%]{padding:1.5rem}.px-0[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.px-1[_ngcontent-%COMP%]{padding-left:.25rem;padding-right:.25rem}.px-2[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem}.px-3[_ngcontent-%COMP%]{padding-left:.75rem;padding-right:.75rem}.px-4[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.px-5[_ngcontent-%COMP%]{padding-left:1.25rem;padding-right:1.25rem}.px-6[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}.m-0[_ngcontent-%COMP%]{margin:0}.m-1[_ngcontent-%COMP%]{margin:.25rem}.m-2[_ngcontent-%COMP%]{margin:.5rem}.m-3[_ngcontent-%COMP%]{margin:.75rem}.m-4[_ngcontent-%COMP%]{margin:1rem}.m-5[_ngcontent-%COMP%]{margin:1.25rem}.m-6[_ngcontent-%COMP%]{margin:1.5rem}.mx-0[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.mx-1[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem}.mx-2[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem}.mx-3[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:.75rem}.mx-4[_ngcontent-%COMP%]{margin-left:1rem;margin-right:1rem}.mx-5[_ngcontent-%COMP%]{margin-left:1.25rem;margin-right:1.25rem}.mx-6[_ngcontent-%COMP%]{margin-left:1.5rem;margin-right:1.5rem}.p-7[_ngcontent-%COMP%]{padding:1.75rem}.p-8[_ngcontent-%COMP%]{padding:2rem}.p-9[_ngcontent-%COMP%]{padding:2.25rem}.p-10[_ngcontent-%COMP%]{padding:2.5rem}.p-11[_ngcontent-%COMP%]{padding:2.75rem}.p-12[_ngcontent-%COMP%]{padding:3rem}.p-14[_ngcontent-%COMP%]{padding:3.5rem}.p-16[_ngcontent-%COMP%]{padding:4rem}.px-7[_ngcontent-%COMP%]{padding-left:1.75rem;padding-right:1.75rem}.px-8[_ngcontent-%COMP%]{padding-left:2rem;padding-right:2rem}.px-9[_ngcontent-%COMP%]{padding-left:2.25rem;padding-right:2.25rem}.px-10[_ngcontent-%COMP%]{padding-left:2.5rem;padding-right:2.5rem}.px-11[_ngcontent-%COMP%]{padding-left:2.75rem;padding-right:2.75rem}.px-12[_ngcontent-%COMP%]{padding-left:3rem;padding-right:3rem}.px-14[_ngcontent-%COMP%]{padding-left:3.5rem;padding-right:3.5rem}.px-16[_ngcontent-%COMP%]{padding-left:4rem;padding-right:4rem}.m-7[_ngcontent-%COMP%]{margin:1.75rem}.m-8[_ngcontent-%COMP%]{margin:2rem}.m-9[_ngcontent-%COMP%]{margin:2.25rem}.m-10[_ngcontent-%COMP%]{margin:2.5rem}.m-11[_ngcontent-%COMP%]{margin:2.75rem}.m-12[_ngcontent-%COMP%]{margin:3rem}.m-14[_ngcontent-%COMP%]{margin:3.5rem}.m-16[_ngcontent-%COMP%]{margin:4rem}.mx-7[_ngcontent-%COMP%]{margin-left:1.75rem;margin-right:1.75rem}.mx-8[_ngcontent-%COMP%]{margin-left:2rem;margin-right:2rem}.mx-9[_ngcontent-%COMP%]{margin-left:2.25rem;margin-right:2.25rem}.mx-10[_ngcontent-%COMP%]{margin-left:2.5rem;margin-right:2.5rem}.mx-11[_ngcontent-%COMP%]{margin-left:2.75rem;margin-right:2.75rem}.mx-12[_ngcontent-%COMP%]{margin-left:3rem;margin-right:3rem}.mx-14[_ngcontent-%COMP%]{margin-left:3.5rem;margin-right:3.5rem}.mx-16[_ngcontent-%COMP%]{margin-left:4rem;margin-right:4rem}.pt-1[_ngcontent-%COMP%]{padding-top:.25rem}.pt-2[_ngcontent-%COMP%]{padding-top:.5rem}.pt-3[_ngcontent-%COMP%]{padding-top:.75rem}.pt-4[_ngcontent-%COMP%]{padding-top:1rem}.pt-5[_ngcontent-%COMP%]{padding-top:1.25rem}.pt-6[_ngcontent-%COMP%]{padding-top:1.5rem}.pt-7[_ngcontent-%COMP%]{padding-top:1.75rem}.pt-8[_ngcontent-%COMP%]{padding-top:2rem}.pt-9[_ngcontent-%COMP%]{padding-top:2.25rem}.pt-10[_ngcontent-%COMP%]{padding-top:2.5rem}.pt-11[_ngcontent-%COMP%]{padding-top:2.75rem}.pt-12[_ngcontent-%COMP%]{padding-top:3rem}.pt-14[_ngcontent-%COMP%]{padding-top:3.5rem}.pt-16[_ngcontent-%COMP%]{padding-top:4rem}.pb-1[_ngcontent-%COMP%]{padding-bottom:.25rem}.pb-2[_ngcontent-%COMP%]{padding-bottom:.5rem}.pb-3[_ngcontent-%COMP%]{padding-bottom:.75rem}.pb-4[_ngcontent-%COMP%]{padding-bottom:1rem}.pb-5[_ngcontent-%COMP%]{padding-bottom:1.25rem}.pb-6[_ngcontent-%COMP%]{padding-bottom:1.5rem}.pb-7[_ngcontent-%COMP%]{padding-bottom:1.75rem}.pb-8[_ngcontent-%COMP%]{padding-bottom:2rem}.pb-9[_ngcontent-%COMP%]{padding-bottom:2.25rem}.pb-10[_ngcontent-%COMP%]{padding-bottom:2.5rem}.pb-11[_ngcontent-%COMP%]{padding-bottom:2.75rem}.pb-12[_ngcontent-%COMP%]{padding-bottom:3rem}.pb-14[_ngcontent-%COMP%]{padding-bottom:3.5rem}.pb-16[_ngcontent-%COMP%]{padding-bottom:4rem}.mt-1[_ngcontent-%COMP%]{margin-top:.25rem}.mt-2[_ngcontent-%COMP%]{margin-top:.5rem}.mt-3[_ngcontent-%COMP%]{margin-top:.75rem}.mt-4[_ngcontent-%COMP%]{margin-top:1rem}.mt-5[_ngcontent-%COMP%]{margin-top:1.25rem}.mt-6[_ngcontent-%COMP%]{margin-top:1.5rem}.mt-7[_ngcontent-%COMP%]{margin-top:1.75rem}.mt-8[_ngcontent-%COMP%]{margin-top:2rem}.mt-9[_ngcontent-%COMP%]{margin-top:2.25rem}.mt-10[_ngcontent-%COMP%]{margin-top:2.5rem}.mt-11[_ngcontent-%COMP%]{margin-top:2.75rem}.mt-12[_ngcontent-%COMP%]{margin-top:3rem}.mt-14[_ngcontent-%COMP%]{margin-top:3.5rem}.mt-16[_ngcontent-%COMP%]{margin-top:4rem}.mb-1[_ngcontent-%COMP%]{margin-bottom:.25rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:.75rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.mb-5[_ngcontent-%COMP%]{margin-bottom:1.25rem}.mb-6[_ngcontent-%COMP%]{margin-bottom:1.5rem}.mb-7[_ngcontent-%COMP%]{margin-bottom:1.75rem}.mb-8[_ngcontent-%COMP%]{margin-bottom:2rem}.mb-9[_ngcontent-%COMP%]{margin-bottom:2.25rem}.mb-10[_ngcontent-%COMP%]{margin-bottom:2.5rem}.mb-11[_ngcontent-%COMP%]{margin-bottom:2.75rem}.mb-12[_ngcontent-%COMP%]{margin-bottom:3rem}.mb-14[_ngcontent-%COMP%]{margin-bottom:3.5rem}.mb-16[_ngcontent-%COMP%]{margin-bottom:4rem}.py-1[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem}.py-2[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}.py-3[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem}.py-4[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}.py-5[_ngcontent-%COMP%]{padding-top:1.25rem;padding-bottom:1.25rem}.py-6[_ngcontent-%COMP%]{padding-top:1.5rem;padding-bottom:1.5rem}.py-7[_ngcontent-%COMP%]{padding-top:1.75rem;padding-bottom:1.75rem}.py-8[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:2rem}.py-9[_ngcontent-%COMP%]{padding-top:2.25rem;padding-bottom:2.25rem}.py-10[_ngcontent-%COMP%]{padding-top:2.5rem;padding-bottom:2.5rem}.py-11[_ngcontent-%COMP%]{padding-top:2.75rem;padding-bottom:2.75rem}.py-12[_ngcontent-%COMP%]{padding-top:3rem;padding-bottom:3rem}.py-14[_ngcontent-%COMP%]{padding-top:3.5rem;padding-bottom:3.5rem}.py-16[_ngcontent-%COMP%]{padding-top:4rem;padding-bottom:4rem}.my-1[_ngcontent-%COMP%]{margin-top:.25rem;margin-bottom:.25rem}.my-2[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}.my-3[_ngcontent-%COMP%]{margin-top:.75rem;margin-bottom:.75rem}.my-4[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem}.my-5[_ngcontent-%COMP%]{margin-top:1.25rem;margin-bottom:1.25rem}.my-6[_ngcontent-%COMP%]{margin-top:1.5rem;margin-bottom:1.5rem}.my-7[_ngcontent-%COMP%]{margin-top:1.75rem;margin-bottom:1.75rem}.my-8[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}.my-9[_ngcontent-%COMP%]{margin-top:2.25rem;margin-bottom:2.25rem}.my-10[_ngcontent-%COMP%]{margin-top:2.5rem;margin-bottom:2.5rem}.my-11[_ngcontent-%COMP%]{margin-top:2.75rem;margin-bottom:2.75rem}.my-12[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:3rem}.my-14[_ngcontent-%COMP%]{margin-top:3.5rem;margin-bottom:3.5rem}.my-16[_ngcontent-%COMP%]{margin-top:4rem;margin-bottom:4rem}.main-button[_ngcontent-%COMP%]{background-color:#0b57d0!important;color:#fff!important;height:45px!important;font-size:18px;border-radius:20px}.main-title[_ngcontent-%COMP%]{margin-top:0!important;color:#1c44f9!important}.main-button[_ngcontent-%COMP%]:disabled{background-color:#e5ebfd!important;color:#4e6599!important}.secondary-button[_ngcontent-%COMP%]{background-color:#fff!important;color:#0b57d0!important;border:1px solid rgba(11,87,208,.5411764706)!important;height:45px;font-size:18px;border-radius:20px}.secondary-button[_ngcontent-%COMP%]:disabled{color:#4e6599!important;border:1px solid rgba(11,87,208,.2117647059)!important}.mr-1[_ngcontent-%COMP%]{margin-right:.25rem}.mr-2[_ngcontent-%COMP%]{margin-right:.5rem}.mr-3[_ngcontent-%COMP%]{margin-right:.75rem}.mr-4[_ngcontent-%COMP%]{margin-right:1rem}.mr-5[_ngcontent-%COMP%]{margin-right:1.25rem}.mr-6[_ngcontent-%COMP%]{margin-right:1.5rem}.mr-7[_ngcontent-%COMP%]{margin-right:1.75rem}.mr-8[_ngcontent-%COMP%]{margin-right:2rem}.mr-9[_ngcontent-%COMP%]{margin-right:2.25rem}.mr-10[_ngcontent-%COMP%]{margin-right:2.5rem}.mr-11[_ngcontent-%COMP%]{margin-right:2.75rem}.mr-12[_ngcontent-%COMP%]{margin-right:3rem}.mr-14[_ngcontent-%COMP%]{margin-right:3.5rem}.mr-16[_ngcontent-%COMP%]{margin-right:4rem}.ml-1[_ngcontent-%COMP%]{margin-left:.25rem}.ml-2[_ngcontent-%COMP%]{margin-left:.5rem}.ml-3[_ngcontent-%COMP%]{margin-left:.75rem}.ml-4[_ngcontent-%COMP%]{margin-left:1rem}.ml-5[_ngcontent-%COMP%]{margin-left:1.25rem}.ml-6[_ngcontent-%COMP%]{margin-left:1.5rem}.ml-7[_ngcontent-%COMP%]{margin-left:1.75rem}.ml-8[_ngcontent-%COMP%]{margin-left:2rem}.ml-9[_ngcontent-%COMP%]{margin-left:2.25rem}.ml-10[_ngcontent-%COMP%]{margin-left:2.5rem}.ml-11[_ngcontent-%COMP%]{margin-left:2.75rem}.ml-12[_ngcontent-%COMP%]{margin-left:3rem}.ml-14[_ngcontent-%COMP%]{margin-left:3.5rem}.ml-16[_ngcontent-%COMP%]{margin-left:4rem}.on-header[_ngcontent-%COMP%]{width:80%;height:80px}.on-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.mat-mdc-snack-bar-container[_ngcontent-%COMP%]{margin:0!important}',".footer[_ngcontent-%COMP%]{background-color:#fff;height:60px;position:relative;top:-110px;color:gray}"]})}return e})();const cst=["termsForm"];function ust(e,n){if(1&e&&we(0,"img",18),2&e){const t=ze(2).$implicit;me("src",t.image,jp)("alt",t.title)}}function dst(e,n){if(1&e&&(B(0,"div",13)(1,"div",14)(2,"h1",15),ye(3),rt(4,"transloco"),K(),B(5,"span"),ye(6),rt(7,"transloco"),K()(),B(8,"div",16),Ae(9,ust,1,2,"img",17),K()()),2&e){const t=ze(),r=t.index,i=t.$implicit,a=ze();Xt("active",r===a.activeIndex),ne(3),On(lt(4,5,i.title)),ne(3),Ot(" ",lt(7,7,i.description)," "),ne(3),me("ngIf",r===a.activeIndex)}}function hst(e,n){if(1&e&&(Ql(0),Ae(1,dst,10,9,"div",12),Jl()),2&e){const t=n.index,r=ze();ne(1),me("ngIf",t===r.activeIndex)}}let pst=(()=>{class e{constructor(t,r,i){this._router=t,this._translocoService=r,this._formBuilder=i,this.step=1,this.items=[{title:"onboarding.step_1",description:"onboarding.step_1_description",image:"https://cdn.verifik.co/wallet/onboarding1.svg"},{title:"onboarding.step_2",description:"onboarding.step_2_description",image:"https://cdn.verifik.co/wallet/onboarding2.svg"},{title:"onboarding.step_3",description:"onboarding.step_3_description",image:"https://cdn.verifik.co/wallet/onboarding3.svg"}],this.activeIndex=0,this._translocoService.getActiveLang(),localStorage.removeItem("wallet"),localStorage.removeItem("walletId")}ngOnInit(){this.termsForm=this._formBuilder.group({termsAcceptance:[!1,[UR.required]]}),this.startRotation()}startRotation(){this.intervalId=setInterval(()=>{this.activeIndex=(this.activeIndex+1)%this.items.length},1e4)}previous(){this.activeIndex>0?this.activeIndex--:this.activeIndex=this.items.length-1}next(){this.activeIndex<this.items.length-1?this.activeIndex++:this.activeIndex=0}goToCreateWallet(){this._router.navigate(["/create-wallet"])}acceptedTerms(){return!!this.termsForm.value.termsAcceptance}ngOnDestroy(){this.intervalId&&clearInterval(this.intervalId)}static#e=this.\u0275fac=function(r){return new(r||e)(E(mi),E(su),E(cte))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["app-onboarding"]],viewQuery:function(r,i){if(1&r&&hn(cst,5),2&r){let a;ft(a=mt())&&(i.signUpNgForm=a.first)}},decls:24,vars:21,consts:[["fxLayout","column","fxLayoutAlign","start center",1,"w-full","h-full"],["fxLayout","row","fxLayoutAlign","space-between center",1,"on-header"],["src","../../assets/images/logo.svg","alt",""],["fxLayout","column","fxLayoutAlign","start center",1,"md-card","on-intro"],[4,"ngFor","ngForOf"],[1,"my-5","w-full",3,"formGroup"],["signUpNgForm","ngForm"],[1,"on-checkbox",3,"formControlName"],["href","https://example.com/terms","target","_blank"],["mat-raised-button","",1,"w-full","my-1","rounded-button","main-button",3,"disabled","click"],["mat-raised-button","",1,"w-full","my-1","rounded-button","secondary-button",3,"disabled"],[1,"w-full","pt-10"],["fxLayout","column","fxLayoutAlign","space-between center","class","carousel-container",3,"active",4,"ngIf"],["fxLayout","column","fxLayoutAlign","space-between center",1,"carousel-container"],["fxLayout","column","fxLayoutAlign","start center"],[1,"main-title"],["fxLayout","row","fxLayoutAlign","center start",1,"carousel-image","mt-4","w-full"],["class","w-full",3,"src","alt",4,"ngIf"],[1,"w-full",3,"src","alt"]],template:function(r,i){1&r&&(B(0,"div",0)(1,"div",1),we(2,"img",2)(3,"language-picker"),K(),B(4,"div",3),Ae(5,hst,2,1,"ng-container",4),B(6,"form",5,6)(8,"mat-checkbox",7),ye(9),rt(10,"transloco"),B(11,"a",8),ye(12),rt(13,"transloco"),K()()(),B(14,"button",9),xt("click",function(){return i.goToCreateWallet()}),ye(15),rt(16,"transloco"),K(),B(17,"button",10),ye(18),rt(19,"transloco"),K(),B(20,"button",10),ye(21),rt(22,"transloco"),K()()(),we(23,"footer",11)),2&r&&(ne(5),me("ngForOf",i.items),ne(1),me("formGroup",i.termsForm),ne(2),me("formControlName","termsAcceptance"),ne(1),Ot(" ",lt(10,11,"onboarding.accept_terms_1")," "),ne(3),On(lt(13,13,"onboarding.accept_terms_2")),ne(2),me("disabled",!i.acceptedTerms()),ne(1),Ot(" ",lt(16,15,"onboarding.create_new_wallet")," "),ne(2),me("disabled",!i.acceptedTerms()),ne(1),Ot(" ",lt(19,17,"onboarding.import_wallet")," "),ne(2),me("disabled",!i.acceptedTerms()),ne(1),Ot(" ",lt(22,19,"onboarding.open_wallet")," "))},dependencies:[Gy,ma,$o,Bo,Mk,nP,GR,qR,cp,mk,gP,EP,DP,mv],styles:[".onboarding-content[_ngcontent-%COMP%]{width:100%;height:100vh}.onboarding-step-one[_ngcontent-%COMP%]{width:400px;height:100%;padding:32px;background:white;box-shadow:0 2px 4px #61616114;border-radius:24px;border:1px rgba(0,0,0,.35) solid;flex-direction:column;justify-content:flex-start;align-items:center;gap:16px;display:inline-flex}h1[_ngcontent-%COMP%]{font-size:32px;font-weight:600;margin-bottom:0}.on-intro[_ngcontent-%COMP%]{width:500px;min-height:500px;padding:32px;background:white;box-shadow:0 2px 4px #61616114;border-radius:24px;border:1px rgba(0,0,0,.35) solid;flex-direction:column;justify-content:flex-start;align-items:center;gap:12px;display:inline-flex}.on-intro[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .on-intro[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center}.on-checkbox[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1976d2}.carousel-image[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden;position:relative;width:200px!important}.carousel-container[_ngcontent-%COMP%]{min-height:390px}.bg-red-700[_ngcontent-%COMP%]{background-color:#ff0000b2}.rounded-button[_ngcontent-%COMP%]{border-radius:12px}",'@font-face{font-family:Poppins;src:url(Poppins-Regular.woff2) format("woff2");font-weight:400;font-style:normal;font-display:swap}*[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.main-div[_ngcontent-%COMP%]{flex:1 1 auto;width:100%;max-width:100%;height:100vh;background:rgba(211,211,211,.3607843137)}.w-full[_ngcontent-%COMP%]{width:100%}.h-full[_ngcontent-%COMP%]{height:100vh}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.primaryColor[_ngcontent-%COMP%]{color:#01236d!important}.divider-height[_ngcontent-%COMP%]{width:2px;background-color:#8080806e;height:100%;margin-top:5px;margin-bottom:5px}.justify-center[_ngcontent-%COMP%]{justify-content:center}.text-center[_ngcontent-%COMP%]{text-align:center}.h-20[_ngcontent-%COMP%]{height:20px}.my-2[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}@media (min-width: 768px){.sm\\:h-8[_ngcontent-%COMP%]{height:8px}}@media (min-width: 1024px){.h-20[_ngcontent-%COMP%]{height:20px}.sm\\:h-8[_ngcontent-%COMP%]{height:8px}}@media (min-width: 1280px){.h-20[_ngcontent-%COMP%]{height:20px}.sm\\:h-8[_ngcontent-%COMP%]{height:8px}}.p-0[_ngcontent-%COMP%]{padding:0}.p-1[_ngcontent-%COMP%]{padding:.25rem}.p-2[_ngcontent-%COMP%]{padding:.5rem}.p-3[_ngcontent-%COMP%]{padding:.75rem}.p-4[_ngcontent-%COMP%]{padding:1rem}.p-5[_ngcontent-%COMP%]{padding:1.25rem}.p-6[_ngcontent-%COMP%]{padding:1.5rem}.px-0[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.px-1[_ngcontent-%COMP%]{padding-left:.25rem;padding-right:.25rem}.px-2[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem}.px-3[_ngcontent-%COMP%]{padding-left:.75rem;padding-right:.75rem}.px-4[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.px-5[_ngcontent-%COMP%]{padding-left:1.25rem;padding-right:1.25rem}.px-6[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}.m-0[_ngcontent-%COMP%]{margin:0}.m-1[_ngcontent-%COMP%]{margin:.25rem}.m-2[_ngcontent-%COMP%]{margin:.5rem}.m-3[_ngcontent-%COMP%]{margin:.75rem}.m-4[_ngcontent-%COMP%]{margin:1rem}.m-5[_ngcontent-%COMP%]{margin:1.25rem}.m-6[_ngcontent-%COMP%]{margin:1.5rem}.mx-0[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.mx-1[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem}.mx-2[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem}.mx-3[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:.75rem}.mx-4[_ngcontent-%COMP%]{margin-left:1rem;margin-right:1rem}.mx-5[_ngcontent-%COMP%]{margin-left:1.25rem;margin-right:1.25rem}.mx-6[_ngcontent-%COMP%]{margin-left:1.5rem;margin-right:1.5rem}.p-7[_ngcontent-%COMP%]{padding:1.75rem}.p-8[_ngcontent-%COMP%]{padding:2rem}.p-9[_ngcontent-%COMP%]{padding:2.25rem}.p-10[_ngcontent-%COMP%]{padding:2.5rem}.p-11[_ngcontent-%COMP%]{padding:2.75rem}.p-12[_ngcontent-%COMP%]{padding:3rem}.p-14[_ngcontent-%COMP%]{padding:3.5rem}.p-16[_ngcontent-%COMP%]{padding:4rem}.px-7[_ngcontent-%COMP%]{padding-left:1.75rem;padding-right:1.75rem}.px-8[_ngcontent-%COMP%]{padding-left:2rem;padding-right:2rem}.px-9[_ngcontent-%COMP%]{padding-left:2.25rem;padding-right:2.25rem}.px-10[_ngcontent-%COMP%]{padding-left:2.5rem;padding-right:2.5rem}.px-11[_ngcontent-%COMP%]{padding-left:2.75rem;padding-right:2.75rem}.px-12[_ngcontent-%COMP%]{padding-left:3rem;padding-right:3rem}.px-14[_ngcontent-%COMP%]{padding-left:3.5rem;padding-right:3.5rem}.px-16[_ngcontent-%COMP%]{padding-left:4rem;padding-right:4rem}.m-7[_ngcontent-%COMP%]{margin:1.75rem}.m-8[_ngcontent-%COMP%]{margin:2rem}.m-9[_ngcontent-%COMP%]{margin:2.25rem}.m-10[_ngcontent-%COMP%]{margin:2.5rem}.m-11[_ngcontent-%COMP%]{margin:2.75rem}.m-12[_ngcontent-%COMP%]{margin:3rem}.m-14[_ngcontent-%COMP%]{margin:3.5rem}.m-16[_ngcontent-%COMP%]{margin:4rem}.mx-7[_ngcontent-%COMP%]{margin-left:1.75rem;margin-right:1.75rem}.mx-8[_ngcontent-%COMP%]{margin-left:2rem;margin-right:2rem}.mx-9[_ngcontent-%COMP%]{margin-left:2.25rem;margin-right:2.25rem}.mx-10[_ngcontent-%COMP%]{margin-left:2.5rem;margin-right:2.5rem}.mx-11[_ngcontent-%COMP%]{margin-left:2.75rem;margin-right:2.75rem}.mx-12[_ngcontent-%COMP%]{margin-left:3rem;margin-right:3rem}.mx-14[_ngcontent-%COMP%]{margin-left:3.5rem;margin-right:3.5rem}.mx-16[_ngcontent-%COMP%]{margin-left:4rem;margin-right:4rem}.pt-1[_ngcontent-%COMP%]{padding-top:.25rem}.pt-2[_ngcontent-%COMP%]{padding-top:.5rem}.pt-3[_ngcontent-%COMP%]{padding-top:.75rem}.pt-4[_ngcontent-%COMP%]{padding-top:1rem}.pt-5[_ngcontent-%COMP%]{padding-top:1.25rem}.pt-6[_ngcontent-%COMP%]{padding-top:1.5rem}.pt-7[_ngcontent-%COMP%]{padding-top:1.75rem}.pt-8[_ngcontent-%COMP%]{padding-top:2rem}.pt-9[_ngcontent-%COMP%]{padding-top:2.25rem}.pt-10[_ngcontent-%COMP%]{padding-top:2.5rem}.pt-11[_ngcontent-%COMP%]{padding-top:2.75rem}.pt-12[_ngcontent-%COMP%]{padding-top:3rem}.pt-14[_ngcontent-%COMP%]{padding-top:3.5rem}.pt-16[_ngcontent-%COMP%]{padding-top:4rem}.pb-1[_ngcontent-%COMP%]{padding-bottom:.25rem}.pb-2[_ngcontent-%COMP%]{padding-bottom:.5rem}.pb-3[_ngcontent-%COMP%]{padding-bottom:.75rem}.pb-4[_ngcontent-%COMP%]{padding-bottom:1rem}.pb-5[_ngcontent-%COMP%]{padding-bottom:1.25rem}.pb-6[_ngcontent-%COMP%]{padding-bottom:1.5rem}.pb-7[_ngcontent-%COMP%]{padding-bottom:1.75rem}.pb-8[_ngcontent-%COMP%]{padding-bottom:2rem}.pb-9[_ngcontent-%COMP%]{padding-bottom:2.25rem}.pb-10[_ngcontent-%COMP%]{padding-bottom:2.5rem}.pb-11[_ngcontent-%COMP%]{padding-bottom:2.75rem}.pb-12[_ngcontent-%COMP%]{padding-bottom:3rem}.pb-14[_ngcontent-%COMP%]{padding-bottom:3.5rem}.pb-16[_ngcontent-%COMP%]{padding-bottom:4rem}.mt-1[_ngcontent-%COMP%]{margin-top:.25rem}.mt-2[_ngcontent-%COMP%]{margin-top:.5rem}.mt-3[_ngcontent-%COMP%]{margin-top:.75rem}.mt-4[_ngcontent-%COMP%]{margin-top:1rem}.mt-5[_ngcontent-%COMP%]{margin-top:1.25rem}.mt-6[_ngcontent-%COMP%]{margin-top:1.5rem}.mt-7[_ngcontent-%COMP%]{margin-top:1.75rem}.mt-8[_ngcontent-%COMP%]{margin-top:2rem}.mt-9[_ngcontent-%COMP%]{margin-top:2.25rem}.mt-10[_ngcontent-%COMP%]{margin-top:2.5rem}.mt-11[_ngcontent-%COMP%]{margin-top:2.75rem}.mt-12[_ngcontent-%COMP%]{margin-top:3rem}.mt-14[_ngcontent-%COMP%]{margin-top:3.5rem}.mt-16[_ngcontent-%COMP%]{margin-top:4rem}.mb-1[_ngcontent-%COMP%]{margin-bottom:.25rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:.75rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.mb-5[_ngcontent-%COMP%]{margin-bottom:1.25rem}.mb-6[_ngcontent-%COMP%]{margin-bottom:1.5rem}.mb-7[_ngcontent-%COMP%]{margin-bottom:1.75rem}.mb-8[_ngcontent-%COMP%]{margin-bottom:2rem}.mb-9[_ngcontent-%COMP%]{margin-bottom:2.25rem}.mb-10[_ngcontent-%COMP%]{margin-bottom:2.5rem}.mb-11[_ngcontent-%COMP%]{margin-bottom:2.75rem}.mb-12[_ngcontent-%COMP%]{margin-bottom:3rem}.mb-14[_ngcontent-%COMP%]{margin-bottom:3.5rem}.mb-16[_ngcontent-%COMP%]{margin-bottom:4rem}.py-1[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem}.py-2[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}.py-3[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem}.py-4[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}.py-5[_ngcontent-%COMP%]{padding-top:1.25rem;padding-bottom:1.25rem}.py-6[_ngcontent-%COMP%]{padding-top:1.5rem;padding-bottom:1.5rem}.py-7[_ngcontent-%COMP%]{padding-top:1.75rem;padding-bottom:1.75rem}.py-8[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:2rem}.py-9[_ngcontent-%COMP%]{padding-top:2.25rem;padding-bottom:2.25rem}.py-10[_ngcontent-%COMP%]{padding-top:2.5rem;padding-bottom:2.5rem}.py-11[_ngcontent-%COMP%]{padding-top:2.75rem;padding-bottom:2.75rem}.py-12[_ngcontent-%COMP%]{padding-top:3rem;padding-bottom:3rem}.py-14[_ngcontent-%COMP%]{padding-top:3.5rem;padding-bottom:3.5rem}.py-16[_ngcontent-%COMP%]{padding-top:4rem;padding-bottom:4rem}.my-1[_ngcontent-%COMP%]{margin-top:.25rem;margin-bottom:.25rem}.my-2[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}.my-3[_ngcontent-%COMP%]{margin-top:.75rem;margin-bottom:.75rem}.my-4[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem}.my-5[_ngcontent-%COMP%]{margin-top:1.25rem;margin-bottom:1.25rem}.my-6[_ngcontent-%COMP%]{margin-top:1.5rem;margin-bottom:1.5rem}.my-7[_ngcontent-%COMP%]{margin-top:1.75rem;margin-bottom:1.75rem}.my-8[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}.my-9[_ngcontent-%COMP%]{margin-top:2.25rem;margin-bottom:2.25rem}.my-10[_ngcontent-%COMP%]{margin-top:2.5rem;margin-bottom:2.5rem}.my-11[_ngcontent-%COMP%]{margin-top:2.75rem;margin-bottom:2.75rem}.my-12[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:3rem}.my-14[_ngcontent-%COMP%]{margin-top:3.5rem;margin-bottom:3.5rem}.my-16[_ngcontent-%COMP%]{margin-top:4rem;margin-bottom:4rem}.main-button[_ngcontent-%COMP%]{background-color:#0b57d0!important;color:#fff!important;height:45px!important;font-size:18px;border-radius:20px}.main-title[_ngcontent-%COMP%]{margin-top:0!important;color:#1c44f9!important}.main-button[_ngcontent-%COMP%]:disabled{background-color:#e5ebfd!important;color:#4e6599!important}.secondary-button[_ngcontent-%COMP%]{background-color:#fff!important;color:#0b57d0!important;border:1px solid rgba(11,87,208,.5411764706)!important;height:45px;font-size:18px;border-radius:20px}.secondary-button[_ngcontent-%COMP%]:disabled{color:#4e6599!important;border:1px solid rgba(11,87,208,.2117647059)!important}.mr-1[_ngcontent-%COMP%]{margin-right:.25rem}.mr-2[_ngcontent-%COMP%]{margin-right:.5rem}.mr-3[_ngcontent-%COMP%]{margin-right:.75rem}.mr-4[_ngcontent-%COMP%]{margin-right:1rem}.mr-5[_ngcontent-%COMP%]{margin-right:1.25rem}.mr-6[_ngcontent-%COMP%]{margin-right:1.5rem}.mr-7[_ngcontent-%COMP%]{margin-right:1.75rem}.mr-8[_ngcontent-%COMP%]{margin-right:2rem}.mr-9[_ngcontent-%COMP%]{margin-right:2.25rem}.mr-10[_ngcontent-%COMP%]{margin-right:2.5rem}.mr-11[_ngcontent-%COMP%]{margin-right:2.75rem}.mr-12[_ngcontent-%COMP%]{margin-right:3rem}.mr-14[_ngcontent-%COMP%]{margin-right:3.5rem}.mr-16[_ngcontent-%COMP%]{margin-right:4rem}.ml-1[_ngcontent-%COMP%]{margin-left:.25rem}.ml-2[_ngcontent-%COMP%]{margin-left:.5rem}.ml-3[_ngcontent-%COMP%]{margin-left:.75rem}.ml-4[_ngcontent-%COMP%]{margin-left:1rem}.ml-5[_ngcontent-%COMP%]{margin-left:1.25rem}.ml-6[_ngcontent-%COMP%]{margin-left:1.5rem}.ml-7[_ngcontent-%COMP%]{margin-left:1.75rem}.ml-8[_ngcontent-%COMP%]{margin-left:2rem}.ml-9[_ngcontent-%COMP%]{margin-left:2.25rem}.ml-10[_ngcontent-%COMP%]{margin-left:2.5rem}.ml-11[_ngcontent-%COMP%]{margin-left:2.75rem}.ml-12[_ngcontent-%COMP%]{margin-left:3rem}.ml-14[_ngcontent-%COMP%]{margin-left:3.5rem}.ml-16[_ngcontent-%COMP%]{margin-left:4rem}.on-header[_ngcontent-%COMP%]{width:80%;height:80px}.on-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.mat-mdc-snack-bar-container[_ngcontent-%COMP%]{margin:0!important}']})}return e})();function fst(e,n){if(1&e){const t=ps();B(0,"div",2)(1,"button",3),xt("click",function(){return ei(t),ti(ze().action())}),ye(2),K()()}if(2&e){const t=ze();ne(2),Ot(" ",t.data.action," ")}}const mst=["label"];function gst(e,n){}const yst=Math.pow(2,31)-1;class AP{constructor(n,t){this._overlayRef=t,this._afterDismissed=new je,this._afterOpened=new je,this._onAction=new je,this._dismissedByAction=!1,this.containerInstance=n,n._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(n){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(n,yst))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const mne=new ue("MatSnackBarData");class Pk{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let bst=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=ce({type:e,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return e})(),_st=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=ce({type:e,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return e})(),vst=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=ce({type:e,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return e})(),xst=(()=>{class e{constructor(t,r){this.snackBarRef=t,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static#e=this.\u0275fac=function(r){return new(r||e)(E(AP),E(mne))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,i){1&r&&(B(0,"div",0),ye(1),K(),Ae(2,fst,3,1,"div",1)),2&r&&(ne(1),Ot(" ",i.data.message,"\n"),ne(1),me("ngIf",i.hasAction))},dependencies:[ma,Mk,bst,_st,vst],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}return e})();const wst={snackBarState:Fl("state",[Ea("void, hidden",Un({transform:"scale(0.8)",opacity:0})),Ea("visible",Un({transform:"scale(1)",opacity:1})),Ya("* => visible",Is("150ms cubic-bezier(0, 0, 0.2, 1)")),Ya("* => void, * => hidden",Is("75ms cubic-bezier(0.4, 0.0, 1, 1)",Un({opacity:0})))])};let Cst=0,kst=(()=>{class e extends Tk{constructor(t,r,i,a,s){super(),this._ngZone=t,this._elementRef=r,this._changeDetectorRef=i,this._platform=a,this.snackBarConfig=s,this._document=Se(Je),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new je,this._onExit=new je,this._onEnter=new je,this._animationState="void",this._liveElementId="mat-snack-bar-container-live-"+Cst++,this.attachDomPortal=o=>{this._assertNotAttached();const l=this._portalOutlet.attachDomPortal(o);return this._afterPortalAttached(),l},this._live="assertive"!==s.politeness||s.announcementMessage?"off"===s.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),r}attachTemplatePortal(t){this._assertNotAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),r}onAnimationEnd(t){const{fromState:r,toState:i}=t;if(("void"===i&&"void"!==r||"hidden"===i)&&this._completeExit(),"visible"===i){const a=this._onEnter;this._ngZone.run(()=>{a.next(),a.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(fr(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const t=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(i=>t.classList.add(i)):t.classList.add(r)),this._exposeToModals()}_exposeToModals(){const t=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let i=0;i<r.length;i++){const a=r[i],s=a.getAttribute("aria-owns");this._trackedModals.add(a),s?-1===s.indexOf(t)&&a.setAttribute("aria-owns",s+" "+t):a.setAttribute("aria-owns",t)}}_clearFromModals(){this._trackedModals.forEach(t=>{const r=t.getAttribute("aria-owns");if(r){const i=r.replace(this._liveElementId,"").trim();i.length>0?t.setAttribute("aria-owns",i):t.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&r){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(i=document.activeElement),t.removeAttribute("aria-hidden"),r.appendChild(t),i?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static#e=this.\u0275fac=function(r){return new(r||e)(E(We),E(Le),E(fi),E(ci),E(Pk))};static#t=this.\u0275dir=ce({type:e,viewQuery:function(r,i){if(1&r&&hn(Ov,7),2&r){let a;ft(a=mt())&&(i._portalOutlet=a.first)}},features:[Ce]})}return e})(),Sst=(()=>{class e extends kst{_afterPortalAttached(){super._afterPortalAttached();const t=this._label.nativeElement,r="mdc-snackbar__label";t.classList.toggle(r,!t.querySelector(`.${r}`))}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Ve(e)))(i||e)}}();static#t=this.\u0275cmp=Ut({type:e,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,i){if(1&r&&hn(mst,7),2&r){let a;ft(a=mt())&&(i._label=a.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(r,i){1&r&&LM("@state.done",function(s){return i.onAnimationEnd(s)}),2&r&&HM("@state",i._animationState)},features:[Ce],decls:6,vars:3,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,i){1&r&&(B(0,"div",0)(1,"div",1,2)(3,"div",3),Ae(4,gst,0,0,"ng-template",4),K(),we(5,"div"),K()()),2&r&&(ne(5),dn("aria-live",i._live)("role",i._role)("id",i._liveElementId))},dependencies:[Ov],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;--mdc-snackbar-container-shape:4px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[wst.snackBarState]}})}return e})(),gne=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[$v,$g,Va,Ek,Cn,Cn]})}return e})();const yne=new ue("mat-snack-bar-default-options",{providedIn:"root",factory:function Ist(){return new Pk}});let Mst=(()=>{class e{get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}constructor(t,r,i,a,s,o){this._overlay=t,this._live=r,this._injector=i,this._breakpointObserver=a,this._parentSnackBar=s,this._defaultConfig=o,this._snackBarRefAtThisLevel=null}openFromComponent(t,r){return this._attach(t,r)}openFromTemplate(t,r){return this._attach(t,r)}open(t,r="",i){const a={...this._defaultConfig,...i};return a.data={message:t,action:r},a.announcementMessage===t&&(a.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,a)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,r){const a=dr.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:Pk,useValue:r}]}),s=new Tv(this.snackBarContainerComponent,r.viewContainerRef,a),o=t.attach(s);return o.instance.snackBarConfig=r,o.instance}_attach(t,r){const i={...new Pk,...this._defaultConfig,...r},a=this._createOverlay(i),s=this._attachSnackBarContainer(a,i),o=new AP(s,a);if(t instanceof $a){const l=new Nv(t,null,{$implicit:i.data,snackBarRef:o});o.instance=s.attachTemplatePortal(l)}else{const l=this._createInjector(i,o),c=new Tv(t,void 0,l),u=s.attachComponentPortal(c);o.instance=u.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(lr(a.detachments())).subscribe(l=>{a.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),i.announcementMessage&&s._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(o,i),this._openedSnackBarRef=o,this._openedSnackBarRef}_animateSnackBar(t,r){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),r.duration&&r.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(r.duration))}_createOverlay(t){const r=new Pv;r.direction=t.direction;let i=this._overlay.position().global();const a="rtl"===t.direction,s="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!a||"end"===t.horizontalPosition&&a,o=!s&&"center"!==t.horizontalPosition;return s?i.left("0"):o?i.right("0"):i.centerHorizontally(),"top"===t.verticalPosition?i.top("0"):i.bottom("0"),r.positionStrategy=i,this._overlay.create(r)}_createInjector(t,r){return dr.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:AP,useValue:r},{provide:mne,useValue:t.data}]})}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Ms),Y(pP),Y(dr),Y(XC),Y(e,12),Y(yne))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})(),Est=(()=>{class e extends Mst{constructor(t,r,i,a,s,o){super(t,r,i,a,s,o),this.simpleSnackBarComponent=xst,this.snackBarContainerComponent=Sst,this.handsetCssClass="mat-mdc-snack-bar-handset"}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Ms),Y(pP),Y(dr),Y(XC),Y(e,12),Y(yne))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:gne})}return e})();const Dst=["matFormFieldNotchedOutline",""],Ast=["*"],Tst=["textField"],Nst=["iconPrefixContainer"],Ost=["textPrefixContainer"];function Fst(e,n){1&e&&we(0,"span",19)}function Rst(e,n){if(1&e){const t=ps();B(0,"label",17),xt("cdkObserveContent",function(){return ei(t),ti(ze(2)._refreshOutlineNotchWidth())}),Wt(1,1),Ae(2,Fst,1,0,"span",18),K()}if(2&e){const t=ze(2);me("floating",t._shouldLabelFloat())("cdkObserveContentDisabled",!t._hasOutline())("id",t._labelId),dn("for",t._control.id)("aria-owns",t._control.id),ne(2),me("ngIf",!t.hideRequiredMarker&&t._control.required)}}function Pst(e,n){1&e&&Ae(0,Rst,3,6,"label",16),2&e&&me("ngIf",ze()._hasFloatingLabel())}function Lst(e,n){1&e&&we(0,"div",20)}function $st(e,n){}function Bst(e,n){1&e&&Ae(0,$st,0,0,"ng-template",22),2&e&&(ze(2),me("ngTemplateOutlet",Zl(1)))}function Vst(e,n){if(1&e&&(B(0,"div",21),Ae(1,Bst,1,1,"ng-template",9),K()),2&e){const t=ze();me("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",t._labelWidth),ne(1),me("ngIf",!t._forceDisplayInfixLabel())}}function zst(e,n){1&e&&(B(0,"div",23,24),Wt(2,2),K())}function Ust(e,n){1&e&&(B(0,"div",25,26),Wt(2,3),K())}function Hst(e,n){}function Wst(e,n){1&e&&Ae(0,Hst,0,0,"ng-template",22),2&e&&(ze(),me("ngTemplateOutlet",Zl(1)))}function jst(e,n){1&e&&(B(0,"div",27),Wt(1,4),K())}function Gst(e,n){1&e&&(B(0,"div",28),Wt(1,5),K())}function qst(e,n){1&e&&we(0,"div",29)}function Kst(e,n){1&e&&(B(0,"div",30),Wt(1,6),K()),2&e&&me("@transitionMessages",ze()._subscriptAnimationState)}function Xst(e,n){if(1&e&&(B(0,"mat-hint",34),ye(1),K()),2&e){const t=ze(2);me("id",t._hintLabelId),ne(1),On(t.hintLabel)}}function Yst(e,n){if(1&e&&(B(0,"div",31),Ae(1,Xst,2,2,"mat-hint",32),Wt(2,7),we(3,"div",33),Wt(4,8),K()),2&e){const t=ze();me("@transitionMessages",t._subscriptAnimationState),ne(1),me("ngIf",t.hintLabel)}}const Zst=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Qst=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let TP=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=ce({type:e,selectors:[["mat-label"]]})}return e})(),Jst=0;const bne=new ue("MatError");let eot=(()=>{class e{constructor(t,r){this.id="mat-mdc-error-"+Jst++,t||r.nativeElement.setAttribute("aria-live","polite")}static#e=this.\u0275fac=function(r){return new(r||e)(Mu("aria-live"),E(Le))};static#t=this.\u0275dir=ce({type:e,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(r,i){2&r&&nc("id",i.id)},inputs:{id:"id"},features:[jt([{provide:bne,useExisting:e}])]})}return e})(),tot=0,_ne=(()=>{class e{constructor(){this.align="start",this.id="mat-mdc-hint-"+tot++}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=ce({type:e,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(r,i){2&r&&(nc("id",i.id),dn("align",null),Xt("mat-mdc-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"}})}return e})();const not=new ue("MatPrefix"),rot=new ue("MatSuffix");let vne=(()=>{class e{constructor(t){this._elementRef=t,this.floating=!1}getWidth(){return function iot(e){if(null!==e.offsetParent)return e.scrollWidth;const t=e.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const r=t.scrollWidth;return t.remove(),r}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le))};static#t=this.\u0275dir=ce({type:e,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(r,i){2&r&&Xt("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating"}})}return e})();const xne="mdc-line-ripple--active",Lk="mdc-line-ripple--deactivating";let wne=(()=>{class e{constructor(t,r){this._elementRef=t,this._handleTransitionEnd=i=>{const a=this._elementRef.nativeElement.classList,s=a.contains(Lk);"opacity"===i.propertyName&&s&&a.remove(xne,Lk)},r.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(Lk),t.add(xne)}deactivate(){this._elementRef.nativeElement.classList.add(Lk)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(We))};static#t=this.\u0275dir=ce({type:e,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return e})(),Cne=(()=>{class e{constructor(t,r){this._elementRef=t,this._ngZone=r,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(We))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(r,i){2&r&&Xt("mdc-notched-outline--notched",i.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:Dst,ngContentSelectors:Ast,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(r,i){1&r&&(Hi(),we(0,"div",0),B(1,"div",1),Wt(2),K(),we(3,"div",2)),2&r&&(ne(1),tc("width",i._getNotchWidth()))},encapsulation:2,changeDetection:0})}return e})();const aot={transitionMessages:Fl("transitionMessages",[Ea("enter",Un({opacity:1,transform:"translateY(0%)"})),Ya("void => enter",[Un({opacity:0,transform:"translateY(-5px)"}),Is("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let NP=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=ce({type:e})}return e})();const OP=new ue("MatFormField"),sot=new ue("MAT_FORM_FIELD_DEFAULT_OPTIONS");let kne=0,cot=(()=>{class e{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Jt(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==r&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,r,i,a,s,o,l,c){this._elementRef=t,this._changeDetectorRef=r,this._ngZone=i,this._dir=a,this._platform=s,this._defaults=o,this._animationMode=l,this._document=c,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+kne++,this._hintLabelId="mat-mdc-hint-"+kne++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new je,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,o&&(o.appearance&&(this.appearance=o.appearance),this._hideRequiredMarker=!!o?.hideRequiredMarker,o.color&&(this.color=o.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(lr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),os(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(lr(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(lr(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(a=>"start"===a.align):null,i=this._hintChildren?this._hintChildren.find(a=>"end"===a.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const r=this._iconPrefixContainer?.nativeElement,i=this._textPrefixContainer?.nativeElement,a=r?.getBoundingClientRect().width??0,s=i?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${a+s}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(fi),E(We),E(Al),E(ci),E(sot,8),E(ds,8),E(Je))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["mat-form-field"]],contentQueries:function(r,i,a){if(1&r&&(Ei(a,TP,5),Ei(a,TP,7),Ei(a,NP,5),Ei(a,not,5),Ei(a,rot,5),Ei(a,bne,5),Ei(a,_ne,5)),2&r){let s;ft(s=mt())&&(i._labelChildNonStatic=s.first),ft(s=mt())&&(i._labelChildStatic=s.first),ft(s=mt())&&(i._formFieldControl=s.first),ft(s=mt())&&(i._prefixChildren=s),ft(s=mt())&&(i._suffixChildren=s),ft(s=mt())&&(i._errorChildren=s),ft(s=mt())&&(i._hintChildren=s)}},viewQuery:function(r,i){if(1&r&&(hn(Tst,5),hn(Nst,5),hn(Ost,5),hn(vne,5),hn(Cne,5),hn(wne,5)),2&r){let a;ft(a=mt())&&(i._textField=a.first),ft(a=mt())&&(i._iconPrefixContainer=a.first),ft(a=mt())&&(i._textPrefixContainer=a.first),ft(a=mt())&&(i._floatingLabel=a.first),ft(a=mt())&&(i._notchedOutline=a.first),ft(a=mt())&&(i._lineRipple=a.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(r,i){2&r&&Xt("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===i._animationMode)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary","accent"!==i.color&&"warn"!==i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[jt([{provide:OP,useExisting:e}])],ngContentSelectors:Qst,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(r,i){1&r&&(Hi(Zst),Ae(0,Pst,1,1,"ng-template",null,0,cE),B(2,"div",1,2),xt("click",function(s){return i._control.onContainerClick(s)}),Ae(4,Lst,1,0,"div",3),B(5,"div",4),Ae(6,Vst,2,3,"div",5),Ae(7,zst,3,0,"div",6),Ae(8,Ust,3,0,"div",7),B(9,"div",8),Ae(10,Wst,1,1,"ng-template",9),Wt(11),K(),Ae(12,jst,2,0,"div",10),Ae(13,Gst,2,0,"div",11),K(),Ae(14,qst,1,0,"div",12),K(),B(15,"div",13),Ae(16,Kst,2,1,"div",14),Ae(17,Yst,5,2,"div",15),K()),2&r&&(ne(2),Xt("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),ne(2),me("ngIf",!i._hasOutline()&&!i._control.disabled),ne(2),me("ngIf",i._hasOutline()),ne(1),me("ngIf",i._hasIconPrefix),ne(1),me("ngIf",i._hasTextPrefix),ne(2),me("ngIf",!i._hasOutline()||i._forceDisplayInfixLabel()),ne(2),me("ngIf",i._hasTextSuffix),ne(1),me("ngIf",i._hasIconSuffix),ne(1),me("ngIf",!i._hasOutline()),ne(1),Xt("mat-mdc-form-field-subscript-dynamic-size","dynamic"===i.subscriptSizing),me("ngSwitch",i._getDisplayedMessages()),ne(1),me("ngSwitchCase","error"),ne(1),me("ngSwitchCase","hint"))},dependencies:[ma,GE,qy,WE,Vrt,_ne,vne,Cne,wne],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[aot.transitionMessages]},changeDetection:0})}return e})(),$k=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[Cn,Va,pte,Cn]})}return e})();class uot{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(n=!1,t,r=!0,i){this._multiple=n,this._emitChanges=r,this.compareWith=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new je,t&&t.length&&(n?t.forEach(a=>this._markSelected(a)):this._markSelected(t[0]),this._selectedToEmit.length=0)}select(...n){this._verifyValueAssignment(n),n.forEach(r=>this._markSelected(r));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...n){this._verifyValueAssignment(n),n.forEach(r=>this._unmarkSelected(r));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...n){this._verifyValueAssignment(n);const t=this.selected,r=new Set(n);n.forEach(a=>this._markSelected(a)),t.filter(a=>!r.has(a)).forEach(a=>this._unmarkSelected(a));const i=this._hasQueuedChanges();return this._emitChangeEvent(),i}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();const t=this._hasQueuedChanges();return n&&this._emitChangeEvent(),t}isSelected(n){return this._selection.has(this._getConcreteValue(n))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){n=this._getConcreteValue(n),this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){n=this._getConcreteValue(n),this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(n){if(this.compareWith){for(let t of this._selection)if(this.compareWith(n,t))return t;return n}return n}}const dot=["trigger"],hot=["panel"];function pot(e,n){if(1&e&&(B(0,"span",10),ye(1),K()),2&e){const t=ze();ne(1),On(t.placeholder)}}function fot(e,n){if(1&e&&(B(0,"span",14),ye(1),K()),2&e){const t=ze(2);ne(1),On(t.triggerValue)}}function mot(e,n){1&e&&Wt(0,0,["*ngSwitchCase","true"])}function got(e,n){1&e&&(B(0,"span",11),Ae(1,fot,2,1,"span",12),Ae(2,mot,1,0,"ng-content",13),K()),2&e&&(me("ngSwitch",!!ze().customTrigger),ne(2),me("ngSwitchCase",!0))}function yot(e,n){if(1&e){const t=ps();ar(),Er(),B(0,"div",15,16),xt("@transformPanel.done",function(i){return ei(t),ti(ze()._panelDoneAnimatingStream.next(i.toState))})("keydown",function(i){return ei(t),ti(ze()._handleKeydown(i))}),Wt(2,1),K()}if(2&e){const t=ze();(function Mz(e,n,t){$s(Fa,go,ef(ge(),e,n,t),!0)})("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",t._getPanelTheme(),""),me("ngClass",t.panelClass)("@transformPanel","showing"),dn("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const bot=[[["mat-select-trigger"]],"*"],_ot=["mat-select-trigger","*"],vot={transformPanelWrap:Fl("transformPanelWrap",[Ya("* => void",xP("@transformPanel",[vP()],{optional:!0}))]),transformPanel:Fl("transformPanel",[Ea("void",Un({opacity:0,transform:"scale(1, 0.8)"})),Ya("void => showing",Is("120ms cubic-bezier(0, 0, 0.2, 1)",Un({opacity:1,transform:"scale(1, 1)"}))),Ya("* => void",Is("100ms linear",Un({opacity:0})))])};let Mne=0;const Ene=new ue("mat-select-scroll-strategy"),wot=new ue("MAT_SELECT_CONFIG"),Cot={provide:Ene,deps:[Ms],useFactory:function xot(e){return()=>e.scrollStrategies.reposition()}},Dne=new ue("MatSelectTrigger");class kot{constructor(n,t){this.source=n,this.value=t}}const Sot=Ik(Ite(Sk(Mte(class{constructor(e,n,t,r,i){this._elementRef=e,this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=r,this.ngControl=i,this.stateChanges=new je}}))));let Iot=(()=>{class e extends Sot{get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(UR.required)??!1}set required(t){this._required=Jt(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=Jt(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=Jt(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=ov(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}constructor(t,r,i,a,s,o,l,c,u,h,d,p,f,m){super(s,a,l,c,h),this._viewportRuler=t,this._changeDetectorRef=r,this._ngZone=i,this._dir=o,this._parentFormField=u,this._liveAnnouncer=f,this._defaultOptions=m,this._panelOpen=!1,this._compareWith=(g,y)=>g===y,this._uid="mat-select-"+Mne++,this._triggerAriaLabelledBy=null,this._destroy=new je,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+Mne++,this._panelDoneAnimatingStream=new je,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=Qy(()=>{const g=this.options;return g?g.changes.pipe(ol(g),ri(()=>os(...g.map(y=>y.onSelectionChange)))):this._ngZone.onStable.pipe(fr(1),ri(()=>this.optionSelectionChanges))}),this.openedChange=new ct,this._openedStream=this.openedChange.pipe(Pn(g=>g),tt(()=>{})),this._closedStream=this.openedChange.pipe(Pn(g=>!g),tt(()=>{})),this.selectionChange=new ct,this.valueChange=new ct,this.ngControl&&(this.ngControl.valueAccessor=this),null!=m?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=m.typeaheadDebounceInterval),this._scrollStrategyFactory=p,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(d)||0,this.id=this.id}ngOnInit(){this._selectionModel=new uot(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(dte(),lr(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(lr(this._destroy)).subscribe(t=>{t.added.forEach(r=>r.select()),t.removed.forEach(r=>r.deselect())}),this.options.changes.pipe(ol(null),lr(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),r=this.ngControl;if(t!==this._triggerAriaLabelledBy){const i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?i.setAttribute("aria-labelledby",t):i.removeAttribute("aria-labelledby")}r&&(this._previousControl!==r.control&&(void 0!==this._previousControl&&null!==r.disabled&&r.disabled!==this.disabled&&(this.disabled=r.disabled),this._previousControl=r.control),this.updateErrorState())}ngOnChanges(t){(t.disabled||t.userAriaDescribedBy)&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(r=>r.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const r=t.keyCode,i=40===r||38===r||37===r||39===r,a=13===r||32===r,s=this._keyManager;if(!s.isTyping()&&a&&!cu(t)||(this.multiple||t.altKey)&&i)t.preventDefault(),this.open();else if(!this.multiple){const o=this.selected;s.onKeydown(t);const l=this.selected;l&&o!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(t){const r=this._keyManager,i=t.keyCode,a=40===i||38===i,s=r.isTyping();if(a&&t.altKey)t.preventDefault(),this.close();else if(s||13!==i&&32!==i||!r.activeItem||cu(t))if(!s&&this._multiple&&65===i&&t.ctrlKey){t.preventDefault();const o=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(o?l.select():l.deselect())})}else{const o=r.activeItemIndex;r.onKeydown(t),this._multiple&&a&&t.shiftKey&&r.activeItem&&r.activeItemIndex!==o&&r.activeItem._selectViaInteraction()}else t.preventDefault(),r.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(fr(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this.options.forEach(r=>r.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(r=>this._selectOptionByValue(r)),this._sortValues();else{const r=this._selectOptionByValue(t);r?this._keyManager.updateActiveItem(r):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const r=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return null!=i.value&&this._compareWith(i.value,t)}catch{return!1}});return r&&this._selectionModel.select(r),r}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_skipPredicate(t){return t.disabled}_initKeyManager(){this._keyManager=new Hrt(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=os(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(lr(t)).subscribe(r=>{this._onSelect(r.source,r.isUserInput),r.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),os(...this.options.map(r=>r._stateChanges)).pipe(lr(t)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(t,r){const i=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(i!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),r&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),r&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),i!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((r,i)=>this.sortComparator?this.sortComparator(r,i,t):t.indexOf(r)-t.indexOf(i)),this.stateChanges.next()}}_propagateChanges(t){let r=null;r=this.multiple?this.selected.map(i=>i.value):this.selected?this.selected.value:t,this._value=r,this.valueChange.emit(r),this._onChange(r),this.selectionChange.emit(this._getChangeEvent(r)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let t=-1;for(let r=0;r<this.options.length;r++)if(!this.options.get(r).disabled){t=r;break}this._keyManager.setActiveItem(t)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();return this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();let r=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}static#e=this.\u0275fac=function(r){return new(r||e)(E(kP),E(fi),E(We),E(mP),E(Le),E(Al,8),E(kv,8),E(cp,8),E(OP,8),E(Vo,10),Mu("tabindex"),E(Ene),E(pP),E(wot,8))};static#t=this.\u0275dir=ce({type:e,viewQuery:function(r,i){if(1&r&&(hn(dot,5),hn(hot,5),hn(une,5)),2&r){let a;ft(a=mt())&&(i.trigger=a.first),ft(a=mt())&&(i.panel=a.first),ft(a=mt())&&(i._overlayDir=a.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Ce,Jr]})}return e})(),Mot=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=ce({type:e,selectors:[["mat-select-trigger"]],features:[jt([{provide:Dne,useExisting:e}])]})}return e})(),Eot=(()=>{class e extends Iot{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._skipPredicate=t=>!this.panelOpen&&t.disabled}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(lr(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(t){const r=this.options.toArray()[t];if(r){const i=this.panel.nativeElement,a=function Dit(e,n,t){if(t.length){let r=n.toArray(),i=t.toArray(),a=0;for(let s=0;s<e+1;s++)r[s].group&&r[s].group===i[a]&&a++;return a}return 0}(t,this.options,this.optionGroups),s=r._getHostElement();i.scrollTop=0===t&&1===a?0:function Ait(e,n,t,r){return e<t?e:e+n>t+r?Math.max(0,e-r+n):t}(s.offsetTop,s.offsetHeight,i.scrollTop,i.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(t){return new kot(this,t)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof IP?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=Jt(t),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const t of this.options)t._changeDetectorRef.markForCheck()}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=Ve(e)))(i||e)}}();static#t=this.\u0275cmp=Ut({type:e,selectors:[["mat-select"]],contentQueries:function(r,i,a){if(1&r&&(Ei(a,Dne,5),Ei(a,Pte,5),Ei(a,Rte,5)),2&r){let s;ft(s=mt())&&(i.customTrigger=s.first),ft(s=mt())&&(i.options=s),ft(s=mt())&&(i.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox","ngSkipHydration","",1,"mat-mdc-select"],hostVars:19,hostBindings:function(r,i){1&r&&xt("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&r&&(dn("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),Xt("mat-mdc-select-disabled",i.disabled)("mat-mdc-select-invalid",i.errorState)("mat-mdc-select-required",i.required)("mat-mdc-select-empty",i.empty)("mat-mdc-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matSelect"],features:[jt([{provide:NP,useExisting:e},{provide:Fte,useExisting:e}]),Ce],ngContentSelectors:_ot,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(r,i){if(1&r&&(Hi(bot),B(0,"div",0,1),xt("click",function(){return i.toggle()}),B(3,"div",2),Ae(4,pot,2,1,"span",3),Ae(5,got,3,2,"span",4),K(),B(6,"div",5)(7,"div",6),ar(),B(8,"svg",7),we(9,"path",8),K()()()(),Ae(10,yot,3,9,"ng-template",9),xt("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&r){const a=Zl(1);dn("aria-owns",i.panelOpen?i.id+"-panel":null),ne(3),me("ngSwitch",i.empty),dn("id",i._valueId),ne(1),me("ngSwitchCase",!0),ne(1),me("ngSwitchCase",!1),ne(5),me("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",i._preferredOverlayOrigin||a)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayWidth",i._overlayWidth)}},dependencies:[Lu,qy,WE,rH,une,IP],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mdc-menu-surface{max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px)}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[vot.transformPanel]},changeDetection:0})}return e})(),Dot=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({providers:[Cot],imports:[Va,$v,Lte,Cn,Nk,$k,Lte,Cn]})}return e})();function Aot(e,n){}class Bk{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let Ane=(()=>{class e extends Tk{constructor(t,r,i,a,s,o,l,c){super(),this._elementRef=t,this._focusTrapFactory=r,this._config=a,this._interactivityChecker=s,this._ngZone=o,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),h},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=i}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=xR(),a=this._elementRef.nativeElement;(!i||i===this._document.body||i===a||a.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=xR();return t===r||t.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=xR())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(uP),E(Je,8),E(Bk),E(Ck),E(We),E(Lv),E(Lg))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,i){if(1&r&&hn(Ov,7),2&r){let a;ft(a=mt())&&(i._portalOutlet=a.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,i){2&r&&dn("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[Ce],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,i){1&r&&Ae(0,Aot,0,0,"ng-template",0)},dependencies:[Ov],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return e})();class FP{constructor(n,t){this.overlayRef=n,this.config=t,this.closed=new je,this.disableClose=t.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!cu(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=n.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(n,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(n),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",t=""){return this.overlayRef.updateSize({width:n,height:t}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}}const Tne=new ue("DialogScrollStrategy"),Tot=new ue("DialogData"),Not=new ue("DefaultDialogConfig"),Fot={provide:Tne,deps:[Ms],useFactory:function Oot(e){return()=>e.scrollStrategies.block()}};let Rot=0,Nne=(()=>{class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,r,i,a,s,o){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=a,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new je,this._afterOpenedAtThisLevel=new je,this._ariaHiddenElements=new Map,this.afterAllClosed=Qy(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ol(void 0))),this._scrollStrategy=o}open(t,r){(r={...this._defaultOptions||new Bk,...r}).id=r.id||"cdk-dialog-"+Rot++,r.id&&this.getDialogById(r.id);const a=this._getOverlayConfig(r),s=this._overlay.create(a),o=new FP(s,r),l=this._attachContainer(s,o,r);return o.containerInstance=l,this._attachDialogContent(t,o,l,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(o),o.closed.subscribe(()=>this._removeOpenDialog(o,!0)),this.afterOpened.next(o),o}closeAll(){RP(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){RP(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),RP(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new Pv({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const a=i.injector||i.viewContainerRef?.injector,s=[{provide:Bk,useValue:i},{provide:FP,useValue:r},{provide:Lv,useValue:t}];let o;i.container?"function"==typeof i.container?o=i.container:(o=i.container.type,s.push(...i.container.providers(i))):o=Ane;const l=new Tv(o,i.viewContainerRef,dr.create({parent:a||this._injector,providers:s}),i.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,r,i,a){if(t instanceof $a){const s=this._createInjector(a,r,i,void 0);let o={$implicit:a.data,dialogRef:r};a.templateContext&&(o={...o,..."function"==typeof a.templateContext?a.templateContext():a.templateContext}),i.attachTemplatePortal(new Nv(t,null,o,s))}else{const s=this._createInjector(a,r,i,this._injector),o=i.attachComponentPortal(new Tv(t,a.viewContainerRef,s,a.componentFactoryResolver));r.componentInstance=o.instance}}_createInjector(t,r,i,a){const s=t.injector||t.viewContainerRef?.injector,o=[{provide:Tot,useValue:t.data},{provide:FP,useValue:r}];return t.providers&&("function"==typeof t.providers?o.push(...t.providers(r,t,i)):o.push(...t.providers)),t.direction&&(!s||!s.get(Al,null,{optional:!0}))&&o.push({provide:Al,useValue:{value:t.direction,change:Ue()}}),dr.create({parent:s||a,providers:o})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((a,s)=>{a?s.setAttribute("aria-hidden",a):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const a=r[i];a!==t&&"SCRIPT"!==a.nodeName&&"STYLE"!==a.nodeName&&!a.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(a,a.getAttribute("aria-hidden")),a.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Ms),Y(dr),Y(Not,8),Y(e,12),Y(Ok),Y(Tne))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();function RP(e,n){let t=e.length;for(;t--;)n(e[t])}let Pot=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({providers:[Nne,Fot],imports:[$v,$g,uit,$g]})}return e})();function Lot(e,n){}class Vk{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const PP="mdc-dialog--open",One="mdc-dialog--opening",Fne="mdc-dialog--closing";let Vot=(()=>{class e extends Ane{constructor(t,r,i,a,s,o,l,c){super(t,r,i,a,s,o,l,c),this._animationStateChanged=new ct}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(uP),E(Je,8),E(Vk),E(Ck),E(We),E(Lv),E(Lg))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["ng-component"]],features:[Ce],decls:0,vars:0,template:function(r,i){},encapsulation:2})}return e})();const Rne="--mat-dialog-transition-duration";function Pne(e){return null==e?null:"number"==typeof e?e:e.endsWith("ms")?ov(e.substring(0,e.length-2)):e.endsWith("s")?1e3*ov(e.substring(0,e.length-1)):"0"===e?0:null}let zot=(()=>{class e extends Vot{constructor(t,r,i,a,s,o,l,c,u){super(t,r,i,a,s,o,l,u),this._animationMode=c,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?Pne(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?Pne(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Rne,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(One,PP)),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(PP),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(PP),this._animationsEnabled?(this._hostElement.style.setProperty(Rne,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Fne)),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(One,Fne)}_waitForAnimationToComplete(t,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(uP),E(Je,8),E(Vk),E(Ck),E(We),E(Lv),E(ds,8),E(Lg))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(r,i){2&r&&(nc("id",i._config.id),dn("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Xt("_mat-animation-noopable",!i._animationsEnabled))},features:[Ce],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,i){1&r&&(B(0,"div",0)(1,"div",1),Ae(2,Lot,0,0,"ng-template",2),K()())},dependencies:[Ov],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return e})();class Uot{constructor(n,t,r){this._ref=n,this._containerInstance=r,this._afterOpened=new je,this._beforeClosed=new je,this._state=0,this.disableClose=t.disableClose,this.id=n.id,r._animationStateChanged.pipe(Pn(i=>"opened"===i.state),fr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(Pn(i=>"closed"===i.state),fr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),os(this.backdropClick(),this.keydownEvents().pipe(Pn(i=>27===i.keyCode&&!this.disableClose&&!cu(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),function Hot(e,n,t){e._closeInteractionType=n,e.close(t)}(this,"keydown"===i.type?"keyboard":"mouse"))})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe(Pn(t=>"closing"===t.state),fr(1)).subscribe(t=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let t=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?t.left(n.left):t.right(n.right):t.centerHorizontally(),n&&(n.top||n.bottom)?n.top?t.top(n.top):t.bottom(n.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",t=""){return this._ref.updateSize(n,t),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const Wot=new ue("MatMdcDialogData"),jot=new ue("mat-mdc-dialog-default-options"),Lne=new ue("mat-mdc-dialog-scroll-strategy"),qot={provide:Lne,deps:[Ms],useFactory:function Got(e){return()=>e.scrollStrategies.block()}};let Kot=0,Xot=(()=>{class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,r,i,a,s,o,l,c,u,h){this._overlay=t,this._defaultOptions=i,this._parentDialog=a,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new je,this._afterOpenedAtThisLevel=new je,this._idPrefix="mat-dialog-",this.dialogConfigClass=Vk,this.afterAllClosed=Qy(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ol(void 0))),this._scrollStrategy=o,this._dialog=r.get(Nne)}open(t,r){let i;(r={...this._defaultOptions||new Vk,...r}).id=r.id||`${this._idPrefix}${Kot++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const a=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:Bk,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(s,o,l)=>(i=new this._dialogRefConstructor(s,r,l),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:o.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentInstance=a.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}static#e=this.\u0275fac=function(r){Zp()};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})(),$ne=(()=>{class e extends Xot{constructor(t,r,i,a,s,o,l,c){super(t,r,a,o,l,s,Uot,zot,Wot,c),this._idPrefix="mat-mdc-dialog-"}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Ms),Y(dr),Y(Hy,8),Y(jot,8),Y(Lne),Y(e,12),Y(Ok),Y(ds,8))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})(),Bne=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({providers:[$ne,qot],imports:[Pot,$v,$g,Cn,Cn]})}return e})(),zne=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[Cn]})}return e})(),Une=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[Va,Cn]})}return e})(),ilt=(()=>{class e extends nr{constructor(t,r,i,a,s,o,l){super(t,null,r,i),this.ngClassInstance=l,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new Lu(a,s,t,o)),this.init(),this.setValue("","")}set klass(t){this.ngClassInstance.klass=t,this.setValue(t,"")}updateWithValue(t){this.ngClassInstance.ngClass=t,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return e.\u0275fac=function(t){return new(t||e)(E(Le),E(zn),E(Yn),E(Uy),E(Ru),E(Pa),E(Lu,10))},e.\u0275dir=ce({type:e,inputs:{klass:["class","klass"]},features:[Ce]}),e})();const alt=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let LP=(()=>{class e extends ilt{constructor(){super(...arguments),this.inputs=alt}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=Ve(e)))(r||e)}}(),e.\u0275dir=ce({type:e,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[Ce]}),e})(),Kne=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ze({type:e}),e.\u0275inj=Ye({imports:[LR]}),e})(),nre=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ze({type:e}),e.\u0275inj=Ye({imports:[LR]}),e})(),BP=(()=>{class e{constructor(t,r){sc(r)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,r=[]){return{ngModule:e,providers:t.serverLoaded?[{provide:eo,useValue:{...$R,...t}},{provide:BR,useValue:r,multi:!0},{provide:Og,useValue:!0}]:[{provide:eo,useValue:{...$R,...t}},{provide:BR,useValue:r,multi:!0}]}}}return e.\u0275fac=function(t){return new(t||e)(Y(Og),Y(Ii))},e.\u0275mod=Ze({type:e}),e.\u0275inj=Ye({imports:[aee,Kne,nre,aee,Kne,nre]}),e})();var rre=function(e){return e.ENVIRONMENT="environment",e.USER="user",e.true="environment",e.false="user",e}(rre||{});const Lct=["video"],$ct=["canvas"];function Bct(e,n){if(1&e){const t=ps();B(0,"div",6),xt("click",function(){return ei(t),ti(ze().rotateVideoInput(!0))}),K()}}class VP{constructor(n,t,r){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=t,this._imageAsDataUrl=n,this._imageData=r}static getDataFromDataUrl(n,t){return n.replace(`data:${t};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=VP.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}class Vct{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((n,t)=>{navigator.mediaDevices.enumerateDevices().then(r=>{n(r.filter(i=>"videoinput"===i.kind))}).catch(r=>{t(r.message||r)})}):Promise.reject("enumerateDevices() not supported.")}}let ire=(()=>{class e{constructor(){this.width=640,this.height=480,this.videoOptions=e.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=e.DEFAULT_IMAGE_TYPE,this.imageQuality=e.DEFAULT_IMAGE_QUALITY,this.imageCapture=new ct,this.initError=new ct,this.imageClick=new ct,this.cameraSwitched=new ct,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(t){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=t.subscribe(()=>{this.takeSnapshot()})}set switchCamera(t){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=t.subscribe(r=>{"string"==typeof r?this.switchToVideoInput(r):this.rotateVideoInput(!1!==r)})}static getMediaConstraintsForDevice(t,r){const i=r||this.DEFAULT_VIDEO_OPTIONS;return t&&(i.deviceId={exact:t}),i}static getDeviceIdFromMediaStreamTrack(t){if(t.getSettings&&t.getSettings()&&t.getSettings().deviceId)return t.getSettings().deviceId;if(t.getConstraints&&t.getConstraints()&&t.getConstraints().deviceId){const r=t.getConstraints().deviceId;return e.getValueFromConstrainDOMString(r)}}static getFacingModeFromMediaStreamTrack(t){if(t){if(t.getSettings&&t.getSettings()&&t.getSettings().facingMode)return t.getSettings().facingMode;if(t.getConstraints&&t.getConstraints()&&t.getConstraints().facingMode){const r=t.getConstraints().facingMode;return e.getValueFromConstrainDOMString(r)}}}static isUserFacing(t){const r=e.getFacingModeFromMediaStreamTrack(t);return!!r&&"user"===r.toLowerCase()}static getValueFromConstrainDOMString(t){if(t){if(t instanceof String)return String(t);if(Array.isArray(t)&&Array(t).length>0)return String(t[0]);if("object"==typeof t){if(t.exact)return String(t.exact);if(t.ideal)return String(t.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(t=>{this.initError.next({message:t}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const t=this.nativeVideoElement,r={width:this.width,height:this.height};t.videoWidth&&(r.width=t.videoWidth,r.height=t.videoHeight);const i=this.canvas.nativeElement;i.width=r.width,i.height=r.height;const a=i.getContext("2d");a.drawImage(t,0,0);const s=this.imageType?this.imageType:e.DEFAULT_IMAGE_TYPE,l=i.toDataURL(s,this.imageQuality?this.imageQuality:e.DEFAULT_IMAGE_QUALITY);let c=null;this.captureImageData&&(c=a.getImageData(0,0,i.width,i.height)),this.imageCapture.next(new VP(l,s,c))}rotateVideoInput(t){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(t?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(t){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(t,this.videoOptions)}videoResize(){}get videoWidth(){const t=this.getVideoAspectRatio();return Math.min(this.width,this.height*t)}get videoHeight(){const t=this.getVideoAspectRatio();return Math.min(this.height,this.width/t)}get videoStyleClasses(){let t="";return this.isMirrorImage()&&(t+="mirrored "),t.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const t=this.nativeVideoElement;return t.videoWidth&&t.videoWidth>0&&t.videoHeight&&t.videoHeight>0?t.videoWidth/t.videoHeight:this.width/this.height}initWebcam(t,r){const i=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const a=e.getMediaConstraintsForDevice(t,r);navigator.mediaDevices.getUserMedia({video:a}).then(s=>{this.mediaStream=s,i.srcObject=s,i.play(),this.activeVideoSettings=s.getVideoTracks()[0].getSettings();const o=e.getDeviceIdFromMediaStreamTrack(s.getVideoTracks()[0]);this.cameraSwitched.next(o),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=o?this.availableVideoInputs.findIndex(l=>l.deviceId===o):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(s=>{this.initError.next({message:s.message,mediaStreamError:s})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let t="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?t=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(t=this.mirrorImage.x.toLowerCase())),t){case"always":return!0;case"never":return!1}}return e.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&(this.nativeVideoElement.pause(),this.mediaStream.getTracks().forEach(t=>t.stop()))}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((t,r)=>{Vct.getAvailableVideoInputs().then(i=>{this.availableVideoInputs=i,t(i)}).catch(i=>{this.availableVideoInputs=[],r(i)})})}}return e.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},e.DEFAULT_IMAGE_TYPE="image/jpeg",e.DEFAULT_IMAGE_QUALITY=.92,e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ut({type:e,selectors:[["webcam"]],viewQuery:function(t,r){if(1&t&&(hn(Lct,7),hn($ct,7)),2&t){let i;ft(i=mt())&&(r.video=i.first),ft(i=mt())&&(r.canvas=i.first)}},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",mirrorImage:"mirrorImage",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(t,r){1&t&&(B(0,"div",0),xt("click",function(){return r.imageClick.next()}),B(1,"video",1,2),xt("resize",function(){return r.videoResize()}),K(),Ae(3,Bct,1,0,"div",3),we(4,"canvas",4,5),K()),2&t&&(ne(1),function hz(e){$s(gde,go,e,!0)}(r.videoStyleClasses),me("width",r.videoWidth)("height",r.videoHeight),ne(2),me("ngIf",r.allowCameraSwitch&&r.availableVideoInputs.length>1&&r.videoInitialized),ne(1),me("width",r.width)("height",r.height))},dependencies:[ma],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scaleX(-1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:#0000001a;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s ease}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:#0000002e}"]}),e})(),are=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Ze({type:e}),e.\u0275inj=Ye({imports:[[Va]]}),e})();const zct=["maskResult"],Uct=["toSend"];function Hct(e,n){if(1&e&&(B(0,"div")(1,"div",13),ye(2),K(),B(3,"div",14),ye(4),K()()),2&e){const t=ze(3);ne(2),On(t.errorFace.title),ne(2),On(t.errorFace.subtitle)}}function Wct(e,n){if(1&e){const t=ps();B(0,"webcam",15),xt("imageCapture",function(i){return ei(t),ti(ze(3).proccessImage(i))})("initError",function(i){return ei(t),ti(ze(3).cameraError(i))}),K()}if(2&e){const t=ze(3);me("height",t.camera.dimensions.video.max.height)("width",t.camera.dimensions.video.max.width)("videoOptions",t.camera.configuration)("imageQuality",1)("captureImageData",!0)("allowCameraSwitch",!1)("trigger",t.takePicture$)("mirrorImage",t.deviceData.isMobile?"never":"always")}}function jct(e,n){if(1&e&&(B(0,"div",4)(1,"div",5),Ae(2,Hct,5,2,"div",6),K(),B(3,"div",7),Ae(4,Wct,1,8,"webcam",8),we(5,"canvas",9,10)(7,"canvas",11,12),K()()),2&e){const t=ze(2);ne(2),me("ngIf",t.errorFace&&!t.response.isLoading),ne(1),tc("width",t.camera.dimensions.video.width,"px")("height",t.camera.dimensions.video.height,"px"),ne(1),me("ngIf",!t.response.base64Image),ne(1),tc("width",t.response.base64Image?null==t.camera.dimensions.result?null:t.camera.dimensions.result.width:t.camera.dimensions.video.width,"px")("height",t.response.base64Image?null==t.camera.dimensions.result?null:t.camera.dimensions.result.height:t.camera.dimensions.video.height,"px")}}function Gct(e,n){1&e&&(B(0,"div",16),we(1,"img",17),B(2,"h1",18),ye(3),rt(4,"transloco"),K(),B(5,"p",18),ye(6),rt(7,"transloco"),K()()),2&e&&(ne(3),On(lt(4,2,"id_scanning.camera_not_found")),ne(3),Ot(" ",lt(7,4,"id_scanning.camera_not_found_description")," "))}function qct(e,n){if(1&e&&(B(0,"div",1),Ae(1,jct,9,10,"div",2),Ae(2,Gct,8,6,"div",3),K()),2&e){const t=ze();ne(1),me("ngIf",!t.camera.isLoading&&t.camera.hasPermissions&&!t.camera.isLowQuality),ne(1),me("ngIf",!t.camera.isLoading&&t.camera.isLowQuality)}}let sre={biometricsLoginCalled:!1},ore=(()=>{class e{constructor(t,r,i,a,s,o){this._dom=t,this._changeDetectorRef=r,this._walletService=i,this._translocoService=a,this.renderer=s,this._navigation=o,this._matDialog=Se($ne),this.debugText="debug",this.aspectRatio=.75,this._unsubscribeAll=new je,this.takePicture=new je,this.setDefaultFace=()=>{this.face={successPosition:0,minPixels:240,minHeight:600,threshold:.25}},this.setDefaultDirections=()=>{this.direction={left:new Image,right:new Image,up:new Image,down:new Image},this.direction.right.crossOrigin="anonymous",this.direction.up.crossOrigin="anonymous",this.direction.down.crossOrigin="anonymous",this.direction.left.crossOrigin="anonymous",this.direction.left.src="https://cdn.verifik.co/web-sdk/images/left.png",this.direction.right.src="https://cdn.verifik.co/web-sdk/images/right.png",this.direction.up.src="https://cdn.verifik.co/web-sdk/images/up.png",this.direction.down.src="https://cdn.verifik.co/web-sdk/images/down.png"},this.setDefaultAttempts=()=>{this.attempts={current:0,limit:3}},this.setDefaultCamera=()=>{this.camera={hasPermissions:!1,isLoading:!1,isLowQuality:!1,configuration:{frameRate:{ideal:30,max:30},[this.deviceData.isMobile?"width":"height"]:{ideal:1080},facingMode:rre.USER},dimensions:{video:{max:{height:Math.ceil(.7*window.innerHeight),width:Math.ceil(.9*window.innerWidth)}}}}},this.setDefaultResponse=()=>{this.response={isLoading:!1,isFailed:!1}},this.setDefaultInterval=()=>{this.interval={}},this.setVideoNgxCameraData=()=>{const l=this._dom.nativeElement.querySelector("video");l&&(l.addEventListener("loadeddata",()=>{this.setVideoDimensions(l),this.drawOvalCenterAndMask(),this.interval.detectFace||(this.interval.detectFace=setInterval(()=>{this.response.base64Image?this.interval.detectFace=clearInterval(this.interval.detectFace):this.takePicture.next()},this.deviceData.time))}),this.interval.checkNgxVideo=clearInterval(this.interval.checkNgxVideo),this.setVideoDimensions(l),this.drawOvalCenterAndMask(),this.loading({isLoading:!1,start:!0}))},this.getCenterAndRadius=(l,c)=>{const u={center:{x:c/2,y:l/2},radius:{x:0,y:0},margin:{y:.05*l,x:0}};return u.margin.x=.8*u.margin.y,u.radius.y=.42*l,u.radius.x=u.radius.y*this.aspectRatio,2*u.radius.x>=c&&(u.radius.x=.48*c,u.radius.y=u.radius.x/this.aspectRatio),u},this.setImageOnCanvas=(l,c,u,h)=>{l.width=h.width,l.height=h.height,l.style.marginLeft=`${h.offsetX||0}px`,l.style.marginTop=`${h.offsetY||0}px`;const d=l.getContext("2d");d.clearRect(0,0,u.width,u.height),d.drawImage(c,u.offsetX,u.offsetY,u.width,u.height,0,0,h.width,h.height)},this.deviceData=this._walletService.getDeviceData(),this.startDefaultValues(),this.setDefaultAttempts(),this.setDefaultDirections(),this.setDefaultFace(),this.setDefaultInterval(),this.renderer.listen("window","resize",()=>{this.interval.checkNgxVideo=setInterval(()=>{this.setMaxVideoDimensions(),this.setVideoNgxCameraData()},this.deviceData.time)}),this.showError=!1,this.errorContent={message:""},this._changeDetectorRef.markForCheck()}ngOnInit(){var t=this;this.startDefaultValues(),this.camera.hasPermissions=!0,this.loading({start:!0}),this._walletService.faceapi$.subscribe(function(){var r=R(function*(i){t.camera.isLoading=!i,t.setMaxVideoDimensions(),i&&(t.interval.checkNgxVideo=setInterval(()=>{t.setVideoNgxCameraData(),t._generateSession(t.type)},100))});return function(i){return r.apply(this,arguments)}}())}ngAfterViewInit(){}setWillReadFrequently(t){if(!t)return;const r=t.getContext("2d",{willReadFrequently:!0});console.log({context:r})}_generateSession(t){const{hash:r}=this._walletService.generateUniqueId();this._walletService.createLivenessSession({identifier:`${r}-${9893839*Math.random()}`,type:t}).subscribe(i=>{localStorage.setItem("accessToken",i.data.token)})}get takePicture$(){return this.takePicture.asObservable()}startDefaultValues(){this.setDefaultResponse(),this.setDefaultCamera(),this.setMaxVideoDimensions()}setVideoDimensions(t){this.camera.dimensions.video.height=t.clientHeight,this.camera.dimensions.video.width=t.clientWidth,this.camera.dimensions.result={height:0,width:0,offsetX:0,offsetY:0},this.setResultDimensions("result",t.clientHeight,t.clientWidth),this.face.video=this.getCenterAndRadius(t.clientHeight,t.clientWidth);const r=this.maskResultCanvasRef?.nativeElement;r.style.marginLeft="0px",r.style.marginTop="0px"}setMaxVideoDimensions(){this.camera.dimensions.video={max:{height:Math.ceil(.7*window.innerHeight),width:Math.ceil(.9*window.innerWidth)}},this.camera.dimensions.result=void 0}drawOvalCenterAndMask(){const t=this.camera.dimensions.video,r=this.maskResultCanvasRef?.nativeElement;r.height=t.height,r.width=t.width;const i=r.getContext("2d");i.clearRect(0,0,t.width||0,t.height||0),i.fillStyle="rgba(255, 255, 255, 0.75)",i.fillRect(0,0,t.width||0,t.height||0),i.globalCompositeOperation="destination-out";const{center:a,radius:s}=this.face.video||{center:{x:0,y:0},radius:{x:0,y:0}};i.fillStyle="rgba(255, 255, 255, 1)",i.beginPath(),i.ellipse(a?.x,a?.y,s.x,s.y,0,0,2*Math.PI),i.fill(),i.closePath(),i.globalCompositeOperation="source-over"}setResultDimensions(t,r,i){const{center:a,radius:s}=this.face[t]=this.getCenterAndRadius(r,i),o=this.camera.dimensions[t];o&&(o.height=r,o.offsetY=0,o.width=Math.min(2.8*s.x,i),o.offsetX=a.x-o.width/2)}loading(t){const{isLoading:r=!0,start:i,result:a}=t,s=i?"camera":a&&"response";s&&this[s]&&(this[s].isLoading=r)}cameraError(t){t.mediaStreamError&&"NotAllowedError"===t.mediaStreamError.name&&(this.loading({isLoading:!1,start:!0}),this.camera.hasPermissions=!1)}proccessImage(t){var r=this;if(!this.interval.detectFace||this.response.base64Image)return;const i=new Image;i.src=t.imageAsDataUrl,i.onload=R(function*(){if(console.log("camera load"),i.height<r.face.minHeight)r.camera.isLowQuality=!0;else try{r.camera.dimensions.real={height:0,width:0,offsetX:0,offsetY:0},r.setResultDimensions("real",i.height,i.width),r.face.real=r.getCenterAndRadius(i.height,i.width);const a=yield WC(i,new eu({minConfidence:.2})).withFaceLandmarks(),s=r.maskResultCanvasRef?.nativeElement.getContext("2d");if(a.length>0&&(r.lastFace=a[0],r.errorFace=null,r.drawOvalCenterAndMask(),r.isFaceCentered(r.lastFace.landmarks.getNose()[3]),r.isFaceClose(r.lastFace.landmarks),r.drawStatusOval(s,!r.errorFace),r.errorFace?r.face.successPosition=0:++r.face.successPosition,!r.errorFace&&r.face.successPosition>2))return r.face.successPosition=0,void r.takePictureLiveness(i);r._changeDetectorRef.markForCheck()}catch(a){alert(a.message)}})}_onLoadImage(){}takePictureLiveness(t){const r=this.maskResultCanvasRef?.nativeElement;this.setImageOnCanvas(r,t,this.camera.dimensions.real,this.camera.dimensions.result);const i=this.ToSendCanvasRef?.nativeElement;this.setImageOnCanvas(i,t,this.camera.dimensions.real,this.camera.dimensions.real),this.response.base64Image=i.toDataURL("image/jpeg"),this.biometricsLogin()}drawStatusOval(t,r){const{center:i,radius:a}=this.face.video||{center:{x:0,y:0},radius:{x:0,y:0}};t.beginPath(),t.ellipse(i.x,i.y,a.x,a.y,0,0,2*Math.PI),t.lineWidth=5,t.strokeStyle=r?"green":"red",t.stroke(),t.closePath(),r||(this.errorFace?.canvas?.includes("\u2191")&&t.drawImage(this.direction.up,i.x-20,i.y-a.y+10,40,40),this.errorFace?.canvas?.includes("\u2193")&&t.drawImage(this.direction.down,i.x-20,i.y+a.y-50,40,40),this.errorFace?.canvas?.includes("\u2192")&&t.drawImage(this.direction.right,i.x+a.x-50,i.y-20,40,40),this.errorFace?.canvas?.includes("\u2190")&&t.drawImage(this.direction.left,i.x-a.x+10,i.y-20,40,40)),this._changeDetectorRef.markForCheck()}inRange(t,r,i){return t>=r&&t<=i}isFaceCentered(t){const r=t.x,i=t.y,{center:a,margin:s}=this.face.real||{center:{x:0,y:0},margin:{x:0,y:0}},o=this.inRange(r,a.x-s.x,a.x+s.x),l=this.inRange(i,a.y,a.y+2.5*s.y);if(!o||!l){let u="";o||(u+=r<a.x-s.x?"\u2192":"\u2190"),l||(u+=i<a.y?"\u2193":"\u2191"),this.errorFace={title:this._translocoService.translate("liveness.center_yor_face"),subtitle:this._translocoService.translate("liveness.center_your_face_subtitle"),canvas:u}}}isFaceClose(t){const r=this.camera.dimensions.real||{center:{x:0,y:0},margin:{x:0,y:0},height:0,width:0,offsetX:0};(t.imageHeight*t.imageWidth/Math.floor(r.height*(r.width-r.offsetX))<this.face.threshold||t.imageHeight<this.face.minPixels||t.imageWidth<this.face.minPixels)&&(this.errorFace={title:this._translocoService.translate("liveness.get_closer"),subtitle:this._translocoService.translate("liveness.get_closer_subtitle")})}biometricsLogin(){if(sre.biometricsLoginCalled||(sre.biometricsLoginCalled=!0,this.response.isLoading))return;this.loading({result:!0});const t={image:this.response?.base64Image?.replace(/^data:.*;base64,/,""),os:this.deviceData.OS};switch(this.type){case"createWallet":this._createWallet(t,this.data);break;case"decryptWallet":this._decryptWallet(t,this.data)}}_createWallet(t,r){this._walletService.createWallet({faceBase64:t.image,password:r.password||void 0,wordsCount:r.wordsCount,seeWallet:1}).subscribe({next:i=>{this.callback(i.data)},error:i=>{this.errorContent=i.error,this.retryLivenessModal(i.error?.message),this.loading({isLoading:!1,result:!0})},complete:()=>{}})}_decryptWallet(t,r){this._walletService.decryptWAllet({faceBase64:t.image,wallet:r.hash,password:r.password||void 0}).subscribe({next:i=>{this.callback(i.data)},error:i=>{this.errorContent=i.error,this.retryLivenessModal(i.error?.message),this.loading({isLoading:!1,result:!0})},complete:()=>{}})}retryLivenessModal(t){this._translocoService.translate("liveness.liveness_failed"),this._translocoService.translate("liveness.liveness_error_message",{error:t}),this._translocoService.translate("confirm"),this._translocoService.translate("cancel")}continueRedirection(){}ngOnDestroy(){this._unsubscribeAll.next(null)}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(fi),E(ek),E(su),E(Pa),E(mi))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["biometrics-general"]],viewQuery:function(r,i){if(1&r&&(hn(zct,5),hn(Uct,5)),2&r){let a;ft(a=mt())&&(i.maskResultCanvasRef=a.first),ft(a=mt())&&(i.ToSendCanvasRef=a.first)}},inputs:{type:"type",data:"data",callback:"callback"},standalone:!0,features:[y0],decls:1,vars:1,consts:[["fxLayout","column","fxLayoutAlign","center center","class","min-h-[60vh] justify-center p-4 sm:p-1 xs:p-1 w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"min-h-[60vh]","justify-center","p-4","sm:p-1","xs:p-1","w-full"],["fxLayout","column","fxLayoutAlign","center center","class","justify-center w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","id-scanning-error-div",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"justify-center","w-full"],["fxLayout","column","fxLayoutAlign","center center",1,"justify-center","text-center","h-20","sm:h-8","xs:h-8","my-2"],[4,"ngIf"],[1,"relative"],[3,"height","width","videoOptions","imageQuality","captureImageData","allowCameraSwitch","trigger","mirrorImage","imageCapture","initError",4,"ngIf"],[1,"absolute","top-0","left-0"],["maskResult",""],["hidden","true"],["toSend",""],[1,"text-3xl","font-bold"],[1,"text-gray-600"],[3,"height","width","videoOptions","imageQuality","captureImageData","allowCameraSwitch","trigger","mirrorImage","imageCapture","initError"],["fxLayout","column","fxLayoutAlign","center center",1,"id-scanning-error-div"],["src","https://cdn.verifik.co/demo/nocameraenabled.svg","alt","",1,"id-scanning-no-camera-enabled-img"],[1,"mt-4"]],template:function(r,i){1&r&&Ae(0,qct,3,2,"div",0),2&r&&me("ngIf",!i.showError)},dependencies:[BP,$o,Bo,Va,ma,Bne,RR,mv,Ek,zne,Une,are,ire],styles:['mat-stepper[_ngcontent-%COMP%]{width:100%}.id-scanning-error-div[_ngcontent-%COMP%]{margin-top:20px;width:600px;background:white;height:600px;padding:16px;box-shadow:3px 3px 3px 3px #0000000d}.id-scanning-error-div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0036e7;font-size:24px;font-weight:800;text-align:center}.id-scanning-error-div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#01236da6;font-size:16px;font-weight:300;text-align:center}.scan[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;flex-direction:column}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]{content:"";position:relative;width:130px;height:200px;background:url(https://cdn.verifik.co/web-sdk/images/face.png);background-size:130px 200px}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:url(https://cdn.verifik.co/web-sdk/images/smoothed-face.png);background-size:130px 200px;animation:_ngcontent-%COMP%_animate 2s ease-in-out infinite}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:100%;height:8px;background:#01236d;border-radius:8px;filter:drop-shadow(0 0 20px #01236d) drop-shadow(0 0 60px #01236d);animation:_ngcontent-%COMP%_animate_line 2s ease-in-out infinite}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]{position:absolute;inset:0}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:130px;height:200px;background:url(https://cdn.verifik.co/web-sdk/images/points-face.png);background-size:130px 200px;animation:_ngcontent-%COMP%_face_points 2s ease-in-out infinite}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:130px;height:200px;background:url(https://cdn.verifik.co/web-sdk/images/lines-points-face.png);background-size:130px 200px;animation:_ngcontent-%COMP%_face_points_lines 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_face_points_lines{0%,to{height:0%}50%{height:100%}}@keyframes _ngcontent-%COMP%_face_points{0%,25%,to{height:0%}50%{height:100%}}@keyframes _ngcontent-%COMP%_animate{0%,to{height:0%}50%{height:100%}}@keyframes _ngcontent-%COMP%_animate_line{0%,to{top:0%;opacity:.8}50%{top:100%;opacity:.8}}.oval-video[_ngcontent-%COMP%]{border-radius:25px!important;overflow:hidden;max-width:100%}video[_ngcontent-%COMP%]{object-fit:cover}.hidden[_ngcontent-%COMP%]{display:none!important}.p-4[_ngcontent-%COMP%]{padding:1rem}.sm\\:p-1[_ngcontent-%COMP%], .xs\\:p-1[_ngcontent-%COMP%]{padding:.25rem}.w-full[_ngcontent-%COMP%]{width:100%}.text-center[_ngcontent-%COMP%]{text-align:center}.text-3xl[_ngcontent-%COMP%]{font-size:1.875rem}.font-bold[_ngcontent-%COMP%]{font-weight:700}.text-gray-600[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgba(156,163,175,var(--tw-text-opacity))}.relative[_ngcontent-%COMP%]{position:relative}.top-0[_ngcontent-%COMP%]{top:0}.left-0[_ngcontent-%COMP%]{left:0}.absolute[_ngcontent-%COMP%]{position:absolute}.mt-4[_ngcontent-%COMP%]{margin-top:1rem}']})}return e})();const lre=Eg({passive:!0});let Kct=(()=>{class e{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return ss;const r=Dl(t),i=this._monitoredElements.get(r);if(i)return i.subject;const a=new je,s="cdk-text-field-autofilled",o=l=>{"cdk-text-field-autofill-start"!==l.animationName||r.classList.contains(s)?"cdk-text-field-autofill-end"===l.animationName&&r.classList.contains(s)&&(r.classList.remove(s),this._ngZone.run(()=>a.next({target:l.target,isAutofilled:!1}))):(r.classList.add(s),this._ngZone.run(()=>a.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",o,lre),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:a,unlisten:()=>{r.removeEventListener("animationstart",o,lre)}}),a}stopMonitoring(t){const r=Dl(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}static#e=this.\u0275fac=function(r){return new(r||e)(Y(ci),Y(We))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Xct=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({})}return e})();const Yct=new ue("MAT_INPUT_VALUE_ACCESSOR"),Zct=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Qct=0;const Jct=Mte(class{constructor(e,n,t,r){this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=t,this.ngControl=r,this.stateChanges=new je}});let eut=(()=>{class e extends Jct{get disabled(){return this._disabled}set disabled(t){this._disabled=Jt(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(UR.required)??!1}set required(t){this._required=Jt(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&sJ().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Jt(t)}constructor(t,r,i,a,s,o,l,c,u,h){super(o,a,s,i),this._elementRef=t,this._platform=r,this._autofillMonitor=c,this._formField=h,this._uid="mat-input-"+Qct++,this.focused=!1,this.stateChanges=new je,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(f=>sJ().has(f)),this._iOSKeyupListener=f=>{const m=f.target;!m.value&&0===m.selectionStart&&0===m.selectionEnd&&(m.setSelectionRange(1,1),m.setSelectionRange(0,0))};const d=this._elementRef.nativeElement,p=d.nodeName.toLowerCase();this._inputValueAccessor=l||d,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&u.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===p,this._isTextarea="textarea"===p,this._isInFormField=!!h,this._isNativeSelect&&(this.controlType=d.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=t,t?r.setAttribute("placeholder",t):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Zct.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}static#e=this.\u0275fac=function(r){return new(r||e)(E(Le),E(ci),E(Vo,10),E(kv,8),E(cp,8),E(mP),E(Yct,10),E(Kct),E(We),E(OP,8))};static#t=this.\u0275dir=ce({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(r,i){1&r&&xt("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&r&&(nc("id",i.id)("disabled",i.disabled)("required",i.required),dn("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),Xt("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[jt([{provide:NP,useExisting:e}]),Ce,Jr]})}return e})(),tut=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[Cn,$k,$k,Xct,Cn]})}return e})();const nut=["*"];let cre=(()=>{class e{constructor(){this.isActive=!1,this.isCompleted=!1,this.label=""}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=Ut({type:e,selectors:[["app-step"]],inputs:{isActive:"isActive",isCompleted:"isCompleted",label:"label"},ngContentSelectors:nut,decls:2,vars:4,consts:[[1,"step-content"]],template:function(r,i){1&r&&(Hi(),B(0,"div",0),Wt(1),K()),2&r&&Xt("active",i.isActive)("completed",i.isCompleted)},styles:[".step-content[_ngcontent-%COMP%]{display:none}.step-content.active[_ngcontent-%COMP%]{display:block}.step-content.completed[_ngcontent-%COMP%]{color:green}"]})}return e})();const rut=function(e,n){return{"step-number-active":e,"step-number-completed":n}};function iut(e,n){if(1&e&&(B(0,"div",3)(1,"div",4)(2,"div",5),ye(3),K(),B(4,"div",6),ye(5),K()()()),2&e){const t=n.$implicit,r=n.index;ne(2),me("ngClass",_6(3,rut,t.isActive,t.isCompleted)),ne(1),Ot(" ",r+1," "),ne(2),On(t.label)}}const aut=[[["app-step"]]],sut=["app-step"];let out=(()=>{class e{constructor(){this.currentStep=0,this.numberOfSteps=0}ngAfterContentInit(){this.numberOfSteps=this.steps?.length||0,this.updateSteps()}next(){this.currentStep<this.numberOfSteps-1&&(this.currentStep++,this.updateSteps())}back(){this.currentStep>0&&(this.currentStep--,this.updateSteps())}updateSteps(){this.steps&&this.steps.forEach((t,r)=>{t.isActive=r===this.currentStep,t.isCompleted=r<this.currentStep})}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=Ut({type:e,selectors:[["app-stepper"]],contentQueries:function(r,i,a){if(1&r&&Ei(a,cre,4),2&r){let s;ft(s=mt())&&(i.steps=s)}},ngContentSelectors:sut,decls:4,vars:1,consts:[["fxLayout","column","fxLayoutAlign","start center",1,"stepper-container"],[1,"stepper-header","w-full"],["class","step-indicator","fxLayout","row","fxLayoutAlign","start start",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start start",1,"step-indicator"],["fxLayout","column","fxLayoutAlign","center center"],[1,"step-number",3,"ngClass"],[1,"step-label"]],template:function(r,i){1&r&&(Hi(aut),B(0,"div",0)(1,"div",1),Ae(2,iut,6,6,"div",2),K(),Wt(3),K()),2&r&&(ne(2),me("ngForOf",i.steps))},dependencies:[Lu,Gy,$o,Bo,LP],styles:[".stepper-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:650px}.stepper-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-bottom:10px}.step-number[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;background-color:#ccc;color:#000;display:flex;justify-content:center;align-items:center;font-weight:700}.step-number-active[_ngcontent-%COMP%]{background-color:#fff;color:#00f!important;border:1px solid rgba(0,0,255,.444);font-weight:800;color:#fff}.step-number-completed[_ngcontent-%COMP%]{background-color:#00f;color:#fff}.step-label[_ngcontent-%COMP%]{text-align:center}.stepper-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-top:10px}"]})}return e})();const lut=["signUpNgForm"];function cut(e,n){1&e&&(B(0,"mat-error"),ye(1),rt(2,"transloco"),rt(3,"transloco"),K()),2&e&&(ne(1),h0(" ",lt(2,2,"create_wallet.password_step.password_label")," ",lt(3,4,"common.is_required")," "))}function uut(e,n){1&e&&(B(0,"mat-error"),ye(1),rt(2,"transloco"),rt(3,"transloco"),K()),2&e&&(ne(1),h0(" ",lt(2,2,"create_wallet.password_step.repeat_password_label")," ",lt(3,4,"common.is_required")," "))}function dut(e,n){if(1&e){const t=ps();B(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"div",15),ye(5),rt(6,"transloco"),K(),B(7,"div",16),ye(8),rt(9,"transloco"),K()()(),B(10,"div")(11,"form",17,18)(13,"mat-form-field",19)(14,"mat-label"),ye(15),rt(16,"transloco"),K(),we(17,"input",20),Ae(18,cut,4,6,"mat-error",10),K(),B(19,"mat-form-field",19)(20,"mat-label"),ye(21),rt(22,"transloco"),K(),we(23,"input",20),Ae(24,uut,4,6,"mat-error",10),K(),B(25,"div",21)(26,"mat-checkbox",22),ye(27),rt(28,"transloco"),K(),B(29,"a",23),ye(30),rt(31,"transloco"),K()()()(),B(32,"button",24),ye(33),rt(34,"transloco"),K(),B(35,"button",25),xt("click",function(){return ei(t),ti(ze(2).continueWithoutPassword())}),ye(36),rt(37,"transloco"),K()()()}if(2&e){const t=ze(2);let r,i;ne(5),On(lt(6,15,"create_wallet.password_step.title")),ne(3),Ot(" ",lt(9,17,"create_wallet.password_step.description")," "),ne(3),me("formGroup",t.signUpForm),ne(4),On(lt(16,19,"create_wallet.password_step.password_label")),ne(2),me("formControlName","password"),ne(1),me("ngIf",null==(r=t.signUpForm.get("password"))?null:r.hasError("required")),ne(3),On(lt(22,21,"create_wallet.password_step.repeat_password_label")),ne(2),me("formControlName","repeatPassword"),ne(1),me("ngIf",null==(i=t.signUpForm.get("repeatPassword"))?null:i.hasError("required")),ne(2),me("formControlName","termsAcceptance"),ne(1),Ot(" ",lt(28,23,"create_wallet.password_step.agreement")," "),ne(3),Ot("",lt(31,25,"common.more_info")," "),ne(2),me("disabled",!t.isPasswordCorrect()),ne(1),Ot(" ",lt(34,27,"create_wallet.password_step.add_password")," "),ne(3),Ot(" ",lt(37,29,"create_wallet.password_step.continue_without_password")," ")}}function hut(e,n){1&e&&(B(0,"span",38),ye(1),rt(2,"transloco"),K()),2&e&&(ne(1),Ot(" ",lt(2,1,"common.recommended"),""))}function put(e,n){if(1&e&&(Ql(0),B(1,"mat-option",35)(2,"span",31)(3,"span",36),ye(4),K(),Ae(5,hut,3,3,"span",37),K()(),Jl()),2&e){const t=n.$implicit;ne(1),me("value",t),ne(3),On(t),ne(1),me("ngIf",24===t)}}const fut=function(){return[12,24]};function mut(e,n){if(1&e){const t=ps();B(0,"div",26)(1,"div",12)(2,"div",27)(3,"div",3)(4,"div",15),ye(5),rt(6,"transloco"),K(),B(7,"div",28),ye(8),rt(9,"transloco"),K(),B(10,"div",28),ye(11),rt(12,"transloco"),K(),B(13,"div",29),ye(14),rt(15,"transloco"),K(),B(16,"div",28),ye(17),rt(18,"transloco"),K()()(),B(19,"div",19)(20,"form",17,18)(22,"mat-form-field",19)(23,"mat-label"),ye(24),rt(25,"transloco"),K(),B(26,"mat-select",30)(27,"mat-select-trigger")(28,"span",31)(29,"span",32),ye(30),K()()(),Ae(31,put,6,3,"ng-container",33),K()()()(),B(32,"button",34),xt("click",function(){return ei(t),ti(ze(2).startEncryption())}),ye(33),rt(34,"transloco"),K()()()}if(2&e){const t=ze(2);let r;ne(5),On(lt(6,11,"create_wallet.phrase_step.title")),ne(3),Ot(" ",lt(9,13,"create_wallet.phrase_step.description")," "),ne(3),Ot(" ",lt(12,15,"create_wallet.phrase_step.description_2")," "),ne(3),On(lt(15,17,"create_wallet.phrase_step.subtitle")),ne(3),Ot(" ",lt(18,19,"create_wallet.phrase_step.description_4")," "),ne(3),me("formGroup",t.signUpForm),ne(4),Ot(" ",lt(25,21,"create_wallet.phrase_step.words_input"),""),ne(2),me("formControlName","wordsCount"),ne(4),On(null==(r=t.signUpForm.get("wordsCount"))?null:r.value),ne(1),me("ngForOf",eE(25,fut)),ne(2),Ot(" ",lt(34,23,"create_wallet.phrase_step.start_encryption_button")," ")}}function gut(e,n){if(1&e){const t=ps();B(0,"div",26)(1,"div",39)(2,"div",40),we(3,"img",41),B(4,"div",15),ye(5),rt(6,"transloco"),K()(),B(7,"div",42)(8,"div",43),we(9,"img",44),B(10,"span"),ye(11),rt(12,"transloco"),K()(),B(13,"div",43),we(14,"img",45),B(15,"span"),ye(16),rt(17,"transloco"),K()(),B(18,"div",43),we(19,"img",46),B(20,"span"),ye(21),rt(22,"transloco"),K()()(),B(23,"button",34),xt("click",function(){return ei(t),ti(ze(2).startCamera())}),ye(24),rt(25,"transloco"),K()()()}2&e&&(ne(5),On(lt(6,5,"create_wallet.biometric_instructions.title")),ne(6),Ot(" ",lt(12,7,"create_wallet.biometric_instructions.instruction_1")," "),ne(5),Ot(" ",lt(17,9,"create_wallet.biometric_instructions.instruction_2")," "),ne(5),Ot(" ",lt(22,11,"create_wallet.biometric_instructions.instruction_3")," "),ne(3),Ot(" ",lt(25,13,"create_wallet.phrase_step.start_encryption_button")," "))}function yut(e,n){if(1&e&&(B(0,"div",74)(1,"small"),ye(2),K(),B(3,"div",75),ye(4),K()()),2&e){const t=n.$implicit;ne(2),Ot("",t.id,":"),ne(2),On(t.word)}}function but(e,n){if(1&e&&(B(0,"div",72),Ae(1,yut,5,2,"div",73),rt(2,"slice"),K()),2&e){const t=ze().$implicit,r=ze(3);ne(1),me("ngForOf",function S6(e,n,t,r,i){const a=e+Rt,s=ge(),o=Dp(s,a);return Vy(s,a)?w6(s,zi(),n,o.transform,t,r,i,o):o.transform(t,r,i)}(2,1,r.words,t,t+4))}}function _ut(e,n){if(1&e&&(Ql(0),Ae(1,but,3,5,"div",71),Jl()),2&e){const t=n.$implicit,r=ze(3);ne(1),me("ngIf",t<r.words.length)}}const vut=function(){return[0,4,8,12,16,20]};function xut(e,n){if(1&e){const t=ps();B(0,"div",47)(1,"div",48)(2,"div",49)(3,"div",50)(4,"div",51),ye(5),rt(6,"transloco"),K()(),B(7,"div",52),ye(8),rt(9,"transloco"),we(10,"br")(11,"br"),ye(12),rt(13,"transloco"),K()(),B(14,"div",53),Ae(15,_ut,2,1,"ng-container",33),K()(),B(16,"div",54)(17,"div",55)(18,"div",56),xt("click",function(){return ei(t),ti(ze(2).copyPublicAddress())}),ar(),B(19,"svg",57),we(20,"path",58),K()(),Er(),B(21,"div",59)(22,"div",60)(23,"span",61),ye(24),rt(25,"transloco"),we(26,"br"),K(),B(27,"span",62),ye(28),K()()()(),B(29,"div",63),we(30,"img",64),K(),B(31,"div",65),ye(32),rt(33,"transloco"),K(),B(34,"div",66)(35,"div",56),xt("click",function(){return ei(t),ti(ze(2).downloadImage())}),ar(),B(36,"svg",57),we(37,"path",67),K()(),Er(),B(38,"div",59)(39,"div",68),ye(40),rt(41,"transloco"),K()()(),B(42,"div",69)(43,"button",70),ye(44),rt(45,"transloco"),K()()()()}if(2&e){const t=ze(2);ne(5),On(lt(6,10,"create_wallet.view_wallet.title")),ne(3),Ot(" ",lt(9,12,"create_wallet.view_wallet.description")," "),ne(4),Ot(" ",lt(13,14,"create_wallet.view_wallet.description_2")," "),ne(3),me("ngForOf",eE(24,vut)),ne(9),Ot("",lt(25,16,"create_wallet.view_wallet.copy_public_address")," "),ne(4),Ot(" ",t.wallet.publicData.ethAddress,""),ne(2),me("src",t.wallet.image,jp),ne(2),Ot(" ",lt(33,18,"create_wallet.view_wallet.qr_code_description")," "),ne(8),Ot(" ",lt(41,20,"create_wallet.view_wallet.download_qr_code")," "),ne(4),On(lt(45,22,"common.continue"))}}function wut(e,n){if(1&e&&(Ql(0),we(1,"biometrics-general",76),Jl()),2&e){const t=ze(2);ne(1),me("type","createWallet")("data",t.signUpForm.value)("callback",t.afterBiometricsCallback)}}function Cut(e,n){if(1&e&&(B(0,"app-step",6),Ae(1,dut,38,31,"div",7),Ae(2,mut,35,26,"div",8),Ae(3,gut,26,15,"div",8),Ae(4,xut,46,25,"div",9),Ae(5,wut,2,3,"ng-container",10),K()),2&e){const t=n.$implicit,r=n.index,i=ze();me("isActive",t.isActive)("isCompleted",t.isCompleted)("label",t.label),ne(1),me("ngIf",0===i.currentStep&&!i.showBiometrics),ne(1),me("ngIf",1===i.currentStep&&!i.showBiometrics&&!i.showBiometricsInstructions),ne(1),me("ngIf",1===i.currentStep&&i.showBiometricsInstructions),ne(1),me("ngIf",2===i.currentStep),ne(1),me("ngIf",i.currentStep===r&&i.showBiometrics)}}let kut=(()=>{class e{constructor(t,r,i,a,s){this._formBuilder=t,this._router=r,this._walletService=i,this.snackBar=a,this._translocoService=s,this.steps=[{label:"Crear contrase\xf1a",isActive:!1,isCompleted:!1},{label:"Seguridad biom\xe9trica",isActive:!1,isCompleted:!1},{label:"Finalizar",isActive:!1,isCompleted:!1}],this.showBiometrics=!1,this.showBiometricsInstructions=!1,this.currentStep=0,this.formLoaded=!1,this.afterBiometricsCallback=this.afterBiometricsCallback.bind(this)}ngOnInit(){this.signUpForm=this._formBuilder.group({password:["",[]],repeatPassword:["",[]],termsAcceptance:[!1],wordsCount:[24,[]]}),this.updateSteps(),this.formLoaded=!0;const t=localStorage.getItem("walletId");t&&this._getWallet(t)}_getWallet(t){this._walletService.requestWallet(t).subscribe({next:r=>{console.log({responseWallet:r.data}),this.updateSteps()},error:r=>{},complete:()=>{}})}goBack(){this._router.navigate(["/onboarding"])}continueWithoutPassword(){this.currentStep++,this.updateSteps()}updateSteps(){this.steps&&this.steps.forEach((t,r)=>{t.isActive=r===this.currentStep,t.isCompleted=r<this.currentStep})}startEncryption(){this.showBiometricsInstructions=!0}startCamera(){this.showBiometrics=!0,this.showBiometricsInstructions=!1}afterBiometricsCallback(t){localStorage.setItem("walletId",t._id),localStorage.setItem("wallet",JSON.stringify(t)),this.wallet=t,console.log({wallet:this.wallet}),this._prepareWords(),this.showBiometrics=!1,this.showBiometricsInstructions=!1,this.currentStep++,this.updateSteps()}_prepareWords(){this.words=[];for(const t in this.wallet.metadata)Object.prototype.hasOwnProperty.call(this.wallet.metadata,t)&&this.words.push({id:t,word:this.wallet.metadata[t]});console.log({words:this.words})}isPasswordCorrect(){const{password:t,repeatPassword:r,termsAcceptance:i}=this.signUpForm.value;return!!(t&&r&&t===r&&i&&t.length>=8)}copyPublicAddress(){navigator.clipboard.writeText(this.wallet.publicData.ethAddress).then(()=>{this.snackBar.open(this._translocoService.translate("common.copy_to_clipboard"),this._translocoService.translate("common.close"),{duration:5e3,verticalPosition:"bottom"})},t=>{this.snackBar.open(this._translocoService.translate("common.failed_to_copy_to_clipboard"),this._translocoService.translate("common.close"),{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"})})}downloadImage(){const t=this.wallet.image.split(";base64,"),r=t[0].split(":")[1],a=atob(t[1]),s=new Array(a.length);for(let h=0;h<a.length;h++)s[h]=a.charCodeAt(h);const o=new Uint8Array(s),l=new Blob([o],{type:r}),c=URL.createObjectURL(l),u=document.createElement("a");u.href=c,u.download=`${this.wallet._id}.png`,u.style.display="none",document.body.appendChild(u),u.click(),URL.revokeObjectURL(c),document.body.removeChild(u)}static#e=this.\u0275fac=function(r){return new(r||e)(E(cte),E(mi),E(ek),E(Est),E(su))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["app-create-wallet"]],viewQuery:function(r,i){if(1&r&&hn(lut,5),2&r){let a;ft(a=mt())&&(i.signUpNgForm=a.first)}},decls:8,vars:1,consts:[["fxLayout","column","fxLayoutAlign","start center",1,"w-full","h-full"],["fxLayout","row","fxLayoutAlign","space-between center",1,"on-header"],["src","../../assets/images/logo.svg","alt","",1,"cursor-pointer",3,"click"],["fxLayout","column","fxLayoutAlign","start center"],[3,"isActive","isCompleted","label",4,"ngFor","ngForOf"],[1,"w-full","pt-10"],[3,"isActive","isCompleted","label"],["class","cw-pst-container",4,"ngIf"],["class","cw-phrase-container",4,"ngIf"],["class","cw-view-wallet",4,"ngIf"],[4,"ngIf"],[1,"cw-pst-container"],["fxLayout","column","fxLayoutAlign","space-between center",1,"cw-pst-content"],[1,"cw-pst-content-d"],[2,"height","112px","position","relative"],[1,"cw-pst-title"],[1,"cr-pst-description"],[1,"example-form",3,"formGroup"],["signUpNgForm","ngForm"],[1,"w-full"],["type","password","matInput","",3,"formControlName"],["fxLayout","column","fxLayoutAlign","start start"],[1,"on-checkbox",3,"formControlName"],["href","#",1,"mt-2","ml-10"],["mat-raised-button","",1,"w-full","rounded-button","main-button",3,"disabled"],["mat-raised-button","",1,"w-full","rounded-button","secondary-button",3,"click"],[1,"cw-phrase-container"],["fxLayout","column","fxLayoutAlign","start center",1,"cw-phrase-content-d","w-full"],[1,"cw-phrase-description"],[1,"cw-phrase-subtitle"],[3,"formControlName"],[1,"flex","items-center"],[1,"sm:mx-0.5","font-medium","text-default"],[4,"ngFor","ngForOf"],["mat-raised-button","",1,"w-full","rounded-button","main-button",3,"click"],[3,"value"],[1,"ml-2"],["class","ml-2 font-medium",4,"ngIf"],[1,"ml-2","font-medium"],["fxLayout","column","fxLayoutAlign","space-between center",1,"cw-pst-content","w-full"],["fxLayout","column","fxLayoutAlign","start center",1,"w-full"],["src","https://cdn.verifik.co/wallet/info_cr.svg","alt",""],["fxLayout","column","fxLayoutAlign","start start",1,"cw-phrase-content-d","m-8"],["fxLayout","row","fxLayoutAlign","start center"],["src","https://cdn.verifik.co/wallet/smile.svg","alt","",1,"mr-4"],["src","https://cdn.verifik.co/wallet/camera.svg","alt","",1,"mr-4"],["src","https://cdn.verifik.co/wallet/instruction_1.svg","alt","",1,"mr-4"],[1,"cw-view-wallet"],[1,"cw-view-wallet-left"],[1,"cw-view-wallet-left-header"],[1,"cw-view-wallet-title-div"],[1,"cw-view-wallet-title"],[1,"cw-view-wallet-description"],[1,"cw-view-wallet-words-container"],[1,"cw-view-wallet-right"],[1,"cw-view-wallet-right-address"],[1,"cw-view-wallet-icon",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","d","M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"],[2,"flex","1 1 0","flex-direction","column","justify-content","flex-start","align-items","flex-start","display","inline-flex"],[2,"align-self","stretch"],[2,"color","#010333","font-size","15px","font-family","Poppins","font-weight","500","line-height","24px","word-wrap","break-word"],[2,"color","#010333","font-size","11px","font-family","Poppins","font-weight","400","line-height","24px","word-wrap","break-word"],[2,"padding","32px","background","white","border-radius","24px","justify-content","flex-start","align-items","flex-start","gap","8px","display","inline-flex"],[2,"width","216px","height","216px",3,"src"],[2,"align-self","stretch","text-align","center","color","#010333","font-size","11px","font-family","Poppins","font-weight","500","line-height","16px","letter-spacing","0.5px","word-wrap","break-word"],[2,"align-self","stretch","height","56px","padding-left","12px","padding-right","12px","padding-top","8px","padding-bottom","8px","background","white","border-radius","16px","justify-content","flex-start","align-items","center","gap","12px","display","inline-flex"],["stroke-linecap","round","stroke-linejoin","round","d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"],[1,"cw-view-wallet-qr-code-label"],[2,"align-self","stretch","height","40px","flex-direction","column","justify-content","center","align-items","center","gap","8px","display","flex"],["mat-raised-button","",1,"w-full","rounded-button","main-button"],["class","cw-view-wallet-words-c-div",4,"ngIf"],[1,"cw-view-wallet-words-c-div"],["class","cw-word-container",4,"ngFor","ngForOf"],[1,"cw-word-container"],[1,"cw-word"],[3,"type","data","callback"]],template:function(r,i){1&r&&(B(0,"div",0)(1,"div",1)(2,"img",2),xt("click",function(){return i.goBack()}),K(),we(3,"language-picker"),K(),B(4,"div",3)(5,"app-stepper"),Ae(6,Cut,6,8,"app-step",4),K()()(),we(7,"footer",5)),2&r&&(ne(6),me("ngForOf",i.steps))},dependencies:[Gy,ma,$o,Bo,Mk,nP,ik,GR,qR,cp,mk,cot,TP,eot,Eot,Mot,Pte,ore,gP,eut,EP,DP,out,cre,sH,mv],styles:[".cw-pst-container[_ngcontent-%COMP%]{width:500px;min-height:500px;padding:32px;background:white;box-shadow:0 2px 4px #61616114;border-radius:24px;border:1px rgba(0,0,0,.35) solid;flex-direction:column;justify-content:flex-start;align-items:center;display:inline-flex}.cw-phrase-container[_ngcontent-%COMP%]{width:500px;min-height:500px;padding:32px;background:white;box-shadow:0 2px 4px #61616114;border-radius:24px;border:1px rgba(0,0,0,.35) solid;flex-direction:column;justify-content:flex-start;align-items:center;gap:16px;display:inline-flex}.cw-pst-content[_ngcontent-%COMP%]{height:516px;flex-direction:column;justify-content:flex-start;align-items:center}.cw-pst-content-d[_ngcontent-%COMP%]{align-self:stretch;height:112px;flex-direction:column;justify-content:flex-start;align-items:center;gap:48px;display:flex}.cw-phrase-content-d[_ngcontent-%COMP%]{width:100%;align-self:stretch;flex-direction:column;justify-content:flex-start;align-items:center;gap:20px;display:flex}.cw-pst-title[_ngcontent-%COMP%]{width:344px;text-align:center;color:#1c44f9;font-size:28px;font-family:Poppins;font-weight:500;line-height:36px}.cw-phrase-subtitle[_ngcontent-%COMP%]{width:344px;text-align:center;color:#1c44f9;font-size:22px;font-family:Poppins;font-weight:500;line-height:36px}.cr-pst-description[_ngcontent-%COMP%]{width:344px;left:0;top:52px;position:absolute;text-align:center;color:#010333;font-size:14px;font-family:Poppins;font-weight:500;line-height:20px;letter-spacing:.1px;word-wrap:break-word}.cw-phrase-description[_ngcontent-%COMP%]{width:80%;margin-top:12px;text-align:center;color:#010333;font-size:12px;font-weight:500;line-height:20px;letter-spacing:.1px;word-wrap:break-word}.cw-view-wallet[_ngcontent-%COMP%]{width:100%;height:100%;padding:24px 24px 24px 32px;background:white;box-shadow:0 2px 4px #61616114;border-radius:24px;border:1px rgba(0,0,0,.25) solid;justify-content:center;align-items:center;gap:32px;display:inline-flex}.cw-view-wallet-left[_ngcontent-%COMP%]{align-self:stretch;flex-direction:column;align-items:center;gap:32px;display:inline-flex}.cw-view-wallet-right[_ngcontent-%COMP%]{padding:16px 24px;background:#f4f4f4;border-radius:24px;flex-direction:column;justify-content:center;align-items:center;gap:16px;display:inline-flex}.cw-view-wallet-right-address[_ngcontent-%COMP%]{align-self:stretch;height:56px;padding:8px 12px;background:white;border-radius:16px;justify-content:flex-start;align-items:center;gap:12px;display:inline-flex}.cw-view-wallet-icon[_ngcontent-%COMP%]{width:24px;height:24px;justify-content:center;align-items:center;display:flex;cursor:pointer}.cw-word-container[_ngcontent-%COMP%]{height:40px;width:75px;padding:8px 16px;background:#f4f4f4;border-radius:8px;border:1px rgba(0,0,0,.35) solid;align-items:center;gap:3px;display:flex}.cw-word[_ngcontent-%COMP%]{color:#46464f;font-size:15px;font-family:Poppins;font-weight:600;line-height:24px;word-wrap:break-word}.cw-view-wallet-qr-code-label[_ngcontent-%COMP%]{align-self:stretch;color:#010333;font-size:15px;font-family:Poppins;font-weight:500;line-height:24px;word-wrap:break-word}.cw-view-wallet-left-header[_ngcontent-%COMP%]{align-self:stretch;height:176px;flex-direction:column;justify-content:center;align-items:center;gap:16px;display:flex}.cw-view-wallet-title-div[_ngcontent-%COMP%]{align-self:stretch;height:60px;flex-direction:column;justify-content:flex-start;align-items:center;gap:8px;display:flex}.cw-view-wallet-title[_ngcontent-%COMP%]{align-self:stretch;text-align:center;color:#1c44f9;font-size:25px;font-family:Poppins;font-weight:500;line-height:30px;word-wrap:break-word}.cw-view-wallet-description[_ngcontent-%COMP%]{align-self:stretch;text-align:center;color:#010333;font-size:14px;font-family:Poppins;font-weight:500;line-height:20px;letter-spacing:.1px;word-wrap:break-word}.cw-view-wallet-words-container[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center;gap:16px;display:flex}.cw-view-wallet-words-c-div[_ngcontent-%COMP%]{justify-content:center;align-items:center;gap:16px;display:inline-flex}",'@font-face{font-family:Poppins;src:url(Poppins-Regular.woff2) format("woff2");font-weight:400;font-style:normal;font-display:swap}*[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.main-div[_ngcontent-%COMP%]{flex:1 1 auto;width:100%;max-width:100%;height:100vh;background:rgba(211,211,211,.3607843137)}.w-full[_ngcontent-%COMP%]{width:100%}.h-full[_ngcontent-%COMP%]{height:100vh}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.primaryColor[_ngcontent-%COMP%]{color:#01236d!important}.divider-height[_ngcontent-%COMP%]{width:2px;background-color:#8080806e;height:100%;margin-top:5px;margin-bottom:5px}.justify-center[_ngcontent-%COMP%]{justify-content:center}.text-center[_ngcontent-%COMP%]{text-align:center}.h-20[_ngcontent-%COMP%]{height:20px}.my-2[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}@media (min-width: 768px){.sm\\:h-8[_ngcontent-%COMP%]{height:8px}}@media (min-width: 1024px){.h-20[_ngcontent-%COMP%]{height:20px}.sm\\:h-8[_ngcontent-%COMP%]{height:8px}}@media (min-width: 1280px){.h-20[_ngcontent-%COMP%]{height:20px}.sm\\:h-8[_ngcontent-%COMP%]{height:8px}}.p-0[_ngcontent-%COMP%]{padding:0}.p-1[_ngcontent-%COMP%]{padding:.25rem}.p-2[_ngcontent-%COMP%]{padding:.5rem}.p-3[_ngcontent-%COMP%]{padding:.75rem}.p-4[_ngcontent-%COMP%]{padding:1rem}.p-5[_ngcontent-%COMP%]{padding:1.25rem}.p-6[_ngcontent-%COMP%]{padding:1.5rem}.px-0[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.px-1[_ngcontent-%COMP%]{padding-left:.25rem;padding-right:.25rem}.px-2[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem}.px-3[_ngcontent-%COMP%]{padding-left:.75rem;padding-right:.75rem}.px-4[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.px-5[_ngcontent-%COMP%]{padding-left:1.25rem;padding-right:1.25rem}.px-6[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}.m-0[_ngcontent-%COMP%]{margin:0}.m-1[_ngcontent-%COMP%]{margin:.25rem}.m-2[_ngcontent-%COMP%]{margin:.5rem}.m-3[_ngcontent-%COMP%]{margin:.75rem}.m-4[_ngcontent-%COMP%]{margin:1rem}.m-5[_ngcontent-%COMP%]{margin:1.25rem}.m-6[_ngcontent-%COMP%]{margin:1.5rem}.mx-0[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.mx-1[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem}.mx-2[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem}.mx-3[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:.75rem}.mx-4[_ngcontent-%COMP%]{margin-left:1rem;margin-right:1rem}.mx-5[_ngcontent-%COMP%]{margin-left:1.25rem;margin-right:1.25rem}.mx-6[_ngcontent-%COMP%]{margin-left:1.5rem;margin-right:1.5rem}.p-7[_ngcontent-%COMP%]{padding:1.75rem}.p-8[_ngcontent-%COMP%]{padding:2rem}.p-9[_ngcontent-%COMP%]{padding:2.25rem}.p-10[_ngcontent-%COMP%]{padding:2.5rem}.p-11[_ngcontent-%COMP%]{padding:2.75rem}.p-12[_ngcontent-%COMP%]{padding:3rem}.p-14[_ngcontent-%COMP%]{padding:3.5rem}.p-16[_ngcontent-%COMP%]{padding:4rem}.px-7[_ngcontent-%COMP%]{padding-left:1.75rem;padding-right:1.75rem}.px-8[_ngcontent-%COMP%]{padding-left:2rem;padding-right:2rem}.px-9[_ngcontent-%COMP%]{padding-left:2.25rem;padding-right:2.25rem}.px-10[_ngcontent-%COMP%]{padding-left:2.5rem;padding-right:2.5rem}.px-11[_ngcontent-%COMP%]{padding-left:2.75rem;padding-right:2.75rem}.px-12[_ngcontent-%COMP%]{padding-left:3rem;padding-right:3rem}.px-14[_ngcontent-%COMP%]{padding-left:3.5rem;padding-right:3.5rem}.px-16[_ngcontent-%COMP%]{padding-left:4rem;padding-right:4rem}.m-7[_ngcontent-%COMP%]{margin:1.75rem}.m-8[_ngcontent-%COMP%]{margin:2rem}.m-9[_ngcontent-%COMP%]{margin:2.25rem}.m-10[_ngcontent-%COMP%]{margin:2.5rem}.m-11[_ngcontent-%COMP%]{margin:2.75rem}.m-12[_ngcontent-%COMP%]{margin:3rem}.m-14[_ngcontent-%COMP%]{margin:3.5rem}.m-16[_ngcontent-%COMP%]{margin:4rem}.mx-7[_ngcontent-%COMP%]{margin-left:1.75rem;margin-right:1.75rem}.mx-8[_ngcontent-%COMP%]{margin-left:2rem;margin-right:2rem}.mx-9[_ngcontent-%COMP%]{margin-left:2.25rem;margin-right:2.25rem}.mx-10[_ngcontent-%COMP%]{margin-left:2.5rem;margin-right:2.5rem}.mx-11[_ngcontent-%COMP%]{margin-left:2.75rem;margin-right:2.75rem}.mx-12[_ngcontent-%COMP%]{margin-left:3rem;margin-right:3rem}.mx-14[_ngcontent-%COMP%]{margin-left:3.5rem;margin-right:3.5rem}.mx-16[_ngcontent-%COMP%]{margin-left:4rem;margin-right:4rem}.pt-1[_ngcontent-%COMP%]{padding-top:.25rem}.pt-2[_ngcontent-%COMP%]{padding-top:.5rem}.pt-3[_ngcontent-%COMP%]{padding-top:.75rem}.pt-4[_ngcontent-%COMP%]{padding-top:1rem}.pt-5[_ngcontent-%COMP%]{padding-top:1.25rem}.pt-6[_ngcontent-%COMP%]{padding-top:1.5rem}.pt-7[_ngcontent-%COMP%]{padding-top:1.75rem}.pt-8[_ngcontent-%COMP%]{padding-top:2rem}.pt-9[_ngcontent-%COMP%]{padding-top:2.25rem}.pt-10[_ngcontent-%COMP%]{padding-top:2.5rem}.pt-11[_ngcontent-%COMP%]{padding-top:2.75rem}.pt-12[_ngcontent-%COMP%]{padding-top:3rem}.pt-14[_ngcontent-%COMP%]{padding-top:3.5rem}.pt-16[_ngcontent-%COMP%]{padding-top:4rem}.pb-1[_ngcontent-%COMP%]{padding-bottom:.25rem}.pb-2[_ngcontent-%COMP%]{padding-bottom:.5rem}.pb-3[_ngcontent-%COMP%]{padding-bottom:.75rem}.pb-4[_ngcontent-%COMP%]{padding-bottom:1rem}.pb-5[_ngcontent-%COMP%]{padding-bottom:1.25rem}.pb-6[_ngcontent-%COMP%]{padding-bottom:1.5rem}.pb-7[_ngcontent-%COMP%]{padding-bottom:1.75rem}.pb-8[_ngcontent-%COMP%]{padding-bottom:2rem}.pb-9[_ngcontent-%COMP%]{padding-bottom:2.25rem}.pb-10[_ngcontent-%COMP%]{padding-bottom:2.5rem}.pb-11[_ngcontent-%COMP%]{padding-bottom:2.75rem}.pb-12[_ngcontent-%COMP%]{padding-bottom:3rem}.pb-14[_ngcontent-%COMP%]{padding-bottom:3.5rem}.pb-16[_ngcontent-%COMP%]{padding-bottom:4rem}.mt-1[_ngcontent-%COMP%]{margin-top:.25rem}.mt-2[_ngcontent-%COMP%]{margin-top:.5rem}.mt-3[_ngcontent-%COMP%]{margin-top:.75rem}.mt-4[_ngcontent-%COMP%]{margin-top:1rem}.mt-5[_ngcontent-%COMP%]{margin-top:1.25rem}.mt-6[_ngcontent-%COMP%]{margin-top:1.5rem}.mt-7[_ngcontent-%COMP%]{margin-top:1.75rem}.mt-8[_ngcontent-%COMP%]{margin-top:2rem}.mt-9[_ngcontent-%COMP%]{margin-top:2.25rem}.mt-10[_ngcontent-%COMP%]{margin-top:2.5rem}.mt-11[_ngcontent-%COMP%]{margin-top:2.75rem}.mt-12[_ngcontent-%COMP%]{margin-top:3rem}.mt-14[_ngcontent-%COMP%]{margin-top:3.5rem}.mt-16[_ngcontent-%COMP%]{margin-top:4rem}.mb-1[_ngcontent-%COMP%]{margin-bottom:.25rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:.75rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.mb-5[_ngcontent-%COMP%]{margin-bottom:1.25rem}.mb-6[_ngcontent-%COMP%]{margin-bottom:1.5rem}.mb-7[_ngcontent-%COMP%]{margin-bottom:1.75rem}.mb-8[_ngcontent-%COMP%]{margin-bottom:2rem}.mb-9[_ngcontent-%COMP%]{margin-bottom:2.25rem}.mb-10[_ngcontent-%COMP%]{margin-bottom:2.5rem}.mb-11[_ngcontent-%COMP%]{margin-bottom:2.75rem}.mb-12[_ngcontent-%COMP%]{margin-bottom:3rem}.mb-14[_ngcontent-%COMP%]{margin-bottom:3.5rem}.mb-16[_ngcontent-%COMP%]{margin-bottom:4rem}.py-1[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem}.py-2[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}.py-3[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem}.py-4[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}.py-5[_ngcontent-%COMP%]{padding-top:1.25rem;padding-bottom:1.25rem}.py-6[_ngcontent-%COMP%]{padding-top:1.5rem;padding-bottom:1.5rem}.py-7[_ngcontent-%COMP%]{padding-top:1.75rem;padding-bottom:1.75rem}.py-8[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:2rem}.py-9[_ngcontent-%COMP%]{padding-top:2.25rem;padding-bottom:2.25rem}.py-10[_ngcontent-%COMP%]{padding-top:2.5rem;padding-bottom:2.5rem}.py-11[_ngcontent-%COMP%]{padding-top:2.75rem;padding-bottom:2.75rem}.py-12[_ngcontent-%COMP%]{padding-top:3rem;padding-bottom:3rem}.py-14[_ngcontent-%COMP%]{padding-top:3.5rem;padding-bottom:3.5rem}.py-16[_ngcontent-%COMP%]{padding-top:4rem;padding-bottom:4rem}.my-1[_ngcontent-%COMP%]{margin-top:.25rem;margin-bottom:.25rem}.my-2[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}.my-3[_ngcontent-%COMP%]{margin-top:.75rem;margin-bottom:.75rem}.my-4[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem}.my-5[_ngcontent-%COMP%]{margin-top:1.25rem;margin-bottom:1.25rem}.my-6[_ngcontent-%COMP%]{margin-top:1.5rem;margin-bottom:1.5rem}.my-7[_ngcontent-%COMP%]{margin-top:1.75rem;margin-bottom:1.75rem}.my-8[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}.my-9[_ngcontent-%COMP%]{margin-top:2.25rem;margin-bottom:2.25rem}.my-10[_ngcontent-%COMP%]{margin-top:2.5rem;margin-bottom:2.5rem}.my-11[_ngcontent-%COMP%]{margin-top:2.75rem;margin-bottom:2.75rem}.my-12[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:3rem}.my-14[_ngcontent-%COMP%]{margin-top:3.5rem;margin-bottom:3.5rem}.my-16[_ngcontent-%COMP%]{margin-top:4rem;margin-bottom:4rem}.main-button[_ngcontent-%COMP%]{background-color:#0b57d0!important;color:#fff!important;height:45px!important;font-size:18px;border-radius:20px}.main-title[_ngcontent-%COMP%]{margin-top:0!important;color:#1c44f9!important}.main-button[_ngcontent-%COMP%]:disabled{background-color:#e5ebfd!important;color:#4e6599!important}.secondary-button[_ngcontent-%COMP%]{background-color:#fff!important;color:#0b57d0!important;border:1px solid rgba(11,87,208,.5411764706)!important;height:45px;font-size:18px;border-radius:20px}.secondary-button[_ngcontent-%COMP%]:disabled{color:#4e6599!important;border:1px solid rgba(11,87,208,.2117647059)!important}.mr-1[_ngcontent-%COMP%]{margin-right:.25rem}.mr-2[_ngcontent-%COMP%]{margin-right:.5rem}.mr-3[_ngcontent-%COMP%]{margin-right:.75rem}.mr-4[_ngcontent-%COMP%]{margin-right:1rem}.mr-5[_ngcontent-%COMP%]{margin-right:1.25rem}.mr-6[_ngcontent-%COMP%]{margin-right:1.5rem}.mr-7[_ngcontent-%COMP%]{margin-right:1.75rem}.mr-8[_ngcontent-%COMP%]{margin-right:2rem}.mr-9[_ngcontent-%COMP%]{margin-right:2.25rem}.mr-10[_ngcontent-%COMP%]{margin-right:2.5rem}.mr-11[_ngcontent-%COMP%]{margin-right:2.75rem}.mr-12[_ngcontent-%COMP%]{margin-right:3rem}.mr-14[_ngcontent-%COMP%]{margin-right:3.5rem}.mr-16[_ngcontent-%COMP%]{margin-right:4rem}.ml-1[_ngcontent-%COMP%]{margin-left:.25rem}.ml-2[_ngcontent-%COMP%]{margin-left:.5rem}.ml-3[_ngcontent-%COMP%]{margin-left:.75rem}.ml-4[_ngcontent-%COMP%]{margin-left:1rem}.ml-5[_ngcontent-%COMP%]{margin-left:1.25rem}.ml-6[_ngcontent-%COMP%]{margin-left:1.5rem}.ml-7[_ngcontent-%COMP%]{margin-left:1.75rem}.ml-8[_ngcontent-%COMP%]{margin-left:2rem}.ml-9[_ngcontent-%COMP%]{margin-left:2.25rem}.ml-10[_ngcontent-%COMP%]{margin-left:2.5rem}.ml-11[_ngcontent-%COMP%]{margin-left:2.75rem}.ml-12[_ngcontent-%COMP%]{margin-left:3rem}.ml-14[_ngcontent-%COMP%]{margin-left:3.5rem}.ml-16[_ngcontent-%COMP%]{margin-left:4rem}.on-header[_ngcontent-%COMP%]{width:80%;height:80px}.on-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.mat-mdc-snack-bar-container[_ngcontent-%COMP%]{margin:0!important}']})}return e})();function Sut(e,n){1&e&&(B(0,"div",20)(1,"div",21)(2,"div",22),we(3,"div",23),B(4,"div",24),we(5,"div",25),B(6,"div",26),ye(7,"1"),K()()(),B(8,"div",27),ye(9,"Haz clic en el \xedcono de extensi\xf3n en tu navegador."),K()(),B(10,"div",28)(11,"div",29)(12,"div",30)(13,"div",31),we(14,"div",32),B(15,"div",33)(16,"div",34),ar(),B(17,"svg",35),we(18,"path",36),K()(),Er(),B(19,"div",37),we(20,"div",38),K(),B(21,"div",39),ar(),B(22,"svg",40),we(23,"rect",41)(24,"path",42),K()(),Er(),B(25,"div",34),ar(),B(26,"svg",35),we(27,"path",43),K()()()()()(),Er(),we(28,"div",44),K()())}function Iut(e,n){1&e&&(B(0,"div",45)(1,"div",46)(2,"div",47)(3,"div",24),we(4,"div",25),B(5,"div",26),ye(6,"2"),K()()(),B(7,"div",27),ye(8,"Fija a Biometric Wallet."),K()(),B(9,"div",48)(10,"div",49)(11,"div",50)(12,"div",51)(13,"div",52),ye(14,"Extensiones"),K()(),B(15,"div",34),ar(),B(16,"svg",35),we(17,"path",53),K()()(),Er(),B(18,"div",54)(19,"div",55)(20,"div",56),ye(21," Acceso completo "),K()(),B(22,"div",57)(23,"div",56),ye(24," Estas extensiones pueden ver y cambiar informaci\xf3n en este sitio web. "),K()()(),B(25,"div",58)(26,"div",59)(27,"div",60),ar(),B(28,"svg",61),we(29,"path",62),K()(),Er(),B(30,"div",63)(31,"div",56),ye(32," Biometric Wallet "),K()()(),B(33,"div",64)(34,"div",34),ar(),B(35,"svg",35),we(36,"path",65),K()(),Er(),B(37,"div",34),ar(),B(38,"svg",35),we(39,"path",43),K()()()(),Er(),B(40,"div",66),we(41,"div",67),K(),B(42,"div",68)(43,"div",69)(44,"div",59)(45,"div",34),ar(),B(46,"svg",35),we(47,"path",70),K()(),Er(),we(48,"div",71),B(49,"div",63)(50,"div",56),ye(51," Gestionar extenciones "),K()()()()()()()())}function Mut(e,n){1&e&&(B(0,"div",72)(1,"div",73)(2,"div",74)(3,"div",22),we(4,"div",23),B(5,"div",75),we(6,"div",25),B(7,"div",26),ye(8,"3"),K()()(),B(9,"div",27),ye(10,"Haz clic en el \xedcono de extensi\xf3n en tu navegador."),K()(),B(11,"div",76)(12,"div",77)(13,"div",78)(14,"div",79),we(15,"div",80),B(16,"div",33)(17,"div",81),ar(),B(18,"svg",61),we(19,"path",62),K()(),Er(),B(20,"div",39),ar(),B(21,"svg",40),we(22,"rect",41)(23,"path",42),K()(),Er(),B(24,"div",34),ar(),B(25,"svg",35),we(26,"path",43),K()()()()()(),Er(),we(27,"div",82),K()()())}const ure=function(e){return{"inst-img-dot-active":e}},Eut=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:Ent},{path:"about",component:Dnt},{path:"onboarding",component:pst},{path:"create-wallet",component:kut},{path:"extension-instructions",component:(()=>{class e{constructor(){this.currentSlide=1}ngOnInit(){}changeToSlide(t){this.currentSlide=t,this.currentSlide>2&&(this.currentSlide=1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=Ut({type:e,selectors:[["app-extension-instructions"]],decls:27,vars:12,consts:[["fxLayout","column","fxLayoutAlign","start center",1,"w-full","h-full"],["fxLayout","row","fxLayoutAlign","space-between center",1,"on-header"],["src","../../assets/images/logo.svg","alt","",1,"cursor-pointer"],["fxLayout","column","fxLayoutAlign","start center"],[1,"inst-card"],[2,"align-self","stretch","height","91px","flex-direction","column","justify-content","center","align-items","center","display","flex"],[2,"align-self","stretch","text-align","center"],[1,"inst-card-title"],[1,"inst-card-description"],[1,"mt-6","inst-img-div"],[1,"inst-img-div-1"],["class","inst-img-div-1-1",4,"ngIf"],["class","inst-second-container",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","w-full",4,"ngIf"],[1,"inst-actions-card"],[2,"justify-content","center","align-items","center","gap","8px","display","inline-flex"],[1,"inst-img-dot",3,"ngClass","click"],[1,"inst-btn-container"],["mat-raised-button","",1,"w-full","rounded-button","main-button",3,"click"],[1,"w-full","pt-10"],[1,"inst-img-div-1-1"],[1,"inst-img-div-1-1-1"],[2,"width","32px","height","32px","position","relative"],[2,"left","0px","top","0px","position","absolute"],[1,"inst-step-icon-div"],[1,"inst-step-icon-circle"],[1,"inst-step-icon"],[1,"inst-step-title"],[1,"inst-first-img"],[1,"inst-first-img-div"],[1,"inst-first-img-div-card"],[1,"inst-first-img-div-header"],[1,"inst-first-img-div-search-bar"],[2,"justify-content","flex-start","align-items","center","gap","11px","display","flex"],[2,"width","20px","height","20px","position","relative"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 20 20","fill","none"],["d","M16.6667 9.58333H15.4167V6.25C15.4167 5.33333 14.6667 4.58333 13.75 4.58333H10.4167V3.33333C10.4167 2.18333 9.48333 1.25 8.33333 1.25C7.18333 1.25 6.25 2.18333 6.25 3.33333V4.58333H2.91667C2 4.58333 1.25833 5.33333 1.25833 6.25V9.41667H2.5C3.74167 9.41667 4.75 10.425 4.75 11.6667C4.75 12.9083 3.74167 13.9167 2.5 13.9167H1.25V17.0833C1.25 18 2 18.75 2.91667 18.75H6.08333V17.5C6.08333 16.2583 7.09167 15.25 8.33333 15.25C9.575 15.25 10.5833 16.2583 10.5833 17.5V18.75H13.75C14.6667 18.75 15.4167 18 15.4167 17.0833V13.75H16.6667C17.8167 13.75 18.75 12.8167 18.75 11.6667C18.75 10.5167 17.8167 9.58333 16.6667 9.58333Z","fill","#606368"],[2,"width","1px","align-self","stretch","flex-direction","column","justify-content","flex-start","align-items","center","display","inline-flex"],[2,"width","22px","flex","1 1 0","transform","rotate(90deg)","transform-origin","0 0","border","1px #c3c6cf solid"],[2,"width","22px","height","22px","position","relative","background","#dfe1e6","border-radius","50px","overflow","hidden"],["xmlns","http://www.w3.org/2000/svg","width","22","height","22","viewBox","0 0 22 22","fill","none"],["width","22","height","22","rx","11","fill","#DFE1E6"],["d","M11 5C11.7956 5 12.5587 5.31607 13.1213 5.87868C13.6839 6.44129 14 7.20435 14 8C14 8.79565 13.6839 9.55871 13.1213 10.1213C12.5587 10.6839 11.7956 11 11 11C10.2043 11 9.44129 10.6839 8.87868 10.1213C8.31607 9.55871 8 8.79565 8 8C8 7.20435 8.31607 6.44129 8.87868 5.87868C9.44129 5.31607 10.2043 5 11 5ZM11 12C14.315 12 17 13.3425 17 15V17H5V15C5 13.3425 7.685 12 11 12Z","fill","#606368"],["d","M10.0007 13.334C10.4427 13.334 10.8666 13.5096 11.1792 13.8221C11.4917 14.1347 11.6673 14.5586 11.6673 15.0007C11.6673 15.4427 11.4917 15.8666 11.1792 16.1792C10.8666 16.4917 10.4427 16.6673 10.0007 16.6673C9.55862 16.6673 9.1347 16.4917 8.82214 16.1792C8.50958 15.8666 8.33398 15.4427 8.33398 15.0007C8.33398 14.5586 8.50958 14.1347 8.82214 13.8221C9.1347 13.5096 9.55862 13.334 10.0007 13.334ZM10.0007 8.33398C10.4427 8.33398 10.8666 8.50958 11.1792 8.82214C11.4917 9.1347 11.6673 9.55862 11.6673 10.0007C11.6673 10.4427 11.4917 10.8666 11.1792 11.1792C10.8666 11.4917 10.4427 11.6673 10.0007 11.6673C9.55862 11.6673 9.1347 11.4917 8.82214 11.1792C8.50958 10.8666 8.33398 10.4427 8.33398 10.0007C8.33398 9.55862 8.50958 9.1347 8.82214 8.82214C9.1347 8.50958 9.55862 8.33398 10.0007 8.33398ZM10.0007 3.33398C10.4427 3.33398 10.8666 3.50958 11.1792 3.82214C11.4917 4.1347 11.6673 4.55862 11.6673 5.00065C11.6673 5.44268 11.4917 5.8666 11.1792 6.17916C10.8666 6.49172 10.4427 6.66732 10.0007 6.66732C9.55862 6.66732 9.1347 6.49172 8.82214 6.17916C8.50958 5.8666 8.33398 5.44268 8.33398 5.00065C8.33398 4.55862 8.50958 4.1347 8.82214 3.82214C9.1347 3.50958 9.55862 3.33398 10.0007 3.33398Z","fill","#606368"],[2,"width","53px","height","53px","left","179px","top","16px","position","absolute","box-shadow","0px 4px 4px rgba(0, 0, 0, 0.25)","border-radius","9999px","border","2px #f4a816 solid"],[1,"inst-second-container"],[1,"inst-second-c-div"],[1,"inst-step-icon-m-div"],[1,"inst-second-img"],[1,"inst-second-img-card"],[1,"inst-second-img-card-div1"],[1,"inst-second-img-card-div1-1"],[1,"inst-second-img-card-div1-2"],["d","M15.8327 5.34102L14.6577 4.16602L9.99935 8.82435L5.34102 4.16602L4.16602 5.34102L8.82435 9.99935L4.16602 14.6577L5.34102 15.8327L9.99935 11.1743L14.6577 15.8327L15.8327 14.6577L11.1743 9.99935L15.8327 5.34102Z","fill","#808899","fill-opacity","0.43"],[2,"align-self","stretch","height","58px","flex-direction","column","justify-content","center","align-items","center","gap","4px","display","flex"],[2,"align-self","stretch","height","18px","padding-left","24px","padding-right","24px","flex-direction","column","justify-content","flex-start","align-items","center","gap","15px","display","flex"],[2,"align-self","stretch","color","#777777","font-size","12px","font-family","Poppins","font-weight","500","word-wrap","break-word"],[2,"align-self","stretch","height","36px","padding-left","24px","padding-right","24px","flex-direction","column","justify-content","flex-start","align-items","center","gap","15px","display","flex"],[2,"align-self","stretch","padding-left","24px","padding-right","40px","justify-content","flex-start","align-items","center","gap","40px","display","inline-flex"],[2,"flex","1 1 0","height","20px","justify-content","flex-start","align-items","center","gap","8px","display","flex"],[2,"width","20px","height","20px","flex-direction","column","justify-content","center","align-items","center","gap","8px","display","inline-flex"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 16 16","fill","none"],["d","M15.9994 1.38067C15.9994 1.38067 14.0333 0.614244 12.4047 2.37004C11.1096 1.37808 9.47077 0.787109 7.7188 0.787109C5.99918 0.787109 4.30551 1.38907 2.95308 2.46083C1.62212 3.51612 0.65962 5.02441 0.243092 6.68036C-0.362154 9.08465 0.131271 12.0563 2.07902 13.7152C4.00722 15.3576 6.58232 15.6623 8.69027 14.5666C10.0065 13.8825 10.8834 12.8221 11.4848 11.4666C12.2746 9.6866 13.1567 7.63581 13.9462 5.85578C14.595 7.23386 14.6174 8.80322 14.3355 10.149C14.0539 11.4944 13.3198 12.7394 12.2823 13.6318C12.1279 13.7646 11.9632 13.8942 11.8629 14.0719C11.612 14.5152 12.0962 15.0386 12.5236 14.7016C12.7155 14.5504 12.9116 14.3782 13.0946 14.1872C14.5409 12.773 15.4691 10.7884 15.4691 8.5961C15.4691 7.21576 15.1019 5.87226 14.4771 4.74815C15.3323 2.84921 16 1.38034 16 1.38034M4.53525 11.4834C3.25458 11.5597 1.9893 10.8469 1.39207 9.70244C1.12196 9.18513 0.985472 8.59642 1.01207 8.01159C1.07422 6.64482 1.61219 5.32167 2.46799 4.26574C3.29976 3.23953 4.43047 2.46956 5.68358 2.07084C5.93382 1.99135 6.18886 1.92608 6.44679 1.87665C6.86716 1.79587 7.2949 1.7558 7.72296 1.7558C9.35927 1.7558 10.8341 2.32545 11.8591 3.16102C11.6656 3.44859 11.4714 3.73584 11.2769 4.02308C10.8184 4.70033 10.3583 5.3766 9.89627 6.05126C9.35543 6.84063 8.81234 7.62838 8.26284 8.4116C7.50893 9.48563 6.86011 10.7412 5.58714 11.2589C5.25744 11.393 4.88961 11.4624 4.53557 11.4834H4.53525Z","fill","#1C44F9"],[2,"flex","1 1 0","align-self","stretch","flex-direction","column","justify-content","flex-start","align-items","center","gap","15px","display","inline-flex"],[2,"justify-content","flex-start","align-items","center","gap","16px","display","flex"],["fill-rule","evenodd","clip-rule","evenodd","d","M15.8327 10.7243C15.8327 10.3327 15.5493 10.016 15.166 9.90768C14.1077 9.61602 13.3327 8.64935 13.3327 7.49935V3.33268H14.166C14.6243 3.33268 14.9993 2.95768 14.9993 2.49935C14.9993 2.04102 14.6243 1.66602 14.166 1.66602H5.83268C5.37435 1.66602 4.99935 2.04102 4.99935 2.49935C4.99935 2.95768 5.37435 3.33268 5.83268 3.33268H6.66602V7.49935C6.66602 8.64935 5.89102 9.61602 4.83268 9.90768C4.44935 10.016 4.16602 10.3327 4.16602 10.7243V10.8327C4.16602 11.291 4.54102 11.666 4.99935 11.666H9.14935L9.16602 17.4993C9.16602 17.9577 9.54102 18.3327 9.99935 18.3327C10.4577 18.3327 10.8327 17.9577 10.8327 17.4993L10.816 11.666H14.9993C15.4577 11.666 15.8327 11.291 15.8327 10.8327V10.7243Z","fill","#606368"],[2,"align-self","stretch","height","1px","flex-direction","column","justify-content","center","align-items","flex-start","display","flex"],[2,"align-self","stretch","height","0px","border","1px rgba(0, 0, 0, 0.25) solid"],[2,"align-self","stretch","padding-left","24px","padding-right","24px","justify-content","flex-start","align-items","center","gap","40px","display","inline-flex"],[2,"flex","1 1 0","height","20px","justify-content","flex-start","align-items","center","gap","16px","display","flex"],["d","M16.2492 9.99935C16.2492 9.80768 16.2409 9.62435 16.2242 9.43268L17.7742 8.25768C18.1076 8.00768 18.1992 7.54102 17.9909 7.17435L16.4326 4.48268C16.2242 4.11602 15.7742 3.96602 15.3909 4.13268L13.5992 4.89102C13.2909 4.67435 12.9659 4.48268 12.6242 4.32435L12.3826 2.39935C12.3326 1.98268 11.9742 1.66602 11.5576 1.66602H8.44923C8.02423 1.66602 7.6659 1.98268 7.6159 2.39935L7.37423 4.32435C7.03257 4.48268 6.70757 4.67435 6.39923 4.89102L4.60757 4.13268C4.22423 3.96602 3.77423 4.11602 3.5659 4.48268L2.00757 7.18268C1.79923 7.54935 1.8909 8.00768 2.22423 8.26602L3.77423 9.44102C3.75757 9.62435 3.74923 9.80768 3.74923 9.99935C3.74923 10.191 3.75757 10.3743 3.77423 10.566L2.22423 11.741C1.8909 11.991 1.79923 12.4577 2.00757 12.8243L3.5659 15.516C3.77423 15.8827 4.22423 16.0327 4.60757 15.866L6.39923 15.1077C6.70757 15.3243 7.03257 15.516 7.37423 15.6743L7.6159 17.5993C7.6659 18.016 8.02423 18.3327 8.4409 18.3327H11.5492C11.9659 18.3327 12.3242 18.016 12.3742 17.5993L12.6159 15.6743C12.9576 15.516 13.2826 15.3243 13.5909 15.1077L15.3826 15.866C15.7659 16.0327 16.2159 15.8827 16.4242 15.516L17.9826 12.8243C18.1909 12.4577 18.0992 11.9993 17.7659 11.741L16.2159 10.566C16.2409 10.3743 16.2492 10.191 16.2492 9.99935ZM10.0326 12.916C8.42423 12.916 7.1159 11.6077 7.1159 9.99935C7.1159 8.39102 8.42423 7.08268 10.0326 7.08268C11.6409 7.08268 12.9492 8.39102 12.9492 9.99935C12.9492 11.6077 11.6409 12.916 10.0326 12.916Z","fill","#606368"],[1,"inst-icon-second-pointer"],["fxLayout","column","fxLayoutAlign","center center",1,"w-full"],[2,"width","329px","flex-direction","column","justify-content","flex-start","align-items","flex-start","gap","16px","display","inline-flex"],[2,"align-self","stretch","justify-content","flex-start","align-items","center","gap","8px","display","inline-flex"],[2,"width","32px","height","32px","left","0px","top","0px","position","absolute"],[2,"width","329px","height","121px","position","relative","box-shadow","0px 2px 4px rgba(97, 97, 97, 0.28)"],[2,"height","121px","padding-top","24px","padding-right","24px","left","0px","top","0px","position","absolute","background","#0f8bf9","border-radius","8px","flex-direction","column","justify-content","flex-start","align-items","flex-end","gap","8px","display","inline-flex"],[2,"width","305px","padding-bottom","63px","background","#fbf3fb","border-top-left-radius","16px","justify-content","center","align-items","center","display","inline-flex"],[2,"flex","1 1 0","align-self","stretch","padding-left","12px","padding-right","12px","padding-top","6px","padding-bottom","6px","background","#d9dbde","border-top-left-radius","16px","justify-content","flex-start","align-items","center","gap","12px","display","inline-flex"],[2,"flex","1 1 0","height","20px","padding-left","12px","padding-right","12px","padding-top","6px","padding-bottom","6px","background","#f1f3f4","border-radius","20px"],[2,"width","20px","height","20px","padding","8px","background","#f4f5f7","border-radius","2px","flex-direction","column","justify-content","center","align-items","center","gap","8px","display","inline-flex"],[1,"inst-icon-pointer"]],template:function(r,i){1&r&&(B(0,"div",0)(1,"div",1),we(2,"img",2)(3,"language-picker"),K(),B(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"span",7),ye(9,"\xa1La instalaci\xf3n de Biometric Wallet se ha completado!"),we(10,"br"),K(),B(11,"span",8),ye(12," Agrega la extensi\xf3n a tu navegador para acceder f\xe1cilmente y ver las confirmaciones de transacciones en Biometric Wallet. "),K()()(),B(13,"div",9)(14,"div",10),Ae(15,Sut,29,0,"div",11),Ae(16,Iut,52,0,"div",12),Ae(17,Mut,28,0,"div",13),K()(),B(18,"div",14)(19,"div",15)(20,"div",16),xt("click",function(){return i.changeToSlide(1)}),K(),B(21,"div",16),xt("click",function(){return i.changeToSlide(2)}),K()(),B(22,"div",17)(23,"button",18),xt("click",function(){return i.changeToSlide(i.currentSlide+1)}),ye(24),rt(25,"transloco"),K()()()()()(),we(26,"footer",19)),2&r&&(ne(15),me("ngIf",1===i.currentSlide),ne(1),me("ngIf",1===i.currentSlide),ne(1),me("ngIf",2===i.currentSlide),ne(3),me("ngClass",$y(8,ure,1===i.currentSlide)),ne(1),me("ngClass",$y(10,ure,2===i.currentSlide)),ne(3),Ot(" ",lt(25,6,"common.continue")," "))},dependencies:[Lu,ma,$o,Bo,LP,Mk,EP,DP,mv],styles:[".inst-card[_ngcontent-%COMP%]{width:750px;height:100%;padding:24px 32px;background:white;box-shadow:0 2px 4px #61616114;border-radius:24px;border:1px rgba(0,0,0,.25) solid;flex-direction:column;justify-content:space-between;align-items:center;display:inline-flex}.inst-card-title[_ngcontent-%COMP%]{color:#1c44f9;font-size:25px;font-family:Poppins;font-weight:500;line-height:36px;word-wrap:break-word}.inst-card-description[_ngcontent-%COMP%]{color:#010333;font-size:14px;font-family:Poppins;font-weight:500;line-height:20px;letter-spacing:.1px;word-wrap:break-word}.inst-img-div[_ngcontent-%COMP%]{align-self:stretch;height:239px;flex-direction:column;justify-content:flex-start;align-items:center;gap:24px;display:flex}.inst-img-div-1[_ngcontent-%COMP%]{align-self:stretch;justify-content:space-between;align-items:flex-start;display:inline-flex}.inst-img-div-1-1[_ngcontent-%COMP%]{width:329px;flex-direction:column;justify-content:flex-start;align-items:flex-start;gap:16px;display:inline-flex}.inst-img-div-1-1-1[_ngcontent-%COMP%]{align-self:stretch;justify-content:flex-start;align-items:flex-start;gap:8px;display:inline-flex}.inst-step-icon-circle[_ngcontent-%COMP%]{width:32px;height:32px;left:0;top:0;position:absolute;background:#dee0ff;border-radius:9999px;border:2px #dee0ff solid}.inst-second-c-div[_ngcontent-%COMP%]{justify-content:flex-start;align-items:center;gap:8px;display:inline-flex}.inst-step-icon-m-div[_ngcontent-%COMP%]{width:32px;height:32px;position:relative}.inst-step-icon-div[_ngcontent-%COMP%]{width:32px;height:32px;left:0;top:0;position:absolute}.inst-step-icon[_ngcontent-%COMP%]{left:16.5px;top:9.5px;position:absolute;text-align:center;margin-left:-2px;color:#0b57d0;font-size:13px;font-family:Inter;font-weight:700;word-wrap:break-word}.inst-actions-card[_ngcontent-%COMP%]{height:120px;padding-top:10px;flex-direction:column;justify-content:center;align-items:center;gap:32px;display:flex}.inst-img-dot[_ngcontent-%COMP%]{width:8px;height:8px;background:#cbcbcb;border-radius:9999px;cursor:pointer}.inst-img-dot-active[_ngcontent-%COMP%]{background:#0036e7}.inst-btn-container[_ngcontent-%COMP%]{align-self:stretch;height:40px;background:#e5ebfd;border-radius:16px;overflow:hidden;flex-direction:column;justify-content:center;align-items:center;gap:8px;display:flex}.inst-first-img[_ngcontent-%COMP%]{width:329px;height:121px;position:relative;box-shadow:0 2px 4px #61616147}.inst-first-img-div[_ngcontent-%COMP%]{height:121px;padding-top:24px;padding-right:24px;left:0;top:0;position:absolute;background:#0f8bf9;border-radius:8px;flex-direction:column;justify-content:flex-start;align-items:flex-end;gap:8px;display:inline-flex}.inst-first-img-div-card[_ngcontent-%COMP%]{width:305px;padding-bottom:63px;background:#fbf3fb;border-top-left-radius:16px;justify-content:center;align-items:center;display:inline-flex}.inst-first-img-div-header[_ngcontent-%COMP%]{flex:1 1 0;align-self:stretch;padding:6px 12px;background:#d9dbde;border-top-left-radius:16px;justify-content:flex-start;align-items:center;gap:12px;display:inline-flex}.inst-first-img-div-search-bar[_ngcontent-%COMP%]{flex:1 1 0;height:20px;padding:6px 12px;background:#f1f3f4;border-radius:20px}.inst-second-container[_ngcontent-%COMP%]{flex-direction:column;justify-content:flex-start;align-items:flex-start;gap:16px;display:inline-flex}.inst-second-img[_ngcontent-%COMP%]{width:329px;height:191px;position:relative}.inst-second-img-card[_ngcontent-%COMP%]{height:191px;padding-top:12px;padding-bottom:12px;left:0;top:0;position:absolute;background:white;box-shadow:0 2px 4px #61616157;border-radius:8px;flex-direction:column;justify-content:center;align-items:center;gap:10px;display:inline-flex}.inst-second-img-card-div1[_ngcontent-%COMP%]{align-self:stretch;padding-left:24px;padding-right:16px;justify-content:flex-start;align-items:center;gap:8px;display:inline-flex}.inst-second-img-card-div1-1[_ngcontent-%COMP%]{flex:1 1 0;flex-direction:column;justify-content:flex-start;align-items:flex-start;gap:24px;display:inline-flex}.inst-second-img-card-div1-2[_ngcontent-%COMP%]{align-self:stretch;color:#222;font-size:14px;font-family:Poppins;font-weight:600;line-height:28px;word-wrap:break-word}.inst-step-title[_ngcontent-%COMP%]{width:308px;color:#010333;font-size:14px;font-family:Poppins;font-weight:500;line-height:20px;margin-left:8px;letter-spacing:.1px;word-wrap:break-word}.inst-icon-pointer[_ngcontent-%COMP%]{width:53px;height:53px;left:182px;top:18px;position:absolute;box-shadow:0 4px 4px #00000040;border-radius:9999px;border:2px #f4a816 solid}.inst-icon-second-pointer[_ngcontent-%COMP%]{width:53px;height:53px;left:214px;top:110px;position:absolute;box-shadow:0 4px 4px #00000040;border-radius:9999px;border:2px #f4a816 solid}",'@font-face{font-family:Poppins;src:url(Poppins-Regular.woff2) format("woff2");font-weight:400;font-style:normal;font-display:swap}*[_ngcontent-%COMP%]{font-family:Poppins,sans-serif}.main-div[_ngcontent-%COMP%]{flex:1 1 auto;width:100%;max-width:100%;height:100vh;background:rgba(211,211,211,.3607843137)}.w-full[_ngcontent-%COMP%]{width:100%}.h-full[_ngcontent-%COMP%]{height:100vh}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.primaryColor[_ngcontent-%COMP%]{color:#01236d!important}.divider-height[_ngcontent-%COMP%]{width:2px;background-color:#8080806e;height:100%;margin-top:5px;margin-bottom:5px}.justify-center[_ngcontent-%COMP%]{justify-content:center}.text-center[_ngcontent-%COMP%]{text-align:center}.h-20[_ngcontent-%COMP%]{height:20px}.my-2[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}@media (min-width: 768px){.sm\\:h-8[_ngcontent-%COMP%]{height:8px}}@media (min-width: 1024px){.h-20[_ngcontent-%COMP%]{height:20px}.sm\\:h-8[_ngcontent-%COMP%]{height:8px}}@media (min-width: 1280px){.h-20[_ngcontent-%COMP%]{height:20px}.sm\\:h-8[_ngcontent-%COMP%]{height:8px}}.p-0[_ngcontent-%COMP%]{padding:0}.p-1[_ngcontent-%COMP%]{padding:.25rem}.p-2[_ngcontent-%COMP%]{padding:.5rem}.p-3[_ngcontent-%COMP%]{padding:.75rem}.p-4[_ngcontent-%COMP%]{padding:1rem}.p-5[_ngcontent-%COMP%]{padding:1.25rem}.p-6[_ngcontent-%COMP%]{padding:1.5rem}.px-0[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.px-1[_ngcontent-%COMP%]{padding-left:.25rem;padding-right:.25rem}.px-2[_ngcontent-%COMP%]{padding-left:.5rem;padding-right:.5rem}.px-3[_ngcontent-%COMP%]{padding-left:.75rem;padding-right:.75rem}.px-4[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.px-5[_ngcontent-%COMP%]{padding-left:1.25rem;padding-right:1.25rem}.px-6[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}.m-0[_ngcontent-%COMP%]{margin:0}.m-1[_ngcontent-%COMP%]{margin:.25rem}.m-2[_ngcontent-%COMP%]{margin:.5rem}.m-3[_ngcontent-%COMP%]{margin:.75rem}.m-4[_ngcontent-%COMP%]{margin:1rem}.m-5[_ngcontent-%COMP%]{margin:1.25rem}.m-6[_ngcontent-%COMP%]{margin:1.5rem}.mx-0[_ngcontent-%COMP%]{margin-left:0;margin-right:0}.mx-1[_ngcontent-%COMP%]{margin-left:.25rem;margin-right:.25rem}.mx-2[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem}.mx-3[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:.75rem}.mx-4[_ngcontent-%COMP%]{margin-left:1rem;margin-right:1rem}.mx-5[_ngcontent-%COMP%]{margin-left:1.25rem;margin-right:1.25rem}.mx-6[_ngcontent-%COMP%]{margin-left:1.5rem;margin-right:1.5rem}.p-7[_ngcontent-%COMP%]{padding:1.75rem}.p-8[_ngcontent-%COMP%]{padding:2rem}.p-9[_ngcontent-%COMP%]{padding:2.25rem}.p-10[_ngcontent-%COMP%]{padding:2.5rem}.p-11[_ngcontent-%COMP%]{padding:2.75rem}.p-12[_ngcontent-%COMP%]{padding:3rem}.p-14[_ngcontent-%COMP%]{padding:3.5rem}.p-16[_ngcontent-%COMP%]{padding:4rem}.px-7[_ngcontent-%COMP%]{padding-left:1.75rem;padding-right:1.75rem}.px-8[_ngcontent-%COMP%]{padding-left:2rem;padding-right:2rem}.px-9[_ngcontent-%COMP%]{padding-left:2.25rem;padding-right:2.25rem}.px-10[_ngcontent-%COMP%]{padding-left:2.5rem;padding-right:2.5rem}.px-11[_ngcontent-%COMP%]{padding-left:2.75rem;padding-right:2.75rem}.px-12[_ngcontent-%COMP%]{padding-left:3rem;padding-right:3rem}.px-14[_ngcontent-%COMP%]{padding-left:3.5rem;padding-right:3.5rem}.px-16[_ngcontent-%COMP%]{padding-left:4rem;padding-right:4rem}.m-7[_ngcontent-%COMP%]{margin:1.75rem}.m-8[_ngcontent-%COMP%]{margin:2rem}.m-9[_ngcontent-%COMP%]{margin:2.25rem}.m-10[_ngcontent-%COMP%]{margin:2.5rem}.m-11[_ngcontent-%COMP%]{margin:2.75rem}.m-12[_ngcontent-%COMP%]{margin:3rem}.m-14[_ngcontent-%COMP%]{margin:3.5rem}.m-16[_ngcontent-%COMP%]{margin:4rem}.mx-7[_ngcontent-%COMP%]{margin-left:1.75rem;margin-right:1.75rem}.mx-8[_ngcontent-%COMP%]{margin-left:2rem;margin-right:2rem}.mx-9[_ngcontent-%COMP%]{margin-left:2.25rem;margin-right:2.25rem}.mx-10[_ngcontent-%COMP%]{margin-left:2.5rem;margin-right:2.5rem}.mx-11[_ngcontent-%COMP%]{margin-left:2.75rem;margin-right:2.75rem}.mx-12[_ngcontent-%COMP%]{margin-left:3rem;margin-right:3rem}.mx-14[_ngcontent-%COMP%]{margin-left:3.5rem;margin-right:3.5rem}.mx-16[_ngcontent-%COMP%]{margin-left:4rem;margin-right:4rem}.pt-1[_ngcontent-%COMP%]{padding-top:.25rem}.pt-2[_ngcontent-%COMP%]{padding-top:.5rem}.pt-3[_ngcontent-%COMP%]{padding-top:.75rem}.pt-4[_ngcontent-%COMP%]{padding-top:1rem}.pt-5[_ngcontent-%COMP%]{padding-top:1.25rem}.pt-6[_ngcontent-%COMP%]{padding-top:1.5rem}.pt-7[_ngcontent-%COMP%]{padding-top:1.75rem}.pt-8[_ngcontent-%COMP%]{padding-top:2rem}.pt-9[_ngcontent-%COMP%]{padding-top:2.25rem}.pt-10[_ngcontent-%COMP%]{padding-top:2.5rem}.pt-11[_ngcontent-%COMP%]{padding-top:2.75rem}.pt-12[_ngcontent-%COMP%]{padding-top:3rem}.pt-14[_ngcontent-%COMP%]{padding-top:3.5rem}.pt-16[_ngcontent-%COMP%]{padding-top:4rem}.pb-1[_ngcontent-%COMP%]{padding-bottom:.25rem}.pb-2[_ngcontent-%COMP%]{padding-bottom:.5rem}.pb-3[_ngcontent-%COMP%]{padding-bottom:.75rem}.pb-4[_ngcontent-%COMP%]{padding-bottom:1rem}.pb-5[_ngcontent-%COMP%]{padding-bottom:1.25rem}.pb-6[_ngcontent-%COMP%]{padding-bottom:1.5rem}.pb-7[_ngcontent-%COMP%]{padding-bottom:1.75rem}.pb-8[_ngcontent-%COMP%]{padding-bottom:2rem}.pb-9[_ngcontent-%COMP%]{padding-bottom:2.25rem}.pb-10[_ngcontent-%COMP%]{padding-bottom:2.5rem}.pb-11[_ngcontent-%COMP%]{padding-bottom:2.75rem}.pb-12[_ngcontent-%COMP%]{padding-bottom:3rem}.pb-14[_ngcontent-%COMP%]{padding-bottom:3.5rem}.pb-16[_ngcontent-%COMP%]{padding-bottom:4rem}.mt-1[_ngcontent-%COMP%]{margin-top:.25rem}.mt-2[_ngcontent-%COMP%]{margin-top:.5rem}.mt-3[_ngcontent-%COMP%]{margin-top:.75rem}.mt-4[_ngcontent-%COMP%]{margin-top:1rem}.mt-5[_ngcontent-%COMP%]{margin-top:1.25rem}.mt-6[_ngcontent-%COMP%]{margin-top:1.5rem}.mt-7[_ngcontent-%COMP%]{margin-top:1.75rem}.mt-8[_ngcontent-%COMP%]{margin-top:2rem}.mt-9[_ngcontent-%COMP%]{margin-top:2.25rem}.mt-10[_ngcontent-%COMP%]{margin-top:2.5rem}.mt-11[_ngcontent-%COMP%]{margin-top:2.75rem}.mt-12[_ngcontent-%COMP%]{margin-top:3rem}.mt-14[_ngcontent-%COMP%]{margin-top:3.5rem}.mt-16[_ngcontent-%COMP%]{margin-top:4rem}.mb-1[_ngcontent-%COMP%]{margin-bottom:.25rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem}.mb-3[_ngcontent-%COMP%]{margin-bottom:.75rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.mb-5[_ngcontent-%COMP%]{margin-bottom:1.25rem}.mb-6[_ngcontent-%COMP%]{margin-bottom:1.5rem}.mb-7[_ngcontent-%COMP%]{margin-bottom:1.75rem}.mb-8[_ngcontent-%COMP%]{margin-bottom:2rem}.mb-9[_ngcontent-%COMP%]{margin-bottom:2.25rem}.mb-10[_ngcontent-%COMP%]{margin-bottom:2.5rem}.mb-11[_ngcontent-%COMP%]{margin-bottom:2.75rem}.mb-12[_ngcontent-%COMP%]{margin-bottom:3rem}.mb-14[_ngcontent-%COMP%]{margin-bottom:3.5rem}.mb-16[_ngcontent-%COMP%]{margin-bottom:4rem}.py-1[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem}.py-2[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}.py-3[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem}.py-4[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}.py-5[_ngcontent-%COMP%]{padding-top:1.25rem;padding-bottom:1.25rem}.py-6[_ngcontent-%COMP%]{padding-top:1.5rem;padding-bottom:1.5rem}.py-7[_ngcontent-%COMP%]{padding-top:1.75rem;padding-bottom:1.75rem}.py-8[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:2rem}.py-9[_ngcontent-%COMP%]{padding-top:2.25rem;padding-bottom:2.25rem}.py-10[_ngcontent-%COMP%]{padding-top:2.5rem;padding-bottom:2.5rem}.py-11[_ngcontent-%COMP%]{padding-top:2.75rem;padding-bottom:2.75rem}.py-12[_ngcontent-%COMP%]{padding-top:3rem;padding-bottom:3rem}.py-14[_ngcontent-%COMP%]{padding-top:3.5rem;padding-bottom:3.5rem}.py-16[_ngcontent-%COMP%]{padding-top:4rem;padding-bottom:4rem}.my-1[_ngcontent-%COMP%]{margin-top:.25rem;margin-bottom:.25rem}.my-2[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}.my-3[_ngcontent-%COMP%]{margin-top:.75rem;margin-bottom:.75rem}.my-4[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem}.my-5[_ngcontent-%COMP%]{margin-top:1.25rem;margin-bottom:1.25rem}.my-6[_ngcontent-%COMP%]{margin-top:1.5rem;margin-bottom:1.5rem}.my-7[_ngcontent-%COMP%]{margin-top:1.75rem;margin-bottom:1.75rem}.my-8[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}.my-9[_ngcontent-%COMP%]{margin-top:2.25rem;margin-bottom:2.25rem}.my-10[_ngcontent-%COMP%]{margin-top:2.5rem;margin-bottom:2.5rem}.my-11[_ngcontent-%COMP%]{margin-top:2.75rem;margin-bottom:2.75rem}.my-12[_ngcontent-%COMP%]{margin-top:3rem;margin-bottom:3rem}.my-14[_ngcontent-%COMP%]{margin-top:3.5rem;margin-bottom:3.5rem}.my-16[_ngcontent-%COMP%]{margin-top:4rem;margin-bottom:4rem}.main-button[_ngcontent-%COMP%]{background-color:#0b57d0!important;color:#fff!important;height:45px!important;font-size:18px;border-radius:20px}.main-title[_ngcontent-%COMP%]{margin-top:0!important;color:#1c44f9!important}.main-button[_ngcontent-%COMP%]:disabled{background-color:#e5ebfd!important;color:#4e6599!important}.secondary-button[_ngcontent-%COMP%]{background-color:#fff!important;color:#0b57d0!important;border:1px solid rgba(11,87,208,.5411764706)!important;height:45px;font-size:18px;border-radius:20px}.secondary-button[_ngcontent-%COMP%]:disabled{color:#4e6599!important;border:1px solid rgba(11,87,208,.2117647059)!important}.mr-1[_ngcontent-%COMP%]{margin-right:.25rem}.mr-2[_ngcontent-%COMP%]{margin-right:.5rem}.mr-3[_ngcontent-%COMP%]{margin-right:.75rem}.mr-4[_ngcontent-%COMP%]{margin-right:1rem}.mr-5[_ngcontent-%COMP%]{margin-right:1.25rem}.mr-6[_ngcontent-%COMP%]{margin-right:1.5rem}.mr-7[_ngcontent-%COMP%]{margin-right:1.75rem}.mr-8[_ngcontent-%COMP%]{margin-right:2rem}.mr-9[_ngcontent-%COMP%]{margin-right:2.25rem}.mr-10[_ngcontent-%COMP%]{margin-right:2.5rem}.mr-11[_ngcontent-%COMP%]{margin-right:2.75rem}.mr-12[_ngcontent-%COMP%]{margin-right:3rem}.mr-14[_ngcontent-%COMP%]{margin-right:3.5rem}.mr-16[_ngcontent-%COMP%]{margin-right:4rem}.ml-1[_ngcontent-%COMP%]{margin-left:.25rem}.ml-2[_ngcontent-%COMP%]{margin-left:.5rem}.ml-3[_ngcontent-%COMP%]{margin-left:.75rem}.ml-4[_ngcontent-%COMP%]{margin-left:1rem}.ml-5[_ngcontent-%COMP%]{margin-left:1.25rem}.ml-6[_ngcontent-%COMP%]{margin-left:1.5rem}.ml-7[_ngcontent-%COMP%]{margin-left:1.75rem}.ml-8[_ngcontent-%COMP%]{margin-left:2rem}.ml-9[_ngcontent-%COMP%]{margin-left:2.25rem}.ml-10[_ngcontent-%COMP%]{margin-left:2.5rem}.ml-11[_ngcontent-%COMP%]{margin-left:2.75rem}.ml-12[_ngcontent-%COMP%]{margin-left:3rem}.ml-14[_ngcontent-%COMP%]{margin-left:3.5rem}.ml-16[_ngcontent-%COMP%]{margin-left:4rem}.on-header[_ngcontent-%COMP%]{width:80%;height:80px}.on-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.mat-mdc-snack-bar-container[_ngcontent-%COMP%]{margin:0!important}']})}return e})()}];let Dut=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[PW.forRoot(Eut,{useHash:!0}),PW]})}return e})();function Aut(e,n){1&e&&we(0,"router-outlet")}let Tut=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=Ut({type:e,selectors:[["app-root"]],decls:3,vars:1,consts:[[1,"flex","flex-col","flex-auto","w-full","main-div"],[1,"flex","flex-col","flex-auto"],[4,"ngIf"]],template:function(r,i){1&r&&(B(0,"div",0)(1,"div",1),Ae(2,Aut,1,0,"router-outlet",2),K()()),2&r&&(ne(2),me("ngIf",!0))},dependencies:[ma,C2],styles:[".app::-webkit-scrollbar{display:none}.app{-ms-overflow-style:none;scrollbar-width:none}\n",'@font-face{font-family:Poppins;src:url(Poppins-Regular.woff2) format("woff2");font-weight:400;font-style:normal;font-display:swap}*{font-family:Poppins,sans-serif}.main-div{flex:1 1 auto;width:100%;max-width:100%;height:100vh;background:rgba(211,211,211,.3607843137)}.w-full{width:100%}.h-full{height:100vh}.bg-white{background-color:#fff}.primaryColor{color:#01236d!important}.divider-height{width:2px;background-color:#8080806e;height:100%;margin-top:5px;margin-bottom:5px}.justify-center{justify-content:center}.text-center{text-align:center}.h-20{height:20px}.my-2{margin-top:2rem;margin-bottom:2rem}@media (min-width: 768px){.sm\\:h-8{height:8px}}@media (min-width: 1024px){.h-20{height:20px}.sm\\:h-8{height:8px}}@media (min-width: 1280px){.h-20{height:20px}.sm\\:h-8{height:8px}}.p-0{padding:0}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.px-0{padding-left:0;padding-right:0}.px-1{padding-left:.25rem;padding-right:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.m-0{margin:0}.m-1{margin:.25rem}.m-2{margin:.5rem}.m-3{margin:.75rem}.m-4{margin:1rem}.m-5{margin:1.25rem}.m-6{margin:1.5rem}.mx-0{margin-left:0;margin-right:0}.mx-1{margin-left:.25rem;margin-right:.25rem}.mx-2{margin-left:.5rem;margin-right:.5rem}.mx-3{margin-left:.75rem;margin-right:.75rem}.mx-4{margin-left:1rem;margin-right:1rem}.mx-5{margin-left:1.25rem;margin-right:1.25rem}.mx-6{margin-left:1.5rem;margin-right:1.5rem}.p-7{padding:1.75rem}.p-8{padding:2rem}.p-9{padding:2.25rem}.p-10{padding:2.5rem}.p-11{padding:2.75rem}.p-12{padding:3rem}.p-14{padding:3.5rem}.p-16{padding:4rem}.px-7{padding-left:1.75rem;padding-right:1.75rem}.px-8{padding-left:2rem;padding-right:2rem}.px-9{padding-left:2.25rem;padding-right:2.25rem}.px-10{padding-left:2.5rem;padding-right:2.5rem}.px-11{padding-left:2.75rem;padding-right:2.75rem}.px-12{padding-left:3rem;padding-right:3rem}.px-14{padding-left:3.5rem;padding-right:3.5rem}.px-16{padding-left:4rem;padding-right:4rem}.m-7{margin:1.75rem}.m-8{margin:2rem}.m-9{margin:2.25rem}.m-10{margin:2.5rem}.m-11{margin:2.75rem}.m-12{margin:3rem}.m-14{margin:3.5rem}.m-16{margin:4rem}.mx-7{margin-left:1.75rem;margin-right:1.75rem}.mx-8{margin-left:2rem;margin-right:2rem}.mx-9{margin-left:2.25rem;margin-right:2.25rem}.mx-10{margin-left:2.5rem;margin-right:2.5rem}.mx-11{margin-left:2.75rem;margin-right:2.75rem}.mx-12{margin-left:3rem;margin-right:3rem}.mx-14{margin-left:3.5rem;margin-right:3.5rem}.mx-16{margin-left:4rem;margin-right:4rem}.pt-1{padding-top:.25rem}.pt-2{padding-top:.5rem}.pt-3{padding-top:.75rem}.pt-4{padding-top:1rem}.pt-5{padding-top:1.25rem}.pt-6{padding-top:1.5rem}.pt-7{padding-top:1.75rem}.pt-8{padding-top:2rem}.pt-9{padding-top:2.25rem}.pt-10{padding-top:2.5rem}.pt-11{padding-top:2.75rem}.pt-12{padding-top:3rem}.pt-14{padding-top:3.5rem}.pt-16{padding-top:4rem}.pb-1{padding-bottom:.25rem}.pb-2{padding-bottom:.5rem}.pb-3{padding-bottom:.75rem}.pb-4{padding-bottom:1rem}.pb-5{padding-bottom:1.25rem}.pb-6{padding-bottom:1.5rem}.pb-7{padding-bottom:1.75rem}.pb-8{padding-bottom:2rem}.pb-9{padding-bottom:2.25rem}.pb-10{padding-bottom:2.5rem}.pb-11{padding-bottom:2.75rem}.pb-12{padding-bottom:3rem}.pb-14{padding-bottom:3.5rem}.pb-16{padding-bottom:4rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-5{margin-top:1.25rem}.mt-6{margin-top:1.5rem}.mt-7{margin-top:1.75rem}.mt-8{margin-top:2rem}.mt-9{margin-top:2.25rem}.mt-10{margin-top:2.5rem}.mt-11{margin-top:2.75rem}.mt-12{margin-top:3rem}.mt-14{margin-top:3.5rem}.mt-16{margin-top:4rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-5{margin-bottom:1.25rem}.mb-6{margin-bottom:1.5rem}.mb-7{margin-bottom:1.75rem}.mb-8{margin-bottom:2rem}.mb-9{margin-bottom:2.25rem}.mb-10{margin-bottom:2.5rem}.mb-11{margin-bottom:2.75rem}.mb-12{margin-bottom:3rem}.mb-14{margin-bottom:3.5rem}.mb-16{margin-bottom:4rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-5{padding-top:1.25rem;padding-bottom:1.25rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.py-7{padding-top:1.75rem;padding-bottom:1.75rem}.py-8{padding-top:2rem;padding-bottom:2rem}.py-9{padding-top:2.25rem;padding-bottom:2.25rem}.py-10{padding-top:2.5rem;padding-bottom:2.5rem}.py-11{padding-top:2.75rem;padding-bottom:2.75rem}.py-12{padding-top:3rem;padding-bottom:3rem}.py-14{padding-top:3.5rem;padding-bottom:3.5rem}.py-16{padding-top:4rem;padding-bottom:4rem}.my-1{margin-top:.25rem;margin-bottom:.25rem}.my-2{margin-top:.5rem;margin-bottom:.5rem}.my-3{margin-top:.75rem;margin-bottom:.75rem}.my-4{margin-top:1rem;margin-bottom:1rem}.my-5{margin-top:1.25rem;margin-bottom:1.25rem}.my-6{margin-top:1.5rem;margin-bottom:1.5rem}.my-7{margin-top:1.75rem;margin-bottom:1.75rem}.my-8{margin-top:2rem;margin-bottom:2rem}.my-9{margin-top:2.25rem;margin-bottom:2.25rem}.my-10{margin-top:2.5rem;margin-bottom:2.5rem}.my-11{margin-top:2.75rem;margin-bottom:2.75rem}.my-12{margin-top:3rem;margin-bottom:3rem}.my-14{margin-top:3.5rem;margin-bottom:3.5rem}.my-16{margin-top:4rem;margin-bottom:4rem}.main-button{background-color:#0b57d0!important;color:#fff!important;height:45px!important;font-size:18px;border-radius:20px}.main-title{margin-top:0!important;color:#1c44f9!important}.main-button:disabled{background-color:#e5ebfd!important;color:#4e6599!important}.secondary-button{background-color:#fff!important;color:#0b57d0!important;border:1px solid rgba(11,87,208,.5411764706)!important;height:45px;font-size:18px;border-radius:20px}.secondary-button:disabled{color:#4e6599!important;border:1px solid rgba(11,87,208,.2117647059)!important}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mr-3{margin-right:.75rem}.mr-4{margin-right:1rem}.mr-5{margin-right:1.25rem}.mr-6{margin-right:1.5rem}.mr-7{margin-right:1.75rem}.mr-8{margin-right:2rem}.mr-9{margin-right:2.25rem}.mr-10{margin-right:2.5rem}.mr-11{margin-right:2.75rem}.mr-12{margin-right:3rem}.mr-14{margin-right:3.5rem}.mr-16{margin-right:4rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-3{margin-left:.75rem}.ml-4{margin-left:1rem}.ml-5{margin-left:1.25rem}.ml-6{margin-left:1.5rem}.ml-7{margin-left:1.75rem}.ml-8{margin-left:2rem}.ml-9{margin-left:2.25rem}.ml-10{margin-left:2.5rem}.ml-11{margin-left:2.75rem}.ml-12{margin-left:3rem}.ml-14{margin-left:3.5rem}.ml-16{margin-left:4rem}.on-header{width:80%;height:80px}.on-header img{width:150px}.cursor-pointer{cursor:pointer}.mat-mdc-snack-bar-container{margin:0!important}\n'],encapsulation:2})}return e})(),Nut=(()=>{class e{constructor(t){this.http=t}getTranslation(t){return this.http.get(`/assets/i18n/${t}.json`)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(dv))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Out=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({providers:[{provide:Ng,useValue:Net({availableLangs:[{id:"en",label:"English"},{id:"es",label:"Spanish"}],defaultLang:"en",fallbackLang:"en",reRenderOnLangChange:!0,prodMode:true})},{provide:SJ,useClass:Nut},{provide:v0,useFactory:()=>{const t=Se(su),r=t.getDefaultLang();return t.setActiveLang(r),()=>t.load(r).toPromise()},multi:!0}],imports:[RR]})}return e})();function dre(e){return new oe(3e3,!1)}function uu(e){switch(e.length){case 0:return new Fv;case 1:return e[0];default:return new Zte(e)}}function hre(e,n,t=new Map,r=new Map){const i=[],a=[];let s=-1,o=null;if(n.forEach(l=>{const c=l.get("offset"),u=c==s,h=u&&o||new Map;l.forEach((d,p)=>{let f=p,m=d;if("offset"!==p)switch(f=e.normalizePropertyName(f,i),m){case"!":m=t.get(p);break;case Ol:m=r.get(p);break;default:m=e.normalizeStyleValue(p,f,m,i)}h.set(f,m)}),u||a.push(h),o=h,s=c}),i.length)throw function ndt(e){return new oe(3502,!1)}();return a}function zP(e,n,t,r){switch(n){case"start":e.onStart(()=>r(t&&UP(t,"start",e)));break;case"done":e.onDone(()=>r(t&&UP(t,"done",e)));break;case"destroy":e.onDestroy(()=>r(t&&UP(t,"destroy",e)))}}function UP(e,n,t){const a=HP(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,t.totalTime??e.totalTime,!!t.disabled),s=e._data;return null!=s&&(a._data=s),a}function HP(e,n,t,r,i="",a=0,s){return{element:e,triggerName:n,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!s}}function Za(e,n,t){let r=e.get(n);return r||e.set(n,r=t),r}function pre(e){const n=e.indexOf(":");return[e.substring(1,n),e.slice(n+1)]}const fdt=(()=>typeof document>"u"?null:document.documentElement)();function WP(e){const n=e.parentNode||e.host||null;return n===fdt?null:n}let hp=null,fre=!1;function mre(e,n){for(;n;){if(n===e)return!0;n=WP(n)}return!1}function gre(e,n,t){if(t)return Array.from(e.querySelectorAll(n));const r=e.querySelector(n);return r?[r]:[]}let yre=(()=>{class e{validateStyleProperty(t){return function gdt(e){hp||(hp=function ydt(){return typeof document<"u"?document.body:null}()||{},fre=!!hp.style&&"WebkitAppearance"in hp.style);let n=!0;return hp.style&&!function mdt(e){return"ebkit"==e.substring(1,6)}(e)&&(n=e in hp.style,!n&&fre&&(n="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in hp.style)),n}(t)}matchesElement(t,r){return!1}containsElement(t,r){return mre(t,r)}getParentElement(t){return WP(t)}query(t,r,i){return gre(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,s,o=[],l){return new Fv(i,a)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})(),jP=(()=>{class e{static#e=this.NOOP=new yre}return e})();const bdt=1e3,GP="ng-enter",zk="ng-leave",Uk="ng-trigger",Hk=".ng-trigger",_re="ng-animating",qP=".ng-animating";function Rl(e){if("number"==typeof e)return e;const n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:KP(parseFloat(n[1]),n[2])}function KP(e,n){return"s"===n?e*bdt:e}function Wk(e,n,t){return e.hasOwnProperty("duration")?e:function vdt(e,n,t){let i,a=0,s="";if("string"==typeof e){const o=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===o)return n.push(dre()),{duration:0,delay:0,easing:""};i=KP(parseFloat(o[1]),o[2]);const l=o[3];null!=l&&(a=KP(parseFloat(l),o[4]));const c=o[5];c&&(s=c)}else i=e;if(!t){let o=!1,l=n.length;i<0&&(n.push(function Fut(){return new oe(3100,!1)}()),o=!0),a<0&&(n.push(function Rut(){return new oe(3101,!1)}()),o=!0),o&&n.splice(l,0,dre())}return{duration:i,delay:a,easing:s}}(e,n,t)}function Vv(e,n={}){return Object.keys(e).forEach(t=>{n[t]=e[t]}),n}function vre(e){const n=new Map;return Object.keys(e).forEach(t=>{n.set(t,e[t])}),n}function du(e,n=new Map,t){if(t)for(let[r,i]of t)n.set(r,i);for(let[r,i]of e)n.set(r,i);return n}function zo(e,n,t){n.forEach((r,i)=>{const a=YP(i);t&&!t.has(i)&&t.set(i,e.style[a]),e.style[a]=r})}function pp(e,n){n.forEach((t,r)=>{const i=YP(r);e.style[i]=""})}function zv(e){return Array.isArray(e)?1==e.length?e[0]:Xte(e):e}const XP=new RegExp("{{\\s*(.+?)\\s*}}","g");function wre(e){let n=[];if("string"==typeof e){let t;for(;t=XP.exec(e);)n.push(t[1]);XP.lastIndex=0}return n}function Uv(e,n,t){const r=e.toString(),i=r.replace(XP,(a,s)=>{let o=n[s];return null==o&&(t.push(function Lut(e){return new oe(3003,!1)}()),o=""),o.toString()});return i==r?e:i}function jk(e){const n=[];let t=e.next();for(;!t.done;)n.push(t.value),t=e.next();return n}const Cdt=/-+([a-z0-9])/g;function YP(e){return e.replace(Cdt,(...n)=>n[1].toUpperCase())}function Qa(e,n,t){switch(n.type){case 7:return e.visitTrigger(n,t);case 0:return e.visitState(n,t);case 1:return e.visitTransition(n,t);case 2:return e.visitSequence(n,t);case 3:return e.visitGroup(n,t);case 4:return e.visitAnimate(n,t);case 5:return e.visitKeyframes(n,t);case 6:return e.visitStyle(n,t);case 8:return e.visitReference(n,t);case 9:return e.visitAnimateChild(n,t);case 10:return e.visitAnimateRef(n,t);case 11:return e.visitQuery(n,t);case 12:return e.visitStagger(n,t);default:throw function $ut(e){return new oe(3004,!1)}()}}function Cre(e,n){return window.getComputedStyle(e)[n]}const Gk="*";function Idt(e,n){const t=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(r=>function Mdt(e,n,t){if(":"==e[0]){const l=function Edt(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return n.push(function Qut(e){return new oe(3016,!1)}()),"* => *"}}(e,t);if("function"==typeof l)return void n.push(l);e=l}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Zut(e){return new oe(3015,!1)}()),n;const i=r[1],a=r[2],s=r[3];n.push(kre(i,s));"<"==a[0]&&!(i==Gk&&s==Gk)&&n.push(kre(s,i))}(r,t,n)):t.push(e),t}const qk=new Set(["true","1"]),Kk=new Set(["false","0"]);function kre(e,n){const t=qk.has(e)||Kk.has(e),r=qk.has(n)||Kk.has(n);return(i,a)=>{let s=e==Gk||e==i,o=n==Gk||n==a;return!s&&t&&"boolean"==typeof i&&(s=i?qk.has(e):Kk.has(e)),!o&&r&&"boolean"==typeof a&&(o=a?qk.has(n):Kk.has(n)),s&&o}}const Ddt=new RegExp("s*:selfs*,?","g");function ZP(e,n,t,r){return new Adt(e).build(n,t,r)}class Adt{constructor(n){this._driver=n}build(n,t,r){const i=new Odt(t);return this._resetContextStyleTimingState(i),Qa(this,zv(n),i)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],s=[];return"@"==n.name.charAt(0)&&t.errors.push(function Vut(){return new oe(3006,!1)}()),n.definitions.forEach(o=>{if(this._resetContextStyleTimingState(t),0==o.type){const l=o,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,a.push(this.visitState(l,t))}),l.name=c}else if(1==o.type){const l=this.visitTransition(o,t);r+=l.queryCount,i+=l.depCount,s.push(l)}else t.errors.push(function zut(){return new oe(3007,!1)}())}),{type:7,name:n.name,states:a,transitions:s,queryCount:r,depCount:i,options:null}}visitState(n,t){const r=this.visitStyle(n.styles,t),i=n.options&&n.options.params||null;if(r.containsDynamicStyles){const a=new Set,s=i||{};r.styles.forEach(o=>{o instanceof Map&&o.forEach(l=>{wre(l).forEach(c=>{s.hasOwnProperty(c)||a.add(c)})})}),a.size&&(jk(a.values()),t.errors.push(function Uut(e,n){return new oe(3008,!1)}()))}return{type:0,name:n.name,style:r,options:i?{params:i}:null}}visitTransition(n,t){t.queryCount=0,t.depCount=0;const r=Qa(this,zv(n.animation),t);return{type:1,matchers:Idt(n.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:fp(n.options)}}visitSequence(n,t){return{type:2,steps:n.steps.map(r=>Qa(this,r,t)),options:fp(n.options)}}visitGroup(n,t){const r=t.currentTime;let i=0;const a=n.steps.map(s=>{t.currentTime=r;const o=Qa(this,s,t);return i=Math.max(i,t.currentTime),o});return t.currentTime=i,{type:3,steps:a,options:fp(n.options)}}visitAnimate(n,t){const r=function Rdt(e,n){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return QP(Wk(e,n).duration,0,"");const t=e;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=QP(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=Wk(t,n);return QP(i.duration,i.delay,i.easing)}(n.timings,t.errors);t.currentAnimateTimings=r;let i,a=n.styles?n.styles:Un({});if(5==a.type)i=this.visitKeyframes(a,t);else{let s=n.styles,o=!1;if(!s){o=!0;const c={};r.easing&&(c.easing=r.easing),s=Un(c)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(s,t);l.isEmptyStep=o,i=l}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(n,t){const r=this._makeStyleAst(n,t);return this._validateStyleAst(r,t),r}_makeStyleAst(n,t){const r=[],i=Array.isArray(n.styles)?n.styles:[n.styles];for(let o of i)"string"==typeof o?o===Ol?r.push(o):t.errors.push(new oe(3002,!1)):r.push(vre(o));let a=!1,s=null;return r.forEach(o=>{if(o instanceof Map&&(o.has("easing")&&(s=o.get("easing"),o.delete("easing")),!a))for(let l of o.values())if(l.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:r,easing:s,offset:n.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(n,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),n.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let h=!0;u&&(a!=i&&a>=u.startTime&&i<=u.endTime&&(t.errors.push(function Wut(e,n,t,r,i){return new oe(3010,!1)}()),h=!1),a=u.startTime),h&&c.set(l,{startTime:a,endTime:i}),t.options&&function wdt(e,n,t){const r=n.params||{},i=wre(e);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function Put(e){return new oe(3001,!1)}())})}(o,t.options,t.errors)})})}visitKeyframes(n,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function jut(){return new oe(3011,!1)}()),r;let a=0;const s=[];let o=!1,l=!1,c=0;const u=n.steps.map(y=>{const b=this._makeStyleAst(y,t);let _=null!=b.offset?b.offset:function Fdt(e){if("string"==typeof e)return null;let n=null;if(Array.isArray(e))e.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const t=e;n=parseFloat(t.get("offset")),t.delete("offset")}return n}(b.styles),v=0;return null!=_&&(a++,v=b.offset=_),l=l||v<0||v>1,o=o||v<c,c=v,s.push(v),b});l&&t.errors.push(function Gut(){return new oe(3012,!1)}()),o&&t.errors.push(function qut(){return new oe(3200,!1)}());const h=n.steps.length;let d=0;a>0&&a<h?t.errors.push(function Kut(){return new oe(3202,!1)}()):0==a&&(d=1/(h-1));const p=h-1,f=t.currentTime,m=t.currentAnimateTimings,g=m.duration;return u.forEach((y,b)=>{const _=d>0?b==p?1:d*b:s[b],v=_*g;t.currentTime=f+m.delay+v,m.duration=v,this._validateStyleAst(y,t),y.offset=_,r.styles.push(y)}),r}visitReference(n,t){return{type:8,animation:Qa(this,zv(n.animation),t),options:fp(n.options)}}visitAnimateChild(n,t){return t.depCount++,{type:9,options:fp(n.options)}}visitAnimateRef(n,t){return{type:10,animation:this.visitReference(n.animation,t),options:fp(n.options)}}visitQuery(n,t){const r=t.currentQuerySelector,i=n.options||{};t.queryCount++,t.currentQuery=n;const[a,s]=function Tdt(e){const n=!!e.split(/\s*,\s*/).find(t=>":self"==t);return n&&(e=e.replace(Ddt,"")),e=e.replace(/@\*/g,Hk).replace(/@\w+/g,t=>Hk+"-"+t.slice(1)).replace(/:animating/g,qP),[e,n]}(n.selector);t.currentQuerySelector=r.length?r+" "+a:a,Za(t.collectedStyles,t.currentQuerySelector,new Map);const o=Qa(this,zv(n.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:o,originalSelector:n.selector,options:fp(n.options)}}visitStagger(n,t){t.currentQuery||t.errors.push(function Xut(){return new oe(3013,!1)}());const r="full"===n.timings?{duration:0,delay:0,easing:"full"}:Wk(n.timings,t.errors,!0);return{type:12,animation:Qa(this,zv(n.animation),t),timings:r,options:null}}}class Odt{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function fp(e){return e?(e=Vv(e)).params&&(e.params=function Ndt(e){return e?Vv(e):null}(e.params)):e={},e}function QP(e,n,t){return{duration:e,delay:n,easing:t}}function JP(e,n,t,r,i,a,s=null,o=!1){return{type:1,element:e,keyframes:n,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:s,subTimeline:o}}class Xk{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,t){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...t)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const $dt=new RegExp(":enter","g"),Vdt=new RegExp(":leave","g");function eL(e,n,t,r,i,a=new Map,s=new Map,o,l,c=[]){return(new zdt).buildKeyframes(e,n,t,r,i,a,s,o,l,c)}class zdt{buildKeyframes(n,t,r,i,a,s,o,l,c,u=[]){c=c||new Xk;const h=new tL(n,t,c,i,a,u,[]);h.options=l;const d=l.delay?Rl(l.delay):0;h.currentTimeline.delayNextStep(d),h.currentTimeline.setStyles([s],null,h.errors,l),Qa(this,r,h);const p=h.timelines.filter(f=>f.containsAnimation());if(p.length&&o.size){let f;for(let m=p.length-1;m>=0;m--){const g=p[m];if(g.element===t){f=g;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([o],null,h.errors,l)}return p.length?p.map(f=>f.buildKeyframes()):[JP(t,[],[],[],0,d,"",!1)]}visitTrigger(n,t){}visitState(n,t){}visitTransition(n,t){}visitAnimateChild(n,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(n.options),a=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);a!=s&&t.transformIntoNewTimeline(s)}t.previousNode=n}visitAnimateRef(n,t){const r=t.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],t,r),this.visitReference(n.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=n}_applyAnimationRefDelays(n,t,r){for(const i of n){const a=i?.delay;if(a){const s="number"==typeof a?a:Rl(Uv(a,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(n,t,r){let a=t.currentTimeline.currentTime;const s=null!=r.duration?Rl(r.duration):null,o=null!=r.delay?Rl(r.delay):null;return 0!==s&&n.forEach(l=>{const c=t.appendInstructionToTimeline(l,s,o);a=Math.max(a,c.duration+c.delay)}),a}visitReference(n,t){t.updateOptions(n.options,!0),Qa(this,n.animation,t),t.previousNode=n}visitSequence(n,t){const r=t.subContextCount;let i=t;const a=n.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Yk);const s=Rl(a.delay);i.delayNextStep(s)}n.steps.length&&(n.steps.forEach(s=>Qa(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=n}visitGroup(n,t){const r=[];let i=t.currentTimeline.currentTime;const a=n.options&&n.options.delay?Rl(n.options.delay):0;n.steps.forEach(s=>{const o=t.createSubContext(n.options);a&&o.delayNextStep(a),Qa(this,s,o),i=Math.max(i,o.currentTimeline.currentTime),r.push(o.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=n}_visitTiming(n,t){if(n.dynamic){const r=n.strValue;return Wk(t.params?Uv(r,t.params,t.errors):r,t.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,t){const r=t.currentAnimateTimings=this._visitTiming(n.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=n.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=n}visitStyle(n,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const a=i&&i.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(a):r.setStyles(n.styles,a,t.errors,t.options),t.previousNode=n}visitKeyframes(n,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,o=t.createSubContext().currentTimeline;o.easing=r.easing,n.styles.forEach(l=>{o.forwardTime((l.offset||0)*a),o.setStyles(l.styles,l.easing,t.errors,t.options),o.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(o),t.transformIntoNewTimeline(i+a),t.previousNode=n}visitQuery(n,t){const r=t.currentTimeline.currentTime,i=n.options||{},a=i.delay?Rl(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Yk);let s=r;const o=t.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=o.length;let l=null;o.forEach((c,u)=>{t.currentQueryIndex=u;const h=t.createSubContext(n.options,c);a&&h.delayNextStep(a),c===t.element&&(l=h.currentTimeline),Qa(this,n.animation,h),h.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,h.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=n}visitStagger(n,t){const r=t.parentContext,i=t.currentTimeline,a=n.timings,s=Math.abs(a.duration),o=s*(t.currentQueryTotal-1);let l=s*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":l=o-l;break;case"full":l=r.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const h=u.currentTime;Qa(this,n.animation,t),t.previousNode=n,r.currentStaggerTime=i.currentTime-h+(i.startTime-r.currentTimeline.startTime)}}const Yk={};class tL{constructor(n,t,r,i,a,s,o,l){this._driver=n,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Yk,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Zk(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,t){if(!n)return;const r=n;let i=this.options;null!=r.duration&&(i.duration=Rl(r.duration)),null!=r.delay&&(i.delay=Rl(r.delay));const a=r.params;if(a){let s=i.params;s||(s=this.options.params={}),Object.keys(a).forEach(o=>{(!t||!s.hasOwnProperty(o))&&(s[o]=Uv(a[o],s,this.errors))})}}_copyOptions(){const n={};if(this.options){const t=this.options.params;if(t){const r=n.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return n}createSubContext(n=null,t,r){const i=t||this.element,a=new tL(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(n),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(n){return this.previousNode=Yk,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,t,r){const i={duration:t??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},a=new Udt(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,i,n.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,t,r,i,a,s){let o=[];if(i&&o.push(this.element),n.length>0){n=(n=n.replace($dt,"."+this._enterClassName)).replace(Vdt,"."+this._leaveClassName);let c=this._driver.query(this.element,n,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),o.push(...c)}return!a&&0==o.length&&s.push(function Yut(e){return new oe(3014,!1)}()),o}}class Zk{constructor(n,t,r,i){this._driver=n,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+n),t&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,t){return this.applyStylesToKeyframe(),new Zk(this._driver,n,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,t){this._localTimelineStyles.set(n,t),this._globalTimelineStyles.set(n,t),this._styleSummary.set(n,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Ol),this._currentKeyframe.set(t,Ol);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,t,r,i){t&&this._previousKeyframe.set("easing",t);const a=i&&i.params||{},s=function Hdt(e,n){const t=new Map;let r;return e.forEach(i=>{if("*"===i){r=r||n.keys();for(let a of r)t.set(a,Ol)}else du(i,t)}),t}(n,this._globalTimelineStyles);for(let[o,l]of s){const c=Uv(l,a,r);this._pendingStyles.set(o,c),this._localTimelineStyles.has(o)||this._backFill.set(o,this._globalTimelineStyles.get(o)??Ol),this._updateStyle(o,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,t)=>{this._currentKeyframe.set(t,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,n)}))}snapshotCurrentStyles(){for(let[n,t]of this._localTimelineStyles)this._pendingStyles.set(n,t),this._updateStyle(n,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let t in this._currentKeyframe)n.push(t);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((o,l)=>{const c=du(o,new Map,this._backFill);c.forEach((u,h)=>{"!"===u?n.add(h):u===Ol&&t.add(h)}),r||c.set("offset",l/this.duration),i.push(c)});const a=n.size?jk(n.values()):[],s=t.size?jk(t.values()):[];if(r){const o=i[0],l=new Map(o);o.set("offset",0),l.set("offset",1),i=[o,l]}return JP(this.element,i,a,s,this.duration,this.startTime,this.easing,!1)}}class Udt extends Zk{constructor(n,t,r,i,a,s,o=!1){super(n,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],s=r+t,o=t/s,l=du(n[0]);l.set("offset",0),a.push(l);const c=du(n[0]);c.set("offset",Mre(o)),a.push(c);const u=n.length-1;for(let h=1;h<=u;h++){let d=du(n[h]);const p=d.get("offset");d.set("offset",Mre((t+p*r)/s)),a.push(d)}r=s,t=0,i="",n=a}return JP(this.element,n,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Mre(e,n=3){const t=Math.pow(10,n-1);return Math.round(e*t)/t}class nL{}const Wdt=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class jdt extends nL{normalizePropertyName(n,t){return YP(n)}normalizeStyleValue(n,t,r,i){let a="";const s=r.toString().trim();if(Wdt.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const o=r.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&0==o[1].length&&i.push(function But(e,n){return new oe(3005,!1)}())}return s+a}}function Ere(e,n,t,r,i,a,s,o,l,c,u,h,d){return{type:0,element:e,triggerName:n,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:s,timelines:o,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:d}}const rL={};class Dre{constructor(n,t,r){this._triggerName=n,this.ast=t,this._stateStyles=r}match(n,t,r,i){return function Gdt(e,n,t,r,i){return e.some(a=>a(n,t,r,i))}(this.ast.matchers,n,t,r,i)}buildStyles(n,t,r){let i=this._stateStyles.get("*");return void 0!==n&&(i=this._stateStyles.get(n?.toString())||i),i?i.buildStyles(t,r):new Map}build(n,t,r,i,a,s,o,l,c,u){const h=[],d=this.ast.options&&this.ast.options.params||rL,f=this.buildStyles(r,o&&o.params||rL,h),m=l&&l.params||rL,g=this.buildStyles(i,m,h),y=new Set,b=new Map,_=new Map,v="void"===i,x={params:qdt(m,d),delay:this.ast.options?.delay},S=u?[]:eL(n,t,this.ast.animation,a,s,f,g,x,c,h);let M=0;if(S.forEach(N=>{M=Math.max(N.duration+N.delay,M)}),h.length)return Ere(t,this._triggerName,r,i,v,f,g,[],[],b,_,M,h);S.forEach(N=>{const F=N.element,O=Za(b,F,new Set);N.preStyleProps.forEach(P=>O.add(P));const k=Za(_,F,new Set);N.postStyleProps.forEach(P=>k.add(P)),F!==t&&y.add(F)});const D=jk(y.values());return Ere(t,this._triggerName,r,i,v,f,g,S,D,b,_,M)}}function qdt(e,n){const t=Vv(n);for(const r in e)e.hasOwnProperty(r)&&null!=e[r]&&(t[r]=e[r]);return t}class Kdt{constructor(n,t,r){this.styles=n,this.defaultParams=t,this.normalizer=r}buildStyles(n,t){const r=new Map,i=Vv(this.defaultParams);return Object.keys(n).forEach(a=>{const s=n[a];null!==s&&(i[a]=s)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((s,o)=>{s&&(s=Uv(s,i,t));const l=this.normalizer.normalizePropertyName(o,t);s=this.normalizer.normalizeStyleValue(o,l,s,t),r.set(o,s)})}),r}}class Ydt{constructor(n,t,r){this.name=n,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Kdt(i.style,i.options&&i.options.params||{},r))}),Are(this.states,"true","1"),Are(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Dre(n,i,this.states))}),this.fallbackTransition=function Zdt(e,n,t){return new Dre(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,o)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,t,r,i){return this.transitionFactories.find(s=>s.match(n,t,r,i))||null}matchStyles(n,t,r){return this.fallbackTransition.buildStyles(n,t,r)}}function Are(e,n,t){e.has(n)?e.has(t)||e.set(t,e.get(n)):e.has(t)&&e.set(n,e.get(t))}const Qdt=new Xk;class Jdt{constructor(n,t,r){this.bodyNode=n,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,t){const r=[],a=ZP(this._driver,t,r,[]);if(r.length)throw function rdt(e){return new oe(3503,!1)}();this._animations.set(n,a)}_buildPlayer(n,t,r){const i=n.element,a=hre(this._normalizer,n.keyframes,t,r);return this._driver.animate(i,a,n.duration,n.delay,n.easing,[],!0)}create(n,t,r={}){const i=[],a=this._animations.get(n);let s;const o=new Map;if(a?(s=eL(this._driver,t,a,GP,zk,new Map,new Map,r,Qdt,i),s.forEach(u=>{const h=Za(o,u.element,new Map);u.postStyleProps.forEach(d=>h.set(d,null))})):(i.push(function idt(){return new oe(3300,!1)}()),s=[]),i.length)throw function adt(e){return new oe(3504,!1)}();o.forEach((u,h)=>{u.forEach((d,p)=>{u.set(p,this._driver.computeStyle(h,p,Ol))})});const c=uu(s.map(u=>{const h=o.get(u.element);return this._buildPlayer(u,new Map,h)}));return this._playersById.set(n,c),c.onDestroy(()=>this.destroy(n)),this.players.push(c),c}destroy(n){const t=this._getPlayer(n);t.destroy(),this._playersById.delete(n);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(n){const t=this._playersById.get(n);if(!t)throw function sdt(e){return new oe(3301,!1)}();return t}listen(n,t,r,i){const a=HP(t,"","","");return zP(this._getPlayer(n),r,a,i),()=>{}}command(n,t,r,i){if("register"==r)return void this.register(n,i[0]);if("create"==r)return void this.create(n,t,i[0]||{});const a=this._getPlayer(n);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(n)}}}const Tre="ng-animate-queued",iL="ng-animate-disabled",iht=[],Nre={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},aht={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Es="__ng_removed";class aL{get params(){return this.options.params}constructor(n,t=""){this.namespaceId=t;const r=n&&n.hasOwnProperty("value");if(this.value=function cht(e){return e??null}(r?n.value:n),r){const a=Vv(n);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const t=n.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Hv="void",sL=new aL(Hv);class sht{constructor(n,t,r){this.id=n,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,Ds(t,this._hostClassName)}listen(n,t,r,i){if(!this._triggers.has(t))throw function odt(e,n){return new oe(3302,!1)}();if(null==r||0==r.length)throw function ldt(e){return new oe(3303,!1)}();if(!function uht(e){return"start"==e||"done"==e}(r))throw function cdt(e,n){return new oe(3400,!1)}();const a=Za(this._elementListeners,n,[]),s={name:t,phase:r,callback:i};a.push(s);const o=Za(this._engine.statesByElement,n,new Map);return o.has(t)||(Ds(n,Uk),Ds(n,Uk+"-"+t),o.set(t,sL)),()=>{this._engine.afterFlush(()=>{const l=a.indexOf(s);l>=0&&a.splice(l,1),this._triggers.has(t)||o.delete(t)})}}register(n,t){return!this._triggers.has(n)&&(this._triggers.set(n,t),!0)}_getTrigger(n){const t=this._triggers.get(n);if(!t)throw function udt(e){return new oe(3401,!1)}();return t}trigger(n,t,r,i=!0){const a=this._getTrigger(t),s=new oL(this.id,t,n);let o=this._engine.statesByElement.get(n);o||(Ds(n,Uk),Ds(n,Uk+"-"+t),this._engine.statesByElement.set(n,o=new Map));let l=o.get(t);const c=new aL(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),o.set(t,c),l||(l=sL),c.value!==Hv&&l.value===c.value){if(!function pht(e,n){const t=Object.keys(e),r=Object.keys(n);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!n.hasOwnProperty(a)||e[a]!==n[a])return!1}return!0}(l.params,c.params)){const m=[],g=a.matchStyles(l.value,l.params,m),y=a.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{pp(n,g),zo(n,y)})}return}const d=Za(this._engine.playersByElement,n,[]);d.forEach(m=>{m.namespaceId==this.id&&m.triggerName==t&&m.queued&&m.destroy()});let p=a.matchTransition(l.value,c.value,n,c.params),f=!1;if(!p){if(!i)return;p=a.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:t,transition:p,fromState:l,toState:c,player:s,isFallbackTransition:f}),f||(Ds(n,Tre),s.onStart(()=>{Bg(n,Tre)})),s.onDone(()=>{let m=this.players.indexOf(s);m>=0&&this.players.splice(m,1);const g=this._engine.playersByElement.get(n);if(g){let y=g.indexOf(s);y>=0&&g.splice(y,1)}}),this.players.push(s),d.push(s),s}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(t=>t.delete(n)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const t=this._engine.playersByElement.get(n);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,t){const r=this._engine.driver.query(n,Hk,!0);r.forEach(i=>{if(i[Es])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(n,t,r,i){const a=this._engine.statesByElement.get(n),s=new Map;if(a){const o=[];if(a.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){const u=this.trigger(n,c,Hv,i);u&&o.push(u)}}),o.length)return this._engine.markElementAsRemoved(this.id,n,!0,t,s),r&&uu(o).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const t=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(t&&r){const i=new Set;t.forEach(a=>{const s=a.name;if(i.has(s))return;i.add(s);const l=this._triggers.get(s).fallbackTransition,c=r.get(s)||sL,u=new aL(Hv),h=new oL(this.id,s,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:s,transition:l,fromState:c,toState:u,player:h,isFallbackTransition:!0})})}}removeNode(n,t){const r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,t),this.triggerLeaveAnimation(n,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(n):[];if(a&&a.length)i=!0;else{let s=n;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(n),i)r.markElementAsRemoved(this.id,n,!1,t);else{const a=n[Es];(!a||a===Nre)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,t))}}insertNode(n,t){Ds(n,this._hostClassName)}drainQueuedTransitions(n){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,s=this._elementListeners.get(a);s&&s.forEach(o=>{if(o.name==r.triggerName){const l=HP(a,r.triggerName,r.fromState.value,r.toState.value);l._data=n,zP(r.player,o.phase,l,o.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,s=i.transition.ast.depCount;return 0==a||0==s?a-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(n){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let t=!1;return this._elementListeners.has(n)&&(t=!0),t=!!this._queue.find(r=>r.element===n)||t,t}}class oht{_onRemovalComplete(n,t){this.onRemovalComplete(n,t)}constructor(n,t,r){this.bodyNode=n,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,t){const r=new sht(n,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,o=this.driver.getParentElement(t);for(;o;){const l=i.get(o);if(l){const c=r.indexOf(l);r.splice(c+1,0,n),s=!0;break}o=this.driver.getParentElement(o)}s||r.unshift(n)}else r.push(n);return i.set(t,n),n}register(n,t){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,t)),r}registerTrigger(n,t,r){let i=this._namespaceLookup[n];i&&i.register(t,r)&&this.totalAnimations++}destroy(n,t){if(!n)return;const r=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[n];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const t=new Set,r=this.statesByElement.get(n);if(r)for(let i of r.values())if(i.namespaceId){const a=this._fetchNamespace(i.namespaceId);a&&t.add(a)}return t}trigger(n,t,r,i){if(Qk(t)){const a=this._fetchNamespace(n);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(n,t,r,i){if(!Qk(t))return;const a=t[Es];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(n){const s=this._fetchNamespace(n);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,t){t?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Ds(n,iL)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),Bg(n,iL))}removeNode(n,t,r,i){if(Qk(t)){const a=n?this._fetchNamespace(n):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(n,t,!1,i),r){const s=this.namespacesByHostElement.get(t);s&&s.id!==n&&s.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(n,t,r,i,a){this.collectedLeaveElements.push(t),t[Es]={namespaceId:n,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(n,t,r,i,a){return Qk(t)?this._fetchNamespace(n).listen(t,r,i,a):()=>{}}_buildInstruction(n,t,r,i,a){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,i,n.fromState.options,n.toState.options,t,a)}destroyInnerAnimations(n){let t=this.driver.query(n,Hk,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(n,qP,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){const t=this.playersByElement.get(n);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){const t=this.playersByQueriedElement.get(n);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return uu(this.players).onDone(()=>n());n()})}processLeaveNode(n){const t=n[Es];if(t&&t.setForRemoval){if(n[Es]=Nre,t.namespaceId){this.destroyInnerAnimations(n);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,t.setForRemoval)}n.classList?.contains(iL)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ds(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,n)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?uu(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(n){throw function ddt(e){return new oe(3402,!1)}()}_flushAnimations(n,t){const r=new Xk,i=[],a=new Map,s=[],o=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(z=>{u.add(z);const W=this.driver.query(z,".ng-animate-queued",!0);for(let q=0;q<W.length;q++)u.add(W[q])});const h=this.bodyNode,d=Array.from(this.statesByElement.keys()),p=Rre(d,this.collectedEnterElements),f=new Map;let m=0;p.forEach((z,W)=>{const q=GP+m++;f.set(W,q),z.forEach(J=>Ds(J,q))});const g=[],y=new Set,b=new Set;for(let z=0;z<this.collectedLeaveElements.length;z++){const W=this.collectedLeaveElements[z],q=W[Es];q&&q.setForRemoval&&(g.push(W),y.add(W),q.hasAnimation?this.driver.query(W,".ng-star-inserted",!0).forEach(J=>y.add(J)):b.add(W))}const _=new Map,v=Rre(d,Array.from(y));v.forEach((z,W)=>{const q=zk+m++;_.set(W,q),z.forEach(J=>Ds(J,q))}),n.push(()=>{p.forEach((z,W)=>{const q=f.get(W);z.forEach(J=>Bg(J,q))}),v.forEach((z,W)=>{const q=_.get(W);z.forEach(J=>Bg(J,q))}),g.forEach(z=>{this.processLeaveNode(z)})});const x=[],S=[];for(let z=this._namespaceList.length-1;z>=0;z--)this._namespaceList[z].drainQueuedTransitions(t).forEach(q=>{const J=q.player,te=q.element;if(x.push(J),this.collectedEnterElements.length){const be=te[Es];if(be&&be.setForMove){if(be.previousTriggersValues&&be.previousTriggersValues.has(q.triggerName)){const Ne=be.previousTriggersValues.get(q.triggerName),Fe=this.statesByElement.get(q.element);if(Fe&&Fe.has(q.triggerName)){const Ge=Fe.get(q.triggerName);Ge.value=Ne,Fe.set(q.triggerName,Ge)}}return void J.destroy()}}const ie=!h||!this.driver.containsElement(h,te),pe=_.get(te),le=f.get(te),he=this._buildInstruction(q,r,le,pe,ie);if(he.errors&&he.errors.length)return void S.push(he);if(ie)return J.onStart(()=>pp(te,he.fromStyles)),J.onDestroy(()=>zo(te,he.toStyles)),void i.push(J);if(q.isFallbackTransition)return J.onStart(()=>pp(te,he.fromStyles)),J.onDestroy(()=>zo(te,he.toStyles)),void i.push(J);const _e=[];he.timelines.forEach(be=>{be.stretchStartingKeyframe=!0,this.disabledNodes.has(be.element)||_e.push(be)}),he.timelines=_e,r.append(te,he.timelines),s.push({instruction:he,player:J,element:te}),he.queriedElements.forEach(be=>Za(o,be,[]).push(J)),he.preStyleProps.forEach((be,Ne)=>{if(be.size){let Fe=l.get(Ne);Fe||l.set(Ne,Fe=new Set),be.forEach((Ge,st)=>Fe.add(st))}}),he.postStyleProps.forEach((be,Ne)=>{let Fe=c.get(Ne);Fe||c.set(Ne,Fe=new Set),be.forEach((Ge,st)=>Fe.add(st))})});if(S.length){const z=[];S.forEach(W=>{z.push(function hdt(e,n){return new oe(3505,!1)}())}),x.forEach(W=>W.destroy()),this.reportError(z)}const M=new Map,D=new Map;s.forEach(z=>{const W=z.element;r.has(W)&&(D.set(W,W),this._beforeAnimationBuild(z.player.namespaceId,z.instruction,M))}),i.forEach(z=>{const W=z.element;this._getPreviousPlayers(W,!1,z.namespaceId,z.triggerName,null).forEach(J=>{Za(M,W,[]).push(J),J.destroy()})});const N=g.filter(z=>Lre(z,l,c)),F=new Map;Fre(F,this.driver,b,c,Ol).forEach(z=>{Lre(z,l,c)&&N.push(z)});const k=new Map;p.forEach((z,W)=>{Fre(k,this.driver,new Set(z),l,"!")}),N.forEach(z=>{const W=F.get(z),q=k.get(z);F.set(z,new Map([...W?.entries()??[],...q?.entries()??[]]))});const P=[],j=[],Z={};s.forEach(z=>{const{element:W,player:q,instruction:J}=z;if(r.has(W)){if(u.has(W))return q.onDestroy(()=>zo(W,J.toStyles)),q.disabled=!0,q.overrideTotalTime(J.totalTime),void i.push(q);let te=Z;if(D.size>1){let pe=W;const le=[];for(;pe=pe.parentNode;){const he=D.get(pe);if(he){te=he;break}le.push(pe)}le.forEach(he=>D.set(he,te))}const ie=this._buildAnimation(q.namespaceId,J,M,a,k,F);if(q.setRealPlayer(ie),te===Z)P.push(q);else{const pe=this.playersByElement.get(te);pe&&pe.length&&(q.parentPlayer=uu(pe)),i.push(q)}}else pp(W,J.fromStyles),q.onDestroy(()=>zo(W,J.toStyles)),j.push(q),u.has(W)&&i.push(q)}),j.forEach(z=>{const W=a.get(z.element);if(W&&W.length){const q=uu(W);z.setRealPlayer(q)}}),i.forEach(z=>{z.parentPlayer?z.syncPlayerEvents(z.parentPlayer):z.destroy()});for(let z=0;z<g.length;z++){const W=g[z],q=W[Es];if(Bg(W,zk),q&&q.hasAnimation)continue;let J=[];if(o.size){let ie=o.get(W);ie&&ie.length&&J.push(...ie);let pe=this.driver.query(W,qP,!0);for(let le=0;le<pe.length;le++){let he=o.get(pe[le]);he&&he.length&&J.push(...he)}}const te=J.filter(ie=>!ie.destroyed);te.length?dht(this,W,te):this.processLeaveNode(W)}return g.length=0,P.forEach(z=>{this.players.push(z),z.onDone(()=>{z.destroy();const W=this.players.indexOf(z);this.players.splice(W,1)}),z.play()}),P}elementContainsData(n,t){let r=!1;const i=t[Es];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(n).elementContainsData(t)||r}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,t,r,i,a){let s=[];if(t){const o=this.playersByQueriedElement.get(n);o&&(s=o)}else{const o=this.playersByElement.get(n);if(o){const l=!a||a==Hv;o.forEach(c=>{c.queued||!l&&c.triggerName!=i||s.push(c)})}}return(r||i)&&(s=s.filter(o=>!(r&&r!=o.namespaceId||i&&i!=o.triggerName))),s}_beforeAnimationBuild(n,t,r){const a=t.element,s=t.isRemovalTransition?void 0:n,o=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==a,h=Za(r,c,[]);this._getPreviousPlayers(c,u,s,o,t.toState).forEach(p=>{const f=p.getRealPlayer();f.beforeDestroy&&f.beforeDestroy(),p.destroy(),h.push(p)})}pp(a,t.fromStyles)}_buildAnimation(n,t,r,i,a,s){const o=t.triggerName,l=t.element,c=[],u=new Set,h=new Set,d=t.timelines.map(f=>{const m=f.element;u.add(m);const g=m[Es];if(g&&g.removedBeforeQueried)return new Fv(f.duration,f.delay);const y=m!==l,b=function hht(e){const n=[];return Pre(e,n),n}((r.get(m)||iht).map(M=>M.getRealPlayer())).filter(M=>!!M.element&&M.element===m),_=a.get(m),v=s.get(m),x=hre(this._normalizer,f.keyframes,_,v),S=this._buildPlayer(f,x,b);if(f.subTimeline&&i&&h.add(m),y){const M=new oL(n,o,m);M.setRealPlayer(S),c.push(M)}return S});c.forEach(f=>{Za(this.playersByQueriedElement,f.element,[]).push(f),f.onDone(()=>function lht(e,n,t){let r=e.get(n);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&e.delete(n)}return r}(this.playersByQueriedElement,f.element,f))}),u.forEach(f=>Ds(f,_re));const p=uu(d);return p.onDestroy(()=>{u.forEach(f=>Bg(f,_re)),zo(l,t.toStyles)}),h.forEach(f=>{Za(i,f,[]).push(p)}),p}_buildPlayer(n,t,r){return t.length>0?this.driver.animate(n.element,t,n.duration,n.delay,n.easing,r):new Fv(n.duration,n.delay)}}class oL{constructor(n,t,r){this.namespaceId=n,this.triggerName=t,this.element=r,this._player=new Fv,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>zP(n,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const t=this._player;t.triggerCallback&&n.onStart(()=>t.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,t){Za(this._queuedCallbacks,n,[]).push(t)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const t=this._player;t.triggerCallback&&t.triggerCallback(n)}}function Qk(e){return e&&1===e.nodeType}function Ore(e,n){const t=e.style.display;return e.style.display=n??"none",t}function Fre(e,n,t,r,i){const a=[];t.forEach(l=>a.push(Ore(l)));const s=[];r.forEach((l,c)=>{const u=new Map;l.forEach(h=>{const d=n.computeStyle(c,h,i);u.set(h,d),(!d||0==d.length)&&(c[Es]=aht,s.push(c))}),e.set(c,u)});let o=0;return t.forEach(l=>Ore(l,a[o++])),s}function Rre(e,n){const t=new Map;if(e.forEach(o=>t.set(o,[])),0==n.length)return t;const i=new Set(n),a=new Map;function s(o){if(!o)return 1;let l=a.get(o);if(l)return l;const c=o.parentNode;return l=t.has(c)?c:i.has(c)?1:s(c),a.set(o,l),l}return n.forEach(o=>{const l=s(o);1!==l&&t.get(l).push(o)}),t}function Ds(e,n){e.classList?.add(n)}function Bg(e,n){e.classList?.remove(n)}function dht(e,n,t){uu(t).onDone(()=>e.processLeaveNode(n))}function Pre(e,n){for(let t=0;t<e.length;t++){const r=e[t];r instanceof Zte?Pre(r.players,n):n.push(r)}}function Lre(e,n,t){const r=t.get(e);if(!r)return!1;let i=n.get(e);return i?r.forEach(a=>i.add(a)):n.set(e,r),t.delete(e),!0}class Jk{constructor(n,t,r){this.bodyNode=n,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new oht(n,t,r),this._timelineEngine=new Jdt(n,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(n,t,r,i,a){const s=n+"-"+i;let o=this._triggerCache[s];if(!o){const l=[],u=ZP(this._driver,a,l,[]);if(l.length)throw function tdt(e,n){return new oe(3404,!1)}();o=function Xdt(e,n,t){return new Ydt(e,n,t)}(i,u,this._normalizer),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(t,i,o)}register(n,t){this._transitionEngine.register(n,t)}destroy(n,t){this._transitionEngine.destroy(n,t)}onInsert(n,t,r,i){this._transitionEngine.insertNode(n,t,r,i)}onRemove(n,t,r,i){this._transitionEngine.removeNode(n,t,i||!1,r)}disableAnimations(n,t){this._transitionEngine.markElementAsDisabled(n,t)}process(n,t,r,i){if("@"==r.charAt(0)){const[a,s]=pre(r);this._timelineEngine.command(a,t,s,i)}else this._transitionEngine.trigger(n,t,r,i)}listen(n,t,r,i,a){if("@"==r.charAt(0)){const[s,o]=pre(r);return this._timelineEngine.listen(s,t,o,a)}return this._transitionEngine.listen(n,t,r,i,a)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let mht=(()=>{class e{static#e=this.initialStylesByElement=new WeakMap;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=e.initialStylesByElement.get(t);a||e.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&zo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(zo(this._element,this._initialStyles),this._endStyles&&(zo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(pp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(pp(this._element,this._endStyles),this._endStyles=null),zo(this._element,this._initialStyles),this._state=3)}}return e})();function lL(e){let n=null;return e.forEach((t,r)=>{(function ght(e){return"display"===e||"position"===e})(r)&&(n=n||new Map,n.set(r,t))}),n}class $re{constructor(n,t,r,i){this.element=n,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const t=[];return n.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(n,t,r){return n.animate(this._convertKeyframesToObject(t),r)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&n.set(i,this._finished?r:Cre(this.element,i))}),this.currentSnapshot=n}triggerCallback(n){const t="start"===n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class yht{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,t){return!1}containsElement(n,t){return mre(n,t)}getParentElement(n){return WP(n)}query(n,t,r){return gre(n,t,r)}computeStyle(n,t,r){return window.getComputedStyle(n)[t]}animate(n,t,r,i,a,s=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(l.easing=a);const c=new Map,u=s.filter(p=>p instanceof $re);(function kdt(e,n){return 0===e||0===n})(r,i)&&u.forEach(p=>{p.currentSnapshot.forEach((f,m)=>c.set(m,f))});let h=function xdt(e){return e.length?e[0]instanceof Map?e:e.map(n=>vre(n)):[]}(t).map(p=>du(p));h=function Sdt(e,n,t){if(t.size&&n.length){let r=n[0],i=[];if(t.forEach((a,s)=>{r.has(s)||i.push(s),r.set(s,a)}),i.length)for(let a=1;a<n.length;a++){let s=n[a];i.forEach(o=>s.set(o,Cre(e,o)))}}return n}(n,h,c);const d=function fht(e,n){let t=null,r=null;return Array.isArray(n)&&n.length?(t=lL(n[0]),n.length>1&&(r=lL(n[n.length-1]))):n instanceof Map&&(t=lL(n)),t||r?new mht(e,t,r):null}(n,h);return new $re(n,h,l,d)}}let bht=(()=>{class e extends qte{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:cs.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Xte(t):t;return Bre(this._renderer,null,r,"register",[i]),new _ht(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||e)(Y(xy),Y(Je))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();class _ht extends dat{constructor(n,t){super(),this._id=n,this._renderer=t}create(n,t){return new vht(this._id,n,t||{},this._renderer)}}class vht{constructor(n,t,r,i){this.id=n,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(n,t){return this._renderer.listen(this.element,`@@${this.id}:${n}`,t)}_command(n,...t){return Bre(this._renderer,this.element,this.id,n,t)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Bre(e,n,t,r,i){return e.setProperty(n,`@@${t}:${r}`,i)}const Vre="@.disabled";let xht=(()=>{class e{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,s)=>{const o=s?.parentNode(a);o&&s.removeChild(o,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let u=this._rendererCache.get(a);return u||(u=new zre("",a,this.engine,()=>this._rendererCache.delete(a)),this._rendererCache.set(a,u)),u}const s=r.id,o=r.id+"-"+this._currentId;this._currentId++,this.engine.register(o,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(s,o,t,u.name,u)};return r.data.animation.forEach(l),new wht(this,o,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[s,o]=a;s(o)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||e)(Y(xy),Y(Jk),Y(We))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();class zre{constructor(n,t,r,i){this.namespaceId=n,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?a=>t.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(n,t){return this.delegate.createElement(n,t)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,t){this.delegate.appendChild(n,t),this.engine.onInsert(this.namespaceId,t,n,!1)}insertBefore(n,t,r,i=!0){this.delegate.insertBefore(n,t,r),this.engine.onInsert(this.namespaceId,t,n,i)}removeChild(n,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(n,t){return this.delegate.selectRootElement(n,t)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,t,r,i){this.delegate.setAttribute(n,t,r,i)}removeAttribute(n,t,r){this.delegate.removeAttribute(n,t,r)}addClass(n,t){this.delegate.addClass(n,t)}removeClass(n,t){this.delegate.removeClass(n,t)}setStyle(n,t,r,i){this.delegate.setStyle(n,t,r,i)}removeStyle(n,t,r){this.delegate.removeStyle(n,t,r)}setProperty(n,t,r){"@"==t.charAt(0)&&t==Vre?this.disableAnimations(n,!!r):this.delegate.setProperty(n,t,r)}setValue(n,t){this.delegate.setValue(n,t)}listen(n,t,r){return this.delegate.listen(n,t,r)}disableAnimations(n,t){this.engine.disableAnimations(n,t)}}class wht extends zre{constructor(n,t,r,i,a){super(t,r,i,a),this.factory=n,this.namespaceId=t}setProperty(n,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Vre?this.disableAnimations(n,r=void 0===r||!!r):this.engine.process(this.namespaceId,n,t.slice(1),r):this.delegate.setProperty(n,t,r)}listen(n,t,r){if("@"==t.charAt(0)){const i=function Cht(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(n);let a=t.slice(1),s="";return"@"!=a.charAt(0)&&([a,s]=function kht(e){const n=e.indexOf(".");return[e.substring(0,n),e.slice(n+1)]}(a)),this.engine.listen(this.namespaceId,i,a,s,o=>{this.factory.scheduleListenerCallback(o._data||-1,r,o)})}return this.delegate.listen(n,t,r)}}let Sht=(()=>{class e extends Jk{constructor(t,r,i,a){super(t.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||e)(Y(Je),Y(jP),Y(nL),Y(ic))};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac})}return e})();const Ure=[{provide:qte,useClass:bht},{provide:nL,useFactory:function Iht(){return new jdt}},{provide:Jk,useClass:Sht},{provide:xy,useFactory:function Mht(e,n,t){return new xht(e,n,t)},deps:[n2,Jk,We]}],cL=[{provide:jP,useFactory:()=>new yht},{provide:ds,useValue:"BrowserAnimations"},...Ure],uL=[{provide:jP,useClass:yre},{provide:ds,useValue:"NoopAnimations"},...Ure];let Eht=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?uL:cL}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({providers:cL,imports:[s2]})}return e})(),Dht=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({providers:uL,imports:[s2]})}return e})();const Aht=["video"],Tht=["canvas"],Nht=["result"],Oht=["toSend"],Fht=["credentialCanvas"];function Rht(e,n){1&e&&we(0,"canvas",2,3)}function Pht(e,n){if(1&e&&(B(0,"div",18)(1,"div",19),ye(2),K(),B(3,"div",20),ye(4),K()()),2&e){const t=ze(3);ne(2),On(t.errorFace.title),ne(2),On(t.errorFace.subtitle)}}function Lht(e,n){if(1&e&&(B(0,"div",7)(1,"div",8),Ae(2,Pht,5,2,"div",9),K(),B(3,"div",10),we(4,"video",11,12)(6,"div",13,14)(8,"canvas",15,16)(10,"canvas",15,17),K()()),2&e){const t=ze(2);ne(2),me("ngIf",t.errorFace&&!t.loadingResults),ne(1),tc("width",t.WIDTH,"px")("height",t.HEIGHT,"px"),ne(1),tc("max-width",t.maxWidth,"px")("max-height",t.maxHeight,"px"),Xt("hidden",t.base64Image),ne(2),tc("width",t.WIDTH,"px")("height",t.HEIGHT,"px"),Xt("hidden",t.base64Image),ne(2),Xt("hidden",!t.base64Image),ne(2),Xt("hidden",!0)}}function $ht(e,n){1&e&&(B(0,"div",21),we(1,"img",22),B(2,"h1",23),ye(3),rt(4,"transloco"),K(),B(5,"p",23),ye(6),rt(7,"transloco"),K()()),2&e&&(ne(3),On(lt(4,2,"id_scanning.camera_not_found")),ne(3),Ot(" ",lt(7,4,"id_scanning.camera_not_found_description")," "))}function Bht(e,n){if(1&e&&(B(0,"div",4),Ae(1,Lht,12,21,"div",5),Ae(2,$ht,8,6,"div",6),K()),2&e){const t=ze();ne(1),me("ngIf",!t.loadingModel&&!t.lowCamera),ne(1),me("ngIf",!t.loadingModel&&t.lowCamera)}}let Vht=null,zht=(()=>{class e{constructor(t,r,i,a,s){this._changeDetectorRef=t,this._translocoService=r,this.renderer=i,this._walletService=a,this._navigation=s,this.debugText="debug",this.OVAL={},this.loadingResults=!1,this.loadingModel=!1,this._unsubscribeAll=new je,this.minPixelFace=234,this.videoOptions={frameRate:{ideal:30,max:30}},this.setMaxDimensions=()=>{this.maxHeight=Math.floor(.7*window.innerHeight),this.maxWidth=Math.floor(.9*window.innerWidth)},this.setCanvasDimension=()=>{!this.videoInput||!this.maxWidth||!this.maxHeight||(this.HEIGHT=Math.min(this.videoInput.clientHeight,this.maxHeight),this.WIDTH=Math.min(this.videoInput.clientWidth,this.maxWidth),this.videoCenterX=this.WIDTH/2,this.videoCenterY=this.HEIGHT/2,this.marginY=.04*this.HEIGHT,this.marginX=.8*this.marginY,this.OVAL.radiusY=.42*this.HEIGHT,this.OVAL.radiusX=.75*this.OVAL.radiusY,2*this.OVAL.radiusX>=this.WIDTH&&(this.OVAL.radiusX=.48*this.WIDTH,this.OVAL.radiusY=this.OVAL.radiusX/.75),this.displaySize={width:this.WIDTH,height:this.HEIGHT},this.resizeDimensions={rectHeight:this.HEIGHT,rectWidth:Math.min(2.8*this.OVAL.radiusX,this.WIDTH),y:0,x:this.videoCenterX-Math.min(2.8*this.OVAL.radiusX,this.WIDTH)/2},this.originalDimensions={rectHeight:this.videoDimensions.height,rectWidth:this.resizeDimensions.rectWidth/this.WIDTH*this.videoDimensions.width,y:0,x:this.resizeDimensions.x/this.WIDTH*this.videoDimensions.width})},Vht=this,this.loadingModel=!0,this.lowCamera=!1,this.debugIndex=0,this.successPosition=0,this.showError=!1,this.errorContent={message:""},this.osInfo=this.detectOS(),this.demoData=this._walletService.getDeviceData(),this.videoOptions[this.demoData.isMobile?"width":"height"]={ideal:1080},this.listenModeDebug()}ngOnInit(){var t=this;return R(function*(){console.log({type:t.type,data:t.data}),t._generateSession(t.type),t.errorFace=null,t.loadingResults=!1,t.base64Image=null,yield t.loadImages(),t.setMaxDimensions(),t.renderer.listen("window","resize",()=>{t.setMaxDimensions(),t.videoInput&&(t.setCanvasDimension(),t.setConfigCanvas())}),t._walletService.faceapi$.subscribe(r=>{t.loadingModel=!r,r&&t.startAsyncVideo()})})()}_generateSession(t){const{hash:r}=this._walletService.generateUniqueId();this._walletService.createLivenessSession({identifier:r,type:t}).subscribe(i=>{localStorage.setItem("accessToken",i.data.token)})}listenModeDebug(){this.isActiveDebug=!!localStorage.getItem("isActiveDebug"),document.addEventListener("keydown",t=>{if(this.debugText.charAt(this.debugIndex)===t.key.toLowerCase())return 3===this.debugIndex&&(this.isActiveDebug=!this.isActiveDebug,localStorage.setItem("isActiveDebug",this.isActiveDebug?"true":""),this._changeDetectorRef.markForCheck()),this.debugIndex++;this.debugIndex=0})}stopRecord(){this.detectFaceInterval&&clearInterval(this.detectFaceInterval),this.stream&&this.stream.getTracks().forEach(t=>t.stop())}loadImages(){var t=this;return R(function*(){t.left=new Image,t.left.crossOrigin="anonymous",t.left.src="https://cdn.verifik.co/web-sdk/images/left.png",t.right=new Image,t.right.crossOrigin="anonymous",t.right.src="https://cdn.verifik.co/web-sdk/images/right.png",t.up=new Image,t.up.crossOrigin="anonymous",t.up.src="https://cdn.verifik.co/web-sdk/images/up.png",t.down=new Image,t.down.crossOrigin="anonymous",t.down.src="https://cdn.verifik.co/web-sdk/images/down.png"})()}startAsyncVideo(){var t=this;return R(function*(){try{t.stream=yield navigator.mediaDevices.getUserMedia({video:t.videoOptions,audio:!1}),t.videoInput=t.video?.nativeElement,t.videoInput.srcObject=t.stream,t.videoInput.style.transform="scaleX(-1)",t.canvasRef&&(t.canvasRef.nativeElement.style.transform="scaleX(-1)");const i=t.stream.getVideoTracks()[0].getSettings(),{width:a,height:s}=i;if(t.videoDimensions={height:s,width:a},s<600)return t.lowCamera=!0,void(t.loadingModel=!1);t.videoInput.addEventListener("loadeddata",()=>{t.video||t.canvas?(t.setCanvasDimension(),t.detectFaces()):t.stopRecord()})}catch(r){r&&alert(`${r.message}`),console.error("SHOW ERROR",r)}})()}detectFaces(){var t=this;return R(function*(){yield t.setConfigCanvas(),t.detectFaceInterval=setInterval(R(function*(){if(t.videoInput)try{const r=yield WC(t.videoInput,new eu({minConfidence:.2})).withFaceLandmarks(),i=t.canvas.getContext("2d");r.length>0&&(t.lastFace=r[0],t.errorFace=null,t.drawFaceAndCenter(r,i),t.isFaceCentered(t.lastFace.landmarks.getNose()[3]),t.isFaceClose(t.lastFace.landmarks),t.drawStatusOval(i),t.errorFace?t.successPosition=0:++t.successPosition,t.errorFace||(t.successPosition=0,t.captureBase64Image())),t._changeDetectorRef.markForCheck()}catch(r){alert(r.message)}}),t.demoData.isMobile?500:300)})()}setConfigCanvas(){var t=this;return R(function*(){if(!t.videoInput)return;!t.canvas&&t.canvasRef&&(t.canvas=yield NF(t.videoInput),t.canvasEl=t.canvasRef.nativeElement,t.canvasEl.appendChild(t.canvas),t.canvas.setAttribute("id","canvas")),function yQe(e,n,t=!1){let{width:r,height:i}=t?TF(n):n;e.width=r,e.height=i}(t.canvas,t.displaySize);const r=t.canvas.getContext("2d");t.drawOvalCenterAndMask(r)})()}drawFaceAndCenter(t,r){const i=rJ(t,this.displaySize);this.drawOvalCenterAndMask(r),this.isActiveDebug&&(r.strokeStyle="red",r.lineWidth=4,r.strokeRect(this.videoCenterX-this.marginX,this.videoCenterY,2*this.marginX,2*this.marginY),AC.drawFaceLandmarks(this.canvas,i),AC.drawFaceExpressions(this.canvas,i),new AC.DrawBox(t[0].detection.box,{label:`${t[0].gender.toUpperCase()} | ${Math.round(t[0].age)} years old`}).draw(this.canvas))}drawOvalCenterAndMask(t){t.clearRect(0,0,this.canvas.width,this.canvas.height),t.fillStyle="rgba(255, 255, 255, 0.75)",t.fillRect(0,0,this.canvas.width,this.canvas.height),t.globalCompositeOperation="destination-out",t.fillStyle="rgba(255, 255, 255, 1)",t.beginPath(),t.ellipse(this.videoCenterX,this.videoCenterY,this.OVAL.radiusX,this.OVAL.radiusY,0,0,2*Math.PI),t.fill(),t.closePath(),t.globalCompositeOperation="source-over"}drawText(t,r,i,a){t.font="30px Arial",t.textAlign="center";const s=t.measureText(r);t.fillStyle="black",t.fillRect(i-s.width/2,a-30-10,s.width+2,60),t.fillStyle="white",t.fillText(r,i,a)}drawStatusOval(t){const r=!(!this.errorFace||!this.errorFace.title);t.beginPath(),t.ellipse(this.videoCenterX,this.videoCenterY,this.OVAL.radiusX,this.OVAL.radiusY,0,0,2*Math.PI),t.lineWidth=5,t.strokeStyle=r?"green":"red",t.stroke(),t.closePath(),!r&&this.errorFace&&(this.errorFace.canvas?.includes("\u2191")&&t.drawImage(this.up,this.videoCenterX-20,this.videoCenterY-this.OVAL.radiusY+10,40,40),this.errorFace.canvas?.includes("\u2193")&&t.drawImage(this.down,this.videoCenterX-20,this.videoCenterY+this.OVAL.radiusY-50,40,40),this.errorFace.canvas?.includes("\u2192")&&t.drawImage(this.right,this.videoCenterX+this.OVAL.radiusX-50,this.videoCenterY-20,40,40),this.errorFace.canvas?.includes("\u2190")&&t.drawImage(this.left,this.videoCenterX-this.OVAL.radiusX+10,this.videoCenterY-20,40,40)),this._changeDetectorRef.markForCheck()}isFaceCentered(t){if(!this.WIDTH||!this.HEIGHT)return;const r=t.x/this.videoDimensions.width*this.WIDTH,i=t.y/this.videoDimensions.height*this.HEIGHT;if(!(r>this.videoCenterX-this.marginX&&r<this.videoCenterX+this.marginX&&i>this.videoCenterY&&i<this.videoCenterY+2.5*this.marginY)){let s="";(r<this.videoCenterX-this.marginX||r>this.videoCenterX+this.marginX)&&(s+=` ${r<this.videoCenterX-this.marginX?"\u2192":"\u2190"} `),(i<this.videoCenterY||i>this.videoCenterY+2*this.marginY)&&(s+=` ${i<this.videoCenterY?"\u2191":"\u2193"}  `),this.errorFace={title:this._translocoService.translate("liveness.center_yor_face"),subtitle:this._translocoService.translate("liveness.center_your_face_subtitle"),canvas:s}}}isFaceClose(t){this.originalDimensions&&(t.imageHeight*t.imageWidth/Math.floor(this.originalDimensions.rectHeight*this.originalDimensions.rectWidth)<.25||t.imageHeight<this.minPixelFace||t.imageWidth<this.minPixelFace)&&(this.errorFace={title:this._translocoService.translate("liveness.get_closer"),subtitle:this._translocoService.translate("liveness.get_closer_subtitle")})}captureBase64Image(){this.saveImageBase64Intent||(this.saveImageBase64Intent=setTimeout(()=>{this.errorFace&&(this.saveImageBase64Intent=clearTimeout(this.saveImageBase64Intent)),this.takePicture()},1500))}takePicture(){var t=this;return R(function*(){if(!t.canvasResultRef||!t.canvasToSendRef)return;const r=t.canvasToSendRef.nativeElement;t.setPictureInCavas(t.canvasResultRef.nativeElement,t.resizeDimensions,t.originalDimensions),t.setPictureInCavas(r,t.originalDimensions),t.base64Image=r.toDataURL("image/jpeg").replace(/^data:.*;base64,/,""),t.stopRecord(),t.validateBiometrics()})()}setPictureInCavas(t,r,i){if(!this.video)return;const a=t.getContext("2d");t.width=r.rectWidth,t.height=r.rectHeight,t.style.marginLeft=`${r.x}px`,t.style.marginTop=`${r.y}px`,i||(i={x:r.x,y:r.y,rectWidth:r.rectWidth,rectHeight:r.rectHeight}),a.drawImage(this.video.nativeElement,i.x,i.y,i.rectWidth,i.rectHeight,0,0,r.rectWidth,r.rectHeight)}detectOS(){const t=window.navigator.userAgent.toLowerCase();return/android/.test(t)?"ANDROID":/iphone|ipad|ipod/.test(t)?"IOS":"DESKTOP"}validateBiometrics(){if(this.loadingResults)return;this.loadingResults=!0;const t={image:this.base64Image,os:this.osInfo};switch(this.type){case"createWallet":this._createWallet(t,this.data);break;case"decryptWallet":this._decryptWallet(t,this.data)}}_createWallet(t,r){this._walletService.createWallet({faceBase64:t.image,password:r.password||void 0,wordsCount:r.wordsCount}).subscribe({next:i=>{},error:i=>{this.errorContent=i.error,this.showError=!0},complete:()=>{}})}_decryptWallet(t,r){this._walletService.decryptWAllet({faceBase64:t.image,wallet:r.hash,password:r.password||void 0}).subscribe({next:i=>{this.callback(i.data)},error:i=>{this.errorContent=i.error,this.showError=!0},complete:()=>{}})}completeResults(){this.errorFace=null,this.loadingResults=!1,this.base64Image=null,this.errorResult||this.stopRecord(),this.saveImageBase64Intent&&(this.saveImageBase64Intent=clearTimeout(this.saveImageBase64Intent)),this._changeDetectorRef.markForCheck()}ngOnDestroy(){this._unsubscribeAll.next(null),this.loadingResults=!1,this.video=void 0,this.detectFaceInterval&&this.stopRecord()}continueRedirection(t){}static#e=this.\u0275fac=function(r){return new(r||e)(E(fi),E(su),E(Pa),E(ek),E(mi))};static#t=this.\u0275cmp=Ut({type:e,selectors:[["biometrics"]],viewQuery:function(r,i){if(1&r&&(hn(Aht,5),hn(Tht,5),hn(Nht,5),hn(Oht,5),hn(Fht,5)),2&r){let a;ft(a=mt())&&(i.video=a.first),ft(a=mt())&&(i.canvasRef=a.first),ft(a=mt())&&(i.canvasResultRef=a.first),ft(a=mt())&&(i.canvasToSendRef=a.first),ft(a=mt())&&(i.credentialRef=a.first)}},inputs:{type:"type",data:"data",callback:"callback"},standalone:!0,features:[y0],decls:2,vars:2,consts:[["hidden","true",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","min-h-[60vh] justify-center p-4 sm:p-1 xs:p-1 w-full",4,"ngIf"],["hidden","true"],["credentialCanvas",""],["fxLayout","column","fxLayoutAlign","center center",1,"min-h-[60vh]","justify-center","p-4","sm:p-1","xs:p-1","w-full"],["fxLayout","column","fxLayoutAlign","center center","class","w-full",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","id-scanning-error-div",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"w-full"],["fxLayout","column","fxLayoutAlign","center center",1,"text-center","h-20","sm:h-8","xs:h-8","my-2"],["class","mb-4",4,"ngIf"],[1,"relative"],["autoplay","",1,"absolute","top-0","left-0","oval-video"],["video",""],[1,"absolute","top-0","left-0","oval-video"],["canvas",""],[1,"absolute"],["result",""],["toSend",""],[1,"mb-4"],[1,"text-3xl","font-bold"],[1,"text-gray-600"],["fxLayout","column","fxLayoutAlign","center center",1,"id-scanning-error-div"],["src","https://cdn.verifik.co/demo/nocameraenabled.svg","alt","",1,"id-scanning-no-camera-enabled-img"],[1,"mt-4"]],template:function(r,i){1&r&&(Ae(0,Rht,2,0,"canvas",0),Ae(1,Bht,3,2,"div",1)),2&r&&(me("ngIf",!i.showError),ne(1),me("ngIf",!i.showError))},dependencies:[BP,$o,Bo,Va,ma,Bne,RR,mv,Ek,zne,Une],styles:['mat-stepper[_ngcontent-%COMP%]{width:100%}.id-scanning-error-div[_ngcontent-%COMP%]{margin-top:20px;width:600px;background:white;height:600px;padding:16px;box-shadow:3px 3px 3px 3px #0000000d}.id-scanning-error-div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0036e7;font-size:24px;font-weight:800;text-align:center}.id-scanning-error-div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#01236da6;font-size:16px;font-weight:300;text-align:center}.scan[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;flex-direction:column}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]{content:"";position:relative;width:130px;height:200px;background:url(https://cdn.verifik.co/web-sdk/images/face.png);background-size:130px 200px}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:url(https://cdn.verifik.co/web-sdk/images/smoothed-face.png);background-size:130px 200px;animation:_ngcontent-%COMP%_animate 2s ease-in-out infinite}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:100%;height:8px;background:#01236d;border-radius:8px;filter:drop-shadow(0 0 20px #01236d) drop-shadow(0 0 60px #01236d);animation:_ngcontent-%COMP%_animate_line 2s ease-in-out infinite}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]{position:absolute;inset:0}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:130px;height:200px;background:url(https://cdn.verifik.co/web-sdk/images/points-face.png);background-size:130px 200px;animation:_ngcontent-%COMP%_face_points 2s ease-in-out infinite}.scan[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:130px;height:200px;background:url(https://cdn.verifik.co/web-sdk/images/lines-points-face.png);background-size:130px 200px;animation:_ngcontent-%COMP%_face_points_lines 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_face_points_lines{0%,to{height:0%}50%{height:100%}}@keyframes _ngcontent-%COMP%_face_points{0%,25%,to{height:0%}50%{height:100%}}@keyframes _ngcontent-%COMP%_animate{0%,to{height:0%}50%{height:100%}}@keyframes _ngcontent-%COMP%_animate_line{0%,to{top:0%;opacity:.8}50%{top:100%;opacity:.8}}.back-biometric-animation[_ngcontent-%COMP%]{background:black;width:100%;height:100%}.oval-video[_ngcontent-%COMP%]{border-radius:25px!important;overflow:hidden;max-width:100%}video[_ngcontent-%COMP%]{object-fit:cover}.medium[_ngcontent-%COMP%]   .mat-progress-bar-fill[_ngcontent-%COMP%]:after{background-color:#eab417!important}.failed[_ngcontent-%COMP%]   .mat-progress-bar-fill[_ngcontent-%COMP%]:after{background-color:#f20505!important}.good[_ngcontent-%COMP%]   .mat-progress-bar-fill[_ngcontent-%COMP%]:after{background-color:green!important}.error-dialog[_ngcontent-%COMP%]{width:400px;min-height:350px;padding:16px}.error-dialog[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px}.error-dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:600;text-align:center;padding-top:20px;padding-bottom:20px}.error-dialog[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#000!important}.single-chart[_ngcontent-%COMP%]{width:50%;justify-content:space-around}.circular-chart[_ngcontent-%COMP%]{display:block;margin:10px auto;max-width:80%;max-height:250px}.circle-bg[_ngcontent-%COMP%]{fill:none;stroke:#eee;stroke-width:3.8}.circle[_ngcontent-%COMP%]{fill:none;stroke-width:2.8;stroke-linecap:round;animation:_ngcontent-%COMP%_progress 1s ease-out forwards}@keyframes _ngcontent-%COMP%_progress{0%{stroke-dasharray:0 100}}.circular-chart.orange[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke:#ff9f00}.circular-chart.red[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke:#f20707c8}.circular-chart.green[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke:#4cc790}.circular-chart.blue[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{stroke:#3c9ee5}.percentage[_ngcontent-%COMP%]{fill:#666;font-family:sans-serif;font-size:.5em;text-anchor:middle}.w-full[_ngcontent-%COMP%]{width:100%}.justify-center[_ngcontent-%COMP%]{justify-content:center}.p-4[_ngcontent-%COMP%]{padding:1rem}.sm\\:p-1[_ngcontent-%COMP%], .xs\\:p-1[_ngcontent-%COMP%]{padding:.25rem}.text-center[_ngcontent-%COMP%]{text-align:center}.h-20[_ngcontent-%COMP%]{height:5rem}.sm\\:h-8[_ngcontent-%COMP%], .xs\\:h-8[_ngcontent-%COMP%]{height:2rem}.my-2[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.text-3xl[_ngcontent-%COMP%]{font-size:1.875rem;line-height:2.25rem}.font-bold[_ngcontent-%COMP%]{font-weight:700}.text-gray-600[_ngcontent-%COMP%]{color:#4b5563}.relative[_ngcontent-%COMP%]{position:relative}.absolute[_ngcontent-%COMP%]{position:absolute}.hidden[_ngcontent-%COMP%]{display:none}']})}return e})(),Kht=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[Cn,Va,Cn]})}return e})(),qre=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[Cn,Cn]})}return e})(),ept=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({imports:[ap]})}return e})(),hL=(()=>{class e{constructor(){this.changes=new je,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=de({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const dpt={provide:hL,deps:[[new Kl,new Vp,hL]],useFactory:function upt(e){return e||new hL}};let hpt=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e});static#n=this.\u0275inj=Ye({providers:[dpt,mP],imports:[Cn,Va,$g,ept,qre,Dv,Cn]})}return e})(),ppt=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Ze({type:e,bootstrap:[Tut]});static#n=this.\u0275inj=Ye({imports:[s2,Dut,BP,Va,Ek,nst,met,Out,Dht,Eht,Crt,krt,$k,Dot,zht,ore,are,Kht,qre,tat,hpt,tut,gne]})}return e})();Jge().bootstrapModule(ppt).catch(e=>console.error(e))},7:yu=>{function Ts(Ln){return Ln&&Ln.constructor&&"function"==typeof Ln.constructor.isBuffer&&Ln.constructor.isBuffer(Ln)}function is(Ln){return Ln}function _t(Ln,rr){const ln=(rr=rr||{}).delimiter||".",Vl=rr.maxDepth,bu=rr.transformKey||is,zl={};return function Ns(as,_u,Os){Os=Os||1,Object.keys(as).forEach(function(Qn){const cn=as[Qn],Sr=rr.safe&&Array.isArray(cn),wi=Object.prototype.toString.call(cn),Ir=Ts(cn),jo="[object Object]"===wi||"[object Array]"===wi,vu=_u?_u+ln+bu(Qn):bu(Qn);if(!Sr&&!Ir&&jo&&Object.keys(cn).length&&(!rr.maxDepth||Os<Vl))return Ns(cn,vu,Os+1);zl[vu]=cn})}(Ln),zl}yu.exports=_t,_t.flatten=_t,_t.unflatten=function vp(Ln,rr){const ln=(rr=rr||{}).delimiter||".",Vl=rr.overwrite||!1,bu=rr.transformKey||is,zl={};if(Ts(Ln)||"[object Object]"!==Object.prototype.toString.call(Ln))return Ln;function as(Qn){const cn=Number(Qn);return isNaN(cn)||-1!==Qn.indexOf(".")||rr.object?Qn:cn}return Ln=Object.keys(Ln).reduce(function(Qn,cn){const Sr=Object.prototype.toString.call(Ln[cn]);return"[object Object]"!==Sr&&"[object Array]"!==Sr||function Os(Qn){const cn=Object.prototype.toString.call(Qn);return!Qn||("[object Array]"===cn?!Qn.length:"[object Object]"===cn?!Object.keys(Qn).length:void 0)}(Ln[cn])?(Qn[cn]=Ln[cn],Qn):function _u(Qn,cn,Sr){return Object.keys(Sr).reduce(function(wi,Ir){return wi[Qn+ln+Ir]=Sr[Ir],wi},cn)}(cn,Qn,_t(Ln[cn],rr))},{}),Object.keys(Ln).forEach(function(Qn){const cn=Qn.split(ln).map(bu);let Sr=as(cn.shift()),wi=as(cn[0]),Ir=zl;for(;void 0!==wi;){if("__proto__"===Sr)return;const jo=Object.prototype.toString.call(Ir[Sr]),vu="[object Object]"===jo||"[object Array]"===jo;if(!Vl&&!vu&&typeof Ir[Sr]<"u")return;(Vl&&!vu||!Vl&&null==Ir[Sr])&&(Ir[Sr]="number"!=typeof wi||rr.object?{}:[]),Ir=Ir[Sr],cn.length>0&&(Sr=as(cn.shift()),wi=as(cn[0]))}Ir[Sr]=vp(Ln[Qn],rr)}),zl}},741:yu=>{function Ts(is){var _t=new Error("Cannot find module '"+is+"'");throw _t.code="MODULE_NOT_FOUND",_t}Ts.keys=()=>[],Ts.resolve=Ts,Ts.id=741,yu.exports=Ts}},yu=>{yu(yu.s=586)}]);